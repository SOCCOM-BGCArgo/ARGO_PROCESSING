function [Y,Xf,Af] = ESPER_oxygen_8_Atl_4(X,~,~)
%ESPER_OXYGEN_8_ATL_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_8_Atl_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.7761206434949536881;0.91271517944281888024;-1.139768008511048647;5.7139041706801689813;8.4961853336341679466;5.6205239328198555171;-2.8577215342376440788;-0.98090754765122067926;-2.5403769316053654848;2.7665165981588746291;-4.2167538129027839489;-3.6879362780287316959;-1.5796255144961184325;2.199568348638534232;-0.1266845984630748656;3.7309055310426146868;-0.87564257086345054226;1.5219718728407414243;-3.2442555358288012179;-2.0265674636261663544;4.6774723379040343829;-14.919310823968803703;3.0152677285390381279;-4.0562220165335229893;-2.5381471704892359931;1.2902505644028083864;4.9196147596746708786;-1.1697308762215516964;2.8134238010444416744;-1.2295625717429889967];
IW1_1 = [-1.756755642431445219 -0.72964506689953056995 -2.88146071915886548 0.030271659532239040408 -2.3422342056734972715 1.3531390569651529088;-0.59042024726381081567 1.5193432291442972026 -0.99578524023374404006 0.65083140600735267522 -1.4108784469983166598 0.4021572320377179155;1.3574064781985504258 -0.74410751722304202538 -4.57145034702577302 -0.4370959007560114018 -1.8456218137631650311 -0.77424395183659477926;-0.18808415242838058545 -0.36178946216819479753 -0.62846531470132771524 1.1491919049452781199 -7.6836648587106122221 -0.099344696178251090668;1.2091619278553429329 -0.49048768472698067722 6.6117800844993430687 1.0775079586948905774 -7.2659837777351521382 0.69773895230574667359;-0.99597182760162972226 1.3160337643098067861 -2.3369829853182899626 1.5601254011800842481 -1.6609932286583999339 1.3585391261329251567;1.3638273574318116044 -0.47815560908516258065 -0.37805829881889885247 0.93003301143812544538 2.7654047409230231303 -2.0823604396152282092;1.1430821298335389624 -0.81013075321233929404 -0.41737091489686795054 -1.2769826085846325281 -1.8367022266813430864 -0.6323801632907445347;-0.092610870396152344952 -0.20379030008874679525 0.17000407803334441348 0.68278736657734662163 0.62398278297292475436 -2.6793745286418810814;-1.1256647714177179243 1.6247263344494993209 -1.8941917526605369648 1.4554601119845369528 -2.4253234568104162783 2.2543296909586425514;7.8860441709222337536 4.1641753866165407416 -3.199860589954413026 0.74115696957923860033 12.433732003812499656 -1.8678224905373159714;1.2235831931751577351 -1.6254854026969973724 -3.1224176895177606639 -1.4244337629550969382 2.2708585659474369578 -3.2199893813465525483;1.551234820732680264 1.7826308886108925833 -1.1247760505780470819 0.12529517928107292146 0.57295016938789689043 -1.3262056539384319276;-0.99065486755228682192 3.580032984443969557 0.53943734011408950302 -0.86855397649213339495 -0.74674930805050687699 1.0816364956019013377;-2.0505557340856892523 -1.7881047783837193954 1.2248921097924907464 -0.42937484639700085332 2.0922280947843563403 1.0890696051339527894;-0.65818432845391494634 1.0902264428825840792 -0.35757088762627814438 1.2135889257552781029 -0.087293810509984678947 2.0925686866343551351;-3.3569897519790190543 -1.0015525878974289586 3.7321857704629244346 -0.18191684978269823114 -4.5702152523066175149 1.8454905688323421931;2.5489256614603443829 1.7767710585843528026 0.25493461887055529624 -2.424846508202309181 -4.7318815254058312902 0.93603062572784645479;0.36360650180397502407 -0.70154861035714966011 -0.83922209458995755682 -0.99301473040475118914 -0.67622240462975491404 -3.7499084381810385835;0.076671225037341389497 1.9664263156059300641 0.94363925008731852628 -0.58382875876535578197 -0.10768554404706250083 -1.3948433963731143859;-1.5167541985328638621 -2.9112324678550036694 -0.37343949539978643637 -0.32747548923721331304 -4.7661411939259936688 0.032561112365754499298;-0.22231992318154963906 -0.13009670667734810068 0.38373362039536718093 -19.145418184140822859 -6.9223659060341224958 0.76806261018708521515;-2.3633702328142613958 0.73134926143899769979 1.0714902804110975065 -0.82340861741016546649 -4.0151218985650247717 0.49585822696130221754;-0.35180358687657120598 0.13320797139162393607 -0.36224840136000968638 0.45906100662764126596 0.11276659983659816089 -5.0062902141050047433;-1.5781264665410856818 -4.8876936601949774186 -0.59157704640064190382 0.28591054241338598185 -3.7158453382498852768 1.2797626167073574699;-0.46861843412072956561 0.044311055422734731135 -1.3286285350446243037 -4.5024845115803850959 -4.8862965466617014343 2.2375946715108612217;1.2343170687573312705 0.34423773130226925643 -2.1376532504030643089 0.61939161246538187999 -2.1012305417990893019 2.2336640401285627888;1.4247351875618048389 2.3937512529700888386 -3.1503575762951379069 -0.33671783952301009846 3.2778741456852915626 -1.1008305883234463796;0.25157643249986683109 -0.91351149566691958182 -1.7932835137008849014 0.86228832397334076454 0.33173899524434563579 1.2529123902238852306;-1.731858410439404139 -1.2869214530776906802 0.032102034268707370368 0.19035715578068185261 -0.79952488288046041909 1.504344052324183334];

% Layer 2
b2 = [2.1550407189988955992;2.5877453257992875102;6.1114120017117432582;-1.8294876534405626334;-13.148587798924541659;2.6759679489992542756;2.7647123247977121174;0.73710433150551868398;-4.5215192954669616299;-13.414625166289324554];
LW2_1 = [-3.5275662483250198598 1.7478955902762240981 1.8084363435460979463 -2.7179510978785761388 -2.3695303580190492099 -0.52370307704288832085 1.8054530748276531593 -2.4035468934175776567 2.0280932221581560171 -2.5157553449489111763 0.16697741419934056251 -0.1533321259876399556 -0.084361198947751861454 0.91621633103064226145 -0.0056006184783679423961 -2.7412552182800293821 0.43011845262804493384 -0.0047475428914530931959 -1.9166408948364168641 1.3604530599845960914 0.93618784341660998827 0.75359434832534066828 2.5047290879713157707 -1.5050655633499041564 0.83427846035026842486 0.48498199933267771566 2.1210318949340813965 -0.32089025694942868716 2.0421190719555242232 2.1987108384544309381;-0.51802444231620592419 2.8984675580710326237 0.038290720829088506494 -0.33459149032393409318 -1.5144040232205857599 -2.3872208326677832879 -1.2703222653229386818 -1.5664285972371776445 1.3855530213196300959 -3.0430550088915162554 -2.4005571777201022421 0.3755666219435989106 -2.0186679863370859955 2.6036950468265804837 -2.1065240563733214074 1.2384808620026004355 -0.25230253668236185538 -0.40145137547905562769 1.149224948358675169 2.5243122990791215798 -0.7741169377515885186 -2.4585735451973973476 -3.101828177067040837 -1.1212376234333212288 -2.3495950435300771986 -0.73867636634746247637 -1.4657773530017623731 -0.74345371579155150599 3.2934479800912370706 3.1179691887809921624;0.24154105654534324676 4.4250393136427232932 0.47641728952761469573 0.67465975259014987486 0.51450480658998654082 0.61149019448788144437 -0.6087548940989405688 1.5962860331650916557 1.178377151048336291 -1.6915347302067995638 -0.068157141588910813423 1.0474696940281031932 -4.3883864764498712319 -1.177704859410519278 -3.9270938101294547984 0.28121436884638445486 1.7634819059265285368 0.079237841796201691213 -1.4634268449228067244 -3.6706554867214027382 -3.3504291438606577103 -0.83238861682277132115 1.0700492027063222 -0.43495456876013949277 1.8545023978108334806 -0.69843159530609999486 1.6876225913323983363 0.30843911589244499272 -4.8817111173884812914 -0.25119914472841742281;-1.7456595847765370433 -2.9817145446393151786 1.5373302607545811238 1.3699867279167390333 0.72700274884734839009 0.053202127758691958315 -0.69452933540692030068 -0.87876133343397266895 -2.5217465716087263949 0.92817851406232820821 -1.0664842077862712877 -0.37807060264567937669 -3.5542660504214507178 1.2771457905794705301 -2.25201114875271724 -1.158192009251969079 -1.5101068974788847132 0.46145614179422084211 -0.58264074144898636565 0.69013446882956941408 0.19763916516741808493 -2.5692562166537777912 -3.7806930119550967717 -0.074469229083727203622 1.1756081641290963002 0.81496975864877330142 -3.1920757515187445641 -0.41731806806380195018 0.23673924290601913722 2.6712108328366244159;0.89505349564204428336 -4.8609872424019080484 1.6169802871713525594 -0.99979426884173205892 -1.5735568796618260023 1.213213479548053364 -3.2051625495086821793 -0.192525887558510439 2.9212701973535368793 1.2182011664295988584 0.91933607252513760422 -3.0435773127585514786 3.3272237206517636388 1.3045853300394107954 1.5073191525778955047 -6.1179640833117217014 -10.035438732079136059 0.3556603389347967048 -2.8360248606932505488 -4.2362922668374860535 -1.4256327623137654559 -0.80104588290277256579 -0.52099991186086669348 -0.79703397108606111043 4.0707011149614542589 -1.8839626834477027906 2.8297065085098771497 0.041570756127544752911 0.91114079517255042173 -6.5958643701288046657;-1.6468238101950423147 3.7097808044958116014 0.22998109977995134789 -1.2977326974292120454 -1.0949453604238850168 1.3056835843807563791 0.092142436453881024216 0.72896100356661452935 1.7376465003978576185 -2.1985198087947015466 -1.0281317897151038832 1.9245012161162262654 -2.3240465288304039682 0.10961551401081577606 -1.3474719788965245915 0.432392771143015886 -0.52806361224362607931 -0.46728962281611036156 0.99783441505653236447 -2.0902999457372031245 -0.45692995639623656956 -1.4895991301364881476 -0.55987375801211669568 -0.26410916835088960042 -2.0608898390394183586 0.38445093889157827549 0.77409703520894912465 -0.21404790379292026881 -4.6274757443391774103 4.9143791998822674572;-0.0037925846874197347361 -0.81128172719419533454 -0.9539121853181027344 4.5359919521159932643 0.0039771546579368587462 -3.1915724963527369873 -2.3245243130129757958 -1.0796922052362738498 -7.7948157337314558646 1.4747676317438709326 -0.60552607057903307108 -1.1827268613550079301 2.604481029971073891 0.45773507036143384896 1.8705179185226983307 -0.25857438369294732938 0.23090689531132310708 -0.028812157889958566609 -0.25962198328684077397 0.65793601245461863503 1.236237016600181482 -3.1460174000763374558 -5.1066732090611219874 3.2801270071693657826 -1.2609304410633448423 1.0459299461530795483 -3.6876929688265676077 0.37897263024295746447 -0.20070150257497620938 5.4184497064332326488;-0.48809751781019861117 3.3897550858360800952 -0.23727581584518886437 -4.947407471007237767 -0.3510597692971599848 -0.27757539893604693537 1.9484546544711809357 0.69117774327949643709 4.7866628920821510107 -1.1874846007565318384 0.23545982810764332083 0.56296835515586063359 -2.0958745286120898932 -1.0266806529068501774 -1.3046175877278394228 3.6074770610084438971 2.1409364362351017697 -0.70516341143381555678 1.0083825551827056977 -2.488575244446185053 -0.79311829296993374694 3.2701868700430747339 2.6174187505376873553 -2.2821918185832221759 2.9581462025609157607 -0.55437683508515778197 2.4528578871851007825 0.77171671677340136775 -1.7927913585937162999 -5.4152068874189902559;0.0018156264440461972534 4.1239719659994520384 0.71095764155156604414 1.6024257708518256926 1.1820486156662382005 0.88064140781494992805 -1.3843710603648058388 3.051456122867025833 3.1052692703920152795 -6.5424267546451693178 -0.64116554708588691103 -0.29899913222025631399 0.49090391900255336832 1.289005357940749219 0.049208111014039428166 -2.3293707361725979332 -0.7635259988544814691 0.30374323089093058226 -1.2441990270841001287 -1.3129566237944141349 -1.2587521472766194375 -2.1896948658269499433 -0.59934840701412872566 -1.8540941258655894153 -4.1801197433779613277 0.12916742897360472542 0.97617569283127547664 -1.6189951038769996305 -2.6705086359240817195 1.8522622755888402679;0.078656840630691782223 4.5740093602156903785 1.3726955764679125149 0.64232877347311323479 -0.37035487342973072433 0.16858363968145584355 -2.8927210905193905255 1.5451023127505589816 3.7204999723995038075 -2.5265813519904702922 -0.83635549180885537801 -0.50284044209102329859 -0.83215652744879653469 -0.098969117412734813888 -0.85957882653564998687 -3.266093400623709897 -3.4897514102286271154 0.1333546894885896672 -0.86849807727280436964 9.6692386764355049422 1.4190285607694013148 -0.79246138258655429709 -1.7845905834011750457 -2.7053016417101503066 1.9233371087115960218 -1.3002880285934503846 9.719560961722416792 -0.28537484368712162652 14.396959975830798228 0.5207230260967532498];

% Layer 3
b3 = 0.12953532183314564463;
LW3_2 = [-0.16572656832787313608 0.079696699790023028953 -0.21640200355568925406 -0.1669750927266519247 -0.15598726966783946213 -0.21402357602250698942 0.20583820955679194009 0.31253881330276112038 0.26101549738820256641 0.27872781763569476343];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
