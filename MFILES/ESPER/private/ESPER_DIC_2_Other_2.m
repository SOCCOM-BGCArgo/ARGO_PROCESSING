function [Y,Xf,Af] = ESPER_DIC_2_Other_2(X,~,~)
%ESPER_DIC_2_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_2_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.51478225622095397096;-1.0036198190890412985;1.9795687577664715651;-2.4474403759076266418;-0.90464504492433950311;1.4433409061690096742;1.157862094447311696;1.4359276976240087365;-0.29167320742904817577;-2.5551139509031646213;1.4081165754239182153;-0.44741282930400860796;0.076740856666285842125;0.51585674555639005057;-0.35770245036017839224;0.36296671833030347276;0.51969864261564902019;-0.53001277615161501711;6.6519212942495871133;2.8114663154796910582];
IW1_1 = [0.014440654102386037833 0.053454560610957456424 -0.032902850008405634674 0.0095788593746713029953 0.96690999890154882834 0.47877290884145001781 -0.23559885564637472743 -0.07053875373147276695;0.026033470269205841174 -0.44265087789557827636 0.69655701438422779059 0.46893029837844851793 0.56329434955777279992 2.4235868393913531094 0.96154656110608827113 -0.59143204830049145304;-0.40437986702179895548 -0.86813611822760972103 1.3696273589106580104 0.32700383055929654885 1.0364698208423002157 1.0342698857671706048 -0.6581630007524253978 -1.1759219327574614855;0.13177806620935886284 0.38256908115719712171 -0.87537014608563479268 0.069330572440747598173 -0.7921292647859297098 -2.3639658371964373806 -2.6050621818611081615 -0.36704227076222667447;0.037884751113529506472 -0.14564210280918157836 -0.9648959277539752577 0.035294101982503260639 0.69409950251800245358 -0.3585241286244753578 0.39590090896499297024 -0.37410194600442403523;0.080375117224118913795 0.16560571998212270106 0.83129467582000204917 -0.074091120960610726276 -0.080580300108870406284 -0.42402114105419652645 -0.89494243398916728527 1.4249835013767280234;-0.2344457358427320115 0.65688103782183615564 1.0771082478031508423 0.32994664294015507711 -1.0370896559285491811 0.24432646892988518772 0.27610164855179120114 -0.15885907320544273569;-0.086234456615712121175 -0.15885651068144018838 0.59191405441757671824 0.38453831486414447038 -0.059657416597354614995 0.17229189675700951057 1.3179572372466197283 0.069118358589647377332;-0.15813341225954002933 0.18916228571278054238 1.6501818549320088625 -0.24368335284113351591 -1.1202819657140070664 -1.1698362696796562599 -0.65121163268351600628 0.81910511696569732187;-0.10437287285534725678 -0.014156080756741953527 -0.33749655780103071656 -0.18848820230794471886 -0.61111834327408809386 1.248170453319651152 -0.46448260751183861883 -0.73637284271926606305;-0.029185207057342021225 0.27828818612799149923 -0.065718582776931100398 0.017073733929863825487 1.3013107568893724775 0.56120758811534865451 0.13726758640274655532 0.55980029399894681852;0.27709447902564804389 -0.19839503512462366985 0.64720928756984386077 -0.27735151116116202319 1.0649166029981436132 -0.96401263266109815664 0.13091930238813434539 0.38769607401696637439;-0.65447356543372781079 -0.066879280669153634564 0.1024401308366797575 -0.47575102159459492501 -1.4498027502967578695 -0.65379017017002871714 0.62969451572680135154 -0.58704395799150399515;0.28401433725066888014 -0.25220088746999730356 0.81526549624055189014 -0.22055353201975255728 -0.49212163097318817329 -0.58058827930925815952 -0.32461826162810852869 0.46898516977435705799;0.034742577159273216325 -0.27232637887906296914 -0.29165988561915440203 -0.020002460242463666884 -0.52720586675495273443 0.070215861983294089455 -0.72688269970349983495 0.61904745455279652777;-0.47506195066541329064 0.21738180688229330473 3.1469917057451954889 -0.39411780323984307861 -0.72027622367458465913 0.80588905583040726377 -0.57716215725037256501 1.2947754327448577349;-0.041703588712363556801 0.21417215818313456444 0.1919207679597778049 0.15920811657972608333 -0.22250374773570164022 -0.55436114881845333091 0.10626889304129635838 0.94084085673901673985;-0.15363871531292111472 0.073959749516765399546 -0.64542836296939487539 0.40190694083210654064 -0.35195551795677326723 0.6902290074175415624 0.63159735275075978844 0.11949934630682018666;0.16076946345877290989 -0.18503254482807168779 -0.46869558299198665896 -0.38122101364034410853 -1.7933206849142162564 6.3550116795383377877 -0.60567934247043531126 -0.011530595764206483939;1.2932064494717216974 -0.39154110413812220903 -3.1072699699293453435 0.24150284836881630302 -0.15153445559391970354 1.3346813046147489867 0.12180444555994417166 -1.7634809877588850657];

% Layer 2
b2 = [-5.6344162398585622142;-0.62744186350689945542;0.79805679578251287332;-1.6459172487472342183;-2.676461026964718215;1.3557168374500332408;-0.26946111973032360609;2.3689015074965080743;-0.26007066908114423454;-2.4446648762814686684;-0.83839881800047422189;1.1842453236234617986;-5.0360097873246241207;-2.0767121744929397664;2.5178880212165113406;-0.57621182075708865522;-4.0263754514767402526;1.5855908095878845643;2.4942035023741153665;0.030043000431857071197];
LW2_1 = [0.40405229213917687181 1.2235605561979472355 0.94749774842122624907 2.1608348380212358819 7.8835885961296296998 -0.53280314205110890224 1.9181618295742697278 4.0520368280196930044 2.2636072726831901747 -0.020565007754543510737 3.0434267387087605705 -4.5873228587680134893 -0.73117172092431736985 6.9806753630948765732 0.68902813798148465629 -1.2747838965307591863 0.51440373411941586745 -1.5060501092701923387 2.2733930485247486608 -1.5679023252962671631;-1.9405546395132169391 -1.9496744770161997806 0.95326057434938937796 -0.70660830252928275019 6.3805879761040014131 3.7723672403862971159 0.85153757614423597477 -2.2362456431775421528 -0.12222346943050335644 1.0169546468957793017 -1.661353334059236575 0.44500611792625532903 0.67663089573913803854 1.5549516571844625989 -0.6462226583148102943 -3.4623834743476691322 -3.2859928761157846111 0.58099985410398113927 -1.5003316856150477054 -4.4750227540922340452;-0.86684298501875112208 -2.3564817381156712983 0.17595360269630191952 0.60888498756874576134 1.5243016713255086447 0.13154293305156536387 0.32031651262200355745 1.6110294353286365165 -2.492213626285810335 0.34572431961074251427 0.073667741651557774873 1.8585770560139753815 -0.2511492198004490195 -5.2795394259903209999 5.525556952726224047 1.7532430213169545308 1.6794368013212057633 -6.5110672986039022092 -2.3233823356652019143 -0.32272637259889269679;1.7652876134637434102 -2.9337708134156152973 2.1470606935365590395 0.2036712440938881763 -0.79781073150737968902 -1.3613830131649782285 -1.4484775790602604228 0.07800172905795395295 -3.07075232932637876 -3.247402254051340087 -2.6145739783889578867 3.683943828272542298 -4.1867464328679036001 -3.6955412824836475494 -2.3888195700721466253 0.99462859019336247179 0.96705836298558722763 -1.2616455512740858413 -1.5088257740842074828 -0.29633548097871587057;0.67443456441984639405 -3.7796626569043270116 -0.12035045329937880954 0.2661880312926352965 -3.5351146068474332829 -1.2352279407420092561 -0.7012418892202104681 2.5539671359188793609 0.20676750379545508207 -3.2561829173537457649 -1.5799539602223937607 -2.0584904619268304948 0.28316824935018031217 -0.89805720925896392881 4.5296062411229023326 1.7940399717227621945 0.31562991380991012313 -0.37275150214046148811 0.86697893813605531044 1.9447987697141575492;1.4256394889366832412 -0.18754988288605661806 -0.82115723690178687999 0.43356867648122016101 -3.0929253884975946853 -2.772627038317651671 0.67182530813643348555 2.0069701038125749015 2.0544432942659609509 0.71112017329903354224 2.5395744979409760056 1.1057281937793796978 -0.69119706715150175391 -2.9344468022482717018 2.8681134548151483443 -0.97875491401461667262 0.48731210607279723535 -1.4773670970820886872 0.54490406529169466143 0.62336127236457838929;0.27667821355648097859 5.6930493709259231139 0.66265919123880856478 -1.4847492129370181146 -3.1632098550446761109 1.4921680136390751414 3.460590537333126715 -0.38189784855854114198 1.7266396579948892764 1.6147215066643605397 -1.9033543708825830798 -3.2384813608520319761 -1.509326552345246153 -1.279106434007619697 0.94876478896735205737 -2.3247901235639023554 -0.6129978916541968248 2.3501001055695454056 8.113693045149686256 -0.91646445434268841712;0.71981148830474184219 -1.6489118346648075075 -0.37293673999591825385 1.5410000925710996 -3.438404580772168817 -2.9222426906553771175 -1.2565169659174326711 2.8609067418290576867 2.6566792670354932859 4.5610004275276994079 3.5707576683422654895 -0.66284920073288633446 -0.4926319350421092258 0.86740965408725967389 1.6834524558991934562 -2.1463086334864809324 -1.1883924132786822803 1.335310868756953484 1.479365210558669208 0.40060283544264568834;-1.8171454267592155318 1.3616011266391994106 1.0013288012083485512 0.44695979593750873038 -3.3408217947726663866 -0.64543157084540625501 -2.1969757400932667935 -0.1105223426972129358 -2.7955559602915380779 -1.1767406667770254902 -3.4582760314370739607 -0.32849716935703143772 -0.027160784649019859005 0.013397834558027475749 -3.4621091169101547713 0.34072795835845814949 2.2836655245406691783 0.24875132634126825848 -0.14261160715878112848 -0.65041670115138416897;5.9976380077496758148 0.10357667962553535057 -0.60330213412696431785 -2.0142524387881639569 1.7143928836037605201 2.2802465966099028094 -0.039116988434548818909 4.7666159158949987784 -1.7573781189154633608 1.6834954361601077721 -1.2057426391175327662 -1.1816042914203750414 -0.48736252801828305881 -0.81263491605683013663 1.7271993220150796411 -2.0888686136742471433 0.47250110740962064648 -0.37896447819575307392 0.45753246074372888597 -2.1416337074605724666;-0.66976990155476079369 1.3489021659688003041 0.66520166336647867933 1.1912265136697157697 1.6696583567829226258 -1.5141401084908006069 0.35803238952060351119 2.9547110964528400245 -6.5532754153271186581 -1.816229555667329576 -2.5037666553474742237 4.2208989837562498337 -2.5973349845475670605 3.865022575451010578 -1.8483316430315721579 -0.87735649063906839817 -0.72516423501647775396 -0.52329093246115720994 0.015874560442844048991 0.59241085435304685625;-0.41950168875879928487 -0.37892522007081808066 0.20520498204217327287 -0.37506208032880894443 3.3453257955760742348 1.4967443598447758291 1.0819656253041591842 -0.8508128065894760006 -0.27751368421885763693 0.95814272990964488574 -1.1081093348660822073 -0.31627003447649382206 0.085731158211538802116 -0.11461747225949188433 -0.33531010377002551381 0.24586458297957247687 -0.66428949518444058153 -2.0389705056557678731 -1.3509877009638342482 -0.44273181982400117151;4.806632216100855004 -0.78724601397783910972 -1.9673047012871889283 1.2431362259786014057 -0.72057092075096851325 1.25725481098451497 1.9068854872097640296 3.6940919427961964594 -0.39059701639767324677 -6.0156404847619757703 -0.76213345205916283032 1.4304128909359434818 3.0596009271889865744 1.5314085213800154861 -1.2540152113264209088 -3.2100377770238099906 -4.2124421907216325067 -0.49219667670087974276 -1.8018353733674725703 -3.4479140060873194606;-4.5857276026171902572 1.9477261807920340786 0.37582440112632187201 2.9648566359272949811 -0.96447188257491489605 -3.8029986735639487172 1.0887443893071380163 4.6379609807604280647 2.5973456642092025426 1.5759241312587257688 -1.6601365435899642087 0.0072538560566869254853 -0.061741598116166716836 -0.36510046646339988641 -1.6154979093811081547 -2.0096486920800709086 0.18933674883181983439 -0.86505322879447121842 0.93466076283004495551 -0.96527312770040063494;3.9272114860639302236 -0.044360865598713529467 0.22829083045853992839 0.74673814821926109975 -1.5451122173473963439 -1.2174216565289401881 -2.5319470904502181519 0.82992401949245941939 -2.2187173492477452186 3.139614309328935704 -2.5556298325489694712 -2.8793614507071176867 0.75096675556578285082 4.0001686239540843459 -3.7034287320260532717 0.42645598018086006142 4.2567558587295755146 0.61018723757171466904 0.85160541828165037259 -0.34212596438214931682;2.2004895954352114984 -0.25698030922545195276 -0.00024666670845287902956 -0.2188499675543983114 -1.0018256245839116669 0.11958379406806923795 -1.0561595290613199349 1.53464265124767274 0.17877767475889971838 -2.4709863631298771836 0.67788107640191996861 -0.12137898803161398242 0.83641157229438600762 -1.7378537787314545238 2.3988876978336102219 -1.5590557054261620085 0.058402160115465701073 0.012905356609676279719 -0.85326382015050850072 -1.6009968759133303973;-0.18421434821150114991 4.1039973426504330334 0.38494040465002549167 1.2901528138221847186 0.85666574298827391498 -2.3439984152661463845 1.2650801885770863731 0.07129029219345663082 0.48544036976542759287 -4.1029371522311599563 5.4813978973656967142 2.3918603661464539201 -0.14057076975955989928 1.9207615372299626788 -0.19062327202224851885 1.8141342638981596824 -0.68115026100200071202 1.1718591530244912846 1.4509027664366216381 2.3059837572551962204;6.3053837188785548662 -3.1048357108397515169 -0.4089234356981482077 0.22947063702189668399 -3.972317612235113593 -4.3742496193003361782 0.017077452568326302595 0.83807778826823620122 -0.11449123906882018031 0.31017786913533573756 -3.0532534831820261623 -0.89698817625375903972 1.3240268842390079396 0.98009189368966653788 1.77684836071083474 0.51563700738484075092 3.6103135853612577932 1.0569098580144162813 2.3282030916047138369 0.17378123730976396955;1.0941329466736706699 0.51812339872082002756 -0.45624426178745158822 -0.81953492192460863919 1.3927512156779773278 0.40163589650733083625 1.6387484650185748514 -1.3470833533808985738 1.3442055871188232086 -0.97992884244579514519 0.31069905505589656691 1.377992542734239878 0.013999082054116575302 -1.3257563583780591632 2.0977614829564985577 -0.17814961265059653384 -1.4171351279943551482 -0.36011975280303365476 -0.69382002108924845096 0.55482054577802875084;-4.7839766112840180767 -0.56489997623335408417 -3.4572081132839995732 0.68160605886950853538 -5.7578118543035126109 -5.2661219463793980111 0.22905084582844476015 1.7413614034000814978 -0.14921349401857475492 -1.6880618720766285001 3.8262148935516635539 -4.8872755718040625794 0.34760660417259242605 1.677379521217522873 -6.4329042408253966912 -2.2316268310777243045 1.8901063642231570316 2.1825687410606438021 -3.9562337133849356796 2.0426188371317723913];

% Layer 3
b3 = 0.40036071481095486524;
LW3_2 = [-0.044049588111012075164 -0.11665444832842172818 0.14492573263071381606 0.013121583209054694594 -0.079621785671569703102 -0.20188723402228953008 -0.028315688167185326662 -0.13474059281885322759 -0.16362211906277179807 -0.13080388005575616095 0.011825515457964543009 -0.53252554635287463469 0.024207260096202092708 0.025297686784402601684 -0.29481666927046917825 0.14027450132621924195 0.074346677901979532632 -0.15136894418771573712 -0.45478275199979256715 0.052487234553546632809];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
