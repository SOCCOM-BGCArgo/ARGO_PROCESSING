function [Y,Xf,Af] = ESPER_TA_12_Atl_1(X,~,~)
%ESPER_TA_12_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_12_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-0.12];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.2548870268621001856;5.0515309663459033729;-3.1270673249322920029;-3.4378533784898572812;-7.5770222354903742357;8.1653244886685723003;-14.007508577574276032;-4.1549920512857640986;0.10366968851855264122;3.8310188272694580824;4.6901461513846314233;2.4891432363572740805;-1.5213137409104751097;1.3991592146354661086;-0.26448374237998878433;0.39454327506200381759;3.7326440636548632312;1.226875177241584236;2.0241861072559661494;-0.22246922827652459986;0.82492375662655292867;-0.079199735877864427258;-1.6140342115982557747;0.4103096056283428994;0.10391570172129951932;12.156048179957315014;-0.56694703510231336807;-3.1458868854282990846;-3.6449820188122568076;-2.1862620848353886416;5.035571591502039368;-0.62316556706873793559;-3.9770208606357666525;0.59625696241945791432;-9.2890602124120320582;-4.2968761824617338618;0.24795206203111083698;-0.96101536938388321119;4.5174527890924798257;-5.7078298237254392333];
IW1_1 = [1.9380852046489323026 -3.0804795495359700297 3.4327991990763058183 -0.011596433342794620555 -1.9743720652427234619 -1.3954934301458699064;-1.4690703503879267711 1.8404175246220022544 -5.7898208331115892378 0.19410742501449065878 -0.47119254908912505675 -1.3314613415088905057;0.035625026988537963901 0.016697977051880901617 2.6301780500642704119 0.90843853875529156916 -2.6028175380255618165 -2.4586323885633336594;1.9236753276426938886 0.30397402119445277036 -0.018674833298935995807 2.5659976063025822235 -1.2981019777690614436 -0.30317830085380115257;1.9948723344097138988 0.14682510429575584832 1.3431439179553403829 0.95357866046062145227 12.573337162549480084 1.7183793731324106258;-0.7811384058670380881 0.012358003429415646487 0.36127570478149129141 0.42239938781152031044 -8.5328527112758614237 2.7273797426340591343;-8.1444174259506887381 5.5751334338742415397 -0.021642588011589459357 2.6915163257193350788 25.147821981607368258 -3.8277080706847494973;-0.31008985234549768517 -3.5148986530515626825 1.9357301292882311827 0.0052842003642987753556 0.94372229607878566071 0.70914969703703822912;0.11966032301323270559 -1.0155706452563961761 3.8568352994316610349 -0.25171040744865519345 -3.8159131973502797841 -1.3760149888347008584;-1.722479921308892159 1.5611674831641515482 0.13700087346647379927 0.90153458477616710276 -1.5297022697941597968 0.58447800002213323722;-0.53016870329510634718 0.052200314021409510712 2.2732764045017104237 -0.82472711941679410774 -6.7478942569690021358 2.1189156505396580243;-0.059252837589255272222 2.982267904039960893 0.22492568425049966341 -0.0019519039350349544695 -3.2220214348169275986 0.041581387847883989617;1.9437879958547645831 -1.6741824712661304009 0.34973903191725358441 0.37105088834835953104 1.3160529754437719774 -0.32769911574639337681;0.039857966966920260754 1.294719697042155504 1.0384865309162607527 -0.10087843872590152028 -2.1999002740770872144 -0.024891000709480280012;0.64763666860340529663 -1.1724857090547482485 -0.32857156775576534802 0.036270851852546394378 -0.089846143191719726739 -0.59074686198993897612;-0.25338781628178580485 -0.040562601156156473381 -3.8083893434957625246 0.19004378585918332845 1.5330757731709923064 1.0543679159380987542;-3.1191685307179244369 2.3397126544856940988 -1.3218370884007035748 0.041259859957097598515 0.063555136808323586806 -0.12279173702975872129;0.058807227332733136294 0.88506157896233550453 0.9361590028454801482 -0.11179002783396685405 -1.8764481246818247584 -0.028743011501683349979;-0.075303107751274078741 1.9050629954341620209 2.1742830074521628525 -0.091110205200687882643 -3.4601346419533163257 0.15884646638840055344;-0.030722172063165863881 0.1604669747944107161 -0.76446126773284883704 0.27482348519349675264 1.926401545933791315 -0.63587583527245095105;-0.79770410967511429234 -5.372793544649703712 -3.6755262294001327383 1.2435541237861726938 -0.7358378639930041043 -2.3740907758527516336;0.0044420106603740008508 0.035856762385549571792 -1.1531536042690797572 0.37778113989614153789 1.1422350541293362358 -1.4226357898802048929;-0.11136797613738989854 2.1241878050071578699 -2.8237255781493701967 1.008094973952745832 -4.8810687010878179848 -0.63148515495739909742;-0.44941215334751943855 -2.5876861440858522911 0.072089578355966341117 0.044770300925113068469 1.255894776025694437 4.1597117448177440835;1.6561962529913023534 1.4038209566077737289 -1.9154215842173296647 -1.1589580427786749794 2.1196182499808777777 -1.2022021491963634787;5.1294769119218264208 2.4765954617561445339 13.591013033564145474 -11.647960455406462188 -14.224187430332900561 4.6031210935689479413;-0.26692004616332254407 -2.0172149137064767643 -4.0282422268255784203 0.12093722748730020844 2.5101903252112975906 -0.50209074420731936161;0.030901432733328425273 -0.028191892370397493572 2.9301173378152522986 0.86178377120782234666 -3.0419573797237631219 -2.4708326643439968429;0.10284350666589205103 -1.2787767438565524891 -0.79685506505706416025 0.32913456493465331754 4.6368914886976151379 0.46400087996287547876;-2.8425083081789193074 -0.37526806493005654408 -3.0556326097540047471 -1.0283128196376110086 4.0912264385478831485 -3.0850783931473548805;-2.0960141115756174557 -2.9106743471196203643 -8.9573489350554869048 0.61468360236536412344 -2.6731025314651364333 -6.1243836650929015519;-0.4940067110495753866 -2.4263697385003446527 -4.2429904997081182572 0.14503977701298514935 2.6503834833206170174 -0.49816377090774571768;-0.085704636087564262104 0.29586834768435038567 0.011143269099226717905 0.37646611726554879418 5.4184135537690458762 0.32535813435958094164;-0.22050758710372736493 -1.193946860688475553 4.0875690716476666964 -0.31458327016229387096 -4.9535472681415999574 -1.6227544064550356584;4.4595702861255848148 -4.3939766200356871195 5.5434819530909633656 0.3620625807273820107 3.8657966719416099188 -1.5737062457856507702;-3.4345216896468704348 -1.3711092177271253512 0.1412452877161852749 -0.052474273390666070771 3.0329742310596263799 0.98598539908890625583;0.032278724458786746399 -0.08216159118489357871 -1.3784529918862753473 0.39662373382792692755 0.38195781452913568632 -1.7882940092672745536;-1.8142251536653746236 -0.29655000701747863401 -2.3149125702091843948 1.8992185602242110942 -0.18966215587526338848 2.914502403113251372;0.016444203706392261644 0.13627325796818437476 -3.5673883796771699295 -3.3266933432226140077 -1.4133016221011116542 5.7559663151610873655;-3.2694372176612223058 3.197240894145378487 -0.74241364967614065229 2.3593106286024148055 21.517594248247419841 2.2950933990577691013];

% Layer 2
b2 = -1.4867478078143132603;
LW2_1 = [-0.15798104606668755823 -0.14852989039891884016 -1.2495730149057753255 -0.075216958932625713197 -0.021103246770798021748 0.052075608355266013449 -0.0067926161907640933424 -0.082616414478404662236 0.61271668647984312006 -0.079419446096619286668 -0.10189920469693755645 0.20666782809699160706 -0.20790236719746735261 -3.2030071132446251703 0.52686811216357642973 0.17891981869955153606 0.14864579345383105435 3.0882493800476309431 1.2985889848737155461 2.3810819360164883207 -0.02620150210677699848 -3.1809088912328773446 -1.0666077318876436841 -0.020191243182858909649 0.0052880199423354845231 0.0018183039248550793027 1.5756354219259909311 1.1693808604982103283 0.29867462759981050491 0.015732200730425475316 0.026937861909440499047 -0.97528496549183651965 0.27319770837416340603 -0.34639312993821752551 0.034602053206845742594 -0.05139168167799014475 1.5984326928718803895 0.011671038425016114215 0.010117107166160951501 -0.008359086027809416175];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
