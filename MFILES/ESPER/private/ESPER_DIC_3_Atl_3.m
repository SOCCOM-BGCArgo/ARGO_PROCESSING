function [Y,Xf,Af] = ESPER_DIC_3_Atl_3(X,~,~)
%ESPER_DIC_3_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.5696477243762299025;-0.58457747768060175364;1.4880389504252751198;3.3344686516254751218;7.8897816701836509523;-2.0212337171761425303;-1.181434519204767053;0.42375950146251750716;-3.0034473487066861708;1.7361400523424581621;-0.87116545948294787927;2.6829707419360007137;-4.713703710119113488;-0.46414748192439558849;1.9827233761716893667;2.9487451125602799351;-1.5348821022787695334;-0.36959761888295833421;-1.8212957244872716167;2.1099452974775685377;2.8702693090883322213;2.2896442609580711647;5.0637658898142099417;4.364402855467305109;1.7399319729386113487];
IW1_1 = [2.8706149408566505876 -1.4390889644692868021 -0.00089988474836414939634 -0.044370160783304031515 -2.9565070379499531761 3.9692532001444931211 -0.43446656767207386673 -1.3930448921755467229;0.271968026981371791 0.21536087823404401198 0.32829279148727541493 -1.0764339911700102626 -1.0047196317887590045 0.98850736038649111848 -2.1537795373147452516 -0.096424031733219450757;0.60229201796853359951 -0.37192777826481199233 0.43085213394472821058 0.41266190936904001418 -2.206431389256624076 1.0913237920305316475 0.53781547734991497212 0.30485439798698560354;0.90451574056257277867 -1.0613712135831450123 0.97369058680695452779 0.53034104136896520476 -3.4823175834451904898 -1.80237504907783741 0.1562782192677370785 -0.35220985071902533026;-0.93226204985917016099 1.1550962004121163584 -1.1016994347981736713 -1.009627476720745598 -5.0700755974088957956 1.8234586513109374284 0.28327112546280147631 -1.2616244232974074269;1.232749789388233097 0.48599109194608253182 -0.761740145091801657 -0.36829329130946247828 -1.4598078030767274171 -1.4808681793903508694 -0.16412650603088380086 0.052148172835244838152;0.6055550890918997009 0.80985641871551505844 -0.083644517734274573262 -0.93327722520678979556 0.99350040452380461442 -1.0832767899439532666 -0.47737346810300773647 1.8013624706488233773;0.28512994983399947424 0.88295896632374948343 0.6968630608027055473 0.056865799120774267184 1.2054849541937859847 0.92581287626247243949 0.27154713281204395647 0.5956941434994621476;0.14086522124175310244 -0.51755929778357667725 0.52143865181786130947 -0.21923384002732707043 4.1265000370474371749 -0.95736796973208759809 -0.32244186508971006688 0.66285340804763603906;-0.87807756812256243517 0.95300137924817551749 -0.013327184304557060726 -0.10992104781557539284 -1.5817939339812658872 -0.098323057163586996543 0.10904162801837029295 0.64558087489415494353;0.3486079676019712692 0.35210006918957065247 1.9977205211948751984 0.036538522034166368013 2.6839942090981336875 1.4975796553553504253 0.66021042675252894494 0.71921379852010425271;0.21349729985077975369 -1.3770448298015700583 -0.35451484976103336821 -0.043409536433010861844 -2.8923465435861031025 0.71223645955061154478 0.27502328760542266162 0.087818162218098322347;0.76188311469246305929 -1.7434456145382077885 -0.28964900317129410601 -0.23564614749592574516 3.5812762885879467767 -1.2191236436057595327 -0.13195641916873959709 -0.30041777853430301493;-1.9626734330039832255 0.036636368463217827696 -0.096519567397860953073 0.39672416567204399351 2.9493502733134060456 0.093411504098590378287 0.66036091560110232734 -1.5858132489679688248;-1.7539735473672117827 2.4518813308511293592 -0.22899089544300516019 -0.24088642868684193021 1.4331998325861072807 1.0451556192038187199 -2.0031331782010126652 2.1892278756849288257;0.72259092538012092977 -0.95795296084269798698 1.0363277326387170252 0.18008199594911167285 -3.3015829067804038921 -2.2393701847768601176 -0.51433754223229111169 -0.43288541364936428124;-2.6916513362869225467 0.58396863399180376497 -2.5433077423887242574 -1.038573560894393788 -4.3123356383773856493 -1.6972884166760133784 0.0057151169797110597942 2.1031518170300254056;0.62244454195578569067 -1.6613481325747543327 -0.031030167170135094373 0.22426048244493668182 -1.8547055020945177883 1.0746333620716854718 0.3468587777063454336 -0.0086459105326770237243;1.7485837972208215785 -0.13213260586632913363 -0.13794113049875111887 0.16232719281679758305 0.31296052531379930928 0.70709304235386849502 0.38072566361234033705 0.063318846254408742147;0.007814334631404760978 0.090638375354589573174 0.21668547204746882451 0.14183024945490985136 -1.9896659985092643996 1.6633704394070147892 0.39893670302769257408 0.70966298806377625663;0.18150165198818879464 0.19749214309473270279 0.64274503297374319111 0.16351933685184977252 -3.4195446971254828128 0.61046921633537742924 1.2747149527889618525 -0.9348259181148413921;0.24194030357970464085 0.62351994748303196658 0.58429565178037301543 0.13508373242166624162 -2.4457095596440310281 0.59946178898943214275 0.44402539872665502951 0.028933381679864724617;2.3130107915216004955 0.24723336213515695325 -0.21938351870340794258 0.5648671290539765133 -0.50364118621343900717 1.6577461365958565676 -1.1195403032626396467 -0.86953210002653424926;0.79408039198993485286 0.98057886555316309263 -0.14389194690074957883 0.57565169989681574947 -1.8522005567536754533 1.7260927809849342385 -0.41329066874753744854 0.49460245363916394146;-1.3571196452864173754 1.9706360511849270178 0.011304406860692504597 0.19129827470345278639 -1.3795967498375580895 0.87465995095822446359 -0.092995118631689646649 0.055709293566548495624];

% Layer 2
b2 = [-8.1722021267918592002;-12.818370950637326899;0.42502078315970620581;1.5105414755346022737;-1.8588616307098497771;0.15799685049159431505;-0.26064995612562202876;-3.2471919556091672909;5.9076840524839226987;24.367366636775141586;1.2220651304260286008;7.3543705724385812772;7.0540378205121649913;-3.9975694909211139105;5.5659659587501622013];
LW2_1 = [7.4635942248398334797 0.93926412006894111073 -2.5790535486015708777 -2.0021327846600662781 -2.0111781241013084731 1.3978801187171834286 -2.4238633413320043175 -0.37804288343491004865 -1.2713470762243679335 0.76383326722314304202 0.26561480450025143352 0.94266094859071170031 1.2353229768812352685 0.44472010739476763863 1.3284722375412361117 4.6915085644094354222 9.592157212303401792 0.67720220734544056551 -0.10214562576362634649 1.2898339370992961683 -2.5810929644740512323 4.0184658088897391437 12.959719070328402424 -0.36730846729119759342 0.68844344454845352033;4.8325059132117793581 -5.3581947865987098467 1.2252804537122603534 -7.0823935877935149108 -3.5074168273655934591 10.260291395346991195 -0.41682379601081687159 -3.7608672422337741104 2.1211621275776031403 -3.7540545259955595547 -0.55086410816415154468 -2.4497186188236255155 2.2733503083960546753 1.6388649278505580398 -0.57091574764102881456 1.9434052335094711417 -11.201180217883614176 -2.2670548052878936041 -3.3233329025309474858 7.9334115149835398029 -4.1868698213346497994 2.1802836825866047654 8.6853318213472370246 -0.59797934789618578666 -1.7702640699915517253;-13.057686783955455567 -1.1473399046233434539 1.4021640509483221937 6.7818887042329807358 11.185294698131242441 10.53303840386063861 2.7183427640050443763 -2.5490559980548868069 5.640569374885856746 -0.5486819989780462592 -3.6227670240801246315 -4.0981475547235435286 -0.30339954341983105257 8.5564791647732558744 3.1095664232972728414 -11.896925039034805138 3.7530850077720825375 -1.108305748583171324 -1.013238154500488708 -7.1373785483087113235 -0.49286190175414362757 7.4815431026981720208 5.4236266852672869732 7.1413064824159091515 -3.6571229068902155745;-0.49420713722246378818 -0.4718675786336068434 1.5753013586028012938 0.59744729179270661401 3.1160345896845966784 -1.174788068294288168 0.28082618877545229008 -2.1829995961033863416 -0.61058261022891424652 0.64660267964659901008 1.2056739325480212432 -1.2919660923166487176 0.64441175284249507804 -1.0396111119129480826 1.0639532108262670373 -1.8447420784286594486 -1.7543662029285997939 0.078791758413037038533 2.2695067479865302928 0.00075219143952195825255 1.4653226257263611831 -1.9392755816990334683 -1.5773288241052332292 0.73258949219160784949 -1.3527494281389942365;-2.046600224128294343 1.1917315218035198221 -0.27258501555627029367 -0.95964347773124802909 0.45058426509109639202 -1.3439807583920009293 1.2000275688546795383 -0.062470397231854962738 -3.0344933985657789322 1.8937660532166691318 0.34191479376555128367 0.56873752682339639986 -0.17878920386119984132 -2.0310880622977087739 -0.79430794343303356975 1.4495843464783801924 -3.5916536268890806305 1.2133455918637574555 1.0175517864950072155 -4.0421116514860884195 2.1734832703936159959 0.21360772610929093518 -4.9475662588230528982 2.2240272527877045228 -0.42102391614622330929;-5.8155105042552071026 -0.082767636830160348782 -0.38708173514192900644 0.93322277680112142306 -0.016335066161414731056 -0.70255789478653252189 -0.78380240074534790473 0.73886311016498518178 3.1173824223578430193 -4.2885093248289125611 0.70602354166582437234 1.0909453802807655975 -0.62618918502748832644 -1.3676594886091679726 0.81078955188893353512 -1.3476292207421438629 -3.8724098736255427866 0.123118334174613972 -1.7265625011141452205 -1.352023228362525975 -0.27739563996406657598 4.379134840550012342 2.0031064275912662254 -1.1463645867545737556 0.66769490110425555596;12.730543557388552145 2.1163344391206480033 -5.0115204111448807822 9.5177594330923263044 -4.2592478105485334083 -3.129398708664858475 -1.7026705696761581521 12.17206348238113911 2.0736828585229845068 -12.936347957368973027 -9.2584768350457746777 -7.2292801119867000637 -0.15092528247379663475 -1.2582642413913049939 -8.6118259103567744717 -9.3744644795971900919 14.80791526413403858 6.8124611218056090323 -2.1435987189302663225 11.200544157347009033 3.7218083910815527027 -0.43308783170941189677 8.2852390285940007431 0.90930975214351650315 5.8039347098586002716;2.2446943080402728121 0.95865917294178770724 -4.416931442845251965 1.1993900417559539839 -1.2094367083911812255 -2.5702600935110599956 0.33518094801643461 0.66820248859071174063 -0.84945804552644588181 -0.29500119844015931792 -0.15555638172588798218 -0.79857581148018674799 1.6835973477760446393 -1.0233684377337453064 0.30571316574745660555 -0.54566299852457567088 4.28698911092145174 2.3279882537847780277 -0.15736481576584773756 1.944389276013367196 1.3403622370915411199 2.4678296022388996889 4.0461591854433560655 -2.6806888052023971625 -0.42053256734646576875;2.4497041449865353258 1.2733343797054399449 2.0932238194755319327 -1.8579024624680897659 -1.8782255816051387498 1.3916381409875078212 1.9753361647922864641 4.6034884352628084869 -1.0941152752065350651 8.2913119373139387847 -0.73248661539160919709 -0.44582842573452485802 2.2421908852309546667 6.4463867727298547194 0.83035698366163646078 4.6991709118414100033 5.5057041100740198303 -1.2232465348309422559 -0.01222057386419975536 1.6953450304309405361 0.23005222363630278837 -4.3187921427620930004 -1.4818965260413625717 -0.42288564641754433637 -4.8576648250658376327;-18.808538366936929265 0.092923980500444786079 2.6013555728456969618 5.4118322507153857615 0.53468095277487992512 0.85208915660105599699 -0.077468622044511104008 -3.0579712842135124973 0.42724938569603643224 -1.779040323041330085 0.33011210614328528878 2.0097902087084364986 -0.98466640122483950481 -0.29735716074754831029 2.0312557073769030858 -13.962295158526885075 0.56204583760900395095 -1.0228714766875528497 4.1653263495845944675 3.2645194524795737578 2.094980843873203824 0.67488966409456618845 10.122923907863571102 -0.20403952420801854672 -0.32722077562310669663;0.75323691472803344649 0.90159210169164361037 0.00046768283653887031881 2.4323252952352976131 0.30185570353103985397 -0.60369364002629843924 1.095717946833701939 0.053682439794577513359 1.2769016005678601733 -2.1912095960824955476 -0.84248921623672023973 -0.96514910963720323966 -0.015282109017141222787 -0.57186005049849297777 -1.1247842122192990288 0.21345074123656346265 4.5840842936750210157 -0.45244281886297121886 0.28837749995972805639 3.0141731054480294105 0.24753844218796730581 -0.29972675935686049487 2.0485768224301024176 -0.938859125005697015 1.6542327488400279112;-12.988690014873601086 -0.093469527921373474211 0.97615043988228977767 1.3023349908625676541 4.3320049301938441388 -0.36822173500316585093 2.1615194670205157834 0.62178927427532793004 -3.6002070788247735322 0.36610958989006525677 0.087077802327268249982 -6.277524182961144561 3.7038460759116196286 4.5286420429785358976 0.21463483934248347995 -1.7394101160725727873 -0.046531455641607717688 -5.6763781201668868093 -4.314326013268411586 2.5649558421493772187 -0.33413855697684613499 1.4854180369772529424 -0.36830043969572251461 -1.0010905453104741447 -3.2670304989074563373;-4.5837211420371435366 -0.096642878015903738165 -0.983152841343924222 -0.51809057866052832253 -2.5788951528049470774 0.39481543090689186215 -0.17667453812293507087 -1.9489306419927443503 2.1036753444060383167 -1.092784050762192205 0.31545271346975928273 2.0150664976425409769 -3.3594984191189540823 -2.1829207392867333581 -0.83228035818660639489 -0.35960340486728215037 4.1964494027616145999 2.0166842201119226097 0.76355547630943076953 -2.5092038384341623924 -0.12391989256242547102 0.18200943045907586049 5.1055132777153646728 1.5867715494688716671 0.216695513388526384;3.2880103026155920176 -0.68090998201378283294 0.26819038307480824734 -0.32421818556274617507 -0.14657617520589841242 0.8085903291889582345 -1.0609049095584515143 -1.3058566826361521773 -0.70282670316113771136 1.6454270936888462096 -0.048667024745697215482 -0.36686402684566155052 2.2595773738004996112 -3.8402765007948644893 -2.2742640198390584594 0.40250518801341178543 2.6187459561161672283 -0.16062014558992951385 0.31455376019387537578 1.6343930418995225029 -0.50678325953719938202 -0.40528908773744376504 2.8939664806090821259 0.53139756100196178235 -1.307454693810623958;0.50698092751458179173 0.37398643541023302017 -2.3563324812883976733 3.2008104858103130219 -0.1611326696727037322 -1.17886036994352561 0.72054823852555993646 2.6744687022253481601 0.95176646334047720899 -5.3588806366961261318 -1.237953094304062418 4.0338052907454491347 -2.9978560616986853482 0.31502999402904957593 1.2270451124512644636 -5.5526073894935645825 3.8771547683235438875 1.0991447702234051764 -2.8407509529281491645 -2.8970592893341939877 -1.6632684871745511135 1.836796136735679319 -2.6622209277469082167 -0.63732357211000167929 4.0206252348074977832];

% Layer 3
b3 = 0.33630675756433875412;
LW3_2 = [-0.040889635313509815895 -0.0068030889249087100543 0.0010114556933549904722 0.32065180729941439308 0.019599767332610384257 -0.0054482300753944199606 -0.0012783001120191619677 -0.40615975490547245874 0.024153732342040195452 -0.18201308278972702648 0.034650308251657234437 0.074276646269831242408 -0.20165852792823624196 -0.021974947589873252557 -0.029566468765403371155];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
