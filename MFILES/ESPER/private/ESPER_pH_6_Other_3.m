function [Y,Xf,Af] = ESPER_pH_6_Other_3(X,~,~)
%ESPER_PH_6_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_6_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.0353262419239150915;2.2082165393883061988;-2.589860831337294389;-2.4905162161646905439;-1.2018879970936893198;1.3479843101784385606;-0.27838257021464152263;1.9447324502858447381;-1.9431527925886966646;-2.2986413023120504384;1.8454254952005995083;-0.79749171801507046098;-2.086510957484863038;1.1910078940917103729;0.064314770446276786631;-0.67762833238332043084;0.60133509998343059877;1.1725321057373163658;-0.31950833392897487473;-0.32383596714790718885;0.067565941019994898986;-1.8730290131466769132;-0.58382295882207502213;1.0192241189173643079;-2.8992685453107096549];
IW1_1 = [-0.24397097714883389519 -0.068387341866341530561 1.0627828744940657213 0.81452527808968244738 0.27815722229709932689 0.46398227383237772292 -0.03936377613680959453;-1.7569300117610728851 -0.14361423333818870707 -1.0334629308142633253 0.53269277460042230299 1.5519976836761817385 -0.8174122016754138409 -1.2353596292960207226;0.43784008258599921293 -1.2617287613671404056 0.17678083239088385192 -0.70497884766195983985 0.23354068432722618898 -0.012390822186446007191 1.0583193153732699532;0.42402512378974394069 -1.4555410889267716978 0.34051002219096965229 -0.52089555996360725754 -1.9526729536389277886 0.14192403594270394662 0.38265800413335265828;0.17529177294756212446 -0.3679263206285473542 -0.55263203128765359118 0.69784574515451536225 -1.3256963390695679639 -1.6757067239160050587 0.58336467356515098182;0.11724284804414285277 -0.38151158957004327466 -1.7579436669932531068 0.28134319043558853046 1.0569404609036030518 -1.0776715545731136991 -1.3189582225504603574;-0.12757154939982251474 -0.21378656753896796427 0.34482190865914946754 -0.1435281557472026237 1.4294937499761850574 -1.3190687670934959641 -0.48022811258536624024;-0.051483877344270539966 0.55455498559265259395 -0.75256953056268738322 1.0995227926661506057 -2.495445671815287092 -0.94241082191380065591 -1.2703865834625280851;1.2625897104210046518 -1.3422533680925154975 0.64383718237891274239 -0.22882591422580331186 -0.79871313310293479137 -0.85502096612434830281 -1.0649770469225461333;-0.36187375173460750721 -0.36898908080840314705 0.31125362896459735085 -1.9071101343081662272 -0.36874446877436589665 1.9835094927783627483 0.10972459749143959051;0.74926840889359935804 0.45619861916744303132 -2.0883148391740338212 0.26782390508425008013 -1.1608684033281022607 0.95338376427404669666 0.98570855828262560205;0.28897818463271424116 0.033159182998073348514 0.52057078345998142321 -0.21106567394827627226 0.15195887588551976188 -0.44461799965976894766 -0.65009750144963873719;0.39645518797077428097 0.4675601287805057904 -0.54660768524594194329 0.47651107129649922234 4.0376573805360251868 -2.5840541702657482404 -0.83826934569196231983;-0.28652504828028574346 0.058173366174010657237 0.77682832892409658943 -0.75507912536581256457 2.613978614137034473 1.5240782113236184259 -0.95118997419589867981;0.26532956798256845943 0.5229934690503701411 -0.1775950262270467872 0.006255038023722252552 -0.037829389968054696891 0.75579109090902940604 -0.65474095744787985662;-1.1524532709816430742 -0.13859151625488244641 1.4769569360401930691 -0.31765525499910163276 -0.043790797630328545664 0.44912596018304812295 1.5202802529965744327;1.3096197187216889191 -0.16069945320092157703 -1.1278460518027122461 0.58161774618688499849 -0.39627423103952613692 -2.0153583080782291326 -0.1259853750707997655;0.043729777649050748101 0.040221205444396578021 0.74608454718022076957 0.34164139527848869093 1.9901816340427054275 0.9460527160294029958 0.4632562678188152927;-0.37317745707713784187 0.52479834787604284774 2.3405717914368175947 0.20324511315652829535 -1.5270136148187531955 -0.78731972800395166878 -0.49813652370432587313;-0.31969162031566861204 -0.57452642518633845192 0.67257546800392642439 0.99639001101492408186 -3.0449450648846174694 -0.54455360357389970272 -0.70116595695422123669;-0.029356468646121392646 -0.94319127631213717233 1.3664026155897281978 0.45357041284134003156 1.4907151328785805955 0.53496373272051689352 -0.23303812196016279734;-0.44443775931643131338 0.16172253839693043198 -0.50067210172072840191 -1.4565996632224129659 -0.40762018513018088983 1.551054335328708067 0.23510698262705945205;-0.28669743597455477069 -0.047458470354402385039 -0.17374727413058208003 0.67362058936049085123 -1.5026135954774129111 -0.85452502345621528246 0.13323662203043543095;0.2137133532027581384 -0.064207113316064906572 -3.5263389324645069145 1.8342253916676272141 3.3445033697239399118 -1.3015361611349625104 0.79629111283289721879;-0.96045455285998893036 1.0738417726270841346 0.5735734267062243541 0.21253333544111616127 -1.0865426544534120268 -1.1037165396397445871 0.089241674311676705278];

% Layer 2
b2 = [0.80527873544521644256;-2.2774842456220585341;0.85859915930568908582;1.3472858744008615606;0.35310845118559947009;1.0208819254090588657;0.78780057181855311921;0.052613070743405307428;-0.026713862828017711365;1.0888963550548873549;2.0631580658742425527;0.96453221053818705144;-2.7544917168973830357;1.525504349809538418;-1.6724344518267555415];
LW2_1 = [-1.0292657277677450534 -0.61596465888580909098 -1.5300865593099359785 -0.14856509794749261921 -0.046823095598364672387 -0.48894280099052517263 -0.018990232238364594675 0.16385321361587276701 -0.98330383702115642386 0.019441462038321932065 1.0611281334663302811 1.6837505290987497819 -0.11441651762910746981 0.16904517795213616638 0.76339510910810226552 0.29407020033353764576 -0.046843058147579677564 -0.12830007132260698444 0.472147538947178258 -0.35992711465426319162 0.31032503838410091523 0.15801144718860776761 0.95433783705028030209 0.62716029832208741723 0.40258356615763801756;1.0853406059656944826 0.14494439033378328507 1.3931651679376950703 1.0985532810013851623 -0.79634301019431186219 -0.45397537435027901509 -0.56634413704224262354 0.82278596076188426078 -1.2607404985442824952 -0.55527199762657297732 -0.099276766697846019483 -0.72445239799676897086 -0.26752366090299600776 1.9156975271559042451 -0.67270017943826099227 -0.62575557686475979935 0.79902425685934530541 -0.1824481295353010124 0.1941967136818932016 0.28315367678473035706 1.0411789245453304531 0.12247857899350785005 0.62331696707068795504 -0.67029280017714043538 0.40696297257977775974;1.1829042936481326542 0.45603612538134430388 -0.080141136625529865722 -2.4394566192999707077 -0.85338108828064873634 0.69538555891858122582 0.81290424910485781229 -0.44581297316242973761 0.91993341910477532952 0.78754001952085317395 -0.29313940186268439003 0.035450701829755654204 -0.66630384862419189673 -0.71201247625984975809 0.71388203251796855664 -0.25449141390064566881 0.75721068564068672035 -1.60031362215985129 -0.81653977957822232447 0.60978283332812088791 -0.55504269320849475289 -0.31157693160346539019 -0.4361025805284599044 -0.32336366774613656272 0.88361037149252674716;0.90659944063604103182 0.53412788982169390195 0.38385083839728351141 -1.6322229766364200199 -0.24573310840482043282 0.17116974388348607516 0.47385957597806210861 -0.30701775844307049868 0.56616165232056325785 0.4439139378970956562 -0.40303497115254516281 0.44200496095211405656 0.033044952141310257598 -0.36874248619188199072 0.5855690499369808899 0.14666719207852901841 0.4984645840525707694 -1.321338321125795412 -0.6883806455923390244 0.47246812028578294429 -0.85872700174620242297 0.11628290579657060699 -0.27104913255342244494 -0.2833756427271851841 0.045414988074635606607;-0.035669864613476744142 0.45219948763742123798 0.98690099381617613084 -0.054907038369737058703 0.24465242362636896445 0.31966104207114959257 -0.29986363612872490858 0.070085421744638068398 0.097552097337833459934 -0.12751213930043794886 -0.51378012904167391639 0.60603249582064233625 0.13155118315375760596 0.15789537237470080422 -0.58894005700972651418 -0.20884758515858414807 0.17084208834694247781 -0.028528050292385916803 -0.19611360288358356541 -0.11530713814062372446 0.12243954145550119128 0.73891315807830826312 -0.069023208484788906025 0.15599193062029334533 -0.057465968069121582673;0.038561245747077602108 -0.30950722960930199257 0.84201906303616702587 -0.53950626224487030491 0.88906131320096515314 0.7414440328163045546 -1.2374742278161579012 -0.66105705515015056317 -0.35689987104667003637 -0.77351467596576228836 -0.33355696959167163707 0.73246435989290525903 -0.096886045099588466445 0.84486236768521483231 -0.44764256696592069629 -0.27002427721392768811 -1.0464405133441438966 -1.1169864742619151077 0.30285339974759706294 -0.00094436937226386927745 0.3952823766717413756 0.15781974795202596829 0.68045822979887105042 0.6776737381887495415 -1.1348882758352711875;0.128370949929930811 0.4010072648702450171 0.31679999826457017065 0.26445037509074997839 1.3630342856355022185 -0.32315941007791770812 -0.71137062971281073143 0.36485946443475347767 -0.36509400563944277573 -0.60710231415351301187 -0.30858926828711080725 0.83348327344223127611 -0.29220023366767899908 0.51227627307718714977 -0.055102246677886129733 -0.073849792215216578106 -0.15212630670969923274 0.31776379843427804417 -0.62533007857375588756 0.047425160822653536496 0.023913309804216350413 1.1117389029596131955 -0.79921307143541442386 -0.23263201286249576838 -0.38018334953362487028;-0.086510959352578853387 0.70737965620060272443 0.37444381832751649775 -1.3176624202971829458 0.1429537424288190306 0.12799928096310328463 -0.61678305752533435502 -0.42230380729780436777 0.25339800629773928664 0.1912900887360405866 -0.33891013438719980178 1.2637179495139649887 0.40871956965980010823 0.090054623333388428286 -0.61606376238360849307 0.096898599603406784797 0.44473856209147794027 0.15013026549262245557 0.048277747723744011965 -0.19322023494254800258 -0.43700178052615828994 0.57725405494581372157 0.64944607330873260764 0.19712592642195900239 0.03192476069387906179;0.92090456272692533535 -0.6009996855594398335 0.33561791364680698679 0.02679786755198396847 -0.45154121720621775982 -0.73874775805227932413 1.427893726734043689 0.80551382288416650823 -0.38432512726520196011 -0.48087549055040329504 0.77024593239504524078 -0.90411114556559757371 -0.42021160856667566508 -0.7867739098706113543 -0.44845626525344622904 -0.15743547147852512968 0.031392434289755612176 -1.4744419386591871568 -0.84923375150778224185 0.10603757464735948102 0.12878815861663661657 0.57059500095844717382 -0.83154066333671494693 0.024735168372394800845 -0.85213737910491849092;-0.13332805476876188888 -0.97910604004733969852 -1.3092825593224006742 -0.058817284435553174315 -0.030588131312823077512 -0.21892530158915235461 0.48230867564612478482 -0.036767909454135452862 -0.1358014395456511314 0.8640831175395523589 1.0778427206150549278 -0.55224437447402208168 -0.013679625377093823993 0.2140030455817011068 1.158330163185194106 0.51419516263282061264 -0.22455361381902050333 -0.13804200757210699502 0.76836939012339722233 0.073678061788001486532 -0.29909425766219988052 -1.0148132905110487378 0.42395853648025499938 -0.26421181341866473158 0.03617777296907564305;-0.63700113069940444976 -0.74710176930370253423 -0.89991589348291345374 0.12274572987894780129 1.8174885074722648692 -0.037070682493960102621 0.60419577011226877072 -0.0066379265001105473148 -0.23331155396934769031 0.58866086471125489421 0.76804275495308438337 -0.24501951775595331995 -0.034764487969803969936 -0.38729368666600144655 0.50919306778000972269 0.26295288505341724017 -0.53857137582406544585 -0.99862589372688548295 0.12153304208810378206 -0.14472596521151118165 -0.21060583580270378357 -0.70861724656135405276 -1.7248795664395428773 0.41241229857290756522 0.76859031614074924121;0.17526327529060500843 -0.24120824268447635386 0.8901943999365321547 0.025378130945919133432 -0.49673652402364620873 0.32087692742481827013 0.80978056065713632794 -0.42130408920687384411 0.34718162966201837616 0.33301282884157507036 0.54438634070127200903 -1.2558993900822315037 0.32360661061799678162 0.13965483153223581803 0.062291551591501910512 -0.06904500050500524122 0.18588485249384351095 -0.54700587426166003002 0.69584159229581199479 -0.19052964156279836305 0.24970487405175945117 -0.92526702381657677243 0.33588985596380777077 0.096175762410816087455 1.1991025897478502227;-0.85123813251785318545 -0.53440623818704213743 -0.62597626308163456521 0.89707120484092506274 -0.29894830950787149026 0.314814962639191398 -0.074002657666673798964 0.10075321551732667469 -0.13022897450062762004 -0.73006917012286465241 0.29742493236469785822 -0.96679781793787733513 -0.14698661642441329667 0.097994130276044380534 -0.43326538262371661059 -0.3695519057622410064 -0.64278719913859061474 1.096373933519725119 0.50357283460380841689 -0.56817698376188696674 1.0040735746386382221 -0.28612107228526395541 0.61126825655066907572 0.22169742489131863405 -0.36440969151812335758;0.22814857142798303236 0.6052865860485924232 0.39509363753989101831 -0.58234050181283070202 -0.12258567810082623972 -0.22568612099786672376 0.75016889502376993271 -0.20584177520355037561 -2.7520971501948685578 0.023982047313915046127 1.4271226499986877645 -1.9027073269645518039 0.92481842374389922057 0.47238032779218458446 1.2576592012051583946 0.064634216321427490071 2.2749800782884754824 -1.9726607270773963698 -0.6499464138680616232 0.74371465117072155238 -0.090391699380750284432 0.20069204434216614263 -0.84767562751790148656 0.044117180662177624129 -2.0751591503389090754;-0.44103208378972569292 0.0023114732525654274262 -0.94253048230647729078 0.92729516181031823585 -1.0471298743762287309 0.78535410762923529848 -0.041534366085714674588 0.16254739131022236109 0.31558987883987610346 0.43401951197203147981 -0.56475282107102198204 -0.17798766223570586242 0.11573982135119677273 -0.5874150221617362444 -0.50507953105509861835 -0.21209599424612726737 -0.066777601269725705979 0.42422929296951583655 -0.23106367608132794 0.13261478499115222918 0.097861056311198027502 0.02911086735093603925 0.16992015657795536687 0.17525069487821018366 -0.85116962024563180833];

% Layer 3
b3 = 1.959165229356590876;
LW3_2 = [-0.94206706467811596184 1.2691678683782197101 -2.4291206970838898904 4.4073461613447939555 5.3823214353862285364 -0.51266488077839111881 -2.7847923778839751563 -1.8248903593825644975 -0.88247769677099818786 2.811112625188176839 2.4502509599834709775 -2.2130362541740282722 2.2163625558805897242 -1.6295597616783277228 -2.1955191163299563328];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
