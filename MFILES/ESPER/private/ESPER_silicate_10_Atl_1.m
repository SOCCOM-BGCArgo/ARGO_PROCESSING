function [Y,Xf,Af] = ESPER_silicate_10_Atl_1(X,~,~)
%ESPER_SILICATE_10_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_10_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.2360932220146931826;3.6201852378958490064;4.0501779956982026931;5.0370287223078973327;1.490168458056034817;1.4489617000416297188;4.1541745759939816551;3.5629426110698037;-0.57921351410415145011;-0.24440562506301161116;-1.8376707861672476607;1.9235063884559053804;2.2786869597052934466;-2.3521256495832472133;1.7042432291904485719;-2.5044755526066149187;3.1160739956751433155;2.2343140961282843548;1.9816174453784842768;4.0485585548510831799;0.24171929740983547075;0.24656819439012478412;1.2430434413316904241;-5.39630143074658708;2.5689666343619639299;-5.7790116035841103681;-3.1130295190933003902;-1.8949118050696627247;5.7207415002623305256;0.68426216970636088988;-2.2213250431507067795;0.26584133171027773956;-0.53236205362756028325;6.6189311046944885319;1.4954548390617403708;3.1505895098701666157;-4.05056236481327403;-4.5242624976683867288;-0.86966540745779263855;-3.952955942786392729];
IW1_1 = [-1.2644772157074564145 0.0075447888428099288069 0.087647562116587945935 -0.34153858056337660365 -1.9708269882185771582 -0.53817322463991124071 -0.10622665755163099299;-4.9195516340618992146 -5.1228558667496919554 1.447908800146857633 -0.92720787077956423605 1.0751724655493015703 -1.0636732753733482149 0.56562507947918283513;0.67458956192548014119 -0.19309455666592734158 2.9934196526244747361 -1.2804214998342140497 -1.3110267471186434207 -1.4940942626565218987 -0.61766315262573667777;-3.0286426802937196356 -1.0441520321819621753 2.4006238322371817873 0.27842317905824753854 -0.40698242749537139051 -1.3195388672543240105 0.91943635547139879183;0.46461236197611271992 -0.20710414065268889505 1.0734694594100500087 1.2139940499517052341 0.88449988212390961984 -0.4937267199784934335 -0.12234221658173734248;1.3162723263039803889 -0.93558403819258173506 1.2280855335056721778 -0.055885884164186730438 -1.056670206043611282 -2.4846132545174550721 -0.68426402678780373634;-3.4335623216158470683 -1.0559935179675319361 2.9653005298766963449 -0.17463375027152552854 1.6568962686183046351 -1.2011950746938655499 1.2205859420218938549;-6.5215208341531756275 -1.843827191506145935 -3.7573866103810202866 -3.1516699980881610621 1.8440341454476154581 1.7559373780616553962 -1.4858590558932085468;0.76385987550305667337 -1.0591126836564555003 -1.6159519781873015187 2.8935538544656451698 3.2201664005334396101 1.5856890646801056199 0.098515317457712872629;0.45178081492672300667 -0.031925417255046217857 -0.50706433704210152058 0.41362835308488171693 1.6831984422157244552 -0.92792027250427200347 -1.0401909284599555328;0.90242650030069349043 -0.036728631796370050933 1.4670581933839543787 -1.8820195495804499242 1.5281695177342522474 -2.0875322379651239935 1.3688977350313751291;-0.28075179305872827173 0.28256574045403148876 1.7512861874978822296 -1.0486684052332497785 -1.6855918305264081525 -0.69887219685149237769 -0.14285974542010707045;1.0346150587951081778 2.4435714766834104594 -4.0021363376850738192 3.8576821503026730298 -5.3691206715090968871 -2.2842005375302862902 -0.40190672321823267543;-0.86132875271505016102 0.80778083140013368091 0.72819085194436128372 0.99338886866171793866 5.4347102653088645852 2.1473894256098060573 0.87171636577221445208;-1.2166497466149364115 0.03629176680271403721 -1.9435614372844909337 2.100178726128111073 -0.93701810521502071349 2.577839619187430209 -1.7805736601221247017;0.22832765420717643368 -0.09393988613166825985 -1.3371106495339077913 0.88178684425412723336 2.6110907119664901188 0.44987502346513386087 0.09053341147051377491;1.9466777809106559083 -1.1258779760872119624 3.174078822914762732 -0.58702153377497190423 -3.8808911957912992641 -3.6760895181981418922 0.072514581848456480251;-2.2465875160551500578 0.96078683203843440186 3.0459822015966353526 -1.1412898120256222967 -0.22234819185860560387 6.4042815881215604534 3.2039336753503655508;0.64418759995599927937 -0.29458253304872616951 -2.0130689712323701634 0.60213944044446165993 -1.9608792752348389588 -1.9982638125777176796 -2.0757027783347634653;0.17128063950514582636 0.084049187162254138106 -0.30295331503872985346 -0.91466979932058545266 -3.7521275444073776129 -0.34885203372567419322 -0.10058608521552103721;0.56874261076490972844 -0.14050833282996522122 0.17083964653878955242 0.4148676141765081371 1.2704287912728344789 -1.095694901350916739 -0.57230001496095217473;0.53464366097553572832 -0.10872706068906025367 0.88639997857124330771 -0.33762422354376453448 0.67504856330187834601 -1.205984831863805562 0.065337478173595184283;-2.7252276158060584343 -1.9286026326864145197 -2.6913702760607347564 -0.75317122616595610918 -1.1963617071221044341 4.6937771673695234398 -1.9136986616750117918;-1.3195314653231260404 -1.1188313600784582924 1.826507908224684229 -2.5923551846033277002 -0.0016376950486896618871 -7.3560444666706823469 -6.0795594452818049191;0.47477368613023390731 0.17963569808370669079 3.9164913470327693545 1.4632762385686968187 3.0021170040033418047 -1.7534583381970800797 -0.021497958280448217772;-0.64460138948946277271 -0.1748743910136953128 3.940044315121281393 1.16595930761492661 2.5652869556494004577 -2.4238054442856027393 1.8214181218267186946;-0.48878197404188350461 -0.20249491673905931077 3.9286113562435875934 0.92783923509161336796 0.12765468747735822519 -0.75269146862599667358 2.4674714752887934033;-0.14692453304911542999 0.012096549384577267444 -1.2863520414430624772 -0.13501487891790026064 1.2717279526626441566 0.52138036373780749511 0.020079715928302589029;-0.78619471910194138609 0.44884827543288002838 0.74417188657695487741 -1.6653585040908824855 -5.8019740673811028842 -0.33675394810535136392 0.54990793324320652591;1.9781093979124566573 -0.0083739330746685977647 -1.4133841023709112772 -1.0852546719944144993 1.411853183118043642 8.476183192144945977 6.3990855939728783497;-1.2910314924377452872 -2.8424644880183738138 1.980306478506327128 0.22467241753370525981 -0.55584245263750942101 2.0956484564098034618 -1.0845878558050552343;0.4300689456736498939 0.070457536383098123833 0.80509387799723430845 -1.3396195090057405608 1.5272408651329154594 -0.62103277953063062977 -0.42336699561493473798;-0.75685251789567442593 0.22810581135324270452 -3.1741001480007517976 1.2564945843089176947 -3.9506820302995415695 1.6225435782671184803 0.59804295138007690369;1.6048529965719209311 3.8423200415604719105 -5.1231727937611832857 0.60914176782769779983 0.047689255693954123172 -1.9380055874364701118 2.1537610877041517554;3.4090212758523477099 2.3038164276312751433 3.6187631689310673089 5.1908523932976731174 7.242075895135806185 -5.6386724544890505229 3.5115103477075195748;1.5385571342852213395 -1.5014841153730265066 -0.023409023570439356499 -1.7864147743951142022 -6.9893904805433786365 -0.76402824704464133987 -0.9620471313313728734;-0.44297077315860661217 -0.053891140109764916477 -0.81451780675866847226 1.2869678376551119126 4.0118689876860056387 0.71249394693610113016 0.3725769118730795082;-0.53997694336159329787 -0.18689032207621283921 3.7010153387032933558 0.99072854504147500609 1.7279209862349116378 -1.418811311941567066 1.9477813201138602928;-0.48399740427919113461 0.059148557875759504021 -0.036024632237785299271 -0.63068399612852021896 -1.8589710448590583969 -1.1125747876002303194 0.65406759347973508767;-0.57806638589430514585 -0.2700353019298596946 7.3259499363866940058 -1.6251020469350214714 -1.7629167677640962264 1.0364499705656835538 4.4730854801647836894];

% Layer 2
b2 = -1.0552479190277288534;
LW2_1 = [2.8454619315855333994 0.027417547270158198341 -9.2151236035262975577 0.58159077420904559119 -3.3338724691119723254 -0.53685744529290468918 -0.43984663502885973374 -0.014629067412852176863 -0.06798746963317120473 -1.8756870802657090724 1.1561951686360902869 2.0252347932211294257 -0.048390636139226374246 0.26682714586854616723 0.76598607501789095497 4.3166716415135129026 0.24673128618968365178 -0.026894887737436173891 0.29495116220213907221 -3.1388218234690836717 4.2298272948405815086 -3.9151678915891898747 0.02299083476264835238 0.040771832879936346916 0.65824804505089029583 2.1757892500619830933 1.920465922076452836 -2.4928134847469762825 0.73261545354713508704 0.039646031203649921559 -0.085261700032796455817 -11.076996042088117278 -7.9028221900776971509 -0.055739353266689779798 0.041615903339981441533 0.10051172664715316007 -14.768208053856874074 -4.4867009366105534696 -0.36917181471478238697 0.057468367109904529288];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
