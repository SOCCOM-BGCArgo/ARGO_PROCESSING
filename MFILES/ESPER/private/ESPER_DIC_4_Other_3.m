function [Y,Xf,Af] = ESPER_DIC_4_Other_3(X,~,~)
%ESPER_DIC_4_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_4_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.5982914922113682366;1.5257086066841791805;2.0543509581540200237;-1.0942261014850775958;-0.86357156496910481014;-1.7741851077968131545;2.0838389917853215039;-1.9821912766271354567;0.53751920252979901171;0.22230537394648333671;0.94155776011292025007;-1.8840492008615694619;-1.8309860567366664785;0.69847694784388514311;-2.0164849086975382697;-0.56904028437708875643;-1.7659839742304301868;1.3937469481241653302;2.1302302743328320744;-0.23734833382300785098;-2.3085593298173781029;0.37488068652490036392;1.5598660301083160373;2.927721931102743369;-2.5150240973598312344];
IW1_1 = [1.0908088492892613619 -0.16917002315507248533 0.98871710830043924023 3.8836304723992838284 -0.64665889032980483631 -0.92259532078420380952 -1.912995394154034523;-1.0879345186260962475 1.7705712905353239162 -1.2518451456196153515 0.5301826737638247744 -0.53956271028177604787 -3.2988645242181724448 -1.4928346345705347797;-1.761728640764038234 -1.360528004469067298 2.2454259805507534864 0.91251750913185170067 -0.37928434116771253537 -0.74168305916319665627 0.050067730623728393113;0.78429300505772514551 -0.42901528838493552254 0.17793973745190144742 -1.2889104199414118668 0.57523877904876996592 -0.50039305243638798615 0.50512210190422968115;-0.28397346977443693739 -1.5723651494012997887 -1.1897334337641718438 0.14489086811403389943 -1.4437421271583150695 0.90260237689997468991 0.75416712779598460425;0.51760681893113369423 0.0039671260614793490279 -0.57014504573107804841 -1.2664249703114964785 -1.8578521969938042169 -0.60409380590155326018 1.3329670940446194383;-0.2223600332596394058 -0.0081727844049792174735 -0.34661404161564135507 0.79101091692990710413 0.25154465995901142961 -0.45817765299474266794 0.80664996316144099708;0.5735602811841455928 -0.33431898842535956451 -1.4193868749088323078 0.84467423337946045958 -2.7239196797946849671 -1.4690496530093219985 1.5069753389063265114;1.04151811317911136 -0.30764073459676688493 1.5004918808542222486 0.30320286110464506057 -0.75603069225095997918 -0.17985916363171627896 0.93785389725084700174;-0.28457853044948300258 0.30577652972841173895 -0.81840332611879917923 0.78070187415808078857 0.11796638481416134303 0.65345614602019930217 -1.1077193610338444962;0.10977290551141999364 -0.044008675260966176324 1.0628547394346974375 0.22561219385376360402 1.3427272354772015195 1.173621831131635318 2.1955429319695669577;0.46935205917862454772 -0.79531479206572830432 1.4680111679341705244 -0.47226874506183280644 2.2162968498819966001 -1.7729816793555446264 0.44084848540726012667;-1.2828953877900504121 0.41475223597799082409 0.28408926454667882133 -1.1011518903468187069 1.970115968336688228 -2.7842462065093998014 -2.579475080522039665;0.34308552134904124475 1.2168463670435354373 1.086948146059224074 -0.080922954861699786244 -0.14191962400577129433 -1.1339702732279304254 -0.57801310027506858091;-0.48961340035710904095 -0.30288773295979570799 0.70677077378713104583 -0.80603545619529626265 -1.0572748135780356549 -2.0567829029333943858 0.1222717536925660986;0.50394748563123670237 -0.0041795263132818928631 0.08376808734717829108 0.7196738290144062411 -1.7542379447796716541 -1.4119017766089987376 -2.0238045859594597786;-0.33866307337917278542 0.049634466503912164081 0.52137963868502179565 -1.0701700039089985239 1.2767230342177837699 -0.19315321049335515413 -0.2362210111078716368;0.29961039049131710232 -1.2067509294261411501 -1.7974040909372199781 0.45064623577604001614 0.70175535759468754549 0.44114506844263207119 1.1692128912811301511;0.54723712703218618802 0.99669412198327733687 2.129886096963833797 -0.078570306159624458964 0.33662078274284812363 -1.0749156891425575289 1.0065860112265008208;0.29039461970349078612 -0.098903896937535734635 0.18062233788456627526 -0.73239212326519353979 1.4853945676820852206 0.1575801509005905765 -0.87708729809320074011;-1.4944572453098599052 0.49619125640628386487 4.323832386943923467 -3.9240264610795079214 -0.3953259429527855584 -3.5941322972255562718 0.32633441839706872623;0.27013673621937234204 -0.54062059111221905106 2.6515236953150220778 -0.81999959871456751248 -1.2650147623485838988 1.2240896361125990222 0.15363120105822997141;-0.35834127749682465058 -0.19136439345222583386 0.27252145793282472885 0.81432461916607423724 -1.7710318223229004619 0.66451430126348765004 0.073483512732534103651;-0.16271001704799906151 0.055657985256102417149 0.2434347169562114388 -0.3325353986766547143 -4.395370714277958335 2.0785310606103686304 -0.75627746921883232112;0.23791245371861433067 1.8527546976720579153 -0.45164736055204152132 -0.070355255490572671251 2.7386375533851206043 -0.83677528653828936456 -0.8488344258508291329];

% Layer 2
b2 = [1.8889035191813206005;-5.5025844301168129746;-5.3866284396894927866;-2.3432501491807822269;3.6624521800286595763;-1.3931898963359747867;-1.1973912911217623467;-0.20277018998696166863;3.0151383955909740742;4.8946783350600266971;-4.8203450929871367592;-3.2373173554348770864;1.1046908168551612395;4.1289155811062556722;-0.42355108407876079779];
LW2_1 = [0.45369713453698068406 0.14258545164278721429 0.26401397489324468504 -0.058134260508682332469 -0.81961159013783391192 0.27176878237855778275 -0.3329780474428239434 1.1019703070001201084 0.36480639201219156043 0.22658237815621154465 0.14025039199151353997 -0.024744923537932558139 0.15274552309015887452 -0.65931712152214794198 -0.0121662900974851447 -0.39201554513455494355 -0.22891949303202221988 -0.097285169487835790325 -0.20860422688605917418 0.23172323316272533389 -0.074507442922931155227 -0.23699755638120653667 -0.66397311562031224863 -0.10730327661707150799 0.02313043307916097871;-0.44270365083634338754 -0.8997020679298981527 -0.15276279999569314372 -0.57226421543056693597 3.054646800091190606 -0.65875401579775183514 4.0890871580358849613 -1.7305761606878973247 -0.72384459043156079705 -3.1418029519636641034 0.14865411353778820724 -1.1495853782124914044 -0.52013267541645524794 2.0063429286894138848 -2.8039430320205331881 0.68937507106347584163 3.0747378028691372265 1.6636366164385578692 1.6788378962049739229 -0.79678078535967367113 0.15636234185942821107 1.2535899131880008373 0.67179933342783526573 2.0573154440991410219 -0.20896310436938053678;-0.57202969100948453107 1.374661542595132957 0.58711332092990164977 2.1324481824271903641 -2.2245940194511950594 1.0134674963053795782 2.6792657265932584565 -1.0466099171530112155 -0.43347033540252161155 2.7859895227835398401 -0.3103556030967225543 -0.049589744988974046591 -0.95947151631208527078 -2.2238259413346819215 0.55224093171899557575 -0.42659849350525047562 -1.1280014983148016761 -0.86039930823518873115 -0.80981271645704389073 -0.81860470486711245375 0.74680977585914887218 1.6925809369746915856 0.38444838578921564087 2.2126352846551506914 0.55826437095163572444;-1.3105587448657352034 -4.5000187344168054437 0.9957728100331735277 -3.3747226414541557915 3.4247512586966242232 7.0496312105766847367 5.0841874954283037269 -3.2186759529310151606 -3.0137033393898375877 -1.8111933051155124641 -4.6899223877519933268 -0.34607856261578806567 -4.4033993951904655262 3.7488490535301117745 -2.3572653154406535414 11.336710240663331106 13.594623032458942546 4.199417855310702663 -0.86681027076101391238 4.7170877683995628971 1.1228439616572221116 -2.3259340828572425686 7.1346802239413671387 -2.8806274271829281908 -0.6776258407956532448;-3.4926345772492779496 -0.28703391941493477946 -0.63348224711950085197 4.5297621049957861317 -1.5759449310649984444 -5.7064789258070121036 4.9698212327191848559 4.1974760683934606575 2.1213569732120292066 4.2304470986067785887 -2.1826818747657230624 -0.29387303014330606876 -1.5778631288313786918 -0.57719616977768994914 1.7826408174245400584 -1.9101820266267646176 0.366130815882943772 0.40388112759984406974 1.8179220849422115247 -1.1782074520313170485 -0.0030154713425411252756 -1.3573636788444081169 3.2626116089482479765 -1.649042229584856134 0.87956501389396979373;-1.2633522539023269715 0.51362336742250169763 -4.4247692681801537029e-05 0.40554147796881190313 1.8657400196025719641 1.2467064531049871778 1.7795471367263986373 -0.10515677653759625265 -0.80594729583216084823 -1.4556624909032238602 0.48662792594806952851 -2.3405295657122726638 0.67134188991609544672 -1.0560363714132114943 -2.2772039187344872424 0.12840123638633677006 1.5037209724519429166 0.20903486823993008836 2.9972333326278910448 -1.3827902671724159323 0.23562794146148574592 1.930520847201168122 -0.0042738282123421650338 1.3367920829465345101 -0.3306258586902216523;-0.28711016673510741937 1.4163240752523269528 0.43111094688881862469 0.38077488851700946881 -0.82524591102419631028 -2.697114989991363565 -2.5635162084941942595 0.92982496176119378006 2.7331555696374336684 -1.4971380522286295012 0.83246604305252380751 -0.59818451124321525558 1.3321012627163613118 -1.8655481323315947773 -2.3929459735975240342 -0.49545165875771152164 -1.4681482740473570381 0.39510771356485346884 1.2592940473042406602 4.381265187128231986 0.018460747863419460502 -0.36547414844814168911 1.6945307382655321327 -1.7265015442615996299 0.32807642260966596304;1.3434463950615149752 0.29232104297537137017 -0.66947452812100705088 -0.63998701891069997849 -0.17313313974366872916 -0.12023343006948644662 -4.0658489115304767836 -3.3921698570826683827 -2.2794262753874634519 -3.5761645934008710057 0.61429882154873183264 -0.39799001013453416675 -3.1720494922075945787 1.1327829613151363386 -0.85760686654214601798 2.0004306808285545749 7.8242841875360706894 2.8409873392864191111 -1.1755593900587220091 2.0244296618580763791 1.1441265753898925972 -0.89566423162741459763 -1.302166644962035047 0.83110669811991344513 -1.0393451886649007765;1.9478770094999842133 -2.2225306115211966862 0.18540122652657942126 0.021367222415208282638 1.4388574721619824537 -2.1524993428341789858 -3.879830823095993253 0.50634438302881956684 1.6561632777995851651 1.9236005872124264382 -0.79248011034355481108 0.83016777323128165822 0.092940475756173035471 3.6785945362487781907 1.5646348863665340279 -0.70114070141811535297 0.046687264136990508367 0.5865743545804879 -1.4661699570616393284 0.34386055184200825519 -0.11294825132671007517 -1.5432916289547899957 -1.8454942103170719481 -0.95869906070074484283 -0.54741916545096258595;-1.1367926519163327193 -0.18116656872547645674 0.077995396345521592063 -1.1029690543957175741 0.21090522568872763221 2.011468674737890705 1.063603873189667981 -2.1602249034905480762 -0.10559576812615484309 1.2816024127017500156 0.35902259817554865728 0.76335005667225741544 -0.48364212629613712036 -0.6288988702453908175 0.68294273799948823633 0.3857430321586591826 -0.863646742043449267 -0.0088071221811634355092 0.72985673038065579377 0.87210254378296092614 0.17409522175070202277 0.31397849767730956483 -1.4358717361550015212 -2.6576755415109469816 -0.27827777484752630466;1.1294040929426900632 0.67390259202345337286 -0.54518488132102604915 0.86970219739401022352 1.6672448691930277231 -1.4031749133517197325 1.1964766919004437007 -1.8400337858526034651 -0.48601127243596298211 -1.2533352018987098386 0.010737491750262683626 -1.5429606687429755496 -0.96735474422071499045 0.75045177623472270056 -0.22892163320606084831 0.57620589428219881611 1.5744667725876773101 0.2331378853911774407 0.27032250775477062454 -1.3153744751291722714 0.0012766840384412288679 0.89333826558374340721 1.1609458044587097625 0.8338986024458556745 0.31427643840404734243;1.1912060639329196121 0.92203182643839975974 1.2586961565830103726 0.87282984068284663604 -2.9527524294529139404 -2.9411524580975156873 2.3736875133318724451 1.6732988770327288375 0.38678268799718290571 2.24865928024040862 -0.29854113902362439115 2.5576835329392864082 -0.24783820308744539118 1.3205816457886874193 0.11762856437899946171 -1.5060749553551706637 -1.5113530039157780926 -0.26561651320455059722 -5.9899813376371566775 1.9343460388084985357 -0.62657963444555875299 -2.8543539027917979034 -1.6796879834014495358 -0.22015196936733757993 -0.34879144675986301083;5.6677913277616571719 -4.9976971189403398554 -1.2907391714550773276 10.025827357950996443 -1.3610070205946991351 -7.4406342168508405877 -7.3387171380161646539 5.1608122969765988231 1.7054737643580004658 -2.0705613447303385932 -2.9123829077515339669 -6.2266879794088758615 5.1738304745960315145 -4.3659948462004987135 2.1974348661157669937 -0.64872371986378030151 5.8196262508760430165 0.44711670049017437911 0.21941864671789773622 2.5717133524168271919 1.320975932303790179 -1.3444539635869845462 3.9794923043369627713 -2.7539717308085593928 3.2881630850078211736;-2.3821441522666897406 0.10647427244632624854 -1.2957275878044987039 -0.43397307234802134923 -1.2903067505867134024 0.29359596509566671108 1.7475443815824338589 1.277573417254464605 -0.10741012997761256731 -0.35370094675582341992 -0.27688108773682346131 -0.052028461385916685566 -0.39793075120491738783 -0.13175815876223712086 0.9328668891599344315 0.10024002092571432376 -1.2326216536455800732 -0.48616339002232483724 -1.0792999098609423747 2.4543570419348275102 -0.28087488725073400664 -0.86887694617404154229 0.42035595071725906369 -2.1351948546868926293 0.28973506212044441988;-0.68998280420006385949 -0.4348118852486482222 -0.18324113643525505313 0.19220734977596706794 0.54677743034210557482 1.3590381967705902344 0.46617199790343816224 1.103673073939443583 -0.54661060141350648056 2.3251649607678266385 -0.57473433117328831532 1.5322732534959135897 -1.3538761875925142686 1.0358736867017499517 -0.089242986221572687122 0.58038245338817351371 1.7318934314095169036 0.38524962526896583404 0.058482532716858458277 2.0606036068638977632 -0.12693370727861288949 0.35600040408912903001 0.50608527812604209295 1.4457379845161135723 0.092611317610406820866];

% Layer 3
b3 = -4.7479000645658233637;
LW3_2 = [1.1878460826120003091 0.10122866730283905379 -0.29722417243080323512 -0.01120373087971675459 0.33396970186341606857 -0.10338775452450936487 -0.063159118710026912469 0.023020392160298181611 -0.14269839014567634039 3.7934744710512595667 0.42885335183520528757 0.086243571603687105287 -0.0092929765316936974173 -0.22092433065825406446 -0.44883278603695264675];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
