function [Y,Xf,Af] = ESPER_silicate_1_Other_1(X,~,~)
%ESPER_SILICATE_1_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_1_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0566201621792714604;6.852755950676916008;-0.31268963151605444484;1.8780743053232520356;0.72611621348200972026;-1.0109183919279440822;15.573146937068345963;1.3448858268015235762;0.12666564548509218202;1.4996886800145003971;0.59639775093674551876;-0.87731620626603057378;0.74509868429994596806;1.5050310063441332264;-1.9341518474561201213;0.38278511370233414546;-0.75012027720669771647;-1.2180813698456078864;0.80003014330966792933;-3.7205239357302675174;0.53778965408012946448;-0.23665854475466099882;0.14008656152100290582;0.51759315590125742901;1.9580231686758735599;-0.57233564660974389771;0.66031436442161228761;0.43453896496136074079;-0.52208409159949831224;0.58924821007247007998;0.48057175809839325353;-0.085247525104600388457;0.61573437996757440782;1.9400933209128261581;-8.1368774026541306199;-3.0922596515315925458;-0.091624084342009276538;-7.2324344033768985796;-0.25984006731382131017;3.9410119644746934853];
IW1_1 = [3.0413158952878007746 -1.1113198709822758037 1.2920071663422840746 0.36268140156245765038 2.5634074982784578189 1.8469735835380045597 -1.8682338926877708474 -0.89130710046521754997 2.5869111475769823727;1.5028991559555382462 -0.57205008431510351308 -4.0672063351875040738 1.4441876439836254242 -2.8682919571679046378 3.1523974870768824985 0.48811264698862039113 -0.82163970480353620829 0.79284648777084176796;1.4266147618861624302 0.5750403462865397719 1.5245632570248015547 0.72860643306789996121 2.1837879593705764592 1.3600903875478593807 -2.1710251607121588968 6.44183359031076197 -0.80947355940202447844;-1.4181740322413949329 -0.61850613067219917252 -1.1686074056380133523 1.8058980245487321614 -4.2522975358563215309 2.7986898604172960603 3.0295236747432343627 1.1204485252448483923 0.21681874058674768802;-0.058963534466686805258 0.084354615261667570403 -0.31993933865532403482 0.58721658100988183282 -1.0059817670829951375 0.86947774288489410033 0.071545714248813410685 -0.51442159649510421637 0.10093685253790513068;-0.80553062432884170452 2.3026806662279386551 -0.36914851148644439727 -0.35617275486707922205 3.6688022118052114884 -0.26057391444744859577 0.32258609292865242368 -1.8705802533226441042 2.2754088325946955074;-0.33111676119838778787 0.30836228629506040599 0.25803759743438881014 12.481511913000481684 2.4369258342750432789 -0.2101604853421061847 -0.91552592160746848471 1.6536994557273709816 -0.86393614556698694606;-0.0064922117981961059013 -0.043957039284477937569 -0.30657703728578444835 -1.1360478923396757356 -1.643713594191885452 1.2764811233291126769 -0.61481067195650118684 -1.189238970961504327 0.74799892252251465319;-0.017643818044382118121 0.10054516466240578931 0.034715390824205626108 -0.62352263510623029408 1.0625042475324466551 -1.2096122638963267004 -0.84990515921793285958 -1.009588462814991372 -0.078484944622014357618;-1.0821391992411120153 -2.23176304266061587 -0.20577312085536644815 -0.93886306279997311375 -0.040013861446951091982 -0.26553871348922719609 2.6330142082050738139 -1.7191032405519561799 -1.8284154061975668171;0.99738176937564837488 0.18730492235846549209 0.010403661747957499567 0.81733284693062080439 2.3325345372897956508 -2.4575386303252777509 -1.1557417460563472744 -0.22854938937258439946 -2.0584949239598397952;-0.21809681063728728057 0.17731236213607978747 -1.1723196977501395555 -0.40738054081342600643 -0.95693436014122990052 0.6868774849906251756 -0.51674720765336801254 0.43332106554890081895 0.28377127715166228228;0.20286297752630819136 0.041541555807264221589 -0.18349324459399812826 -0.40622525666042813564 -0.28662933705165238862 0.61364828998361498069 -0.63332827840551009224 -0.88593238070132829254 0.26210428023456766589;-0.81705314680189100596 2.7197721370279706044 -0.15131002634319251632 1.0320860780513851918 1.4301195605402596822 0.25993920223608490971 0.61457650591160761788 -1.0252479878586335804 0.84214906351607021762;0.75072970211851464128 -1.0449181763269066447 -0.045411799968687369122 0.41691716594734146151 0.27339318252986638536 -0.036678060775138077165 -0.37142998382157815795 0.7252811952512557836 -0.177086737657277421;0.079202057853434010282 -0.21808039235014636814 1.1521217745051053338 0.43575533374517899654 2.5606072732943929715 -0.71704506499807241227 -0.036980139010371802788 0.12160129795310009593 -0.17602017011611947872;1.4315555666092296683 1.1610029213729025077 0.23106400218047085104 -0.47967447904866972186 -0.29817730804687553325 -0.31728472468917068294 0.34510821684822823308 -0.031475996354372585972 -0.30447366947987597463;1.9124096333905664657 -1.6897658098928975967 -0.19967379462663015222 -0.57213725669990334044 5.3151178416258151316 -1.9726883513660804503 1.2654364956641079853 -2.4754938262657906201 0.29191787801150215209;-0.14306480790330511343 -0.29879862549694646834 0.10740270145144045766 -0.3504200056726881618 -0.60765027467161691899 0.52498150619807670836 0.15982875305000379673 -0.46063199654245207126 0.044686137485774587996;-0.0079087556321327349973 0.029957977260808375114 -0.37665354103622955551 0.77837399869075307723 10.117523813178443959 -4.867026180140421765 0.1352763678044548723 -0.29914818543795751449 0.37870727269042259167;0.1605293657243448413 0.039662220597406608324 -0.20394751079267031679 -0.60944395073544022079 0.048663447031434249601 0.29800636573824579312 -0.67217713833405645651 -0.96139189720704454345 0.19873709170023876047;0.42826096529669893664 -0.27965254235560843554 -3.5730765401899557965 1.5082095063378231359 5.932503899826714111 -3.0228780657853526748 -0.98580055060864646421 0.84522565906498936528 1.3437598226568152615;-0.1758047049572123155 0.059656012780253966921 0.6032334243402036611 -0.72180417663564588882 -1.3980434713662981405 1.4858882368010211117 -0.10578124220263281086 -0.55068062717343213563 0.2169698649070965768;2.2468602992608319724 -1.0781207554613867483 0.45422581354012298016 -0.026028215253967947745 -0.20897768831994126271 -0.70686545139844625396 -0.50003293355760825012 0.64565962153710210192 -0.56664549386301532596;1.0756544996249182145 1.1711534707695014923 0.092793930406245575537 0.87002594307906377935 -0.69650064757541418903 2.0724024067295667706 -1.4107503731419486215 0.5270007973709218696 1.6484265747621023035;0.17453953344983741403 -0.37360950661756486824 -0.18022627410152336491 0.018856687108427208632 0.65590975699321663051 -0.91081875476826246185 -0.069248155598373592468 0.34787792122806632245 -0.049647565326474990544;-0.53814864345086022013 -1.1811146984165266094 0.52686549526594728121 -0.87733258372319355978 -2.7934553883839079447 2.1690366943023970947 0.29071871184013114986 -0.25617321209272519988 -0.35129202304857026773;1.118862328993362798 -0.30214382867994482584 0.22101821707141705575 -0.70406807875771315608 -0.017662749593260720221 -0.59985178692028839897 0.18921458315211525658 -0.31505078233712174862 -0.045553046829596655076;-0.025172084339051749302 -0.061372214546965522808 0.64111132633366807454 -0.5076982216714605034 1.586920150177517197 -0.88999684575879001169 0.069577070534042509409 0.46694428065533177818 -0.17338828234385125771;0.11547698030723306528 0.0021779335504699620998 -0.86470605866539773654 0.58112795732730615494 -1.9983818616071427066 0.98946787966302496287 0.002742983908646088112 -0.8991818100778644629 0.20452326114451876982;-0.19815870105019797731 0.024203829806773536487 0.98123275241120555545 -0.33557516913104634693 -1.6487128542057867264 1.6558404238913568829 -0.047058676511292543698 -0.52913572316957813158 -0.085567974910880320594;0.0011743833061004917227 0.070524524543557801093 0.23530996412234900239 1.2825962035881681711 -0.027790873968264871718 0.18628583968367815049 0.68508439907371931898 0.39907994570556326597 -0.63184317759602903752;-0.21508943322076159999 0.063931454686877303706 0.9965907717168371871 -0.026849814430855305919 -1.3374700738112994536 1.4080500927558514679 -0.1263104241235627756 -0.50821969297392755038 -0.23268795217982038426;-0.087738440406938705829 -0.086291463061049761274 0.14803657236514974893 -0.57237173147531694717 -1.9727815619615625131 1.7818754686738504933 -0.034579991487346611878 -1.2694277307004069311 0.30879917784200067166;7.0019586181725239626 3.3665206966549368062 1.0823723997128122942 -0.52263537832949158446 1.8636117241010710099 -1.3238220922718464401 0.65782363952067079982 -0.41136156945453611344 -0.888313018965322998;-0.0040287012606174061116 0.1065890601903193291 -0.83872038192593190153 0.57739465419967050952 6.3908514959976292502 -3.5502069890130605323 -0.57029846213978396818 1.9303138564696729063 0.22545916622455802747;-0.31294226681406545065 0.098128381322351548866 0.84907778850412585214 0.20701477413880584044 1.7678327641057298703 -1.3996263624189086983 -0.10074892694641904289 1.5339200498491063485 -0.35135032836914892318;-0.025818183554932951779 -0.33054887396883408934 -0.75031199210596721816 -0.13069522455821344642 7.2973950247372387778 -7.0000026016653471572 -0.34150016761916074381 -0.42649236004683777068 0.051259031952960894263;-0.08082135605254223143 0.18801458717372002138 -1.0253128727351801253 -0.28508492029073501106 -2.3004025845751807644 0.75068147562862197475 -0.010665526262646340266 -0.0040674400823227626137 0.14916438226951378443;0.45455463671974166706 -0.19572759586060536896 -0.13714082029191893009 3.3841651853661578464 0.47876882457551389605 -0.86819977906361422981 1.3902340797996877164 0.8792768107278253753 -1.5432451730234517662];

% Layer 2
b2 = -2.0027159010705863906;
LW2_1 = [0.066385271881683013961 0.15067701231593244593 0.039945492947733210465 -0.036615815017614655735 -9.6240460982249658173 0.10139581171429891404 -2.7088207741096836934 5.0301932792356476298 0.82395440112155338142 -0.15503170517976280762 -0.10694337666770391271 0.81889552940067977804 5.720722714270174869 0.12743591468595746874 -2.3054975234178178845 -5.1675625258737323264 -0.40182480690390492972 0.070812633474814423717 8.6196638232848297179 0.88639595093918199797 -5.3890505902770726721 0.12431018210181350725 -5.6783889721560667496 -0.31877855162020096724 0.18501308340460012603 -4.3312318207080027221 -0.21432604553508702305 0.9647234314189686577 -12.093008297149328456 -4.0618568324943584713 6.1816856839049565409 3.541918296274786826 -3.2128073426226801956 -9.2472456435582692791 -0.15708059088517822843 -1.175152452045302276 -0.65796155567252312402 -0.92282617165616287469 -8.0170725148975137131 0.38787420639134673195];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
