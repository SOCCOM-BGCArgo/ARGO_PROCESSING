function [Y,Xf,Af] = ESPER_DIC_1_Atl_2(X,~,~)
%ESPER_DIC_1_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [24.983536351912036366;-0.077811330527298064319;1.4835317066729949431;-0.60677402177959194329;5.1512458172843063053;0.15068300673922224719;0.53591438652969836109;0.55587205174246434591;0.38706446516414449999;0.35826677842030774102;-4.1153802953525016051;-1.0569699179703377911;1.5985306252887072631;3.6525977130714117891;-1.6000578117657995314;-6.7462377157953676843;1.3417439327644125058;-7.2159956401420322081;0.60231893995698282396;2.915155969340526898];
IW1_1 = [-0.77465963263109771653 0.55643533111455123485 -0.22785147426352628242 0.069424174718662676198 -29.504013771697916724 5.6422338448534583577 -0.059997965783161313902 -1.0116104114452024731 2.2937707095329162854;-0.2992291608033342265 0.13218172982153378325 -1.0814421048301046113 0.11279749596517506249 -0.93483684808062317284 -1.0198437607793762183 0.27120091523271344647 1.9005266612701352535 -1.3855675182942888135;-0.1731979487587134714 0.38046058948146954659 0.348128790454885928 0.45444988281561404797 0.089115202319946310028 1.0428142061130913909 0.43806765395721092293 0.26688010318090471529 -0.22156712709956508101;-0.61390203898801831706 -1.2806762396612758614 -1.119463179867733027 -0.12070882100304408668 0.029218602743041652281 -1.242351590120880811 1.6120398653051797311 -0.61386739877210405592 -3.5227121392228486485;0.0033771692729804053852 0.0014275767576272455073 -0.66004441104047262279 -0.27587613209038319706 -5.272513061066589124 3.3691549305750418952 -1.3637291328242828747 3.7519457800530990887 -0.43708383821919272183;0.10285513111560608268 0.24678351364090650444 -0.11548444879214909975 -0.28581723813995241201 -0.76683394923712211444 0.72705657533517376034 0.15119552091871493738 0.3825187446638279587 -0.4135806269166136806;-0.081637962844872902224 -0.54521557744723203598 0.37318504675400798742 -0.016808186669766606025 -0.99397144416623628427 -0.91957744261750240522 -0.32569503758622403433 -0.19136260828782605814 0.31779486826841191194;0.13378856016749865465 0.044045138334790193135 -0.21513329557690849536 -0.0076646491668347742354 -0.88498304880675560113 0.17783852939974800766 0.19651933975688176681 -0.66632722382608344791 0.055920864316513149705;-0.2686145117734420884 0.3773738134725722615 0.52519759207446081728 -0.54736984640003150115 -2.5870005830585918183 -0.081444472435388381992 -1.1182711257523592074 1.6778456410776352303 -0.041044519470674584172;-0.11208484551662512008 0.45687417666685253836 0.074248939032036720409 -0.39240755181906344928 0.48971122077209455759 0.59239619057266434954 -0.2272143295995365242 -1.4113956014382045279 1.1180526805692780901;-0.032873623400226544 -0.1472810383745359053 0.45155970528161210042 -0.72227892256286441164 1.8483256361256170663 -2.7564048057296872685 -0.93045501265577068573 0.16148043208485310385 -0.46723009852593960778;0.17587464112451536846 0.010099582885876088809 -0.072493961799126552248 -0.3895791621356256007 0.11156806367162351579 0.10734658322570264644 0.17718800072484311436 0.2855997415174966747 -0.3739732524677413239;0.48508651735728114396 0.28946226178606282442 0.1666629878354987937 0.12951379354259545673 -0.65324193036071742657 1.1902375492719565742 0.93620895471337695071 -1.4522253652167289584 -0.52960257491698392585;-0.41178175141934220127 0.4807345664041064448 0.046702040187655793901 0.34093043497811409415 -1.018955044921672437 3.3246703729075006706 0.080079773107928436948 -0.13108515815543492211 1.4741396795533951991;0.55259029538288562122 -1.2059413353080201681 0.21573357306825491353 0.196380275796116055 0.51178352667805782072 -0.910644770731933062 -0.69898948869149535312 -0.70619902160390046753 0.85252310617219295708;-2.7299797827844711762 2.3706169097206446494 2.4633109868716673851 1.2180787977025908653 -18.539684116333138064 -2.5320243943702354095 4.998089626516764028 9.2742122233642323437 -15.160036684122811579;-0.52240770370309375092 1.0541137255150128116 -0.37526400454222130776 -0.079349542346726475994 1.4449204341366170823 -0.5453863235517941721 0.91235400925879228673 1.1404034425989175716 -0.68272353156791465434;0.29587712716667063928 -2.5373452869182240299 4.8748505203826564269 0.65495864502236422755 0.36448194879220324749 -0.53135566912387077743 -0.16141618640288285524 0.84834539472102110658 -2.8378270560196616756;3.3120992917020850577 -2.1457715500482348325 2.4898108848258635462 -0.33822205903214092038 3.9828730577323891993 -0.37030202891005736809 0.73869963195979115866 3.5783068370079704756 2.6057640006649500641;-0.43081434112158684124 0.27931451282307856454 0.52529754520522753403 0.22633596591936985809 -0.28390655969750638876 0.3844144948894190339 -0.20406100284364744879 0.35886499250110603931 0.028299551094878735991];

% Layer 2
b2 = [-16.119036601009394616;208.7849465655089034;23.407866096496942276;67.978584517053150194;-79.389995595399867057;36.847435731047589513;-11.604865910898597647;-140.70275071732569927;122.5872593431870996;10.502803263824525004;0.15864831068108894985;-31.784077542049278264;-73.051995912787958787;-12.702585582381285434;16.749848065819563203;-17.236325899554362451;4.5371249444672949735;165.95483259801329723;-87.375173671341912041;-56.653820313333433489];
LW2_1 = [-13.705537198219820638 16.711000539680181731 1.696148093816016722 41.790767289491455472 63.058064847966484479 29.109637722380501401 -9.6470503748149187828 -27.498391259416901988 10.670546008343027466 19.380220374593562838 -1.3755383592908940749 12.357765756462304907 7.4092685394746666816 -50.87734181054528193 -1.9285500187074158251 2.1118989525619835668 -88.940267275290509019 -5.5193445620679240093 -3.7666522173624783498 112.81458454667745173;7.5150828180278699264 24.012323087452749348 39.766715037052996706 -1.5706931702521262917 -11.38322516642862503 30.544078264281598223 -5.605542696747787268 26.183841460363616704 -44.932094629634399041 -0.30223867067065396386 4.0510546403692897499 -7.2260356821904636604 -20.807881366394330058 10.241339778636726621 -13.204400661583351351 -6.2640208004119228846 -5.2696385604670075153 13.668362198767784577 -4.5031411034840855834 -226.38833081402694347;-37.51710285012465107 66.038253377491557217 20.739576408091632942 1.8382700289197666521 -46.433845176243053743 22.370473781035315142 33.87948201133068693 23.971324803504089118 67.848448192833529902 -18.865384502405351697 -48.661829650743676723 -9.7392846230455489831 20.043701997669963077 -38.715424885563592738 -66.626024328584875889 82.306740849815767547 -41.215926050489009924 -6.2852441199241013692 66.272192274427581538 -68.876886527481048006;-36.772911363239089155 37.797510516719874829 40.885710172317665467 -65.670858569918294734 94.255398298834464299 13.892768840584269086 -33.532710956331087004 61.077606300216864099 -34.480541371053341493 28.845206740641017973 27.784746387010958557 -37.822442262729140339 -21.404327609153938283 -87.306924600446109253 20.238142038416668811 48.146582904375954115 -38.235509183718917825 19.027258105763682039 -39.451609082871151202 37.569968694213685012;9.9237145641498951676 -14.329645710582195051 -19.705055894377732528 25.351770010013535028 7.2795499054936065875 -31.438069508047060907 10.573345240568269077 -7.1183567349713881001 15.887962605352049295 -20.04342230860901708 13.254440247563566757 -6.9467693044460485652 -1.2813574126018383303 17.350805763215110034 3.9118799487291124883 38.113829078855275156 18.012511634826552154 -20.822920196497648249 36.305637857316270356 49.608384966495840729;-3.5732377110110324914 5.4622300945741653067 1.4428766723570449759 -33.051286035226937088 40.633994203464574468 10.014864826537060338 19.433123884206601417 26.989986690643220868 -9.6603655067366283049 -17.556830371478529429 20.592477151574911431 6.788346310936135275 1.3792484345046081007 1.5061346741516490333 -4.0331642630169799446 -12.164209157980788945 -2.1357328049009942639 5.1481117015585136087 -21.482394068739200321 2.9209654937465594493;-5.7362477016999982027 -2.383744362636266434 -7.4027933398283778388 -4.7381641013007298469 -0.52102393399212520997 6.8385177431183690189 6.1234831852801283603 5.6968971564488617432 0.85246697676746496786 3.1130112312398390273 1.4076162916880938791 -6.1347828455006316872 -3.4225249483886028834 -2.4349068419628263626 -3.7940806681358321129 -8.214420770286235296 11.9089793277800986 1.2902657811559001821 8.8215870449726008218 -12.918223559390307642;-31.550821636009516169 14.821088672664073371 196.13266624198462296 -6.2536204952324494499 33.424679898389157984 -136.39326634228731905 -31.91942532723542314 126.49527994689320565 134.55720061940283472 -21.019336119871621094 18.782808520080020998 73.307183476564432567 -20.515995512249780575 44.574020393666756945 99.704403175308428331 66.795901442094546496 15.856499052768164404 -32.157006680402709264 158.48638254582564855 103.3807102775460578;-1.9933895815464850454 -5.6810769374180791758 -3.6424164593096248765 -2.7482707906875973869 1.8464940843202843901 -8.8812650872403846591 -8.6812209092465462135 9.9360527275560599492 -5.8799942094291024475 0.29271546016170163496 8.3578814723824379485 5.4780666228235217474 -0.42204236672279049625 0.35928642327186161021 -13.49560727007055938 15.911458254871211793 -10.942870840973956348 1.6999482318392167279 -89.391731410917955714 -5.8726712845433777233;-0.41951768996916050103 -1.2718576792265006148 -2.0435338289199900252 -2.0055012320188829733 -0.69586024522025413663 4.6700000809199195828 0.84840831201608801759 4.0458038364294823808 1.7912742220226689494 -2.4639559553368002298 -0.56045382392116027681 -3.5097137898041790294 -1.4180582269399168993 0.89327176806244046325 -0.75477612595512411087 0.019112062239762969001 -5.121737849344601301 -0.212941357930688413 -0.02133778004073720938 -0.88689519481330647555;0.02153480208330367171 -0.87217198279927621307 -0.72626162880442890479 -0.88570013301913119719 -0.16851921658298249507 -3.8376720494821419116 -1.9907310849327299884 -0.0011317432030741453319 1.5248964768108272949 -0.6780956985999426756 -0.93020228332097032453 3.7077431661565687371 -0.7470861468287168794 0.34562092149358830673 0.19493471643264956294 0.064621252411391771897 1.7013782088283280203 -0.34489790023592403756 0.1034162209182070552 0.99079534390794410381;-1.0401501182009325053 7.9240672711624045021 9.3376786004246401518 4.2174881496863818597 2.0833129127752987308 -8.672680169229263214 -0.14375391063996292851 15.385437338264454254 3.5695373911333341255 8.1633528330407880702 0.51286486085748539399 6.8033322574649934822 3.7427996750568834905 0.30784374159980598673 9.415832143137354393 13.659764709296156937 -3.548745784544926174 1.9455330146149754089 4.0537496879681409467 49.057498776364560911;0.065471190126380474084 0.78507121587311490263 -9.0451091220019534944 1.4360210451933528297 0.48232898877656654735 6.4361961656767894269 5.2097009882120879354 -1.0997064055632526092 -1.9051950922933942323 4.2498943279453351707 2.9039753329485646915 9.0507288619332442181 -0.93084765517469802987 2.7494844241856015721 -3.6632665492776386174 -0.097119344295248752341 -0.73788549638551681475 0.9028778471822812568 0.65928490420010754658 76.402748806114573199;-0.92373718383990899294 -2.7303639894365829832 -11.40644078688852936 5.8177742777121510542 1.1188307661828278405 -4.3103558368022607539 -0.18706197835966204002 5.5467994924748769137 8.1204322486515518875 -3.9271312334277213019 -1.1943756514007595193 -5.3562909396717408583 5.7268025420610966236 3.9802280744256868239 -9.0333929247675452956 -2.0664050795690762641 -2.6830324880106881658 -0.4664785243025954542 0.16537837449238457221 4.7213869134051469345;1.8721978440784903253 7.8087146010395542817 -10.962132801930643211 -10.396866967710016283 -2.1560403722137664317 18.496183533174633595 13.94625538387456487 -8.7414500253794091833 -6.0355320644506953442 13.95331648350095044 -7.8976755321567173596 -11.006465734191976935 -10.000140675997664985 -9.5686295032561829998 -10.729322887010320997 -1.5082120518755515182 5.6235085293569326836 3.9196690119018366971 -21.158881963459364783 -18.617438227577238763;8.4806213321264518612 -4.5043486286745464398 -5.1885330684240473786 -11.644967976337747828 -0.42638129639247673852 -2.9994789384348243821 2.9912805262621464664 -2.3085740534810428315 4.4975938445924441567 -14.180607582400332589 -0.029331956016428878398 1.2614955611037512728 9.8730472895745364781 2.8283778283019942457 1.7408798120793527175 -7.0093611425605377718 16.669114691397247441 2.2256056837445332697 7.7203977929552012327 -5.4029291732928479419;12.153392032090209796 24.503757386661536799 0.94493621885744494282 -16.46066186575052015 -6.5847195839549597096 0.15427153049128028428 1.6883461324615822718 5.8761690399963155684 0.1352079590811116061 -15.098488544108613851 11.873702599532728996 -6.1364396297182173257 10.143934325314662104 -11.173876701083921503 -3.9137414546982487451 11.739466002228878594 -13.427030870947028518 -1.5612317962910655655 22.828394142612417284 -13.531332233543054144;0.93723313112412354187 23.751039749787761224 -10.859026483983345912 13.411350581779815982 -28.346059027802986918 2.8617028657521759172 -6.9734005960644598332 -80.687798418429650837 -2.6550290187408323028 34.247490122456667905 -10.998147037970323225 34.44712427906329566 10.033812727753657512 -13.739155252952059527 7.9314384188986641888 44.633778547380195789 -79.641324544930711227 -5.0131382763723904006 15.200630482173675517 -73.125038409117522065;-9.2174201403442417302 -18.782055245888162887 14.302656261219542699 -8.0305126583157928621 9.2223975978195351644 -0.048994064601264819547 -21.759011276809264501 -12.208919932647802398 -5.3436358207057121916 9.0267205560316430279 -16.132786080367718995 6.1051897210116319314 -29.076354582851823949 -9.0461346367688388881 9.2213920842742087558 2.1132115411179674958 86.742635464376860455 3.4483170825873719068 -5.9009886110153244587 49.316659568007381154;-62.140439520087284109 -12.884041144003948176 10.763938108521406534 -16.727541618499987663 -7.3590413794624680577 6.8944345246442759745 5.5016477608960627776 3.2146189473636779255 -8.0052974528762934625 8.7494667370790484284 -14.028389000468035164 17.652312046823233516 -39.63177796711586609 8.2463266156825945075 4.7074905539603086879 -26.657657977094714852 23.149888897017714129 12.704085134605856311 -0.73446589954401697575 14.354124640426965342];

% Layer 3
b3 = -0.24221260116053158762;
LW3_2 = [0.00061365246304429356752 0.00077526730529827673349 -4.1153781913629002107e-05 0.00071048449154474397748 -0.00056833628437244032398 -0.0011224203768549323012 0.0023937944099082031704 -0.00086854480915046316895 0.0010167013030679813643 -0.062877705786501147944 0.12615393802951929692 -0.006446414432000236068 -0.99880427402438476392 -0.027067036472418790766 0.0015178030362099871262 -0.0026679382308737787689 -0.0018752833443667169411 -0.00060651512073358314087 -0.0021973117533914971605 0.00057507736178917621007];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
