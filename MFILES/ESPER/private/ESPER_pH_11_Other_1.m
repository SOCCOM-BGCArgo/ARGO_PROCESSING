function [Y,Xf,Af] = ESPER_pH_11_Other_1(X,~,~)
%ESPER_PH_11_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_11_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.5621698538158779179;-3.2250412345992627294;-3.4337335599557707866;2.4850417839869511916;4.3992189378491559637;2.0617383109725451185;-1.1575401331151806694;-1.1260168161599226622;0.21616787606750195727;-1.9251735092775368319;-2.7656844073933339878;1.58284530775837462;-0.67668732484491345147;0.75951082731267094417;1.4353957992596142468;0.76483407102318368143;-0.21092635111062998932;1.6446388926172534894;-0.32929785165026992377;0.040540888950228053111;0.6784596426601015029;0.37737559678572851762;-1.6267927115607843103;3.1468275058747736672;-0.88953230785753067966;-1.5957082211341107048;0.090123633986166712395;2.0032189178339554481;1.0547152067443346102;-0.93306629490673742566;8.8522033545530902643;-3.429718691458035984;-1.8340567181287616982;-4.842333186541281087;2.3901274615204086693;-2.9291203739720645949;8.5907399630842657956;-4.7466488723582873632;-2.501166528840288894;-2.6136302482765119137];
IW1_1 = [0.7447169715077611718 1.5005180409295588717 0.37656536973265680723 0.013511164866296065251 -0.16546586925538092627 -0.71930624385448271862 0.318926220914924341;2.069257808831018508 1.6108174758840998475 0.49642900317702126634 0.010043854912229178977 0.35853147898501047663 0.95113243311003192737 -1.0630443140677388048;1.0407277804571146707 -0.016692067805241607437 -2.6409384090115759491 0.72258067650611468302 2.8636348286993329459 -1.5328110158194983015 -2.41798769284129067;-0.66688577075166810548 -0.17595327638751365185 0.86529586605478026051 0.97250138617948644892 -0.23657085171274330748 0.6341754500854368537 1.1602550825803137347;0.12196720211432994507 -0.087395194930918504439 1.9651176425244305523 2.6963909946042257104 1.894267201076414997 0.51480912054835792357 -0.5977231231942037315;-1.1721243095988322924 0.58931029641941612418 -0.64544935716612683585 0.83418111148054341353 -0.43882146926932136255 -0.45673926472518427966 0.29660264748660780665;0.44442359231724237745 0.0093145087682329538031 -0.20455855672876302465 -0.71610887399451939039 -0.35532366074877297368 -0.59212217433888236773 -0.45190651795910619093;0.88097052736080050384 -0.32151185465948056708 -0.041109263978944980689 0.23510642454423213987 -0.32816319960729445349 -0.1943926697319518504 0.18028257235844855066;1.1470576200460722571 -0.026339686977905236998 0.25348311254357436262 0.50782997696138343358 -2.8691136336229945414 0.32340153823466755156 -1.490637812839820997;-0.34346014730307083962 1.3156528961747069317 1.3010592507850922139 -0.39098916787138532358 -1.1323012982716262886 2.0038863975038880838 -0.16378043223207278123;1.7189282998329067365 2.4051287163901906574 5.9140851188179777154 1.171969549978835623 -0.2183051556061699483 -0.14138856184560891216 -1.9528081869183362418;-0.030193112474814726848 -0.016393998019601320471 0.28858790481175533582 -0.62450025662283359384 -1.3341886873507708966 -1.4651611371904695869 1.8844059700024251569;0.32063376212172234325 0.26045041831870613391 -0.21754351612291236706 1.0636245675415367806 0.81878215542952570427 1.4986195214009394583 -0.32303914870645744628;-0.27506124276431204168 -0.24499743042015151295 0.24403527719163112253 -1.2439293870888958882 -0.65550119242604143466 -1.642186673235626948 0.3834559937131420404;-0.52973450405807787078 -0.90285791183988961528 1.1292641613231590991 0.43204575427850716585 1.3499672368282860102 0.4368242083549512822 -1.2153964737804523466;-0.096981496486409191071 0.042573537369418747167 0.23653935764875952397 0.83784224894264003325 0.25360360413701660276 0.49489133319322747839 0.23347496735114364741;-0.98906590758424273169 -0.33299155606545971509 -2.8218976474429791068 -0.049134506316882077537 1.7366067294926730291 2.0330785596298475149 -0.044886029480286249171;1.6469690719666412182 -0.052686014182976588505 0.065237222455983831515 -0.14581261393732666831 0.096985980708289884489 -1.2133044151838947577 -0.59054236543061733311;-0.12567708980024508425 -0.58447403188697499843 1.2259078517743324799 -1.4405840398290994386 2.089743995254748743 -2.5785814909692277297 1.6754851314880574442;1.4170530471324020994 -0.15308521196392907426 0.2376150622399753054 0.14199452270478055138 -2.2548302188995292816 -0.25764490661131383975 -0.93491118555716434813;-0.75560154118392008904 0.20177312411176354101 -0.53512732306355270673 0.32371946942897156241 -1.6572988420341254745 -1.1587139579850400661 0.58432246812908672506;-1.294269351716742511 -0.12381250249386409334 0.041377754079287260014 -0.010336335246359757561 -1.0281613850060011828 0.26443372189092462232 -0.23024105528214444671;0.028734587650468629283 0.087781005427370648042 -0.45584468737402705774 0.77129532856821736431 1.2951713646052929185 1.618244935505432025 -1.9744555888338080063;0.69875493191456994335 0.64833834476651797107 1.8954707804320103381 1.0309885401438327879 -1.8135352149342258699 -0.90061746243642692988 1.3230826057198126211;1.4220710793367750124 -0.32952216358594954571 0.16352787240340502239 -0.88515248354030395816 -1.4461898927227159195 -0.83927162961938139851 -0.52920141535354947582;-0.51527888823911605076 -0.52331709827376504673 -0.8834216755329331594 -1.4256516882723759831 -0.0075422401277462896435 -0.22526711522424322509 -0.34178041700843059258;0.017100634314128424635 0.46077034418108470115 -0.81807079877951904834 0.1178026873738034358 -0.82183587625578713443 2.1222702229055583345 -0.16389491780236806195;0.74054689484125024723 0.71953065028382323653 1.2034563114277123663 1.7082081436881400016 0.071036844742243213102 0.032386917985337763948 0.40746155352586471698;0.22957079424570250858 0.2551220211994794651 0.45681877185864011581 1.2681111298368645812 0.17311238252273250526 0.52460252513997207569 0.15995024805997665185;-0.90915873401561575484 -0.91005955224664347725 0.25487695508990537707 -0.1196024918560985445 -1.9430355572827977539 0.19306911289773798224 0.95888181662670701755;5.7469331999140038647 -1.3751768581167891359 6.8463364235158605808 0.3914001737115098134 -1.7077611788426516615 2.3894821815086064731 -0.28532610913445605183;0.33051002670293178065 -3.6260445687066629183 -0.85930035699392637305 0.24717337220849533441 -0.50489356236715010606 -1.3242711912120459505 0.75303149613357023284;-1.3323713882889181015 1.465344561284171121 0.27104096826696616462 0.22981777700782141105 -1.2369289356762771526 -0.32126786980423222007 0.43588838591336659389;-1.2455320959776341461 -1.1176861035633949282 -2.7373877740686252125 -1.9989846164685947105 3.6945613774258201367 1.5588512670001033467 -1.2613227723781830214;1.7025103931796350398 -1.8272671381378404742 2.4284630687393868875 0.061747881613241899224 1.0374291442071676972 2.8278691258554751187 -0.36151083653149629349;-1.4870790121935086869 -2.0550496117375951499 -0.34648598374808475819 -1.0521754964117813191 -2.2954731541568054176 -1.0207281371140641824 0.46332306996893368733;5.6989045146702137501 -1.3109177844140817992 6.5428350690771193143 0.46941868690244858975 -1.739336455482627386 2.5256843132182376088 -0.44929477825137348335;0.082881649663885975654 -0.11166613743014758287 3.9640326327709125565 -3.8123881365416893985 1.3173120995347733508 -2.1630951090920151891 -0.32385565983720909777;-1.6843168213995065585 1.8115512799122188703 -2.4384725186046480871 -0.019810836575504288393 -0.95825486436978735139 -2.6017619686201522988 0.21573224054589329457;-1.4279996602170501596 -1.984217085304610162 -0.27759993085751588637 -0.87374526129775453853 -2.3826091238725286559 -0.95607230559004607873 0.48472781963749755896];

% Layer 2
b2 = -4.3341751239649308758;
LW2_1 = [-1.3054862851252551081 -0.41602804954191052733 0.13807714056307301975 1.2074133947471856754 -0.49738595922566058993 0.87360730143229070599 4.494095436889058881 -2.4824807965158472989 -0.42896496772528092123 -0.083298569206924300001 -0.031990371158445891908 -3.035755753201011764 2.0281181606812421769 1.7954797251593479501 0.49978632204745232492 5.2128132593558689223 -0.2284513084667313676 0.34973239615075724096 0.27228338363751525275 0.70980848888390313256 0.53602298496185041277 -0.81151512789762458855 -2.8431226398763174146 -0.64546887163987565206 -0.48598017913812863178 -5.7001170352120817952 0.49611921973171424494 -2.2518105034450215385 -5.4984437059205353293 -0.41628270716303333865 0.63756248966729356376 -0.14992623545674507723 -0.47031784080583560748 -0.23908671392245481324 0.96832405341609006921 -1.7633070975980447148 -0.6518817365209267356 -0.1061026747012896454 1.0368798758264479165 1.7871301539944814962];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
