function [Y,Xf,Af] = ESPER_oxygen_10_Other_3(X,~,~)
%ESPER_OXYGEN_10_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_10_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.1472100054587297535;3.9148013015249150115;-0.44792619239830289146;0.8213469474238861423;0.29629845019194633871;-0.73721377715524805119;1.6464857274761952599;-1.1699615052473304466;-2.3210045669407617375;-1.9147043660674871735;0.13127751501027720704;0.16657298114364860186;-0.12692345520987488583;0.5890347000703716196;-3.0642060840323197546;0.078265316633121223555;-1.241374917481374851;-3.8439405141706965985;0.56099030053397769269;-3.0527854214923380027;-5.3379932192467069996;-1.2027962193715606709;2.5130907141565845819;0.16354749552295985704;6.4692979849969169948];
IW1_1 = [-0.24123617361917568114 0.015902387263829222824 0.62635954596338916378 -2.6274996087590793969 0.97812995980647443606 -0.60413418768555271487 0.23197825772164351599;-0.46447861448662708383 0.060909291159066611399 1.2585142590410109964 1.5927471947617544146 2.122658004045839597 -0.84605860831881474216 2.3670271895549368502;0.067915267582019045456 -0.087919936899949480136 0.010251223237773259694 -0.33589959073810066181 -1.8554101744823348064 -0.40567354453962173322 -0.066932951750071828512;0.12067932431090563905 0.028975613129428805237 0.0026700034786695889949 0.48016926139068361046 2.0310426012315647704 0.35705574772289389029 0.40409825929121251376;-0.40536089526382751425 -0.2694472416532448511 -0.082504794066731099167 -0.038202611786509521608 1.434473353403322271 1.281950729739428807 -0.33306330798601402332;1.0624152187014566096 0.64750656408034945599 -1.2411996341439051061 0.63321714996702105349 3.9443620387332054555 1.8564983727355608423 -0.40175077380312218533;0.08047744825632838217 0.092310268345073456797 -0.024977267658647144682 1.5212060864843794938 3.4976118294085960514 0.80122915156308105455 0.10607464311226265374;0.023403118130909804362 -0.011453854910789575128 -0.27108737763514861863 0.12070348042024106605 -1.2686675200794177432 0.890323276990939938 0.20380259811761441968;0.096856131192451622169 -0.034457627188305119115 -1.8754912311797500291 0.16771681693742734875 -2.7052475967578097915 -0.82673054314601679415 -0.1929903480533303739;0.3621064484590903465 0.1568125617917994763 1.6864169943915945371 -0.45031134344518697343 -1.6811450764103876843 -0.77672474710890371252 -0.81208159703755145031;-0.012459452365442205343 0.27698188270093054841 -0.29960026499091452212 0.73451448138130659427 0.98451779028532737659 -0.57594800453442740462 -0.062057667180689737862;0.14245127757596046103 -0.028419829036027022262 0.20005630827305928565 -0.31706115048339139628 -1.9107785565931019178 -0.87423431421793373897 0.080367360407856719418;-0.27299227660224667513 0.10839450335388028934 0.05544564283786768133 0.45844727825334119498 1.0117313153600095976 0.51372469452877156382 -0.216292366027393268;0.083683964828737841812 -0.51487013162984796022 -1.2618981583363091392 0.77778830124290831982 0.25892246879935409964 0.0024407433923185504684 -0.43304580159089867131;-0.54331839176811003167 -0.13013194686972617831 -0.41287399583884937249 -2.6454477872892154799 1.0125779143422588557 -1.0906951578728885099 0.31118078078402811038;-0.12096359119486363443 -0.18603734572285571258 0.71172771458076811157 -0.34233358769804095312 -1.2593905510460141617 1.0283239777138308835 -0.42195590552280665131;-0.41438321449297804699 -0.15655546072620171727 -0.6008374000044859331 -1.0993213687024467884 -2.5200991499121485617 -0.62203094542733372574 -0.4174805739782506131;0.13341799528179312806 1.3138330371959108245 4.5161516192370525502 0.55938175546989832299 -6.4871822654859006008 1.0331032337970667001 -0.051341549597989491471;0.049429138006677648953 -0.38434636913904773881 -1.3580078453256554383 0.65254563484089833647 0.10879876639428617824 -0.13167696820493701715 -0.28825841070461488691;-0.52037356120947342308 -0.12729360680209297896 -0.70491753719802985323 -2.1856864761586249912 0.70504746211794477873 -0.92092095558840059155 -0.29566356911069502367;-0.10700709426541045455 -0.034333397086208541915 1.5363347934223565705 -4.1094980502557358903 -2.5491875056098050045 -1.5127978146105958146 -1.0255357321357467804;-0.14523511396102872784 0.026568335986728419673 1.1737035326540379288 -0.44845980654035483282 -0.76629352531901040457 0.010727167404215235194 0.51285613835877041922;-0.086370444667195955812 -0.010100812446629567343 -0.68720579859931874012 2.2269943672501981702 -1.2169929940424804027 0.39251913034899499344 -0.13404784520847615181;0.40184037456886206874 0.014912077845283701685 0.53643242028440285551 -0.27670667142281984985 0.71849338886289593198 -0.30364711901676039174 0.46268593493311516163;-0.18030311467824794436 -0.2160483303838033331 4.7675110884555005342 3.8519321359989309173 0.91960994753112301758 2.4888219535637969848 -1.0981930248419751184];

% Layer 2
b2 = [-6.3511370508325661888;4.0584764618155908522;-3.8373639862161068592;-6.3930871091449716914;2.8429325871121058356;-2.1345782229593583956;-0.40454103385566780871;-3.4965160736841127687;11.775316078784483054;-0.12703218323512296961;-1.6896419618579692212;1.3438361974370824914;-3.9007555991794196082;-0.3224570981549756965;4.4388039680027766565];
LW2_1 = [1.2588508533028854863 -0.22670118949220502413 -4.5307400154985479901 -0.90515614009058542599 0.79599589176132712343 0.65996296628894346448 -4.1430095069561430066 -6.6415062541414160435 -0.26049286101417601369 -0.87870975790181093945 -0.65986234242526309313 -8.2056577665405416866 -5.5870386082129588345 -0.43270810278810334371 -0.12754735759653088034 -1.8961574945798089775 -0.64302024392591805579 0.29390141402491254397 0.48823060670081114276 -0.6357641409234929819 1.1379553547017788873 0.48698673749098286834 2.3120121453266659906 0.40416191226988729124 1.539723188894114303;-0.06084534160032442629 0.025184578082719687869 0.56368150687179585656 5.1497693565643292146 -0.70337399270101219617 1.3486883539742184901 0.57888199721178168478 3.3417045546826789071 0.79517062113038772253 3.0424946207797209929 -1.7401778066978015325 7.2427171380308559279 5.0903396084239140862 -9.2744318032512165217 -3.5300110632187231552 1.8420452389256676273 1.1213454080747042862 1.6904867091588062777 12.849959645585084189 5.4335590901792700791 -1.083679508231630173 -0.91574648831193450338 -2.7063955988004542164 -0.59371276932694905248 0.5288160913995951784;-1.0419828817097944729 0.74803459573034569718 -14.029653649918925495 -7.5332518021744014902 0.37844975425111737621 -1.0498535993337052563 -3.5101233279423373901 -0.32123462535561292386 0.60438487253391803833 1.9726587415511986912 -0.68369759099958182791 -0.98828038668159090552 -7.4279088471811869354 -6.351365192528749759 4.8531812733172312591 3.3845158699791118018 -7.4906342414405822083 1.2250572192043236441 6.1357849445837162605 -4.1076789001523890121 -0.28708005488943005856 -6.2050632041797246785 1.9211166575301730219 0.20053454612577384375 -0.46687729326621130177;2.5060429716612993012 -0.94317767823732778787 0.371219546242368581 5.3846275817405455655 -1.0871278690407539802 0.62822532074070780439 1.0390251239378653914 1.362014084087808552 -5.7785573525331770384 1.8910715186863509274 -3.1274587406500429232 6.4753653516472731155 6.4921161829944313837 -4.5977519596884537378 -0.87664480543228395781 0.23399123974428553963 2.4672397193835382545 -0.22747798464066151802 4.8509586095483570034 -0.82135089444097331146 -0.91463178605923201037 0.32196430012170995649 0.830969974758588803 0.2618433002883764904 0.46186904478339191327;1.895478192305371179 -0.22712891774062810013 -2.5533409769785349042 5.647468035038739842 -1.635523434178376867 0.56271648440935229107 0.27632229813651004724 6.7736453417790158937 -0.20808186239273049334 3.0408048621502845599 -2.0653095831848649055 9.2512609929096552008 2.6781742744267447165 4.91271370262382856 -4.7757158681395601718 -1.1261162070636261401 1.1977757300864373402 -0.036698449145854246389 -5.4268478669198056963 5.3170028873233734501 -1.1705365610779752128 0.066356667576830188904 2.7005548076704926075 -4.1082536216695784148 1.010351670732337892;0.56924752140444734305 -0.26433777584117285064 4.016508016102200429 4.355907912846402219 0.75810131113459733321 -0.076989770979505933735 0.073753644903470222394 -0.88027070551895136852 -0.70769305527819792445 1.3151221823829943869 0.97802097474404270372 -1.3008668656230553129 -0.43930084402850122505 0.12615462947530309279 0.8682776061969224024 0.29376959146913911303 0.67401544944060698406 0.23226520565848424171 -1.1184150884061703213 0.33088434182853676546 0.29565019100002243313 -0.73939309699282518284 3.0473741577135728953 0.053388098929459684716 -0.14061342926211489734;0.43493738357645622683 -0.28637649711513296635 0.77498008405256257891 -1.7565529879614540931 0.44924303966679302036 0.064066241459548645132 0.20088228539874730671 -0.92154271732203529854 -0.57650434997686794691 -0.13128145427765330888 -1.1626100310689257977 -1.4565170300729000097 0.86468545194358914507 -1.6879350424388570584 4.0074244223221535677 -1.6500011581667062277 -0.52620471511537691978 -0.11320542006925218836 1.7835556687605900184 -4.3125317112731229585 0.14598739332384516598 0.011590354306775185744 0.15841478817815698998 1.182954005717101742 0.22790705210808387404;1.5696463254510832908 -0.48101563048434103909 -0.25240235230111363052 6.6479544880516732164 0.33859747303741632996 0.46542225066885906104 -1.6691192667034882025 -3.8785944408967458763 1.3139305223252117916 1.3962781695715642538 -1.8802199995344690553 -0.7506785235885750085 -0.32807023104006277636 4.1161106254896751011 0.01558280208917795992 -3.3868000796305204325 1.1195755094470245528 0.29212157679237721331 -6.324171115846338509 0.027924029303754385745 0.6936285486195543637 -2.0274748574214869201 3.9901395296066048957 -1.3423202534639926409 0.66705213397906015782;0.77198262874127032696 0.89942712181045458841 -15.649727731068095338 -19.097778386626245606 2.9121258908034399759 -0.9465458113193405687 -4.2580699299393440782 7.929333041734999199 3.3562215346809431971 1.298574850993409413 10.888558689828432335 -6.9965133680910431835 -6.8922458746391184192 -0.45575510606988983708 5.4588120108066089387 5.4376049545731692803 -2.4654856835993377295 0.37359588411447913758 8.2912697650709894504 -6.7420152007412799122 -2.2951008948810529553 6.8809491999443341825 3.3973700415106198314 9.549655113579106569 1.2411176743801515254;-4.0335000804393859042 0.30022977708194764634 -11.720841912490195469 -15.05948189000810622 2.0322003597501763217 -1.2017727527423993639 0.258183306594116313 -0.30853898482888875154 -3.7728714970700023557 -1.4335704096535664132 11.178938324485391931 -13.971231574381016927 -21.457336922391458955 9.1676180735641477071 5.930810766943323209 4.1186257897396982841 0.62968904111630252807 -0.40610474912074712162 -7.593766474233638597 -5.4518677202033227758 1.5085017523533044148 8.4940526515306640221 0.37854161883251236098 -0.8447845587117553956 -0.57099450070641333266;0.86930315183416428937 1.7364405263066526874 11.043918752197633637 6.9120363522192205252 -3.041998265577966265 -0.144953259541506424 3.3884642357803511636 -2.6723112447805581482 1.6188857311642144143 -1.0949623923789724156 -5.3143389247763712646 0.28068409897074780845 7.8165675482929914963 -0.34259379443148463285 -8.2517989192321490322 -2.51544509853512821 4.9830599662244861037 0.47812071789387156073 -1.9102255514154988791 7.5603811723695422131 0.16465495373309724236 -0.52815754893459021524 -2.8663701697093246779 1.8270785070576349707 1.0067924915945236641;-1.5885807334680470682 0.63317240827126042291 2.7065344588784414626 5.1788433747004756214 -2.005458664522516532 -0.19897572556754333784 0.82879260295725210028 0.60418729891746847382 -0.073222562082736794564 -0.32401923303674062815 0.24994497969386433867 4.8763257999449951541 2.5687924880776309422 1.6479288857879803576 -9.7366028179827814881 2.9392524266353863283 0.92363895352058444921 0.52675302378645783019 -2.2019907149654174283 9.5847506916540208266 -0.83322323782513973978 -1.6292997445398778034 -4.8866742881631664019 -2.5451220589461729382 -1.2973429358695593994;-1.7777613066938338093 -0.47169486623351591925 -0.77326384307446738298 7.3060786523927916392 -1.8347683089967121717 0.18684892149027768071 -4.7984277845654066397 -3.0072165724691291011 -2.5311789965363367116 1.0992437424578369587 -5.2883730948726057619 3.1174620944553543822 3.1377844435108945831 -2.0755994312998207185 4.7844720028995606498 -2.1988586412939747916 -1.3503678882676881656 0.67403463849315603529 0.37299401991752295649 -2.339671232721753924 -0.48918449098172039902 -3.6632935126707710793 -1.4388038757518184507 -2.9361641092480224025 1.1849170748908768314;-8.0457274989029503587 2.3147827543550216767 -33.306678412379135068 -3.24479015040712504 -8.751899206945765286 -2.1070742499766583755 -12.865187095716262178 -9.7500021382475772214 3.4320650092465068148 5.6920274212834742755 4.6448213527031878556 -11.266397146608971624 -26.400391888228803339 -2.9860878432281139361 19.24850071070005697 10.453313428627577508 -2.4526680681049146671 0.94228761747509959257 1.3009067191212957404 -15.15499881222458356 -4.2617831691779404224 1.5461374818056987657 -9.9264399676847432374 -12.927259274226942765 2.0429696248362776423;-3.5266857882025988147 0.72314974363892825515 -7.0851893465436184272 -3.7809531615281333217 -1.7999189782324906961 -1.8287783571409803596 -0.79258339580999737084 -0.16941291196747412795 1.2397499110345107098 1.6393468285177297261 -2.104843542682284685 1.4007281811308684993 2.0022448754692852013 3.0082710884664058959 3.0262563488438272152 -1.2414773403513019723 -2.8765441809291787401 0.3991477035684409258 -1.242506907699120422 -3.7610403852167357819 -0.56233208118157673727 -1.3869637559380199043 -2.3840772349319072632 -3.0184041489808612901 -0.58334776247336384003];

% Layer 3
b3 = 0.0096331257014356658219;
LW3_2 = [-0.69826271551426966067 0.43751256403567090336 0.29602536299114212692 0.38551768283674719973 -0.66373787754518920323 -1.5318201176883634584 -2.015515873031877625 0.68121704370526559025 0.23499695706706336118 0.14161291348044244276 0.44779083803386071638 -0.74119587834960798389 0.53193420281654280046 -0.066188572562552852596 -0.91810045845645926743];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
