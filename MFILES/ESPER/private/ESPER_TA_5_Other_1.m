function [Y,Xf,Af] = ESPER_TA_5_Other_1(X,~,~)
%ESPER_TA_5_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:01.
% 
% [Y] = ESPER_TA_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.52511139791139105348;-6.2851321790061067674;3.1948620557609750392;-0.4754555730924877599;-11.276215867987636088;-0.71313333376953491616;3.4836567221018062135;-0.61131995394123683774;-8.0728623979375857544;0.52783735632998518561;3.1898131388155492871;-3.0558948411717756777;-2.1001813372713984407;0.60406696698321371564;1.3918288226784323314;-2.1297869665500726022;-5.3474577493505925929;2.6276831540158740452;4.0928082379777057653;-8.6275017847522246228;0.20442858535349808791;0.96092526914274578598;0.021446062623135225822;-3.5949294155449198485;-0.79960726309302754267;-0.64936205824453208102;0.041751419863248241671;-1.4492450661310936066;0.32873683540582571139;-4.4787963356525253289;1.008951857860136414;0.58642760500146828839;-2.7529535259286133098;1.4744968848851269794;-5.400518963045476184;-5.4063662252356019522;3.508897564140251113;-0.076853549079981917092;-4.6891754723188228127;-8.1427457140354650988];
IW1_1 = [-0.67568226101907824521 0.67402235738530391629 0.23562397669146903367 0.55208370756492786136 -1.774118073821864261 -0.71296583335716035013 -0.50727999649315624886 -0.080002747693997761091;2.3032196868350958141 3.0858171788536457036 2.1776794300283599526 4.5639254876245658465 -0.52375598052378824487 -0.54001088112455941648 5.8200198793082327242 7.4388636229758606788;-0.8245322723952992483 -0.18246705918376140976 0.034292752420083762177 -1.5944456027424609434 -7.0172889760111072377 1.732405168242264315 0.65632717432470177865 -0.36895261519182831478;0.55219329946329331893 0.91952665728325200245 -0.78594543970275099198 -1.3963716177893399362 -1.0422965316609429376 0.63397645424896831301 -0.15975716542580536972 -0.06991874943465983816;2.8343910742267510727 5.5148676376365601826 2.3011632314417487244 -2.0915750499003951113 6.7084298307211858159 1.2993040111385680824 -1.0563452941387734274 5.2373912595411127313;0.2304508436866147536 0.051502513434363988987 1.1672448963155643842 -0.55400145329373462477 -1.0260872871383786009 -0.21658962706612763793 0.32918927079938342661 0.1011160568156257572;9.2979777637007039459 -3.5056752489085019064 2.2051612319378532945 -1.9779555979543976818 -0.092447565715607610271 -3.4814621526898501536 -5.1878815531106354797 -1.4462452284107203404;0.60219203834468815195 -0.66280047969566913135 -0.36256785027598409377 -0.73116992783363699004 1.8699801018392945284 1.0116503209266227703 0.5384249783122327937 0.35389792739501424457;-1.0124901943545094873 -1.1202013029756721085 -0.44370076358648402604 1.5089387704828969294 11.154815761258996432 -8.6070736621416692458 0.69688656222544032026 -0.73454427131868071932;0.2061548713779531028 -0.30758700633313690309 0.023529588329798477309 0.62796886915957483843 -0.66887847784939968854 -1.8430258809459518776 -0.55819652403515118699 -1.8644729207957400074;0.29424445732888099281 0.0047322401807147525948 0.013715014151580093293 -0.52040893914430064182 -0.20358520759309467474 1.6496541386619480996 -0.50238296673826654537 -2.0144008949235554518;-0.33535358202772819203 0.025097127845751535102 -0.05959217744011480189 0.61184145083355157002 -0.78608272416515434511 -1.3974775138528112706 0.6826427792715163978 2.1499158574534975585;-0.32487524228912040281 0.65707301014586882992 0.84555171713083532303 -3.2321202598144012086 5.7716967354442818561 1.9178949225586663374 0.31486275045932138328 -1.6214241747115669678;-0.17396484664270706055 -0.071844104240402689721 -1.0175968553923770976 0.50252784937163352819 0.90248981288822938129 0.20346293761390005228 -0.27922509090057645587 -0.044734190833021575395;-4.8902926018282011356 -1.3487929725194514052 6.9325145528083291779 4.5914545724237560975 12.08316795316177128 -1.9531328033548858158 -2.4707106071290043658 -14.86831537271365633;-3.0464251975547456119 3.7882094330662852144 -2.5569247964058359202 1.8131916005684680648 -9.0768220811024793448 0.88504502099348270061 0.90242153485561238391 2.0421518043373234619;-0.099518812682428861582 0.65568945902075748133 0.31084364736513753202 -7.396493772213766249 0.054448014385714046948 0.46663383520941098537 -0.65124575262637718343 -0.74279914189003648506;-1.8685374474062259598 0.53840625148408838285 1.8260486853264810136 -0.86477242856952485361 -3.4931893668461824198 4.8836934408497647553 1.4461437530410607977 -1.3510213684767364839;1.5663192720688607906 -1.3441996107051570331 -6.4516172296453682122 -2.2959031107708010033 -1.9712625649910835435 -0.057359772508283612957 4.527700176462562176 1.3444520543593749817;-1.0467056253647366582 0.27336844758426936952 2.1354077146624512729 -1.6739120444868158533 8.3503802038460879231 -5.4302607704715279979 -1.0073971972491893023 0.93539451226552872143;-0.16887035090496352319 -0.19990409988565160937 0.083507118518773709726 -0.66000127426070753778 1.9435163644989219556 2.2026044807518907476 1.4443289817059703495 2.2737573072415888653;-0.068262979740966414632 -0.11597943943100032238 -3.8095547174126789258 1.2780445174223078464 -0.34311915261017905676 2.0540655914068697285 0.99067935360602565886 -2.2295390580064111674;7.4270996730774321293 1.0032672950014627222 -1.2823283447994531237 -0.13328704781698225146 3.6685550497343806242 0.23060487570714269245 -1.4204844068002608903 0.85433701534100103814;0.64079884874578108001 -1.5614958866136225968 4.9748698618648452552 -4.6507387668299742245 -3.2090035540563648375 4.3565581587849315781 -0.45417772870069289537 -2.3346367680150228452;0.6614939067780450932 2.0193183417414735104 -1.7203778970060654707 -0.29659583289105345694 0.2184728978764298446 -1.0638201588666942321 -0.91093943692452417071 -1.0240603097613629746;7.0058796764258035594 -1.5280823074132865447 1.5467138844487395843 -5.6454836045689216206 5.0356242736773264568 -4.9020270760160009615 7.801943391864641697 -0.093551201105077252951;0.11144589591127980477 0.097947459209239098876 -0.54815349888954623125 -0.96054837475756349452 -2.8000231242116244701 -2.2301885737532538556 -1.1812730533691491175 -2.4577337858867074338;1.779712117423718043 1.4264975446219603228 0.46014455084591454614 -0.48873860883830050339 -6.5090687584886328665 -5.0685407454979092279 -2.3054065376561072576 0.9439385135187327025;0.26191216014611423679 1.7929957992597640448 0.88602697097126315029 -1.249384336083953162 0.89619505838035584677 -0.71464192749090404977 0.61268492015785092075 0.46529375883627127619;-2.3795485563692566622 5.8330565100376707832 7.3676323267331387257 1.1945172684971976373 5.8017710080125910466 6.8088950986465928139 -1.2961110680351208835 -0.9279010012660634521;-0.21045078097792713212 -0.0044972471119529454017 1.0006510726637178887 -0.53341112876338780957 2.8812323547872153995 2.1973706597033344501 -0.074493630572932054146 -1.0811535389614097546;1.4764981564373242939 -2.552349659953059291 -0.35763714513842997933 -0.84165883444798750279 0.067533205230383863693 -1.2501435082345657701 1.5029303956748281124 -4.0076968520593467815;-1.7883773214278866348 -0.91806552177840572426 1.5254006791865650783 -3.4843326393116900164 0.92432514333081206015 2.218659301784454474 5.9432121408892131242 -0.48069421541451490265;-4.2581197987876135969 -3.3400416199485269964 -0.59035578040386726961 -0.36307767915292632477 -1.2965874356649367272 0.12018970669912165672 1.0906326644708990159 -2.9294342489545646124;-1.0263288956852194556 -0.52109167063959915822 -3.2854258777927198842 -2.1366159307381273891 -2.5295839520615350793 0.14469719514264739457 2.6739214699800801789 2.6944046638524814519;5.5910176288662452038 -0.28153238647203765455 4.1647212768465839972 -6.4040458326473865824 1.2756007040766164096 0.99404320270744139787 -3.0462315851977272985 3.0261337046039407106;1.146398188732854706 -2.8817147945342131976 1.3200886589811404725 -0.42247061219210829686 4.3780351519465048327 5.6259951375944021734 5.3053854521300394254 0.76322287784707254499;0.024128040841113071457 -0.11473705254769860085 -0.10251388632083273389 0.316736372956407497 -0.51095590391841272382 0.098929595339009898658 0.047816906914318474398 0.12497290473363412144;-2.116242018409201453 0.92560700097334491776 -1.1860278291179551236 0.31724901898418500501 0.43347739555765812947 -5.6148869772119889276 -4.5421157637894831183 -0.1963075722072784024;-4.7795763691212238555 -3.0295545250817723648 7.7059768369560925905 -0.50499696823697626247 4.776758412595836667 1.4655890081077838083 -2.006442677901562277 -0.33017277090630003933];

% Layer 2
b2 = -0.16835054116435113625;
LW2_1 = [-0.45232153397126978467 0.0094569247949951220494 -0.062512672906475136303 -0.068419852367910802271 -0.05724185066418203266 1.8763830105817971283 -0.0099220813177363243601 -0.41702217126075863396 0.029248787755779635106 0.19539005313444812728 -2.3630105665549123728 -1.9405306493682781266 0.082400696372187359762 2.2473271663506753093 -0.0053489567559309482425 -0.021782216947821793351 -0.043561293372808042312 0.034343416133087757702 -0.02021316488758103172 -0.10492555937822849177 0.12845193904985055533 -0.050120578337264812263 0.035000661565959573229 -0.017586396952603076949 0.05640160338274833457 -0.003651253702898885501 -0.14883395141434108133 0.025403003111108542894 -0.070827712202356535309 0.0095422238442386259072 -0.16920598640097178622 -0.033634025757333561868 0.019263799331022159189 0.024442281496601495766 -0.036885832449670960531 0.011478582915814238008 0.013760357098206357079 -1.5230971010857194958 -0.032001875787561383235 0.014203563222839929447];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
