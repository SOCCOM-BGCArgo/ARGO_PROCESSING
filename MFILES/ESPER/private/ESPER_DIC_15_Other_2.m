function [Y,Xf,Af] = ESPER_DIC_15_Other_2(X,~,~)
%ESPER_DIC_15_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_15_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.5831611564267964454;3.7116034946473481781;0.54074911190183760912;-3.6011092137209024244;0.41958038761757221469;-1.2580365698927828966;-3.0676038515984895838;-8.7561853963777895871;3.0959158402211106598;-0.15435646896719806831;1.499702894159099742;0.88034901617593153134;-0.78134893542596461913;4.6926582272176595723;-1.5295325109063275804;4.1887712117083077956;-1.4405325599336253894;-1.6959148524302434247;-10.889163640490512108;-2.5806209189626576617];
IW1_1 = [-0.16766529448720401962 -0.81428592025395996057 2.4237198304306684093 0.3074001667013568917 1.0422800464386685615 -3.3421253672334865215;-0.68359517352497078946 0.32769298582284400734 -1.458482775189692271 1.4261959206150522927 -3.2262619756933217374 0.83795988522254161168;-0.10295971166508109673 0.25554499916848549823 -0.15739572576057231368 0.41384147288592387781 1.0536961915953970692 -0.12576081697679053484;1.1328613285720317005 -0.49597602250352057496 -1.4980991163204369077 -0.89747541567200572743 0.30036936889491866465 -0.74858914803489862155;-0.17781883544238130668 -0.063094451190511616212 0.55832277583985778779 -0.59551843620048905414 -2.3645117275631850617 -0.4217752113954779114;-0.063471396576820868218 -1.4324601590222640901 -0.3376807971100084238 -0.25389579009828328049 -4.0932980222796917502 0.57977714465212892847;-0.04114242905003921702 0.018183127248205848553 -0.35270165760606425609 -1.9741910880484723201 0.9357545630192770636 -0.54646846885815003603;0.84296550478876197676 0.17933519064140093779 -12.112453634356132426 -1.1898499738211607557 -2.240471104706249772 1.1400764230895892304;-0.030984696353771892796 0.12655922316179496478 0.30728514240641663369 2.936785154361995609 -0.4035359407505176299 1.1272041141842312761;-0.18523620276353477965 -0.096833972219843147955 0.62971561224830396863 -0.43781207936432159356 -1.8065223059841588604 0.15917072229670242711;1.3889834315527269659 0.4606971077158042438 -0.15637436884775307577 1.2562066003659961844 2.9602793883415041698 0.26186591706478123953;-0.057368230729569910653 0.25319645063202605995 -2.5832500335443175921 2.1832134844173087806 -0.28600701659533078747 0.24016672297365110333;0.44798853811688399418 -0.2715414796198387104 -0.078415140422682036436 -0.28507379057543708045 2.7720160302072573977 -0.53022356273973447749;-0.99549627687161967859 -1.0477526508848122866 -2.2055160231934389792 2.4013599730014596467 1.6766767928193480053 0.15644895941197053957;-1.0712884729128446804 -0.44484364410370191845 0.24630795272786801253 -1.0083929895958383405 -1.9982442225502594635 0.14502761925826654354;0.99192684970443534276 0.29001054228773931465 0.61068065161373574767 2.3772319376232746713 -2.047030540267767762 0.86060499350427155374;-0.82684875066697838264 -0.47937954839940455365 0.47794414178048427733 -0.60412799817414930548 -1.086490159241878084 0.40592707450328241459;0.29970667599310973905 -0.15148216953403872975 1.264322584820311457 0.12260351437573073496 -0.7067889485740291855 -0.86804514389011599995;-2.1114922224990095856 -6.9623744484799443555 1.9680247732040552222 -3.538374537149202137 1.8406416123811830676 -1.2965927557602279219;0.35910899014943059582 -0.090108972485569843736 2.0904230449992757812 -1.0391552238225612026 2.3098949219175493042 -0.98933364317166949675];

% Layer 2
b2 = [2.6589779052880104793;1.2732034399818721315;-1.6539655168869267232;-13.727071957693581794;4.2345603592910636692;1.0620201774619113522;-4.7760373853436846048;1.8387091604133112277;-0.77139503378040119586;-0.13643365880842561744;1.6669033983845085167;3.5329255455295971444;1.560299566849973063;-2.5766401066641893003;0.67129980181393011929;-2.5707736108328860247;-7.2991248258642205116;-5.1118020837743838314;-0.312869442534804032;-15.325156330774063917];
LW2_1 = [0.31680000243211925426 -7.8354242451199533903 4.0266990408187428585 3.1256276358949492966 0.62585988720244922767 -0.38617188385793477234 -7.4745581466430337514 -0.042001340372082307528 -2.7813101549903112009 -1.1931560679714452444 -0.69249908197721354863 0.75655504903224690683 1.3312891752061055683 0.8612785425223524749 -2.517798316596919328 1.8751631436749449655 5.7467805717023274781 3.4767121449178786108 0.65880675516230269295 -4.2459814259192780739;0.11671739782241699612 -0.95824418328877158935 -1.7651585214349967412 -0.94499478198997977074 -0.5242424609194219487 -0.31648277449730410904 1.9143616120516184775 0.3018562332955016525 0.92104800966018229857 -0.78805177402748338711 -2.2095246820245346697 -0.20609146260615260338 -0.24075834206287183292 0.33400916779165085169 -3.4128219593895243733 -0.30212094042519604953 1.6821319258386608908 0.27564286410936944538 0.54839033335482023634 -1.3064806909248045663;-0.76359642393570570373 -9.1907683326129223644 0.89066630510647626373 -1.447900608780635423 -2.2937830211548999593 1.5059563577423311642 -4.5311520859213976209 -0.2950355429126251261 -1.6714890610885044797 1.0053185233087764683 2.6775133568508904247 -0.36646124536200536115 2.4489164921634158922 -0.10518963125339883535 5.8520380305551835676 -0.29813563994134306689 -2.2738938050318506789 -8.0050131614232569177 -2.0660197096978434317 -1.4874977163508582567;0.68400901901414901118 2.77055880018339451 -8.4170757293190803239 -1.744002025469750583 -2.5843359844350333177 -1.4999202855414426327 -5.1571390918179007556 0.17634654768766544475 -5.826391114231810775 -11.474829502249461299 -2.5542976065589413359 -5.015728923390978089 -7.4367759645918507516 -1.270641520006288161 -4.0951786130095060301 1.0796441015001601027 3.1405523539057864646 -5.3850061814410175032 -1.4111898464992096436 2.1481828261507267541;-0.41773100259820977742 5.0420713225895363863 2.6742313456515169889 1.4363546612095479116 -1.3527546211403072007 1.1219235478471152323 2.3789625040436304104 -0.62256010228404690121 -0.4224877747747803336 4.7681742786172804927 -4.6779827374989375599 1.6087511373908605083 1.2113395685436592064 -1.8352940319634867272 -8.5363191938273921267 1.2026039815854288051 4.3091396416378016099 -1.7754397008940523417 0.03125623869040299041 4.7959256270642995901;-0.098937805104736459283 0.41195367327382859113 -0.85718317218867101648 0.41390488908097422538 1.7449787956913469511 0.41573228476787671415 4.8978839277189969437 0.16124258812304434474 -0.043689675531677525655 -2.723817969026338659 -1.3004160877635579929 -0.14785983956737905332 0.12809084862945804839 0.3738905807583245422 -2.4174479068097887158 1.6083727104204375014 1.3258081945944693025 -2.2381005041009292 -0.53846611485231510308 -0.34148014200710113952;-0.50925604231452903381 -4.8787925067013535596 1.5045395217105757002 -1.0114821825299957769 3.5284529573661083113 0.081333318547704092083 -0.78137454001407147253 -0.33911264191004830693 0.56572837185531399395 -5.276334650351463651 1.0203780235583010949 -0.078916305041375853224 0.6567302312401021025 0.95750109675740457948 0.46075071785033444582 -0.46912734274956002789 2.4837634568562596549 -1.1170466659630380324 -0.65796970362040618774 -3.9146299457443562986;0.30925202484722891239 -2.364090965504253905 3.2983572912717664671 -5.040475632163288644 1.1924485206653276936 -0.51913475026657318612 -4.2934577947368364192 -0.83205930875906763955 -1.0386241962187363619 1.51461723806905324 2.9167251457208576149 -0.22740804368573311334 2.0737227069052646122 -12.118825685814767823 0.58146709250981076789 1.1272777957174615615 5.6662587065663396757 -11.718404182292434967 2.6695029577687323652 4.0453753960797520506;-0.038195647063532629784 0.070261673022873491479 0.0062527867294029145645 2.3734329728547107763 -0.23919469015425542935 0.30887773469012652638 -1.6947397217986142071 0.10141663922267447895 -0.40239200054041740495 2.7458042337643444597 -3.7416565158896131216 0.84689297172816813131 1.5956436676875767056 2.0099549506404659205 -7.6526340125465592834 0.30062357018126079078 3.9941396975718324036 0.53711101187144305591 -2.2737570230989470055 1.4452605035648500298;-1.7394204182522066127 4.2828633152716077959 -9.7280272574157802268 -6.0928428572641495364 5.1364954872515484752 -7.9855079480967647854 2.3749789466538255844 -1.0128690024397646319 -0.5070422522104566232 -8.2158042556197141693 5.0956517386030677486 1.8833363928926754038 1.1914083415166794033 -16.426146095215752752 -7.0359522164087087148 2.1907828003430234176 16.280785343406581234 4.0952093723020244198 -5.7004136212084040025 -1.5937776152567117993;0.13572653540749640699 13.967032699768385129 7.4279874321925616343 3.4774068359432135367 -0.50430136141278159023 4.2044927473785724814 1.9612587235161684784 1.7694938192678102418 0.79052036463685881884 0.41524100564103239019 -7.5489468383657998274 -0.36737237375608960965 -0.33471721275683169461 -6.572161302664779825 -13.997967662286981749 -3.0886178511397881508 10.032612658879752843 -6.0782051920714064153 -2.0098605131706221982 5.4145966231408966252;-0.036823230752733748794 -1.1874512776998713548 1.4194320720903232935 -0.49573638921827584136 -0.34331529715175973516 0.081516658437180172792 2.265377266712522708 -0.27557903325755278567 1.0897798297560732372 1.1258959982774290332 -0.47124157010171791038 -0.21135582878640699067 0.54909545982714846879 -0.46962609157447327002 1.1543580091904575013 -0.31265670305793658024 -1.4150982073716076304 2.7285470393427120328 0.96166589382799838592 -1.6311824251510704809;-0.75395857824407219727 -1.307196003192914624 -0.89138984721706504555 -2.797280249557345666 1.6897153161443509983 -0.77920731957888200725 3.8780339876982292679 -0.72229493145711098911 1.8644571652503239001 2.2175082119839335526 2.7901781962543052984 1.0509720681584058255 2.48398008850950891 0.96071915171847510617 7.6610744583498533444 -0.086687819410311450774 -5.6712230813005310992 1.0398518374865430847 0.65739411047985640835 1.2042578573525279939;0.41982491642067687465 -3.6801977769168980892 -15.302143005148908017 -3.8266088650439615826 3.1199475207911300245 -5.6963622266740516764 -5.6381032906425243567 4.4416843025170003045 -3.7668443676885847715 -3.1926632848642659823 9.4493106763620744459 2.1095239357314761186 -4.0782332187696050951 -4.1735645868477817544 3.428028008506385671 -1.5638682282087452702 1.8272959995960003088 13.606507875401472774 -7.6293667738669421752 -13.606501645734409678;0.047122900705802883703 -6.5892910363151617759 -3.8385779294502193615 -8.1711112038562436766 -1.0647720468677679406 -1.7456442827983600363 8.1373511651719319104 -0.37567096319784087921 1.0613317458959272699 -1.1286952984340623551 -2.7579041759598355021 0.62435888826119412265 -0.52959469699839933909 3.2484012806713749022 -3.1761994285099510726 -0.022047008990751112978 -1.9260102582269278404 7.7680438813763776906 -0.8363037360207774551 -5.6720849440672624908;0.063323837341160968406 -1.7783531871306528238 1.1433540663706833751 1.2956733284755119762 -0.40173302284851364341 0.80822613573059820524 0.26559584862242008318 0.51979834944371283711 -0.34661813284142450886 -0.85450607087622942881 -0.88442805511827626841 -0.15307462449381017966 -0.37634657167343577022 -1.046953723016060156 -0.76461947698575671861 0.56792938391901792716 -0.38049719125527475816 -3.2189435822666578879 -0.43865153378945631601 -2.5037263365238637824;-0.15145322979141892517 -2.7964566022756001118 1.5792416134470401712 0.64047113506353270385 0.68095054315685688007 0.33237958145867574355 -2.9202303960242104175 -0.030008757172927870427 -1.3561313343148462263 -0.44028983238569185943 2.4411863405007578898 0.20076857646270498958 0.43479653112243171753 -1.040866792746708569 3.6031381400393875936 0.87213995030399060759 -1.4233567803671658414 -5.0422016294597371555 -1.1664119696798314063 -1.8495780683349103413;0.26336693868929789142 -3.3392526242445730311 -0.90358987780246935451 -1.4661257104853919753 -0.23686826567151703093 -0.59914393280946220965 -3.7889882773187495424 0.55492219749814442054 -0.90321724682720716526 -1.281350600665620787 2.6061031012089510561 -0.71071330051713477172 -0.55677077768392180257 0.54155937387027208718 4.1655318180550588991 -0.02286126119454137684 -1.5433548314471479124 0.9302505880897276036 -0.72957772115793995127 -3.0998292662476658599;-0.10130715583618840614 0.29697445347406992155 -4.5579966553190942591 -2.2830011091562352199 1.9228454656351898766 -1.146187253577729992 2.2840023130230253656 -0.2025282959140941863 1.3919870016022140025 -3.2319145728117413263 2.5946222545681520977 -0.21631262676480325635 0.1241806296160223172 0.90523058971142245088 5.7098880887739218437 -0.28970663493265730315 -2.8941755066739003333 -0.58826582829935580854 1.2158573470820428497 1.5527647955844949834;-0.07367977875505121732 0.40529952492688342547 -11.773700295737508981 -8.2483091412847286961 -4.1263509329566394612 -2.3103597184589341751 15.599552423741736007 2.2963970087462515224 3.4761405242165333007 3.91084415980173139 -4.8686557980319946637 1.9456874536397410491 0.23555105507436568946 11.433917780435763234 -2.9510799472581532576 0.92732313463757587435 -5.3644662011229149456 -12.209209117690393853 -3.7615999898138117175 4.1663972307120911154];

% Layer 3
b3 = -0.48341802869452610292;
LW3_2 = [-0.10060063991725852472 1.033598856029055213 0.087621643843235813565 -0.31123422126457794823 -0.38236699259879836088 -0.69129565005881954409 -0.28815734309651974687 -0.1055037027204947242 -0.28789201440203360249 -0.049162615115122897114 0.061328691042456917604 -0.97461032975054484595 0.36041143556118798719 -0.016207118249143299266 -0.11076246102712104802 -0.71138407657716151711 0.9347964173799943044 -0.84220718875572853079 -0.54546876829327051173 0.060135051534754555003];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
