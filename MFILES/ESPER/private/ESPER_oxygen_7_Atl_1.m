function [Y,Xf,Af] = ESPER_oxygen_7_Atl_1(X,~,~)
%ESPER_OXYGEN_7_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_7_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0067060729684924603;-2.514160999175657718;4.571601078915687566;2.6589253961338590315;7.1119080841296238304;3.7918750874227655778;-3.3332538727398595135;16.980818495911357502;4.6663274642945324899;2.1176981320233170258;-7.0812334320824357192;-1.8997921322263304766;0.15794296532292306789;2.3227815298535747779;7.3232934115901082706;-1.9236365947246223396;-1.5870140541407429247;1.3720237337525549304;0.90008792801329595701;-1.3175278100820975169;3.0833710486540368834;-7.3468794641964274561;2.2799170571933320417;6.4714348907320173865;-0.11892973185287968041;0.81101996073901139184;-3.4480094642368293023;1.8869583495545640961;4.3749200176201803458;-1.7018064428465768945;2.3770350175974521711;-4.374981777010065187;-3.3875743928990904585;-7.5208773163503339632;2.2161016201024454908;-5.7230965522623069575;3.7039580087697983046;0.33672229435803519015;-2.7054842776409304683;0.17424634926521948008];
IW1_1 = [1.1190986183142526134 -0.16766431688694524715 0.16189331585930033519 1.9954336550606246448 1.9135914701560452489 0.069775444912442266543 1.6448989709114667512;1.5769021045865112551 -0.38679344071426929874 -0.08675072033544124761 -0.22541364854811041241 0.57761252066933721494 -1.6448542618545183291 -1.4519553710851904604;-0.57717439797483383046 -3.6375168268091426782 1.5656698097708070527 -0.71958513052377848229 -0.61288078436073512023 0.35384432351121902771 1.5512282998733712969;-1.0446625029912846028 1.0178011521751255675 0.94298357061626902897 0.80670491510348651953 -2.5309445912398338407 -0.65837605617220973375 -0.65341418075240265129;-1.3671925934261524027 -0.067545066460869232494 0.14422755846123974655 -0.34279658441920746181 -4.1030880810844791995 -2.188883006718406854 2.4960520605770817326;-6.3868888388141220602 2.8891258532303982776 0.37133803920393065878 -3.330705831348799606 1.7114053001352660388 2.534164085738960015 0.37142123909729901632;3.6389772081537294923 -2.1164624197132972938 0.91786428898539429433 0.19503735816186909546 0.35269708096800872488 0.91554878533981254307 0.85248672566254546368;-0.0062180628224561490872 0.62176381565857152811 -0.22989199861006415215 12.952647311369894112 -1.6419791076299410371 0.76410195445644701895 1.5502937263672120771;-1.8462552138019725501 -1.4616748795536809169 -2.5749890913153112848 -0.20302709259663478947 -0.64084711847952768871 0.84581163333093467571 1.505912313090924215;-0.53996455751087724106 -0.87219798804438131157 1.5062162105938539103 0.54350795475599777973 2.611867598834837878 4.6369868376969254342 5.1041201933344373387;0.29518471891691644426 -0.025628660964221710444 0.96648025554951944027 0.7044498558940044397 11.639958140958432509 0.93970519410270836325 -0.92476802015371450949;2.1425446127788196904 -2.9480521805691144444 -0.039773851823279061934 -0.035959621358531437818 -5.7619906958621252002 -2.0971612558949295213 0.48745276152929295499;0.30688976326686634444 -0.61873426790609931114 -1.226366962154266993 0.40853201228445557014 -0.7967156982052366887 0.95735847069087220973 -0.4778539943859946848;0.24203230475754955453 -7.9074889866548501161 9.8137354333441066956 -0.92789941094527372822 -10.43524427390433118 8.2549469830651069913 -0.061035415406797577376;-0.066638022887468409405 0.014465943610436014441 -1.1258190087344563945 0.58344825705246461389 -11.749377073208416178 -1.1414886246340156806 -0.24628528649530415096;5.3208287633484436796 -3.3996184810659073605 1.7291671677080597824 0.096921067919839565263 -1.0730712969551274849 1.380924525534275471 0.10416454886538706326;-0.92039567090838303454 2.02959457307019564 4.3783392871568729277 -3.4750810934163389732 -0.43738641100784764193 4.1955765492350911572 -4.498554799735240195;-0.58024438367972130948 0.4738837721571603212 -0.29626666357813435937 0.84557688402075803502 0.75165006049328819682 0.37255432193761012227 0.60009494418633591017;0.43151509082533917594 -0.72671154268976179136 0.28799359017163678187 -0.78415016156638794875 -3.322252525727011907 -0.33046459846674608452 -1.1350095145603349422;-1.0354121942906417964 2.4337043533748929924 -0.35574275676032807159 -0.76985384265903478163 3.5299584737591680472 1.3488434487780991411 0.3139057573698089687;1.1803659882234003309 -0.40624595537883745333 0.068177385698055620322 3.213059568942144395 4.1647054870135891136 -1.6261234696687338896 3.7170197650792800026;1.3907714257539456337 0.2411076920513385291 -0.95354977836449328343 1.3914316856667745537 4.7298261576954532259 -6.2520548284258588012 -8.2883061142904796981;-0.66551319732495806125 -0.089303225991979137688 2.6623495332861377705 0.65312187715989056258 1.5536360549593779545 -1.7625377554075583042 -0.021001956441151315574;-1.6366088337414879117 1.9604233061947637928 -1.4450062696628420689 0.14719577787936441449 -6.1620200918724288286 2.2242218664808519613 -0.1999527940810369997;0.13965184155810411726 -0.45699809785476458446 -1.0629718760771527108 0.32089969569818405093 -0.18182832432279238954 0.75587981874567367058 -0.37668348048023148067;5.2050483110792127306 0.61606239062632828229 -1.8038578379669965024 2.8291536226307836266 -6.7359945323943160034 -2.4053080410333276262 -1.5944548324655167804;-0.76355548767902670093 0.10920783436330798455 0.33091251248774056215 1.7019343855572308666 4.1661076672842698443 -1.8907455742778143115 2.3076249439215601456;-2.080386433429982862 1.3259820005199345339 -2.0942587060920461184 0.15892178352649496964 3.3204178264478994009 2.9554360561800385732 3.1488997529816873389;3.335059856367033948 1.2129227498694910015 -5.7045361729399850503 0.60938637790879113254 3.1693400636927182568 2.7268890894558910354 -0.22331388692318546174;-5.72450800204017618 3.5990008320101036787 -7.8588894476664341582 -0.84115034405232669279 1.7928006285921118668 -4.0834944129671839619 1.9838455513982578005;0.36558631699543686633 0.70840516021379773548 0.16143464929060916124 -3.7542819353535969995 -6.946165705496190057 -3.6923479072034299797 -2.4732242607141392554;-3.8957378034018499413 4.8985484186776462323 -0.61921098176478972519 0.51280458274465934299 4.2778301880807569901 -12.517621658230632775 -0.055761188912147256758;-1.4863752794529538903 0.26687018276865198674 -0.34996463856732384912 -2.4284474152152011328 -2.0928601101471016044 -0.23582081698693077576 -1.503600174515790977;0.98716985960145775536 -1.2326202651216837669 2.2824373987846646727 -1.9932245234057819339 3.822020053995216049 -0.090807510107793018572 -1.4504490799501967846;1.4690982452550320758 -1.9514260709156052709 4.2341287380710550536 1.7680631790474259368 0.72403518606449923656 -4.1596511333759798035 -1.9777862962997072582;-2.2487203337751591192 2.301711406629719292 2.54874025590696629 1.0711808233998754147 9.1352465564402063336 -3.5078611523699216868 -2.8143219766563207784;1.5255788982946090204 -0.44067732435301004701 0.2215672549270495395 -1.1060545871472362567 -5.6851129567746818694 0.30703934886277256533 -0.19208670174267380992;-0.98536843236675697444 1.4195371040273470076 3.0909225255800132359 -0.68596521927897868842 0.99191640638547073916 2.1853283283171189844 2.0343408858414449014;-1.5788565918968202606 1.181904475160693968 -2.3826874072960930739 -0.49954523809917716903 3.2634186686170507663 -1.5488560135394775497 1.045790490542396256;0.3065393247897806317 -2.7350778414901575353 2.7169304228174695481 0.73420450238292567224 -4.690006094551688598 8.0145184509581248733 2.5794132100633078153];

% Layer 2
b2 = -0.49166297802144498519;
LW2_1 = [-1.8596011669834897617 0.25776638872912516209 0.99150937407178552085 -0.4241513506332622585 -0.21727016788985351048 0.038478681433317424299 -0.13029148727074835179 -0.33605566554160781756 -0.14345675336878593864 0.05083256723016834483 0.22172329475701274548 0.16730910483920266585 2.9814428527348693088 -0.010703992229088236943 0.2472383656182643441 -0.048253858154983654549 0.043189363710223353798 0.91445908327828451245 0.52994534801761306042 -0.16771681744224251065 0.1213045268797177112 0.032219056739246548782 -0.29469589910552118628 0.10829145195815827185 -4.0616994698738952962 -0.024499439592684378597 -0.1286383699794610147 0.070180725047483960566 0.114269930087997032 -0.033620779237450396093 -0.065829500306438748503 0.022798061574229370324 -1.4470508083774713537 0.1196119619817770513 0.10179826548022054278 0.083295407683510819252 -0.28722496971471395133 -0.14596277530244980425 0.12837248180827445787 0.059808244882523578512];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
