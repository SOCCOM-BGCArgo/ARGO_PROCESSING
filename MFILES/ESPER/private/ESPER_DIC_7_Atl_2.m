function [Y,Xf,Af] = ESPER_DIC_7_Atl_2(X,~,~)
%ESPER_DIC_7_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1428944269945335854;-1.501279725448302127;-1.4658471688842049652;0.29669513321926110905;0.56148436411063584739;-0.44538801103547709381;-2.6433222197213352977;1.1443912579212296432;-0.94118545509960249706;-1.6978555097078511515;-1.6349981530831403376;-0.46806147437578460302;-0.79590865310508995822;0.49818964853201952447;-2.105123073770557518;1.1206279886708740978;-1.2876207318626460285;-2.9173834758790246902;0.096648154525600896148;2.966490489030833011];
IW1_1 = [1.1848264366912828471 -0.97317084236118589491 0.91877210803675524176 0.90776103596792323547 -0.63664814572222572231 -0.12807964935665400175 -1.3514909592928858739;-0.13862719531219014346 -0.74808397131926007706 -0.53054219608583386147 -0.45508827901899678858 0.11756929862085366278 -0.81406649768251915233 -0.32610731295123179807;1.6440753804569945284 -1.2951878525284430399 1.1615041929218246075 -0.0231638507980023306 -2.6769207817267965943 -1.2923378911036051964 -0.34162552842656324081;-0.4726985522763579306 0.99823286932725341369 -1.706963573585297933 0.055816643967310244911 2.0500681275851611041 -0.63905166714123762262 0.54215986948479033547;0.78073579451056640544 -1.2851530845532284086 -0.35657943965845156908 -0.086269911161227300078 -1.9279483428831929448 0.30819246442285641585 -0.58334974190359645263;-0.91609366707383277362 0.49614528642022659444 0.54804546940675658018 -0.35261072833820261696 1.2277309607669075753 -0.00033712659473807485289 -0.79525012973309827657;0.1933966664825195747 3.1000822628721342866 1.5032885730035896454 -0.72412750635891076634 0.48887085010832842524 -0.014879853406491411888 0.29716068743404666641;-1.8203843383175664083 -0.25481869897021980353 -0.75047921005151330132 0.16552547713501120086 -0.56244438198943913498 -0.72815673216858667338 0.29495478512089767786;-0.85742675595422812584 0.24089425692244068045 0.45926692875426783358 -0.14186749044894644833 1.8817189903828053232 -0.73481096125045564094 0.20663269883546273031;0.096917453632523076212 -0.85508345079981062931 -1.4340705740295245363 0.084363075831250036729 3.0109363793327745817 -0.33443561190489395907 -0.0051322158762324909462;0.88670081116298982149 -0.60888061369961210545 -0.74122119228558425164 0.16021465165517062568 2.2902317984589757316 -0.34603375222636217901 0.35293395265873284128;-0.85269796710934198103 0.076462904368368278529 0.26444235443915170558 -0.37763045598616939991 0.46874954769596077764 -0.69152490853148818051 -0.59877319325954037055;-0.84366890349302015029 -1.1507043101122924611 -0.37591537507629774195 -0.2554903837179468562 -0.60835920542645482989 -0.027203872404190868745 -0.18787184527297248748;-0.23469758161670792318 -0.62547682325333575637 -0.48258993757869600438 -0.21668639873112660599 -2.3839045951684041391 -0.23385981214675061191 0.53094619233954998272;-0.86359834680331337697 -0.34293635195153243655 -0.90205649288009837061 -1.0041818778253590594 -0.30106510505954292567 0.5821297895788531962 -1.2321307187020011931;-0.4194896017455238546 0.05935375229603521291 -0.11437164479448327925 0.64925548801717214431 -0.068231161264504486264 0.0058532411367995954357 1.0856832572848662544;-1.2580515831663623416 0.78417037848944637357 0.8893955271761692094 -0.54062497843151968713 -1.0837202515416997084 -1.5553611429547768985 -1.2363433043367928477;-1.5088662992173837996 1.4424150891066278568 -2.103638913129012078 -1.4828486413626336127 -0.56916068332585567635 -2.1131798880760865877 0.081057085996058042543;0.59373665734930158866 -0.64883185653629849021 0.2600863855948504777 0.043966747401658692884 -0.25570231433688833667 -1.3645917659371231689 -0.35000210109962909266;-1.6457926825074811195 -1.3736819679534229 0.12183040326016880694 0.61306773875483944192 -0.97007779941330085638 -0.094283429211854605234 0.16968415770569533763];

% Layer 2
b2 = [-2.0968867698907760477;-0.45034517865653628244;1.8291520524256510427;0.80037604733276868085;0.20314414446426018457;-1.844720064715603014;-1.6373289527063423776;1.9410134468278052999;-0.2529726308849361005;0.39445279026366808495;-0.41819269889320426214;1.5372926682915930563;-0.8336937067830442194;1.8033903648407469955;-0.82448574458814272159;-1.5243818727675544356;-1.6608434798611075855;-0.98629179974668901298;1.7111289988610765;-2.5362856908757707153];
LW2_1 = [0.65624428360162001539 0.56628552589473180046 0.27778097937483797741 -0.14423605377124837368 -0.31916131996925778402 -0.14736206489725955926 -0.571317551974934279 -0.44436239174964481391 0.26236366855796083852 1.5301210687980206782 -0.19587363295039411648 -0.23111243223187163953 -0.68475744148664541289 -0.024393823526324475565 1.0608825481128238977 0.44156042223555796999 -0.61823027063337032683 0.76706287075306023304 -0.22398476754649448983 -0.18292464643505043642;-0.034140223769232189155 0.53202851252777205726 -0.45651535855186131663 -1.3926899900490439244 -1.2903529113923224436 -0.0017589341918116258023 0.029820478615558573821 -0.36123424871066361908 0.78541682730056761041 0.71454499335409360494 2.1386976541587188194 0.089542172081123083682 -0.8775214956135259925 0.87282823863463188108 0.024796068263320411584 -0.052262682459371795352 1.7020749329086339863 -0.77997348089775309088 -0.41387833526959466601 0.87523660153834459408;-2.0659168599099961838 0.38705294954092023252 -0.45932263055409816577 1.0401486385195253259 0.23212613373953450147 0.86808503194889552468 0.094704432642166838652 -0.1628830481782301276 -0.64773711083397922383 0.58709202808929228379 -0.65365152635208034759 -0.63220860081103824601 0.86565946784101455158 -0.8226061397555708421 0.28043901613835503506 1.0378049626272878303 -0.86150558511469488288 -1.6855489022425058643 -0.93741465121649336645 -1.2399922242015002372;0.10878044446257024991 -0.71578731025507102981 2.1775709791079758126 0.25637961016810828507 -1.6009843803965058129 -1.5081157871698338546 1.0548876929995631979 -0.94626783136489411863 2.2630570370430400651 0.15072709658098842889 0.44313400746728620616 1.4047738573075516655 -0.058470697785805457458 -0.78961064642002676273 0.98835429565457122436 1.109735453701231167 0.20539678294300242611 -1.7398441906932731182 -0.9935585035347569427 -0.057640298627821953681;0.25061307140251076753 -1.7141633751947988884 -0.33659999879980340154 -0.68658675803335422749 1.9394384796432255769 -0.75264444984969558483 -0.12237504580391925235 1.1052752769271807498 2.0463479762242733351 2.1262523527170782423 -1.5451203497329606407 -0.49163399765387949536 -1.0398916363758463621 -0.81906213238531866416 0.32916325126047568661 1.0374385501722014347 0.0099264882068971771467 -0.46456580645374639937 1.2670704355574746724 -1.2586340227754091448;1.7286238074832813716 1.7302820062626202979 0.75865901824060377745 -0.10966299690142636281 -1.5970770567397631901 -1.8739152241702499158 -0.055063287503546338997 -0.86138039325144177827 -0.39050111527274666834 2.1279022934827227509 -1.0027074198808005878 -1.3734594290855959287 0.056064333331934765314 -0.32584091511480156589 -0.073817335849947901538 -0.61117034288576055356 -0.16566251171938781162 -0.015023493757243190638 -0.90176451354767617197 -1.2303064152685589949;1.1722280706411047912 -1.626075012707985934 0.39965251173744509305 0.077988600971805821516 0.0010509125161292593234 0.87891467494282260464 0.086293045386859917878 0.72651347004444333244 0.49634286479520578483 0.17815340566392293131 0.34775675209031214896 0.17706576912118748846 -1.4922605939056192703 -1.2573594145986990434 -0.18371107162794511614 -2.3873461066723447033 -0.44021831324204530045 0.053693106909884727451 0.4831390657993500648 -0.76697500733403800588;0.077551410276492288576 -0.69333708603902366452 -0.22125487319521733309 0.62052201250962346624 0.017923705809791336263 -0.23991129617031528576 0.045266162321873332219 0.35809742395709548424 -0.63870085214778793414 -0.69481357649594832626 -0.77574257253056988493 0.10022812493351003493 0.31227218062787465147 0.50281494878580967889 0.34937060909065947856 -0.27743540144808054304 0.1881637201622502753 0.22303826495588036094 -0.01092405894482297371 -0.16187260186864313449;1.0986554046777285976 0.57862090038480407106 1.6081074397826693456 -0.11828318143367165527 -2.6962123795521590885 -1.6241789910053110457 1.1903611179148083643 1.0292994057908904093 -0.27697051044301795875 1.3862003152528215022 1.7316977659593428829 0.32978025004977645773 0.093489678928736080765 0.27018793803277718624 0.26035523799284143731 0.77037346965124431364 0.42969498029132391359 1.3758489211665283491 0.49090309907448353988 0.92429544721760159565;-0.1069250613153423235 0.18231975184879137264 0.095687650979832242215 -1.6541720711550722545 0.190794089807235695 -0.67645018477829821357 0.5679650443188513087 -0.43182470812217765843 0.1620376593141512056 -0.50907039481506322076 2.7958272477475931694 -0.37693636630442134416 0.60303484527185491348 -1.1449203829509102537 0.79198242635641213916 -0.063121283705531897046 -0.77035732085553421111 -0.035032996069446639686 0.16930441876199556206 -0.84989120862800060507;-0.28215874373975680101 0.99193505819036531523 0.10068858859144265427 2.32058488153856457 -0.3119045281314433149 1.1578675696959357388 1.1030827382623513699 -0.50822197840938354574 -0.37592566443770980555 0.28133319415707452871 1.1912118746994624363 -0.47775582462382581994 -0.28596374724475237539 0.24205808118166818876 0.6266981218574068091 0.66043449314043112253 0.29780468245554442275 -0.42985720593655912802 0.1039837291860520041 -0.021167869538427419585;-0.5243514353825921015 -0.69327165000286949947 0.71897336070301165467 -1.7234686463442472348 0.029221026857411430688 -0.23503904685139337394 0.67768701739909598114 0.65640071534109778462 0.26565417113044348385 -1.2187287012230756389 0.7372482396014374828 -0.1875048452037799962 0.39720207230750481653 0.42716674762830875167 0.080063456797321352898 -0.83134634712968680237 -1.4171168416818979985 0.1947508716498803083 0.68182400833015399666 0.6330284481647685535;0.16807056248967583434 1.963840162506707232 -0.83732384083400934749 1.2347851157050357962 -0.30763351527556320741 1.1798742074025387883 -0.35297377510618827001 -0.15718739588383251471 0.29603207620575094916 -1.4489280426089545806 -0.48345544701333270643 -1.6686824668930824167 0.025772163313603151102 0.53551715318848092107 0.16641001159019586098 0.0060161758826761599361 -0.61230728706317683052 0.94601483861975277367 -0.77966296331626805394 -0.36350315122890863861;0.073337222577173066806 0.53714207088177312599 0.71369029258593308374 0.64208790267004534069 0.52044764114736086213 -0.0012713317137380284252 -0.70004009688046542337 -0.37434711794945502161 1.1313879749206205982 -1.4196378672589278214 -1.352638060149701893 0.40146527653967861715 -0.89171015261881014791 0.22868282890165506083 0.72199073223066145832 -0.87737997685844804074 1.3211432341442412852 -0.47088817774026225926 -2.063126822752322731 1.7394278642445910599;0.28413842533950184333 -1.4695028328131216622 0.97273746409315320349 -0.33030532043792265595 -0.26338270844643457691 0.21395442444906900836 -0.48497015525428399663 -1.3438460366292230841 -0.84375294146617829671 0.53202007859433408932 -1.4149723149549695567 -0.15268235584928988025 0.90925984626688138857 -0.61745844099095614776 0.53451179020173833489 0.29411969423343758967 -0.52138657465020443738 -0.35836519021560897524 1.1566969401724784827 -1.5917632735618163498;-0.55875096869021279034 0.36897174223396589365 -1.1457860680627289796 -0.0012679367737112989117 0.73236301871670961283 0.53289349830839560784 -0.48174875669534100719 0.23896397727137336231 0.74873408625875570443 -0.61384609912877352578 0.51975194535363311577 -0.37464919614838626538 0.42769398688393223118 -0.93235220393230711089 -1.8743553217014972123 -2.2627101908103095518 0.49106288604596337599 0.29806532093016091522 0.41417148933635183905 -0.76891649920314564248;0.3174179211365698583 -0.4306177282697667974 -0.11285557110209393228 0.32263869668975048155 0.38926813545372712655 0.34956724217735124505 -0.43094100962984394076 0.44475069571323944118 -0.64669855123803643426 0.23894454784968555128 0.014086755136468996977 1.127046934748400453 -0.19948873590632440478 0.33128408561076516659 -0.99816388035199743456 -0.10296037881032811534 -0.63333465597514837508 0.46666846018864271972 -0.46484011805484043434 -0.64087389394774085805;-1.0560090100204138075 0.61915592414856612802 0.10008805374260586196 0.37220264947798203936 -0.16636474923523891789 -0.89835132361041702964 0.53730297060627374428 -0.023881942370485936822 0.87871437683921382877 -0.4089047641603445471 -0.079237564737680288296 0.036981315737165128266 -0.55428071370239484494 -0.9457950684923831508 1.1313295787865376152 0.66168339067132719844 -0.47836866793318305602 -2.2981768023952606761 0.18178154178599109647 0.69139565474637176834;0.33490033014275533141 -0.02266490086540590837 0.060840428501925010452 -1.495584036029367736 0.004977312792931804647 -0.4497899052263192865 0.99415004511924076613 -0.51440961041754129646 1.3482442480387377692 0.35170851950149184528 0.079843096426516185771 -1.5572541425202413023 0.11934540590893107093 0.047318305306741748062 0.045975066955388360634 0.21155084641689114733 1.6060034182762494837 -1.0143157164939813342 -0.015902509747280829666 0.42397346337694813423;-0.59359826156753214832 1.0077081683588458016 -0.70460295167293840457 -0.10709625041388998179 -0.41400526024090511523 -0.69099903117067507097 1.320946224861499374 -0.12863018543812379524 -0.28504816719677339432 1.4293468901677937044 0.09078557182862634356 -1.6259171991562584303 -0.61034709342471071825 -0.67369041060282219835 0.17548399354856475396 -1.7848679490963579308 -0.18764886558478710565 0.33591728352850969141 -1.2254600393491512644 -2.0180640888221037521];

% Layer 3
b3 = -0.31662638018486510827;
LW3_2 = [1.040449070035593504 0.28599580500477128631 -0.10395783736822980514 0.0045118224710334053906 2.6880171780623398625 -0.27864414736790060756 0.014642452512846166821 0.45216268927865610472 -0.028643011579211154205 0.13169591531216462421 0.080097242874462556972 0.12800972261910209538 1.1542539187506413167 -0.013856526863968404717 0.049708439782208603541 0.059750890175690969663 0.69623912918050501197 0.30330313137785491762 0.19658410283650426531 -0.14350792488413499637];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
