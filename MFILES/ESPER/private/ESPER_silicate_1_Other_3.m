function [Y,Xf,Af] = ESPER_silicate_1_Other_3(X,~,~)
%ESPER_SILICATE_1_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_1_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.3418024429254393759;-1.2065948767194354385;-4.1233021366277657904;0.52562591912206069189;-2.2226929508215267361;0.12540354965943251164;-2.3056051961801764527;-1.3896517115681885635;0.70502513214743389725;1.6729993711711741433;-2.2269869146935046267;0.82926301757232045997;0.15712475915949905558;-2.0446050829858775089;-1.7950385330465916667;0.026421189463683929233;1.4246245937697381567;1.8924708871006716837;-1.0587672305746844703;0.38625182543906838584;-2.7272756605972015009;-6.378625634285056023;1.7343053598192221809;-0.019059781131090580697;1.174997315981741508];
IW1_1 = [-0.0089536260360616026083 0.28441328292729411986 0.87887976072671358807 -0.60333778339837618176 3.6161653339781785199 -2.0405404828131983308 -0.52181231371426994858 0.62464445630160392309 -0.21861791496077309649;-0.22245265873709099691 0.41253818882124781986 0.38401254809113039013 -0.14309878187901095559 1.2483912910501653304 -1.5340851060669007389 -0.032658998643477557544 -0.30768058198056175145 -0.098584662208647436121;0.65903106765372965192 0.66276343214925625968 -0.76963630799954729778 -0.075518530906573219652 -2.172757569552923762 -3.9887571626168401018 -0.51516539748550760347 -0.69162282715920131437 -0.71591619291150421223;-0.3351690875814523074 -0.049313587444220680078 0.23330312594609797783 -0.88856991331556245406 -4.6687081223507442829 1.2107011354380146084 0.034510893691531825678 -0.90181950782045516846 0.035882357346984021518;1.4485905316357325923 0.020113558835243613987 1.6125208480881290107 -0.39343038776179928284 -0.67115809807850757007 -2.802428337932071134 -0.59138589390276885549 2.0814245395595230015 0.56739604528303899666;-0.20827536134069996043 0.038028657802758852879 0.20962572082312974642 -0.43591885394623441918 -3.1771413505893937312 0.520509830258428563 0.035587084715522319944 -0.30238264645654100438 -0.14798382905968637813;0.21857769354802999984 0.1895958386992536715 -1.0518536084161949073 -0.88242000208153537066 -1.4716319525886194519 -0.8599748723646252202 0.19031662005647489999 -1.8204928925809080731 0.093712939487498744806;0.074927553208117739225 -0.045298327097762436377 1.0597281945640693035 0.854900828147551195 1.3640369301358754583 -2.4496618163227230625 0.13650809296902072232 0.46216582039850900854 -0.63440713831960715563;-0.29466914570076779833 0.11082429718392970697 0.093694947021469299209 -0.28251422265107700715 -3.2182550237517641989 1.1824017902110077749 0.05250006220344190927 -0.51696350163705251379 -0.013245090966592912643;0.75504508315962526321 -0.24217775264376800726 -0.7201951269282267365 -0.34030738803726701125 0.031487190484042776317 1.2928229665406552051 -0.4729735411371375764 0.072615391822281591394 1.270879591411570253;1.2056701142908203828 -0.84357488322412288451 -1.4648660598549780865 -0.0051403113368661676116 -0.93483840732532974549 -1.3078668797257195777 -0.55358529544953838375 -0.15082578692548073707 -0.22162734465242930892;0.65951904177284048636 -0.084409198049570727251 0.40336036684264670038 -0.54092975981171709243 -0.084800789265081000234 0.16245610936597898455 -0.15796252223924187041 0.27487605409796589395 -0.27658951744408516449;-0.23800531184328821421 -0.047052240157357184958 0.040049700377446102728 -0.30102042210308205261 -2.0695880728141076155 0.87293692998000338434 0.12297248908036545467 -0.79737082207547571588 0.068928277434162188442;-0.68027881014167634888 -0.053537613556292752703 -0.043994754932515867107 0.58165070906083582436 -0.8053585400943374939 -1.7605625224149987762 0.27240365295270085877 -0.91452414685238880843 -0.098186126368158377353;-9.0340417991502803829 -5.6719242612812967863 -3.1987704169745376781 0.56445734827096427644 0.61934526091212338539 7.6087707732065812394 1.5882752438177305532 -3.3362290370672860185 1.6511826357729186832;0.47288705311131701281 0.49652695800212753863 -4.1236099834550659082 0.49785071669796282512 -3.5849486398129539744 -0.14092685437728116882 0.98714845910886761526 -0.90396500329842466304 -0.18676930962358895272;0.51085586939506999471 -0.25142254758560328431 -0.4416015814895100644 -0.31124374185638770118 -0.85503843012743696583 1.3482193718283608241 -0.076852205934985332036 0.44275904200801641242 0.98843276198693941215;0.35624314570190890317 -0.18831119431252996144 0.40121073416828506586 0.46131705202307943248 -0.03281684017738368403 1.3536093051793525177 -0.014500710052781666179 0.10609370933750074395 -0.12793656840044251299;2.5584942606689007327 -0.35590589327151994636 0.61784723383076955994 -0.23846614109670571935 2.2542332036926295835 -3.2800133157918907045 -0.7678797658828593331 0.22618838901065449476 0.31059708509789618613;-0.59253930713178060152 0.66962445107362256191 0.2788956559661986967 0.62605738811123634591 1.2262445098329852744 1.2898883810070052025 0.036180551079513977031 -0.59323276691516713122 -0.5032722316992193079;0.0225899394757132152 -0.015391878763733659111 -0.67290620211772234072 -0.46985527321222519959 -0.023560088413106160254 -2.9389410438260590297 0.033867115971317696133 -0.57869116939715248282 -0.13438001330265297861;0.0051373353072262902333 -0.16381371273228184648 -4.7856643423393734338 -0.81325980324084223838 -2.2008191738068565435 -0.80651222318342952189 -0.036916027953084941393 -0.37005658937032265277 -0.18256358964821078894;-0.27407186316699549966 -0.12488080721359236247 0.95836813704738055275 -0.1541729564298150168 0.51839336604295760402 -0.55103130682419887432 0.9124584262262304124 -2.1319341771000548391 0.53621742548493744884;-0.044848494781472236781 0.58521441045204114495 0.90144423752981372999 0.17329170320183784337 3.052749334310989493 -2.9872991480107029538 -0.86677897052689067969 1.3807020415435726779 -1.3789646453976285301;1.0072521617291785301 -0.32162972400307299203 -0.76830895288774148089 -0.54858080705598766258 2.4368025367419159366 0.065298920365979368219 -1.0190000778515022617 -0.63630144598842663939 1.684849007748341343];

% Layer 2
b2 = [-1.5857462513022348993;0.97477710165900965933;-2.2834500409503997176;-4.533709238497458216;3.2350425714168542513;-4.0640458705190374289;1.7037966286672243665;-0.1751258850132522138;2.9782364129281417853;-2.9853037336122412171;-0.91570093936019925085;-2.6348709903975766622;1.6297370832953497199;0.51201109655628129769;2.4854261375345303442];
LW2_1 = [1.3877828491584138781 -0.84233203984186844071 -0.5465429538756869654 6.192489395509864103 1.7135252445240063413 -4.1290262119102747462 -7.4071442492157277826 0.72948306567284970647 -3.1409621366255637831 -0.52692163385457180258 -3.3311604578288971368 -1.6904833095499225415 1.2699906677424270818 -4.4354898824644468647 0.13855269107187764832 3.2974168379432011733 -4.4056381270359095126 -5.2730014872774235712 -1.3351204816870887448 -1.3254475948644472982 -5.8052083664468083768 2.7615436043717807024 -4.7662612422614181185 -1.6518796521880212413 0.8729027051513515989;2.5394077073499592423 -1.089900876175002864 -1.9030840288224064594 0.48178699391784901573 0.65219230369779890299 -1.1282079706328689284 1.8115543723846092572 -1.2401250314914034067 3.5738555718554043672 1.3054618840139409208 -1.1056677715037681597 2.0379745136517830595 0.54574522280164805554 6.6703715755336192572 -0.23259693451471061265 0.69355724162839693658 -1.9895717294023278487 -1.3225924553245542725 3.8954358316188972822 0.34608012793201575752 -3.2209705320857451305 -4.0666431306496537701 -3.2386840798810974107 -0.39211795431288631875 2.3158107406814627538;1.0574231519766481568 -5.385896836503906826 -0.070487372520493321582 -3.2406697558267887338 -0.0079249765352654606698 -1.3330670850249668469 0.67155099450919819581 1.6117379230272470547 8.7378976963771695097 -0.37816121938540769865 0.98157837314584361899 5.4879016841833045959 -3.2986885136451595812 2.1433935755811663881 0.035408603323147727626 1.1321777076020778097 -2.2678062817635353809 -7.6260756738521751075 -0.058654691211316674349 0.83896626353910397356 -3.3647659976716965957 -4.5421818533629849668 1.2185501134697145353 -0.086456673614241780212 0.61335466162003882129;-0.4810809735491292094 -2.6012205621235620079 -0.82489621950001323913 -0.60913033780785974525 -0.5380789217895874943 -0.039936662543030403139 -1.1467639087383569851 -0.77906091973446656151 1.05463067189011106 -0.63223066524004745137 -0.57026079331026446884 -0.97907166520065536108 1.5064375993791960795 0.84414624995746656566 -0.36957309403371746415 0.67605792638378336967 -1.4938395441396370433 1.2879795498466652948 0.13501950409573701406 0.015800322557051157263 1.6450935984505110632 -1.9488684067869064265 -0.30073029901525255569 0.1200200849886823018 1.3437653832686262678;-1.9976014106643573687 1.8371393501967452355 1.1649500919961510714 0.010197865921600516789 0.61244512840469478299 -2.9709384461181498338 -0.59054376534373531626 -1.3569484752640377234 -0.51430016585377380522 -4.2844128235645175806 -0.50689441516993560821 0.37592175136792166379 5.142004000466231517 0.053251748008550314761 0.27410343584222079949 -0.8692605875849951369 3.2619202303718703995 -0.77019803538703768275 0.28034865512820544842 -0.56968390536022417425 -1.2546535948148112016 -2.5649930614784417493 -4.502056919278038194 -0.11715958865120439103 0.26091054398321927854;-1.1959952833591347421 -0.47537931240142450307 -1.5421391649432341087 -1.769578704933426172 0.32751596675894606436 -0.55925557631912492518 -1.6831992271272091521 -1.1593319474886660814 2.9619638562406365168 -3.3466989928025214773 -0.28822378393909653393 0.64838094708327553839 0.02126694600607664104 3.070834942728129402 -0.31969714668673093749 -0.13373805484242090591 -0.45653074729960180234 0.29829289429440603021 0.78808870111511197809 -0.096181753174252537786 2.7242497102627436512 1.966134797330819195 1.5612614726354805406 1.2293767503761732218 4.0113746707880348907;2.7480675097802880202 -0.43495549509972702973 0.18215875576691781257 3.3111623886991301546 -0.49247465289929337473 -3.7876363254818303794 -0.59124265338801640368 2.2186191063048106287 2.4782336829868896189 0.85368986528723911356 0.22134687630347710252 -0.91775543777420631741 0.57996782352638531766 -3.2907622985944540162 -0.12007541504432903134 0.47710876454461054186 -3.7310421084614358023 1.3969083194372020618 0.13619999802027274449 -1.0945979247167150206 1.6605545858526655767 -2.5355844885952105727 -0.56618229617876680848 -0.42568236844268014796 -1.2052011783552580848;-0.48218561942925353137 1.7396030665324955233 -0.30138624564630789315 0.40327232056276623995 -0.060110943225960299097 0.86371022892834470319 -0.33802783062761765365 -0.93424324613934606187 0.12965930367625480568 -0.55717139817889083098 0.48419595709964169394 1.9569090056170379555 -1.632502435100220417 0.98612522174025474264 0.13643784269791461861 -0.18749347854571232763 1.489324132743036877 -0.71573826833749709664 0.017469962439450117259 -0.10414884140356879538 0.31643731402062796887 1.0699529802463982886 -0.63742215645832200899 -0.20780073961210837608 -0.38090977035416956342;0.98399486921573420251 3.508867663048281571 -0.85234395648204674956 -2.0467051785406651376 0.1524818682990315144 -0.51285535381583069459 1.9989272831299331745 0.46756966122346399484 -0.89905868925677301373 0.081435460292703543139 -0.20831219349122906404 0.028631979017069177779 0.42807090172797296335 -2.0694000938803451817 0.36547290618960343034 -0.83070605441326783591 2.2660967231531996546 0.0021644048247078367248 -0.080270732517540271944 -0.19003109133048037838 -1.8116978437047732697 2.1256395829323198043 0.36495377542358531375 0.29162040160060492822 -0.81076653312028257314;0.25593411146067579498 -0.083985838926655745351 0.011844980481853754559 -1.024015594568428833 0.091725070015876569718 3.3915729528851530361 -1.406519693051974329 -0.14331596708783156391 -1.0846539764280080931 -1.9790035320670427144 0.074978446026520303991 -0.066541434606535512786 -1.7279265022135590346 0.81179345167187699772 0.050812133751484599153 0.17855165832569774853 3.2888857778358131512 -0.56346802935302675586 -0.030219944333758706756 0.85862837971475081122 -0.21742401742043745982 1.4453965141059801347 1.6456979404220088981 0.28638338073654390215 0.8607602717732664166;-0.89576032680609929404 -2.7051358630981767739 0.27571227892682464988 0.50913144952497113582 -0.055871899848479261719 1.1942605929867726733 0.62260401667495857136 1.0086466554677604446 -0.68816170093725725909 -1.1079941453701700471 -0.050441208212291872848 0.063485276695658635071 -0.5592276283737154241 0.32271650835171211691 -0.054704527676702724426 0.13877124726151399137 -0.40368235096240789872 -1.6782085300510349857 0.0329854674470791559 0.67717335323649252565 -0.9697778307972579892 -2.2811384934924801016 0.36717311577675482148 -0.77933666628977671387 0.82481598957476731648;1.3983963104371250896 0.29704350517247707364 -0.6817968628183296298 -0.25990553868501320434 -0.030683417844671538599 -3.2901305406543266407 -0.051799367792304706892 0.31256923379764939286 1.920231696605587457 -6.5072550490088367781 0.00026286402341275249975 -0.70666355933721813898 -2.6701752481387317495 -3.5654427430204824745 0.12724116950020966654 0.15052082767450311596 0.36327006879234619019 -0.57175718879563830477 -0.15698839461137129025 -1.6060687479126041222 1.8179852517626122754 -1.8243137460495579827 -0.42779026992482865888 -0.19969712462766517347 2.5342499170446801671;-1.2165544747751899646 -1.0937662956957190374 -1.3159310666954169289 -1.1780045162629433353 -1.0296038491299077666 1.1397973728347035038 1.6208130085166168044 -0.6712153768917092922 -0.15992574262145126118 -1.4810965364081563056 -0.88707617459795251591 -1.1328875620247347289 -0.26560177552140951107 2.536320454858652873 0.023736162718537002353 -0.11665580177399598183 1.7909102936292744523 -1.2304172678708487076 0.49616383821756776529 0.5715936185188807972 -3.8689551671747217654 4.6319844144545916365 0.89692131805135433265 -0.91377688221421349279 0.77637413361044549376;-3.1773952301764127881 0.29590186143372970706 -0.66586469643734214063 -0.72066333574263308215 0.35366462965173189881 -0.7760330331390546954 -1.1973193790035410178 -0.10866873806910216926 0.48515477758096220429 0.90148092079144526156 -0.28844665232635241514 -1.0428235252791788756 0.35363685484652923607 -0.57951751882985325093 -0.11890182953004557742 0.13254400573223826254 -1.6063080752983307509 0.43767075501220603639 0.077487835474834051985 -0.70794673171096678121 1.5788170111285051433 2.5923848922871206568 -1.4770265695551998419 0.014580931438387276233 -0.12845177298245222253;2.2125504422927790849 -0.57282289884437975758 -1.052857277529078317 -0.42055498437963206859 0.17378895603291225069 0.97590862179759962913 -1.399382230475430644 0.12916514638984932795 0.65972277081614272287 3.6555932289826169601 0.28712295284207423052 2.0266400437966103354 -0.6108487034942725602 2.932263704908423918 0.13907923039422420697 0.16909616099314703219 -3.1898756713232296889 -2.2674515400466326298 0.38526558335470062477 -0.54168722489836007572 0.23631056928807975259 0.050578450678983914723 -1.6643972176411196973 -0.081239630448993266354 0.20182650112384575847];

% Layer 3
b3 = 1.4807475017638147552;
LW3_2 = [-0.011097538867858962319 0.035209048417742201675 -0.25376377334643457351 0.1371569480906202898 0.22254273838880384018 0.31093145526813764645 0.1685481282682243509 0.37225522791305459824 0.14299654161104402572 1.7144522079108222012 0.49277613831110650411 0.56728179349549168187 -0.052461376632336444159 0.43633592153086098175 -0.31987642513683894885];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
