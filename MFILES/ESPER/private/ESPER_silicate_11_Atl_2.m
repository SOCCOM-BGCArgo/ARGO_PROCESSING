function [Y,Xf,Af] = ESPER_silicate_11_Atl_2(X,~,~)
%ESPER_SILICATE_11_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_11_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-177.232103709389;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.00425400504498441;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.85660869324937449765;-1.4277417118397699447;0.84988721118886223493;-0.31564303784698594102;1.8577017397565411816;-0.096948754399460629338;0.50118750422548008494;-1.0788810388618861325;1.3842919287649009252;1.0328613098179888485;2.2394968036758888807;0.35937708569922310886;1.7983604704729725388;-0.52685332611549562376;-3.3535967460912212701;1.3416409421848500827;-1.2268641771387169825;-21.441336414523501475;1.7306301495611735586;4.1417633500829573734];
IW1_1 = [-0.40233717087360620912 0.19126341255848766654 0.48802613936728350685 -1.3454648820649277585 2.0841702580991716687 -0.74093829341990224968 -0.49495679276594728435;0.076924421771112194701 0.1422754308139700663 0.34712825471002212163 -0.032879116379241922485 2.0097042427350428895 0.032357149271509691446 -0.28694419467507892296;0.25179998943523151933 0.25452044029882209264 0.62538591821092281986 -0.100537656580889187 -1.0519828097163836933 0.42494205217875030689 -0.78997133273463671088;0.059438627287392929721 0.03852471229340936193 0.18922651626624026333 -0.4186418087688115186 -0.035553502066833553297 0.62138745810534989911 0.11321764041608313456;0.26988411199752515568 0.080337434334592061624 0.88240772852623672318 -0.40967846437695398798 -2.7787664217262322275 0.85519805137333682055 -0.65916460889486327979;-0.038442860703963278868 -0.3651902155652133608 0.37489962999810388933 -0.56863897677335073499 -1.4054849854430961908 -0.073749682207189179439 0.3393261632241712511;0.041093454987247084176 -0.094740036040970379561 0.041437477658921841039 0.16229187385238158514 -0.032359045562403182528 0.079914520339856687237 -0.25086353835157937375;-0.21121315117397637673 0.13267509635034827054 0.28813075686183808877 -0.63932443540566208373 0.12600851845022395525 -0.021873909210778402085 0.24465268956644137255;0.42867108530311059944 0.65305738060754869867 -0.24249922901437170886 -0.4960752603471649258 -1.2800910631225592695 -0.12700758154514213416 0.95480448599809897292;0.70674058420072460862 0.11578111353142751805 -0.20289250720495974334 0.49084608600881518559 -3.0665451279402318185 0.99469983001818951251 0.40454090401825487655;-0.064147078142766808528 -0.17083294020668421398 -0.36772166412662499191 0.7621568044712558887 -1.8580164405993375709 0.11924533975105769401 0.30593828096604080979;-0.13476226236918470436 -0.050509961949658170599 -0.24130859624550785036 0.78707041681257439159 0.31230073340130720672 0.014558711764545834849 0.24505269231660187224;-0.13849753069358644586 -0.12499957587958725191 -0.43905352441518274986 0.6496624402788762076 -1.5011399100494360326 -0.36305260382676490805 0.28864147894005859341;-0.0062407449013148035 -0.19590328713087956647 0.05184587349117224242 0.41324616950181319863 0.59046345478534412177 -0.48551046121283386592 -0.70075496114566981909;0.29816631667356069402 -0.61158874853024169926 1.3433637014531563114 0.54870970549646413961 4.9734375545372095928 -1.2927511258427082375 -1.2778985535625313474;0.45388777434860189119 -0.022974771462928179899 -0.0049958532114539192306 2.0637361898864705623 0.015114559121819765714 -0.67577841661536441897 -0.57233520259835268806;-0.3928772122098344588 0.0064239505195167198939 0.21203932667415018032 -1.7159894514352171946 -0.21975527114288098685 0.78401672851925252594 0.52942853200737949315;-7.3039163267972870841 -0.90279128618356241365 1.2686899627064696094 7.5083447537339083055 18.649507538479223712 6.2155010150242322453 -7.6312021001239225271;0.36901993686537692962 0.93727308831094835462 -1.0339024222523525154 -0.028752672070711582375 -0.41813824260935278376 -0.29070397241325385274 0.65111605437335906554;-0.16888392013400177483 0.13021070195549688808 0.49204231532516784497 -0.66242270279536941135 -4.1808852159945475435 -0.16183090099575084264 -0.39387347195042871073];

% Layer 2
b2 = [-13.246298720591328291;13.810439860307628379;2.2994751974129257199;-1.4898007678571842938;-21.870410113815992759;-1.4597951115948215595;-6.0548867843151530366;10.326676692989559925;13.602615887201963574;31.338923758065959646;-9.6670677855198956507;-20.822936043481060864;4.8034993381731885265;-16.43601803186926702;-9.6182072021987234933;16.734093161143569262;-2.4279842792628008041;14.326687279927208252;3.7003349746702896006;-61.40669196502467031];
LW2_1 = [19.007666641292416898 -4.9841609613982820193 2.6351542273796098037 -6.7567023618654724615 -8.0858342452054383642 -3.1475896468714927856 -5.5650138493355960634 9.2174488939774246177 16.134623567829088131 -0.58540231773418660577 3.3347531537310626248 2.5115384451702151836 -8.0451522727495135001 1.2812536768868940662 -0.062334185808289227504 7.7383772022393664258 0.57768536518891266951 -1.9350658274636785006 -13.354527402325446772 4.069055687997777504;12.116422472258696175 18.397070671182255808 -3.1989104683513303051 -13.300730056027269654 -5.4819808684114992303 12.200837866170717305 -20.979040231179126863 -10.236319041945124653 2.6342975110405419947 4.1709882913766715973 2.4505097075277073593 -6.6296299630875230591 4.1424568027354977673 6.6939520013681637067 0.32154469394299639573 5.2388649075009379175 14.734673011955074173 5.3722227777149509365 0.4004460861172600139 -2.4783130452546688893;-3.3626292647585236395 -11.34281254623283175 12.23032092262363868 7.9150745891842371194 -8.3623365253881942749 8.441770143856308195 0.41190301084275304788 -0.009807095786179942376 -4.6121047165905739718 1.7710687220656886609 -11.354145948677581757 12.278356778689522244 -3.1574405233184945629 -2.0021341512447135003 -0.794484014505732139 -4.5192677371901393002 -9.0503745620870521549 -1.4160919836327299226 1.980029281942956354 8.9815466725568509077;-15.693274262514961492 3.475941607778957998 -4.0146637082071769953 -4.1176786492425527797 -7.3075388497086244399 2.7264187338395284854 9.8735324940136646177 -1.4745865327585108151 -5.8269993806519968516 -1.8913456757314772716 4.4182456410576005368 -3.3436722148248643194 -6.3379647699186749676 -10.855099639252465238 0.37724717933363860478 5.1003238116658797807 0.18560518965112240974 0.11600887723685490704 1.5442744071390039906 16.947886663307500044;3.6747841416349427135 2.6195832064894339908 -7.9117364151474269818 -3.6625578606751192368 10.248443611708424328 -10.601037564223824816 40.010406523943508716 1.0428935692803207314 6.2345431682650742644 -8.3575376192077452941 -3.4456242837381809707 -10.933298571306217184 18.343377599411041956 -10.845386398368258796 0.49863402202602002955 5.0166269882605645236 6.7084764155220053539 2.6576341785616364177 -5.8326113462106379259 -15.845956410124387048;0.49291718509449589103 9.6387447875206380132 -6.7889019665982930363 0.37728172606144394496 -4.7465284276171022526 -6.0751735318637880567 0.38259208361547625277 -3.8238026804975953077 3.2978874883290560938 7.2159593815050309118 -3.2631713375819759726 -2.8993220638439347603 -3.7355578179607111799 5.3865287344772072586 0.68454676141032655412 -1.0542599262062342103 -0.37223499583267510848 -3.4854015708286794073 -6.896970249411487508 5.0477477698881951795;-6.0808529897093670513 -25.374723990048490663 5.0977753142365802574 3.6776003655656950286 0.87137726026819339875 -21.335175872403539188 -1.4480525862008166715 17.213616468682310767 -1.307868039659833892 -10.524712750540045292 9.3154531582090278619 1.1672122797549830953 -11.68694041902481473 -8.9558886861656983314 2.1533628586339625954 5.8445536433133229437 2.5913986651770546388 -7.2258078753107364278 -1.5070228580811271257 -5.8783592417936514352;-0.13740651411622212263 2.2403885011540332073 2.2160065668664028493 -15.643346682575780093 3.432546724460019405 12.191646042649873394 -38.746419715829709673 -19.119072938910768755 -8.733880129334671949 1.5252540216706427234 -5.0730759799971485435 5.0139018289521324334 -10.748421957797640758 1.2166104626421843093 -4.218981162738527857 0.58621872493052396003 2.4451055025443606539 -4.2722161367398090448 6.4955372314947457113 4.2773966456018968074;-5.6494396019855672719 -6.3237684257996980008 7.1898759141640731229 10.865504116823659686 -5.5390857601264391619 6.2627964519369889729 -7.5061603889493078157 -3.116206739135216619 2.6311616136106494857 -2.3025419848384363064 -9.0893239303213437807 7.6142182015296375752 0.6248593005317252258 -0.14993576896695609557 -1.8690845128286905918 -11.21925652848239352 -16.877535411715822278 -0.30273436820585203355 -3.638797473265151794 -4.7576450120007969247;-3.1544105393720553998 3.0806165390870012821 11.937472115905459091 -10.920090171317960781 10.898491638860708264 24.645258876893517908 -24.540441711307192207 -12.021036900236087064 -7.7102287581309223441 -12.09364499553277561 4.7679129660847490157 6.8225080028437687929 3.2051756480646362846 6.1448034499316461776 19.518818700780983022 -25.636804816186597122 47.506681648458133793 36.341912262743271356 24.143042069374512693 15.055092833482468961;8.0269430794307652377 -0.7732665998156693643 0.86755158680970578811 7.4371363677073425436 -0.97133463896887572986 -9.0721473589710743823 6.8872690416951192205 -0.88673485007150421033 1.7502977560587495987 -2.6373800068774913008 -11.026313003428072079 -5.2798420512153505513 20.249316487800527398 -2.7050213435073153789 1.7873316336848072972 17.790536434926458753 21.582638286982270159 1.4514992382226454826 -2.8787646143588636605 -6.0772351976505936122;-18.970357156902256435 34.67357549217761914 9.4151299272379578298 0.91381813450167614921 14.961913303997389946 -7.1352163207076753082 -13.958928098105708671 -25.582846320926613259 20.576317642840191269 -4.4200827261978394844 13.62023894760293885 -20.534346181997293002 27.308954668198179405 -16.436877061437034087 6.8802247594961212229 -3.5839027227512403329 -0.69941738561038158117 2.4535271668910545451 1.0330494290897409559 -12.789762884644895635;2.8594825037654754141 17.668201389844217175 -1.0171157851659804461 7.7469106668132923232 -2.6504818318345328976 4.1063945716247678419 -2.7875574631667681125 2.6650037047596923934 -1.7832817752642784459 -0.49298856878085067779 10.933114830707756582 -10.271582192446006232 6.9885101923938650614 2.7733533828744745264 -0.52625753237689054664 -7.9746814551924192216 -9.746031147990189325 -1.7290891253580680242 2.0914968611481996597 -10.376917626132822647;-0.075841839834317720248 2.5985916787355702873 11.241339434105528383 5.3476315300375478756 -0.71064012883965754774 -5.5252392068233815436 -12.371029198463707743 7.7655064052414362052 -0.43879940257398697412 -1.888431267185650686 3.2429345157626543461 -4.3011857040448697731 2.6389116102184630996 5.9725090965443881075 8.6435725464037407306 -7.3892284847290898853 -2.4680684092820346365 -3.3767121272085427464 6.3652867262471906074 -3.4162725636968467313;-5.2536776658036314913 -12.663653217570439935 1.2447883061305904384 0.67700549880812588288 -1.5093970135521304066 -5.4154802898881113649 12.048899151374417471 3.7177807813949366178 1.5025186206914780129 -9.000100114952140018 -9.9118974016050938047 6.573560055630364829 -4.0156113015822310075 -4.2355988970736202504 1.2994096916339947789 -1.4772508103406227775 -5.4398974644976991755 0.98043682190551273425 -3.3232419470255796234 6.1396640733920877508;-20.794596158766164962 0.7685075533115249824 -1.0482914296085414918 -13.986520066028546694 2.5654171970023491589 13.674889176321524786 25.095209869474832232 -3.2597468141149690268 -5.8769016063235595126 -10.229955549430153283 -0.47797781610740530667 10.460629889678994431 -0.44567314171251848354 -8.3168427616085089937 2.1152726486455244448 0.34765647418982764671 5.2689942415887927041 10.299903341415921787 4.2781950706037070731 -4.8825183093229904685;23.373762762902572376 13.383898626039032465 8.7282065061922651239 25.225661032215349167 -18.780383418800486339 -8.2100617445448662579 -5.9705034294154222252 3.1067470434310280325 4.3012938730213283733 -23.599515218213380052 0.62933810377137611169 -30.23086592371069159 17.495522577215137261 -18.951472849636125773 -5.065822156369981677 -16.644113913775111513 -25.989511653806403046 13.256490383282145018 -14.294015012320729241 -34.98350725215800594;25.664377200457259676 12.871681792331093774 -37.591239762613959385 -11.369825381426688082 20.010615290348777506 29.594060466905684592 45.527117046455359173 7.5465094611575160854 -4.3186068460588007412 -9.2142772651395681294 -3.9677260007876378189 37.057455833927690492 -23.265423102940150812 7.7839193883853710076 2.2488812858975473219 1.6352148707575604458 0.89482498929431375512 29.84766775521467963 12.759337501458423603 0.26599297562603130274;0.36128408555832769444 8.6450974253041330542 -8.8485890131571220962 2.5549303416856234961 6.9162183991679873074 -7.1247492575060435982 -14.423103934330258724 -1.6686858538336521995 4.0296821018589161767 -2.8714415766226162319 5.6601407875015894433 -8.3588724688900981619 8.5583181201634790369 6.9845849947959433024 0.56419842687832300054 4.9687357533332017212 8.4336290670939391134 -1.279387863953583393 -1.4884907501446977829 -7.7396624034454744034;13.779001944238320476 -19.051225755533373274 40.220763491232531806 5.558175269637359861 -11.742108405962866868 -19.84771613195688289 0.66189894549541195001 3.6820864926843501763 4.1978471911912285108 1.974676215820237557 5.2029109561531079464 -14.7113488199665845 2.329162290381836975 -0.19072682315630012928 1.9056838348243290149 4.5862017045996221754 -9.7759519004729984459 -6.0565600422601724162 -6.5662020214983609634 1.6833388418153687471];

% Layer 3
b3 = -0.47296399608362965639;
LW3_2 = [-0.0077020589621084982468 -0.030249675521890451169 0.38966124389971446007 0.0297803648802151405 -0.14004197281817931664 0.018336987270977371522 -0.033207206706682361463 -0.23446965488242824116 0.039797330139717965181 0.0004501602191707092639 -0.39082827165382222345 0.0033922056006209645555 -0.79687163850104558716 -0.0086539616936428427618 -0.082097905218363936841 0.0083047055767972964568 -0.011392321704306700159 0.01066738821531804278 0.41528084033720930046 -0.050074951749305651738];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
