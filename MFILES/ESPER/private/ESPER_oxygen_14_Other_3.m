function [Y,Xf,Af] = ESPER_oxygen_14_Other_3(X,~,~)
%ESPER_OXYGEN_14_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_14_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.1751768276735807817;3.104029069263357421;4.099470744138061562;3.2698756427760908849;-1.5516610176990679459;2.0367157478463933096;0.79582105363000754661;1.0436731934496914498;0.62839064832571045471;-1.3723299323265301108;-0.97912341263285318504;0.86361435970899036452;-0.13283407710736602758;0.012247973986210927699;-0.69616253270289329969;-0.57628856205700429438;1.7351799825712219683;2.692091195322587005;-2.7108751445496226395;-0.61575440318289631492;1.2978793499357439423;-1.0627059102089793097;24.49912753769192264;2.0384195625690932907;1.2497225667704925378];
IW1_1 = [-0.34118879519136513512 -0.18301019507733573555 5.7051366058150048133 1.4147082694106527523 6.0943754250556114727 -0.13186868141201080196;-1.8766965707010667685 1.3765681471881412445 0.82552275629356752784 0.78197027828199550115 0.65120360248341291332 0.44816431328473421702;-0.74954477453614287707 0.50994269619070942134 3.7518386360626485576 0.40482889624845730392 1.0136898547363244472 0.33218961138816510692;-0.69224017597890119546 0.76278654180114568994 2.7673254150833548337 0.2850071751296184841 -4.5041588964026875175 -0.83990403748986619537;0.24978611270187878191 0.10276058443873396786 -0.95167867588840315829 0.1311452450749356069 -2.2947520160604470973 -1.2960092067017758843;0.19478342252256533595 -0.14053195923299055536 1.8173518304367293208 1.725802460475221789 -0.41596490746679193329 0.36869438959485550944;-0.38323324234354000373 0.2093423154312865353 0.046633781573063685932 0.60076069612690952138 -1.8862099163748091701 -1.0137039898247590664;-0.42495280505240823343 -1.259241718237634533 1.1845707234183211476 -0.22055844639068283852 -0.34579541294249754868 0.43517740254068787431;-0.22781860707937232058 -0.45421738036071301892 2.125106350204398975 -0.4550135159641973126 -0.62553731141134838456 -0.16788599129444198299;1.6843691753564233871 -1.2147529090178095235 -1.883037317131777133 -0.64144196288071420042 5.1405869939520014711 0.81958389666637154747;-0.15285715512091635482 0.25511573742178478286 0.17208793945203706977 0.17180877604278560478 -1.8396137875159839226 0.16761672309001873771;2.8777355523259262604 -0.28004715802688656678 2.3737999852239846099 0.48687655904292442832 3.0722287850602962855 -0.18213579086182982159;2.0727428671405814242 -0.74802845380023452737 0.45782604535249998845 -1.0888234054949272878 0.96958229745436441682 -0.33578697860536493858;0.0086107030112623616364 -0.46395832945113973933 0.17973906344185858197 -0.24620405772960313184 0.018136009765432059559 -0.45365354338651359134;-0.83900340185323085684 -0.49909646454862649501 2.9203454515842595107 -0.013784430850775592631 -0.098991638358694650224 0.11157535622916123219;0.48577396161448810341 -0.33718912280060736597 -1.1404678703368464898 -0.326572099813417005 0.23029382774512360821 -0.50829593901375313969;-0.094546561768856646202 -0.20052951616825223646 -1.7129607983221259992 0.75059816922260069738 2.015190667817782888 1.1884952041577194759;0.84672692577103514378 -0.53973092143873901971 -1.4142899108349504811 3.4975110095589787562 -1.0964597978590544525 0.69102921939213679536;-0.38702032524726853735 0.36035809907423138609 -0.29859811049108397896 -1.4484665163940808608 -0.30894434764303346785 -0.80736521597695853902;-0.12252496447636629373 -0.44663052248138890299 0.42720244343812197041 -0.23509463902760902032 1.9213529927336412406 0.43247680094203067025;-1.2202409655389554466 -0.03514370758247326032 -0.96113636267019419979 0.51031759909396301467 2.9055338274377020547 1.7784446576283772234;-0.012080548921517440461 0.025531322005463829433 -0.52527726408384711743 -1.0241503600384573858 2.0198670900971409381 1.2784264428671656688;0.21727319224737931536 1.0893336760118790263 -1.4496145816288168451 24.164489899215247704 -5.1920188126638295856 0.33353797578374633215;-0.84451203699000698677 -2.1815740764490998416 -0.18531056574796858638 -0.11108659899236686397 -5.6768039968356474034 0.55982675767334788564;1.8801567973181529947 -0.07463667260931837466 1.4741047069358714783 -1.8293983337211419116 -4.8394592008619969903 2.1260097426066058013];

% Layer 2
b2 = [3.0724921430619178686;21.418478029366436743;0.8134355508368275034;-3.8692353809275030763;4.3567037927738345715;0.31048978992394155041;-5.9157883663319488221;3.8630031274980831668;-3.8511630056582095705;2.3472918056233122996;6.6240411107896282061;3.1765782141812399786;-3.0569456563084007605;-3.3550856901965371293;3.1909358911447114338];
LW2_1 = [-1.3761574434711754122 0.86564591413411695608 -1.9631629078854142545 -2.8873394385205441992 -0.32619440395828241952 2.2118701995639615809 1.3619739822696215192 -2.0674622721615922849 1.9791431018511622675 0.035618191560669004714 -2.2621030272460629362 0.81719889478056162435 -0.76666663765992548729 2.3448056897325235681 0.54963524760165327621 -0.43721385726459083276 0.95144207804931779648 0.65268206687447438696 2.1427681577351829212 -2.7404934872107062915 -0.48045246152989162791 1.7312706521321472586 -0.63286120774957210777 0.86830121690302997095 -0.4714772392516218269;2.691811514816009776 -1.1991542026730808157 6.1714777476718865046 12.973661466845099355 2.1829561289491530296 -18.58071986459377456 -8.0241961825536431974 14.04075147418063807 -1.0550647724247932402 17.186006062262652705 2.1158795181526262041 -10.450551655994901878 7.7436996618356106481 -15.565645221302059298 -9.7505521281680849199 -14.446880776408388414 8.9044274054672438723 -3.902157229386780557 8.1614619375395225376 21.081195272085395231 -3.7563721690505573747 -20.904055483320078679 2.7919791313840272018 -13.31831218906651948 2.4170380011782515162;-0.50639778264746404535 -1.3736272645444529417 -0.32702266665098078668 2.0286858523630337814 5.1977597700008963955 -0.54670733060550980031 -2.8851611649571036189 1.4214164477942781151 -1.8869528121373861929 -0.76244799978206012625 -4.5730061123791569955 0.45882249026502680556 -0.54636939182653110336 -0.68376522145404849962 1.8476939784420580715 0.31825414333390122934 -2.5655670966110419862 -0.16501605512495418071 0.46797730916800767131 -2.3016620848752600281 3.2734586553323654634 -1.0450909207201526385 -0.56570288951694047697 -1.2871324431165487301 0.74546723283199778365;-0.90150504201263170767 -0.67782876432786465237 5.1802023193182877847 -3.3487020437291374897 0.27013652081622863133 -2.2156192691253733251 2.1760692557897547417 -3.463573920722094357 6.0323161710301205218 0.42334120310763340145 -0.24267061141564719162 -0.27017465971293253002 0.87776064256093933036 2.4745860085739890266 0.12516341868124442049 0.42040631519297150254 -0.91303658433359591307 -1.3553933791696184397 -0.81312804450991282845 -1.1669850187870591807 -0.04167969311814483796 4.823408467184795434 0.11787693027711083904 1.3084526566860028574 -0.2972918508155084627;-0.88245620564698790123 -4.3043550482470456231 -0.96326693509047967012 3.0222280702324963997 -1.1802854189536646778 5.8474481719809778824 0.089551691327990956548 -3.6915243496677239143 2.1196449331321844944 -0.089960034781144268545 5.5432896732174370413 -0.15444927558415505464 -0.40618323161488406603 0.33053238232611015235 0.84743978629758021093 6.0855933894252336458 1.2975999743601451808 -2.516808486044857851 4.4161633799695403368 -0.49222339160831440896 1.0286969109173078607 0.4869354341989662327 0.13376169702776313786 -0.68996436078247236345 0.57648702471895196808;0.28395241473863852555 0.5882480727411706356 -1.9840197005230990612 0.82299913736133589737 0.43415831314133512819 -1.0291232537097183553 -0.79396682659390438452 1.2330782412398439973 0.72243355960262312099 -0.018612761383242706903 -3.5543114672467464032 -0.072579808002642923204 -0.39845140652516725099 -4.4576632436249514768 -0.07872072412917557882 -0.20992198400296302463 -0.52913092548428475315 -0.35792816506573216229 -0.40490738808382498171 1.5710384774188457246 -0.16702517280622333762 -0.024240548009446562239 0.34119580683889927375 -0.64910595755475830604 0.38699589000782791404;-0.36555185637402121124 -1.0769920540630766315 3.1968733011654548726 -2.6417633661166917136 -1.8030538619275147116 -0.078999897356548984262 0.85147808894010301728 -0.41238285722388362542 0.63342605527296347301 -0.30173249207767266489 -1.5048477047693611386 0.028957158125466897491 0.82160598519677907614 -0.49422492205499035656 -0.11750665845697459699 0.32032749400419768815 -1.2123710747986922165 0.42123005163036780774 -1.3498731252818589876 -1.7583467482545873661 1.1094569688795108409 -0.27700694424880367706 -0.51876001076996514083 1.471473809956555856 -0.32125433173437012435;1.0709064240914745181 -0.41313473248840160146 -13.147459348880060404 1.800431429546746287 -1.5853921596683098194 -1.0116383051163344575 -4.5966675316157523667 1.2510455940461542301 -3.0377991990585644366 0.054407339032213813956 -0.12915433273815643545 -1.1180363027088733308 0.1699588061649986992 1.8448965391576335193 0.58740641387516590033 -3.5345893545006443759 0.33668608040249936586 -0.45588398063019625051 -2.1091726590481516546 -1.423858724847818058 1.2101614992912010926 -4.9046118403151321985 1.6488382457886807675 0.35203318200836680729 0.22473421173867472178;-0.74393406176990273249 0.063686712032193060207 3.5744378452507628019 -1.1373820268390808508 0.94088672332238132423 -0.35291091857405115784 0.25646066919242904714 1.1195717762600354561 0.18707002527300214956 -0.083195177225148811417 -1.1639101073675042208 -0.24496189710116653138 0.25083620282485596942 -0.52886661093590792149 -0.094734614013871593086 0.28174054105569212858 -1.1877945936168448071 -0.13093796847447114473 -1.934935762863892128 1.2053452318477397842 0.21829054744111189845 -0.41475760829050367651 0.15737174596922545722 0.016455898604789111206 -0.12974208595177633141;0.36267416884660047538 0.054390148056841648716 -0.77560438855090940713 0.99396104301150478566 0.22503197178416134427 0.29986839468368936545 0.85301933961096232384 -0.11743016081315035826 -1.4896992082430398074 0.44547198758728251411 4.2838080841377195185 -0.022289352669892417702 0.057402959707915653109 3.8869229327551568787 -0.080344652720995557438 -1.2573360598209861738 1.1622706092092984775 0.1576679094448618923 1.331150896873763978 -1.7804623429756443187 -0.24131414702722275845 1.2039170643789895987 -0.055534499195700887109 -0.21663439312078755505 -0.2002663202059217773;0.41122213564108278661 0.62574831532771613141 -3.7746928895264271198 4.8614156954999634408 1.5027207594079063924 -0.82067738567735115662 -0.92108997051950991519 0.97837451255488772084 -2.0693536213480028252 0.30703599277826060243 4.6842576198946614952 -0.61425066296467534244 0.19843387814713597805 1.5672499092583169755 -0.97671071689746147282 -0.42368290731757213274 0.93702699177041859357 -0.7387575112445280423 3.1752551576085110696 1.4136263830020872057 -0.96952754638208760163 -0.4385124722662225305 0.17624770173066720003 -0.67788037004180823342 0.33628966672913246372;1.0340994817864879174 2.7861153251201371539 -2.6761715352346642227 1.3811919032991448741 -0.72384999068677047251 -0.47185324066607969851 -1.8562329603237659459 0.14144855836895214862 -1.4024336211463661606 -0.31591848105081826725 7.7019578895825349107 0.18751516005493776285 0.31642707052990987071 6.195678666224849529 -0.2789696556626704016 -2.6818505368672327371 3.4245931952467154602 0.44775802960666127861 3.1543137440779389635 -1.4819533970832134973 -1.30731274258600072 0.86358126694344417018 0.27184271548792721118 0.28039544754723982889 0.18037215775617781999;-1.0971040555151443385 -1.7546843100227691448 -2.9644774097344384067 0.43553625695217557112 -4.7489584126144706033 2.14221695509085297 7.6141563279281676557 -1.6664835124401502497 1.545394538103803006 -1.8622566177306523194 -4.4459078158710898521 0.79611809437868286121 -0.51738308214868611312 -1.7009998350720574312 0.50470879452826111766 2.6822402529717921382 0.53713633241016944808 -0.33840610540568560882 1.5124122434742348631 9.1481956381904812048 -0.38907296199793578451 3.8292371293048259595 4.694990053793542728 1.6935356527551803651 -0.07368482190933431375;-1.3910747235050917592 -0.75774737545145520734 -0.28335961421109651104 0.0081510858089378791097 2.3843529775656238101 1.0468284540353278711 2.0433511492562752565 0.20741654637733991651 2.5386025809045049684 -0.79795530668078151759 -5.3336760431593708276 0.29764608123740776691 0.18928836552400710169 -4.5445949454477787555 -0.68381653998942382167 2.0610090570365202645 3.028988256302723503 -0.20220297125165173635 2.4371557054196788528 2.2699420251049464703 0.40136506119846959706 -0.52989828913436176627 0.48160673538461545862 0.85517470057245459358 1.0094852295505849504;-2.7126740397092858892 -1.9485409905074757564 -0.025195393557767870041 -1.2159033991899659277 0.27599259523471209032 2.2736724386160429567 9.8949648087008377217 -0.70691816528642736905 -1.1761928965196239982 1.9771649861178761665 5.8238294687522929038 2.08927253511021771 -0.45403800925067216987 -1.642205342034053217 -1.9821998778451030976 2.2752659059723110424 -3.7135831069443856478 -2.5809454407415999277 -10.553236938543046008 6.454518669749503168 -0.47794948576721735245 6.9850630547154279881 1.0908478302069848365 -0.87414392102326499145 -1.7634598096160236658];

% Layer 3
b3 = 0.41956383057296453565;
LW3_2 = [0.29661959645500562965 -0.16102878282414986866 -0.16827195873129602299 -0.26960054702580321662 0.32590521355515678081 0.55104466143289931868 0.47482170764242181971 -0.083151463383196788648 0.62308601037941424572 0.67398700475383632735 0.24750781035222876869 -0.25827876089414014693 -0.082707532274505307646 0.29244684496992651157 -0.1342994297780283619];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
