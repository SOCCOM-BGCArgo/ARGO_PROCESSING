function [Y,Xf,Af] = ESPER_tco2_3_Other_1(X,~,~)
%ESPER_TCO2_3_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:53.
% 
% [Y] = ESPER_tco2_3_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [8.2176268654565519;0.1792198215215039;0.4985358064026631;0.91540749985065817;0.79555986854090133;-4.3898251250960572;-7.9732522618045305;0.031131804834360004;1.482454676768729;-2.4220540883014685;1.1227220440190451;3.0312700363553975;0.19483269909903528;2.3664939184784588;4.0107253538722167;1.4556260176387332;-3.0769747768316247;5.4819965299097841;-2.7503136218882522;0.27114499590982155;2.0995418207008076;1.3988254417461639;-0.60064863000798252;-1.0901783571312902;3.6644004918888178;0.39206973446711818;-3.8145446226240436;-0.60600135084620088;-0.15468167078824702;0.65372419345121535;-1.1769956360946243;0.95717585596501431;9.7348566954613709;-5.9925286453833566;0.72669671053194018;1.6375087254414191;4.0181831534861372;-0.3286716463151455;7.8929358763795658;-3.4450767488146776];
IW1_1 = [-0.0096935167477326823 -0.20910322235073098 1.9440127474572944 2.7083324833364508 5.5930383567509159 3.9563146686393669 -1.8772024816018933 0.88336704003886213;0.0029470966293986024 -0.14191028872058148 -0.17725752651574161 0.24003549504904953 -1.0559255365770113 0.37012656948506573 0.11856078701576249 -0.14974783667662223;0.075948115577581563 -0.078381523330125769 0.12718637269556668 -0.073170595025401589 0.064215573875912563 0.47575028029239841 -0.17841112941801637 0.25299935865240869;0.24068748784004898 -0.98553315687624854 -0.45342421288452539 0.84539480064833139 -3.899294047022595 0.87126577144869632 0.81180282563516037 0.21375836095066333;0.37227832791907356 -0.33925681860733381 1.7760981066579231 -0.20835512598078026 -0.66643311723190435 -0.26793432222125352 -0.31381043927098839 0.41527196400141131;-0.26998424818494121 -0.038962554536902901 -1.2870773940590907 0.37565106812161408 7.236096540551733 -3.7045975695942865 -3.2113061824345732 1.3660512351473297;-0.21538818482878364 0.37743175944076696 -7.6956658867169283 1.8058386318060144 2.9495222875585818 0.65279157690551237 -1.7864935836026448 -5.2125512897068056;0.11448128918548721 -0.30304307047759033 1.0731855154407319 -0.098533133908691992 -0.42507417341033288 -0.47939538382651675 0.18847120219142455 -0.025485390766317676;-0.39312794581352395 0.69318853583682649 0.075319468466921446 0.1647471592664648 3.5347382861805192 1.6771874966700029 0.27665440426137361 -0.0084680652865707622;0.46779763676172686 -1.3933584767037579 2.1798660084221693 -1.4981898571998324 1.9645164058263225 0.71920699528886711 -2.3811158605890497 1.4623394952841504;-0.7355788574285328 0.010359404651517959 -0.37966352264805769 -0.1731195178160799 -1.7657539657794556 0.5733135647237092 -1.2918592753687279 0.41997918334669315;-0.85684881559308035 -1.320589577627556 -1.2106655571118123 0.05637424860809067 -2.650719742790034 2.4882566496076195 -0.43077013669113379 -0.065601000356455913;-0.026521985587976804 0.34702830154866898 -0.95220723603661561 0.079754491268925393 0.43159492525955345 0.55596907211389968 -0.35113593212417399 0.12121642769659728;-0.101326494333411 -0.014088953034202063 -0.033347316633286293 0.25316150613366417 -1.7314837243683254 0.47468412568595569 -1.405799743061626 1.7880447123002272;-1.2728413670883685 -0.68778182027619006 -0.52102950427022698 1.6686925802631074 -5.1312309766750648 3.8656251693451669 -0.21235990340865829 -0.5304467082779547;-0.41313919538692129 0.61439335023427899 -0.023191092951489887 0.31035583288222757 2.7270753725261936 1.5806848548867516 0.66984764243486028 -0.23430642171983737;-0.60428091840298681 -0.78194147536072922 -0.018703402909362555 -0.89616444349696212 3.501806771930994 -0.43994011630953361 1.1310536598242817 -1.6251614982187759;0.27291668946108449 -0.39112185772889907 6.5624178983414687 -1.2421763874280882 -0.16616168625643307 -1.8172108946507362 2.8381745055036909 3.3912596860554323;-2.9500752441284828 0.16012235096444841 -1.0513162713548245 -0.27273901138505313 4.6475010752555113 -2.026280658926265 0.9551034085234632 -1.843453623482934;-0.11566447767537671 -0.53588844854734774 -0.43715984564880483 0.056612435180660031 0.72460584613388535 0.82927990565226939 -0.13364792984238047 0.0063011856990419926;-0.055961441022619698 0.00090150163529464163 0.0060342399089615218 0.23722638090520176 -1.5599062946822553 0.32586500040070293 -1.2693392880750101 1.6171049873957712;-0.2382138193389382 -0.40542540114023212 -0.1202745479577656 0.0032273392053992467 -0.27663045454815516 2.0754075222509671 0.25757024065253364 1.1575366338421482;0.076651384950571888 -0.077082165161887456 0.0021215894140287003 0.083001671089498602 0.5571136398620441 -0.95974894534443211 -0.23658557830957794 -0.22256455652118778;-0.44014026909374671 0.37299594861439522 -1.9851739801664954 0.25146001508014398 0.88753079208061503 0.13712089498680249 0.45684097454254569 -0.56531235146057812;2.0161130649161589 -1.0230074466125916 -2.7581991578744685 1.9596700570350505 -4.1127792101048639 5.1939326687949192 6.9484440232288875 -0.44107676547419256;0.42561760844273899 -0.54465232754989557 -1.2456377023058267 -0.067928435146689795 -1.7043465933409283 1.5462588368610837 -0.34530960849920234 -0.56944995373551976;1.0635292693451706 1.8356176999894374 -0.27229511237688059 3.3175934973791561 4.7369864557688697 -6.211248605772612 1.4633476515257486 -3.4287465207185122;-1.0309814936942496 -1.1630637765449945 -0.77879384306632671 0.080648888199131602 0.78434480523837224 1.0377510217677521 0.30686610119348023 -0.49753961367733046;-0.7182726680970255 0.22176239479466428 0.026127644788961499 -0.16731272928769778 -0.49571598574984371 -0.59752919818378658 -0.25219477295279136 -0.19470780527188042;-0.32646242971694173 -0.55578856242265862 0.29423314469251732 0.182866703475009 -0.54096267612500748 1.0661798873176749 0.44675752192607504 0.37410177038610815;-1.8229887854330789 0.69103319480111769 0.84930349309151154 0.89200936348862725 -3.8624016767833944 -0.20224439404734293 -0.17785621764963999 -1.5023469719049802;-1.6171597336857981 -1.3810408166742758 -1.0096562342688407 -0.34583001366389393 1.2670020478145176 0.6771675707932171 2.2567559520100335 -2.9238612599452822;0.94799199311635762 -0.96155479625444373 -6.1105986389282325 2.5652598427946591 2.6358698231457036 -5.9823082816068736 7.7725636385168277 -3.7904754618643168;-0.88399821201516438 0.75645899125153571 -2.1449397330357569 1.5813387735415092 -2.2425592705303159 -1.0677070169774057 -8.2809526639994644 -4.3268155616733672;-1.3105875265849587 -3.6471241490975297 0.89635461179432296 3.3164294145793294 -0.63936354728683342 6.7324222770879611 7.2324403117030949 -0.61134735067671175;0.11693281932304811 0.83667199857967867 3.0382035495911137 0.1261792733810054 -2.9523029243370202 -2.1819073531614013 -0.36650138349762146 0.84961574693031205;0.12791703202921342 0.45175581397422748 -1.0340200238130712 0.66990760876776478 -0.30009850249443693 -0.71973963359539117 1.5047000093380258 1.592691665045094;-0.29641458615864302 -0.34653660909834916 -1.6119868033069786 -0.43764881106835413 2.8743712941816009 0.80340222287481211 -0.78039344733417815 -0.28859749936062029;-3.1630613150330231 -4.5397878836277012 0.20160318377798311 -0.75320572322648871 4.6779645208150029 1.2224792305336671 -2.4288030824563127 -2.7376401836668798;-2.6844945478710556 -1.6846540719883651 2.2166459423616698 1.6460103715568066 -2.4492679658852641 3.1451726455009266 2.1030524498466523 -0.5509676890266525];

% Layer 2
b2 = 0.34528915310678293;
LW2_1 = [0.12877504521767566 -2.1095833553397405 -3.8778983799445332 0.11849255376101794 -4.3198559418982505 -0.051040872410465364 0.12533607361144081 5.0745958315595026 0.40890561222237604 0.15627894488431887 0.19659369480649322 -0.068932273546982628 3.2780156970900389 -2.8833386879105332 0.035545275347983039 -0.49558870980981917 0.11435754821741137 0.1509840677854703 0.032609916504452878 0.95302036755518282 3.5656560524062986 -0.3778729141355428 -1.6324693483035113 -2.702458857157076 -0.010123935305216809 0.17144402442979831 0.017938306051844648 -0.11753214641485733 -0.75661630532620594 0.67298023019928943 -0.06322887690595147 -0.039277037676229205 -0.079266444230473423 0.028500546503428037 0.013421683871317308 0.097632436008389292 0.50142440923149945 -0.17460392526759416 -0.21074766827514535 0.10159857231886812];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
