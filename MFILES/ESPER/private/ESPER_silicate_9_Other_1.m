function [Y,Xf,Af] = ESPER_silicate_9_Other_1(X,~,~)
%ESPER_SILICATE_9_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.69971691343187691903;2.5962397027865105059;2.7910116464906042921;-0.9898875460237553936;-1.7198312394659558411;-0.85815463216350595932;0.81329931701152491375;-3.1101530661976934944;4.5618077324437376063;-0.095034445218633439856;-0.76531733932452461477;0.23424430991453362716;-3.1983529383835849202;-1.665497963512641455;0.32807635586603678401;-0.52940819362463586994;-0.026507182409870464618;-2.8007709411180630177;-2.0304200701780588112;-3.1436365216002637446;4.9227162312146637291;-0.90869176094453152359;-1.4126037572168228529;-17.609809326284576514;0.48001372968608557734;-2.1294226749826075107;-0.8112197363355939661;-1.0713460311682880821;1.4053822469274921403;11.144958732268738899;1.8763996786022294483;-0.36739408690445168881;7.4494809859598474233;-1.7478209972781739712;-3.7821543152161782864;-3.175517487827738794;4.1396901585922769584;6.3526003518163971506;4.0688888833561920322;6.3190981730708992714];
IW1_1 = [-0.12580258482486531002 -0.047729587747473808945 1.0986302393071996075 0.035028174243432540214 0.93688789247884463052 -0.29274007151758102419 0.6010238006570612912 0.091607594707243264476;-0.80591902132921422464 0.74363482449279882935 1.9990686615096908696 0.95518819472143690064 2.2175923806360953172 1.1196369688029910172 -1.7790477820136831877 -0.63705824895816420828;0.23672434888695587096 -0.35466194799163874851 -1.284391263389292881 1.2165590955188496647 -2.1470025527274958499 0.81423838349356347788 -2.2112557411974314014 -0.78950314839402147005;0.13390554880255881032 0.039985984645656086345 -0.9783492002881490901 -0.17989486891366229804 -1.3170835582793167795 0.25809895933754672948 -0.64106776488171479667 -0.15772239897025816524;-0.80729842390938910679 0.66163939744664712617 -0.28853502481438420002 -0.048940371258931518461 -1.6962465818102199222 -0.63276141262570084756 0.93885843606009022899 0.6558625867345601046;-5.8874976612157858824 -1.3885068902144850345 -1.4755941171912629883 0.66639109697633658325 1.6944379859412459499 2.3684557706659061793 0.94810269829392856966 -0.79745860700620896377;-0.029353778755970737907 -0.0037485741333597630796 0.91508315737001810763 3.8472370152376256236 -5.0087018743436164669 0.23301701158835089189 0.69327059928180467807 0.42330930464245142275;4.3189468982236549621 -1.9883691214138523584 4.7125503339384575696 -1.010947480830462375 -24.242728564580801276 -0.81965065803088466012 -2.7119051562569742586 6.0664382765483253479;3.7969954975084712068 -0.92754909100572535685 0.47176859623938077748 0.85591078838972078913 -0.6602167728090367893 -3.6235785908247568621 1.3498196544937195451 2.7867214884970654687;0.20788779130014017893 0.29800693633416769357 -0.87898794734368967951 0.76795918589302303303 1.4380067649081276215 0.45280939096396721766 1.1480205770166078683 -0.0046053192118274202671;0.013547218495049424825 -0.011764298882481549063 -0.91352166507816656704 -3.7282977151290648266 4.9119615395933253765 -0.11896705418935936416 -0.77238338170868947596 -0.52967068417089646637;-0.050056501429938796144 0.70442678993580387647 -0.8232201493331972042 0.64105090384822938088 -0.74629612568754732926 0.54837849222392542892 0.37311765890153592018 -0.69173668540655286474;-7.0182882850907857275 -0.87890512127959297128 -3.6499557421907611321 0.75493292634657738205 -14.183017618635723522 -2.7407816058963310191 -9.4083047625539677483 2.0428368400758034618;-0.49236965722496323083 0.094374540180691440794 -1.673319444394518074 0.52213540887495191178 0.28456034849827965827 0.95133247436206402892 -0.96622136734846586492 0.2620294288864681298;-0.17725571371512990893 -0.018752925598340259433 1.0040848673591920015 0.54974819193226320824 0.12253948306878556518 -0.14543283507236498542 -1.338887644486580486 0.024586783801173413277;-1.4187572115084989832 -0.15183889350785539918 -3.3453043413437866249 1.4097429327011459232 2.5067171899433846605 2.7635438006127173161 -5.0220119833247567342 2.0525735128326609846;0.2716935981137543199 0.30868189667640194562 -0.97121702638956020071 0.7446992923029599476 1.4219749455010786132 0.48611153778173460394 1.1101778624693059427 -0.016430871507050859304;-0.82643140302609408021 -0.46324858259893242352 -1.2839582914172660288 -2.702535786499159709 -3.4276444428436541045 -0.93430362062322658279 1.6014088215514126201 -0.79545418338659912294;2.7165255611666809799 -1.0321604543266098553 1.9204577454176208207 0.090416261686298696199 -15.640376485070909496 -0.7756544110105654255 1.5676473326838149536 1.9478600469428248854;0.67810136998782433171 2.5937286170027058496 -0.0091320157838318209015 2.8475024070859431546 9.8550217336862413475 4.6589759778866213225 1.4003330350283313965 0.21986910758231342777;-0.21103732890013196521 0.05321726052354475156 2.8579825716880531417 -0.98341743135910852924 33.870409223299716928 0.91974950919328157806 -3.9127015056924956404 -2.2558737904879029301;-1.1015030932821539 -2.7130989600510146964 0.052861421775595135442 0.64173539407966839754 -0.082686305055033840206 0.43189884357849678276 -0.81165641018253398276 1.2315418691026971398;-0.38342748986684122015 0.10815116756643285145 -1.3062011256165597661 0.37958007824280043385 0.05332363305731138009 0.67560678030852983067 -0.57312571105110377001 0.16960062806191444906;-10.817182067823990721 -7.2406765455911870077 -5.3635441371026644219 -24.844179811119762036 -4.1716899403558276305 -35.822026778521063761 19.47278602556312066 32.700852152951007668;-0.54600685685976568795 5.0425855856009516032 1.0593043450099504099 -0.023087996812329820984 -2.77260525965137683 -0.23224409959322267483 0.86649613884385423557 -0.66092718147491502645;0.17591780989747743402 0.3812434444313576587 5.6970156954534321159 1.0300763386102520514 6.3197515991263655266 0.074407439195939645282 1.9281280520436414605 -5.0315114306763462082;0.3875698459329044443 0.46798455326173388213 1.6277951560737080605 2.3010642610726206314 -8.6193789197511225808 28.588167591382575239 -17.016998762639893528 -3.2350791840164379032;0.31520946160001267478 0.20119132653325327853 -2.1842268970758622615 0.79061125600358661547 2.3696679596432934645 0.21815444229584110558 0.70124411722802715285 0.192386648398699317;-0.14629177563095380199 -0.021023505325178971914 0.85623672513679283114 0.38079564603165833025 1.6041396540010917082 -0.1879624947981561045 0.7718712475939522033 0.22700711531014586275;3.2219228513605031594 5.5924476738902413331 8.4755478319271837506 1.2836396917013586094 -0.26371525097770637247 2.5316993880006952722 -0.7628494900542129864 -3.1219213971986978784;-0.15971926207150230481 0.024939803241273213186 0.82443230346773932471 0.68014852757597132893 1.6636349384129838214 -0.14669400937382612304 1.0750720304921392856 0.26673367128682889948;0.15858771995815304501 0.05170381145538618245 -0.89369406061506562189 -0.54958348329331530024 -0.0049339995457957424793 0.15208352079155812442 1.4025253107351338677 -0.034980337987657469934;0.05386335336836386295 0.20010271051593228608 -0.84539567806106996617 7.3596028478509394333 5.0099496935411673704 0.98383544800244915329 -2.0759040204911407557 0.94367197939616598301;-1.476373270510064506 -0.34399350628995262191 0.063022628538574723689 -2.0955232275458359759 -3.6296387088724699765 0.080751248818007825836 3.3785980225949256983 -2.2464182473881719737;0.36288183708118443294 0.13310224069758846976 -4.9502843260473294862 -0.38040057896224344081 5.1542383423976358969 0.88282011921273650934 -1.4289894982445390248 0.81826294924458309321;-1.9644659409296711949 -0.30277249073751499875 2.1119661154372666445 5.0560014112055577939 -26.271109369269417755 2.2298882190969711026 -11.345947921544116355 11.415333728272091918;-0.094321631104295436399 -0.44918850447128516601 -4.9626818739888554077 1.3090599091807915144 -4.9403793029661651204 0.48757676458382859241 -2.0542336916521248824 4.1957094350001140626;2.2447330412339416839 -1.4068762744594360825 -2.4775903607293190412 -0.44990442676720654447 17.973192401565292187 6.2112065785047070321 9.3403990994058556652 -14.599440726749243424;0.68719627703002861274 -0.57695668417994738775 -2.1108050574364076724 -0.47131439263316765587 3.5636656901230381322 1.9228575202937141508 -1.3814422528333103468 -1.5339837314264368473;0.80387591981062511692 0.64198086096354223251 0.27242201593960302386 6.0407497316210685412 -3.6825466531284067884 -1.7300906115882466185 -0.21767165567844026786 0.2870136490588138245];

% Layer 2
b2 = -1.0585239646866619889;
LW2_1 = [-15.782079351386119725 0.2972363435005495047 0.45623674875591174738 -29.37566894430533182 0.61021612603975972089 -0.039713408219938024779 -2.4917377776730220695 -0.037823452042119190541 -0.14217640348735385847 4.6813245542348376205 -2.6717892947623651523 -0.68931010247482893405 0.020924037016101688924 4.0852907771918971491 7.7112959464355848027 0.098630124453443518417 -3.889369244783846824 -0.19851262778614839344 0.083737454643985423375 0.070831262576419251609 0.057641262680822140385 0.076509145586315371879 -6.1565855470679187178 -0.0071887275452753012644 -0.045299993726586322562 0.19880384944521919954 0.022705067386860317002 -0.87967599091682058265 -24.514942919245488184 -0.048527008578549406248 8.3892987204006175261 7.9056582895942009159 -0.16962251625892463269 0.11327195592941055602 0.63106598389846946251 -0.031354680199285084319 0.22388723479815636486 -0.040562224380672029511 0.74468415614053606877 0.13190841845064074644];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
