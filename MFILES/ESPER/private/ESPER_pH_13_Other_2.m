function [Y,Xf,Af] = ESPER_pH_13_Other_2(X,~,~)
%ESPER_PH_13_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_13_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0424721998924879607;2.9313067285396541273;-2.3972092783013074779;4.8519406094960846332;-0.043081900758397052853;-1.5219021238449277345;-8.5937194401060903459;0.94575834553255555548;-0.65327443519052741383;0.88581297367989497715;0.15107468533527171339;-0.72273423934733893592;0.16908804446489755779;-0.095199263663144573222;2.5852959454565094255;-1.4140272016150332579;-0.91226854776072074937;2.0274734155939220237;1.9676480884590277221;1.9391297450393518709];
IW1_1 = [-2.0212634867809673445 -0.60322925273778904565 -0.64056134860908253703 0.29350907185537400412 -0.50586239141449984569 -0.2304394004017727704 1.2225863982443556655;0.57732764075846665364 0.71265909387482262449 0.44596587403698323415 2.4095480771463981817 0.62951296637452835991 -0.24059640774237481264 0.31410583472913466974;1.9431401703975528239 -0.073199350070769830801 -2.7790220762190038784 -0.44433355111077599275 -1.8006947963789869949 1.1650170469258733785 -1.2395979998499326857;-0.2466782842516589136 -0.25707150258181599156 -1.4348921561829675042 2.9866780304914812838 -0.60933177562261897631 0.83107297001056923413 0.20141407792723922676;1.08485001482220067 0.21576113319395354151 -0.60148897197265072112 1.2431557100255103965 -2.5272631989442162492 -0.063530467747561700231 1.1702887467750313633;0.26451525613144205584 0.017218851209036867972 -1.9079030221016604063 -0.55869317085150072 0.37989594082588229451 -1.0548059564208609462 1.267459886734759511;-0.08377310912829898093 0.16233333847496508873 -0.91188577622816591184 -5.5240747127213403189 -0.31500158797551458534 -0.7417513249795886221 -3.4674952722876510869;-0.29029648904133814602 -0.018310761507173346774 1.0697590360080193594 0.92641355233826838678 -1.1787825208380549036 0.79340256504407913329 -0.40948656244786313385;-0.20527477115952974529 0.39639430788176110987 -0.17445843710994363152 -1.1920589688948890483 1.2412886875801856235 0.99400933885733011586 -1.660413813233130309;-0.12809444752534715484 0.6652362879905375781 -0.457572431982398109 0.32635082237529833282 -1.4409300966963700663 0.58748495548551737944 0.80784357328679456955;-0.021761016511172320831 0.5165750831790330011 -0.38831337720377967493 -0.81022564290796739161 -1.8245125417969048076 -0.014260084919513620755 -0.75597223910667610269;-1.8968829708886585372 -0.1610167555806430173 -1.316405203253942835 -1.0734488652832920863 -1.6966213042176523373 0.1235212807845601779 -0.84395205557472807723;0.091613403037528517991 -0.80626207643813541104 -0.045571219879126594055 0.22603122737670988673 0.14093190626187268588 -0.12299944047593681928 0.52219744156238612209;-0.14800444948146210256 0.28404364721243707814 1.0899874970715406342 -0.25565291210414842205 -0.57610806110521273204 -0.8110334326151794615 0.84040009344950628023;-0.06754345322852293998 2.6513612165586279978 -0.7347295666098144773 -0.34811151992201627703 2.6186409788460491832 0.97135925731743133493 -0.82118424976063808529;-0.43989230457962047449 0.61828551385575603039 -0.78152160571254625232 0.033895779311466457673 0.99564374231288910178 1.2261636964291944274 0.1021314186076676539;-0.066255007058093631778 0.72913968012283192355 1.3751893706555236019 0.99259243898500171266 0.75570833522983760222 -0.56427546606674039431 0.75116654855598907758;0.032887684020185506406 -0.03317538956778578324 -1.6778541749442916764 0.94779800131134539498 0.67152685038993720212 -1.0605153697486071618 1.8307824192117923001;0.41918802981426134258 0.8022006418082990864 -0.17037032825003198266 1.4122842210491204362 -0.16555941944151336687 -0.070070432354719325296 -0.56753996246504656575;0.48228608608722101092 0.25460098289563681817 -0.21176022281040271511 -0.063517439072626469265 -1.9943583164542817432 0.77675918440998525938 0.79005217464479715606];

% Layer 2
b2 = [0.43401601741697382053;7.5958563562273289094;-1.8660200201216936566;-3.2076128223112383431;3.1820223952639916654;0.85222191710068928572;-0.58566565610321330571;-0.51262940373523668836;-0.46056901238965719525;0.83042506984028297001;-0.2784031341719792052;2.4928322325140737092;-0.31807655706051651823;3.0471529673184822862;-1.7760534375761078962;2.7882305092546650904;0.84404796764361667005;2.62280461207272797;-1.319297480832573255;-3.3923767920461833647];
LW2_1 = [-0.6799869548270283115 -0.36286492859562458069 -0.1515273771813078485 0.033645547599069403066 0.14390312700191543183 -0.34749963154464119652 -0.55098648924697513074 -0.82283148356968494053 0.20311551791291945768 0.49048363164608133058 -0.61818242207293472301 0.0067284566395196775124 0.19317187601214766413 0.73429226972524663797 -0.023919743178512645893 0.56148341454493855274 0.043586974765825674261 -0.093303270168320545652 0.5706782927559698182 -0.0062178483350166131871;1.6904636538556114811 -0.75393134751818979833 -0.06428491852543929963 2.2773912474644877335 1.7204976899002424329 -0.48681274707795224588 1.5719872686462581513 -5.1702763713708987936 -3.1416340753115470363 -0.2135940211500640673 -3.4433576665553360385 2.2571961619832556778 -3.2557822566515191021 0.29642975173443664172 1.0379390520651454732 2.5068531361578956229 -0.19979814910708992848 -2.0999490218303549227 1.3024166588129097999 0.13949303675749474829;-1.2468069999020165994 3.4889750827354357732 2.9042712112513977551 -0.74522191070698795556 -1.843014740950705832 2.2700493485166788332 0.90579525893857326668 -0.8589413603442754841 -0.33900858997274319062 -0.38136706859755870047 0.50816402789040182597 3.3410543002750165975 2.7177865184579297342 2.7313505047646371438 -0.65144635325251420976 0.55807190447552679213 -0.45443843773776831929 -2.6912362983424999996 0.56203435720851457891 0.94257686094737880289;0.99391512120169411837 0.62780290509959313372 0.20876245288248859722 0.57981223772421752738 0.35392786921630037256 0.58335305812611559784 -0.39271429925124234916 1.1518805736989294886 0.40922759058801316812 -0.84957886203579713325 -0.21567870629377230984 -0.16082154236352219634 -1.0141895924131343332 -0.48319220247850247496 0.34366392324322325713 -0.77360688057185400535 -0.53422991378786233163 0.72453557725978534609 -0.58091273243050689512 0.13726655148411792684;-1.3234373112661539373 -0.023586413871741197107 -0.34856616729149170197 -2.5553525506432013259 -0.10176700912710794078 0.86185810952142594132 0.1909706719762175875 0.77974964342002961448 0.14190002783878591375 0.00043726569380473680193 -0.46173789277997545621 0.036596187497185135584 -0.89084618251604141825 -0.086669569934332460481 -0.42137505862973845261 0.23289161459106702545 0.37966084842784164621 1.3135850488206386455 -0.94207358850689137952 0.17807561507733257744;2.4136816336035091801 -0.4901598224454839503 0.19328843656095215375 1.4246097541298701206 -0.029190997822270570855 -0.3826355226642851326 0.99484592157238838084 -1.5426195390217984915 -2.4170858036872626684 0.12758840956809056055 -0.12531122391415916439 0.093807950536797440888 -0.84720500858123704013 -1.2048291804365960367 0.89650629322258490461 0.98641474378433913195 -0.46087366803720819508 -1.7931189096127759797 0.54249167690682420506 -0.12524851316242441301;1.8063675437022843617 0.20019587992066964488 -0.17217473616160069994 0.79613818417260129312 0.31257638151030814333 -3.1959054813138365603 0.058995279148693346993 -1.2066284922891516995 0.78365542863565584852 1.5264327133263353442 -0.69968101701543639059 0.36144722477478324896 -0.4790230966148478764 -2.0145541698861517688 -1.7366859315768576888 -1.1206051165961958827 1.5594034754450625258 -2.9093941562400473799 -0.45371371644894875619 -0.49922937870269989968;-2.2867158518618824203 -0.23055561417388331646 0.071422437162444132874 3.3800334963507894237 -0.53393896296473741803 -0.68655403709950280078 -0.90251714032569574364 -1.8700097733229443797 -0.045681853801962039874 0.93825192100046550525 -0.6028388496508825245 -0.1060524549237878561 1.1989452213589126828 1.7191036072430130321 1.5777162049925332887 1.9133008231837957958 1.5977206755971087304 -1.0122859683676668219 1.2421296250359199487 -0.53557898568992501342;-0.062023091428905649525 0.14527192723444204425 0.61118929087960693902 0.56449496199049098433 -0.79125392236993219441 0.91001502567369552121 -1.7178489214040164601 1.0571592593402472371 -0.25686493189212761257 1.1081693286356726347 0.11334403235039636204 -0.31402402390496186868 0.76900243887495556283 -0.1262079520512812969 0.20918595134747094977 -0.58646391891384708206 1.4563042810546042993 -0.057104776118207412061 -0.2860698926043158119 -0.72929615356993771069;0.55309964279241696783 0.28741454547384343021 0.15216914467246539511 0.55446520375284114035 -0.38806678932871813137 -0.14896277762612819551 1.7947711677474640357 -0.41483728791783902601 -1.0230118849303180273 1.3173548731965993852 1.0540179315040463237 -0.21968136803559418224 1.0286078515992720384 -0.11268469434090365444 0.1177450705630524036 0.95843969741917622862 0.48496846085953893013 -1.4056887453880553274 0.023382080618405950978 -0.4531532652340858891;0.036956218737465157398 0.43131236767599329118 -0.034739075866542061533 0.052259737987964773043 -0.083239127097934323407 -0.027837084974263539422 0.04415858896448437293 0.16072481960035633897 -0.4705978246539013754 -0.017778148661329450098 0.92419805505193364237 0.028031822508102599567 0.40047481632375248051 -0.36797914784806678989 0.025123190815439410545 -0.11800013877994328104 0.1647168289586206924 -0.62444285360014362141 -0.33125214761510857198 -0.23198984978538916835;-0.19518946601472389468 -0.25565449004414442236 0.48689486614135107923 -1.9337819822344959331 -0.87131883574147106497 0.34250252381398532675 1.1563609660731306583 0.47599659399572769036 -0.44832474132040289749 -0.31060093612641204164 0.1395061074842590676 -0.038461620695580463203 -0.16035097294239197829 -0.49052534674871661746 0.52111382862557886764 0.49571738869213421985 0.25737698264490127542 1.2064967780971342926 -0.48810177895411932525 0.083890575258096913847;-0.29561895669186954994 0.012316966960535264547 0.66595454296894163182 0.17765562260343994994 0.14905378304593319694 -0.66061801673660569545 -1.9174697353941771993 -0.51870174105053523661 0.093426844894900953897 0.2185972783058400537 0.77478326723847312785 0.33450621089764587257 0.7213558827678584473 0.06106955472388857914 0.31031298750043362356 -0.42864945153082084639 0.030546132702897531991 0.039443270935451760217 -0.058959367765292904073 -0.67651022047537567872;0.28753247435840234569 0.8601623643674173314 0.26930893889619422765 -1.6653916006687410345 0.32070703003664469133 -0.3870333206110739277 0.40257915503392444068 0.0072488077805681859489 -0.26488644652682835634 0.11081401576025103062 1.1455687611513567514 0.29607840166481919075 1.2935495994295529432 2.5014199104116427996 -0.75681375876822354343 -0.10445868254975829159 0.96904945378614693041 2.0639574431321592307 -0.24126524025249057592 0.21113779123234907575;-1.280269242165073873 -1.4691439619246369208 -0.50059873670399990253 2.0553635441326409961 0.54187222992351713469 0.34266028530098580074 -0.8433244913963749978 0.56245943337340820189 1.2955205246697691912 -0.36085097195762211308 -1.5999534041310043975 -0.054520830074391402054 -1.0994462163770377661 -1.4622686555703368061 -1.0486104898483121772 0.12718840760063832018 -0.95130196190864380057 -1.0555978360576450115 1.2833120886911306702 -0.32118323632251488675;2.1065830962989280373 2.722361252147960986 -0.86012489427942984133 -1.4332567853236790612 3.2608334694471352577 -1.8964251136274430376 0.66520510545355771015 -2.4147061700438570142 0.89486659246872846118 -0.57437477562240535356 0.37080973294921709682 0.80443826423743114429 0.94791773023876069182 0.112130806963444421 -0.49572170614634336605 -0.046516205192091666931 1.9178903037005659016 0.021414223272712532703 -1.5298747480887393557 1.6104787342893631674;1.0117462959501100084 -0.79370415245582148778 -0.17589328330337125617 1.348585719995913923 -0.7738312700085742124 1.1112425907878680231 2.3457707853051221747 0.98971527607259546233 -0.58723141227321162816 1.4934620592385099425 0.49717338272457861637 -0.32576910307315171123 0.82638697348457723635 -0.60843397268833776526 0.45121125989799759637 -1.3325658895328520437 1.4962198756370264086 0.71525941367315659658 0.65016819193912311903 -0.71883165569134088724;-0.36985980851739641562 -1.9867797661545716359 0.62566202879241850088 1.7185377470585627702 -1.2576967974519659421 0.18660731337466238133 -0.71063550236501993318 0.18018950235604619392 -1.4941273723576629084 1.0676107494855111568 -0.13538486573201777285 0.63134980283605579565 -0.38247046451296867753 1.7697497588986390582 -0.21758001830701201307 1.1944655569904771841 0.50856868723337811389 -0.059255252647062404969 0.70890311251848725504 -2.3999379965090321676;-0.31819260920309355711 1.0131449414863620273 0.095309659317328543349 0.52890763182676714393 1.5951331623186901787 1.1404998996547015544 -1.3238962391470303626 1.5068706678671777155 2.2305937490786167388 -0.99988163883605174487 -0.36626701733858962884 1.1242016853646006336 1.4722815704943523762 -0.12065765114898152621 -2.4256271537225000401 -0.17869758328251947321 -0.99466900647862632745 0.44569738041421091967 -0.53582543834855533849 0.66203174034105127799;0.047678538832957612081 -0.33960165063449226919 -0.1022840748946227396 1.8223396683441455135 0.092858892730274769645 -0.19559730307921333048 0.52683780434073068655 -0.74104167303774592934 0.17881143606637900367 0.61707290728701447158 0.055956115040176460096 0.077154377679542252011 0.29792238629990719367 -0.21922978181495017536 -0.18294030747066153397 -0.95636663999128979086 0.37235692410598381086 -0.19295040067451135757 0.38689174183286217934 -0.22413171153134225921];

% Layer 3
b3 = 0.80758925214958365846;
LW3_2 = [2.9531851190933307016 3.4628850302445273179 0.31200882582451805458 1.3165239341257299888 -0.79877362002205443137 -0.58989764698735214221 0.13505347244688883923 -0.2533477544350081212 -0.48731910745595796719 -0.90954606146423744306 3.2064438233271257417 0.97515779061131779848 -0.7421921264046850153 -0.7159874554224954224 -1.0948518320409434956 -0.4227425475617514472 0.43398714864524506885 0.14911012760816858003 0.17158503980403566613 2.4716762018135174372];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
