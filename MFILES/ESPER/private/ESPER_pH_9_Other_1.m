function [Y,Xf,Af] = ESPER_pH_9_Other_1(X,~,~)
%ESPER_PH_9_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.332491404397712742;2.5619585175212624684;-1.2093848954565380449;-3.98379301927288898;-2.2114323110716602727;1.687383883224124137;-2.1851516180953263202;0.53669507447469744221;-2.5689091373685188913;-1.6988735728550588;-1.0041326302325397357;2.0299193263876555982;1.5189632670558652627;0.76334242050147316228;-2.5547434959811856636;0.40151974517072042126;-1.2371878504893771833;-1.0931424855966989096;0.5921113663411456951;-0.29018819697456399442;0.33635944330277239844;-2.6782258573828809922;-0.045489283398726466923;0.93268783720191428266;-1.0906632909413236376;-1.2560170336662668245;-2.4507740258332275651;0.56384071462654938856;-0.090073355134165436486;0.2281038397104783455;-2.7688104027589064415;-3.777779871137584955;-2.6015685497390736991;1.0444816071887201847;3.9499431618319778003;-3.112157759232650811;-2.7261591862911904727;-1.6224548612523628233;-2.8635405048731090716;-1.9974550173527219066];
IW1_1 = [-0.46129325782454705385 -0.25158417430712731733 0.68663557556980570062 0.60213087358108097202 -0.34251789389709486056 0.90779571030339756277 0.10265988337039179401 0.84805227048575027027;-0.5228067852987873243 -1.3103772815882301916 3.1170777541860812399 -0.3512550821030633319 0.3819427265448374631 0.63713228636895002932 -0.62474637759455631247 -0.15681834789089266202;0.68365708234700417467 0.57526984947314308005 -0.35813518710501823783 0.11413758457393523293 -2.4695594447859483545 -0.28258537291133606351 -2.5757838379681934349 1.7593507839648065971;1.2022271105640223166 1.586566997670493695 3.0944123372024181506 -0.26035088580799725655 0.94321452478098355421 -0.38430163890961743789 -0.34639910064402856804 -1.0258694660285436751;0.66471476551445862757 0.1406791218012338196 -1.3452502572505771194 0.56849527784894859916 -0.59830119140525406252 -0.47899366726547842887 -2.1450344025422523053 0.60261487468133045908;-0.062825289040936246887 0.45263056088569275648 -0.65041616245780231598 1.4604155863555461359 -0.93297776599403692277 -0.4616355251020500261 2.4106465127404907989 -0.82890087237096909956;0.44195979316765232614 0.043094397017387049698 -1.549579356201837621 -0.72431881246032792099 0.91970738367085425047 -1.0328910716379462453 -0.61721578948204491866 0.0715561669054099736;-0.635849739094112687 -0.42177216445592152771 -1.6992564234518352517 0.054209090052118373559 -0.6356738839594492374 -0.12936245362415155213 0.14356412406531970927 -0.30151182115113700499;1.2628724269264111069 0.99711603325589959201 1.9945842685003922767 -0.074314819049304786658 -0.86658492960955102458 0.89290475620533127366 -0.53709138791620691933 0.60580480572979678033;1.7206837089855213652 -0.90285744469350848185 0.96341894007131556599 -1.6156964235931303708 -1.5714903122369303645 -1.9384358857930810149 -0.011865095211207588727 1.8584581952980705477;0.90461920812410423487 0.731678279669890963 1.0890452924597691098 -0.24174359345513438124 0.23044532404219936206 -0.21984284525796912724 1.039822986761804291 -0.25550063109502613168;-0.58419993336589182142 -0.37369504057143693165 0.35649974648950638612 0.24474080029836986494 -0.17004838592082563431 0.88959009687147705403 0.2147860854029852995 1.1125561752094166312;-1.8770905941353097646 0.99130090141626336919 1.2223544927119827097 -0.0054950929639707764979 -1.8465951589952143141 0.057538105558269582451 -0.12290311595252942367 -0.010485241373022570477;0.49659103192342962663 0.21687385976201059568 0.2614401978969790874 0.2361268705482698349 1.8689346097307892869 -0.53609942582336045369 -1.3176866952805403876 1.1645557643386525992;-2.4961260198012524825 0.97775760281642509764 -1.6202401712201603967 0.25684193095763707682 -1.9339532157688839042 0.6874602147421953191 -0.13327405700308070369 -0.92162981331455229306;-0.73666046504155868746 -0.29032735187967922963 -1.8377346545693844515 0.086995142452222340435 -0.50998737521733628064 0.017751669583013267306 0.013495221059157829629 0.013797212078172221839;0.42364920702201203095 0.28503431621088298753 -0.68262980452039800916 0.33110631078857172271 -1.3915000788350935235 0.073394718668867250932 -2.139243568082273228 0.79324340711486795996;0.51805004924409681077 0.29844209296705037637 1.2043185982312749616 0.066714896874647003355 -0.88943270440912869379 0.35325256702903062855 -0.14559839394429366366 0.17655540673833883258;-0.51171969276613826771 -0.56378168576124232381 0.017036837519188528095 0.71955878716618915103 0.35386539253334353683 0.83802619768453179283 -1.1929734727510883374 0.17766634081269180867;1.5117584381458986087 0.72520352704815749245 1.8532715837452142793 -0.40575809592552491978 0.13440750997147823953 0.079799571043077444088 -1.0894389786652305396 0.99739201782728503787;0.79564916255798556755 1.5943480975603172567 1.2375905843689876118 0.28882013095996605934 -0.55165273833036454487 0.95259706438561375652 0.99624518523595906316 -0.81149302921809052247;-0.067122471309047582189 -0.041015655081068302934 2.0189310187791873474 -2.6736734770783092685 -2.3367768065517351417 -1.6902241016297283593 0.021265539190150936633 0.57545464857782335777;-0.24698797124267329872 0.001724757112714288363 -0.51048598800205613468 0.059673185255208975597 0.21013500314535019098 0.067638827863307326993 -0.6092667615275618731 0.045014705626618911616;0.91184111942159806752 0.40564290659475310541 0.4654642492579953994 -0.29097429484958792223 0.77939349561691850798 -0.14827397556178786853 -0.079851783487251304372 0.53137186818862369719;-0.36291230914191036083 -0.27982253626260111812 1.0355631235466942197 -1.0008465707739162553 0.89580625112920075903 -0.11829160598724211551 -0.8017484140410725546 -0.15869675298716368061;-0.54829887435143775942 1.9111713095821654118 1.016147458362117062 0.077685182679693959296 1.1090128268406040934 1.3499559251300488061 -1.3022953020072343122 -0.13743215958294649481;-0.30134245333936870992 -0.23314562290545617906 2.9374907272081269838 0.10067062980658421367 2.0580710629633944819 -0.65941316580222908428 -0.9702140055438628341 0.61031881824830092054;-0.3589989631074534393 -0.28018918040430218497 -2.5589782395610112253 -2.0126581105195509025 -1.2081905062146280905 -0.31919768172512996696 -0.47696809507131432415 1.0823613718203157763;0.29635392769875018582 0.20383851749686637822 2.597185878255694913 1.787129925719922019 0.025610378925333479594 0.40363502216887603424 -0.094062268605006021938 -0.96276501332914243836;-0.93602093788208395875 0.23996153533117647871 -2.0247068533850969274 0.12434211304337568216 -0.58564256994837238235 0.12423311918039231516 0.12516318093049744187 0.041142834571041266012;-0.18163838816388880315 -0.059884266677475983531 1.7144076391218174837 -2.3281773688649627374 -2.0185788702496192393 -1.4393768190942639595 0.10285843447912799975 0.24209429916922753367;-0.18795058406975068133 1.0850663690190660571 4.0593246502275244225 0.46967455718487294281 -0.10480592823169142258 -0.16459407910561965616 -0.92934681318966305685 -0.80600344399268264439;-0.062083511570035235239 0.50825525086617706627 2.4094411562446569341 0.92120939492787079494 -2.0118121806224089632 0.62081006638335356485 -0.89649113743292085932 -1.1525412868010820322;0.044896185449600889417 -0.58660275009081852549 1.6365642642763529313 -0.82623820003092818265 -2.4638262800703372157 -0.65520906563146208423 0.79428716763633278042 -0.0082848636950493825815;-0.23519770322168598309 -0.21409171835410689688 1.5221729727541795096 2.1773620081831723816 1.9409751787437494741 -0.63380423845432232177 2.6191770970589378642 -0.23491074585674898145;-1.5292782114488665535 -1.1874486099158068075 -0.15095265513795227963 -1.3048077741924357653 1.5508433955218989819 0.15507431560859075148 0.15755903002900553678 -0.31225428161798796101;-1.3364272060676258835 -0.56396335376658657257 0.77525054277149174631 0.10625084268570922363 1.2422328437643013199 0.01796003552480007065 -0.28317457556343816893 0.47066621569269168068;-0.30561772813100368529 0.50956988822172866183 0.43368880094643852408 1.7354313686677105277 -1.2119560109330380637 -0.35391778986912786342 -0.6388443973619550853 0.13743552049131246839;-1.2652236399732867955 0.41703410531794909977 1.1359199475441048577 0.99943314816154005253 0.031264887370122847188 1.4471064584488366744 0.1991244689267083201 -1.1957422505932220336;0.18771537445397049049 0.55200631366017383073 -0.7563806757842306272 -0.89496852262249315668 -1.8788729818158800278 2.0356087324652114567 0.19430123456506828705 1.4203151017150434932];

% Layer 2
b2 = -0.88041535551044980412;
LW2_1 = [1.7109200633887455822 0.098611420462035928591 0.66421726200930186756 -0.29076691457797260165 0.9346881301163305622 0.49868637325973846908 0.57653219958286461289 -1.6143064115791811997 1.2180747139600389684 0.14318216161005437037 0.51454302540692020695 -1.0058971362890545276 0.16213437547716894049 -0.22093721557106640874 -0.074542673556616451114 1.9726019413527104973 -1.7774880082611497212 -2.4081473618066771003 0.18006610409896875447 0.27811237152349094215 0.10401341844985495522 -0.6554085908356855894 1.7934098145386185852 0.76995417560092038745 0.33889504078648735597 -0.20103005674652285606 0.37270887458177803797 0.55832959379173885406 0.61297123657570018462 -0.57860909193075682477 0.89101128707194432454 -0.41070835714306508368 0.8245929428889847701 0.18739275883933539935 -0.36093719516029659777 -0.096494325803660269125 -0.43848835858606244331 -0.149886797114157172 0.26188473195136030558 -0.086009922294522964115];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
