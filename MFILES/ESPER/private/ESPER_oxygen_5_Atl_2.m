function [Y,Xf,Af] = ESPER_oxygen_5_Atl_2(X,~,~)
%ESPER_OXYGEN_5_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_5_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.03;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.604229607250755;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.097255305385641879767;0.56207110341529542552;-9.6966207969789230958;3.1286535194688478434;2.0198857404571795016;3.4879237588815223958;-2.3608629207335818379;1.9984222930230433057;0.16473800106900005069;-0.39833907543465774115;0.47817536721127112953;0.99158489182205866719;-4.0206125645334553909;-2.4235908352580657343;-17.814446514676880895;-2.2854945878050787478;-1.7886141872113017204;3.9907002747406083998;-1.802845521233051862;4.3388686146114787689];
IW1_1 = [-0.14781755251234715565 0.82421628543797742505 -0.75085995385383641487 -0.048914494317702152115 0.69367313673406938435 0.39943341947619759313 -0.016044991203716194722 0.32249828883687681191;0.342804354778385445 0.22873404703440167185 -0.23194272675586813381 -0.49984622338150885845 -0.26150769491761083341 0.76256173640060309626 0.0032111722998980074539 -1.0141313396903672839;1.0277095815592305339 -0.54705454222098648387 -0.36048449847969221693 -0.40662698469865560247 9.9068335293314646606 -1.2482148692531951362 -0.30904939241040996212 1.2201332860560900606;0.048895898761813647027 0.14724586584713433846 -0.36860743750913504968 0.15022985093031801518 -3.469456521949651151 -0.10031147781001399644 -0.12195235712832810937 0.093319817590218928638;0.27051483888299659997 -0.28215469898326273057 0.068294611224644113934 0.37599104834003860276 -2.4832250639870561137 0.34224132012482305631 0.19633752556799560773 -0.80933200096760549158;0.40246766190547117459 -0.10225179568358326587 -0.044649502864587367612 -0.39819490916214184129 -5.6311121056498993909 -0.089803359859737905135 -0.21423342893757413297 -0.40631335042541366631;0.15028624674104701375 -0.16782033719683056572 0.35286417463719443877 -0.21672512666778512291 3.0203290466313035267 -0.23900012574480553051 0.28578790113296886899 -0.0024157430343104595652;0.10325908532932522033 -0.50035198335925901159 -0.87321511979633814615 0.92980778487294912793 -2.6366348037763684964 -1.1106172353976850875 -1.1258175157960825796 1.8648122932943207442;0.49437516511192880486 0.12262741001248315953 -0.19836697836317290777 0.0058689523009925192998 -0.53854291247006225163 -0.32002272489311872627 -0.1505486400404338343 -0.95042647848737804583;1.9587824199909751322 -2.8161135595141209009 -1.471271905085639542 1.6923016482014805462 -2.5503874591760427037 -0.60835802934395277752 -1.0128898289339918204 0.75205322950775821411;-0.13237023203486036893 0.47208322922667539379 -0.46797640628162134879 0.061917747231526806817 0.19426509158966523416 1.0948990199394912359 -0.0062033926851012373069 0.03410743697751238146;-0.048598496188271236851 0.15483329892241104453 -0.041115803271658354912 -0.17901100611814999009 -0.2415132312128448755 0.81752888385909272539 0.16547175279336739928 -0.14449984671977497697;-0.4298688910481334724 -0.20338057777031892659 0.89076859200222113788 0.63048239450752519009 4.6913457462636909412 -0.81723307195983951878 -1.0999805788566596743 0.72020403595186766044;-0.45915190510155035053 -0.13337831222342425019 -0.99006979185479770944 -0.50891565192602750134 -1.5684492331064185944 -0.5662929572828719893 -0.23021137324086898834 -0.81547794421261809994;-0.1936414551746303836 0.37928424907686081324 0.71323206365311353494 -17.005991271993757152 -0.85699655963665066771 1.4511119700761672124 0.12108046257131030443 -1.5710152888905006829;0.32640272982641305166 0.33058107387942248234 -0.77617596147215228708 -0.67836985043618236446 2.2037825394207550822 1.8267388829191903987 -0.45102880243356441303 1.0029148957019466959;-0.19130555265333934467 -0.15668744215682411935 0.19454473370884667327 -0.30481889087811869787 -0.54516118908469002324 -0.28847640218145159663 -0.74267573107093431961 0.60515762005555384651;-0.9095793817270514392 6.3408553341874895892 -4.4514831631916536026 10.562134438066030029 9.2704979739975499342 2.8657122201361944214 -3.438870416843987865 0.45876796289520571648;-0.21138182346506484421 0.14652747687641179408 0.40916862660447378408 0.044792699423973389439 2.274971109068122388 -1.418763546258646091 0.39712763862415717542 -0.75238154394128153868;-0.45428361173114450988 1.1741868407191839996 -1.0393205335923061394 -0.4676356978556652777 -0.85287909505085646167 2.7798789448566529892 0.7569233734845676187 0.76380293170529645064];

% Layer 2
b2 = [11.925990347778302691;-6.9880458530077813606;-4.6569164417590265259;12.145955848514299547;-23.60828945981088367;-20.783840505067626481;-3.9617938270575336901;-11.790348443909266507;-31.107991168348352318;-9.0939829374813072604;-25.11416622698576262;14.934849758902821293;4.350174922687253698;4.3246184377548937405;24.141609724090141498;-25.57782635293528628;0.3752004288656939357;2.3310834599630423369;13.128674646260151349;22.2936573995015479];
LW2_1 = [2.2226547342389570971 -8.7321528741746430313 0.21022254419887051458 7.6522496398162234144 -8.1409966935832702717 0.85992408344290660605 10.88126330151317056 5.6421969158962097524 10.404221074732388885 -2.3292918918410592255 16.101433169581213178 4.6092329776351350645 -4.7985848361514564786 7.3779972089451009154 -2.3303312678391359114 -9.6343324491868660431 8.5393298460791626781 -0.33600328160420961376 -2.415212185144818946 -5.9088872214601213528;1.0074578604557264949 3.41061369847998197 2.2073700303098657827 -5.5207084640641896911 6.4200900696539040524 7.0642504195216950791 -4.9601840535948538147 0.020056195084386791577 -6.1478280117920398595 -0.31051841868642182654 -3.2500655015265347281 1.5693621391000609488 3.3911606430999823303 -0.69608440269831517444 -0.39907718610272707727 0.24104303787133979364 -8.3591051250036283449 0.16135864905502381172 0.3241714444610043766 2.8945735630470732502;-0.98723297862047798557 4.4948090984311299678 -8.600114474323266478 2.2669678452792418888 4.301749684091491055 -5.2776706642645239143 2.801283214856836068 -2.109017363161122649 -3.4077299808933587677 -1.6171450101099320573 2.0989782020113647576 -6.6506548939330665249 -2.0560032819727376285 9.8315831932120705261 -1.1482890486970716015 -5.1189974349277553856 6.2329898744492293616 0.093477783446096404663 3.8856534214763756019 0.72620869328295012401;12.155251811819479002 2.0592570884432275236 -10.980801884748537134 -0.82458005151203195293 -0.11444073707530487416 9.2104114404741928013 19.240713869498041078 -7.3540040770344194954 12.579821547836134599 20.400773625765602048 14.008280786907718607 -28.117203670900192236 -2.9377321009675152474 6.9591622645183592866 5.2180790626337332228 -13.381795928703605014 36.441147279484233934 -22.959882826502148845 10.1969836498598454 13.226216059637829758;-10.004583886685871619 3.5576878859958886991 -1.8147260272472991449 -11.252153059664905754 -11.378577369985647394 3.8624837308351960274 -7.2936698691832297925 0.42268208921335870265 1.9666572469560366088 -0.42009910545705436702 8.0726067309275642003 -14.703380096880234618 -0.38539362046583502952 15.063277597259110863 2.3022587909588079214 -12.778398164798838721 -35.125193706988554254 -0.035191772354188910477 0.85451934913125981996 0.16453121139353607538;2.6592699557154322321 9.461570389867997477 -0.12228058620091182551 21.883145929747609415 -3.4239130198991043486 13.993993853694220775 -2.4766727789811695537 13.70200486429683906 -3.9568415260423823732 -9.2349363373318666959 -6.9422731532329748916 -13.992128759578598363 5.5261763279713473906 17.265811274838803513 -3.958139463842451633 6.6529207992523069493 -5.042337602667898544 0.98366735376893432719 -0.065384173547583440689 23.437128382638391599;3.1411094563633885635 1.0348175747047210216 -1.3040149992174583371 -2.6447375035078857231 -0.49679846979052222355 -1.7663386305927668563 -2.6330944484962763852 -0.099833216411179384608 3.2628698760140202317 0.78882880742403527208 -8.9521269875689615247 3.2651239315866846802 1.6609702164335231611 -9.637246060876080378 0.81782493063143379963 0.50183035764553174385 5.5481451773497179047 0.0030625446745476559568 -4.6787262429413249976 0.17753439670015827567;-3.5612215479526798667 -1.0957276232817489969 1.6522234849739776408 -0.86548749324103546599 0.83649782596112332023 1.6902436569197425431 -4.4609468783132015801 1.055670056860164463 -0.66701475109431929145 -1.165364247531468056 -1.7946740811029526785 6.5584620306287089164 -1.6356854454687572709 2.9403311583467348633 -1.9055491680051357406 -0.64559393850874147169 -10.832686901503945975 0.32794376728750307404 0.38389270726051144544 -0.24966206102710847281;-1.3022389887714820311 -2.7868768867750577378 -2.18377656098078754 -10.043181574713120341 -5.7643974602185261702 5.7385212277303825346 -1.3022599773163623382 1.6279349557001674409 -1.3830474657915423631 -0.45727947193012602467 6.5573773231894572078 -1.9827099162134835808 0.22917774330247195347 -1.0190848105322618533 -0.74257210596536837866 -1.321901141563330162 -37.657521480241747724 -0.041368645624749546263 1.7073191768010214098 -1.4222471728099213006;-0.45694971966295899746 0.3938318721564054159 0.10753579476475193244 2.5990561584709013232 2.9881896217888090916 1.4441091291368051142 0.078783709157520920296 -3.2253752226184300156 3.3031664971296952338 -0.093782759595136808151 -1.1009906432747615934 -0.031455218653146918562 4.5688399639117198703 -5.9175654128582468871 -4.208356206919881437 -2.2223552177366792115 2.1380030339971893838 -0.052413095641386360513 -8.1151593357308513532 3.2695257154264383281;3.8263953270392039308 8.147068166344118012 -37.95558086104461637 -83.816041788949533498 -2.5729743184451105975 47.732417620005875847 -23.263883765120208835 -2.2865308928506724584 -57.198704236776308107 45.632085751839483123 57.894336686877380771 4.2115915137713439975 -1.205450725421638225 34.384145200735666492 -32.08877618209510274 2.6329375240660297663 22.451471829799658053 13.590394303317729907 57.920812965512809001 88.457255226966381656;-0.11660607208852610817 0.79197756937204766281 0.57752249350922790772 0.13306304291185921951 1.5094377531934906056 -0.10214563293728216864 0.23116908836100300006 -0.36490610906741999253 0.081600795634875475382 -0.032362621945533194545 4.1220027648006736243 -9.059761660876816336 -1.1292004016211749651 -2.090447977121970613 -0.37553315629303807288 -0.81535606846577135531 15.183332258111716939 -0.012680148680330431341 0.71261919670745343947 0.85579788981518845059;-9.2262157821184622719 -3.9288464518031216421 -2.7985402887319534848 1.9667884477726937931 -15.931287094781907854 -8.9844537611288917134 -5.4517049678929794254 -7.1143223271110818118 10.532755268251490222 1.0819227890539513393 -3.6238208625441949984 -1.7735842991571433291 -3.3726608318350521643 6.9207436039394085725 -0.1295758535316905713 -3.6852359893107191624 3.4637470029384411774 -0.028339464264127482013 -1.8033018848398281175 -0.67540303624771003133;16.977111851088416472 1.8668142016087705404 -7.9420590567550002348 6.1294655694329396312 1.5983516084273712288 1.1278064055714958069 7.8564218501765736846 -6.4276610884287510572 -6.8676056580903228621 5.5354795795248659118 -19.089756101273156474 22.20574933488004632 5.4422417982116693125 19.97268143439772814 12.362806957001158281 1.1012895534684796761 -26.158970450541417563 3.8571278564646696019 -7.0615260602701859227 -6.9300080438257527504;5.7289917892837705082 -0.95443341250698110478 -1.8548929838706604833 -6.652267093157089306 2.0431370235896264553 1.0064818041057626008 -0.92454250375937852002 -0.17193729125397852475 1.1202159610498620967 0.32730828610804280077 -5.1946121798684119497 -5.0003915418264943682 0.36548737388114399538 12.264764222624050305 2.1742509820417974531 1.467756230977335985 6.4852852143228698623 -0.25840437369184943162 0.15936188795424768849 1.1073331479862902338;1.3671479103732808724 1.7606994254770194086 -1.522037417379693558 -3.8510580244894261348 0.53300246594528477573 -5.6612372060657776274 -4.6752259211573905517 0.67215238519089737235 3.6768274541662901989 0.94972117824949853215 -5.3339114849936306584 -0.34978942589828304621 4.9493347400067406738 -24.160821956485481365 -0.90079199546347699101 2.1465308622545187234 -14.297797206720430196 6.0151732244372366765 -0.50402487873743428981 1.4783573412522741375;6.95163337537517112 -16.845083868407183303 -6.0441513534765292093 -1.6893497584095908959 9.6028485464826989215 21.21433946612430077 -20.862130434257860401 -5.3858801032883176774 3.6624614070577696801 -0.52512141324061922809 -11.47506458477500324 3.4400976321596736796 -1.9799447163927130777 -16.358273607870110311 15.853994649148633655 3.5016975127418050739 -1.1653188601774393529 -0.41605753126962902178 -8.5847374326316447934 0.42290634575789504135;-23.523162530137447845 -7.2049710670233801935 -5.8988586653167036644 -50.568785270040656599 -17.033294422781892763 -0.052957231102884541607 -17.280543022564650357 -2.8729007594372455436 -9.8497270921016770728 -1.6993749185030693205 3.3018876391150371319 26.752012726785260099 -6.293012043080483231 -19.308890499740030577 6.8788619226618488156 -6.6189350778858786484 3.4175797531688609787 -2.8283862335497245155 -11.791851519013368588 -21.797446559299977764;-3.8853195554774990761 -9.8063637916253849625 0.096698203473691568544 -5.4672804203258564826 0.72673146718709269454 -3.4489806413700767607 -6.5605299536747407885 -3.5073406152380908196 10.825106749094430825 0.54102658804535086468 10.916460283074240323 -6.1497210248666691612 -3.1489103581394490838 -30.514646719968212096 -0.13564838613338536799 -2.7024156518948259098 28.639800219047593544 0.072188960884674080454 -10.928777688727306483 0.78198916918408822863;1.8642206214632135453 4.1329294107019869386 2.2724307155202700947 -5.5540003987135380115 4.2555790982106591613 2.8063770454176064639 -5.1666355750846122419 2.5186581225943109885 -8.3017477211380228397 0.40516348803398738454 -1.2422137561803170414 3.1957897092564038211 1.3998852718971295239 18.449577607873987262 -4.9764664041988400101 1.5092057191740588795 6.0432850530473842809 -0.96594808140797305818 1.2105378362510250678 1.1460912135079066587];

% Layer 3
b3 = -0.11219985945085085566;
LW3_2 = [-0.01781017817158234498 0.066743573927965774151 0.17926003779996965704 -0.0036113977996783505793 0.32235697886771630394 -0.0063084715011861875605 0.12449011769269360816 0.089250444631802011708 0.11471883015373503245 -0.034651322765285576255 -0.0040076517836379827245 0.2715725305689076774 0.063471557233235720297 -0.01354276370481506675 0.14607597518966314309 -0.050303200676835628513 0.011267819004969096414 0.0060087102412023129031 0.36545234467674497791 -0.02693311643651945253];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
