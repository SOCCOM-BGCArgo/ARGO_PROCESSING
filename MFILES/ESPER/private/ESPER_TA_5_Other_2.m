function [Y,Xf,Af] = ESPER_TA_5_Other_2(X,~,~)
%ESPER_TA_5_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:01.
% 
% [Y] = ESPER_TA_5_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.91237287972070157949;8.4262856264376786442;-0.512342661628428786;0.55557303257142010011;-0.35140466274756892995;1.4297768176038077037;-0.6015530698697855172;-0.20926159516203415856;-0.7937078991985366816;-1.5861836191908449401;-0.33961951419880548331;-0.9915327479648744502;-0.067461734433990172555;1.4870253784921005913;-0.3840291945068273205;2.1932989192230398778;-3.7453306136043535979;1.507111621427279724;2.2486562227978805772;-3.7766482443535283053];
IW1_1 = [0.1944555268069526055 0.060328620263712516569 0.10800156373072855587 0.1046005150527046651 -0.096379667338914273844 -0.35687222391758183226 -0.13961482080814824336 -0.015206044485248360748;-0.042575506771205084977 0.18878671875108196665 -2.0053238224583163074 2.851921464533579087 -8.4129660696936312547 4.0725843732341404646 0.023508971108477279277 0.25017188951007163222;0.13456598606712344424 -0.046579615387859533981 0.076071695117047644086 -0.002014139847794542762 0.26331078103027860671 -0.24382787321631624322 -0.070610250279602895795 -0.061630931554984079435;-0.12733722701042524128 0.14779458454394309164 0.28548231900344817058 0.98878061912349934914 -0.10858323927623737826 -0.24359217804871760582 0.099750595440560183014 0.1896016527107047267;0.35688591337195385567 0.61118473072244983157 -1.0869670029472500161 0.5297207349142871724 1.4822194646109148053 -0.17893659836915243311 0.13683318609755643069 0.24746324228044447313;-0.0014370138299936593106 0.061553861759638513196 -0.26906536033678557507 0.12487538141909407252 0.12129129643065156285 -0.29001579598233123702 0.015649208728657947737 -0.093687631585877936824;0.69131026844191867387 0.62646862942780034977 -0.018854767716988879434 0.24697267557693389217 -1.6690106804264230878 -0.62754401027277995073 -0.61436117936483969348 0.40875725153867220607;-0.45948524317253275351 -0.15910539002644150108 0.384199574790975662 -0.90869676322414416614 -0.8772268350820136007 0.65459601327829153306 0.50340407639868534062 -0.46557053277543103409;-0.18693777080487972153 -0.47205790519549711837 -0.43921987548812735369 -1.3943467605884447558 0.067239755678367013614 1.9792886142153640616 -0.11154375453013752606 -0.025642143373648770832;0.80447846678028311906 0.58050161533983668516 -0.50301067717583847205 0.42063142002634129613 3.6479102503037963423 -1.015573087986087808 0.37031089516715198773 -2.0207721145170247645;-0.24041485323015307496 -0.2727590186487475199 -0.099701740837182431521 -1.4754388149851889178 -1.911350023381724883 -1.3834213577430005682 0.25489712816849874333 -1.2226077789549887331;-1.1471761497659398454 -0.58557554659205468539 -0.085491833178922463365 -0.087976010921416311628 0.95099805860499919685 -1.1175012382855489257 -1.0446352506417453387 -0.2646562249260075439;-0.14906988419516117861 0.153746822274472561 -1.3051021076888233985 -0.27950281783980546191 1.1315016979237744188 0.92959324922285546666 0.40629216580358784583 -0.68916379816311645889;0.36822601243283087369 0.60911969843990265705 -1.1863870352306922218 0.73080771544950351437 -1.7295960887022334695 2.331323641582080608 0.73213651275769286997 -0.69050113845388194633;-0.25548123535588435074 0.087521853287158959955 -0.61886318839780163348 -0.33007870167420211294 0.80809825006095770128 0.25545265818998863505 0.15081955021105564185 -0.27338507065220829517;1.062016335534384126 1.5004726775201975286 -1.4891138505642003143 -0.35410610815910359417 -3.6065243803744051476 2.0283015524038807698 -0.2804738080351412699 0.95511892789767316447;-0.066300209933671000462 0.090060884859324591423 0.21784444123382168401 0.28365303362593796699 2.662998521923955586 -1.7228397767839620514 0.28632976867744375227 1.3428048920581030501;-0.61215437639739045395 0.29391504584968425329 0.82606018298354078055 -0.48298557535955677356 0.24947520410829573945 -1.4790774190882485239 -0.80210258749413987367 1.8464293672998226548;1.4620876349566813701 1.3986169211700154591 0.45107496768748889249 1.5170665660206401615 -1.1675581451745535855 0.42010332040951314791 -1.1232593288790875263 2.0851974058210531737;-2.2829906601029787971 2.6709877282037477464 -1.112373703088290755 -1.6734067972525212831 0.050691641001657114507 1.0588716824627639745 0.60479756216542979175 -0.47345153532644784766];

% Layer 2
b2 = [51.993263835465931777;-3.5361262234408394889;-23.246713377581013305;-115.10098053010948149;-5.2413253405372870475;15.699526651858121795;6.1365958434294087809;-17.868725937704905249;-35.928817378557063478;-31.885234204722006979;-13.850231002742459552;14.919966057551070193;2.8407619454273045356;-87.439283661860613961;-15.033061208004289355;11.830595066802215953;16.175595718915825927;39.665067159251528039;6.6949609434371595285;-15.045039359093802744];
LW2_1 = [-24.449421349973196271 0.6801239842506121569 9.7724195411402519085 1.3089945105189233487 -0.32749237465713082473 -55.906779199875074937 6.0651025253266404036 -6.8290843361968329717 2.1991925483945893305 1.3136845250606701274 1.572691828902977651 0.44111447359091754405 -12.746884549617934823 0.057760618491730607305 16.016585143014761883 -2.2987973106048484873 8.0994271725868447476 -2.134644481004579486 0.19284648929814054985 3.606700486799044203;0.64934488124020728339 3.0573007981088555773 2.6837062684508792287 1.2437508841601268017 1.5461479932089563505 8.9406614756298772306 1.7269607586852104841 0.44873821753429710135 1.2103112327092591105 -1.1466662981728326098 -0.24127289479612215595 0.63408737471306009237 1.0718686606984488829 -0.028490527031824069287 -1.2474752059882168176 -0.53567845687095938523 -1.1833409537646530918 -5.6274270263223424848 -0.49464161120960870033 0.62593222956742311514;31.503460371202493207 2.2271747683528366757 -7.801042665515952379 -2.5108457654850253604 -7.3771520414848446023 40.043583103670165713 -4.265833464650659046 -1.5951608050978398623 -2.4774770998831279201 2.2167369759175068467 -3.1510641105408168094 0.60682776273747485174 -2.6173515241417191213 0.37877836658634206346 12.263413212498267768 3.0580700264686280221 8.8560320728985768568 5.7204491618090429483 1.1438468534722676662 -1.4416763501890610399;-40.586778619088995868 2.7443638794745246479 -17.176910969134564056 -3.2632978399827115012 -16.589876189376798976 57.87841607745139072 1.7902632585886626426 -18.174231049352918888 1.113259794662166513 3.5608602871025953895 2.5090823573392291301 -7.7668892164467111527 -12.661674181499973812 8.5853079448308093902 6.2203318348041181096 -3.7786604898220894633 -26.489747149229529555 9.0456518461662795971 -1.8600746425264049755 4.2966080251039713289;-8.6981321395959554366 -0.75605171894594735971 -7.3209336323709850447 -0.74288342320348366155 -3.9231726039469028144 -5.6259188607254753123 1.2169568147213778442 -5.3052988400344593956 0.4498547480892924888 2.0998127629593499321 -0.84781070500195210293 -0.97489355589572612715 -1.5786423240964331249 -2.1468840943442066838 4.3173437053141094921 1.3122172274616243914 1.0098005669564162901 2.3603250118744312225 -0.22873619242679490982 1.690976372377633874;15.21240337006300436 -1.5553168732049411638 5.9679442147072450098 2.7754359341509045045 -1.641409032552710423 -3.7395551617048075066 4.7529373624181534552 -2.8809103048791895318 -0.48664499074079026197 -10.883683263439305478 1.3192215416397625738 -6.6035649848102089265 6.5160638127460632774 1.5615498186292842142 -12.714485188414661465 -9.2755595398630212856 -23.18810530591290231 -11.542230723741452536 -0.88755391463691979403 5.9346306632564296279;1.0971237100710107271 0.068693641125322654761 2.6304227869988014987 0.5037867856014398571 -0.091905412290693155875 -3.3748136700693032175 -0.085878408119899010686 -0.13975686882799800981 0.12620398614002395488 -0.15603711911368742249 0.14579051751269483939 0.035555249350771915562 -0.53652848259515206752 0.26761157550399733429 1.3767002131536814069 -0.014853598755641557114 0.34852022671938270859 -0.4265117593822368991 0.036718415238241666754 -0.0064231867620955299114;-2.4242564289190968729 -2.1915152398785009424 0.50164117527524176854 -5.472072160236088223 -8.5729780609414785175 4.2856347707832505023 -6.853854608071295651 5.52770759436233039 -5.255551794053313408 -2.5636696521461437293 2.5053181878669166238 -6.3031219316182669488 4.0746707338866965387 -0.8991257042813175504 5.7707906679725375909 0.33111530458866172966 -5.9647152416346935766 -15.469172859632399408 -1.0549733099111948675 -3.8282928316660207457;55.854298837010354362 0.53542215784731728156 19.500788281428000914 17.191255505959336602 6.7565522432468760883 94.126301272093172656 -21.385263972192351645 -25.930684221034169923 8.8310123559975384211 5.4822345470330846595 -22.879866228724555555 10.660006700035328464 -31.346584002899646748 10.254578916302117264 3.9290209589167233162 -31.293366768405270761 -50.8389401818210942 -34.832178533305686585 22.302474889992286222 14.874678334165315263;-12.432976711980870732 3.4610724781460957544 -6.5264310347923659705 -0.80046100017073928967 6.1772704143176939695 -7.0651909666935539533 -16.924551343777931578 3.6601739221631803822 1.4456933383754864142 -2.6360611326280412037 10.354293178660842756 -0.46914447081907389991 8.8500276195857310313 7.7692707997614798288 -9.5631598692825150465 -4.4020240453845422834 -2.9719463105149790394 -1.7261883193043272566 6.134381126301947873 -7.2691574547277566509;5.5115256066812845503 64.062476608975785553 11.99163419449724266 15.450297986389200489 -20.673093320427245345 41.472190476659612557 -55.652344075596154482 45.818162282376036387 -48.897360479699663927 45.869555413547757894 -79.47194700568030612 -45.384430872395910228 86.676249374032053652 -89.834361311137485018 19.224767402063669408 -7.1578875624700373237 -4.2802302695061849036 -52.893304113671099742 -47.840702340416129346 57.216943442835344058;12.469577947332576073 2.207593191846624503 3.9682904523252822138 1.3514076727518535836 -1.9814499048608369414 0.086972321194498825037 -0.67235114408792151508 -1.1237868508360371322 -1.005087000448193324 0.9665195846269505342 -0.93768170313862420073 -1.637791287928295203 -3.8355731464303088885 0.023309195792149212112 4.7237292995608370916 2.1441168774842109812 5.6061945630639327121 1.8172865561547990598 -2.6150415331818970266 1.4986232464932824904;1.5178385935474529855 -0.34908424846723146162 -11.157343903029309118 -4.8612908664538112546 5.6551594524099835226 -13.507139263571936283 0.39097538793993502626 -3.9953793291651114039 1.2270982451155452164 -3.0436417591397506577 -1.9376485092340682836 -2.4706198829013428231 14.303203601435731329 -2.8216325933624823996 -20.346466782074603685 5.9234580674855150662 2.7480032277566941445 -4.6228087963051844866 -0.70242707535640935834 -1.606648022955442956;35.053078880826788577 17.581535945086844919 91.572061521275955442 52.304467380945418142 3.0082195489018177526 -29.890380245114151592 -13.437949222762959778 -4.36837044157659804 -1.3250907981055106699 -8.6485237481286514338 34.312840886783263272 1.4783867629895430795 -28.467451209471875018 -11.261671782193584335 14.565792577006453357 66.15507715021917079 -2.0196052459232336496 107.69881243037042395 10.764413804367805483 -15.07858549270618731;-21.678464068002917031 0.62154175701838032531 5.1459105145051111663 -1.3082640411753914123 0.86093302403746096996 5.8578366396758072554 1.6907542217872386647 1.5407988105749230723 -0.98164631803329782667 0.51687936431306003016 -0.6992979520497253354 -0.13925525637789754052 1.0223138349616904819 -0.84606060049502884723 -3.5921501354224307789 0.19435779213152343248 5.5124585566757735577 2.1186134884083136498 0.014716249505152725896 -0.017298716704393059945;-133.32925626083823545 -59.149633574524088431 4.0310001017333441098 -7.7078000018377181846 6.7940706760776947704 -82.549863198131987474 -4.5421049258686316819 -12.303099511327504345 10.562267395062336917 21.066584472756350266 -8.4223324468632494444 9.0751559138947772709 -14.60794927227511053 -17.332109561365879102 5.3800292709582011597 11.324460130257088863 4.0772463798706155558 10.586579452261164036 13.590830958793119976 -1.3674793745834001868;-22.310127014186864614 8.7404234973186838431 3.619609924519890054 -6.3621193547915897426 -0.071859221323723548869 -28.101803862909267906 5.1644965155926607636 -2.4413303606480059038 -4.2915625966383288414 -0.9683848425872240151 -2.0736069692841394563 0.95456877794599903631 -4.1042333770585086583 -1.0656950866044638815 7.3715917875951832983 -0.63808335536541471722 -9.3362262355409342263 -20.724424015932019216 -0.96662788433435142821 0.93936748911943435125;5.128757260361845205 5.5764438300575891461 -7.9853275693456664541 -6.583293622188729266 -3.2810054015190277532 -28.252166274171379712 0.71306266946235308257 0.17756195740719454834 -6.1498050138684297039 0.14594467724134185804 -10.221115710183509506 0.36471055443006406005 9.7872696168528534599 -3.3871725415598774589 -0.83897791751100503355 3.4491441554810666759 3.9610397187518273654 -18.7384952966448175 3.7534207663470557925 1.4446388000689354136;6.8979470600700709682 -0.50459750036002815055 -4.4615516323020596445 1.6926188403366957402 -2.9857702573661897283 -4.52036673277492973 -0.11317665865724739482 -1.9129244857409437586 -1.3006284709456275017 1.8266488958417614885 -0.7535100942379679978 -1.3019053834369418432 -1.7568613317148762398 -0.63459490526746675787 4.8310308126177456955 1.9428177627817295736 1.1326872695645624489 4.1799093131622200303 -1.3242284151874945675 0.56951870487580280589;-8.6081007310436561397 -10.596182191865302968 -23.788317520796375959 -3.1756643702343483326 3.3402234500836827102 -14.417895810705587678 -9.7140461965486739615 -5.3931056062867623879 -15.861158046335102512 -6.3251477199605368185 0.049456276352174637079 1.9563983913429667805 5.8546950826349437591 6.1931060909022663807 -2.204814832163798588 2.9009820098245766573 -6.1955882041290912809 7.6984963205354226545 -3.9146737735710228634 4.8005769298875451412];

% Layer 3
b3 = -1.2736139943155702081;
LW3_2 = [-0.022910030619400372637 0.13375777472331007445 0.041758966196348279443 -0.011056553737897913126 0.061817488947041254743 -0.013416331961663566577 2.3960809385427048745 -0.025889342787546350266 -0.0030225034782179545541 -0.010133323648746020082 0.0034222062551911122848 -0.084316259665494344699 -0.016165692810884531999 -0.0039914561858878476464 0.41265331582741493488 -0.0090432943826351877559 -0.032626436466212153931 -0.013962087282491325232 0.11026385520534161266 0.0075252151594681652644];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
