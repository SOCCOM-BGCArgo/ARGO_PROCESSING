function [Y,Xf,Af] = ESPER_tco2_10_Atl_1(X,~,~)
%ESPER_TCO2_10_ATL_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:57.
% 
% [Y] = ESPER_tco2_10_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.3888396789565303;2.0046621843007943;-7.2684289248249971;-4.6690070517061937;-1.1572525294404068;0.044757011587681153;-2.8714209178221539;1.3042888439185341;-1.329376324188519;7.0099843127344732;0.15021262140067129;1.6404118420931233;-1.4367889593503143;-12.636349174749357;-0.29412790703844299;-3.9625275605300785;-0.17806575629322882;1.46724200948669;3.7841523699852218;-3.2761883283777951;-1.1957299216046957;2.434398174489774;8.117396362964179;2.9949913024664729;-4.1220075809304735;-1.5589845565015392;-0.48861446100883571;-7.0160182132449105;1.0893614342850841;6.4469399060085513;-2.2238454175578304;-1.2793040038273593;4.0664230917794262;7.4066619122527833;-0.87491057223059721;-3.6444747512071931;-2.9517644544009172;-2.9836407563382927;5.172086801448172;3.5198543954285562];
IW1_1 = [0.7799302234389115 0.60529687235955987 -2.2766756615477881 -1.1377060419726652 -1.9388576705781022 -1.3221316845926043 -0.11514892114496481;-0.19280497130953161 0.20234789371222436 1.7171654376860468 0.9742376175518076 1.3799859805213299 -0.041489039642906705 1.3969272171329679;-1.2814566298502923 -4.7221012700383218 3.6498157107764988 -1.1206445429908711 0.057747058915415657 1.9915523645779982 -3.0921584207765664;2.2832512917045698 -1.9985555334588698 0.0053623611745890953 0.19280590161675668 0.49637248245251048 0.54647135314276085 -1.0562572835402761;0.89863024248958867 0.82159756922567762 -1.7723354071316439 -0.73563285067956996 -1.5736532962385688 -1.0706306235346137 -0.48105237786604149;0.07196670571417936 -0.98182482152069162 -2.0201738966806673 -1.2775549769197594 -0.83588754655570574 -1.5802695825529114 0.81580444885952752;-7.4975340776196031 4.7292624673516546 -5.2089054356223423 1.241083505733771 10.811086492598799 -5.3250117577025948 3.3883211765576293;-0.33892663268389051 -0.15310851251811888 1.2187697907000052 0.57567754352711453 -0.16064275031595743 0.57270078696426219 0.28890959322980686;0.43273801058576478 0.24284409066710227 -1.4256130483727607 -0.68729303018381482 0.28158065644720881 -0.72549876096053201 -0.40741389709575254;1.2024985634122738 0.16891146229208423 -2.1382235920986989 -0.82192834393143044 -11.604537643474123 -1.2440139929398748 -0.67991308905891534;-0.073219309475433758 0.1564814358505511 3.0596404505257309 -0.42187099787387611 0.4241358656618171 -0.43041414009502466 -0.11656407031488365;3.4778323782140372 0.65094637145702217 8.4982592850196461 1.594686951788455 -4.4259001536936342 9.7928494368890746 6.593651658674184;1.2971674164623854 -0.052497173277100816 0.78371576716728553 1.55777753628048 2.4978548504178013 0.51035037201889699 1.180419856458929;-0.38330546733347487 -0.2815636933301045 -0.1214305921436669 -7.8562285209217331 -0.47514671109392986 -4.6428627284748893 0.36790277472073546;-3.3714274356407175 -3.8059197550128143 -1.1539535607844076 1.7721108194174171 2.752002469564625 1.0329959729384321 5.2842921648607328;1.8554742622809313 0.60365773459566197 0.78698964398283899 -0.8300127474504343 -1.3146046120258958 0.82711747732885632 -2.3872143653230733;-2.9518323410622149 3.0252755793890871 -8.9611755467228793 7.0707103823932815 23.252931135918899 -10.52400334132694 11.242403304917733;0.090027115538417968 0.11227617154886534 -0.59997261942954372 -0.32816080743143916 -2.5378108321022843 -0.29010372133000989 -0.48574341034242347;-7.5879409427471831 9.3881431134053166 -21.015209248044616 -8.3357617480068988 -7.7861234799058687 -28.368368592846085 2.5676738425828005;0.44201652581091266 -0.17460371787639026 1.0058628595670609 1.6713585285384642 8.1222931670844485 0.36214961353863229 1.878608996990035;0.60036775079057758 -0.41350879003167523 -2.2873610632733845 0.41178322529436118 0.4529572291075048 0.59889586816740115 0.19967389540079339;0.75624136676567177 -0.0034986810845369096 -0.41790639329082624 -0.58599657226289537 -5.0683674381779378 -0.37795692251576712 -0.66408865350892821;0.35024498956698036 -1.6459795272621809 6.3003296120285714 8.5322301279760708 -10.530678281671044 8.2293502689477318 -10.891133623906072;-0.3246429779331827 0.35342903828260852 1.6957926598025583 0.89771393344909489 -0.45931092471630991 0.11798117467449318 0.65471345353467458;-3.9561958142949765 1.8484021797060044 1.1778188722030005 0.3690489368956118 -0.20890887311306011 1.7589280184226177 -2.6866541419187899;-12.859111722848624 6.6236179089294867 -12.159465645595235 1.581048253673383 7.8106166997178521 -7.3441881413417391 8.1842171403908512;3.1917344347086241 -3.1255958292248511 -0.16901815266807443 -1.4469065293322299 -9.3728078027986186 -0.098469269812257218 -2.7364786257926799;-0.58456725383715069 3.2980660916437037 1.2348722241416037 0.18634813156123481 1.8825958463255135 1.829361112140121 -1.7240188168819031;-1.6179313461867932 1.8289426049657493 2.5265150080756071 0.97949548071184744 6.9151126997391987 -1.449236277663887 0.0092827586489612202;-1.5451393097959139 0.52409050249104339 -5.9218906670929519 0.89915495319831273 -8.4469517433070305 -0.35484813391527187 -0.27194884502193772;0.35622871659229638 -0.060123545567458109 -1.5309660548000674 -0.78070704849912098 0.29221964830666786 -0.56600133561230448 -0.25797983601802094;-0.48961645114185365 -0.33688063406343566 -1.1882166352197505 -1.1655112362183979 2.3448188956781371 -1.2603120643148287 -0.44816363030324469;-1.0620717472176009 -0.43186243497136501 -0.85849902694717473 0.85398991617104025 0.33710669364079876 -0.96336307461179072 2.3574225413618413;1.2903595837197168 4.7458899828215646 -3.6914709370056351 1.1291135283333684 -0.21740524969988392 -2.0138251388696524 3.0915206093606442;-0.15369540564220854 0.69178808129747482 4.6011273500149903 1.7309597983839335 2.5030211497522834 -1.0072918250637655 1.260404442320042;-1.6356028382380148 3.77207394620876 -2.3948806555611415 -0.38680722654641569 6.3774487208771484 -0.10493492864244626 -1.4618547665330752;0.67755810414554585 -0.46448857134650268 0.09981936867438837 -0.73111827498598192 2.4211406638640729 0.26140283976911938 -0.95501062999603326;-2.8548838937683825 -6.5890507780547019 0.28755227121890725 -0.13812546427649952 -0.32244358857232991 -0.010107347284078317 2.3896955465385172;2.3744150080390245 -4.4902129819472112 6.41327105973616 2.028548933878016 -1.3474461873730323 4.1362519899921706 -5.0861014927889485;1.5180829196379027 12.219950087576821 -10.85928385436047 -0.99934513479412046 0.44264106285581584 -0.94039494707853277 0.061305004056781479];

% Layer 2
b2 = 0.84239988120369069;
LW2_1 = [0.57506323369274093 0.78887808214251498 2.0937782107889391 0.2525045379514041 -0.74302584030734242 -0.12086409784279929 -0.01024122443515638 -5.8981073306159555 -2.5182358555058229 -0.11258246381110112 -0.2171979257136554 0.0046019710488485891 -0.072153912449253857 -0.20565978358895462 -0.0028399677664843709 0.59996376438462984 -0.0014288793851956979 -1.0395159634998694 -0.0017977432945569074 -0.1590775546889534 -0.22043524762232639 0.51005446282512801 0.0067738070173349891 -1.9162077285641823 -0.089040007770363916 0.0095230972578096776 -0.046064309926230888 0.29725695924958778 0.05185312770131404 -0.033311017945332137 -3.8321314746317832 0.11616787229968273 0.76750489344134465 2.0713861651346912 -0.025805683454172931 0.05249874822336844 -0.27200675321490009 0.015028008707853565 0.038727244798986295 -0.0076546627676070461];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
