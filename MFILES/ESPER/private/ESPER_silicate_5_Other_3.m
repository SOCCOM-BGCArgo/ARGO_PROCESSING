function [Y,Xf,Af] = ESPER_silicate_5_Other_3(X,~,~)
%ESPER_SILICATE_5_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_5_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.68144937273447225845;1.9314490952154896863;4.2509854299421450108;-15.244753724353525826;1.9431091141741474448;0.32800590613971575271;2.3311584288878410831;-1.9803499625557892116;-1.8100740550760312519;-1.8620988038962695832;-0.37016155687683133246;-0.057857301184593382115;-1.0692194678017601372;0.79129654552267358891;-7.2724439971875805;2.0536238659943060192;-0.44706275310506909948;4.7066998313632355533;0.31432175137236068041;-1.8248101460615080427;0.12759917820551383572;2.7322685475412642475;6.8311494225981377326;-0.30447810437675698614;-0.30587382642743199401];
IW1_1 = [0.051906583618794535639 0.061959852610998226996 1.3304065761078638364 -0.10323558025978749053 -1.2526667714805213016 -0.8589849336933849111 -0.38380556897487733137 1.7213153992139913484;0.024241957985915642271 0.10870373088893509061 0.38002900305172737649 -0.0073445385670613165877 -4.2521084519912051292 2.191354685258708912 -0.37903665401290143055 -0.024670329400936732989;0.26658175955096014009 0.91044740937475188147 0.44448305366695650687 0.82101723933730208493 -3.1952727281254813541 3.6292726965429111807 -0.3726168468172969539 -0.53133773465793709967;-0.2141025423319143639 0.12689623742411437757 1.0682213185292239732 1.1646518032957862143 9.0588845492077112453 -14.465137727650111188 -0.096425746322688923873 3.9695647531472260106;0.056680362976395518015 -0.22754900570754146849 -0.23688498421964526708 1.2111498960595079577 1.7382817129673209244 1.5665869059195292046 0.94248779311287078642 -0.62188044485404592177;0.12028581806679798649 0.50937000007085808662 -0.10592753507105626132 -0.57940839280162370617 1.533062356012482752 1.3050019942740724854 0.33620921258409874888 0.45599552958699174354;0.5349752063853451256 0.69236939823297360963 -1.7435486221029723453 1.156621101474618829 -1.4175379664850655814 2.1811433275201697057 0.15032470156718788501 0.43250279319163242864;-0.50589560935435162747 -0.56908632103164447091 1.3172739038937744116 -1.0620032304987676586 0.019091758907870823997 -1.8440600592338398656 0.095091234233016977417 -0.23625216670868928737;-0.84677640031180967384 -0.056959159820349561376 -0.47565455055163557985 -0.74618572167982433196 -2.927191246677522507 -2.7855902323341412696 -2.9753518831281060564 4.1284981452135109947;-0.23758008064856045438 -0.5027063878048880774 -0.18647925696874725898 -0.80602347007347563412 -3.0343827802018479289 -1.3280216422608914772 -0.41084352482908131909 -0.237958523279234474;0.013033714109279769325 -0.15370999025408102479 0.31866492341078683781 0.70758025236500476929 3.1300369493001833909 -0.47817512116091415164 0.44557272011249016153 1.3334863810286357033;-1.4292910775421887593 -0.60241169022120866217 -0.64121354423347698415 0.70811164432332096563 -5.7183100289481938461 0.51324502804413096868 2.0522959210053981494 0.19710465755733508342;0.087023858547326971014 0.074230909659291896552 0.25013887812749663331 0.14787589179244398085 1.3220229418809947841 -1.7878433430671507587 -0.5996863997131877122 -0.8114573675334899594;0.10106894255056633747 -0.0026937158305865827566 0.20086553112068888938 -0.072051970764938161329 -5.9515530185011140674 2.1652430239136037926 0.14194781578967605173 -0.67052409424599324073;0.58788876636620090999 0.052023155208642028746 -5.1675982411383092341 -1.0500825680102792159 0.46859016912368672836 -1.3313037546222372676 0.38569327169003814193 -0.34555851591477948492;0.4727340223638412664 0.39350056117827153512 2.2193136607940644467 0.0028095439140188895044 -4.2213078477277088396 2.5162405170212909233 0.93658842380892293189 2.685072788524945242;0.134049493172011841 -0.3626008303055733295 0.12030204701023032576 0.28973912794222544953 2.343658816339702522 0.21011428533574211253 1.1978016841991983021 1.1976981955947882952;-0.38713744931539362248 -0.9379573431827591401 1.7577771592277278145 1.8138224002600098483 8.2561482286492431371 2.1793098846090077636 -1.316236337454934624 2.0631666071601233448;0.22347157703549364038 0.24940969708824850537 0.0075537130783560352959 0.46708238470770446771 -0.78959601799449885551 -1.060150079342299545 0.21699469552150985052 -0.018844682255320099884;-0.66550837280889196812 -0.2794073823053830341 0.2675082118584627966 0.92304179826870513814 3.098218202873321836 -1.933239382328135747 0.82019948603490699934 -2.1935516103459993253;0.07302054468983738833 0.36239304191618149087 0.26352152610147316913 -0.042923769504491046667 -0.1490839988189691101 1.4651268142587272614 0.270420701513530648 1.0035676009844709533;-0.0067553600862525209347 0.075166009075497072778 0.41008927295730956963 -0.062149296597773857898 -3.1931116491914028899 3.4315807496098678087 -0.02757547575190052308 0.48914790376330574695;-0.43617119774387613784 -0.1119454379472633182 4.2045285407410641909 1.1659178800915990237 2.5452080685362759027 1.6892838539283714372 -0.36374378642606425283 0.3065932969164210653;0.26252362422641511985 0.31289193701441286866 0.71618484461214049208 0.31477868350447996137 -1.631449777803661183 -1.0895348409851077776 -0.16185062835925959068 0.58720763389182073499;-0.1392589370629048473 0.0348250799250217416 0.0067160073869251589798 -0.64668417960799251532 0.17599296618694570959 0.76596927654229141069 -0.84970843154732311753 0.81389163107651629758];

% Layer 2
b2 = [-6.739427548331859974;-15.761837434170931971;-9.6923448710391344463;3.1865141837294981286;2.0454467970896352824;7.301446247552578761;-5.6723264065617842178;2.0178492066506139579;3.5257025213133479369;-2.0335355520552176323;-4.1605702332641092411;2.599918215800407495;12.868784384014565703;-4.651548382288807737;4.3991574359806069339];
LW2_1 = [0.35403243654774058102 0.94731484206060323494 -0.084220610840164689126 -6.4975455169065670091 0.11595384567127899056 -5.8388760475305634401 3.3633210374713797819 3.0061577011593243469 -1.1835919399962717691 -2.5123643106533588565 -5.4520466017874147369 0.26585092292222128885 -0.53333860773108165976 -3.7077247387783711652 -3.8584460984956301388 1.2744412846681445473 3.1695795897602714319 -1.2243614505074760235 3.6651893965681843213 2.14402826675749969 2.23565004550677493 3.019829165146100447 -5.7093169784824153723 -1.3061462249033157779 5.542742186913416802;2.054904116505076761 2.9904577859414702701 -0.99854416464575290746 -9.0050506938953471803 3.0175220496389156821 3.6200797997436398035 1.9457756176271514548 3.4445053603684541166 0.2951789632004935271 0.098697738873804272131 0.99298913994310467057 -0.17385166368025881112 0.38483349282889145471 2.8638539738964690073 -4.6366262561192641556 -0.76547567056320064971 -0.98829777760848469548 -0.68644859298112959056 -0.59788837189502153091 -0.9539874857124708285 -2.1873956278443422718 -3.3412336752448670296 3.476065944376066863 0.3465492818372880035 0.48295072631832680621;-0.57793709107588475682 2.2076981584119121926 -1.1929705267791088641 -7.8826569612342307636 -2.1379418885069405576 -4.9836928322715126072 5.4160380254105735531 7.3036724714495129263 -1.0769912448552076967 -5.3418796219422137739 3.1793265903381291437 -1.2908716889394826755 -2.666842230500649169 0.36282482276874700178 -5.7666264399643996086 -2.3111675311033543778 -2.6248998262579066321 0.61806350243155450119 -2.1050228360743741263 -3.4370563506631524042 -0.12947549817185299847 1.6569378238904945988 -8.4400727210138892787 1.2640006935504171093 -1.9008074283063500776;-4.9243211698144309096 -4.0026856607995435766 -0.057495154207486950937 1.5870811895671823599 2.6193430801169763633 -0.59078098081950392029 4.8002222805689864771 0.94861507064487859964 -0.91747807585519813856 1.678101668064658103 -3.156544674480696866 1.3817054971957811738 6.9024735717813801017 0.25755540195418463734 -2.2815630441483856217 4.5093926161479496173 5.4360870494024728927 -2.5851113036682793478 1.6236492230224761624 2.6274605141116547102 -8.1127262234767965055 1.4883738171177738341 -5.3957240338561121007 2.4476483749397468515 7.8404287178682654513;-7.4157037247652750622 5.3429680297776505071 -1.6331651796198600746 2.2563299311705198313 -0.29034347040539698614 -6.409641714480749819 -5.656784509852996301 -2.0640082397806391867 1.2777220000084128504 4.0945050513825096417 0.55354711294308589498 -5.862605511600395225 0.77730269814434971298 -3.3856363134778404422 2.961514019739672765 6.7119726835550768129 2.231571962147421484 0.33888869718883274373 -3.1321977986465521226 -0.52087652927919603218 6.2590184768175554098 2.3724708382510324434 2.0798833133883358748 1.7686933511863478508 -5.447002397268461138;1.1844465916980870812 -3.0911541262944468578 1.0390557619755085295 4.0058931833542086309 -5.6740856335717939629 -3.5820257313867611693 -3.8629254556485768113 -2.6374723476126091803 -0.88891446602805923582 -2.9336091924012319687 3.3710167921531941637 0.041400765603842343276 -0.39042742313635964146 2.8752360767117335349 3.8344595075922036642 2.360179498482906979 -1.5590098577344844166 0.95868599080878813545 7.6668930043423220155 -3.2606042914500745766 4.1989768667661415691 -2.9547394248534697425 -1.3269156429960178301 -10.063302567994496073 -2.486210111466240491;-3.8037343377841499326 -4.0591744242432596934 -3.6485885974402689769 2.3810791888930262772 2.9778431423785445276 3.7108933139751254515 5.3176590282210272065 3.1325271254520488107 2.809854773917145998 -0.67367892524116268493 -6.9578593235011352292 7.7534304221675434121 5.7834037802356732527 1.6399685689643435094 -0.47032956899820016483 5.2582202663916524088 2.8818560785050220119 -1.1914385583707500782 3.3118738207780582528 7.5680732586909700288 -0.49817802080153500421 1.9331772513921681167 8.9376969049923378208 6.5428026825708709424 11.340210734299320805;0.31101179556129521231 7.0813350043583200843 -0.72651767542479850359 1.7970753380645994035 0.57989684863055990238 0.3925538614991766484 0.10849113771938830031 0.85780881207426140644 -0.24666103117744581086 0.15937631207290314794 1.0199948488975232319 -1.0030756588162272891 -1.3407825737237519803 -0.034267162487896740686 -1.9966856683164315722 -1.1047590527704520547 -1.4309414790989720689 0.63708004757374381288 -0.92821794187979367319 1.8903335057217773851 -0.84135442174358054945 -4.0858869173593017621 -2.1344168767454281266 1.08652699185667867 -1.6433174752564709831;0.19181077855192138482 1.124863188072602771 -1.7522479977279588059 -2.7395285372174251748 2.0467617181973669638 7.2791710617819767037 5.9189271169612380774 9.9146103128839850882 1.5848381429430824507 1.6807884431221657984 1.6091964594937222532 -0.62715604171671834877 2.3264657970975042289 4.46220485982242554 -0.87446984077509215538 -1.0106304009638682473 0.029271002040726724902 -0.11075751956432096368 -1.7349398068358570235 7.874933743787745577 -3.8697870812417671793 -4.8291152968117287969 5.9605543997244510024 0.44661690482259785995 -1.6520311623431163106;0.55314153603045734808 1.1100705416985472418 -0.1521216745538437054 0.75572197277597386034 -0.10242089013605339132 0.64644844152913982782 -0.052916498413896263797 0.041491380379550628354 -0.053583960034895954105 -0.03829444696584002189 0.88992904197123479104 -0.11949381109982171179 -1.51859398433532089 -0.077926958537165996743 1.2597937526052693791 -0.3083886765604268998 -0.56562797926073427046 0.0082480859323847272035 0.041350039639165010741 -0.18147107467718212592 -0.86783920592894980839 -1.5671734210207275417 1.6204852231516830852 0.22416349144245351077 -0.67106500984869121851;1.7748945802148765605 -4.7978077828124670035 2.4235903308577455562 0.96326657789182346114 6.4116292293000007874 0.079949481306613001674 -0.10081616279817046111 0.10640781861921394524 0.36186636032012542419 0.94137110411795488218 2.1253010072196940605 -0.4089754347560612957 0.33208708886698551366 -0.65093194737819715101 1.7276207476255027728 1.014902926529975602 -0.94333786693308330218 -1.13248720421628013 4.6351414851423227148 -0.3241057299813319692 -3.5036547099141097661 -3.6550611164028308231 2.7888839168695986892 -5.2637367780073613943 8.8248119519697727497;2.0459344141719584265 2.5840561827201669054 -0.81178610094105696504 1.2431442966192804978 -3.8929168463785903676 -1.059577215905201264 -1.3028543845975992799 -2.9905041787540462828 -2.1083697764163606969 3.1647588730754105946 -1.7932592099587767454 0.43300075430731399528 0.40910561918110177615 -4.3928569653641789117 -3.16909538473272967 2.9343173850612704889 0.35783358352542249392 0.44405698279155336738 1.8684340134396721922 2.013121416874637859 0.82677196980499445544 -3.197514901784355601 -2.6928046088843329287 -1.3024250917301105623 -1.1537565981569997131;7.0928098102596166541 1.4541908018460587559 7.9551845528775695371 -10.668283194872184794 7.6307157531370872761 0.79893086445163530307 -7.3469827570219363722 1.6667290617623262694 1.8244808489714512412 -1.092981483381934682 -0.27339023858804306633 -8.3710789988074356671 -8.6821633237118120974 -4.5174491837924346527 11.153359708016951757 1.1928483525966044887 -7.3360355694691170569 3.1763506520146451706 3.8381839779625637199 4.4863480462586000641 -6.1605554712913388471 1.6651555407738456438 -0.95749230456610368023 9.5634920556862965668 1.377346638311604643;-0.81223669626540184741 -4.6651108734652462218 5.2888228386647968549 -0.44663271753897598737 5.7248217285121434372 2.3786259786620713719 -2.8244423899171420267 -1.5057172082511638411 0.73539734702365655572 7.8676556758773212863 -2.8423059000354169434 -1.1393900038107989126 -0.27031825001801679242 -3.9233922028986016883 -8.3646843200333549362 1.255130022750124752 0.37154957545693173548 0.27796915130967297936 7.2331610812769948637 -0.11397776914080035016 0.22313795018222368216 -0.93551870840591699885 -8.5423372000830557482 2.2716244751030658655 6.6563234983747046059;-2.7416038868555512309 3.8387786696724774949 1.5699858266099628867 8.8352255407464657111 2.8071199367693711046 1.0513968899648993283 9.1626236463269048471 9.5388639823672214391 0.24413682831728406031 8.4736924761548504392 2.5219961198714075934 -1.7964526777068203778 -3.6773026264704107291 -2.5695007648006384926 -4.9398577168537727289 -4.1955032513065102506 -4.4967752017502435891 2.5317866094813838984 0.081714106217432136425 -3.3774652906506421601 1.4930107157795649009 -4.3875376731976585276 -0.91300334213163047981 0.70949283919593753023 -7.6016933676595792591];

% Layer 3
b3 = 3.5512691957497928286;
LW3_2 = [0.060385440335373907761 -0.15102787999884331738 -0.061356988053417181594 -0.020851904847512831714 -0.01196155228873522873 0.10051401758411643295 -0.013008941826826596333 0.067567591995764716972 0.033362899760398898041 4.6567676376887350287 -0.054553368225773175848 0.0390699503069308271 0.25235378537593100567 -0.06443787688334595698 -0.018619013949277361808];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
