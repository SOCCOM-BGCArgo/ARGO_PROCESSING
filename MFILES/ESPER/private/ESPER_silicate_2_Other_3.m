function [Y,Xf,Af] = ESPER_silicate_2_Other_3(X,~,~)
%ESPER_SILICATE_2_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_2_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [9.6647498925557187022;0.7034774901568676686;-1.9913551547100054595;-2.8001030628359395713;-0.5452929230263156013;9.4998622982606679699;-2.559164190639005021;1.830310338088354527;0.54601115405218569876;5.6311721102588760957;-1.545126006516332362;0.0093304555129519444606;-1.3242638124463574911;-0.86466835703507982647;1.5838677495203183909;-1.8067853625286487418;-4.3310676982348939035;-23.856914317043454332;0.30066294257171372051;1.4711360548482461663;3.4622216626926642924;-1.2092437416415822149;2.0724500097152471767;-4.3746686849920344287;-1.8417771418009691864];
IW1_1 = [-4.8401342981855250969 4.4069397495020288247 7.1740489926159964895 2.9259387699336381061 -6.1431571077881690357 -2.6378907835524225689 1.0669800736612040648 0.65919009203721179446;0.4306606276446479642 0.14470956751223076897 0.091162284624462894267 -0.26549245184825220889 -0.67273920110724505506 -0.83408001283981392238 0.13967384174720787193 0.27909965348725745971;0.81715589135300292778 0.90304801629037423361 1.1334286378542008933 -0.035988181709885450066 1.6467554233220378368 -1.251368310813896878 -0.29687473830504484962 -0.32713591628112620446;0.329461832694688872 0.12612716597853376732 -2.2226185617813416506 -0.31688635593397940227 0.2065300911212788193 -1.6880845936891679671 -0.11221970099415072564 -0.43641381823613345503;-0.61675966238397161856 2.2072478862077096196 -0.11751466790041689703 2.1465152729488710115 4.7497118479094657673 -0.79377647923503336091 0.98151369964575840843 -1.9756873347812031749;0.20410874728280054002 0.29004394649907050407 0.85790186930179701541 -0.48204701025549767657 -1.7867609977017697709 12.245676711096201927 2.8813060159441916674 2.5097411334401864558;-1.6325656946816720083 -0.69681537978986041182 -1.9629923379764937508 -1.5828826226784211695 -4.5685003505827292969 -3.460659622970492677 -1.8865863686344168659 0.0067724818044233008746;0.37111161021047089914 0.094263289342757280997 -1.2077500210496503463 0.98752221864628786374 3.3975450866741838674 2.4864860165121189794 0.93658275093267639999 0.26989726639059774538;0.65085738030920781139 -0.020011231294878917275 -0.044370550068947654798 -1.123435762045584152 -2.8321390507078056942 1.100256834158199748 -0.015301654681808024572 0.27759306264542277232;0.047863587578660465871 0.10908364957988431199 0.12774847937700545275 0.12273816818272202667 2.0155539862789084715 6.8080886610822055616 0.58641224921203005671 0.18325199288858215474;0.17971266734517241104 -1.2167840597937515934 0.052560744915446690195 -1.3306305623342618016 2.8138272677234574815 -0.44324678255824906392 0.40187381801380611668 0.029544491707557348631;-0.77515934306516720564 1.109067440972052232 -2.4477931684212705932 1.2198788677731362551 2.3096847513672065233 -1.0181126599044867387 0.71155004552268630302 -2.4533687213676178551;0.035130414932694080388 0.081757464876939994758 -0.38037859531876577757 0.65202062668310378779 0.34991316983389902928 -2.2459221022213071706 0.36319054233758041317 -0.061872395453760498096;-0.99100116244577418634 -0.82548512705260379541 3.8450642985540190999 -0.93079649515420748163 -1.463410080985776629 -0.28999493397501319158 -0.63290579636611921099 0.76080204607681733986;0.9495868927234543122 -0.36583397798548822344 0.57452324672665289196 1.4943291067714499221 2.3782156881037601615 1.8576199926687770869 1.0120324808322129773 -0.093882807984768043563;0.90571846600645522507 0.69977825403887750078 -0.095304345213023597405 -0.05801873245127311951 0.096221203990874804024 -1.031193116047812941 0.22100074329859623057 0.33213088945921326323;0.033449726283920497294 0.062296265365830036376 -0.89673368371851491787 -0.38641079849783749323 -9.6064122147010078123 -2.7212254513543499002 0.32967234251507737675 -0.070992724218775379863;-5.7025631919668384739 3.1161415339498237387 12.226301009576394208 1.9859595477755516146 14.014072439647376811 -2.622701052144374767 10.974416700871064023 -1.4924810138295290241;1.8750145869655170383 -1.8458381638685650294 0.25271690041998656762 -1.4922185545835568998 -2.7564529771601038455 -0.19112579497594919808 -0.95240924115538083683 -0.14855103954606937999;0.44892728693438183063 -0.95583645714821374728 -0.11084224577754517305 1.0406530869937835604 3.8231980088176991117 -1.6377920538203742939 -0.2704940383911630386 0.28013956928805472391;0.91459418554351989972 0.65138605747711253446 2.3937734423247087889 -0.0031695418207795924073 1.6965881631480361769 1.4096036339540105597 -0.016740201637065646456 0.27929516396674552992;1.3296061312436593393 0.98254902385334863535 1.439533774528578558 -0.13290506219838979507 0.33115011289999418675 -0.60468523658406836407 -0.059889173450428372092 -0.13770917427990775339;-0.024606456959255760403 0.023080365620572008967 -0.18182577976778357964 -0.11351431026045617767 2.7944258056460720141 2.4622403305900837367 0.78905397680229427682 1.1326366014129698456;-0.023302870180773701397 -0.076985537676549350983 -0.27650777808173454542 -0.084975769365036507574 2.3305451184707313139 -4.8053729895928034566 -0.32055195734396418894 -0.099932962955745635591;0.34599784227167940109 0.063789458726861536508 -2.4284210885937076441 -0.26220032106918522707 -2.8466450055988254952 -0.36289887905433487747 -0.20034282619402249415 -0.34971928366972632185];

% Layer 2
b2 = [6.4048411634872364218;-9.6579234310882853265;-13.712902233668138763;-16.536242777228640222;-0.015278126400930597262;5.4770795288681579649;-14.566049298609211604;3.0896996663446443243;-5.247922692200064354;0.65074069498241671194;2.1472578150473529135;2.1611433509250490559;3.7660870668025920871;-4.1442809261077737659;-4.4429768133857221457];
LW2_1 = [-0.16313162528692903841 -1.932566092079939235 -0.48117301664302480901 -1.3333648361136918314 0.24544094700521618124 0.91079568584077286175 0.38339325554157582809 0.62976540291957805451 0.61835413983521325676 3.00018888541083939 -0.6746116607075861582 -0.18634061792939848878 -1.0295001539655466161 0.51488931203599386244 0.12758414610889240448 -0.37031880706403530468 1.8339981663449258509 -0.32786974075620500813 0.081427313332779374666 0.74701316326488542696 -0.17197278139642221961 0.58172353793431907931 -2.9760131196789325614 6.1337553701181279919 0.55103062612924391672;-1.8040687563057775655 -1.9495578655906278254 -4.3871302102162479386 3.6864257238693265428 -1.2413066190649046927 -0.83667904651332625221 -3.3506431200412349902 3.0684798290133872278 -1.7176243577117695782 -1.0295487696342322526 -0.30617805490056498874 -0.1624990922780439051 3.9769865232582986003 -8.341735356726749373 -6.3278279584074565989 -2.9903154338112356569 2.4744125185991756588 2.3523117418845558291 -2.5656841130889365132 -3.1427924951611516668 3.536338630905914826 7.3727903632854188132 0.59093847761925688555 -2.0737107006706785306 -0.54774194887340088567;-1.9406820187730069449 1.855421258279199348 5.1891537002167229531 5.7756697198074338218 0.28148431253420169718 -0.7732422144768136274 0.024868170801717579682 -0.22200011675006742218 1.4590851242385052267 2.6188963198238073282 -0.55475061844539574896 -0.62122022100778917508 6.3028740474884639156 -0.42829139944151717323 -0.11936450384270165526 -8.7701988291473398363 1.3765396444762310058 -7.2821343365042974227 -0.1718281733952775614 -2.5675423732922042497 0.78858984981823931903 -3.6318850337869719169 1.4702592318405278693 -1.3336532369861853198 -3.9567487659732707428;-2.2215038899355885604 10.91855051516837527 1.6586049268155620418 9.9605114923211548472 1.1505299992146413857 -0.45159196629486547669 -0.68201830776632144104 0.85055547207860726644 0.024406870910629825666 -14.046770976887827942 2.1882902862386699461 1.9405040150048202818 -5.2286827168623073447 1.5896241198824256902 1.412963401821493381 -0.1945053661925737476 -6.7353617300673995771 0.42406450543009038823 -3.8176413745475117345 -0.95448162881826903448 -1.8947543004374687303 -0.82453749104357021427 9.1539020781411917227 -5.952790008726122295 -11.008653016253258983;-1.2426594677968052505 -0.28826870789913516813 -1.0437628043063076344 -6.6127913436717653539 0.51230226387910404728 -1.0946756032753619525 -0.5000698296808916421 -1.9455013383626449386 -1.5795684460498236046 3.1129614604541440137 -1.129138609893955536 1.3047457944683358289 -2.0371273296918985807 0.5465534770380811036 0.52262637059318584054 -1.8403303341186676434 2.5351968024676252433 -3.6237131576363448282 1.0782960611240723914 1.0815959640270988995 1.3377872817022939955 0.99916392311259150105 -1.946295346114695457 -0.20249976865798280379 8.6277329909174280687;-0.67550541290437382536 -5.8677693099570307211 4.5772579655907037477 4.5851502267013746206 -5.8520125367707738206 -3.9932777069702134476 4.7892227223839354266 -4.8957898119616665156 -5.191886975128051418 2.7279663984251349973 -6.178086081528157969 -5.6837917748668811413 7.6254917156044896842 0.12726284168966722765 6.3307785152600848377 -4.176431769213527545 -8.5016817673041806813 0.93380453241731253833 -0.56103118776578808635 5.1940173854408655529 -11.668056150108915503 -3.4480136507878667018 6.0650037022529765807 -7.4382106486180079585 8.5801294425730816329;-1.5783497711507736838 10.605216323615142215 3.6306412551741424899 3.3347963736105983301 2.0052088627864153025 -6.7692869677061899836 1.5653163920590906777 -3.5834615498888204854 -2.5704632791659642876 -7.6264392356427332942 -4.0727875179632020419 0.72074402156101524675 -10.332499248281921567 3.1357861152478454514 5.653188466554088798 9.0453593421818379028 1.9261534098428141348 -11.289167988520718566 2.9614364177318153182 0.45551855400903223936 1.1868760386284302744 -3.7927600477208338603 10.337459968000223043 -6.3512447812169963157 -2.4256956944500656093;0.50424068315261139084 -4.1524972864543343576 -6.1882442435916766854 3.3678694921086593794 -0.14240746850899213549 0.82087721327793383708 -0.79805603634380339884 0.88673325037061334619 -0.042831357667319665261 -1.2828965598545312154 0.42332519636957216536 0.19122505397520286885 -0.36220763027528013467 0.72864741120486953285 -0.3548713301778368967 -4.1484830872053768402 0.17650899884870524525 5.7961902622981922306 -0.88520103757561696689 0.39904535813331498684 4.9190356616323125394 3.2939042074740791932 -0.48632218665901849608 2.8218703334925927528 -0.53478874036574119977;-0.39660860692252969395 1.5164813934519096872 2.8858239721819320955 -1.9591395177368189362 -0.088174850738310772691 2.9942910981082202504 1.4062434334488467247 -0.055898755532729521578 1.1199894174452635909 0.60505659018828816809 -1.3288696924014140599 0.23741181164552616067 0.88345868280831552077 2.1534731556061035285 1.3408670601834238312 -0.35946639264994650897 -9.7333562576294934132 -0.86254320159456576711 -0.41896829955353337427 0.88415382935740949311 0.14269663030272961013 -0.0093043806387156750837 3.4374949117239870233 12.869064682329199201 2.0815912049286158236;-0.49977040223311536282 -2.5645310599866761869 1.407228431408545033 -1.2786484974912459833 -0.95646026734667755065 -0.22923380148887875785 0.014826002485670083594 2.1087386257873390605 1.7057847689678871106 -4.7906637465099102258 0.48267348346426414141 0.85100257013785951532 1.0729268928336788136 0.66803186545070170066 -1.9155560949480512356 -2.0931507533548097122 0.072451520300651828244 -2.520429700203800305 -0.28386452658749716793 0.97911242775320983522 -1.6344294896748157164 1.9827316251975501959 -2.7497660866685560421 -7.8785782008504225971 0.52613151555481729726;0.1036734136881857643 1.8464472995199592287 -0.40429148347897442273 0.67232712917090520222 0.021745621069059892921 -0.2294321881490888615 -0.54359610801649682621 -1.2347740628552221764 -5.0166593255028812948 -0.32779150237282755898 0.57678371876955036868 -0.38940188136322345658 2.3381429508299604869 -0.19591900817587371009 0.71801907243200280284 0.4267556532072235842 -0.48286330228712137647 0.83984459139663636407 0.2980618103311563627 -0.82966677760970641842 0.20537772413890037493 0.35389780493113748294 1.6254464644120178995 -2.5377824593028650568 0.53589594526701500588;-9.4640973780852082342 -4.8903086683142928948 1.4281442016778764792 -6.2581714993853880813 1.9853935684544132823 -2.2597654146804075914 -0.62720390571946849079 -1.3337558289468114392 10.496370408104784389 -2.2395911704646374041 -6.5575095987854750135 -0.70842934056634077056 -3.2644688377959805159 -2.484594427485152579 0.45490623555835502101 -8.2862017921172022028 3.2653688249749741601 -4.2088072650702512689 0.94545160207437239919 7.0727594380310288003 -6.1976949909633969327 -0.60713248660306384785 -1.1009168101455717448 0.40457012007820358779 4.4151528734693838985;-0.15341311387263145694 4.4171061832835460947 5.6948241383735798138 -2.989117629116942787 0.10226276875768056107 0.65985253606891103306 0.42025587370847816704 -1.5388996675136334957 -3.7186331158467043068 -0.25116441229516983658 0.67504089216103690951 -0.42860364552652019388 -1.5054778757196476402 -1.0132324545977127173 0.30107436167285189788 4.9841865364068915767 -0.6056880324930542514 -0.40731635803689797415 1.2035823919210097976 -1.1134585885952952289 -1.8491855063593378716 -3.0033219162900226529 0.7482701388329537906 -0.62532513585046667348 1.0378263239292759845;-0.90350058492127105492 4.91813748132640427 -2.4188531111472468815 6.0219641809983013303 0.78984713025398922692 -0.21073802551285342188 1.2405169781657880979 -1.3915536855673518168 0.40289631014970184175 0.46399347182039546444 -1.2821682753021568235 -0.21636673904514891476 1.2141608762965465651 1.1771363152335378999 1.2842573047489245219 0.84552076912282370103 0.13274644747858435623 0.16029764612483179964 0.41558096936747146444 0.6360207286520931369 -2.2152809902679400089 1.0934628638381915788 0.61337220335107600633 -0.47028358674832737574 -5.6428077596023680229;-1.352429580658418562 6.143658079558347751 2.2048688889577556793 7.0556196046901185071 2.1313998839606744795 0.14603227015800865352 0.28725560054949672573 -4.7238775616792745282 1.4461830863468549957 0.74954967722848231393 -1.7371855783824321495 -1.5219212944015494404 1.2533611579611743103 -0.79558520699044843472 4.3141644793609170705 4.0100957532973584563 0.06671324216445856381 -2.1480131243059559232 0.48887868304319720414 -0.59022922448306092136 -4.0586333151927611596 -3.8008277361985252085 0.74842613960199766421 -4.3991282235173345683 -7.8549115359867549557];

% Layer 3
b3 = -0.1901631284892230378;
LW3_2 = [-0.63606128229133007679 -0.20658626986277087156 0.077097708426504096835 -0.12606931204758689558 -0.087692582948878661231 0.0066306728137043640867 0.019198286515222491577 0.085272888890293024877 0.058468774452648010487 0.14073569784261738547 0.099157077350288003181 -0.013997548785227693913 0.084150204545968762537 0.21625108987774824265 0.051896479696743054444];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
