function [Y,Xf,Af] = ESPER_phosphate_8_Other_1(X,~,~)
%ESPER_PHOSPHATE_8_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:28.
% 
% [Y] = ESPER_phosphate_8_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.9150497670397648164;1.7043112465506795594;-3.0544708911371176718;5.0689361136590216361;3.5507885622716650609;-1.2722209249988498669;3.9826235299474346263;2.4558471302768420941;4.3301600380494136289;-4.1428420407236865586;4.1670006789658744495;-1.3045695052213990284;0.62317985566033906597;9.3940170527143003198;0.40383929154773640091;4.3427494901905268065;-4.6785593558709823725;-1.6048301989704958359;1.3763071432806190941;-0.8220134017172139318;-2.0665068394534866769;-3.3868252003829004693;0.61204357467689074479;0.84088209378913203462;4.4362018302832604277;-0.58380405539460034081;-1.982218237407690653;0.97231479694659883606;-2.7288790694424176486;0.38328788636494914854;1.2264281455016914357;-4.4910893013668884421;3.0503719614855402398;-1.5880420277420901343;2.9622355309770616039;-0.7516000678349522568;-0.95383590861779443681;4.2103438383288542823;-2.1318423896362217462;2.4050146252730510987];
IW1_1 = [0.14452646705001295779 -0.017720916136297309995 -1.1036075240614509063 -0.30972240018886826318 -2.7140648960214068808 -3.6694721659960798377;0.13593473807398920306 0.036598658561475212736 0.4186105482950471246 0.24655638258436521348 -1.5438530674239490104 1.4115086773732286041;0.057803317331085894704 -0.37035000973121051659 -1.253742571350994206 -0.73786319339101447135 -0.29044555017935136387 -3.218646156859243046;-1.6816429564580592793 -0.29383555121000504151 -2.391620337795105744 5.9781241098653961075 -0.1291129122438479937 -1.3483503734493509363;-1.7267776181290079851 -0.13063184672422359367 3.9882777673105471727 0.61708655521773747576 -5.1051164986490649156 1.6595197257036649052;-0.35274628548395792205 0.0090910324503286291803 -0.11385904505711416657 0.53090885709280699611 0.084463592485173072388 -1.7811014607269095578;-0.16851810969963046394 0.011891994843081322986 0.77651012108758521446 0.055228392959030828124 2.3263486337276431115 3.2036120892490660417;-3.3713293623690629985 1.1855411402004178978 0.013642436512529542217 0.63081937557463285682 -4.9114901030428743667 -0.75330510497632741096;-1.2377320015660953079 -0.25567248837026346209 -1.2322738483825355083 3.1764323272723458125 1.16873262680632517 1.4129159148807368673;1.2283411659699126073 0.33242838530539042807 1.3196985556144567031 -4.6633196968715031616 4.0176931795169439354 0.55616326364220869394;0.18059057023720720414 0.047975490845335172496 -0.70266293604139551388 -1.1430585099934407189 1.5547458299394643078 6.3141549896697970468;0.22418171129797839769 0.14195777119688401946 -0.25779584857799403563 -0.42276464503756511215 2.2584885461103190174 -1.7590483390530176067;-0.83011438304386953035 -0.40937082001793428931 -2.8559319852270279583 3.7114905643065752017 -2.9869964454406883192 0.99294844234632595459;0.25857840605441057003 7.2288211247364060341 -3.0890456169730793334 3.4773538682002409494 -3.6133083485188537409 0.6164545994423124009;-1.2385068579580935655 0.25928599400890522952 3.8735095906962562218 -0.11835048131648458203 0.45604554509830397269 -1.722008320672030024;-1.230534892137272962 -0.25798742741430685799 -1.3477203171175176077 3.297138014931511929 1.0702032089279061022 1.4235907860641248135;-1.0152654057639287632 -3.3648754119700767795 4.1096273758636092666 -1.2362689292786184225 -7.2749918385889884576 -0.54305639612339673405;-0.43291342966684381866 0.43423357010159463476 3.0712176607804817507 -0.24304480675298120729 -3.7278104225048167564 1.9451252638655818217;-5.769758106894506966 -2.8657669363934030748 0.52201340354976533131 2.6426667233872773721 -9.0272839209649564651 1.8412545278406386995;0.35815247264191391041 -0.52540059123283777698 4.0677966215730112509 -0.78988854448793410779 -1.385128160482925086 0.11772821554652732057;0.81114681163525526042 0.45853961554438910087 3.1620288271150940318 -4.134073175834266145 2.5653877987512316849 -2.7182508056911607319;0.093652563466934013459 0.044413073698737023931 1.6520154697739548588 -0.90447315600720212814 13.98701052963402347 -7.5662744283256317956;2.0127448954222773025 -0.24316597111488494343 3.5369639316763192838 -0.59236255959233308221 -4.8583389652073876164 4.1166695603347864818;-1.6928787466097630077 -1.0148915967434781749 3.5646262391447436357 0.55573998104482802418 -2.3575598056379547529 0.45826328410038336125;0.089904223156252682791 1.2331484273537169916 0.27731606419146020981 5.8627812239857686194 11.618052991506431226 -4.865802281657802375;0.20196381546096042747 -0.25705327953971135457 -0.023457970536201761674 0.020073102967689219339 1.4650985825564317722 -2.4128754790469999492;0.17536135404734959353 0.00435693428098667037 -0.58609271578319066531 0.36320599857608215633 3.9369094986083479348 -4.4257193267575924978;-0.46387089155610261582 -1.1293072345479238106 0.60600481530064775892 0.30970155887434575037 -0.97036599518855171098 1.4850570963158638005;-0.63819468335720408447 0.30250769279648798138 2.7214912441818190914 -1.772558132917876339 -4.2735743860335766442 1.6428447340560854428;-0.24045876526606010937 0.49100229662995459323 -2.7176295658093629903 0.66276981447980309881 -0.062485431938306905397 -0.17920436298761885374;0.71252022263202452468 -0.14309595049265436129 -0.11978236676982850772 -0.73274033266160065736 2.0492336579099972305 1.8407557171283748243;-0.22913017013561659541 -0.2227301155695475543 2.1594053910975783417 -1.6868335387239559164 -3.3020501369505415035 -1.3568362170112768794;0.31598097732357999234 -0.19421251585432802722 2.3545380558595954135 0.87053875232149746655 2.2339551426198038797 -3.0020928851653465586;0.74007183878547055933 1.1315847447658990976 -1.5676823452930750413 -0.44849339993637499235 0.48657209282686053609 1.3832293662941961276;-2.8563803025822931403 -1.5983200233604775153 -0.11269687621424227808 1.1081623775787821096 -0.51539369940893020594 3.985528790662628662;-0.28288122225916650931 0.45900191568365183992 -3.188283568517146449 0.91374885669868888272 4.5856507377238653334 -0.79405185206202688608;1.6504677767697106816 1.1021576509678989719 -3.6654733681354674246 -0.56434831805826479734 2.4299296500825064982 -0.49595118218185707537;0.031003798624262411676 0.15842470267793984373 -1.9581708600725633573 1.8291382293830804606 2.8458904846161972024 1.3667322573394335983;-0.52137109450268581679 0.39783191467031941979 1.0524380825393677696 0.29435719679508476343 1.4962234224659722859 -0.38500582805419708565;0.34554394503096930169 -0.11118076713888605522 2.3318607877543757745 0.27663638774005722132 2.1613382441449275895 -2.9316014014905724672];

% Layer 2
b2 = 2.1043715813680323734;
LW2_1 = [-6.2875655606355680405 -5.7435830733576747065 -0.71479759030318457125 -0.50246850577277313299 -0.28351137922531777225 -6.6004781064286595083 -7.2054400978442139092 0.092385106131414082564 7.478409023964553981 -0.58270059099538906722 -0.62159003497264431193 -5.6088207321314307308 0.78266527401308505496 -0.19061698802772822359 0.36857374739483617088 -7.4701068285660072732 -0.095175500261305737149 -1.387249332132372226 0.067545448647113690011 -0.8858359377026219228 0.66377135338511994433 0.29871792271445007927 -0.28889870734894773641 -3.63385324427667733 0.13128321045536273104 2.4265005019489258586 0.99837461233146607142 -0.71907580463903475465 1.2578321590194616597 -1.4218536383000772716 -1.6610374867217616579 7.9441257444071373683 5.6205791538193627943 0.38970200613765410003 -0.1705146688998251947 0.39155445083186390942 -3.4157901095247402701 9.6913665419202885687 3.0178766459941002154 -6.2995752101248889687];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
