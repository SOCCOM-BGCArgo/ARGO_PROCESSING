function [Y,Xf,Af] = ESPER_silicate_9_Atl_3(X,~,~)
%ESPER_SILICATE_9_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_9_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-177.232103709389;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.00425400504498441;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.9767166727783367364;1.810877100693990327;-2.4969394895090579745;0.98324633137216743695;-2.1472148025822619388;3.678359001272208495;-0.24137144572572782897;1.9474514410904038009;-1.9863594109812059418;-2.2970632138373767717;-0.04952115626928613179;1.0262689585197404263;-1.2503449076398345241;1.7903728225250614692;0.2355144881730566464;-1.0714794421241320421;-0.40967317594580654472;1.1259000824417797482;1.3167099685001057985;1.9437415422077677363;-2.0878973365947204321;-3.3101881747524126709;2.7243016255453547103;1.4221748725456908602;1.243580649520744652];
IW1_1 = [1.1168288551108933593 0.7204294257604160201 0.23386154476477452602 0.097377342568210567553 2.1158047936181487714 0.19405910370364520823 1.6745548411675967859 0.99258171095337788259;-1.1805561207190309325 -1.3362253110497741559 0.016413281081829458191 2.0089428994597433586 -1.043985236021163221 0.78976608265712577861 0.47471210330448282422 -0.50235146451346357477;0.28073634690807930392 -0.31506445091235529832 -2.7700846596321526683 -2.0001671137472558648 -0.90027978077108494759 0.32334307348582630448 -0.12339248592250831593 -0.33746930027703969657;-0.55706217839386706903 -0.67056261783608006599 0.89335625737697321735 -0.45335573483779284532 -1.8140301152113558203 0.43729589442113353526 0.13335841311286711353 0.96287241493934105918;0.69221182754112309254 -0.15376535658829856845 1.2103953880781421759 -2.2770919978803529915 -2.8852440931861549345 -0.10146323593365666471 1.7455327437136509694 -0.80039060419777685595;0.089708996244068459069 0.29046093820481844183 0.16192975658928493443 0.33949238697493466788 -5.7235247958928852086 0.011676105696633166942 0.35511072774280338926 0.30830245542013295923;-0.48655539294953903395 0.56281742409822443918 -0.82017682442098560625 0.69196692323981456862 0.92860569402399151251 -0.75245559464840316988 -1.5478723936880125489 -0.54342796627821210453;-0.63192509416832798319 1.1477048679912047469 1.3828344196547379674 -0.94667025417815897637 1.069485135259715447 -0.013189169214906405758 0.14575708645813501008 -1.4696295487016217685;0.74729868357614148699 -0.17465672998021505857 0.29652440174649985494 -2.807666285085217428 -2.7891418742623699245 0.24485289223897777067 2.9797695165866144862 -1.3366438465454404394;0.11035143690668908212 -0.44718318705623133491 0.21326747087668421199 -4.2010286364122508829 1.0642824111878130822 1.4547192980477203772 -0.81254204657083017871 0.58727626202516780562;0.033101969058250371725 -2.8546272465308928368 4.2555181439385085795 0.94988208767029180812 -3.0456389546163129545 -1.1949371812215663358 0.42761399960142398857 1.2743009853445821378;-0.30896367435789556799 -0.62684791705264242268 0.82184468911269892288 -0.0013396513797043069216 -1.8440814976791892743 -0.55382853617899863163 -2.060268427020782056 0.31850339014744138977;-0.36602836212436884455 1.4845832273258143807 -0.04622271367413952059 -0.62041360597585359926 -0.0019931765336365786512 1.3897937361819672208 2.0412274574982696151 0.27024051737914484006;0.27409693078633412533 0.26658827416805935817 -2.801839428703947199 -0.87759870544419626981 0.37557755178168528154 0.23390986027830143468 0.64023247293007923275 -0.22644136806368225789;1.4318267608735180119 -1.7617775097586005906 2.305643022409956 -0.019855553215413646734 1.0416415305048492002 -0.31618600129498658502 1.648161839020905628 -1.5527649226136686078;-0.087912038570255091052 -1.0467032785917644855 -1.4465245657816183655 1.5241601536734152855 1.3302878525167181056 1.5181156997950855381 0.79298680649926400754 0.85013421990699300501;-0.57940323710269214796 0.2209657992285065653 -1.4439122824669927692 -0.92114095411883689657 0.85496673075964513266 0.64184541127579508579 1.4563033591812695189 -0.26653938480860855931;-0.063039980765678876873 0.49548104194123143706 0.59872716233782863338 -1.9267088453415919247 -0.40275168544899364598 0.16742279657622072264 -0.55604553056323935412 0.75122572521170583038;0.098575379325618633919 0.28614130589814829042 -0.93389150959767674998 2.1541162383772851641 1.3987556850245690399 -0.29803880188894793513 -0.94689932704266344121 -0.47843638525315351773;0.42871115003333298832 0.080707489587846778512 -0.51144505690050245938 0.90144075921601762857 0.22093623550087396201 -0.49807592963352792514 1.2907998091663561713 -0.019168168298887618833;-0.032569719262101858026 0.16901279120494339114 0.17230608645231679232 0.31999445795824393857 2.2955003577622399291 0.18119726220507745285 1.1524701509126640264 0.46432987954836257849;-2.3271901436262476537 2.0115422528885464892 -3.0222302149444706387 -0.32629194219170043478 2.9259274896496343388 0.20697366256549792896 -0.35083596905454084158 1.8239414812245413611;0.76838793969391150362 2.2255235452186252765 0.7925045305975096932 1.8277700960014882092 -1.4227819414131952502 -0.16296623765182502441 1.2164246167554284561 0.062362086138180873596;0.7574391058682712341 0.39654021383679144419 1.7351002341144539098 1.6124990484887566922 -0.17035787572378227606 -0.56117891467735425692 -1.3074375343590984855 0.93895358498737113706;0.20165389812886350129 0.59548930412363165754 0.19881718542103776759 -0.42239225675890795797 0.056848881221076036363 -0.022722305776511492192 -0.9685173367921738885 0.54250898859685403597];

% Layer 2
b2 = [1.7051137931850735008;-1.0977290387643472425;-1.7307030027000529504;1.1117268579496801806;-1.1890744139371072219;-1.3877110225151203515;-0.49614764051663950983;2.5012904070819503843;-1.3129880460007368193;1.8936821897953621807;-1.4267925875949352132;-0.62344547747086431766;-1.8659321167352405091;2.0964848645690592477;-1.2426960905832915572];
LW2_1 = [-1.9052293233090340507 -1.3983862140104443839 -1.5012242542119085265 1.5780235999475042963 -0.91804046067367439665 1.8096803451590444123 1.779443589765425271 0.99489163231704358381 4.0092723007638415567 0.79896595331673192497 -0.29388949329352442863 -1.5480307464803728656 -2.355208984054158794 -1.2949735373594528642 -0.13326691740724924684 0.010815469988097754089 -2.2496270375921576523 1.2859187971565231301 0.86180414482812184307 1.5363948350505789442 2.7198667721717777468 0.12836956615872036069 0.36013018577054362046 -1.6628822437221333352 0.49170885513643253217;-0.58251682164201756819 -0.92703808992079272944 -1.5476384838204444439 -0.56144287280453319955 -0.040115858045978364244 -0.0050260992234712961735 0.36661708058697672907 2.1313364200065865184 1.6486513272480927128 0.3059839638844207288 0.74962898614704276401 -1.044235842288582683 0.37692101307209280314 -1.4117646856363486041 -0.95716461537912322921 0.54049354234382673834 -0.17656172778884038355 -1.5020568669560541153 0.96032664949443380387 1.2478633727404946363 -1.4305458937236017469 0.34193792673773859558 -1.2519825283121492898 -0.6156657774108036385 1.3003411654780938633;-0.57770806254993778417 -0.045173533136640686703 -0.15058566363593095527 0.36717483031756875667 0.28226969978553201335 0.22533310576603385322 0.34282873152619497414 0.64335677886500475253 -0.076465889570577455503 -0.67869603921076027131 -0.12265954103566610589 0.7677077991456618955 -0.16641834738600164156 0.86212209258213035046 -0.60620577558495369885 -0.17364134330100786108 0.53826697410049872961 0.93780342766757507356 -0.21258757306715977964 -0.5879719620980644601 0.075233957784458252438 -0.068109751830223164148 -0.11166399429202604476 0.17675312345496013711 -0.97663323924891354277;-0.1979414127035601656 0.7985733719850557355 0.1158252995014701775 0.1593307743913261465 -0.23038586709788744233 0.47392983430191581995 -0.17530363902221793304 0.24389454819126762941 -4.0688482592639990676e-05 0.1913186647590595646 -0.1491040854339411581 0.066847135461772427822 -0.12749945150601063593 -0.49178277665512104555 0.25756166147449044423 0.42410118805779106754 -0.32531442976546931511 0.80078815850049522851 0.13921883532782683424 -0.89829014339989721183 0.057955595503344364827 0.14118437654026269601 0.33901869560057051878 0.056666975794470726691 -0.26331075482089771889;0.59918283935016203312 0.13900179723456485004 -0.34069848550462111803 -0.91952870165355826693 -0.077880859738352570254 -0.39839833977452271396 -0.081988996196602395572 0.22280811110925463625 -0.43933303922234612227 -0.16735742842725412349 0.12333882456932664107 0.34038383549595335742 0.51058649262938993196 0.33729787338037436895 0.93865451059473947737 0.22032355354542182413 0.38841366675345939674 0.012308350930603348741 -0.40999819270822562833 0.053505029074126367328 -0.23740185347037440211 1.4071965591685287045 -0.03094436838750251606 0.21193815045824143661 -0.29971323240770436636;-0.24715338730290273284 0.69378838332643422149 0.50294877576688323817 0.43751073503577642132 -1.6339940992884243176 0.74453576978863822422 -0.83499206093551692209 0.38672431060002093739 0.90077154893753408338 0.56322590801655081361 -0.23558467615841438558 -1.3064749435449378723 -0.50675500525524153073 -0.15826895220556361221 -1.0305088799468131722 -0.30827088713029976441 -1.3552399060080280169 -0.4421268742036803534 -0.7437555913000856167 -0.38520678328654534006 -0.63394772054530590388 -0.52249135530279156026 0.92440343147548786895 0.029178221866075576552 -0.92048519307059728511;0.060973608899327284838 0.15054729701971344968 -0.63498039702679620611 -0.44941989870273590935 -0.4072472129769552085 1.0561117743972119332 -0.56722446915201185647 0.59592667616726235913 0.10507166040874994783 -0.62452917702929844346 0.03891800802274757165 0.79271592811586699678 0.099832449670842607348 1.0411817475993496718 0.12936969276393675554 0.47208553603221747874 0.35707594851007190551 0.050487038153207902669 0.35372619193016768824 -1.8222164645953282669 0.13111268614568788449 0.73132736343236692811 0.25002817624932949236 -0.79215864338485253437 0.19318937550812209647;1.1540482473794049234 0.0094022462434071620019 1.1868245562730646014 1.1751339725714071704 -0.22602381070044577638 0.6024430746152846794 -0.41354149449016053275 0.63710435644996854521 0.15781003172567628634 0.26101045622719998285 -0.85553325446892170003 1.0832059306730621451 -0.37759076811688491171 -0.17528211583408526142 -0.38696834669255752992 -1.5585690432100747227 -0.31889614397444310256 -1.6262615038302616899 -1.3613042685499339157 1.2659078415937499162 -2.0202977341618217899 0.7828931314623579496 -0.25985694477561671611 0.46487336102113369085 1.2069605894490056386;-0.059562239449907163069 -0.67275468331586418813 -0.25331226053298094847 2.284282515388856627 0.75023906523075600816 -1.3387264871983348691 0.26123536149884468704 0.59476198599215768237 -0.277364932197752323 0.61788494294067142221 0.014633519199585845461 -0.83012052636512012604 -0.87180696617573871787 -0.077284755626631396197 -3.2523554016671178957 0.34113291973027859427 0.1320072209901558824 1.0829812879638107681 0.7038456462291189375 0.12353421845434944815 -0.25642503744473627014 -0.70134124633325012343 -0.2022849656729669432 -0.45828800160683541565 -1.1052854513015160087;1.1773216566816124828 -0.018364883965765466112 1.2227365654460033983 1.0566787077170669562 0.52671315723123679486 -1.3487742019085726675 0.037868045929788873849 0.62895303392667001319 -0.42264808330749992216 0.27182515900562764788 -0.70255531428447914877 0.75627652706387304971 -0.38983220308686744593 -0.60482464374037203658 0.047284746721742473841 -1.4059697654255387533 -0.3595056897039756727 -1.3932079724658346098 -1.0539620259529351998 1.6532275838409105084 -0.33984322456256293998 0.71192908128410659074 -0.27228821751639464832 0.46979666167827960344 1.2167421428213571755;0.16507904240842527499 1.1573884440804342866 -0.1041928162034333194 -1.2414119826596063945 -0.87327243082461658563 0.6534186289632887279 -0.27847488283730359448 -0.41167443835626404969 -0.16756101483445101641 0.33979011878207804331 -0.10995045355203578175 0.29491288816101129955 0.41716772290951720237 -0.68546393757600743157 1.8897681881645440605 0.56584807819532090267 -0.34747083762949992902 -0.0067127586367167028925 -0.85629765782950284514 1.0149310646520568469 0.31847415221415192876 -0.59635677393074604247 0.29857545968710569317 0.25393109006855446586 0.61900206894815190672;0.32563630674279753219 -0.10449129625731350124 0.016681477326082813639 0.5584178587720380893 0.49845910498968176716 0.39481632908221658829 -0.48349581691481186008 0.70416605656190101037 -0.52089252765619831198 -0.49435484481227470743 -0.075385045516004334232 0.47435433571996465929 0.081860544893211512063 0.92412238467520657625 0.94973478394690091786 0.028945508500671297825 0.29554770237383309883 -1.1044380273501022138 0.50654499585085177582 -1.5806375918329051977 0.21393126469242107479 0.55955276802446429762 -0.0090499409790231535866 -0.48740485523827437042 0.26448152797079005349;0.169062461621744764 0.00679500299215907589 -0.74358246339434797001 0.12298868587676536901 1.3964936112719696926 -1.0092080254423003716 -0.47687415761135465431 0.23020942592276502636 -0.87370647357750375051 -0.52449297422331220275 0.043084526740615566864 -0.4502013737504981794 1.3952614685083690738 0.90512820711809349739 0.2374266792282685723 0.75026679638705340292 0.041567257351906423957 -0.71815924571624734085 1.0403191549883925582 -1.5162638070662632916 -0.2570184767769562173 -0.34947502559897403174 -0.12764997218031787218 -0.080175685851259365089 0.45860383298003110086;0.16286663414173771502 -0.064776448353584856199 0.16258895348374108325 -0.094611766855026674383 0.2793737846453343554 -0.4317250993797726033 -0.23797486861247110768 -0.46236993002788007168 -0.20422148021123806561 0.43446821796631190926 0.14129513012213806844 -0.99047144366372719126 0.068659651869139748381 -0.63171604077901688523 -0.13743244324358572239 0.2347685472749153901 -0.49100470854713812452 -0.62489655100281282785 0.281156674976364096 0.38525252716024299682 -0.85380855412805556348 0.50965503102870413077 0.047916085918010449529 -0.26623544395940834661 1.0669912060002493259;-0.19155282860781636112 -0.053538557571606991414 0.036748203118685464352 -0.18960274066034518703 0.55381606232717606186 0.65344917245516376259 -0.51022863557192732475 0.91050466233886273582 -0.43202195920743241553 -0.34787001918680776624 0.23900164938134188519 0.40397486075695177021 -1.382539695755115261 0.54530338965278768448 1.9145730681390349393 -0.23992042292015341998 0.52004137180850962263 -1.3107624830403570293 0.83588803396980249083 -1.6491694900336952845 1.3109843060502306411 1.5684024544605408291 -0.32950182281877404833 -0.07189407880879276902 -0.29922426468244295306];

% Layer 3
b3 = 1.9774820096100040878;
LW3_2 = [-0.29565494955165932955 0.090046458775438889544 -1.1175403191597310659 0.26063615946402984846 0.87497040136290171741 0.35157891708528238306 -1.0776921776502523809 2.6646117515892497885 -0.12936494490340738617 -3.8460318291022042025 -0.25393292918514653866 2.7943500757015899971 -1.3627766045298030928 -2.3435452010666755207 -1.1028543254618967673];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
