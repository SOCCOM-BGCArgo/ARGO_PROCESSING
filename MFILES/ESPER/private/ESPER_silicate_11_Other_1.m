function [Y,Xf,Af] = ESPER_silicate_11_Other_1(X,~,~)
%ESPER_SILICATE_11_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_11_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5570167218971162626;-5.9812447759776485867;-12.28970598402317016;-5.2339262863942401793;-0.25858717930739538726;3.8796396951317513313;-2.3834074728291891887;-0.71902830351026836286;-2.9753657352501430289;-1.0340549881077050198;0.4786869432151246162;2.6551328775524125625;0.53604204263339383374;-1.9195910269761251588;-1.5812989015610572352;-1.1523947464033974519;-0.25089244430477442016;0.53387466318463028259;2.0176611755471660636;-0.48367006839508880356;-0.80641582674422185306;0.66008070533797269519;1.2596067719679449048;1.2070541775871905799;1.9181202243349246839;0.21364185615999198298;3.1167159413339717844;-0.62738504573252285024;1.0628419226623562199;0.94652224761864844904;-0.021346374931116580964;-1.01422565821093702;-0.89019489727051825945;0.32373662363808447529;1.0770299309216280204;5.3444470698935768738;-5.458668541277648778;4.29166832569054435;23.462690909986132937;11.264056076405090323];
IW1_1 = [-0.80784490626959082338 -0.4563404233484225081 1.5923025700557935647 1.4164041624270486963 -2.0099144354786280253 1.665632377608925685 -0.99675507491685622075;0.11443996619748236787 -0.059489223686871123276 -1.6490389098405178192 -2.0121600847720477745 2.524051842854971639 -1.3410883500218460096 7.2196910924079515937;-6.0990464812901397096 -1.0834940352875281899 2.8175108467870058071 -5.5922320683021897736 3.4600949262772893178 -0.9020841948031229629 1.2731690674935256524;-0.83684547757276617208 0.64608316213177408027 2.5537555130634563838 1.0692346882322594226 2.1759179609698335867 2.910719410589453382 -0.8063566946505349442;2.0172934656480658866 1.3437670120127740425 0.14077309577624938508 -0.98624702661097596312 -1.2266746574984463969 0.74518655653432552821 -0.80616940884831500558;-0.26272556598741858558 -0.10525874969499124378 4.4798133596596674266 -0.42215904587276287252 -0.8158359078756053373 1.9324110487249976931 -0.75626048123194611339;0.43315176567175767142 0.094729404494001037684 -5.7037428558289322567 -2.8116818148424775892 10.048919113272541281 -0.20862797352687767471 2.4366192113123581464;1.5479245780132302457 1.7154840487444746877 1.9426819606675891361 0.65560025245658160031 -2.1955799750486941768 4.6361542436446310234 -4.3297634249297001219;0.42009953329093646657 -0.35635994900989292899 -0.96008345373350056917 -1.6998416293923523934 -1.7909076895458659884 -0.32205464307460068829 -0.19240782274832485266;-0.10128306521094335158 0.32128701429770079034 -1.4181496444907368826 -0.37568079117720726279 1.092045532097477345 -0.42950135138610423535 0.99749865525677083866;-1.0198743562976251287 0.020924361429502599113 -1.7894743169361122526 -1.7558384669496744923 2.8452411527950394188 -0.26051510789383641731 0.27416262715182776466;-0.98033959216214061616 -0.48462540931874692474 1.6535390746002209816 1.8700633345694883669 -0.33705290211807514833 -0.73942416359045948226 0.62133830225467612252;-0.16687277889373602902 0.077365376864795387668 0.027636865231138837279 2.3810205478235557663 2.00301605055972054 -2.4247982215482672963 3.4716570397869688236;0.13114536023972422907 0.21570974548403268334 -0.59486844994227927597 -0.038710128084542154425 0.48764539510731808036 2.6409257870285580694 0.41274803763703987736;0.72867912576155735582 0.22255209989457211406 -0.84126455793536059069 -0.79495902814651808743 4.0560262594701219641 1.3315274072195508737 -0.083674305767271181522;-0.12430755467548824933 0.089358301446735441398 -1.7634121126389896705 0.72909644679381235832 1.9420570367365181941 -1.3684449177719772983 0.84317732025969882592;1.9541655720728223766 1.3032451004980252218 0.1274048648166971609 -0.9669803362963123039 -1.1818188482412828044 0.67337811997603069791 -0.75581081583994025319;-0.15891529196725751039 0.075971554925754178345 0.034298528885131129851 2.421815006504750567 1.5612024052701756194 -2.4186118593218455253 3.4131392965279023777;-0.58769534572967807584 0.54124952512819402006 2.8306126192376792616 -0.41024697146665711767 4.1693325165752739281 1.1876488240632283588 0.18172175471953269654;-0.90033675104913135634 -0.17639452033305888512 -1.0775834076639236869 -0.308557287759040344 0.54253879198764787262 -0.6066112160074160764 1.1821602530808736908;-0.1963250897323779165 -0.40551946224814250375 0.59136251794268268611 -1.3308474503651408494 -4.7396421767171901251 -2.3796962299315045364 0.00037118647378725586755;-1.5806694809467414231 -2.7241488964298761211 2.2513234289097736607 0.12740508112497073157 2.9489958784269725278 -0.59672427256133886431 0.60777602198241043041;-0.29016773423030139956 -0.21202859970002904677 0.92130193025349627067 -0.65428715168113349421 -1.760756544994299011 -2.3574426271080821671 -0.67817870506017330356;-0.012206526644519079261 -1.6979924784203916932 4.9005245733573339351 0.62964068780946413906 -4.9534116210947178871 -5.9283712189419004446 0.47053316167522113433;-0.003299524260163205075 0.051308154032078251428 1.3087342111531830025 3.7455594780501466623 -0.37066796916044486565 1.073698262887170074 0.41822971995580382476;-1.5802766676951043312 1.9153507364613167052 -0.6512268975750411526 1.3848588311916529836 1.2546918706653809039 0.44597409927364828341 0.39611832717290562655;2.8786268618012620379 0.31167216720896651072 5.5575402661345094657 -1.819438645167622548 -0.27238165002699771255 -6.5200145848283899142 -2.1204571419859283843;-0.12266561561706493255 -0.68402375502386625339 1.9742696061159257237 -1.654414498747532436 -4.4171432725234511807 3.3416796320470969484 -2.6238232429544754432;0.054560730972399600069 -0.29139643650457330848 1.5870568535861822035 0.14786090036040125395 -0.94329519624129143374 0.35624320838323714211 -0.85567335446588332903;0.12068336933648848852 -0.35611637831815801114 1.1763128154601449893 0.47732584283029783068 -1.089576700016001265 0.52143871840140787466 -1.0592531115529104646;8.6619943128659304676 1.7314247132956503972 -6.731858993738728536 0.427969065220007161 10.626053021220428718 -2.4716221060638408069 0.38604441657416671552;0.007337729377477129715 0.3112680471342198496 0.57160189244564296729 -1.0797679929781949237 0.013534616867076649377 0.36040619788145805691 -0.19571513941637774803;0.14799314612651320866 -0.20435788516398312176 1.0700951650862422504 -0.67209063359879128718 -0.94162157231873411245 0.61945580199557814804 -0.88361509782860359064;-0.31721556282846130603 -0.37759623981237222523 -0.48422509792800072503 -3.6411101505677621049 4.2146459816077417315 -5.2022238907886340087 1.5412620733671196227;0.028521621412826086289 -0.27690585765405256735 1.6598242241799032737 -0.065980844380823702733 -0.8414740066633348281 0.37354111259941663592 -0.76503957423966684193;-0.29276428178744445807 0.11810529435995233138 5.7354476303937884651 -0.23483598500839214518 1.8926039903037010781 1.2962191720375155768 -0.40035990965375484185;-0.87225229280715399494 0.66871840732117804329 2.8304900749353807399 1.1543355440461209316 1.9402322996272320932 2.8976914030494360652 -0.55846489615957806141;-0.34385494044218622989 -0.12027228614114654492 5.844164957479493161 0.17734767611188784198 -4.727076093070544438 1.6755132722121048872 -1.4148105990739519022;4.6792359407952188732 6.3604934590081407819 18.152848079247490887 1.7433414054961624551 -0.15909452974347682019 0.39344873660136409077 -0.34206151950618746138;0.021180212308397724369 2.3117693285214784282 12.688209934646513588 -0.535807521297062328 6.2290418288112929801 -1.2014152861514344472 0.35296039714106758334];

% Layer 2
b2 = 5.6644443940763844481;
LW2_1 = [-0.74771619180939918881 -0.14401061902877951293 0.087026020271577422815 18.090622381253812279 -4.506368851958324484 2.5991136873027929077 0.069000178268838849305 0.055596325050917903832 -1.0614269952315769086 -35.324895112804838959 -0.18338659317253494518 -0.29857810419949343261 5.1717483946598745703 -0.74567361384511177125 -0.30772171112712465302 1.4315219571628643447 4.8081998777554293412 -5.1107404338473294558 -0.29357588069754353421 0.5675757834884512798 -0.21925693544852012384 0.0748469719791777649 -0.73858561826443502873 0.0440766162285257182 0.2036100526164162372 0.082054057999538451695 -0.029706699349096404167 0.20153653659855513824 -41.89819872467074191 -14.932546758526351383 -0.037413136964547712149 -1.2092224425609374716 1.6031339254811369788 -0.13439454540501308277 22.373514699646896986 -1.9380258269066346077 -11.897221507937343787 -0.71796030924961917741 0.10309329184943416546 0.12499437207888035306];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
