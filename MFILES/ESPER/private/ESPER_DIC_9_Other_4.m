function [Y,Xf,Af] = ESPER_DIC_9_Other_4(X,~,~)
%ESPER_DIC_9_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.66674842474960061001;-2.6825558571626051396;-0.53623876435708439647;1.4727452478397928815;-1.3238382596592621621;2.7627674275915503621;13.182499130761211603;1.560271022613509917;-0.82209415191634993558;1.2978458442962952368;-1.6374340690023900802;-0.096994211084717646409;-0.0094961517082694322373;-1.9685746387794300638;-0.23282313382037606031;0.24503652340213397109;0.56167880220043242545;-2.3371391991917871422;-0.98161300381242866386;-1.8275612413475275098;-0.77442843669037408905;-1.8233451167284751016;1.1736007607683287546;-1.3707693838751049409;-1.4574485040636875333;-0.31104540052210727374;5.3336296608348572335;-2.1651914345562870423;-1.410872851384598281;1.1179365914131276227];
IW1_1 = [1.1808617090801962757 0.042184885751471515314 -1.205992909580474004 -0.66326083587984929757 5.9078072446966354292 -1.8212319339042841726 0.74497572158998948133 0.1858630879214692444;-1.6224970200740675974 -0.38131354536113976073 -0.81444835355220801532 -0.065830882954950056818 4.5698134879988367985 1.1787065449196363343 -1.5290156877592033791 -1.2391003091709764661;-0.092359711915999218035 0.19170231557640998732 -0.45528021630158288513 0.39297442486702277575 -0.78887199038285793495 -0.34632848647558456268 0.40700533100246272245 0.097789984450914801961;0.015589485728498494316 0.077292987195953621882 -0.083066808783354373347 0.2523065892757532791 -0.10223066395982294274 -0.12235211445162555433 0.31831738021777755687 0.15961155304791505016;-0.047196304654053992944 -0.039348125467970812563 -0.34480821481790008276 0.25925203385471129458 0.60302706408347594991 -0.73795668798808600197 1.2543634553878197924 -0.21801183391257583644;-2.2008828710584089627 -2.174366813675372434 0.30769340536947115128 0.89690072056471636941 1.0594867852948117726 1.6411866339402187975 0.31397270137311567018 0.78084097866747037564;-1.8750408630988761871 -1.8392960548728896075 1.6044392585423083997 0.77802085803254006358 -13.972036730522505721 -11.839908476342762 10.364005709922448517 13.902920943782627106;0.063758553112596705326 0.32405248481440440678 -0.50472277352347805213 0.83419411009821176073 -0.81412349292930508149 -0.74725908585744871271 1.1997794624306328259 0.13224641030317915713;0.090713125376130049338 -0.040771271497232017267 -0.54593174139943079215 -0.11516553076408124479 0.55910613211771897912 0.40749957813499726456 -0.35609785232549900913 -0.71327455318609245261;0.027114536672080972318 -0.23058862289982101634 0.3438908279106754895 -0.095820366974431234186 -0.029377537579346482688 -0.11643238255689880578 -0.0009530368482883232531 0.61290203343297833261;-0.016115061457242351589 -0.052031032439214391916 -0.068357839230192715685 -0.49927346667199501429 0.38796777862824072258 -0.54247510288667966094 0.14640657819447316923 -0.69608600307576473654;0.26607868595248784782 0.021070066906633280746 3.3299439845972838015 0.64027315246054927744 1.3864019135341938416 2.3437208501616293432 -0.39872011626758385727 -2.3537028581542531747;0.32310586774580918323 0.52991434006468474127 0.23495218664880998527 0.33014488518910928283 0.95971618616032905447 0.29839099782677458439 -0.77111616043634534368 -0.86573488114747099154;0.15347029680548132657 0.41875237501844381205 -0.22747642906932877271 0.23249428043970538083 0.96555234370005682543 0.22133138561952608869 -0.3947485668333248765 -1.3618728912215818383;-0.0052873687242388995103 -0.083306069575031907459 0.19249021052972753454 -1.0737663170869760076 1.5469189586403466752 -2.2258789527738893632 -0.0739455698923578153 -0.30864157857666857376;0.061828176261550314707 0.16535851543803001262 1.6137352583355246693 0.34332534748933291047 0.81175799256824021644 0.47549587760903261335 -0.44009777157447083074 -1.2315354970868548357;0.013848850056061179359 -0.055352061866020915715 0.5770182412574278441 0.22037657236849717002 -0.22745940593627428372 0.33016969617057906339 -0.36959690813864598535 0.3480016015575395083;-1.0535122762476882841 0.32310178251262794413 1.1042133564647895749 -1.0707199417624886362 3.1235275064685747992 -1.2623311915620045731 -1.3266283356190378129 1.8472906249736855688;-0.030940337753974814922 0.066092672046498157634 -1.0313652510916000438 0.91107754287932551929 1.0984639867926500045 -1.1793081619750076516 2.4963007159570498317 -0.25282918962518241557;0.096887409050168654678 -0.50876368000467331321 0.11703954703274194182 -0.7998198461303971385 1.4286480489030020102 0.14367351966558122855 -0.16447355473286853766 -0.61922971795560721731;-0.20924711729209405364 -0.19799497778721983354 0.13533505101623069522 -0.30947480041077701785 -0.82508513834760488503 -0.020591573360686871164 -0.4943877132150970577 -0.24933443511510083868;0.034214260999923258588 0.53249856744753498727 -0.74955328322735848001 -0.76460939551551609927 -2.0477043043575200443 1.3175774117689789122 0.42491923117472790716 0.32220281539821837846;1.2076698665257517007 -0.27186959870296861785 0.3087040624760618579 0.85746498509905588747 -2.6943995505460764939 0.41281878675164357384 -1.5476517655927897188 -0.74728412414463185609;-0.16048342123951994664 -0.184708289775300738 -0.020446540581425320243 0.11415018637334681251 0.92795166146254981498 0.12077382637153914746 0.3950410870122206819 -0.12555378490609725439;-0.27636969726620513876 -0.18230805454013054856 -0.35296908663616238799 0.24147198234104749748 1.2663858357339883298 -0.13096808392166423007 1.4230564550498048249 -0.0045093096447694127477;-0.011204770001288838141 -0.11852784981253607077 0.31743132985564537218 -0.18248055234459317764 0.74515717538147252519 0.38398740605539227744 0.09155915534161396252 0.4973740120124909847;-0.38645025252614589872 1.8642064616315285885 -5.7613204011099155011 -5.0279405899104743227 2.1219829036770234687 5.0382211190181802607 4.5912340755547296212 -2.8438293065579500762;-0.071297117059651665683 0.021215954410559088872 -0.32449866588374953746 -0.28395872066539701306 -0.0049272243820113539869 -0.67029413915402169533 0.82315574491082621478 -0.69410679562198207559;0.084062912074105336502 -0.024418716735755990888 -0.64889318852149058259 0.17779654745717796138 1.1376302072246375907 0.19979098324886251925 0.67555132299975584331 -0.20225220928898993145;0.2076807293667373433 -0.42664764878858735253 0.84275651896704895094 -0.49270921434283587725 0.84303453308625531104 -0.12764413404040830802 -0.2938473362891019236 0.70358321354374575574];

% Layer 2
b2 = [25.416421927815687098;-2.1259514872646692041;4.0784951978070367318;12.028278669119879751;16.187064122036410652;10.186403462824399568;6.8275897289339360086;-0.69302653426822613536;9.433884441254702935;5.4631152783752501279];
LW2_1 = [0.099537976668107722156 -0.29246630378944388218 7.4717676176570249069 -9.7383519254775592344 11.907513290435595366 0.26630362131051454888 0.043230200553366536498 -1.060158276561334878 3.8062302587600647108 6.3114435477787438344 0.36917240844553411705 0.37326288381107464165 0.13770927243965816467 1.2828071637410682904 -0.14285209689819913792 0.16822772957173914854 0.36895921935587050466 -0.11091501290533284374 -2.2134173878805172286 -3.1860142009577119282 1.2028447773187231906 0.042281212250829425248 -0.17855894792736334842 3.8149435565187528319 -2.4180641804777605053 1.7462877024297478457 -2.2178397129899929396 2.4502478146654440572 0.13059093034560409485 0.74581760303101418685;2.3116341932262032266 -0.60566238442518860463 2.620646129085530962 -6.1333057063428189082 2.5892611427515359601 1.5230971428674890955 0.085355605304180431903 -2.071650317598817459 1.9687176806303943177 3.0041414391290821584 4.8500386187160238194 0.37049659149731511976 -4.3803564396972296535 -3.6802413294116056441 -2.5587603803792742241 0.98340202084141536965 -3.1201587318703003504 -0.99024329234440822134 2.3298359789532403497 -4.743181090530968369 5.9249049569913507796 -2.8859883672048476377 -0.70590387591400860501 -3.1381145783019745998 -5.994301220361765381 1.8487661753660109554 4.1609073958702644802 -0.70485562000907053815 0.66598813780446763921 0.46030901626779302527;7.488760163181333418 -2.9882920701727253565 1.4289185716652583746 0.6889879843158900341 7.4271513681968430731 -1.3741248149796403411 -20.996332299130202159 -4.7309294538405133324 6.4650773728224608661 -0.63632974143175269344 7.3065087810380955347 -5.5850592183372613775 -2.392057964454222585 -3.0479727685889312916 -11.963601814662190748 -16.938648654661758286 1.7612292320680817959 1.3329039046831889781 -2.1698400642463977483 -5.7908539821371975975 -6.8593012190947044715 0.027017584019571341813 -4.2699120810912649659 -5.5514651204918044058 0.4418010885413588551 6.6177981436566879481 -2.2620781749306257957 -11.644114517334672954 0.82107481472752641416 22.31888053365049629;-0.39617133994658831897 -1.1829489252770157837 7.8034198250416100251 -17.397897539991589611 7.2639335088155929654 0.81394928975333935561 0.23909735914552507352 11.185974261933559148 17.893581203424940185 13.367002401041684578 -2.9475433028881212749 2.4258366470272023641 6.240136604298257339 9.5868816271042938126 -0.41758390542045764615 -3.8457908161724696505 -9.068943328222463407 0.35319441099374199178 7.829659926076504739 -3.2018156002787971914 20.961914223106269617 0.4500597907482873361 0.52473749694724558523 12.298349622611334908 -4.175974817035761788 24.474039196950332808 -2.7229666747871110744 -19.781895067623921136 -27.080778542516728891 -1.3423864009310919609;-30.66446351352067623 29.068619771559845333 46.638008034975193539 -31.152276826942422616 -19.655205844661608694 -1.0528052950343655958 27.673674197330704772 47.87386490910589032 24.13531867482226545 -4.2713004970870898092 -4.2098378990840350511 35.683050217033873253 19.625644044872178284 -40.151162973555265978 -42.287117746081811731 -37.105497121737521127 33.31409429341893258 -55.562860428377923938 34.670284198838267287 -3.1436651795381922447 1.5203482091700566414 38.558536339485883104 27.005669050906654149 -0.80995836193831016736 59.344884656766382136 -51.976708403915417023 3.9930572391049170555 4.9359704234632895137 -29.654537919706662308 -3.0191694241134801047;0.018920189979887348797 0.061451101497883769964 -2.1176709879126494052 -18.26614866738147569 -8.0475811512618715682 -0.019322167932907616944 -0.0029370190402533843076 1.9439798006756521254 -1.9123410561149039033 8.2277808761906623403 -3.6426096247979722342 -0.024540233717532666802 0.86765364968603808649 1.9916607810231981013 -0.18386586736018278865 -0.024336452631158671939 -3.1730434416181085844 0.025182113110178157289 1.8890197657911209639 0.36788685994645453636 0.022812078789168042936 0.11473556884712102222 0.10303436426087694833 7.1359909364759195327 -1.9947018096064874637 -0.68520216759039376253 -0.071538972322928814918 7.2628668297671472587 -0.85225511105413731539 -1.8366288430318757907;-5.634078562028358661 1.0020007271004771621 0.99047161044543063912 16.07339579017558151 1.9982893952475053734 4.5733684951756901071 -2.5783455914968049782 10.911009036585776144 -8.4862668421411910913 -3.0760070209060383917 -10.52940745694196778 3.6968715889399392793 1.3109019412632643142 3.117151442229093572 6.5179286714921280677 -6.8846890496996442366 -1.2883352443443889523 4.5583584260685023892 10.309359110488017564 0.8965016507745355856 7.3688834602035342414 -0.021426404220326766836 -2.9302096513526949551 1.0291025847634094337 -10.696565638449536451 4.8845105244004596301 -5.9316489300375101479 9.4648607870400436326 7.1317566645005463499 -0.41085292986763094492;-0.027086554296058534125 -6.7801836631696597024 -11.299737088823604836 -6.3204524316988335286 9.4945017131317257508 -8.1222855484016918126 6.6960879104022694719 -4.4739268972252945744 -4.2713865125007917101 6.995456241049880397 -13.908474561614148968 -18.138469665245178675 -4.8856335879164163316 5.9195420613517084618 11.0051059964817739 20.685863071589793094 -14.174251107279754791 -6.29824234581492437 5.821484490273270751 10.770024899735721746 20.048381184184837167 -14.323398181290396991 4.0568000199696960806 -6.7121490796023630665 0.94857130946275891592 0.064012688343776852351 0.27868720947552183542 7.2849086308963002523 3.5110492601818434899 6.3301270337949446798;-0.3574811098185930458 4.8165536529350099215 9.8357027951764859353 17.391328935699817748 7.6861282582008261244 -3.3714683452549851772 1.6106516610943477641 3.9083718604605337532 4.2308482508454643423 -3.1267181376160024797 8.6774941658962863045 0.31669571148131936411 -2.100415555750444252 -14.755318758493517706 -1.8104906677286833894 -7.2593764817244643694 -4.8782530637360181913 -5.7991730093127795698 -3.0427057268474717588 1.8670355118419212914 1.2593412614074881439 -1.1265181816249261182 -0.034626762961938832575 15.401064065515281953 -3.9126593223673795663 1.0389055628554375588 -5.0111900246990188634 -1.2561341628674187465 -5.7345456951255124878 2.168181963514594468;-2.8486560408775476461 3.8813823906255109364 0.38763303831483969519 -15.775699877594737686 -8.247644659966164582 -0.53777615999447925255 0.077088586409940804134 0.52097631408647493423 5.6717763333025423833 -6.6450859069425582959 29.454166255798131857 5.8732527313171525307 -4.4642319189882195829 -5.3105193887463570945 0.98827781657963775785 -7.5057068663123329699 5.7731585201936761464 -3.0364945970103778272 11.625514459694002767 -8.0548442113146059285 -10.309307961669180287 1.6055987337811110649 -0.21268666582008149968 3.1570793118726441229 -8.5690458457968041728 6.5095055524846427986 3.8964268692882173539 -19.494149800206713508 -2.7865659828264450759 -1.6306071448184147332];

% Layer 3
b3 = -3.1918885317656680023;
LW3_2 = [-1.9690952930731400183 0.022434321851866258213 0.0036346969645486009066 0.074597203000571501996 -0.0018799272486830489667 -5.7383148816785665147 0.0064815397236239616699 -0.00018524745710123770347 0.014889753904774842216 0.041146902647528467434];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
