function [Y,Xf,Af] = ESPER_TA_10_Other_4(X,~,~)
%ESPER_TA_10_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_10_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.7793371733913387889;1.0194346513852030611;2.5313078288953949624;2.3661023234252436254;-9.8523050470132034206;1.8605325286543121788;0.60466418772652197333;-0.99864404546722262968;2.4777853182461071491;-1.7048663889729851473;-0.099382554302053602302;-0.50582504801828787055;-0.16005518863524736961;0.26492194089435056048;-0.18389589851824686417;1.3923631342001574485;0.51116684287146552101;-1.6713224585835813052;-1.6144000854159341607;0.34733556370611667896;2.8416623735884081192;0.13821797254399592614;1.5830715158526267317;-2.8051491945589890342;1.2766546395100706324;2.0002549370677980001;1.7684160165599074332;1.9082471569430348168;0.16958193690136574849;-1.8249781825257087586];
IW1_1 = [-0.20586399749831058026 -0.10047387333739535298 1.8738544945954289656 -1.1206445995605243127 -0.69206502345471332394 -1.0879898934402150168 -0.24759408684938771783;-0.46188785488567657422 0.13197601935553318619 -0.91665073508906658173 0.35261072805032384059 2.2457666716697723963 -0.53609366385225065699 -0.13080394553672805569;-0.17293962246121236115 0.43429562041681951667 -3.4497036594934766818 1.5125681157536408072 -0.12906344244347900396 -0.56382530277919118422 0.37479389377824379181;-0.99446021932578287927 -1.6336160141086326636 0.37693122815204299636 -0.35969181296903807166 -0.22569045526471975815 -0.35835675792634169579 0.13780414085618414299;5.0097001593790224661 5.7580413984797838012 6.0254069419258708962 0.85053232753986462988 -3.1189415034711909236 0.1335791318167456887 -0.26541504462429349465;-0.62049414775678890521 0.10474916547913705467 -0.97440864078657973835 0.73320145536535763497 -0.024449070957705563989 -1.1926927810469041269 -0.8164924843215162209;0.69411752140619575879 -0.45201480610981914499 0.36996510432052553963 0.3523756959169235814 -0.048037097780850808448 -0.45848099065104147565 0.2236333467541842257;0.20528006342967819453 -0.88818415890368473953 -0.35460455262952045308 -0.15154161576444097337 1.0387867179082002078 0.8419364817241556942 0.3604028466060554825;0.54230872644058725207 0.020451875942338004072 -0.041872930924464209224 2.8356020875277874183 3.2188001458647992337 0.92374121778806583816 1.1089998542928956038;1.1134189132741343364 -0.042999583860149591386 -3.5843223500815311056 0.68400037219203901895 -0.60720090677034277427 0.71657975497109061003 0.11700720648169229965;0.40802764268385915969 0.21290607225489513454 -1.9047451337118701531 1.7103326073265936458 -1.8833333140461245847 -1.3670362342106583409 -0.48422800044329972202;0.15081248190141560706 1.768747630921611913 -1.4750466056778148705 0.20709766302216894851 0.80756630658488659513 -0.056550817067516676029 -0.68956103247636235665;0.47743243528294793121 0.036054958387402226416 0.34660663537689984093 -0.97246857979908185587 -0.83836488267587438994 0.56487884160824664015 -0.096614546558279695843;0.18280232852099637109 -0.087376476648309470141 -0.44870071430585428685 0.32414595385544286987 -1.3205712939500366954 0.90393585643482821101 1.0586664458616776852;-0.04086683145088758351 0.50019003109285620212 2.9335169674706391696 -0.040185325551926158461 0.40249160651033200065 -0.28739849951155693741 -0.1963091483016173866;-1.2073616093344179401 1.3853437607952447941 -1.7094887272906695852 0.38177846457432906835 -0.97413161480473942078 0.61094698168291383666 0.17824007427246549295;-0.31249547379075259812 -0.10691160724566485529 -0.51762491198404614323 0.9002518835147053089 -1.3840535211040276842 -0.82457885091613902784 0.43221142984190713543;0.30389478894648241925 0.11848980100527405079 -0.1416965156543807669 0.57386368392009412531 3.2755902866960329156 -0.18019210034429641865 -2.1870437940861320314;-0.46699016443457058712 0.052419886059746990947 -1.8823316030221026729 0.93610334814500228973 1.2213506603592123589 -1.9475779600004587966 1.8039509756800695683;-0.33629159917054085582 0.023789656573740953355 1.114891674617304318 -0.22142046078800844966 -0.20584531774178066454 0.21889964061142233587 1.1138504640045714389;-0.45197343806645967623 -0.53446477837545114387 -2.9927988031296623994 0.80078238948252689067 1.7788457191535615998 0.6881412349474267387 -0.3410499058656555893;0.21670529577553920841 -0.018412020702429150731 -1.2974662783384331988 0.51364686820501259668 -0.43764726736438369636 0.14946669039376747623 -0.83013853705085960399;0.15592246826252170733 -0.19654236342931877268 -0.36147326945427948885 -0.46746582338558617664 -2.9242507207626666776 -0.34703455554855044962 -2.1466863070206061437;-1.7023415893879632055 0.61385102334859398265 -2.0198616580755897054 0.4138213555114007014 0.83891197464015898611 0.62667526372450021999 -1.3856033105927936244;-1.4222968883571129872 -0.27389841275093335105 -1.2360614186882512566 0.50764531611843533021 2.8612702145222281835 -1.6906489345145325753 2.1169232440039236209;1.3231852337627061367 -1.2115304890118754333 0.49449779669768495483 0.83752988091555469197 -0.81228123230201121352 -1.1033932339274061807 1.3116677293101075552;-0.3131383154794279422 -0.2084898470222688871 2.1681605937701977638 -0.67926713128261650976 1.144465072685052931 -0.88256510931335707681 -0.27669855463037379417;0.97643451808321113372 0.16724245701311213352 0.74518451045052647164 0.91287387065486180759 3.235587559743974051 0.22357518514093016604 0.051740765082014097964;0.37937573638394855857 -0.47660903906310592149 0.46281619145391128534 0.56876351087689813735 2.2899606131528003061 -0.055398837181464884172 -1.0408111952768752673;-0.12235889105597816395 -0.0059798045878517863683 -1.8261328686746567396 -0.37316694645828929477 -1.8345596881770489528 -0.63715133161317061283 -0.23526469868538685271];

% Layer 2
b2 = [3.2073574647785290104;0.038803805525850075531;-7.4615463644480204408;-1.0025871792656411152;2.3175143200047072511;-1.9245070637595942387;0.079027542870898387362;-2.3729703660769034812;-0.83438956640585737468;2.6691487846694106345];
LW2_1 = [-0.35785374322772872668 1.6109316398133204373 -0.16472575149924456595 -0.88384329408204631573 1.7576382459623860477 -0.6385906488747732368 1.2077250171322106986 0.59930052159649949139 -0.20446532242465503826 0.73499075565340121763 0.42012672828961816762 0.11053235295186081277 -1.0180442699934977302 -0.67650215641881306095 -0.30249670003913947669 -0.24883533689387826726 -0.74860219791746174245 -0.91332754236649182911 0.19971096327767323686 -0.6575167098632942464 -0.1896272258282680756 -1.7098155828041445847 -0.049152249109050152875 0.60580822935951439412 -0.32629120851568749195 -0.29509325892634596933 0.93576614706239635844 -0.05288727635626202378 -0.58208756442297504563 -0.30290232388829263499;1.8647532265624862102 -0.50409028601852101659 0.7811683313699976372 0.19324838482508116533 3.984582854505074323 -1.7312574334533987752 4.6783228295405354658 0.35936422447962035331 -0.21206234307927823712 -2.3609961350544219627 1.7760869939266725748 1.0069408542022768582 2.1511589776543100783 -0.51273069336865584322 0.92625681274521076691 -0.34849901810025918358 2.856459871933117789 0.2298179946385876804 -2.061472342266679636 0.64234758514809275898 -1.5657596166939691251 -1.4952632446665514721 -0.0590245179761519842 2.6958245835934260271 -0.069272166120630376818 -1.2262809526213358513 -3.3871121689746606087 0.38397618473733474698 -2.0379375716784529082 -9.4084909093840103367;-8.098447984739076233 0.73381426760769574713 -0.33490565781799130907 -2.6830255360896213546 1.5284323040270142435 0.58042051066558886241 0.22253876815283951673 -1.3616877746652558123 0.58456108793789907097 -1.0133607975759306719 -3.1781009243576612278 -1.4774188100422034342 0.22329574437353166827 0.93266261894400381838 -0.36591775015313432462 -0.012224144305870515703 -0.94724814324046990865 -1.8830369418547361349 -3.2193319440085383931 -2.4970849057425472672 -2.6230806939821338375 -3.7211274251381061262 1.4756080412397218904 3.0667748827530125766 0.53240129790233559071 1.4138671904313764305 3.473467575019865361 2.8989304021565049929 0.78031040323753908527 -4.9300010625256538432;2.6580728353478755288 -0.36211253051609704201 -0.79562705542560818728 -0.84307978016270135324 -0.58779518740071845517 2.269396016386059145 0.17417112691295569271 0.90200523030723189777 -0.30492546718371282832 -0.51745960018509462586 -0.7893593144729590394 -0.53710949201110214091 -0.97578907106219237022 2.4261454771521298035 1.1285179741727440206 1.3698810286696450067 0.83846350418577264563 1.0509908642047909311 0.99876090360765834575 -0.34252150918369750343 2.4789146879333974205 1.1097497624532492999 1.0738451346274024978 0.77267811213686665717 -0.10028857395332566038 0.62711001783451603142 -0.34572306400927993453 -1.8311064332784892095 -2.1029912694060022282 0.37774635070438028484;3.090439327491780297 -0.52754688865867094272 -1.804109930240589188 1.0638848131063369795 -1.6027378277304700216 0.72677156277102872295 4.3740009966573474287 -0.91525173808135318332 0.030605720359280708803 0.10770903489044329759 0.66870567855721418926 -0.45373273119797030706 -1.5572352056709199974 -0.96963093557807633616 1.0297138867615285296 -2.181650223303507552 -0.86640303717869793232 1.1246986751835807983 2.7751891522217668751 6.8193016436844020589 -3.8530664753342258599 12.755380770295110082 3.9351161047789329217 -1.069744352436164947 0.68370861974688301732 -3.0453738834924988232 -4.5991082199503843242 1.2762293378549807166 0.33518976644385378716 1.8538463961778293143;-0.057893120491747947221 -0.38154657176744188884 -0.30124471594888851955 0.72882584247340920225 -0.37820845957971871432 0.62249227783689553561 0.49876784834033716098 -0.28437158845888654835 -0.095181657564684066242 -0.36609274347562992258 0.054606542430383049613 -0.0082160037066656404353 -0.0029350898346027836858 1.1200129243724759043 0.14637719346859126568 0.24377110869779691771 -0.2733232317120660726 0.23497329733886382352 -0.77695256385138100619 -0.73145210608627786453 0.3208018833555592586 -0.55621425423028725277 0.0053155668445818461676 -0.12589028313086120248 0.051702193826984051139 -0.077036184859377743184 -0.23492157731807100651 -0.27959545859531098611 -0.16111115672713660629 -0.29726337001993152764;0.01202198321415364618 -0.45636763370467103851 -0.28261881947197808884 0.38698320199782221263 -0.37011722743693964421 0.47251364698667103204 0.79330507956897977628 0.085304771565948497858 -0.24185612268754197451 -0.076233427939862347111 0.33125641699859376121 0.073816331533728768433 0.027647561364135462419 0.54838854517805235567 0.10847444439755868362 0.098410142623208698986 -0.14333516531576670494 -0.0037010474632498732012 -0.92681141801364963495 -0.55521846655937001636 -0.80942465658296458564 -0.85370051365858512504 0.055552424085581836311 0.14761006866926953962 -0.095492873539421693763 -0.13966154118276921658 -0.32070447573456484225 -0.50138701576537048066 -0.38761055660241677812 -0.80167600884268386263;-0.2465734960793178332 0.4309128070578108205 -0.3854120082896768662 0.76560434586419401359 6.7770475946939674472 -0.31908404109539340032 -2.9871798722180948893 -2.8499142904467067439 0.88120081113583448307 -1.2172961816648040223 0.11035307871552595127 0.26749927531966616323 3.5003192261561162368 0.58718765730794653113 -3.7716306189932105042 -2.6696863943065030078 3.7796584449772128167 0.41183366236883711675 3.0478783194432672587 1.9601033910254024306 3.4761281837475768164 -0.9950681383426102089 -2.2966330219081565467 -0.66436100634353900674 -0.53851979518697556948 -0.63104848924273193589 7.2888709899473234088 1.2874641111622424638 1.6674409942543166885 -2.1979616075768193539;0.13103452615668448322 3.2327146445367742622 -0.48627159040430961712 2.2671706679822891672 -0.21862739970518679788 -0.11362940994039553988 4.7715417756694531448 0.50805611352382495927 -0.20492664716339570319 -0.68358594548297613169 -0.75675529705079691567 0.11882947390102351071 -1.5072620518024515412 3.1090567011278564813 2.424450047090132454 0.75641704744365378943 -2.090994398988554881 -0.17890090025267796348 0.95700509596835170445 4.6881435009328189523 -0.65707391531325143319 7.3303821903615125066 2.5907520730713016199 1.2774621694416326001 0.0038219942063323457393 -1.253110567005672138 -1.2576697171381914231 0.8880694202748287136 -2.245721055355067719 1.6134751786563055198;-2.4834856960351325839 0.08396112051422841005 -1.0077970151352775297 2.1229836552633618574 -0.51915402673496424679 1.5731004158913159952 2.7323683290344829011 -0.74608637869060223657 1.157802930627471083 -2.6964523044898855986 -0.58496870516305099486 -1.1054189962817664306 -2.471082690248791458 -1.4785473920983271956 -1.2807610284829973324 3.1227955668220821472 -6.1992062705794319655 5.0891544778349731004 0.17099029707523660804 9.8397490598973167408 -2.7941352307770950247 7.3230930420835020911 1.656962378677382608 0.68541836942146305844 -0.086130953251003838922 1.6308026122461363183 -3.1912986342174014531 -0.84766750334501883568 -5.3555872790392005101 2.4406541621088355676];

% Layer 3
b3 = 0.22541819907093071929;
LW3_2 = [0.4944660850105129235 0.053023743913504416125 0.061205866734305537646 -0.083519560221634620012 -0.038472222879208144153 1.1278704186127150866 -1.093782374417006098 0.032193932258365219601 0.063060604717777760109 0.034747426479056521542];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
