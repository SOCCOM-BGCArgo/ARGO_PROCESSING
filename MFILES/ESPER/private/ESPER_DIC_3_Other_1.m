function [Y,Xf,Af] = ESPER_DIC_3_Other_1(X,~,~)
%ESPER_DIC_3_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [8.2176268654565518545;0.179219821521503897;0.49853580640266309532;0.91540749985065816841;0.79555986854090132709;-4.3898251250960571568;-7.9732522618045305052;0.031131804834360003731;1.4824546767687289961;-2.4220540883014685107;1.1227220440190450734;3.0312700363553974903;0.19483269909903527806;2.3664939184784588022;4.0107253538722167363;1.4556260176387332272;-3.0769747768316246805;5.4819965299097841438;-2.7503136218882522357;0.27114499590982155119;2.0995418207008076372;1.3988254417461638557;-0.60064863000798252024;-1.0901783571312901877;3.6644004918888177791;0.39206973446711818054;-3.8145446226240435905;-0.60600135084620088133;-0.15468167078824701655;0.65372419345121535184;-1.1769956360946243201;0.95717585596501431056;9.7348566954613708901;-5.9925286453833566114;0.72669671053194018207;1.6375087254414191218;4.0181831534861371935;-0.32867164631514550477;7.8929358763795658405;-3.4450767488146776252];
IW1_1 = [-0.0096935167477326823066 -0.2091032223507309773 1.9440127474572943544 2.7083324833364508244 5.5930383567509158738 3.9563146686393668716 -1.8772024816018932913 0.88336704003886212799;0.0029470966293986024243 -0.14191028872058147892 -0.17725752651574161467 0.24003549504904952983 -1.05592553657701127 0.37012656948506572618 0.11856078701576248935 -0.14974783667662222575;0.075948115577581562508 -0.078381523330125768556 0.12718637269556667957 -0.073170595025401588551 0.064215573875912562718 0.47575028029239840865 -0.17841112941801637315 0.25299935865240869015;0.24068748784004898034 -0.98553315687624853947 -0.45342421288452539052 0.84539480064833139039 -3.8992940470225949667 0.87126577144869632452 0.81180282563516037442 0.2137583609506633342;0.37227832791907355947 -0.3392568186073338099 1.7760981066579231147 -0.20835512598078026469 -0.66643311723190434837 -0.26793432222125351805 -0.31381043927098839497 0.41527196400141130894;-0.26998424818494121125 -0.038962554536902900548 -1.2870773940590907181 0.37565106812161408456 7.236096540551733014 -3.7045975695942865435 -3.2113061824345732198 1.3660512351473297343;-0.21538818482878363536 0.37743175944076695627 -7.6956658867169283056 1.8058386318060144493 2.9495222875585818123 0.65279157690551237181 -1.7864935836026447635 -5.2125512897068055906;0.11448128918548720889 -0.30304307047759032612 1.0731855154407319297 -0.09853313390869199162 -0.42507417341033287839 -0.47939538382651675219 0.18847120219142454722 -0.025485390766317676109;-0.39312794581352394907 0.69318853583682649155 0.075319468466921446481 0.1647471592664647988 3.5347382861805192178 1.6771874966700028864 0.27665440426137360985 -0.0084680652865707622262;0.46779763676172686493 -1.3933584767037578978 2.1798660084221692657 -1.4981898571998324421 1.964516405826322476 0.71920699528886711249 -2.3811158605890496709 1.4623394952841504146;-0.7355788574285327952 0.010359404651517958515 -0.37966352264805769412 -0.17311951781607989864 -1.7657539657794556476 0.57331356472370920141 -1.2918592753687279107 0.41997918334669315232;-0.85684881559308034848 -1.3205895776275560216 -1.2106655571118123405 0.056374248608090669899 -2.6507197427900339726 2.4882566496076194973 -0.43077013669113378702 -0.065601000356455912987;-0.026521985587976804055 0.3470283015486689826 -0.95220723603661561185 0.079754491268925392644 0.43159492525955345243 0.55596907211389967607 -0.35113593212417398837 0.12121642769659728145;-0.10132649433341099632 -0.014088953034202062603 -0.033347316633286293308 0.25316150613366417144 -1.7314837243683254275 0.47468412568595569345 -1.4057997430616260282 1.7880447123002272125;-1.2728413670883684805 -0.687781820276190059 -0.5210295042702269841 1.6686925802631074056 -5.131230976675064781 3.8656251693451668672 -0.2123599034086582904 -0.5304467082779547038;-0.41313919538692128741 0.61439335023427898985 -0.023191092951489886836 0.31035583288222756693 2.7270753725261935863 1.5806848548867515891 0.66984764243486027979 -0.2343064217198373711;-0.60428091840298681081 -0.78194147536072922122 -0.018703402909362554923 -0.89616444349696211535 3.5018067719309939889 -0.43994011630953361314 1.131053659824281743 -1.6251614982187758685;0.27291668946108449401 -0.39112185772889906943 6.5624178983414687139 -1.2421763874280882245 -0.16616168625643307211 -1.8172108946507361527 2.8381745055036908809 3.3912596860554322653;-2.9500752441284827654 0.16012235096444840665 -1.0513162713548245275 -0.27273901138505313169 4.6475010752555112603 -2.0262806589262649659 0.95510340852346320428 -1.8434536234829339563;-0.11566447767537671454 -0.53588844854734773993 -0.43715984564880483454 0.05661243518066003122 0.72460584613388534514 0.82927990565226938902 -0.13364792984238046958 0.0063011856990419926397;-0.055961441022619698438 0.00090150163529464162789 0.0060342399089615217714 0.23722638090520176135 -1.5599062946822552789 0.32586500040070293105 -1.2693392880750100637 1.6171049873957712428;-0.23821381933893820415 -0.40542540114023212228 -0.12027454795776559848 0.003227339205399246732 -0.276630454548155158 2.0754075222509671406 0.25757024065253364409 1.1575366338421482215;0.076651384950571888055 -0.077082165161887455929 0.0021215894140287003267 0.083001671089498602063 0.5571136398620440966 -0.95974894534443211391 -0.23658557830957793744 -0.2225645565211877841;-0.44014026909374670549 0.37299594861439522298 -1.9851739801664953777 0.25146001508014398373 0.88753079208061502747 0.137120894986802494 0.45684097454254568582 -0.56531235146057812191;2.0161130649161589368 -1.0230074466125915755 -2.7581991578744684546 1.9596700570350504833 -4.112779210104863914 5.1939326687949192163 6.948444023228887545 -0.44107676547419255586;0.42561760844273899274 -0.54465232754989556518 -1.2456377023058267106 -0.067928435146689794544 -1.7043465933409283064 1.5462588368610836742 -0.34530960849920233624 -0.56944995373551976492;1.0635292693451705581 1.8356176999894373569 -0.27229511237688058811 3.3175934973791560978 4.7369864557688696749 -6.2112486057726119526 1.4633476515257486383 -3.4287465207185121585;-1.0309814936942496288 -1.1630637765449944876 -0.77879384306632670754 0.080648888199131602006 0.78434480523837224464 1.0377510217677521354 0.30686610119348023407 -0.49753961367733046117;-0.71827266809702550177 0.2217623947946642804 0.026127644788961498779 -0.16731272928769777564 -0.49571598574984371277 -0.59752919818378658068 -0.25219477295279135731 -0.19470780527188041864;-0.32646242971694172663 -0.55578856242265861631 0.29423314469251732328 0.18286670347500899592 -0.54096267612500748001 1.0661798873176748792 0.44675752192607504076 0.37410177038610814559;-1.822988785433078851 0.69103319480111768947 0.84930349309151154102 0.89200936348862724934 -3.8624016767833944108 -0.20224439404734292913 -0.17785621764963999158 -1.5023469719049802329;-1.6171597336857981286 -1.3810408166742758063 -1.0096562342688406577 -0.3458300136638939315 1.2670020478145176401 0.67716757079321709956 2.2567559520100335391 -2.9238612599452822316;0.94799199311635762299 -0.96155479625444373326 -6.1105986389282325177 2.5652598427946591286 2.6358698231457036165 -5.9823082816068735568 7.7725636385168277442 -3.7904754618643168307;-0.88399821201516437519 0.75645899125153570619 -2.1449397330357569125 1.5813387735415092017 -2.2425592705303158958 -1.0677070169774056652 -8.2809526639994643915 -4.3268155616733672275;-1.3105875265849586953 -3.6471241490975296884 0.89635461179432296408 3.3164294145793293822 -0.63936354728683342241 6.7324222770879611488 7.2324403117030948707 -0.61134735067671175379;0.11693281932304810944 0.83667199857967866627 3.0382035495911137168 0.12617927338100540235 -2.9523029243370202401 -2.1819073531614012751 -0.36650138349762145795 0.84961574693031205463;0.12791703202921342331 0.45175581397422748253 -1.0340200238130712318 0.66990760876776478394 -0.30009850249443692505 -0.71973963359539117057 1.5047000093380258345 1.5926916650450939628;-0.29641458615864302306 -0.3465366090983491576 -1.6119868033069786328 -0.43764881106835412661 2.8743712941816008666 0.80340222287481211083 -0.78039344733417814748 -0.28859749936062029096;-3.1630613150330231242 -4.5397878836277012482 0.20160318377798311373 -0.75320572322648871033 4.6779645208150029134 1.2224792305336671383 -2.4288030824563127119 -2.7376401836668797785;-2.6844945478710555697 -1.6846540719883651427 2.2166459423616697855 1.6460103715568066285 -2.4492679658852640756 3.1451726455009265671 2.1030524498466522942 -0.55096768902665249623];

% Layer 2
b2 = 0.34528915310678293116;
LW2_1 = [0.12877504521767565993 -2.1095833553397405069 -3.8778983799445332359 0.11849255376101794357 -4.3198559418982505065 -0.051040872410465364106 0.12533607361144080694 5.0745958315595025567 0.40890561222237603589 0.1562789448843188711 0.19659369480649321882 -0.068932273546982628099 3.2780156970900389268 -2.8833386879105331602 0.035545275347983039393 -0.49558870980981917231 0.11435754821741137 0.15098406778547029949 0.032609916504452877983 0.95302036755518282352 3.5656560524062985706 -0.37787291413554280339 -1.632469348303511314 -2.7024588571570760109 -0.010123935305216808997 0.17144402442979830847 0.017938306051844647715 -0.11753214641485733305 -0.75661630532620594014 0.67298023019928943089 -0.063228876905951469922 -0.039277037676229205332 -0.079266444230473423471 0.028500546503428036971 0.013421683871317308459 0.097632436008389292259 0.50142440923149944609 -0.17460392526759416221 -0.21074766827514535006 0.10159857231886812445];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
