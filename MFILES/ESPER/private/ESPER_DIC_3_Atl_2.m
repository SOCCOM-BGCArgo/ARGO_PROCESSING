function [Y,Xf,Af] = ESPER_DIC_3_Atl_2(X,~,~)
%ESPER_DIC_3_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-12.940793681733286036;-0.43668301940539594463;-3.2432268958051695407;3.3344120852531720089;7.3251176975022973537;1.2297788617417995116;-2.6917391318405008427;2.7933644881321031406;2.55101398938296553;2.5041834351303138284;-1.2653606072288430262;-1.1199948524891034651;0.31340571292531155256;-4.1570335591089939697;2.1173329542494236932;-2.5915006151704051973;-1.2778487977420180943;-7.2307850397395290187;1.6788767698245279369;6.5464319391812448856];
IW1_1 = [-2.5507221978638767723 1.7564523541255099293 -0.073753932263299154526 -0.99955817271116298439 22.626593601400426081 -1.2132773778212770921 -1.1358156916756416699 -0.37502561882132801063;-1.982180704707514618 0.95930145766405716667 -0.2913933895061915913 0.1504104905975195694 1.1790197068575150041 -2.6346588985203105437 -1.4734981004049103603 0.79140575609841767868;0.1536327553135211077 0.05967338240389748194 0.14539340637906281173 -0.58261612863677569862 2.9006690117321922706 -0.29456726179980757818 -0.81043935221874408015 0.58597158909404456484;-0.27254773937019011187 -0.94121400627369011804 0.83028908745866236707 0.10183270059563125087 -0.89925641506877185272 3.0407526593858462682 0.72416044008255675557 0.60820157495698312644;-2.9435285991648370008 1.4959931792330141143 1.961157925195529117 0.82402768025576522692 -5.0024385139249796239 -0.81048748888345356622 1.4288286376495271668 -1.0573715293550474126;-0.30393433083718024434 0.10300624973792522898 -0.57787863761124658168 -0.11353261176101112073 -0.51614768861353521601 0.29982527660391133928 1.999052706037693028 -0.28720204912375701944;-0.063194202934565305019 -0.41417411743217585895 -0.06412468506946616964 -0.1810052539519878545 2.2249708014376676779 -0.65525073922465626453 -0.62455469001682550889 -0.0043079470104056341584;1.0658441985208959579 -0.17807872153183185171 1.0894199925047356459 0.23408862396520990767 2.2945935810565623036 1.2657082187400221507 0.22994643598498112902 -0.55122375853186988959;-3.0124650250702815768 -0.11758915378885793912 -1.2411245749192045817 -0.34435652674111461025 -4.730611944368575017 -0.44518964119236531518 -0.88891521253421679205 0.92266640098935870373;1.1348601823741022443 -0.57776754558017584529 0.28915965340956117924 0.53094527712017136611 -3.2010386107084514151 1.0416543742006181272 0.65834839091643448938 -0.93438252650527187093;0.59025616568228256309 0.042466011419032792529 0.061215763429534983397 -0.15175665949907457541 -0.18427052137361560336 0.33643009052564681882 -0.52076686414914397094 0.04487364914189999332;0.94003289717399518555 -0.69344151790522978729 0.32659291145450247695 0.33439482866576930586 0.98379284678782807916 0.23581240308534887062 1.1142357436797694081 -0.84659877462178478869;-0.12170834849716107018 0.010717552438060128084 -0.0099502385026056204553 0.094633873343436827885 0.32656555500488693156 -0.063249940006752561339 0.6816524921069696541 -0.063359585500265963587;-1.6710369513339540237 1.2537776172798300589 -0.52769820822327617726 -0.12215361052586962143 3.228091100543406089 -3.917434068751702636 -0.76990233455146928065 -0.2404972226225431664;-0.22294054036646449024 -0.2472889560422046884 0.16859726848575934399 0.37628723540073133469 -2.2092246083538382706 0.19335719095431369574 0.45972055234994052553 -0.33002729829282761997;0.98822186398943734353 -0.53125398865480522037 1.2582577938724326394 -0.084813476570145748812 2.1942947603267861645 -1.812211330115639063 -2.4614289087171785653 0.96427320912061031954;-1.7206474106455338369 -0.59381582600096771696 0.073407962374258353688 -0.30921055939789937606 1.3692068454336536742 -0.77510053404779166719 0.94238788543275042731 -2.0715122678067467987;-0.71162096971393606903 0.23759844529475415698 -0.40552207723334449119 -0.57023016133552328899 9.1063287415700475691 -0.98939810526444249561 -0.88621590575656450373 0.20148965889140621477;-0.2187786508139023256 0.32915670310642991536 0.34653396670163094662 -1.1102379868288747566 0.26954132389605306441 -0.76412088491118790312 -0.3496141694993099569 0.36378542915265749125;-0.59759672208795844295 0.33601464994047774981 -0.69611501047553570043 0.89161264153229624618 -2.7117579054650744474 0.54707215033038203433 1.7020373947082856336 1.9982714473731899574];

% Layer 2
b2 = [1.5826101262757874544;6.9047149607788851355;-9.2342793726923098063;-0.43756472737580415222;4.6465913768178248588;-0.235305068160375358;-6.9336817379118400595;-1.6466514133721994462;11.579271724814505617;5.9584293991462331519;-10.543867576149365206;-8.6604176403349182323;14.487593163563325049;-5.1535692634125949141;3.4374296549776670595;-6.4527305284266889274;7.9983138358784922062;-3.1553491853619139995;1.1832829969539861992;5.263362806843485231];
LW2_1 = [0.19116895808529862921 -0.21898721929155176569 0.90487582528208188037 -0.078493875871295887281 -0.20296579615057191992 -0.27932376827708388367 -0.53100591427955101675 -2.5685167380607065724 0.16695419707717842894 0.30128929661256409478 -2.9422448704853629842 0.0020182235598009516664 -0.88094599099747694648 -0.18078781824573497694 -0.1728006478481189101 0.11488994920329387295 0.15706267247307162394 -0.30107291106590577945 -0.25108018985447527749 0.2437100304577652643;1.175338335217911423 -1.4467663024182946252 1.8589819789741013345 1.3465682846483157942 -3.3683164165063348428 5.038442798978437942 -1.5682879470177535364 10.54253697530225331 -0.43925931456093986194 -7.2269726741024680194 3.1322051556642738213 9.9918596578436229549 -7.3704344486594619568 0.18257897218526986105 -16.728811114416540562 -0.046570641726221329026 -3.9326802705228667278 2.321747441663061462 -5.6303759864677074276 -0.50071102594620842119;-0.32906468263473115377 -0.49747006288117678885 -2.3404984437023323984 -9.9797680774462271813 3.4448323096046609137 -3.5201408929576989415 5.4187960606190754831 -0.8182490081400329851 0.027630182313604607219 -6.6218369222491242354 -19.939915593518065862 7.8125734439846796775 2.0845182640911450456 -6.4609527132863942001 -16.338939899822381818 -0.63698649212771285555 6.4129368301515654593 -1.1773372340400911629 -10.228677419144705851 6.7576005850797917773;-0.30533234618148796802 1.4859562738265941206 -2.7008877782817379831 0.69095574823837224709 1.0843498135526425941 -0.53889407761423202547 -0.86199656236699739864 -4.3264914831081755509 -0.57716171136086547033 -2.7644063807544916322 0.44774880051870480369 2.6761446056601996268 -6.3367088251942513821 -0.42060150728934797559 -2.7954518182012488836 -1.2550149183975565226 -0.31967209775283744744 0.024484118315364598178 6.0352781357280198549 0.36444780919594799151;1.2535948671817154221 -2.4004436199439682653 3.3291781946910115053 3.7807034666925094513 -2.0523148333715242053 3.627149303103285316 -3.730387573693129788 -0.63988887876053446302 7.9497437055320157029 -6.7816545057984631839 0.037085379365386243744 -3.7391349511850791032 -1.1552649951644275994 -3.512871190908851915 7.9248912769320281058 3.1313464065398108893 2.0818756635025783552 1.5402992551283887224 -0.16412738120423481236 0.63535240789313618404;2.7020120866291295059 -4.0397234060756757046 1.0611436669001752531 3.8392965413848547662 -1.6140577335792081204 -4.1466297001079395201 -1.1680767376236340649 -11.78942976248342589 2.0203389472848960473 1.6606683803168396096 -4.4508920942228762385 -3.1666944656188062979 9.5788549848050834612 -1.4665136612741596078 1.0799490489073388932 -2.5379055929460507812 -4.3862263549403417429 1.6452177646605050665 -0.17151862745524654175 -1.7674308634260977868;-4.2951656970111580236 2.8713737855296117552 -2.6127078213211332169 -3.0367534615746696325 1.445626655642376468 6.5660730051292617304 5.2302199380937031137 4.9077490971650687968 -0.93919881567785234999 -0.66294255912678534681 -5.9067583377232590891 1.8280947309716304439 1.7469706425624296209 -3.5419812116990763151 -9.9443778974427043948 -0.17762698277693644844 -0.24104187553737274619 1.623081937315113521 -4.9541956566722058497 0.55957812928485572979;1.9984935542834969535 5.1341402001784244291 0.58190321670004052645 -11.520388014398852405 0.94032096012884525127 0.11731177481415944186 1.115581227270152187 3.6374935790761777632 -2.7604252666208548561 6.9781291882103166913 4.4202179262723371167 -0.98300938476714283532 5.0195925195349735404 -0.51527555886645426408 -3.9457063315814964177 1.387132697365013545 0.5878675772836191582 3.3499858710675538553 3.0610478355960744068 -1.9654510140897842874;-3.5295502033531329644 2.1080954884476019728 3.2004057779706331921 -2.6936229929040642617 0.62194363200160562855 -4.6180515754671942474 -13.221956191915506196 5.3443571751049168128 1.4954939866280705374 5.1654816489644828081 6.8175875956988942761 3.1961481059251606318 0.80220841593825664706 3.4695820127446168613 1.8367914933378211018 4.3380412897527715899 3.7814851893198073718 -0.07124950939389308735 4.4306061704296002546 -11.007651446874138657;6.2702795886205020537 1.2627646505794540843 -4.1776770617372323002 -4.7014282498144313038 -0.98663967096781368671 1.1538418260460343578 4.2873092109083303924 -7.7025257278308885134 -3.7988595427504900925 -1.5569704567980136023 0.6238217665095835418 2.0623720490596464394 2.8289252975904144449 -1.5481238550154863276 7.9909346295252570158 4.3083172713138058185 -3.5516727179517015855 0.80804499730911372168 -0.87906207483886289467 1.3744826751015883914;-8.846398539195652333 1.381778885930322831 -1.0370687096615560652 -8.8353840541233346073 -11.417040746701692555 -13.448107307664811216 -2.6786248998515955755 16.020519581776053286 4.2835648907563177445 -3.1546130074382867647 -6.9227091666404989567 3.9559833519521023781 13.72169217922490958 3.5049195732522635538 -4.3686244001676302062 -2.0861075015370103003 5.7251756627789642806 5.9218723424439714265 -4.9826904457707463791 3.2600928971140428203;0.41252595237076095103 3.4512716537528129734 -3.1741750109788706702 -1.0881899384516857676 1.9642680550961892916 -1.4037583712418530979 -1.3280694114894029401 -0.81269257351272139456 0.57617583434286512301 -4.274301453001648099 -2.6334313904891457625 -2.3910328480674580831 8.865447491716384576 5.2673449187308438724 -4.021075963365856154 -1.3975172910229125556 -6.7419078519735764488 -0.62065208806600957736 -3.3194731721027177507 0.71160747331449925035;-5.9656528174529679376 -2.3874794911100152284 1.0687662035888960688 1.0640764838200307274 -9.4483668716089201922 -2.663938004398252346 -8.7899574052775975019 7.6357317451294584032 -2.4732133175390966784 -7.4663986262580470665 9.8121823844783087054 -4.527789738033598077 6.2743327100120174222 10.990823740688830057 6.829346330573984325 -0.29253963838201046954 8.235948866746264585 2.5887997955413113438 4.8424219778169659278 -6.0568822329202491872;-2.0587564219135701116 -2.482065477418209376 -2.0611843353847576488 7.0740979194488398107 2.8891968010667801181 6.293383770942800659 -9.3121552218067407125 -11.42675674722873147 2.0280096213738003641 3.0953904811322772161 -10.04237394241724779 4.6334776749459942735 -4.9871393725709110001 9.7299179689691204231 -5.5697245013666289992 3.1588029311703800239 -0.017833868248851959121 6.4650325575188123395 -3.9112570518133846775 -5.2105287605592671696;0.63775250754439238854 -0.64152071048217584881 0.38740644818415176376 -1.708827140006744294 3.6403812822026346829 -3.1129913763653904724 5.5036808932109302361 -6.0643702460995818626 2.3050743579250987381 6.5797346838733714591 -5.0446024842415084777 -4.5387882875202798516 -0.17872968865364485813 4.032435288930587447 0.012403114191062592636 -1.7127136926904591441 0.25990117211230528982 -0.43223558452723259693 -1.9686593549325861474 5.5024550839276900049;-4.9947130347301591513 -0.51629193909508031002 -2.4796405262974410277 -4.42325608545396598 0.75673591303106757522 -2.0088396236941847839 5.531918316272170344 5.4712058276874806495 -1.6367498478493693881 -0.52435506731243752832 -1.5891507901716832585 -0.82146858501454189661 -1.7315031936786520195 0.86544709902847372085 7.5151778980849117673 0.51069514483175615371 11.87807806818279488 -4.8027155719856660099 2.8925489171287130929 0.40193211633947156791;-12.272946736056997707 0.56417541922325165071 -3.1534258853245935583 -0.774258445067761647 -3.0161607257730347342 6.4122156657803168756 -4.3291606247276064323 5.7951444855626350616 1.5083263708480698639 -11.819594216276687604 0.94418410053336621068 -2.3186246827199537002 -10.389545681706392699 0.61079575145811992876 -25.571487600750511859 8.1361544363470681418 4.7490844439900383733 2.3682186987807751777 -3.0603638014250211796 -5.1243715780618295241;1.7012851794869390254 2.4648407146177286897 -5.1142990125766205622 11.673331446875327089 3.0719768920025734005 0.80185732405047238647 6.7791386566728171204 6.2746363089285530634 -4.5735343233572960386 -3.6477827818765717893 4.9567554771242141598 -1.5993175881274361849 5.9579055907725040342 12.753696530916919016 0.075882560604157309192 -1.7198919275184554323 -9.2204045562738006225 1.5171888241222091231 4.1461242973606857731 -7.4609053861299381438;-0.15700139579187166738 0.23432855553159456785 -1.496657699204641423 0.071080607529427866642 0.064175241439896155149 1.0011084379300547731 0.16956490268857951631 -0.55021795490912484006 -0.18922270982260547267 -0.17706241109915943355 2.8503049952947852042 0.007511587187905741439 -0.19877427307289097236 0.35688678300614939953 1.0577149618926637853 0.085801176203158788236 -0.25048230787423070298 0.5914033634653828031 0.066019514194663925233 -0.88513644792957435481;-0.85417937579287495087 -0.097386526280890770013 4.7758189071028303019 3.2988925747808557354 3.2343442672437361374 2.0390332328595670575 0.44654638543825925234 -9.3081566962951018951 1.6559469494507406129 8.6651735932719642364 -2.6505071045106274319 3.8148616863382951436 -2.7217048844848883427 1.4215703607861465141 2.559288942668299871 4.2074196290403413911 -0.87087185474651385153 0.0065958537232172764764 6.8281824955148149314 -3.059171957971381417];

% Layer 3
b3 = 0.61002606538914572187;
LW3_2 = [-1.2771867792141851083 0.0028707177635323077522 -0.005079769405177222974 -0.11865049973036291553 0.0060812790414908812417 -0.034861018372307435442 -0.0033326238268326538287 -0.00057458887065903565313 0.0085147960853402988868 0.010486567700487824453 -0.0051165696315173328501 -0.011932757969732105813 -0.0021579187425156197248 0.051744929441439949103 -0.0085576823188874655279 -0.0042559000606585285081 -0.013502234065382208439 0.0061040808870440124712 -1.0751126718612520339 -0.00055421795557515445528];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
