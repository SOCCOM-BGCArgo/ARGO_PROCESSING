function [Y,Xf,Af] = ESPER_silicate_2_Atl_2(X,~,~)
%ESPER_SILICATE_2_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_2_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.03;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.604229607250755;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0472561523279972917;-3.8677965734990991109;-0.86435719418538581316;2.508007191578264905;-5.0144093813486909639;2.8245046161928324402;3.3174415350032151473;2.1225065960521449782;1.1929304128166506871;-0.96220135306376763928;0.59361418463400417167;0.53605415786520305144;4.7414702789679123995;2.7286749615415399894;0.49179991022576502457;-2.6225817920548037954;1.7284896220757122176;3.9541103267110520036;2.1751357423981767525;2.3884669685608823642];
IW1_1 = [-0.84123694306817964339 0.51630881272165474183 1.7393967273521269146 -1.0388536269339361251 0.89060621574931420064 2.5220998928041931109 0.59814370653621684593 -0.80717953036285394752;0.92921561401808883129 -3.0233952072549006296 1.3764099104389579953 0.76576605433719191485 -2.552616080830429901 -2.5830158933549944855 0.014461684835007621031 2.1240288211170557098;0.79902612219341495603 -0.70538909030020402469 -0.73725629096965383802 0.35729129947598708972 -2.9620374032982517143 -1.2583362676498219823 1.354104372622524588 0.19179464250404359982;-0.89671858448108665574 -0.077433239329256539629 -0.74977764763246368407 0.54488020714056095706 -1.5392685266030377012 0.056795629726995637554 1.2136983819978472976 1.4021602504059160754;0.1770539777407793558 -0.23521289685066304465 0.28560628557876671652 0.068879115586625086487 5.8795089385773851021 -0.7470893593910151731 0.51271228720971873116 1.1381514034886854869;-1.680908672863941522 -0.74821071652410997554 2.7513075012872518776 -0.8792669049746547616 1.1656535317823062403 -1.3156009524342873185 0.23205870590725605207 -1.5795636946166335957;-0.95573860267949117819 -0.10899013871920912311 -0.27877609673490688635 0.33077582235470254224 -1.2949824699441472298 3.4393636091868988736 -0.92633404329111190822 0.89489652671398800532;0.12805209891222987806 0.37572182411341636943 -0.14750558614952891112 -2.7737238211052481773 -4.0982920597028424936 0.78216150138012918713 0.83361396494416262204 -0.46625669405289199565;-0.59406953720836408461 0.62999971679270372338 -0.14810191387075102853 -0.60364298430338381163 -1.6081353138424112625 -1.1893139548347362311 0.22344569169878991666 0.65490923014710877847;-0.17354062866541256072 -0.37412476749111056584 -2.7546159150314033504 0.44394278996550928795 -1.293964486767568145 -0.61253926377947365278 -0.53189105721867813159 -0.88375718458511864917;1.5734891440990945721 -0.83346113312087688474 -0.19817290369491935564 0.51444390492510716495 -2.0793584068369499462 1.3192958412622211029 0.77622264851834499311 1.8526447677013619941;-0.38723969618950992988 0.21132865266529471393 -1.7147697446879417438 0.10391595955464047463 -0.097280411581277842492 1.0133284316243054146 0.34786597611972308597 -1.8427377461592988617;1.7008684662625248585 -0.13059679671194901474 2.7946081445196724324 -0.0093837772609654292177 0.7008870539133174038 4.7083956321972806336 -2.1240289243347261205 1.1878796279566801175;0.67449583971674520466 -0.90819387224072145592 -1.3497251504303466874 -1.1261764818529360621 -0.51313326010041326875 3.4451522760718047422 -0.46995720618366598753 -0.25307833122681644422;-0.1363558402506976075 0.05644475606340630669 -0.40996661296130065821 -0.95083913771741523924 -1.6468077470097068904 -0.02590517779743707269 0.20840977395034379627 1.6017580570084848368;-0.47681772744755790416 0.015221584322221412555 0.64447137014575173186 0.70375374106805121954 5.0602647963047617807 3.3098700338931483778 3.843652132498987406 -2.4845811487901268144;0.042446838030322349422 0.33336040477659667491 -2.2025432071582393689 -1.1181011481012081976 1.3529857900644384205 2.387709915073517486 -1.6111126516347289428 -0.65392828652645595966;-0.28837947428594123966 -0.16150667892579079199 1.685149274393800134 0.28391043775131197258 -3.5802464039042947164 -1.1697053020921444055 -0.26224989397720449569 -0.36935121431945328041;0.23118911630280739034 -0.17332277519969016555 -0.73433662624870355007 -0.14850733990546766128 0.97535767427356623305 -0.32670909970657208143 0.026051932950211274115 2.012679846224772362;0.78056237667471051189 0.92041349771154890025 -1.1044839030655682066 0.34372235005914431039 -0.86853098283931573498 -0.5523393431311455215 1.085573020407866407 1.0921070215950938742];

% Layer 2
b2 = [-0.48007371681967458965;1.7379352119126580956;-0.052034228937228303724;2.2343889427262664249;-0.17789149255204306233;0.1177559062437430748;1.1825250825613760064;-0.15365550853975670775;-0.34323971939125308417;-0.3734545927619961625;2.4081948372151891213;2.0997788487046462613;0.093941573427611529956;0.72419509230364054186;-2.1286103178882083142;-1.0348920043653322409;2.4634626524739866582;-3.8740802898475164007;2.832189369109269439;-1.1450393491523305212];
LW2_1 = [0.2749858506288024862 0.87714607287532597724 -0.80096706358799951708 0.55928797723702250444 0.45028592000441691745 -0.6001960435489063217 -1.2627237720344892669 -0.62812761040479225816 0.17404519725262840302 0.72999209847922874594 -0.2622705474141465154 -0.51717903735349401995 0.54948630215837446222 -0.5228247466588871184 0.75953079358467889826 0.53393876255668160091 0.79288402475129982072 0.2939268273174323598 -0.43222993640776186108 -0.37353349189083073778;0.76433827841659707225 0.5591322480996379074 0.59755169643307270988 0.46064988993150468577 -0.15908719237968607652 0.092470961896872747032 1.4558934501093043767 0.66421947443901019348 0.63084902691950561771 0.074444537471734364975 2.9904750559860775461 0.56084014455556507883 1.6498518358519944638 1.0831623346311665124 -0.81867267682414412988 -0.37427625548821874535 0.00032149122089932566197 0.053676405841836929977 -0.52733698722223154576 0.33835988181366716265;0.11648476822461736879 -0.82747659640811621617 0.028799269491953605193 -1.074883179849946746 -0.50423916878143026921 1.6775529927075956138 -0.68014596630749968309 -1.0485830695621645159 -0.75127520686776405601 0.5086750431929693006 0.36591249591146940423 -0.6224414503648092456 0.13812692649975669146 0.37130197015682714357 1.7819332465894843764 -0.13455212680236183775 -2.0637222398845569415 0.33327218115842999202 0.9071426857799965715 -0.63101332050719549649;-0.61526381358072224081 0.56109252674581577836 2.2523565747894509492 -0.55120442212279763261 -4.1222437836369048014 -0.68295622063845962124 0.72266309277771600961 0.41361793820975628622 -0.70203362382024281363 0.043561270290023740293 -0.62480907355302528483 -1.3509079310653335781 -0.20149017405324393115 -0.56106337763637581517 1.4431392962490849907 0.74819106479020369704 -0.2286042566301015877 0.43796469022724787701 1.1001504816035052592 0.31115693132131638787;-1.2128956850037202475 1.1044063465042146532 0.88682601601494415178 1.3761246644955935636 -0.44913056843450899214 -0.51066521508286955022 -0.46103093360734703765 1.0835349471784456732 -0.75892595892487901832 -0.66394735790070225079 -0.49466180322442510064 -0.34777130636611169878 -0.049161691009727656598 -0.38430728397830876686 -1.555050024438088041 -0.47045058121163790821 0.92771403285987319443 0.25667652955013375848 0.085495380028434181385 0.19712145320491006317;-0.98008371122413850962 0.5835023712372555682 -1.8671370960901592095 0.95110762147846950043 2.7818630271987023761 -0.19266872352894170994 -1.4051176113914263244 -0.07841536471827922905 -3.4098390817659263163 0.48505663310418350997 -1.1664949807114017855 0.37737107929812474527 -1.5800805533988289131 -0.46126900970146988978 1.4546051806441857579 -0.86812172139153631623 0.98688518207713959995 -0.27307746035669189233 0.093147565653189282053 -0.12148523059915969369;0.30494871010015117685 0.88028531231406625945 0.020172712179885921024 0.45652422712635237767 -1.0373745537952654416 -1.7260600025015719883 -0.63027115142184020335 0.48314194956505207568 0.36273295438299790749 0.80460857788458550743 -0.39954360457825982555 -0.87316687378824520138 -0.069587153714166571916 1.0267079080551706483 -0.80916283749822104365 -0.64107234413209102097 -2.1282843918796290339 0.54355400660348929254 -0.17365447865261487981 -0.23095886730620496241;1.3392228222430109241 1.0148910081905386793 0.18114658514417247837 0.44389475393610722254 -0.99686483028804073747 -0.63727904548627645198 -1.2898152773133253479 -0.64235165658539827849 -0.34916922383821902276 0.26036936564451901299 -0.1969874397316596637 0.23262805719204524002 -1.8908931560157116181 -0.11809584435512258949 1.2401532232626362173 -1.3231145163224544703 0.64866940368963421637 0.46980604379785162461 -0.60063264911828750936 -0.37740529593433946864;-0.68747771422046599632 0.64024572007747082569 -0.89079988121236786114 1.339942066297749923 1.2791695979788837434 -1.3919051357615954689 0.3023218637757805749 1.0927172917751957204 -1.3997937798028581291 1.0934166929554625103 1.0530703364848523762 0.80904416063061768138 -0.50719231187757496393 0.72720891258593445272 0.77031724814759194864 0.8965124601791263359 0.1774079803115070908 0.97363160944421911491 -1.0315484578500790924 -1.0469847445029125677;0.371186295106517683 1.0559881969097708598 -1.3330499143055285494 0.7414976179406161938 1.7603210627012733092 0.021585083526373637086 -1.7668871170880307009 -0.69190846982303644275 -0.61360688883902281265 -0.27765764804571008151 -1.1357607977829005108 0.54465573559151259087 -1.6496654161257477966 -0.33059558251529908013 0.8084650168463979325 -2.740742018611955988 0.85701124762403269042 -1.9676394231003637714 -0.51780512762290209494 -0.73342025290926260439;-0.37536870330275762253 0.97399417114513187066 0.77320423779383140594 1.8296783331034982556 -2.5919278163254970693 -2.6542043498610703445 -0.99546048726427416309 1.7653486104683306923 -0.56486949019256360582 -0.020984716681411851036 -0.71423760836146910069 -0.38678898107344827917 -1.9797924960154891227 0.63234543658198039129 0.30071390339426284921 -0.5047000686511192713 -1.2881283933421066035 2.0407635591573560774 -1.0742669426477822192 -0.3671160079955174127;0.72155784551447332831 0.20612059360166343214 -0.50419625304511761499 0.32046878051905336449 -0.69714218604260336232 0.61464581349195912541 0.74558189244003347795 0.31134657524313685828 0.42584774523410534597 -0.52088476387681825752 0.2578037703881878584 0.3987987987543412105 -1.5924692098055823752 0.75178756426802062496 -0.31177293796262811609 0.1110000832921752556 0.10425999335696525816 -2.4892025140470961375 -0.070972527901197082767 0.19442963719924052923;-0.48278752747729747341 -1.4222229591574673258 -0.18641322071869501076 -0.41750297182880991009 -0.28116743414526634837 1.1673008181441304476 0.25915804164862044079 -0.31226250932569477037 0.23592332753905978504 -0.26123627772736990327 0.87132411495053840866 -0.14587046664908606686 -0.62874599564708788524 0.57460784231364014918 -0.4428564783875975075 -0.056640060365621601457 -0.57484914365250650015 -0.72051446968613774846 -1.475682311937400959 0.24334519556070255408;0.19547882745973524377 1.0325989331683971262 0.1903272872393458881 0.083280605551029673883 0.95982557451249639335 -0.66254805175435926845 -0.24643612021965455305 0.35987143754963213382 -0.50271964083593878581 0.67926668618296204283 -0.34761659915853998504 0.18634039932815230078 1.5179491778029721161 -0.78013217302396697939 0.78820603513846887456 0.17311121344482097162 0.34145248469517291978 0.84756357327276965474 0.27954429720082207833 -0.28005222456288225708;0.54395939387841585333 -0.69673281662737784892 -2.3568464619078959288 0.63847578472524657567 4.2102535360621509142 0.54781966727043107657 -0.78942124016075376769 -0.37571575892428404897 0.64225963692536103267 0.09644346143179018116 0.64143451361832704016 1.3793810867361422368 0.1921028794642168358 0.61101823663977916645 -1.4062131285637042843 -0.74396118212611384024 0.16350911434612591666 -0.30157304339380874847 -1.0749998065132666536 -0.38890574163988855805;-0.089697379964156637167 -2.028295051895806278 0.99278002095960182771 -0.81697794289859793082 0.25506683948060782097 0.76388173459802377607 -0.29795866719470420758 -0.84115468993637998452 0.61546667370798691099 -2.8340771297152476116 -1.4548098877901578518 -0.62318092755557052964 -0.13059477158800575358 -2.9687656359998855216 1.1916521228984571223 0.085913769678335638602 1.1420118062320843144 -0.94594001474095024129 -0.61252190087562219389 -0.013121222721364783972;0.40085104425336137712 -1.651544066609212269 0.0056707440071029277529 -0.88923143162875073475 0.56660012092831757435 0.94372864182360005625 1.7324906061526832435 0.95062609011931209491 -0.93158930892331104356 -0.79080776766678917422 1.2039016466528846827 0.10703787736806218145 0.13546233491661266446 0.70832357652994193398 -2.2893887903914622584 -0.32647180846312184865 -0.99090878799122017462 -3.9834189361063252477 -0.29221109416594093222 0.5972352486329143284;-0.58643957945610791782 -1.7241060059074639899 -1.0714838534944153281 -0.71340019953079703008 -0.83737432173336823205 1.1119917917512922578 -0.19050763217902427771 -0.88328380215869728431 0.21390327540914008675 -0.38623006764930473134 -0.46683504667847680603 -0.22925337740755047378 -0.4168504359039092444 0.38899260710875266378 0.87188406291255615699 -0.14085318342316713314 -0.93937149592205015924 -0.18300786611933386738 1.4517281554804497556 -0.28691964936247282836;0.73390919117713404596 0.22497101011970019324 0.715932576594572323 0.44112027610932497135 -3.6693353833038875322 -1.3021462397614194106 0.07225817090519491559 0.5514296197174828329 -0.97755858793803118711 0.8156663884489855354 -0.75763107584334532518 -1.7544376779715640247 -1.0388258433167005812 0.22431918089795993554 1.1857837457275037796 0.82228935316393048094 -0.23656442470774624587 0.12713813161604253787 0.052559943713577327029 -0.39781790779310888251;-0.31438956335457790559 0.62794073569493158438 -0.86203636165028363347 0.92337795607536754527 -0.076426091267676285468 -0.36944391082145833227 -1.0719558805475404295 -0.019187480371130168078 -0.033267238111314663407 0.57347197595258792013 0.048861735095793251693 -0.75837294296343837896 -0.088506142950311866846 -0.35578148224072164707 0.49353485610082697965 0.22308649602285163249 0.53327737584297008056 0.6417601912365078487 -1.30353449624337836 -0.069379728879927660135];

% Layer 3
b3 = 1.2635693023964302828;
LW3_2 = [-1.1766192551237295572 0.21479872503566632691 0.18835195243068100779 1.7790491809517847699 -0.14947329983502019579 -0.47668959216261663769 -0.13037662731444443764 -0.45458859612394159067 0.53746383483993087626 0.61525498894134855732 0.11425264137956843424 -0.49290998016255466174 -0.46555033112402882667 -0.54059172847900016645 1.642972763022171323 0.09425245169119714217 -0.33852923639718707216 -0.37982945459650174769 -0.30509283250998142645 2.6064827343960663697];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
