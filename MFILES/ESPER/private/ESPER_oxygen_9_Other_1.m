function [Y,Xf,Af] = ESPER_oxygen_9_Other_1(X,~,~)
%ESPER_OXYGEN_9_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.2887113370985185945;-3.6099518736478808378;-2.5761006317517964881;1.7003920399029461841;1.8751525100285655334;-1.1191335172458365399;1.1812675074319858304;-0.10424406373746279708;3.1474926348795868591;-3.3604171530622002351;0.96858387349119934306;-0.75177328313814473226;0.067182359633576826941;2.3469654336094807334;0.20290108350400762327;0.4477292164009242792;-4.1747328065101907413;-0.032124076399922471547;-0.029646737075274771922;0.33937992416900986115;0.28322254032620203246;-0.26263255737908586251;0.13845446172568764975;2.1239140469134603073;2.1841987356718841617;-0.7880587946331102378;-0.28217044264813917476;2.1344502552931867712;1.8636287166852960606;-1.9582336511051037231;1.8723479944174157286;0.36123928867592935976;2.1923273567166461362;-2.0166302404551652572;-1.042305098431381305;-1.5397697825041871678;-3.9422968744440680666;5.0200282006185235062;-2.0021245549563948529;-1.682744208020708232];
IW1_1 = [-0.040862574420229051675 0.5706517395558253769 -2.7201101204860598237 -0.36943612219551502651 0.29851391702502566572 -0.28936306300478659148 -1.0948739874612545275 -0.48374892625022425374;-0.13770186571215395355 -0.1658584444509401401 1.3397353018692192972 -2.366806233879537924 3.7084108684953900337 2.2231741430812852478 -0.91860075468658231035 0.30994119017579818687;0.3676178434074013901 0.35126137892416259279 -2.5740884618225785552 -0.76797856149586063434 -6.29645029195364625 0.90245800454953450931 0.54595454762122552772 1.3332118998846760327;0.51240906120403595381 0.0015383751533622571674 -0.85489605532581647296 -0.68307182746294448084 -5.3416082245517442217 1.1698505674076982164 -2.4271286862233667492 0.29507463644053449903;-0.78399725181125001772 2.0010726879119782318 -0.49855419355089597433 0.084185697520252289472 0.89952929762815736492 -1.7240089012899684207 0.58614842580867865252 -0.61328238669648338366;-0.25567088043454305746 -0.15681202134902427758 0.53119685085511259004 0.54675079603051557342 2.8537305306508526925 -1.1060635362111699287 1.7499782128152008287 -0.31758826178662730166;-0.78236069079459447106 -1.2941724920750754535 1.5052612725983953723 1.2468032088936196189 -0.019895160372685447014 3.602334685024935812 -2.6588099975737868874 -0.60247728753733065243;-0.1351917333492800577 -0.091630790492771910238 1.6832634123861129893 -1.308458700403779762 -1.7343257838387686753 0.83753094436128705524 -2.104680199161784504 1.0284644799791298198;0.25181786110730597361 -2.9058645623880914322 -1.0783636023280807059 -0.81249834228232720168 -1.8040288171478888746 -0.66125071832046566911 1.5331773846270422279 0.71682014187157383489;0.41566134179559388606 0.24399459574633292069 -4.9724964749264151109 1.199521973325430757 5.7408430640158965019 -1.2379513850230265959 6.7274594557972271502 4.5879888157403714288;0.26193355679132906966 -0.95597951503606448664 0.50171164383520217012 0.13912297603028025983 -0.36374607528220131991 0.29596248620505377636 -0.056252174197387878885 -0.60112011071609239288;0.83711415908184860779 1.074770354292576835 -0.97079192272562653265 -0.89416201134337458534 1.4803341761840504986 -0.74613997687884847654 0.50016436445172796077 0.14145249044990326759;-1.6159116631118362051 1.6634530246696577205 -1.3377573624454255352 -0.4521461845179517991 -0.84875279695801608693 1.8105968095111828475 -0.79193686841841792745 -0.65049434286748020195;-0.20891616198460660758 0.030855145782327977194 -2.1578815043670553919 2.5928827971598038538 2.7620806792810324026 -2.4003043032903197407 1.6701109623199812404 -0.48304213769962778269;0.12549442162751325847 0.084563426789809589823 -0.55756783036672197262 0.5310779583533463688 1.5266728672301839165 -0.45159306386506870012 0.76700722709332413984 -1.0588707973481557012;0.62535786681126359632 0.27107855679829118145 -0.73820446669504180548 0.034120814520506755063 5.1718033267734009328 -1.67973713045226547 0.13813064487770493338 0.9853236926801534068;2.0628564028303975064 -0.38538951322022407808 -1.7019773672091484951 -0.60560195298931152053 -1.4333747602699804524 0.023815931711224359174 -1.6244253636081995573 0.56843311488074133031;-1.6326670369961271412 -0.94040788966890709322 -0.29770644060188983238 -1.2597732299494728281 4.9950681343994070005 -4.6115332677202358624 3.3952649278924305065 0.63630702827551388623;-3.2229735419060583368 -1.4346202967457648558 1.1312933076499243068 -0.13950926261617566104 11.311350368662177246 8.808953250978301952 -3.4596687632197795637 1.5456653843390386616;0.15463191923020389029 0.022348792850327835191 -1.8436782160217191073 1.1037665492640722498 2.6282501093415180371 -1.0151534016827239437 1.9066423848959104248 0.14040912810257938359;-0.0063102651919968739264 0.062285355495330943509 -0.92562543787970408271 1.2329088235905767412 -4.7198297971590550404 -0.03276368380687787879 -1.3451175615738431013 -0.20990924028124408052;-0.67565283857492364206 -0.27440919915324296641 0.5146495054673423386 -0.014919710135047640695 -4.4165628178011635541 1.4193266453533330829 -0.052107416457501394558 -0.69425538912828022031;0.02133400052381442813 -0.51402004315325011685 -0.25018066205664291068 1.2458710615858015203 1.483158065328134656 -0.16655833831686839286 0.54755778314983150068 -0.056434087643504264598;0.29098792512211929528 0.12083529367560813528 0.16325354533550900937 0.31337656596621132898 -3.3872606539717313723 0.97751047619212605433 -1.0214205728910576987 1.7717981891699783326;-0.17436144136693607076 -0.24852622807143923134 -3.0009777819138307997 4.8880747556958930033 1.2519035179080160169 -1.2059680530315968205 3.6108421420215148778 -2.1537951893019227079;-0.30368786153588811505 0.88038845768108642265 -0.48125325679736402629 0.032232647989421950308 1.5563680060283264783 -0.79431745725867297647 0.53588635541793461226 0.56297597379564645603;-0.11512134341400573345 0.90911881214437217924 -0.22369121279197476393 -1.0363865265199361243 0.3382795970831453114 -0.43234364218348053654 -0.51055000914812787016 0.092277777130184771015;0.023851408247303883259 0.54657495384648291381 -1.1191232702437601265 1.9274650410168865378 -3.6166429219608997592 -1.2561257912990029251 1.3877174657569690819 -0.67133983351346682156;0.38360322832265808524 0.14622528367923812165 1.407965800214841412 0.4204294844770974926 -1.6218667353367408612 0.59251448428324648976 0.091071450915676172011 -1.4138121904065730217;5.7726993011422509383 0.037915200713237201535 -1.4415199044759181568 0.056544932711286161053 -6.6423343094714404344 2.7352680094174131042 -2.2176187961784790126 0.92046103464966810837;2.1883160572182887016 -1.2433728382395718981 -0.98880198363579319132 -2.8348381490912402114 -4.4818385589378282319 -1.9055776433583850871 5.8320888666877843676 1.2294163614508646365;-0.014651629875792720678 0.012997352653336374795 -0.87158674688100945538 1.380244122564853404 -4.5241315144256697423 0.19171417965164863628 -1.5524757353149871708 -0.10887379563558215179;-0.25145246952627159365 0.056229114220905887511 -2.22527350902760368 3.510172198758421569 13.036167581965560913 -0.23404911639803568923 2.8337716115641815584 -2.3824071099412278407;-0.19731904629617219582 -0.21216046698795618108 -2.0674925465043285655 -1.3908607053553454502 -6.9025244031183552451 -0.41825741415772127452 -1.2482228091345248799 1.5802310776064012465;-0.15701083138918725535 -0.26384528478396263029 0.30369867990767801524 0.36384254735689147697 1.2572952886902526437 -0.69697439714149944656 1.0642258151958265966 -0.51343617866303903341;-0.26062716104955113705 -0.8173927650867793826 1.0292117599175054643 0.32823727221595250247 -2.8491592770453535444 -0.14238174658507365966 -0.89679702510966530227 0.12243250739875684296;0.52667099975765574449 -1.7479036831072602975 -1.3431571236233954547 -1.1542465420840488655 1.8649503068075508061 1.3215238428057765052 -2.4019939925377546963 -0.81635804534344413863;0.43177599806355992929 -0.75152993037524007391 -1.0735845386127891299 -0.22938290352061174726 -3.1690010759358777648 0.42130965027929911937 0.14730463099153623396 4.7727108123051884547;-0.083213515970309431813 3.3692099856302357708 0.0028371621130640072191 1.3184394763164759556 7.889006318747764368 6.4797104934012592636 -1.935475972510203535 -2.0973016101647004028;-1.0849457136142119928 -3.0090224125594020599 7.094788026537934833 0.29473818318104133551 4.8938441545776978359 -6.0665457630303425418 -0.76470036487431547467 -3.5159350139017520043];

% Layer 2
b2 = -0.1109035780942167343;
LW2_1 = [0.70456654371416038707 -0.68322155152038777093 0.21174447003952440172 -1.751101010515027756 0.26595117008341367937 -6.0568772533797430313 0.2440154723025178829 -1.1513802629866607408 -0.22114270450661194234 -0.067156835882557275319 3.5210383246115166678 0.54433968515657371601 -0.13412895728606000212 0.44733134809689190092 -2.156454938904752705 1.7189493397977344546 -0.49998371514332318188 -0.15271061024307736043 -0.048925428512375350454 -0.90606961687425346952 2.3539406532480922074 2.0830014468020485729 1.0592324328995010863 1.2342685108798900906 -0.19575473318907563036 2.9836324270639895673 0.98279916919282028775 -0.75297869700775943436 1.3420657132156634805 0.055964361822747520081 0.08413292274799887005 -2.0328477074191368956 0.15196517348903401667 0.30385722075581494961 6.9458300924080198513 -0.81290896725916317322 0.22507683264213798613 -0.46657695559647965888 0.05782620139141142479 0.017991967361961853922];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
