function [Y,Xf,Af] = ESPER_talk_10_Other_1(X,~,~)
%ESPER_TALK_10_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:48.
% 
% [Y] = ESPER_talk_10_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.3075433797479317;-1.81242346940433;1.324223445895705;3.5395622240294808;3.8006801095898699;-0.59026820181613104;-1.7061849958718744;-0.88783589457571654;-1.9431453670548811;1.7937084855526868;1.9207386855805011;1.8800194931661991;2.0080243516619505;0.47983251688309603;4.8839215489898962;-0.39492821512664478;0.012044382408152398;-1.0078899643931485;2.3094501860996894;-0.88172512555141291;-0.72298308213836782;0.15827274034383917;0.14595744441876923;1.7454548588016734;-1.0331782475133555;-0.00090242484158685205;-0.034511496593070005;-1.0213355062845684;-1.5330422030353175;1.2435751339934509;1.5700062242792554;0.0037266513302840398;-0.46698101016805638;-1.0166667989540359;1.6678461169222676;-3.0917992883522438;1.1746265431900498;-3.062993316761661;-0.41017648198624157;-1.449650853312904];
IW1_1 = [-1.8154300387645972 -2.6326171620268544 -0.64857465583141938 -0.82039602226159969 0.64374277138950609 -1.489309610118289 -1.0668418530618067;0.52258195651675932 -2.0114628435525947 1.2185113753042129 0.4617204938841864 1.0771588177471236 -0.032683951203472096 -1.618354402429848;-0.83639763584309679 3.5469597815537135 -1.6545311580463555 -0.26137663394571375 -3.2696947811604469 -0.25570007087043389 2.7093260773750885;-1.8529301969329772 -2.5117850713958392 -0.49260152868611584 -1.2668577952413269 2.7796212723824962 -0.68301505672498686 -0.58380331624828918;-0.49150825902624629 -0.50042736719701908 4.4533089469403437 -0.87107783134236971 -1.0513864766779033 2.2396659702537649 -1.8206509685816226;0.021041845113673033 -1.0829058761789203 0.46151049685927137 0.024173571378357427 -0.61425005554463386 -0.23081921091526691 0.45581006089210829;2.0956452748807348 0.66828148181116964 1.2695818107929693 1.0243676966813331 1.4926381325797506 1.3551158278741184 -2.0031214911356567;1.208016631559363 1.4256256079709726 -1.5752089722418274 -0.92829866383971804 -2.2803136634896402 0.89574253231315859 1.337691954300708;-0.77206442713048418 -0.074947324587131783 1.2809317114570236 -1.9155097777184835 0.48975799951840904 -0.70043763307183549 1.8954991397797292;-0.83283100996901305 -0.13044549539636197 0.98790581690554413 0.69053050641151759 1.0564697520684807 0.13033130394351916 -0.58590301593016902;-0.58037840046241063 -0.55387666478472686 -1.3180086239989732 -0.99437699865779716 0.65540444469210568 -1.8534425863728039 1.1317842139077376;-0.59292692740905895 -0.69379240427330269 1.5473321372008242 0.12096223336431042 2.2768094209437888 -0.85656751745551019 -0.99579317182147042;0.65619484360733804 0.49425179078261222 -1.3099621504588694 0.11574730368959391 -0.85500334631044472 0.67051516279756884 1.4389523342643538;-0.66227834546700159 -0.12659326796312825 -0.32448970012685352 -0.54359221172917926 0.06621276060057181 -0.27003398247816163 0.83016925042371881;-6.0447847588697989 -3.3014974553614165 1.8902494649693906 4.8459516024473439 -1.7528389259710975 -1.9631092479647787 1.4830678850531427;0.086028054694733888 0.42860378881197797 0.037183094383864621 0.0952111180267146 -0.71672929059022306 0.052952821933530361 0.95099937247001876;-0.80895177733962398 -0.45395696055795043 1.147114930460897 0.075623375695973688 2.0844024842466635 0.92280005590816261 -0.57936921800641494;0.31251800200427104 0.221571348318675 -1.4082226902558157 1.4232896373662578 3.0697923598782224 0.9704739229638506 -0.47162281100953135;1.0709275162984884 0.45351225940134221 1.5487096047178324 -2.6552046638778792 -1.8103758752522783 0.24860828727059336 5.0153523917772604;-0.04521295762317442 0.55434723499542204 -3.0616622346314255 -0.58156419934405357 -2.8658975782718588 -1.3130932802701032 0.27955629121983672;-0.23396703330296156 -0.023874585305171246 -1.4899488649700736 -0.28423963113841072 2.4555799232700908 -0.43313431071631919 0.28538271756609618;-0.032527220907960751 0.056860833283134224 0.39176195969226063 0.91953291381499846 -1.0116855397443749 0.91215088119580612 0.39529112266886157;-0.55379222115433424 -0.33209696816488132 0.32414773241675576 -1.2028861682779841 -2.6693717103837247 -0.65794084823248711 -0.32672470926162478;0.045636165165618296 0.10985303319500847 -0.47315656493308461 0.34159848987658242 -0.79357600273284734 0.869934162441518 2.0603422801824864;-0.6187537096511202 0.48256643135376942 -3.8777272498786224 -0.90946809511859705 0.78896058904395872 -0.44362610787407858 -1.4754893425499895;0.20277494652378611 0.054697644073619982 -1.7716027708451065 1.2123514868091025 -2.5263544259584241 0.96468482348921647 1.8319762254575518;0.036007853097637127 0.14382305799935552 0.1617292276829797 -0.075178236805958337 1.6099335119232505 0.29824535883966918 -0.91162720957723498;-0.014335280304787959 1.4815368430419418 -3.4595909056291609 -0.55158742963761054 -0.015037324383889557 2.196772780332152 1.8468253849320397;-2.2571212190299215 1.6107712767619518 -0.67244188838256014 -1.9581489439751405 2.4404700082843167 1.1722393851423498 -1.5062234648019903;4.2103357629740419 -1.7771673428222643 4.1438847937811722 0.37696042559686022 -3.6936968388992555 -1.4879336642428849 -0.77499010784981837;0.4690626464569963 -1.9855380645179357 -2.347168353716325 1.9498004237178024 -5.1461505548464181 -0.52505199714763295 -2.008252242263572;-0.32277584037954526 0.050367467093883782 -0.17320245390455211 -0.26525232229556428 -1.6275067121238713 0.16937091613494701 0.54133213766533494;0.066968310264957046 -0.028058181786057401 0.55242044167855564 0.53019780680938811 -0.26115244641168539 1.4049028984695913 0.99530198854920127;-0.61889430195917872 0.50535949177889494 -3.8590257710638243 -0.90345392659748835 0.71250291781902797 -0.46418482200093575 -1.5317610728673956;0.2032578887414552 0.10686229957455924 -0.55915163955320035 0.91092399011145919 -0.073976009666413406 -1.1677868469795276 -1.429633213935092;-0.079560033704334496 -0.38176967159110498 -2.5893322500735296 -1.3671844919673599 4.4561787764607148 -0.23046565218443643 -0.65258081227922804;0.34009676282800033 0.13723893228871403 0.18161209596253325 0.12494694352524191 -0.8349832083008597 -0.051409396535465515 0.30614948177415346;-1.0545994448468705 -0.51143657866492009 0.1077029691289252 -1.4275383323769257 0.73672003969363942 0.33346908235260503 -0.98700684923399185;0.0920756684894177 -2.2556683952757517 0.73563330469848875 0.34091905945925099 -3.7594352656367107 0.32629985902901915 1.4067261300841047;-1.573265226619045 0.83150226543241401 2.8014317066412997 2.2562408533518092 -0.5803342990127236 -0.53034547861259052 -3.9966343225020653];

% Layer 2
b2 = 3.6873837767460418;
LW2_1 = [-2.3163838426188308 -0.17761101180932151 0.040483547105315071 0.52360860098768014 -0.18967979949789662 0.9506122261927018 -0.10950487299866313 -0.1028268740463814 0.22741406365308128 -0.49969724858698555 0.17884653234597209 0.58814298570110368 -0.15339688105778151 -0.87679661412060539 -0.010112079340877694 0.94594034139226779 -0.21865839378593538 -0.27971125009952047 0.021982105320319287 -0.090979958180045881 0.34745431234875529 -0.57796333211061113 -0.3727733915342929 0.2238512417217407 -1.1009831948274604 0.1524939200797073 1.3832313123419908 -0.043257724610645074 -0.039223813252074059 -0.03248329180931895 -0.027968278623954949 0.81219473088265626 0.70997804036534273 1.0471207854719606 0.48177377876572275 -0.090711083807165069 -2.0060959255701865 -0.37324970632823434 -0.10997011801593888 -0.020385181001581192];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
