function [Y,Xf,Af] = ESPER_silicate_3_Atl_3(X,~,~)
%ESPER_SILICATE_3_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_3_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-177.232103709389;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.00425400504498441;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.41944094082536520496;4.2474541256203961481;-4.1432528737545055719;-3.2786434223718927683;1.4232383540158972668;-2.5705673000442836873;-0.40520715886857477939;-2.072677253909407824;-0.50529369622545428076;-0.39745824821580444386;0.59528316532777347803;0.89766573880096578453;0.31445037781614448846;-0.8592756415990976393;-0.55596633887405666474;-0.75739850328154723069;2.0821768638732156553;-0.15361964918387371881;-1.1375257309607587075;-2.7898637770540544167;-0.45715887997504423002;2.2328831966590185765;-2.3385353466775944398;-3.5199155267924893131;3.244920667882105203];
IW1_1 = [0.63042355260474525203 0.29831563746922123981 1.9071373902214863172 -0.50087056147775088633 -0.56582684788225556805 0.4576268620938103715 1.6957200762749615741 0.16546189869977462328;-0.092220412429810619259 -1.5634199335234635342 2.4995715828956197591 0.718396156156487109 -1.4850278646364636348 0.65405372107552639527 -0.24859722058619282414 0.016201677023373016462;-0.60381983969394614764 -0.14191389417890645785 -1.2245120680973222704 0.19639205141535673316 -1.3596552932799907953 -5.6430207814327584259 -0.084553849237423039931 0.94663075060962476037;0.45080545014996270536 -0.19993196053572098725 0.42273505109176295891 0.51449477884194971811 2.3521414195263750102 -1.8622459455181343824 -1.3000607784819244728 -0.46443903199487784894;-0.82607142455377213786 0.48350490837364207275 0.16045283339657565036 0.13967531038332717253 0.85045113957532691984 1.4619152820068757048 2.2802038889546727418 0.35552748351342255972;0.35348265812860807378 -0.51266410671036188873 -1.5112872936467014462 0.55373134008824631547 3.4660257245304522122 1.0615801869728505036 0.72488819241963886597 0.35070282166449046057;0.29561707349151633561 0.58044341530498999582 0.13341318469759039234 0.38657083964414601374 3.0441679657623139654 -0.023293211994826118483 0.76750655486372110214 0.016967824486394784966;0.42420146609161862861 0.40948551970077146089 3.792985149933068012 0.77035645732601976121 -1.3666994596002493001 -0.92649663309599195049 0.27682229666174879013 1.1596543227021360867;-0.74023218381961575218 -0.25188790683954798144 -1.3050575970506761436 0.65612601099979139807 -2.5275813664124844315 -2.2862444021903427505 -1.0153738787156714185 0.93781439463755045249;1.0263147700772627946 0.27588437635053952857 0.52317441440350920256 -0.27664834209381961028 4.3686729635355545653 1.0685760323077566625 -0.45163896763841865356 -0.61816510915540001658;0.33087456118751484846 0.55124592062381683188 -0.24139037907678417838 -1.036834368282086194 -0.86538884295277807013 -0.72410131622377860161 -0.50932111153219872257 0.18351185890550436586;-1.8407864279931986928 0.25284084674655588065 1.1880016719322454843 -1.8727256728426673327 -1.424542291535439098 -1.2213418467492387354 1.8423149031249972385 -2.4359797943010286225;-0.50196736448277101683 0.13748282605602402118 1.708302806326078338 -0.58931741300502238357 -1.9852927567748239746 -1.0872449740923071371 -0.84202205621540038294 -1.5065578181446468431;0.21458506891026213337 0.0060289887774655648994 1.3446105390520297629 0.79090772638398643135 2.6282243651917629457 0.75656155764434296351 1.089937486252936294 -1.341673771799772874;-0.30688403451695195345 0.11965859446148374712 -0.26444722097969797225 1.1336185151063111753 0.24523737080269453203 -0.28185741307272310641 -0.44125111054583926462 -1.4733061582670214928;1.0182625377081726548 -1.5334458744950816289 -1.318848031194268966 0.022623523025938181708 -3.3029960048786275451 -1.1813346814708229893 2.5353080839786477085 -0.10248979541144509486;0.40060018899385374525 -0.84804488483343953842 0.11459104494887746573 -0.6301328308249513066 -1.6182023639839080431 2.1789529506338554121 -1.4181131160111268841 1.2865273479236940535;0.041265049833989028705 0.21660178541159391674 -1.7745131832382388115 1.5578778620527777843 0.38276038256732708431 -3.2381956870381247704 1.3033888714569776823 -0.054824896888003925299;0.46126538418963058952 0.008583927818850010244 -0.094237458325620832023 0.69269608116544623133 3.1894934053517176586 0.14669319210473064086 -0.86793706055826036483 -1.2918027092742676576;-0.65758100435374045034 -0.10483261387411900445 0.29490476848189317582 0.28298246598585385936 2.2994208843392054398 -1.9705086911245097703 1.5510666361931708668 1.0498690674747259699;0.69344139417061945174 -1.2422313725022855468 0.15780995223752208867 -1.8173399654935826764 0.79651445472449067253 -0.41064982428362900579 -2.4275826435739951137 0.64179128876355495681;-0.16525282386227513332 1.3334161392574148675 -2.065333424720692701 -1.6214089996642075953 -0.37549601010267652512 -2.0822460891314888976 2.0605570282810958815 -1.002628972688569764;-1.456172604349412536 0.65216108859035049061 -0.30330003971571589672 0.20990262770305675999 -0.7228167273624382938 2.0904746179902908843 -0.91275573270136844961 0.33652446821206694061;-0.1195527838092181605 -5.369545811968643001 -0.22620963485592382458 -1.1076488467972238627 -0.61838398453682064115 3.2195249760682171924 -2.6449670892539511868 2.9273233018096136426;1.2802369030489995083 -0.01579860407065560024 1.7053507404283487769 0.090920775678848819723 2.4098892390017634391 4.0590125075034011459 -0.35934277229603517334 0.55724793095071745164];

% Layer 2
b2 = [-2.0587646631786231666;2.0823338746625923434;-1.1171848623684290658;0.89353590414540862152;1.6425094903825703252;0.50943261503195014228;-1.0246564218340465935;-0.20338398688148243143;-0.28792416582330421226;-1.0059858797400402786;-0.38279771118313404843;1.5666439612455862473;0.47693460779877056011;-0.46996536170222957818;-2.4190515468746958128];
LW2_1 = [-1.6072659699215703366 -2.062293096863751618 -1.2340330307156086587 0.333457467072873881 0.74365891570592812521 0.98466349345373482826 2.3549486127136827207 -0.97557471074103907505 -1.68130838695982332 1.5584387230915508482 1.040387323444610157 -0.15310362761842494228 0.31273163516123814176 -1.1841395474282181421 -1.0922408767568094756 1.7214041991858199943 -0.69524735050279562465 -0.68245982676713257131 -0.5029087640991956043 -0.79375512664248415451 -1.3318020246891613123 0.67723354269744773237 0.53322845051704637065 0.52209410911680154133 1.3459909120014204031;-0.057013491358563303524 0.25980446883144786563 2.1267596845980820675 0.39639513980281315675 0.12715654041434715227 0.075925047526683664412 -0.80985713841404249891 1.6582971678174309726 -0.30317923639205590636 1.2266855689829185838 0.20975588169742426237 0.13302776011443906423 0.71654013986644471412 0.057694167099978856117 0.80127719448825673876 -1.1140516070898736078 1.3662295309848051517 1.199671398263103983 -1.8396776381579622583 -1.226054942288228089 0.56930695701646127915 0.74344514453030918766 -1.2112933705008235297 0.4396688748249469314 -0.57913593360680648559;0.8432310463730225969 2.4225114726706289403 0.024667866937369414826 -1.0042922924557486919 0.86747898012279411883 -0.63359608371766185098 -0.12927189824893711712 -2.6848182095097210542 -0.24175531207698222613 -1.3695160911791410818 -1.6156687995976524164 -0.18008012751705365639 -2.1567904314251720166 1.3231346734464983772 1.1810566393055343948 -0.996616032638748095 0.99298002045122357728 0.85963056242751301195 -2.3601951964081413493 -0.39526013650910185593 -1.3631132357051538584 -0.61661457376731698687 1.9427169613053669739 -1.1997812241243870357 0.33256790485692983017;-1.2876557475744641046 0.013215296754274130642 0.20522896137961776919 0.079552726434449008708 -0.25825041999974712725 -0.2777349875439943383 0.46014692102068477375 -0.26999880763445094356 0.39593602239384012575 0.68554713927357990855 -0.63473068014875611009 2.1161813659414097089 -0.49607123261341201648 -0.44550657896308526462 1.4909366972621598268 1.5953522700975122373 1.1384333807463520305 -0.078741112332032348053 2.7834511507911949835 1.8332055186522100421 -0.47423416329370027267 0.97982126969093530366 0.082463121976058900708 -0.71507025016471048584 -0.5033005295358041753;1.6652340461423269513 -0.38949529366326257618 -2.251146651593024739 -2.4379005989370869933 -1.5879818050326663936 2.7042025892524108599 -2.1285825294345004366 0.79193250076963839224 2.5618009183348959823 -2.0883228986875348454 0.78728599609048943719 0.6573897624016407093 0.55449969374144958412 0.84094262917887063757 1.3334099536769292715 -1.211456766129315854 0.16247968640322338341 1.3757685366352068179 1.1953932087219096836 0.83022050204864672462 0.99043686385570517405 -0.99180726424896792359 -1.3938903735539824869 0.014157909134400455814 2.7487186880518441612;-0.13682156741496867558 -0.42697115704738836106 -0.76228322042205842735 1.8938508640799893712 1.3062411035018286487 0.44436866148066611615 -1.5817790858780933494 0.25441955635070440112 0.41521721833826424897 -0.41010500835858842983 0.26242694029310636994 0.21404869745888038812 -0.092415340830988096377 -0.22440422406243845654 -1.2457509078416229009 0.21718089298371309748 -1.0327002050888274276 -0.48981874728626778603 0.28322341047719129525 0.48231977636372075358 -0.56472209988123311941 1.0074449416154547254 0.11516104903296874029 -0.21490883576474012484 0.28997935021125426092;1.1825093015098526728 1.8643677860240590594 3.0530924592760912972 1.4404356441649726062 0.034542360275877016795 -0.91290221617312750091 -3.17373882312454203 -2.4618821220641784464 -2.6725318535864346359 -1.7989341832090659512 -1.2740399164022329082 -1.8817883427220327697 -0.79174676437166868759 -0.2401947873455897442 -2.3091754269697379875 -0.32329029133787789974 2.0628899316728559477 1.3282203117407513915 2.2058033183670491262 0.55961902442878641573 0.22863579813712647804 0.48979655809201755323 0.59804090209832017067 0.42421545894805073873 -0.66827552082472463368;-0.53370156708363136744 1.5792364623429857584 -1.5131174947546390808 -0.31213798277140181181 -1.0169504716439872194 1.762216762803034964 -1.6478145280680551732 -0.56900986538854292363 -1.0616760520065280371 2.8626297143884174012 0.55711240558815533497 0.6373230714115866169 1.3568690690048563763 -0.83737881850299000774 2.9145038612651417154 -0.30948302461952659215 0.82039863022154269068 -1.161005196767808334 -0.063536024340684157941 0.44408488499144677109 -0.35909224717288884543 1.1994911050713867873 -0.080064588475334361184 -0.49775633050648604438 -2.3429442411216676589;0.53813377197238443372 -0.24300377791475558098 -0.18670674549928523156 1.5105984410257919937 1.4722705115106660134 -1.5920945436430771203 2.2896407417579229815 1.2510294928632392786 2.9378502728561577406 -0.19906023454819876672 0.40748190535251488376 -1.1700841466444735772 -0.33366630539305308645 -0.0068375838512913927891 -1.2643035345749848997 -1.2735679442997034361 -0.79110269082048323419 -0.40487159721484439201 0.057072891631892178066 -0.47205436749635659721 0.59766265848681721096 0.091901512132438467617 0.55155874368543533759 0.45983503363704281153 -1.711957624693784874;-1.4211038757256451159 -1.0212489718661010851 0.46150324260606812032 -0.15746348172396057441 -0.27240928447151635527 1.0599042119867259082 -0.94288146207418410683 -0.074873013010683150958 -3.524246333968561018 0.19405226285155788291 -1.321376169633383002 -1.3532710079840641892 1.7078930018700377857 3.1577853922094942796 -2.7628395870394619749 0.93102496481552166063 -1.2148863268804972471 -0.23827192178268563616 0.89503141143594644458 0.92142123735899772452 0.45911369979047345069 -1.0320256720128846428 0.68635720851478898563 -1.4688880767073948519 0.29922570840006507131;0.74341298149836965159 0.91548576195825315249 -1.1621206050268237941 -0.94319544617140471665 -0.96379464651022139776 -0.23155029219200501389 -1.286453388831054756 0.79248332227236073511 -2.3874589563341910292 -0.68008200913500649332 0.30852788090754579287 -0.43694178947509398903 -1.3358620756751551362 0.31330700323136922991 1.8647496173243500728 -0.33328357194240659789 0.025273079803462168702 1.952642738790760335 -1.5507342452919479214 -1.120234849011232825 0.5503846108679375515 0.4682782576561980159 -0.10050891994544039476 0.39730231952684019747 0.15282163112384380965;-2.4817027008645968778 0.60997287367077379638 -2.0027174206223223862 0.54297601260738104223 0.46258526137374744724 0.083098349646011052116 1.5337212421156478648 -0.79486649108377527284 -0.93655246226340505 0.096305898216724777905 -0.14252244458165236329 -0.96642123827719084161 -1.5916031581820857532 0.75424202188347688747 -0.37963458724009080392 2.0784544085617588927 1.4983250292269458814 1.8328394762809530061 -0.29260481146318945145 -1.9081146637324277737 0.10181200824462294241 0.30102891528049313674 -0.87003889764516906258 -0.26457936664551257033 -1.8615527989671882825;1.23151318163661605 2.1563137200571920182 1.5077552314489386376 -0.25212550725985843902 -0.15714901112436396868 -0.47097965942334890643 0.12148423266560998135 0.51440032174570216039 -0.30144464270708060116 -1.0264433957388450214 -1.0442842558171678835 -0.53245236828811604024 0.015114928819040156574 -1.7142261599803763072 0.22209265494480945335 0.064881883846588966902 -0.3336391396237381457 -0.84999640511638541174 0.656121183848720535 0.24252702899491146438 -0.59185273811886063289 1.029863440164417332 0.62397416504067970688 -0.068057885306688395421 0.3856189789886428354;0.38383060329797313859 0.026514487472557364545 -0.95496018952109884559 2.2077844212310946403 1.5119180583614602043 1.6192787434144673142 -1.9929797645113669358 -0.013263320290101023383 -0.58959666961906687099 -1.280367566390075984 0.31309262455674791159 -0.1556114467054331707 1.2997040988981627407 -1.0717318255999879195 -1.3535189279813706342 0.53431717134241396572 -1.1639073257250929228 -0.65409119484336075701 2.0004600150141800263 0.95212578209169107524 -0.82896817257012012092 1.3334505587275995442 -0.3593573767560230281 -0.051564783112006656873 -0.21459690327409561283;-0.32680389939986642656 0.68933418321242201365 -1.334205933720740811 0.71073993328281526161 0.32490391103328919442 -2.1925554314965625125 0.90307689167480598158 -0.3398278680874624591 1.4044814751148491094 -0.24809961389793033781 1.6722240427197685442 0.0050246052293781004114 -1.2359678298563467891 -0.47055823897584841964 -0.86519686142076734914 3.3350175125873491311 -1.4184475097388133946 -0.8485325478985608072 1.4021410382672507833 0.15754708406969275547 -1.7629317453315758168 -0.92605056929550266798 1.3319427035300275275 -0.64478030628606974872 0.071853352892097516191];

% Layer 3
b3 = -0.19049300925262058204;
LW3_2 = [0.050122534935652343635 0.11805053809880483584 -0.010490798235288884693 0.038405197233289389835 -0.59633286726475442929 0.5862570057867699802 0.037823909192089950893 -0.075045608475397332371 -0.087681206891038684925 0.027720508346533855037 0.036316379987278983588 0.083458059738154052876 0.11069515194417933746 -0.43921898799329733842 0.21909924521167414846];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
