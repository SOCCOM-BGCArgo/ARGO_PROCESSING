function [Y,Xf,Af] = ESPER_talk_9_Other_1(X,~,~)
%ESPER_TALK_9_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:47.
% 
% [Y] = ESPER_talk_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-25.271854452000625;1.042215940738797;-0.81863727339427339;348.29482642605979;1.7294592828571964;720.33796526379433;828.62813120512283;309.03433875911713;9.5686975473670266;86.582830711581437;-53.317668672162121;-0.27523012006673359;89.722346233311498;-66.100159204830831;49.811703423387833;0.81313790360366511;-154.36234943548286;389.91776715276853;0.64037946185518657;6.5836854923836894;60.184573956339101;-0.71806228471012312;2727.5178630073719;21.803958519851122;46.540210066109097;-1.0005974511724045;-0.29229822698460267;-34.969218419913986;180.11601525850597;-5.4681991468906279;-0.25410269761828463;8.7480482266840802;-244.9220316567766;-34.713864708468449;-47.60954525382293;-143.12556631511663;143.24536509286065;-2.7238692325994185;-1.4770102318851466;-0.51462742367345282];
IW1_1 = [-34.242145349088361 30.740756133992967 -58.161085987291777 -115.76837538453341 121.57005191865646 -67.473452771974408 72.471412790633622 184.39162666168218;3.4614286210589875 2.0101017820226934 -2.5842768903078386 -13.930463864571275 15.322921665210112 9.3600814975847513 -27.402014098118421 10.964991556997784;0.12344151612572894 -0.099150055106766652 -2.0857769266360315 0.3131915924717103 1.2533822060723159 2.4591868073405059 -4.4880107458854619 0.41113467057417047;-536.49219189029532 -35.764051358504879 -733.91290025402964 277.72099730370411 -908.86828594458029 -252.89462413018285 153.88424897470429 280.61519656187653;-0.47228677439046862 0.027030324791989684 -1.2772836420212574 -0.11409989015020569 -3.4178169778179224 -0.98664241810769571 -0.31595972414588708 2.603704210751594;619.16332680431776 1105.0976982377438 396.62148798042136 218.31832718984285 230.76114327217451 277.60398827252027 226.52245677456605 372.02416981568791;47.01294086945304 329.4605417840624 46.681646997631951 563.04548854257121 -2393.0499695123922 -431.36792541052046 -737.63006778694285 -4.5653527902723656;155.16371116323913 -86.45700238061977 103.11727565239674 20.18604515593842 -1027.5764130617483 -7.02222082674934 -272.77657352826549 -57.413942536521439;3.7649051612138034 27.465709551895507 -73.015032073300176 101.30219526226576 -84.38696585974688 -45.137880195011213 37.051098871752174 -66.74442575532909;25.865436275138144 -61.521692672299977 33.275702115786494 60.444090489169938 -98.986023766851005 -180.99667855884107 148.31460124361266 -9.8356412333871948;-3.825211112315841 27.531311925188994 -31.57865038023197 -104.67692215744172 -164.49698522101076 -38.51891974633012 80.389042922199124 11.172206422916297;0.43213801615016489 0.0049607743644624735 0.71110111533436482 -0.055815156186493312 -0.013616763974449983 -1.2621529321604401 1.6056260493457695 0.87878095951285606;0.89261343550373262 -6.5186157431575076 40.008503600421662 46.852979398891293 44.497123540903473 15.635727928422698 -22.218070943393972 48.573828020635098;-92.408065958892294 37.188268615671831 193.45264784109105 -726.03549725173787 -402.7148946749324 446.73519525466219 -1049.5689936841434 442.02436646685891;46.630880129721213 42.037018649672021 25.512668027998028 -50.191666488779681 -318.048231345266 -165.10167690770979 227.54975028930951 147.21293236007682;-2.3885832759029531 -0.15377992587884265 -1.8140780527874047 1.6611126681993729 -1.1047914340849618 0.27689988687233957 -2.6584257308141006 -1.3950704767773987;-183.59871031969246 182.84292516404884 -147.73689125678746 -172.55596072460401 -101.62648873757827 -352.17745169314168 299.1207221390311 107.5658796238144;39.170500698005007 879.50384831251847 638.72539414475762 587.64832918734601 67.040575179844723 106.38384757493102 -119.58237317612377 148.01517148314863;-0.080574934569031226 -0.013089644068806167 -0.35028117311281282 0.42467297789380165 0.55645999268687774 1.0203742690357782 -1.3880203158944393 0.015742148569769861;0.90074092473156797 0.53272703513467612 0.050409610819726752 4.445612746039572 1.3617246035475392 -1.8356370421934267 1.4393259886248833 1.6995297738497621;21.958583288434262 -6.1921186358069855 -58.140367287853664 65.778330021228783 -46.228707750518048 -122.05080293347467 73.029236390473059 26.863684754298419;-0.082777836291216697 0.052426186840115817 0.29811847125934826 -0.19287011552897276 -1.2687017486050343 -0.5961745516075394 -0.36988432817815498 0.045510189025480347;159.85403982194057 -828.38459627540465 1142.3063855759995 1856.9531391523842 1464.2200947194865 -1860.2499339865017 1858.7627710135741 1075.4053524024846;326.17588930560629 45.643250583315591 -101.85473112737932 -237.30503954389988 -147.87476753848648 -54.405855381985866 430.58602151428357 69.57525339778762;57.411379081140808 -115.77303298897588 12.270274583791595 11.906426774096282 148.83747780724119 320.85340386611642 -534.12304022954424 -36.584006029022405;1.6159063498202744 -0.30320784909501625 -2.0000410624931515 -1.7689538537749958 2.22616274457368 2.3768716170668878 -3.3755264916813297 -0.85683670243483168;0.37981736856378773 0.0049244096270088886 0.67792579490874538 -0.043478816583299183 0.03400978274229996 -1.1622750069508989 1.494311972861623 0.77723482575791636;-4.26904870249846 -11.831888662720006 21.398629262081101 -5.1612304642690399 74.272876775198725 67.363137168342988 -43.14514751939415 -32.685087177227729;201.86468160035747 98.839904184805064 -104.53336902622597 -150.75292549836703 -1092.6467688559098 -509.75631109749952 598.92218148850918 847.52037413946891;46.945516546640334 -37.243779185871304 37.896399059907331 33.268125835175901 157.99530610247319 123.53067336492363 -168.9899089753859 -55.675290691330986;-0.25744064161106789 -0.023247455746428131 -1.1352099173200956 -0.05381849144491066 1.3387402706076545 -0.035733067346757401 0.08229282766261177 0.70245723543399818;4.8600585813008568 2.2053603898141185 -23.696897721926117 34.572630552600508 -105.98356809820247 -19.942909649580638 18.581615396257003 -39.833497018163065;-87.160615237204794 -38.85687129303232 -17.903633332270562 -180.67436841446892 180.25773686921559 287.16233305897401 -251.1030925791834 -86.296633864539501;-13.270754200550432 -20.498585201547165 33.266952749805263 19.938595215884899 162.25474656481632 51.622783865498221 -78.240999270758181 -30.505913756075977;5.9706849402722719 4.9148913012100142 10.786574011777741 -7.904490110708644 422.24911833478825 85.879423733011024 -144.31936516080037 107.13996407817102;54.305124761055659 -51.595866443027973 109.03652045851605 -89.957063394561928 216.86349627689648 233.02264910539773 -150.97068383473174 -148.09204611407731;-33.450293554722528 147.06730277895747 -281.52976655134165 -519.23253028619456 -109.36445203598277 -869.89654501279563 1090.2222087620689 1048.9676988351321;-0.42184823367961327 0.086481192346974156 1.6491113382879878 -0.50121643885651956 26.248806459466326 -8.0455702832915268 5.2757990598421429 -7.5916006330472392;0.56057038637761114 -0.008912708059530549 1.5106039525836246 0.042761062431891164 3.0094464346249703 1.0073566936954792 0.058674768414431866 -2.3687474351727609;-0.084624902540458999 0.068517077936328025 0.32069945652797865 -0.051572217281093097 -1.4024546974894128 -0.64346780875650378 -0.36654635393631474 0.13082759164810209];

% Layer 2
b2 = 0.31986135849129366;
LW2_1 = [0.0029585561595451308 0.0069139849753996133 -0.10332035508190636 -0.0020361482948886155 0.5128865801075555 -0.0011285273768403554 0.00083820324282143368 -0.001395818092814278 -0.0027243085479319506 -0.0022577358445119719 0.0026172768872807961 -4.75018581130439 0.011312498420974853 -0.0023421651017083438 0.0031197127786628362 0.021989794321161209 0.00063190998207124848 0.0016869407820564461 0.79126758255660323 0.11316022352432278 0.0029425806747040407 4.3667635915964427 -0.0010152704585330312 -0.002566875435472152 -0.0035348948661463888 -0.040263921665238789 5.6987072128526046 0.0042900599307141652 0.0020003308457864437 0.0029775538050822704 0.38786731630895532 0.0038558594144745798 -0.0026123358644606878 -0.0036810485899855978 -0.0023395259297600934 0.0024680191296698136 -0.0010047682880054518 0.025335377984702964 0.55068818717163315 -4.2627328366061059];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
