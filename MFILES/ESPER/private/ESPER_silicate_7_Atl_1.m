function [Y,Xf,Af] = ESPER_silicate_7_Atl_1(X,~,~)
%ESPER_SILICATE_7_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_7_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.1510581630117771024;-3.4475736548237239099;-0.95354035375935286556;-2.7504507129467636872;2.6563735222830531235;-4.8880372958135769323;-0.86606359465585136537;1.4717817516586386706;4.5859854479439228214;-0.075091461081187055315;-1.121438035312220638;1.0117330249201275105;-1.0138988437475342508;2.2763424564967911223;1.9644485328213585618;6.3946465769023790315;-0.35585749946467604143;-0.93385523308024798173;-0.89517015488349971353;0.5351466649009249954;-0.42697982924153971007;0.19934298669311187324;-0.39873591813334469114;-13.818900856186200343;-2.7989698352832643735;4.252311745229665263;1.3424071636711658595;-0.36252128142867007243;-3.0899518318003789119;0.016085168987861827444;-1.8915470083734351459;-9.2013575115004666571;-3.3531706203391218324;1.2541947552857950487;-4.7626288595816506088;-0.55315759899587890747;1.3242781453103154021;-1.3984745297783194307;8.9779299331270738804;-13.469175787029749713];
IW1_1 = [-1.7038112364952771038 0.30394637780868399846 -2.1176061522482978461 -0.18081528759120277239 -0.49398413070598662378 -1.4844017946852710033 -1.3807556346989073859;-0.66050363325891836563 3.7142461318056061437 -1.470243412205095801 -1.0603825583858583759 -1.273747140845055803 -1.2986968687194972993 0.20262789945302286942;0.02584187749269607759 -0.37851176231703359543 1.2225177441702068659 -0.99994053742028654597 -0.41440082274680001273 -0.40823056236549698506 -2.3906782745352308517;0.0014182294117991065506 -0.076421639517429099109 -1.3097969333857353291 0.99363169638405179906 1.6148506996427596238 -0.45288603056081749854 0.42927024994706147742;0.63046824752573238371 -0.20029179412946748751 -1.3147481780197531887 0.16895539654950161856 -0.99090467001829451998 2.6508210302375867506 -0.67135055382593766815;1.4250151663133661106 1.5187425174474709078 1.6716642112646900031 -1.1559397056117415303 -2.8841838564833999214 -4.0525167196342772868 -2.0690490867756925475;0.21512136363151523888 -0.073959812573119912416 0.38926912435486954456 -0.76154326316643072836 0.13210450463287395917 0.6151885097045121098 0.57830411104374002118;0.35617236783950656509 -0.95010403231596018969 1.8817049556463265603 0.65242365614252562089 0.57156170711326059752 -0.34511161771552251176 -0.98279342533250912961;-2.0980019836670109612 1.2448797638737216786 0.59178125646732360199 -3.2019090235356237883 -5.5155341647630091728 -1.182533065094809821 -1.5967793207003413425;-1.3082177114498225734 -0.16349720295514516555 -0.35905747937572618511 -0.94184522617362087527 0.97464636501492840637 -0.4892342348045890521 1.5022674973708998181;-0.52690875233066691852 0.81897006213480971759 -1.6228548524513186635 -0.5497135033143131233 -0.66258733415621540175 0.49696275537701428693 1.0727742182048869424;-0.1234071977332608927 0.46583045040432802253 -1.2837852908645146499 1.0246259933774930495 0.456626978163816033 0.50468460052607932997 2.5807950627459539383;-0.62604086924946844572 0.94151131273286248202 -0.28659016244541080098 -1.7070022309809333994 2.0891012705476854627 -2.2639543701834599077 -5.3577104285614876034;-0.55624974417201356047 0.32210672933473982749 -1.8843161836642372542 0.53171836687128692933 0.082116992945937022919 1.4816641603583049491 4.1480357093347874908;0.78642682305210664939 -0.1899765324499886332 1.7607787413011204425 -0.62822236064251935073 -1.2704874461115431838 1.9657358111983276316 0.99541814691364016721;0.72851896623005441 -0.075748809140454967381 1.2756157234900116215 -0.57556300789479697411 -1.6278146068968446514 5.515690476501529993 -0.3314855092936145331;-0.4232177771254194143 -0.12805530170726445172 0.46070950471295379902 -0.42818816771986789593 -0.46559559014834439594 0.051307700544946863164 -0.081013956722734772886;6.6863165641463844224 9.4879251898077932026 0.32206846669456890009 0.76642483816698903087 0.20315745594570153165 -1.8595785095973933476 4.6294539136063814766;0.5889364675510706526 0.13399169722131790139 -0.63629013395628319927 -1.5225966522192142527 -0.33456688725851074784 -0.53026560222788354793 1.4334826870055406012;-0.78262743025637682148 1.016906682969450415 -0.2162719253769059824 -0.79721169965547533653 1.2203666111356332724 -1.9971146151170113825 -5.0471615372091402918;-0.96076779225254238526 -0.11347053482705654615 -1.4643154463649163954 -1.4857640421430327038 -1.060705375539497064 0.7057453036039628147 1.1983742687191552001;0.38107760148137204137 0.057677988315663342167 -1.4171952057591512553 1.6851687669435400085 -0.11481134893955574627 0.34952534045186295364 0.89055386062868302499;0.53674251506949499646 0.3588542529776993506 -1.9509066617774557528 0.018583110501642536444 1.4846225409412618923 -0.91240442179052094751 -2.3886681971101872968;-1.2261026162700390252 0.27479300588248939397 -3.6339914252798575234 -2.8151962314333114357 3.896513923337160179 -10.530661095469097788 -0.14428124724500618337;-0.74867818261516561051 0.22909716551117764727 1.5476520445278780791 -0.3128986178010125796 0.903221892781370439 -2.7767084258840006861 0.89058446574142569041;0.88942416251726241772 0.035339156908364845189 -0.45595694031065547858 -0.52853281997666801129 -5.7310865078675377049 2.0615313517196636184 3.1328721510761843305;1.14821392408490075 -0.15612438186136956553 1.1988789812247104827 1.454687521118385396 -6.6388138926975983622 -1.6080210920866484514 2.2731443228352476993;0.99071731191300127506 0.015816599051542774151 0.0020871516509112010042 0.34645366529816384871 -1.4036394965347889219 0.55514678930155247905 -2.1821017567019613814;-1.765301694859853221 0.073558638921114846698 -2.8578183643128265423 0.44764030741001570313 -5.3897759866640502224 -5.9430129864504541715 2.874379770866119177;-0.4677763112821123892 -0.036042325962688401275 0.079392668646284025868 -0.26690638636889019164 -0.45422949032960491245 -0.17962983190670894773 -0.43033372327895874632;-0.38554457347174292403 0.1178399699439700854 0.20618597229050106279 3.6200087017966700031 5.0606387328978401641 -2.9785405333944341422 -1.6555515750608487124;-0.81368629890204080546 0.06304009174849517505 -1.2822627514609821198 0.63098530438872280079 5.0524695570485276264 -6.1334749329655755545 0.24275196855432015774;-1.0383889018997582987 0.87003586798997623042 -0.94035353351216177664 -4.9741714290736327442 -1.5814580532376611988 1.7316954556122026165 -1.6178016933364682828;0.35543043611117097758 -0.04505384782882117245 -0.42745158906807695365 -0.48616873165060825457 0.26148801718580244602 1.4014287166370034132 1.3644076912237768084;-0.8684352792428660095 -0.065865572058134591593 0.4498551454346316758 0.11699487689021609294 5.9039152462650328346 -2.1272929184158360094 -3.0218739122507498607;-1.1647351117206699023 -1.6032084102305554918 -4.0094920174564760984 0.44095659396277697706 -0.17073493378919990526 1.0280202914260259117 0.03182705250888374221;0.20808950747752910648 -0.056075626520616143889 -0.44668603265597095486 -0.38427502659319329181 0.18001526389516694926 1.471242210308888243 0.86459754539812172514;-2.2458270522812426861 -0.76867140402121814091 -2.9498029868721906688 0.52452611498791112954 -1.3717225731021687185 -0.81572634730638038381 -2.0148282775939203582;0.73168752187488850236 -0.68242027937657334657 -2.0033130480606580193 0.45777306102359760498 -2.2996645045135748475 5.5005702757331143005 0.9192991968132787628;-1.2408222695262600688 0.27716609640817141402 -3.5964569268155539561 -2.8100986324417438489 3.3192377104148818034 -10.589901038468049421 -0.13424019610898121901];

% Layer 2
b2 = -0.033072756917287976508;
LW2_1 = [-0.54158942579592872502 -0.11660992049933886772 2.4760771781271668779 -1.458355240887858173 -2.7672582760084720732 0.097745836071400790668 -1.8437650890165526718 1.9285861712283451919 -0.070141015476779478011 0.41701920794103009005 2.570091966748513812 2.0626568803602221003 -0.18819913887785758022 0.088279262091145768721 -0.71056511333649341466 -6.9294062105639024907 3.4762068670587455976 0.010653389137380413557 0.31100511097168836994 0.25614031130161368788 0.2495581362827772598 -0.52461014773030578695 0.20189529136712680568 3.6806110412545911537 -2.1068755041117386284 -1.2910717928584924952 0.27067759157695048255 0.40684235400975354846 -0.23879266116098474271 -4.6162511266356212047 -0.14874739257293831396 -4.9534846520250859214 0.058613554213239556223 -3.2920155711139273969 -1.2465895720229998034 -0.040732142071509214176 4.4804455272907368624 0.25779419652389862216 -0.20548543389806669945 -3.7726935668959096226];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
