function [Y,Xf,Af] = ESPER_TA_9_Other_1(X,~,~)
%ESPER_TA_9_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-25.271854452000624747;1.0422159407387969754;-0.81863727339427339036;348.29482642605978526;1.7294592828571964116;720.33796526379433089;828.62813120512282694;309.03433875911713358;9.5686975473670266013;86.582830711581436844;-53.317668672162120913;-0.27523012006673358565;89.722346233311498054;-66.100159204830831072;49.811703423387832856;0.81313790360366511312;-154.36234943548285514;389.91776715276853338;0.64037946185518657138;6.583685492383689386;60.184573956339100675;-0.71806228471012312209;2727.5178630073719432;21.803958519851121878;46.540210066109096942;-1.0005974511724045062;-0.2922982269846026715;-34.96921841991398594;180.11601525850596772;-5.4681991468906279152;-0.2541026976182846342;8.7480482266840802197;-244.92203165677659626;-34.713864708468449294;-47.609545253822929567;-143.12556631511662886;143.24536509286065211;-2.7238692325994184884;-1.4770102318851465739;-0.5146274236734528218];
IW1_1 = [-34.242145349088360717 30.740756133992967136 -58.161085987291777144 -115.76837538453341381 121.57005191865646054 -67.473452771974407938 72.471412790633621626 184.39162666168218152;3.4614286210589875203 2.0101017820226934063 -2.5842768903078385812 -13.930463864571274613 15.322921665210111897 9.3600814975847512756 -27.402014098118421259 10.964991556997784272;0.12344151612572894228 -0.099150055106766651902 -2.0857769266360315363 0.31319159247171030058 1.2533822060723158742 2.4591868073405058759 -4.488010745885461894 0.41113467057417046879;-536.49219189029531663 -35.764051358504879374 -733.91290025402963693 277.72099730370410953 -908.86828594458029329 -252.89462413018284792 153.88424897470429187 280.61519656187653027;-0.47228677439046862219 0.027030324791989683575 -1.2772836420212574371 -0.11409989015020569059 -3.4178169778179223748 -0.98664241810769570673 -0.31595972414588707755 2.6037042107515939726;619.16332680431776225 1105.0976982377437707 396.62148798042136377 218.31832718984284725 230.7611432721745075 277.60398827252026877 226.52245677456605222 372.02416981568791243;47.012940869453039738 329.46054178406239998 46.681646997631951024 563.04548854257120638 -2393.0499695123921811 -431.36792541052045635 -737.63006778694284549 -4.565352790272365624;155.16371116323912815 -86.45700238061976961 103.1172756523967422 20.186045155938419526 -1027.5764130617483261 -7.0222208267493400058 -272.77657352826548731 -57.413942536521439308;3.764905161213803364 27.465709551895507445 -73.015032073300176307 101.3021952622657551 -84.386965859746879914 -45.137880195011213402 37.051098871752174091 -66.744425755329089611;25.86543627513814414 -61.521692672299977289 33.275702115786494062 60.444090489169937541 -98.986023766851005234 -180.99667855884106871 148.31460124361265684 -9.8356412333871947595;-3.8252111123158409889 27.531311925188994394 -31.578650380231970018 -104.67692215744172302 -164.49698522101076037 -38.518919746330119835 80.389042922199124064 11.172206422916296731;0.43213801615016489421 0.0049607743644624734819 0.71110111533436481945 -0.055815156186493311563 -0.013616763974449982988 -1.2621529321604401108 1.6056260493457694682 0.87878095951285606358;0.89261343550373262179 -6.5186157431575075805 40.008503600421661872 46.852979398891292817 44.497123540903473327 15.635727928422697985 -22.218070943393971817 48.573828020635097857;-92.408065958892294134 37.18826861567183073 193.45264784109104994 -726.03549725173786555 -402.71489467493239545 446.73519525466218738 -1049.5689936841433791 442.02436646685890764;46.630880129721212768 42.037018649672020842 25.512668027998028464 -50.191666488779681288 -318.0482313452660037 -165.10167690770978766 227.54975028930951453 147.21293236007682026;-2.3885832759029530514 -0.1537799258788426493 -1.814078052787404749 1.661112668199372866 -1.104791434084961832 0.27689988687233957343 -2.6584257308141006071 -1.3950704767773987047;-183.59871031969245792 182.842925164048836 -147.73689125678745881 -172.55596072460400592 -101.62648873757827062 -352.17745169314167697 299.12072213903110196 107.56587962381439638;39.170500698005007223 879.50384831251847118 638.72539414475761532 587.64832918734600753 67.040575179844722697 106.38384757493102484 -119.58237317612376671 148.01517148314863448;-0.080574934569031225751 -0.013089644068806166599 -0.35028117311281281587 0.42467297789380165085 0.55645999268687773576 1.0203742690357782141 -1.3880203158944393049 0.015742148569769860711;0.90074092473156797123 0.53272703513467611902 0.050409610819726752284 4.4456127460395720163 1.3617246035475392141 -1.8356370421934267156 1.4393259886248832569 1.6995297738497621154;21.958583288434262215 -6.192118635806985516 -58.140367287853663925 65.778330021228782698 -46.228707750518047703 -122.05080293347467091 73.029236390473059259 26.863684754298418511;-0.082777836291216697062 0.052426186840115816812 0.29811847125934826108 -0.19287011552897276312 -1.268701748605034263 -0.59617455160753940469 -0.36988432817815497522 0.045510189025480346503;159.85403982194057448 -828.3845962754046468 1142.3063855759994567 1856.9531391523842103 1464.2200947194864966 -1860.2499339865016736 1858.7627710135741381 1075.4053524024845956;326.17588930560629024 45.643250583315591484 -101.85473112737932411 -237.30503954389988053 -147.87476753848648059 -54.405855381985865904 430.58602151428357274 69.575253397787619747;57.411379081140808012 -115.7730329889758849 12.270274583791595191 11.906426774096281918 148.8374778072411857 320.85340386611642316 -534.12304022954424454 -36.584006029022404505;1.6159063498202743681 -0.30320784909501624638 -2.0000410624931515002 -1.7689538537749958103 2.226162744573680019 2.3768716170668877652 -3.3755264916813296772 -0.85683670243483167628;0.37981736856378772726 0.0049244096270088886375 0.67792579490874538273 -0.043478816583299183252 0.034009782742299959901 -1.1622750069508989146 1.4943119728616229835 0.77723482575791635885;-4.2690487024984600239 -11.831888662720006167 21.398629262081101388 -5.1612304642690398637 74.272876775198724886 67.363137168342987593 -43.145147519394150493 -32.685087177227728716;201.86468160035747132 98.839904184805064347 -104.53336902622596938 -150.75292549836703415 -1092.6467688559098406 -509.75631109749951975 598.92218148850918169 847.5203741394689132;46.945516546640334354 -37.243779185871304094 37.896399059907331264 33.268125835175901273 157.99530610247319373 123.53067336492362926 -168.98990897538590161 -55.675290691330985737;-0.25744064161106788857 -0.023247455746428131312 -1.135209917320095574 -0.053818491444910659949 1.3387402706076545478 -0.035733067346757400873 0.082292827662611769957 0.70245723543399818389;4.8600585813008567726 2.2053603898141185269 -23.696897721926116986 34.57263055260050777 -105.98356809820246838 -19.942909649580638387 18.581615396257003425 -39.833497018163065206;-87.160615237204794425 -38.856871293032320125 -17.903633332270562306 -180.67436841446891549 180.25773686921559147 287.16233305897401351 -251.10309257918339654 -86.296633864539501246;-13.270754200550431534 -20.498585201547165013 33.266952749805263068 19.938595215884898693 162.25474656481631541 51.622783865498220734 -78.240999270758180728 -30.505913756075976551;5.9706849402722719233 4.9148913012100141628 10.786574011777741333 -7.9044901107086440462 422.24911833478824974 85.879423733011023501 -144.31936516080037336 107.13996407817101897;54.305124761055658666 -51.595866443027972537 109.03652045851605124 -89.957063394561927794 216.86349627689648401 233.02264910539773268 -150.97068383473174435 -148.09204611407730567;-33.450293554722527745 147.06730277895746895 -281.52976655134165185 -519.23253028619456018 -109.36445203598276521 -869.89654501279562737 1090.2222087620689308 1048.9676988351320688;-0.42184823367961327145 0.086481192346974156138 1.649111338287987838 -0.50121643885651956385 26.248806459466326402 -8.0455702832915267919 5.275799059842142924 -7.5916006330472391994;0.56057038637761114064 -0.0089127080595305489819 1.5106039525836245652 0.042761062431891164182 3.0094464346249703013 1.0073566936954791995 0.05867476841443186597 -2.3687474351727608735;-0.084624902540458998845 0.068517077936328024679 0.32069945652797865465 -0.051572217281093096775 -1.4024546974894127604 -0.64346780875650377851 -0.36654635393631473939 0.13082759164810209285];

% Layer 2
b2 = 0.31986135849129365694;
LW2_1 = [0.0029585561595451307856 0.0069139849753996132642 -0.10332035508190635931 -0.0020361482948886154738 0.51288658010755550087 -0.0011285273768403554073 0.00083820324282143368003 -0.0013958180928142780233 -0.0027243085479319506179 -0.0022577358445119719357 0.0026172768872807961223 -4.7501858113043899934 0.011312498420974852892 -0.0023421651017083437891 0.0031197127786628362119 0.021989794321161208746 0.00063190998207124848482 0.0016869407820564461323 0.79126758255660323282 0.11316022352432278386 0.0029425806747040406629 4.3667635915964426729 -0.0010152704585330311806 -0.0025668754354721519742 -0.0035348948661463887831 -0.040263921665238788794 5.69870721285260462 0.004290059930714165172 0.0020003308457864437363 0.0029775538050822703516 0.3878673163089553233 0.0038558594144745797667 -0.0026123358644606878461 -0.0036810485899855978353 -0.0023395259297600934194 0.0024680191296698136307 -0.0010047682880054518029 0.025335377984702964205 0.5506881871716331478 -4.2627328366061059128];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
