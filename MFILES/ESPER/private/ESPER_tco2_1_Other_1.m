function [Y,Xf,Af] = ESPER_tco2_1_Other_1(X,~,~)
%ESPER_TCO2_1_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:52.
% 
% [Y] = ESPER_tco2_1_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7069927127987059;1.0056315838086127;-0.777137022881904;0.93146384592444964;-2.5973050734410079;7.0628251768103327;-6.6048805575584764;12.742491887019522;-8.9560989170576857;1.442456240198831;4.8882227801467399;-0.73986046676208528;-2.1400449151749794;-2.2011182697475848;-0.94534822487880288;-2.2937035654921121;-1.4740852350587834;-3.8595089615909646;-0.29964459720561565;2.7685788667653761;-2.2075765088122736;-3.30681740703873;11.695795214524114;0.55110412630456662;0.99184916248712296;4.1580842604571577;-1.4791269100229001;0.54339365878502199;10.627653083665933;-0.69042094816089639;0.75471981444544523;-3.0032295870070422;-2.3756183619896212;5.2271609517658657;4.3101673740238677;1.975892526885247;-4.8125526040918212;-0.64998042531689215;-1.4863988950169433;17.67724134522723];
IW1_1 = [-0.60910484892832961 3.0254437655146349 -0.76134799646217355 -1.490509224534218 -1.9379688288285517 0.74550608154574238 2.1627754852836829 -0.45698002330302712 -3.6595549361028166;0.057619802582551824 -0.19752840226405061 0.03530103615642629 -0.73426340668263967 1.1039019216783275 0.81293694625359691 1.418884913449312 -2.9457975297518635 0.40643386338944792;-0.11880556037207284 3.0670106981560292 2.3991129503295352 -4.8949552411306412 7.2982677241783014 -3.3372627116659359 -3.6599148807100588 -11.007502099711411 9.0358128033218019;-0.30578196865822388 0.63660746311370486 2.4982641121619307 0.0012827641064194362 -0.66441155377832428 4.7491655897175589 4.3137685216073329 -2.628198220370733 -0.79913354182674468;-0.17120235092784283 0.030518441126993583 -1.3414901271078552 1.3150930450807365 -1.5573321403804417 -2.9721298112391916 -2.9596856318580969 -2.3813178800558599 -0.55901837592663406;2.0680292185142704 -2.2462167470114043 -5.9371382713409178 0.17901462071865548 -3.7129876675321731 3.5964070787097064 4.2684845065866162 -0.20702352090290171 4.2677917483015371;0.61156322154680598 -1.3990066787527713 -13.850165826607109 4.9536181659478382 6.1337740388327102 1.1541903042471151 -8.5905816201055636 0.18592118594726384 -5.7492804409168947;-1.3403861895892899 0.19371758581911361 -8.584205312870349 2.9284369637967695 -17.583616803492145 10.320673228227832 -5.7871449928289058 7.9070159722477849 4.9939016652169084;-4.340088835232117 -15.541653748040831 -10.798075274579547 -5.8332898869553143 -0.5845261655030709 -0.95622608443529544 -0.85305940596336727 -1.8834642993769386 2.6129353094114118;8.197721624701698 0.37645654539702861 1.2041701312954245 1.3516481002751677 6.2797666056078363 5.6889402568501479 6.5966504726856687 -9.4166483671859265 28.377004491166964;-0.12184513456619739 -0.73321173260555506 1.9341001636028827 -0.047005889830395622 -0.73551386484575798 1.0173557601060106 3.9093834939365237 -9.8972198193812861 7.0777863497545548;0.014473903593589257 -0.0052946408103923797 -0.012580060348050254 -0.16241618780567127 0.1873480960895105 -0.070579875765843472 0.35628907517678748 0.283397072026356 -0.22937327648466047;0.24709988814826309 -0.19007571718453994 -0.18995632849646038 1.3336949006887666 2.4830468988111378 -2.5070861842435876 0.23828227581973799 2.171639195915088 -2.8008743731367067;-0.2203159888887693 -0.38576727562227381 0.85885839013896459 -0.73088247283530638 -0.15077518997626183 -1.51580398281178 -0.33337404783218105 -1.0250422019611489 -0.32189481781954471;-12.122639846837 8.3245266772088922 -7.9970561538916796 13.941348834274415 1.1257744168651798 -1.4427236950025499 -10.526979085263573 -14.949481489178826 -3.2625455349582442;-0.21822107012085545 -0.40914732030708295 0.96516648572852493 -0.86089556611026408 -0.099022255168488421 -1.4962512962756558 -0.38496564149605822 -1.0823636278974815 -0.23981890169564224;0.08569201131341686 0.91649758051229391 1.6090438324275951 0.91969855882241502 -2.945170070312082 -3.7106224714789984 -4.072818950853283 0.62587306904250561 -2.4793323840055819;3.4177476313218751 2.6823142583427515 0.15403659204927866 2.6536910742057516 3.3156204841810166 -5.3415540274709992 1.0130432099432209 5.6622888479669005 -7.3212579590928577;-0.10139238020719839 0.46022698977135418 0.25008040794346759 0.44590672671565018 3.640454524850552 0.38045533499750983 -0.39602778567460556 0.95594787496338707 0.057276322467274668;0.37126202556995802 -2.1206338920486538 1.017554475749008 3.4817377691823879 -17.794987926319241 0.56592113584769999 2.8901480214382076 2.3067272422380802 -1.7265632206639541;0.23456300623935999 0.54997304964416605 -0.65301113841428793 -1.0542061013110475 1.4128430971931234 -2.5160391732190397 -1.1349794661504153 0.31078126494888353 0.56184332359557432;0.56747029971415286 -1.4757294389667863 3.5113395011984059 -1.7484577704989797 9.3468210695169187 -2.823745927117026 -0.26668639006721206 -7.0292299543685299 1.1629781439258386;-2.8846898845585764 0.55935497406117196 1.6843412641999898 1.7151769399932673 -7.1842756432143231 9.6362305647586748 4.9791059611438735 -6.4275335533888907 6.8618735919857139;-0.39368032204151876 0.44322623666093097 2.6759285729619551 -0.61474676786598637 -0.54671126349349242 0.17682057157550618 1.2957227795906683 -0.93393811078907851 -0.63845155800015763;1.389809113175507 -0.18364369151919591 4.5504429978788652 -1.4201013297025342 -1.3038971440031455 0.21868761508523418 3.720786929864762 -6.5035363749615804 1.0882664134997093;2.5144676240177075 -2.9548806513101242 3.2889213753949376 -0.043955300619864995 3.2167049312005722 2.0977758786096006 -4.6917189126659169 5.2264633769938955 -1.3863865625323235;-0.69968438669731492 0.43829541441831205 -1.259792377249495 -1.0875943096441458 12.549896071871027 3.0368624937773299 -0.045227369336475122 1.4188715313085154 3.5632367943380334;-0.0062149812769445069 0.007519372336681397 -0.0077363536409167507 0.075127505079911325 -0.11342619013504335 0.0034234942532576115 -0.19341758890856917 -0.083340436583183769 0.071089956130570869;-2.0685500224052769 8.3564309798358867 -0.85381200780806643 -0.42314654900411508 10.929420318471141 24.739257051965232 15.830420899046583 -1.8866603202121919 6.7390474225327734;2.0637015173525128 -2.2822807663218598 4.3928136638126896 -1.643750867328686 3.8603662701960504 -0.97554048007606364 0.76587560742371397 -7.7962367693628911 1.7663649413491249;0.16521943594207539 -0.41962864017337709 -1.7643943922870335 0.59847661673317565 -1.5509512021739826 1.3487380528566491 0.34909181882049911 -0.46606194201832341 0.46013068417767811;-1.6398075479139822 -3.7866579604116031 -1.777142799322196 -7.9183542239110674 8.060073533062921 9.1118183702439186 10.079572038637039 2.422545596983404 5.4448003510104126;-1.1698535894078701 9.1011047090645825 1.9757661680914116 4.5104146360770478 -0.035595025369641986 -5.8215387762532762 -6.6691617706028676 -4.184092184266353 8.2357219579599175;0.64410928791531841 -0.23917473106144746 -0.94494361785013614 4.0202668787973357 0.47987142724543097 -2.9122625192299179 -2.7984580917811424 2.3387515273220307 0.90759465143530993;0.2585757208911918 -0.16825939552300387 2.4376174227852929 0.37625273771372175 4.7316684757336249 3.454201889189096 1.5656541272430111 -3.7536231194733176 1.8095569226803223;-0.36276664649908136 -0.38327378602684692 1.3347298128530385 0.75665049442733245 -2.8015919178245561 1.1166475005288137 0.51436268268437502 0.63816270425933286 -0.57223780410226699;1.9170832614028563 1.0402910593270898 4.8514024417167585 -1.2910947055479085 9.3905633202735341 -8.0607515976668331 -2.2503493795271856 -7.1868789014708989 -3.1959046730152241;2.3566280179674872 -1.097435941497592 1.5225628823234234 1.4590677532044025 5.0668777411205124 -4.4975400004280681 -3.2757022559161233 1.1739010571961204 -1.4249812939110347;1.4199024945367746 3.2576260436293518 -4.7736354015940945 1.0055104566260549 -1.0992966373431545 5.3586126510949299 0.3974133718202652 -4.2788603077875367 5.0957670083162485;5.8765376849016313 -4.5848061884858806 -5.1563523473795616 3.1899829702057332 -2.4122917456170399 8.5588715094536898 -0.8166187308831262 -8.607124635425718 9.493765026977643];

% Layer 2
b2 = 3.6789905948406934;
LW2_1 = [0.017083073056754581 -0.26062580247234474 0.0053689991258359443 -0.039922934057091068 0.056662820059019348 -0.011357525447128307 0.0096351925922609025 -0.014510943245403708 0.0047596089960959187 -0.0038549791060342019 0.012840552539485413 -5.7761782813127285 0.084158969896153318 -1.7857867489873103 -0.0015882940850457611 1.6571996020779809 -0.031041212995264592 0.0091262615965808005 -0.11784159719452282 0.0091013921478195689 0.12040838714878295 0.017086239326021095 -0.010982804552735485 -0.091288341867090284 -0.038568259850522493 0.010092828508079636 0.017262448439632216 -14.018641463618701 -0.0045655041519613157 -0.023715811834523478 -0.17207453279635501 0.0037643637623256108 -0.0043351524549511298 0.15423637350451988 -0.054178857304187915 0.1252322535117158 0.014247747067649372 -0.022874191259442213 0.038292547229334686 0.0068076276867387797];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
