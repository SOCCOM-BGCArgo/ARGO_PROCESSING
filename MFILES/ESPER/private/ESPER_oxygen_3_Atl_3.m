function [Y,Xf,Af] = ESPER_oxygen_3_Atl_3(X,~,~)
%ESPER_OXYGEN_3_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_3_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.86309963202457451459;0.54893184166749997566;-1.7033862045829988308;-4.1731068588937532127;-2.0889987634465922994;-0.25071570980195256872;-3.6614869241741896388;6.6666386405063171594;-2.2296405818025508694;0.62650252943232520586;-1.3231998684606049999;1.3171471771953748853;-0.47342922964993117141;5.2608445026310901582;-3.4030740455659715948;-2.8538931203359885203;0.79055252081754956439;-0.69758601961622668242;-1.8978123668210804542;-1.6449192401360432925;-4.4102810160042729137;6.2160701977163812515;0.53044097261892808604;0.020972799264819409759;16.309119522716954975];
IW1_1 = [-1.1348945695564649494 -0.66878354115585003647 1.0270725826991149443 -0.4361753610207839138 -3.1596213514924649246 1.1795032690843414436 1.2352516440543830356 -1.035153104554467296;2.3190325071034587623 -2.6927013875412542099 1.2483416336977368744 -3.4091348603845146314 -1.1575979665990725476 -2.4345974465711339718 0.36969241074477404707 4.5731966503867305107;0.50115430589718323873 0.64054526234238773341 -1.3773741749576648985 -0.34440439077070855722 1.0519795900439277148 0.35116040577026857994 0.4937071977357689323 0.21353543612610034752;1.2240344849890651968 -0.10587537719698829342 -0.019225668484459647323 1.3573012463814333461 1.0176222734936333225 2.0941244778502925428 1.100802365642920666 -3.614935657205434083;0.77596589530999959816 0.22150352112488982947 0.32037406577602584035 0.31672604698072004403 0.50974959492457905252 -0.24242516168313743563 1.1291704547529124447 -0.53376038669736569631;0.64774070387648063907 0.13433522814750853414 0.5003056407136152739 -0.032227164596204407876 -1.8812944203518611186 -0.54451230399687455819 0.74419150518206023115 -0.18234670079284473476;1.3520476069439593125 -0.28279968005490313532 0.88967659430913714758 -1.0112419206728242571 4.3102825797549257913 0.023550332892375042126 -1.6398238333471446548 1.4845447240481401963;-0.8067854033598753638 -0.46808110801782226718 0.67250911717302341852 -0.17294235713460839876 -5.0622955154073787654 1.4545826567564736909 0.35030792111194974936 1.4497634785604855967;-0.048791914836169181235 1.0057486150621679499 -1.0434416910789852118 0.34250114710357931758 5.7332593979759343128 -0.8449233786849335015 0.58412652634615125358 1.9664596844492026051;1.28697922416433852 0.29047990934897827131 -0.35809157554336290552 -0.29476706018642895302 -1.7260961661146017043 -1.3837586258975500542 -0.3774691350862827699 0.99381219713386159675;0.4957734833513323669 -1.7285710282015220862 2.3404447028313786205 -1.029422683347633205 0.61686233592771433365 1.4724851022785965249 1.1318008404977750736 -0.91695975603123291986;-0.21290895570380413693 -0.16574071532529083273 0.038053774063481989043 0.59986783430543999529 -5.8559857974846893924 -3.178195680761322528 -2.095716715906605021 -0.56796877788008337529;1.6133072218382862317 0.7541458087931992571 -0.034025010523472842827 -0.45782465979537079193 1.8021277978404459663 -0.3594761483330159435 0.90608322732834989388 -1.1667147681048064545;0.13564150144715642066 -1.4579577102524099441 -0.90782809936228892056 1.5241351549311923375 -1.4453222138999179958 -2.1318048133495257623 1.6285621442352276045 0.95347627011621782778;-0.062737044684189890997 -0.35861322152867974866 0.71577115441650718264 -0.77066878420892215296 2.1318891729652138523 -1.8308237759062073735 0.18121291133912623139 0.1087330569445266043;0.79459714794055935627 -0.069002767517797755636 -0.52742535537487567066 -0.70359940483967364777 2.6507709784062538638 0.57114844394798880423 -0.68230813709017845703 0.64092870597805795541;-0.82936318848749235322 0.37105395276126318382 0.16504140746192605405 0.31359087587493167382 -3.3491949236348994567 1.2445338536251873141 3.3229433798342120632 -3.7507368417483859524;0.9425317596066160597 0.2573488487030180516 0.59973572057805490942 0.040562565519352999921 7.1109423306237928841 3.9734400315025335537 -1.7308292982505224522 1.4962191010084244791;0.91218935094756159465 -2.8175522542964568373 1.4160076841562532213 -1.0214888590496673526 -4.4269836124234496211 -0.57137698626151389725 -0.32464712035917364652 -0.39464726589029919257;-1.7759961174852405552 -0.68431733055111532149 -0.074075751569305750555 1.3201206185097544843 -4.7841494968150950484 -3.4432686455079677401 0.21336530305636591809 -0.90439304441236623155;-0.16675152472202411924 -0.36007378141517842884 2.1303816358613967274 -2.1243682151368261657 -0.25091395401100768936 0.55132831291879502711 -0.84011597600391318963 -0.93019718194134115574;-0.32727056016056615961 0.48976328965952192762 -1.7118215037982675852 1.9095802136450339415 1.530727575019553699 0.85491743452016599747 1.0664167433693114706 2.4880812651838195571;-0.29547426840356716404 3.7189487820871591772 -0.49130569542836149965 0.93926077835941346184 2.761219419045990886 -2.9645880219667537503 -2.2855159484233698031 1.8503794641516346786;0.50711142802175512845 0.097852468470184167382 -0.3657194507206698586 0.17712215405356360187 0.53887790629471887804 -0.021466916702799120065 -1.0181400686884520823 0.46663731995954477183;-0.082369544273128605938 0.30767809628814896117 -0.30040711242005246895 15.970245964663259741 2.7769981239117216276 -0.20091153074961501379 1.0825079190241495564 -0.13664592732853458878];

% Layer 2
b2 = [6.1294327370134880084;6.2342732618601610639;-5.296872630395475845;4.371356890395616368;4.7700429349564306136;0.094294887741663988012;9.9715509720419781559;2.3783199281379761025;-2.0882973615267133027;-2.8534767785954011643;2.8888907575031579356;-7.869189309418691991;6.824205893820972868;-2.9320270711026332755;-4.8931632191975635848];
LW2_1 = [1.3373592062439971784 0.031932115198687147095 2.2694126921491943882 3.7394198894474750539 -2.3655423465647564818 3.8464382748810335144 -0.70884826465189965106 0.56761634512475600545 0.77839662751027194343 -3.1662176864980677848 -0.0023740878320698318577 -0.55614209483953980229 -0.48757606198720371271 -2.6518734361627718243 1.0210691030162053483 -2.2233233208555382987 0.29258297898258500691 0.28623785466742279748 0.53071471576384310342 -1.327162161287713138 0.86618053405685047075 -0.75729964054653375882 0.26089974738270638177 3.5240106863012723437 2.3992364193325550481;-14.822321312865268439 0.59224420248925635502 -3.108902643210821104 -3.8562860362776021361 5.1316452909256442538 1.6051117057707424696 -3.6926723403445707028 1.8077385764290130332 -2.5325129003896682534 3.3076466176355334703 -1.8895719494304166197 2.408296139808945302 -4.3251288337572875164 -4.7417322136399624455 2.5335670909411049934 9.0540572192408390606 -0.30187784912409454385 1.6395383943215022793 -0.87286496298096272195 5.2170172895797657375 -1.0867952431002445568 3.038891142875218776 0.76377825392045528563 -8.8338112573702876062 -6.7649914783584890188;-0.63914607804015488579 -0.49562609712991839706 -0.70865859621188420636 -1.1187680127390371432 4.02683933377089609 -4.5027168728272330966 0.6432076171097194095 0.98184770461004600151 -0.1484125742598226827 1.0689683453699141413 -0.41485532799836172257 -0.44457028246580465591 -0.79754453390036406102 -0.11430973794156708279 -0.62763586931406234459 1.1997211532894638264 -0.16063789402619452207 0.50779833773712457212 0.61083136080493061204 -1.0262000215075737231 -1.3801649830046598399 2.7869726199343620721 -0.05736343894259265247 -3.3064606203789490557 -0.53587771466871247927;1.9433433493394265401 -0.34813797996152529013 -1.7546990090969518672 -0.049701639710060016575 -3.7272529740517743591 6.8685134179292353096 0.46813805721107870639 1.3267108086022896263 0.95660779654358230051 0.98857532408107118282 -0.49726408513470138351 0.50810657442647710891 2.5847750536334865856 -0.48215278693192969994 -2.3980580965638527147 -0.22221413880424456533 -1.4188465741418285759 0.16179776516345475978 -0.6123710391577796841 1.0442951269451901108 0.1993561933071921477 -2.723818005329878833 0.27745724883752925782 -2.9369054413498321132 0.91135455196956249857;-0.027721732344924306796 2.2814066258987457658 -3.9952607928234127321 -4.8844085621829513855 4.5073392014579667375 2.6480997204941338907 -2.6090664744415503762 -3.8980613167753110915 1.8215084291784253701 -2.4118790171990673876 -2.4460547174747069299 1.4272131593190728882 4.0754767734474155461 0.68514693403038662289 0.7703879195397552726 -0.3428129567496318586 -2.0274122860003518376 -1.6214358696751627331 -2.8702064993746381205 -1.6776810648848803353 0.47887072537407132655 -6.9468676107938849285 -1.4911577321599687185 1.2441246942153765254 -2.60987868040757931;2.2512751142571674201 1.4916798920825289354 -5.2822144088999039013 0.92426175075202832154 0.41180284506381442666 1.6003615166441764739 -3.477944302453533254 -2.0983856598883896538 -0.084278121512772280477 1.0037626627626536902 -0.94713488917942423306 -0.66218629719152100055 -1.7027317241697523809 0.14972163096879542721 -0.18771901831630680157 1.3305567568093645825 0.45474698639982180648 1.3095714477865456615 0.37798799099968988235 0.020622746026038613065 -1.3452204007085908355 -0.8052060328719466975 -0.33529423145145170748 5.0343384969857316591 5.2007611905828401433;-0.34818222794641257023 0.037829657339239028402 1.7364634386307011837 3.2196550299296382569 0.092221931292687547854 -3.2787254177870899241 0.91461334777702529841 0.067340740801260262627 0.40091749204797988426 -2.307160586118946366 -0.45812762850545468707 -1.3383011185498332463 2.6872508061773299204 -3.415442123281442921 3.0823072036687513275 -6.6940839623988388496 1.2250707332311834286 -0.11391591152123571595 -1.3205371100131053641 7.4725434603416491797 -0.94405934506810618156 -3.8268440962667495953 -0.80665292891360251826 8.4173836830055002167 -2.1774357487670612521;-0.31300621725653182681 0.95732440245988592586 -0.50964938269534321158 0.85476709632835246033 12.978159602576743836 -8.1627186839353385039 -1.0937346946343722287 -2.2620910362390622694 -1.4341582205870513356 -1.6471660512175529956 -1.6810302677476356426 -1.4778158290112537454 1.895248450259607198 4.8914691557886982309 3.2073515337283025062 -2.5717116730525328983 -0.05150121032326468451 2.0333892889469744603 -2.5170320702996953344 0.49133555875913692557 0.20574780800509123724 -2.1060748539556852776 -1.0114351740297904403 -0.19881227149933308751 -3.8223825860563467316;1.4491629383346538162 -1.080676970746460297 0.95684618471154070374 -1.5903630862005933011 -6.020148528815551181 7.5176228380000580387 -0.45966463911409710663 -1.6438765276744840005 -1.4573129670027606952 -0.3567503510202562067 0.9689997912755562437 1.5608220974244275681 -4.7582131064295429823 -0.26244504326625017754 -1.1831971084497947544 1.9746913257665215102 2.5575777318265071614 -0.079945687883447733024 1.3730548204444894544 -4.648424391194519778 -0.99113119276829952931 2.7542387581117044881 -0.4420330325007314487 1.3841240051188301585 2.1589619650153881736;4.7186117492223713654 0.79910165034206626089 4.059659759564961945 -3.5980734647319061459 -5.0932763914893479651 1.7053230139344102145 1.3707837116896504082 1.2311305725007106737 -0.71644335305650785894 -2.0433633804090849395 -1.5065246098891347248 1.5907738016973529405 -0.35923769914288056215 -2.0559901448155177839 1.1097202065020028705 -1.055127789064410182 -0.30245445520070624035 0.58876966649099982121 -1.1603341499092536537 -5.1538171399025465291 -4.9972954248402219335 -1.6543589281877180142 -0.79819904996134427577 0.63611514166643712276 -5.8847747684027353898;-2.1213167167690833992 -0.037601405966950392223 -0.80682411906346573893 1.4565915971155860564 -0.59712799250689208019 -5.4324512447151818151 2.8137153358534838787 -1.1392168650841134614 0.4674247233615720365 3.4202093214449242886 -0.32506763321807913281 2.5623519608842735273 1.3543825980631671868 -0.74312583524876840713 -3.3295989367561662498 -1.3302631849844064327 -3.0548473353864684654 1.3086319203762992736 -0.5072436801946414997 2.8490077566273712684 2.5958643613952503415 1.3402255939780347571 -0.30610253081585936386 -8.8229523483112455295 -7.3315203036541944925;0.30594920756711008192 -0.82234299134249888574 -1.8746221634995272609 -4.0328961194347847652 1.8451738885289423742 1.0502488318405229784 0.066781456863657648326 -8.2277028320109444337 -0.14085352790438759873 -2.013701294979441947 0.47330965912625488912 -0.59553730192561127321 1.5845090305521085661 1.6910703253351975217 -5.0577264419513019433 -5.396781461873569441 -0.48240039278784796473 -0.95400439281298665684 2.7949565079923868183 -1.2050817019249673301 3.1481073408558950533 -0.45917261965102856847 2.4367895121970426509 -4.3667216000825135325 6.9940175624524343334;7.2443477635662825165 0.77037788440309673543 -1.6780266460356305647 -5.2040454650266410042 -0.48134104002555472279 3.1998263768074952651 5.781672303653840217 -3.9026936532213238884 2.3122683287328844592 -2.5221822249770879942 0.38289826011074101775 -2.2252591365347860197 4.6490660200469795527 3.2715598188317609463 -2.3019279556088720895 -3.3100551590930726853 -2.3133059585615325382 2.3278098321964733053 -1.3831719616905024939 3.8253652751893785222 0.30550257188375895545 -0.39333043685938706702 -0.43976151325059664732 5.5641196320328827341 3.0593967876774414982;-1.0633077256447043268 -0.095989584433153390952 1.7547952360470768784 -1.1791456740062613573 -3.9322317864757256878 0.32821950065789984308 0.34586177550544139336 -0.33175346913031694696 -0.91901327247331132675 -0.59020101178620509863 -0.30423408134102669642 -0.48196993515433633748 -0.52680065071892512307 -0.050309106506056675001 1.2643461808632736609 -0.37258813791878708788 0.40331887143508377003 0.11062594134682553204 -0.27578287359579872762 -0.28424098745837383939 -0.28280555915117178145 -0.41674637126698177436 -0.11017259529152492736 0.57493877745006150004 -1.7426150721391984177;7.4974153044159521642 -1.5774934609351392023 -1.4552607527073753158 2.5299955376752722991 -3.4054075282270388492 -1.6484725595900955319 -3.271426357233004456 0.11446012802633391547 -0.0060495066600447433211 4.1687572421679082169 1.7535594708453166035 -0.078974999354728278589 1.1267382804090899651 7.1037397378062356879 -2.7005014606777271169 3.4056367222250254478 -0.086967478471582662647 0.066433973354933228972 2.6366813573915663937 2.7818311584354602495 5.7142027521185765337 5.8712526321542712893 0.0093932540758829251304 -2.9142032228131475868 6.3788957117224116544];

% Layer 3
b3 = -0.44510881473540503395;
LW3_2 = [-0.1052536570274746619 0.042386138946361180679 -0.3052304555478723147 0.252644920038051779 0.028619354758916717291 0.090884534182419721149 0.10581684465829960251 -0.039738869832325211806 0.085434335375151340686 -0.072189456832795498298 -0.060850309280562085712 0.062937569930488657111 0.10144203112841951309 0.46255010971067217485 -0.04923589773261697472];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
