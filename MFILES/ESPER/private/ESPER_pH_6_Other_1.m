function [Y,Xf,Af] = ESPER_pH_6_Other_1(X,~,~)
%ESPER_PH_6_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_6_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1754711408128784011;6.351861594416794432;1.1702644400171384742;-0.74202813167193026889;5.9967285361522089104;1.7715351299806292307;-0.48530227993970309619;-0.20595851694860226044;2.037754395692786602;0.78001282849503117411;1.379985993484989848;6.3641404848585239051;3.9333956875873221648;0.61776424895501780288;-2.5870454259175463818;0.10952243501547166693;0.001416356341655697999;6.1620811562937518602;-1.3169438833791102805;-1.2837196158186476858;0.24850544427989249008;0.096362554651121201665;1.8125113288344301132;0.19949200396198987773;-0.18229155668562097015;0.45473973829286779003;-0.53178794060005574185;-1.6000296326675018665;-0.57152440987301356135;0.33203814210896331893;-0.71951224508679589853;-0.21584674136914083764;-0.39358562198288499223;-0.82515015552525383669;1.9434374268609013736;0.59827926999824965204;-0.48713967650003237031;-1.5701041533939634753;-5.0773757256073039912;5.6688237981284048672];
IW1_1 = [-0.68201107385421610996 -0.076838536628213410795 0.58824747037833491348 -0.3977403200734948574 0.2305110807321391897 -0.64270351317261520396 0.40856678257822343081;-3.2458631524991696793 5.386568430680267916 -2.447288912319863563 1.0192080912004688464 -1.3671199710317998299 3.7870277373080583061 -0.36176197791980474472;-0.49824974068566091345 0.57599261364698961518 0.35872462688043899037 0.0089542443834912596734 -0.45436546156221069293 -0.37438060095367164948 0.19027414925297261861;-0.1530513920234349845 -0.1895235571805622965 0.72717751438573818845 -0.42875061512282042209 -0.22643781117696742955 1.9297058314357258269 0.68606356603826079699;-1.3039200539254485189 -2.0020377069054822172 -2.4087063770409709029 0.59818749081415023561 -1.2032312326008316461 2.9564664366859654265 1.6553055170951234132;0.49432820546370265236 -0.13733894063648022232 0.41882809323100961274 -0.32269060757040401999 -1.0518844941972083085 0.30231791549829295507 -0.25938695969841679689;0.30569384597311627383 0.12651441588473685829 -1.0965671524362974321 0.39255572369671376531 -0.79929328288082490683 -0.99121554457551186434 -0.61421131798980199701;0.0099780759348709578693 0.085743257462355892962 -1.4839060123886920195 0.27836255941946158599 1.6075374184491044716 1.6428637710740048306 1.032933650418321303;0.10851203256636030026 -0.36408666344975326723 -1.3019017474916179111 -0.2455904319254360868 -0.47327954400374039334 0.30041594781347774612 -0.42607798766525023515;0.01871706937270964724 -0.28526056034686020357 0.17304104816204496364 0.2179678308304069112 -1.0712879970544166852 0.13887077615012374809 -0.24283197261837680125;-0.38069408071147775585 0.43658298403413237088 0.11509763141268677944 0.2381896670142537864 -0.18008138494303596588 -0.60988626247403410208 0.45383969423327796822;-3.260015177607806347 5.4328105474578070044 -2.4551902121485627006 1.0206213339053387124 -1.4701434425338599787 3.7603794113579200875 -0.32783706132281847934;-3.225562140775484643 -2.004223299795562685 -3.2465916148242524031 1.1102126053303453812 -2.9035227846561140197 4.0485940917187992483 -1.0028838204623855557;-0.19865626690458068615 -0.0546068358713334423 1.0092388923295050329 -0.3467818306011974383 0.67429592825358508623 1.2005108877010093327 0.7539238690835265988;0.2344233590707252568 0.99952928783720706996 -0.95443167871773382238 0.038998955012672434361 2.6157690648095193175 -4.2085612819579205635 -0.40275441882129620064;-0.058654045553428402204 0.0011718689062636699662 1.3926976312504655287 -0.70746425963634540501 -2.172908944989403679 -0.60504603233240761284 -0.18531411668608377408;-0.17597592701225467371 0.3140602708429194867 0.0079770450924674871085 0.17299600663227143738 -0.21843117106945353356 -0.29937127641644550868 0.56610529310136492587;2.3922370574737326088 0.59231261390394240873 -4.4115034614662018697 -0.29144331028535497286 1.113227332229826505 -0.19920613011105842149 -1.1688019928960320382;-0.54778651406679013114 -0.69056003287727241169 -1.7150493500345012077 0.68960019562096053214 -0.54399682262240878217 0.020897655612351649645 -1.017127032948675458;-0.31818130761620211366 0.039624447847507578147 -0.43568956615135528976 0.2141509850065361209 0.3655619077844524667 0.080239660933713624624 0.21595091207402566935;0.050388094113072719182 0.24971052789264186478 -0.26600509940740602044 0.082559967509934939489 0.12388261278730282322 -0.060395688120448126623 0.34202480731268225522;-0.047058874947785801768 0.036672883868256248019 1.1895385614809863561 -0.19742364955957503181 -1.155746619334483194 -1.5104507675381939613 -0.75324193610148437728;0.2353428583811902064 -0.064960213000869834743 -4.8908435925637334662 0.62981336594841230703 -0.59321996390040532265 0.017073582592899465976 1.4170256953179536374;-0.059589915802293551284 0.11733618916284556388 0.0016888868916261593096 0.11773935523772809109 0.0016905476783283138013 -0.6971234868589663014 -0.16444834226440518954;-0.1931600078966289602 -0.038651327585873473947 -0.92324732139571497047 0.38835181411582558875 1.4621890414943818914 0.4069006868363376217 0.28694116637863709141;-0.51961648931523940487 0.1363053453611073329 0.03834219208448476357 -0.63679654435646804167 -0.96051751612828895066 1.1610140819502310361 0.21770079985527027167;-0.19459732052838646377 -0.040370796496219926719 0.54458839624407862079 -2.2535629126548526457 -2.9500376451196754779 2.7233468333285859586 -0.32839320998591253753;-0.19393114458702639946 0.097998407041232998838 2.3867538524221938445 -0.6936793135748359207 -2.2143505407936761031 -1.8229836803789578603 -1.1849853912077137341;-0.34836109565655970499 0.16182073819391198932 0.11556169660288137524 -0.39593257622787314531 0.35844959742218779342 0.057733790096211060061 0.69542624324670199165;-0.73267003164977706486 1.0803423327643917329 -2.2132408256487758891 0.63904801464259008981 -0.30096224727606091243 0.15586005590871535031 0.96162418983614994517;-0.18047137256777653902 -0.010288425328341585172 0.63562990944579944586 -2.4618712568421941 -3.2479883898974897249 2.6863532087735846332 -0.41289168200986597901;0.031743934342104172808 -0.016393598090216534441 1.3438694694116606332 -0.96773971329049712775 2.2661898858616771335 2.4556541920762158249 2.7081997456422710613;0.41455355911488217524 -0.10683120787713347444 -0.014717992580055745677 0.63082589263053956419 0.93621204822905867982 -1.2465021541757450585 -0.22982143544772457022;-0.55725223622576591787 0.013603437913038692736 0.56800922577063528429 0.55181431486649790141 -1.6824943704121799737 1.8022934382045199264 0.78317990822257077532;0.32463973836718462707 -0.11869180683604511894 -0.091724700823586802212 2.0138227442869491846 -2.5949225108905271675 -1.5789725892245649597 -2.0114156103332101466;-0.11932392701207109043 0.089755926542777114685 1.0792451759327399419 -0.50575548353171295712 0.9799891123656314651 1.4610455025707163035 0.90217325866888964381;0.050351428903169286044 0.35934479938582769565 -0.89135413122375195538 0.082013137726578963504 1.773638802977454576 0.69599440515817878605 0.6367242281972688156;-0.18820908556895696306 0.29305419680952310424 0.47299085015088293549 0.26920940845366270189 -0.34129362332556367754 -0.18704241156132797586 0.40883470216427980626;-0.45317801929006684691 -1.6705835893658540492 -0.42663456816320621812 -1.2969063839705636809 -0.49670408874176114056 1.5281424513782631003 -1.5628292667547629691;-1.1170652854616882621 -1.77684452533678372 -2.0693672595491738875 0.47274342476202108054 -1.1899775155244798341 3.0392139032699319046 1.7519586831553484174];

% Layer 2
b2 = -25.950865017511389965;
LW2_1 = [4.0968049604313581114 -3.2002860302177023044 5.2234706849169239007 2.0164206125175292428 5.6349514340879860441 -10.546515749916880011 6.2396752049920758409 -4.6898590108532722809 -3.5076582872589048279 8.4898229379403566952 -10.804855955165832526 3.2020856882445380975 -0.023404218237664989322 11.578839003602510616 -0.18739956607691107826 2.2034302918020611806 -7.1570115666973368462 0.20421029848817467967 0.45782060496575355257 -25.723084242311177405 10.894745708307267407 -5.3656048062368100204 0.19575039130382862473 17.357655477066089134 4.7191886105724112355 -5.399640594951036654 -2.2089621074853087457 1.0812338994315726648 4.1470244550908255121 -0.2260456095054118042 1.8634504702262788545 -0.1848532329516166528 -6.6754579911421068061 1.4136158934222176065 0.18652042053503145591 -3.6336109190882988074 3.8171031079978456901 -12.524517606174086382 -0.76339057069452365134 -6.0955533207215584213];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
