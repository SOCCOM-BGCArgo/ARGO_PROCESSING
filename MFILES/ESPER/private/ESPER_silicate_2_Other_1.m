function [Y,Xf,Af] = ESPER_silicate_2_Other_1(X,~,~)
%ESPER_SILICATE_2_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_2_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.3628202679160796862;6.0853046637519065953;-0.11503173123041980641;-2.3838869426705948662;5.7064081135558737401;-2.8308030183144463621;5.6194208281368069891;-1.1036282144935798399;2.0360170338582319616;11.865906254314671386;-5.5813962853489957894;-8.0898688923526052008;3.0331550591258413796;-5.753548131472492777;35.62404672065277822;16.408183216185115327;2.881915400165210972;0.2347452055768615431;3.7005403966063292742;4.5207843236121600938;-5.0544055769292919322;-2.2551211413214380386;-0.25853623817572352062;-0.35904248519205028689;1.3115967564989932104;-2.0669569252899031575;4.9816851370445460745;2.1195072846571654246;5.7631215967739315431;5.415685405550334508;-12.646371464712714783;-0.82841153143247414636;-3.6749724774705687658;-0.97562734025036745855;2.0183114374434278915;-4.4067555102814779389;-0.92877431494684636881;-2.8831902576570214158;3.559222290116053955;-7.6323900783531168912];
IW1_1 = [0.13212643964450457301 -0.0057818712090986490448 -0.093425868999945926863 0.1227710189147226405 3.2718039139480934452 5.9471576661790530594 -0.44727264516662801341 -0.026009171963632470026;1.7855358654540416374 -0.55758353977501118326 5.7724619995678008166 -2.446028959883983056 -21.174675362459613126 8.7551087423162581302 -1.9173699674663740034 13.244854899784458624;0.10081998919556492411 -0.23350738276070512334 -0.40785738648269720397 -0.95584622641249650243 -3.3677543274788956928 2.6742124999684953046 -0.76645287699682396187 1.2536145821460644711;0.78728845978053463295 0.44233546137964580014 1.3959260824770691745 5.5383139855793386275 -20.006178753975937923 -1.6154297150532055394 11.181015626035321731 -9.3811713654555006769;-11.792983394476005188 7.3226529533046349485 -4.6409772670813937978 11.703486251506443949 -7.368093717450141078 7.403431800712878541 0.14220055725887020825 1.9859261135363748263;-4.1954708537403240243 2.3523271589551328908 6.8164926890729509168 1.5045682822568715586 2.8155444831608940071 -0.1868724211637496635 3.6857014557531231347 -6.6838418676245687777;0.044941353749577757359 -0.0069729611867749294665 -0.10082596250169706398 0.44432554322319239848 3.7791156982056950397 5.5401502362266557 -0.57236303237222152518 0.26284998453063523893;-0.28604076007529916081 -0.19289598414079062172 -1.7082112719650757171 -1.737370250822326545 15.278915328723599032 -4.1317922084001423855 -1.5660809312256360748 1.2944496363662587601;1.2730183233624243755 -0.15948669392884151641 3.6458029963408566942 -3.7112454548831759205 32.025171836387315238 -3.4103020385368050249 -5.6116478125960389534 -1.4966133482653414255;-1.7458703078820345667 -0.14388092367429708429 13.135976225696294861 0.36525208241288281696 0.29155916740947485088 1.8787976008655631333 3.3104173952722377727 -1.0308271231892667252;-0.20564830890531626828 0.020140652293147411067 0.094895638779134219853 -0.0047146520536418988143 -3.1932313545357011719 -6.4428536894122885315 0.62491007693690947544 0.0059980864590845573911;-1.8438833647417864903 10.327380290768843452 -0.45785976289444602072 0.56352617348091482707 2.23183607276280771 -2.0894831364241932548 -5.5104081983362886987 5.5924723109217326922;-1.0068569832408607034 -2.1533992770322392118 0.19415693261937527758 0.59869469784038209514 -2.8717633422758925832 1.5585017150361484273 1.8221989449558124718 -0.57737722546767900056;-1.094958218798298244 -0.58416775129011611067 0.57410315244817100577 -0.78604445035566783417 1.1587088644079650557 -6.5369247036458117961 -4.4448980331280028011 2.1333938829010388183;-3.8098060527891020044 10.503220685171916315 6.8236161589688073548 17.510322493668699195 7.9321381825579040381 0.39603246957905563486 0.4076068010714094525 -0.92857489246634061786;10.450287175778099069 -14.860756205951904718 0.20283807385415336677 -1.245008646756326387 -2.5210568129376467184 -0.30937577523190334938 -0.22835646876931836591 -1.1433884993111822492;-0.48894297909926964785 -1.0347709958618935833 2.3377833283391677988 0.53608471722649364555 -2.2115319865059182014 4.7422433599659949977 1.6942581239231926382 0.84564919518546577404;0.25064309756185715328 0.21702709935646410933 1.6574038883397299582 0.93096846003574607042 -15.759787456107728687 4.3122624802859759185 1.6997428522717650257 -1.4232592975911659838;-2.2584254520165729652 0.79167153042240667737 0.41789219563463836371 -0.50632796585528849764 2.3876580616140308244 -1.6245257159280810377 -0.41004885180300587599 -0.61799121009102708779;0.15867944554277690905 0.059151359488462250391 1.0914055270797462516 3.301110704288356068 1.2976414137201162102 0.52093668160705741688 -3.4769875596123176464 -0.37165820142447630881;-5.9527629357186491177 -0.48616574908580512115 -3.9736739222687464945 -7.0678820459842528479 6.8657679195856955445 -1.9881759735319517457 0.47215917724652978205 -4.4863644423844979414;0.91676251480085324541 2.7966856206286330178 -7.9380032695707472001 0.44528462697587423147 -5.1689404839996679897 3.6024520111239963782 5.5861910232206586358 -2.0118220140109825955;1.1683956290299264413 -0.87002227563429967994 9.8036458180341288227 -1.9614041785858937761 -18.566903413383034405 1.4761741706391988682 -1.3416603087295755348 -3.939383933093645318;-5.6301000855615441765 3.8115840363290973691 2.270592070697489806 3.7287706507208029372 1.8268199794934414371 6.1948037769638801819 4.7282067231711817357 -2.8402369204192248198;0.8411419990289688009 -0.2452385931627515947 0.50972415911928148358 0.012734512370232455719 1.9623848202398408436 1.5735964480936819321 1.0746951965863309475 2.1764502878996929702;-0.030593643038290787434 -0.20022225232225115965 0.68248830955611083926 -2.8802054580506450954 0.54855813688519272642 -1.2346876410750031727 0.59914689194721415522 1.8275589914621024334;-0.053877515443743410894 0.06807783376742926329 0.24393816441593371702 0.69843928560513857118 -8.0707583719931683675 4.0532204556957109887 -2.2141056114226538298 0.067008342879376292522;-0.24130212915173188115 0.6685475767478216147 -1.1254011477528123031 -0.55299738618621452346 -0.55838496766376410907 2.515249867434982356 1.1262783268049600949 -0.31018460342286985343;1.0530268475890327551 0.60650881787191057715 -0.5721236255428524542 0.79631707919846228538 -1.1360252246794861897 6.5311129218218413328 4.4851399944714103185 -2.1162937152303213928;0.072476247916062219723 -0.0069430094974332716429 -0.09206650881256873975 0.30465295258394792244 3.5180432265849042039 5.6188120080450918437 -0.45751301098539326473 0.10943361861928743717;0.04433635814648171497 0.10170563783599440022 -2.1023144878425128468 -0.64695325429218930591 0.024421943099453717607 -13.379691370957834451 1.6362889568924003925 -1.7500377326991942706;-0.007798089468692746308 0.27168234982771066743 -0.078073866404732669699 -0.13014798086377196706 2.5376904489915372842 -2.39023494271577297 0.53717108816891911971 -0.76845163141202155188;-0.010912840438029024551 -0.03580418740458716359 0.21262566567587246058 -0.047225281132182869714 7.165658488873578591 -3.2689727370856913602 1.7388579013622933456 0.012159317903555278556;-0.0023506497976233326277 0.27782267669937238397 -0.15738554931158191263 -0.29193500619443429889 2.3855595394895630079 -2.3429683072783840103 0.54163867215479966077 -0.71170216349026960145;-0.024787443251673240557 -0.15687609121525511457 -2.464305350044204701 -0.61757700417734595622 1.6053166299683805374 2.1132362996697682256 -0.32582781007989003452 -0.85320557217545545114;0.041915243324182754892 -0.44179627995275194685 -0.83367501275437394526 0.36052789968204734805 -3.4089830494520168003 -3.9056105766125361889 1.4778812776435872323 0.92061424135964653459;-2.4618273886899526559 1.0681018509563495744 -0.20613966904182187689 -0.053962337112905073289 -0.73758833198290418842 -0.64112131295626817451 -6.4372742520025827417 2.1041161750084751425;0.50181238147367146496 1.0722716327578070139 -2.4639648390777817433 -0.53362346719995357169 2.0690612684361417983 -4.7095872807744241229 -1.6500684449043028224 -0.84678327528521413203;0.028564430360419005434 0.023982903812542123723 -0.33545373794775079634 -0.1145811620280976495 -7.360296893836119736 3.1959017346128284487 -1.7936365640429148272 -0.0055783737435821812573;-0.23306826388480045287 -0.1988781910972967637 -0.20700316015442887796 0.87168703315273154963 15.714665644410906964 -8.6152879494641236846 0.88085078281902118302 -0.41712465063831855039];

% Layer 2
b2 = -2.707359063433981472;
LW2_1 = [-17.698398726820201432 -0.019715778093844994051 0.84068216426845554512 0.025163739247987055442 0.0081073663565076094228 0.019997350692108187276 -9.9955986259884834766 -0.47850887299531141839 0.0175455487821219204 -0.05370215998748595343 -5.7738067251826103998 0.016296443771465420058 0.070972146360810048349 -1.9086067589574051695 -0.19143546377352999022 0.027881424046439336889 2.272119669114290641 -0.44169916542420378791 1.9312633426327958652 -0.065970495448841481867 -0.010351741200287976549 0.034510834783001306802 0.014749742673772679724 -0.020441844059871063649 0.069180803310252295124 0.048398872991656495535 2.7234210642908553979 0.25988131957542387473 -1.9252570306199621175 21.903180836737256243 0.16523835782143928008 6.8543650166340661656 15.009402673794058458 -5.9680903138710901246 -0.12225350877473561972 -0.18824617554023809207 0.036193821534839326626 2.2358534151732758488 11.728707659499775673 -0.55844086781510449136];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
