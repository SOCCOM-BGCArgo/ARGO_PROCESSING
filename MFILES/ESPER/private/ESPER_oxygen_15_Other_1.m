function [Y,Xf,Af] = ESPER_oxygen_15_Other_1(X,~,~)
%ESPER_OXYGEN_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:49.
% 
% [Y] = ESPER_oxygen_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.26589578835479404928;0.89824143735408634726;0.22467877060431984404;-1.490939641726029441;-1.8947664119335647648;-3.8638002421973887124;1.8723636788343447357;-3.4531962926291623894;-0.87112747856148964321;-9.6117783440281048257;0.91207921938690128538;-4.1396737844339144274;0.10997395863862684251;-5.2483257677018810838;-0.18564720270613946362;-0.84058117561362921677;39.23648175998636134;2.2009921711385360688;-0.4547922420275762323;3.7432803870357953535;4.2366268754780076478;-2.2998165724903514295;-0.58100201565580267271;-1.1103454865838626731;3.092547601392274359;-0.95857026752832330541;2.6938566909180141629;0.9860321947507600937;7.5919607743505803654;-2.7104205137022043814;-7.3291187532800678994;3.1179259529342964186;-1.8918779470399156306;-5.4380654275168538447;3.3201000372767262014;-7.3453187723192385761;-1.9034333362331326001;0.74262350129871135263;-0.67015312542665350648;-1.4044748007741307827];
IW1_1 = [-0.37692409266678628121 -0.44274495683811432301 -1.8423090872057705791 2.0296405745214327609 15.407121487579447106 2.4303064460153787074;2.2809670471852014906 -0.66969685492515362846 2.5567798391687936999 -0.83814131556044479954 33.119102535874695548 0.19282432207176466998;0.25010356246209025644 0.18467089674950615263 0.19409040516420589251 -0.1112431142705065934 0.27703840193133011383 -0.24802854614557520718;0.34004772233884644761 0.74366903005836193508 -1.6127267061075787336 1.0248306783079290661 13.272449889616817487 2.2572819279284463967;-6.65333983143515173 1.5116545954932756324 -7.1334625728716671844 0.23307975492199928258 9.6003435444252787079 -1.4512396435645351644;0.28617221124511621477 0.043830380959614265168 -4.1894111806137512843 -1.7774066240626076318 12.330018370594990174 1.5283615800034169308;1.6970695615393298628 0.63771944239627875728 0.27684142079765955424 0.37168046756491762705 -9.7313550850314207707 -2.111234506126794308;-3.8451953137296879248 -4.4824521884532178007 7.1759136454994978394 -6.8001606744050668851 14.931488630562585129 -5.5906435294662450985;-0.082041143424812071339 -0.34792916261422329738 1.0206526651296310426 -0.93828106611702122297 -4.0045112098882587048 -0.71125803946222077023;-0.21070945198650326002 -0.48159247482462552714 -6.812328228687983156 -9.7877956597192721233 -5.9149277806248452549 -3.4726798018126507905;0.57373736909991646105 -0.3303972124956086609 -2.5726045612362082871 0.23076209046056123109 6.5785234885078081035 -0.11944662488783670817;-0.020241625518193070987 -0.0027211908445616919162 -1.0777555428680021254 -2.67473384013568527 -3.868820581442521167 3.7481661982050478166;-0.44372900202592480134 -1.5866664517235666843 0.27455807335647258727 -0.74282278456710271186 1.9701929932304145243 -1.3792613906670814217;-1.7996190522365962394 -0.43949996558263987323 2.6522247290563591982 -5.0651151355541097487 -2.1936662679890170935 -0.66854939301958082876;-0.15983841686965144513 -0.12531696679853365772 -0.11992441876920427457 0.18575221315624754204 -0.18528764103758027515 0.18786001500571097855;-0.16830570807979780557 -0.13597101838930719664 1.9484009116988039167 -0.16605341740487006286 -8.9058099598808642128 -1.7588776134510557547;3.2261300067876130804 38.488866004153720723 2.1798649477238152272 0.37399619128886785191 -5.1644424512281563722 0.196865496294191894;0.96089191611279689553 -1.6720876011869711952 0.69395717926300881651 -0.71090170797439011796 2.495868952497292792 -1.8169327284929568389;-0.20491055873197727699 0.030952632092165369843 -0.021728964111707670809 0.071902254770643644899 -4.3040578619492242396 0.36707773783784403143;-0.33398191573670232835 1.5483587837861543246 -1.3559682773284598145 2.9750771368363344571 -0.45320002240942403038 -1.9863450172307510755;0.25289525805235524292 0.53888576051646241982 -2.6887097093722860386 4.9821920003587383263 -0.062524545096604530747 0.75803199513116781283;0.25262566050704188259 0.015808274553225046266 -2.1253801408397032802 -2.1279432788388530362 -2.1303749622159888766 0.055853210995002525174;-0.19929195759005874367 0.025055514533949063 -0.047852529275814133236 -0.084180874456444287901 -4.2005414281986634961 0.3669635549328302826;-1.4688193570484029404 -0.00047989177036282363881 -2.3251191229937009375 -0.0043874354584996881623 -30.874259210522321695 -0.43652648070880695208;-0.025958424562309855704 -0.3221787594620753592 -0.97897661766817567486 3.9891731421162290872 -5.8523411297705401068 -1.6581055328037843655;0.34183903494060940975 -1.4379417486269929771 -5.4061847264650007006 0.74909586809273775998 -10.156340504063949837 -0.63139846724756365504;-0.64807626537400875311 0.87825637861188277089 -2.3222500519545241637 2.640668357373777031 3.0190807498876446324 -0.78837044446027493283;-0.10302039654227247711 0.15020404370279269446 1.8798920358191359981 -0.23969838026325909763 5.9427413748444868347 -0.16609356929809082626;-25.928694621071702642 -28.575814166710653552 2.6770926646111878888 0.48176356433808542601 -3.9661707549335267764 4.4478983513063434785;0.64367907183472139465 -0.89879436134971091299 2.2816821625664251982 -2.6495384246257236427 -2.9016456171366704631 0.77958081987151661707;-2.3904925258823337408 1.4503936605892706613 1.1440401729775748763 -4.4303833376862202797 -3.0126128187149392446 1.9521495817198388778;-0.017502984696494364864 -0.34801338783687774114 -0.97960881835958513175 4.0157276043490552908 -5.6324805988721688976 -1.6593339650871898883;-0.0073403537542126792714 1.162424700973431646 4.4780694330633368239 2.0431644409893077174 1.5380363417663613923 2.8555899583193053992;-1.3211060526276106053 -0.52111148110354588159 -6.1416089318275961517 -0.56823735307932365934 -24.056628740121404064 -3.5851085631976804535;4.519471686465666771 -0.18669125237303707543 -2.4744809816369932598 -1.3023536835216888985 -10.210382488834570225 -0.10422987157345856013;-2.4305637248898142033 1.4477780754055811219 1.1151890683240079927 -4.395361623432320286 -3.0549058430564435263 1.970311121185057246;-3.4501269402629888283 2.4158322800802540797 0.72105805281682244789 -0.78192213702912793938 2.8340957077125539243 3.2852011730383372523;-15.19666439255553847 25.33614512115454076 -3.3502249781371613579 -7.6896827677464054673 44.257470780208514327 -32.077453725874384816;1.2744195240340170372 -2.3343479591662443795 6.2181695493043243061 -7.2713029459899241047 24.034386406740750886 -3.4846773571985560913;1.2389428860073190553 0.38250382044524033898 -2.8742391873683543757 0.16009381709698430885 1.7270628276045056904 -1.2667569940321059541];

% Layer 2
b2 = -2.6461424419607348923;
LW2_1 = [0.13469443055693414157 -0.09374148611047496138 -11.408686929961330492 -0.31531094834717882103 0.023249574607226954764 0.25716763959967137154 0.16898869060877752535 -0.01924643885972514637 1.017098658538553746 -0.060059292696526475619 0.23245736153580878747 0.16806352473292870964 -0.18024950961704525043 0.16354225315954531994 -17.05050859983067113 -0.38307183395749277999 0.076620159949469940353 0.17757110800265485384 13.596615760422201546 0.21331679913710860363 0.50331945403243716353 -0.37369767084499799781 -14.177447573249388313 -0.11239215427236987077 5.5696109571409495587 -0.072501119623908608092 6.705450590623744489 -0.49233288145737608144 -0.012328689360927992669 6.923439804054774882 5.2682525791122039038 -5.4108979447710989774 0.053777378367273892534 0.073752986444403950683 -0.028734331099024248979 -5.2211372908644548829 0.046106385885246008172 0.0062418570568777186416 0.034690675474412797918 0.16943550877722635128];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
