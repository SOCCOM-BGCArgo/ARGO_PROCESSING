function [Y,Xf,Af] = ESPER_silicate_12_Other_1(X,~,~)
%ESPER_SILICATE_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-16.36448680885036211;16.365865576880153753;48.339927073698603976;2.1251303667728187463;7.24956646320682907;-7.1136785839186531533;-1.7272644095794700281;-4.8638135352150673185;0.85782973584652899568;2.1217655162595989715;-5.2741535947641988713;-2.1647995512487065994;7.2871129141415247332;-4.3193374541417481893;2.5554515028085931228;-0.95536552485146752911;-0.1170710824013279916;4.6468358165481706834;1.729764396980986163;3.0599914269365640074;0.52692750974841473521;2.4842197403033807745;-4.9352688299690026241;0.66666040471110588062;0.39043788152907299427;-1.825400514584203826;4.7060936250696761007;-1.1360653199774368716;-0.86071954413941242912;-2.3875864969732125687;0.7644647794062251478;-1.9615931590063697687;-0.40372896323948420649;1.6181840023353115665;0.14590392338190269483;4.8252654014753000311;1.1102065748008134172;-4.9529879165219661274;-3.7458396606513146843;-4.5117587148997264634];
IW1_1 = [0.032233527120948304856 -0.35636903240517681102 -12.21353248612778053 -3.6394484401348838887 -13.086922204355186494 -0.48577667335459867592;0.16114151845409935282 2.0678929777380057331 13.766141311921449741 0.33819096547883775727 6.2098433454007953003 -4.9028411878840154614;-3.7965410280099738394 31.902977900196979988 5.294735362850335747 9.5419454523129001444 2.0762312382379239928 -0.398510485604532394;-0.49627422502009221894 0.13116099537785935736 0.95533626643687574731 0.2204624072556572445 -2.4491528387697552027 -1.121390700780104277;-0.17184506282520553566 3.6224858580680154851 1.0887412814201309352 1.8510942987075049704 1.7664230515272472122 0.21708407875444407642;4.3876135575264916255 10.15855903977347019 0.44967875763618836427 -2.1840311062128821007 3.1639709923614667275 0.32224337452404755444;0.19404906400403906797 0.01892164681773669116 -1.9423477862214573175 -0.63983018101756261586 1.3531367764562280964 1.0353509728527265921;0.22216713607202101533 1.3629072773358277271 8.1168038565529077033 6.3587664908412291354 -10.433943662230605653 2.5420259122311934519;-1.0130708893653443958 -0.15585701457987863328 -0.21016394059551060658 -0.16541461988735434163 -1.3685078323133186284 -0.79267701750202601563;-0.5954341279810767551 0.13556824563901395675 0.8322372317958492971 0.23920058294029039603 -2.9945344888194340705 -1.5113602697784409568;0.66852987114917838962 0.018099280634501360016 -5.6017204451777509178 -3.961873940206531497 -1.084837802093862491 -1.0173353508527400724;0.4210227247002287787 -1.0804688363208947433 -4.232211181360457708 0.043482078854108416333 0.24984931240272284514 1.3418507375299015827;-0.12601500521824129941 3.4992067783323661523 0.80612372859274483705 1.7839962192803195951 1.4878018173470546337 0.073657792883177197751;0.29437730107209425512 0.2787120579152537192 -4.5919701223432607406 0.022939849163317978936 1.1598323387995561617 -0.034259705713973381824;-0.022494126165852390553 2.269312166283648402 0.54247189790355099248 1.0124227224203150577 -0.6672858001278053619 -0.091618886958827472355;0.1418998186039407694 0.14858274398574380926 -0.9517518813748825357 -2.6171550549933475516 0.75887288678879227799 -1.2290877359295879767;-1.4144770565288997677 1.2543329612906741755 -0.89240863835266026616 -0.024049476282404100291 -0.72833115740371889846 -1.3772436540861563437;0.24350822966865534602 0.84153054051916953426 4.8620085262958889771 0.9613827813299299363 -0.76691919241373029958 -0.23351727587711756939;-9.5438784096605520091 7.1951945925678062466 -7.9019292653409829441 -0.92482058188593563308 10.305790026706930007 -0.66834541019347759594;3.3043102068129024396 2.7871561058359541896 3.3877429799824199108 -1.5078740657568037165 0.93707285547443308626 0.049603200208526203319;1.9424060328820857979 -1.9130019028640663503 -0.39681909672169335401 0.95433257930830572846 2.051836047550967379 -0.34155191209945295894;-0.42053478302560320934 -0.071013455782078502287 3.3624846246567807739 0.64735077162446552634 -1.2601239154688319566 -0.86281315078071862956;-5.1566796628730298124 -8.8209602114082716895 0.89897934496235154533 2.2164125904750400231 -7.5148288521215569347 5.152372413681423069;-0.11815929992416350502 -0.22860188293200672804 0.33760906926014122575 2.1572285545990910194 0.034088568018705314722 1.4792216920748193498;0.50374117311945587616 -0.025909035930036648787 -0.4674439850681731401 0.88528698302511921181 1.2504942260118416808 1.3220144213236975084;-0.20215304293728500462 0.1918646358827200693 -1.9021419033467230619 -1.2056272709672368748 2.8045204798112854938 1.2936855953969794708;-0.3030838624753371402 -6.5407116637641271595 11.57650511996608067 -4.4052642079853336909 -1.4223545909130135279 0.8488052482068506599;1.1978796899449939417 0.19397947302247561807 -2.5794279020089492249 0.064665259230344052099 0.17343568654775087801 0.0051507925385986330982;0.017547858786956825605 0.18863926481960086035 0.18635891023487019535 -2.1764599017855048579 -3.4209130437110539802 -1.7281795660207937004;-1.901325674877707872 0.12464264609055808464 -0.10892214400878766356 0.24801106860595667492 2.907970243372527186 1.2917651302439578931;-0.75003223553072861929 -0.10581487829813808477 -0.21062663705649795065 -0.14461156766043267718 -1.2121498905223953013 -0.80533424693464139565;-1.7549509115162762463 1.9109423498489754856 1.0553734508810457271 -1.2461968039175470579 -1.0722338754517195536 0.16017643757096500234;0.037538402979656090852 0.22457402626126443668 -1.4559742355825353588 -1.2467293486451342943 2.3323633308939677455 -0.16411974448185184805;-0.028724623109118135877 -0.12839586810040776177 1.4465744342391650967 3.1426377699407281874 -2.6098256515275428669 -0.3474164530988425037;-0.46867330936170226163 0.34717735873218369402 -0.90489171184269334702 -0.032465038708331117601 -1.1327973584578370225 -0.96260551356852741556;-0.28300176025950857239 0.30617951709293478313 5.0733705359378884481 -2.0792369436631261692 -1.3560083264710334205 -1.1962161005245637302;1.1920026526385778531 -0.14349518119218820922 2.7262141091871252563 -1.4494478210439862842 0.74206976839050808881 0.023216712757310301735;0.26122626769658707779 -0.27546358608559967651 -5.1078511156538093374 2.0480709520806597013 -1.0991412901183852391 1.2487925171946758773;0.21761452327132421725 0.31133718645406849301 -3.927170806562586769 0.12283966683189109781 0.85020224376182651493 -0.10541279070277935481;-0.79710999053705988704 -0.12880225683554885618 -0.89772914940481818302 -2.1155298015700676473 5.4268823983233822617 3.5286409019346662852];

% Layer 2
b2 = 6.3223517604429249062;
LW2_1 = [0.12252373979557334982 -0.26687454573611091302 -11.429995911659563745 -10.492678369458612764 -7.057321489246072943 -0.01311275029806692298 3.2132333769440641902 -0.037066572281678568379 4.9269085313977605267 7.1943607171197436756 0.063301652685969170276 -0.20930625394288168706 17.563476797394425688 -11.073892815781528398 0.31268601497322967564 -1.1164195968047807561 -0.19021933434958948617 -0.39787068058930552539 0.014991958153142602439 0.081267299689339753122 0.10278775302973733319 1.7468809329149208587 0.01989677523747518384 -1.2030255236086768722 -0.74537509887374397977 -0.82912524149069044554 0.027949946319707943965 -0.39434737083625220899 -0.82692674979975289151 0.47409250073029662875 -6.6310629245566889978 -0.14609671984714911463 -0.41660510971739100894 -0.36734220340610529432 0.66292515969604315362 -7.9115917811688989403 0.17495083102249001095 -8.1892227598950757539 12.665570454722669069 -0.39511060878159409704];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
