function [Y,Xf,Af] = ESPER_DIC_1_Other_4(X,~,~)
%ESPER_DIC_1_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.21092834091654610873;-2.7941772066131314034;-0.84582341675758354604;-0.84464480052074519811;-0.14122333032116010654;1.7509164159409247308;-0.65101432162940475745;2.264858348890561146;0.010308371751252707813;0.30744397290053748772;-0.67592968348570925397;0.84279150873940555933;5.1721343186758277355;-0.60421173915906545293;0.044213639586740134668;-4.9612345523274994363;-0.37140389911411347823;0.56943233190785258468;2.2257331926111216802;0.27318273192126374393;-0.14963449330401806803;0.25907001283454261786;-0.53882148108176974866;0.35618701259464596864;1.7757541245313743783;2.0477870505557969061;10.585585775673514775;-0.13488542945234524573;-1.9220983476447037752;2.5288697533479278512];
IW1_1 = [-0.14430884100333152276 -0.24947402846078731153 -0.087250788367161963288 0.15722494704484307748 0.23907244408492414611 -1.3494407571783657573 -1.0719488983938554316 -3.5527068957465748333 2.6692460672157367618;0.06243837765001616219 -0.018000265623079932803 0.97638005910607994497 -0.20343541432933087698 -0.67732149790130025124 -1.0285765463536282738 -0.60375993627407531505 1.1662354670642458565 -0.081099005320550018872;-0.047127790069447721144 0.30608205071630956162 1.0112003537359486316 -0.72058461833471132429 -2.208982316563653292 -2.627603565198604052 -0.46307122373636377954 -0.31413547525496166024 -0.56531719742328367939;0.053377632007158060112 -0.43569650263222403641 0.21772651902477066499 -0.55952950494815456572 -0.4621550464670432512 -0.65767469453880633701 -0.24689509329059775022 0.15748767929165069512 -0.37740905095736632102;-0.020171904748734724444 -0.057867919375269270821 0.98855992862585095882 -0.49516397490875629916 0.10066550217442322979 -0.77729766281549639295 -0.22297042567449135153 -0.043442118568792584266 -0.66258454640724151474;-0.23212973980227658011 -2.3760063901751680149 -0.15610029323779514576 0.4671475148111521869 -5.3885151146328427174 1.6877320770441213149 1.091955236937015794 -0.97555277329640266437 1.2883951902144179513;0.055465986854108063897 -0.17328800705478539235 0.12815812751792973745 -0.26945154004149363125 -0.18294373358923501915 -0.34536341276282783719 -0.066244362121399030796 0.12251814987622769437 -0.24394135694542062875;-0.30224707913843817941 -0.11814348268234582673 -1.7025993578989497834 0.23894537671271764978 -4.427094244543201107 0.039838095083294687571 0.98891154667283343027 6.0146957911202356684 -3.8405059511394767924;0.01077666627692882087 -0.029881261045373731788 -0.12468678994243051483 -0.0071380728155736204374 0.099118200904654868433 0.062137638186083303526 0.046396581742638311197 -0.1037801757814030279 -0.0034021121108919420012;-0.014132274409769078269 0.041032482212084317452 0.84287341589817743603 0.030379044160118530427 -0.60481532253463465842 -0.48535149324287807371 -0.13162912695564613075 0.73011591528545149998 0.022041901395218319037;-0.15210989518588133307 -0.10408765931837450636 -0.2600428579403336049 1.0408402441735462585 1.5305479549488703039 -1.586420847209150331 -0.72381352215028127439 0.89925344501064530256 0.085902229994113815659;0.23959417472377017577 -0.0087485933554167210485 0.79870355827724226483 -0.48981734756824985011 -2.5894190278845350406 0.28819246754019617329 -1.0245475468194658042 -0.86429758509447862647 1.0515245716018155608;0.23187950667540999095 1.4508496917866247067 -1.7628475253144813006 3.423187281557558137 1.0744205891066898051 -3.2485766389812469335 -0.63292889408817942787 -0.49127014969355803364 1.2145313427356025926;0.12881134209646166733 0.28146305815803185357 0.023770311569492493659 -0.080771896009698876395 0.42736667247016563165 0.57877961683651213409 0.82913978326682036268 3.7463307936417695743 -3.132956822332890745;-0.023389298674677139883 0.24396194710506313719 -0.41786500807997728479 0.43647287786474298077 -0.0086668060335902200042 -0.12587781697514560664 0.019194312869107627711 0.12755183752358822957 0.38260524209264873408;-0.66581044738771477665 -1.1771846926473001904 3.1744996431399514769 -0.69549175192370504828 6.65616573326407579 -2.3109389162659326189 -0.48025355155348098402 -0.60137663877110747457 -1.275805993009430539;0.022341566650533259408 0.089010774286521460175 -2.278743997763268414 0.024746951636258122248 -0.14712660859105108901 -0.89827981026084025018 -0.65144154031271284122 0.56788852505821307837 0.15123741268455873077;-1.106900095655398486 -0.045711302139729979854 3.5231568326530933177 -0.482337769993306964 0.47673174802374179704 -2.5030006189707174613 -0.89136126938159365718 -3.9379904744319542687 0.71896539275541937464;0.13165261106992187656 -0.7708872488014810731 0.23146267429250833025 -0.077372403944216072702 1.0411429674991377059 2.2750390810916121254 0.2406986109702034804 -0.97699864486830667598 -0.18851578256090073538;0.25680245589145955787 -0.16139102283461714826 -0.010144855467796171089 -0.13546580799091881286 -0.27174912435538539635 -1.1586493045264305568 -0.4476942966276030722 0.51514171225276117472 0.52454394372920642997;0.0075640989058894242403 -0.034195526936936733453 -0.71152436811795982674 0.026908925716275320511 0.47085280013660801846 0.44303097767114052452 0.15204173568719853149 -0.61791297786489940425 0.027213455278651221131;-0.682587691637710825 -0.3790798965490115302 -3.4211569963127521632 0.11408127612208771029 -2.1149746725506068934 1.8460816089823910424 0.61790299094323553053 -0.73579814951257127564 0.95166299539200582824;-0.50441265979194449542 -0.028106146664643241739 -0.75579133244689000737 0.71981961368982882998 -0.57789116755741976039 2.0863560246515282515 -0.75657859659527115781 1.6020896063511029794 1.2982727101734981012;-0.29283538730740271694 -0.035244866308421045342 -1.2921854981757801006 1.3734557771215629707 1.8698656943329885483 -0.31544609636452264345 -0.23200518286619423169 2.4161644567484041879 -1.2397142478510800867;-0.3226141451574858765 0.36939179127431803762 0.94315295088999440143 -0.04099333797962421283 -1.0593615494066350724 -1.8065695634860450269 -0.51410123145192876404 -0.055980299531269629709 -0.63910144474403718373;0.5136459969711100193 0.72395080985228354997 -0.81787787354679852836 -0.51702023795997376077 0.37084427444883277802 -0.022323510647980011196 0.21268562611337457624 0.079527266362554485668 1.1105579124165998461;0.22990826539996042643 7.9287155012641115093 -0.067295077679222520262 0.099310550534553745927 0.003219783379245949248 -1.2049671941920818696 -0.14702155477879930157 -0.2881851472265701819 -0.16008139459890616263;0.58881717161594659959 -0.40774348397267362598 -0.38005824883951327964 -0.31133734012278091452 -0.21479950597603147955 -1.6770284248311431163 -0.68687585844166443305 0.8364481491562625326 0.5733965830676368558;-0.52380035169302952003 0.22014981012495146717 -1.8240102677076515114 1.0010855678000103453 0.4607202328049795903 0.94354147697524504146 2.5320160583751265548 -1.9544987233847284092 -2.5004331702879376564;0.46765866149624990555 0.050255269336243656164 1.2136098563111685777 -0.27391655774108858434 0.73331983001391987109 -1.7636116426285952663 0.96024730982018624559 -1.2489195305844318362 0.56869026436562797322];

% Layer 2
b2 = [-15.949022928295772061;0.90779213573343386923;8.6720878723916889896;-10.328235334272545032;1.8593917355502014299;-10.060147940513985532;32.531641564302326231;-0.18348454274938288955;-18.134491773951239679;19.434044282876445919];
LW2_1 = [-0.40033848353238532525 4.4421258567513337567 -0.071219007313488916222 -0.7081296628948785532 -0.37442706080203203012 0.2412176814099650235 -9.7508964635414798749 -1.3956817321265013732 -2.8718781213322492896 1.158581890654859059 2.3012352154690720596 -0.037924040082536469853 -0.68669985192644600325 -0.53111573126831479463 -10.900051588393466773 -0.38957546669950993135 2.254770628993925552 -0.70324756783797781612 -1.6641323499304567779 2.0049336618307425084 0.52044697071183954051 -0.60436940806352912325 -8.8105171411761986633 -0.87600066711037161138 6.8211440475277234086 -0.45133891391305208662 0.97652360236959123707 -1.0063605260793906382 -6.6527272228432066115 -6.510398020269959396;-0.28505297599859286128 2.1627766397376850804 0.1535496534933400159 -0.55046235201868265463 -0.91732875866435958923 0.049516087191437033188 -2.8258967990277970017 -0.090981279850974108858 9.4061521199274178429 -3.0871104823767012704 -0.038886323899410123184 -0.024837678410791846906 -0.013981196654994114056 -0.20605407624495580832 -2.5375430444197526469 -0.0054299868518515870264 0.48898383322063643242 -0.013551278261280325435 -0.13408814439690641684 1.9236207759183987509 -5.6547640071232248005 -0.013502086948088931964 0.16958704239653321633 0.054617629103489599707 1.2157001974593601989 -0.20258236596673814822 -1.5161559864303930656 -0.79093028464280046297 0.067776257031748166071 0.45726031678996253982;1.0829441140652773523 -1.5935479955012163966 -0.17737648749738713083 1.5691807391004928274 1.302051414059999912 -0.087620438679547954508 2.5408886252538849249 0.034902716314052208146 1.5290495834362061167 -3.0664503764069506175 0.33217253935399465581 0.031080627898465079673 0.054334036248126424407 0.77791617148995961806 4.6390097529103737628 -0.10766157133574402738 -0.826738927204388796 -0.0029771336994820554733 -0.029967638211093352435 -4.7128724909600760995 -4.1451261970969417447 -0.005958118769599362631 -0.7987842095281409982 -0.26305372992847825264 -1.8021643028557678967 0.23545329780253496099 -5.5402989120175343274 1.7597372329491745013 -0.077857529353023424701 -1.733064360950642202;-0.30568916905567344866 -8.2469996438437096486 -1.0478647703803032343 -4.1174250593636907425 3.7006685608739018356 -0.19516564158219973368 10.431879821131737174 3.2210289049509710502 -12.384105765773242069 -0.45960184571727930036 1.2395490220371350176 -4.1548020369954681286 -0.67777878377649147801 -1.3229960306384622726 3.828817142605399404 0.36301546847614413194 -2.8186200031438684022 0.52042905734271605045 0.10266889669354661851 -5.5895921366326124513 2.7726753581346872402 0.51398706103175850757 -0.8501772605351813894 -3.6212275442717682949 4.1957767708138877794 -0.99104898796881968348 -4.2973229724925232631 4.2550497567890852579 -0.94611456339036958951 3.2650241217010598227;-6.1136580775099158558 -4.4640732567410168485 -2.2294889397382000595 2.7627744915601146758 -8.265012017714164827 0.43956350046878928106 -3.3298658491208246168 -3.3866925249523931463 4.61043329605240082 6.6920023397947545618 -3.2501012456788824778 0.69702924649788022826 0.064156283165025335125 0.71548478663861514448 0.77468341918291305781 2.5740280084787725556 3.1369416259552398429 0.99969512022790985029 0.39151050824988264942 -1.4381310751246607627 -0.6209703898963787605 -1.3893869457534964162 -8.0008017517149490061 2.7251008125832965057 -5.0677701480723138516 -3.2106203864158300298 2.083667922000940198 -1.0801092553867679413 2.0204959220408995613 -6.8591581882634402589;-1.0137763025677306583 0.84114138085590717253 0.75404486239339796327 -4.3342793454133108355 -4.2496087041676462448 0.18000035755844767671 -4.9404975264016481873 -0.54281050585630397087 7.1411742054844848937 -3.8214200150026673697 0.33406618265111409638 0.38453573477245595047 0.19597528509221726067 -0.84886229316748118556 -12.771303023346114003 -0.23506167461891905313 1.9540942723262606506 -0.099398034104394933363 -0.68642165055385551131 7.3275486396581772652 -5.743594881065447133 -0.20756755995284398297 -4.23251977019520087 0.51436037121053412857 4.963487848140832881 -2.1134121042749796082 1.4400820561941947151 -3.0083072287212622165 0.35940624005280397135 -3.2840914503195683949;7.4330295917936393124 -9.4845355313560872901 -2.8517346927584732441 0.59843008257101282243 8.0809456296126835895 7.9462688301492736542 -11.894625438100080217 -19.460848576103483509 30.478807081492412578 -2.528670867526636723 -4.8738248839466074003 3.8246268082746950334 -2.1524151404568354629 -11.467976500956295283 -0.35474493267396306484 -3.872222881692655605 -14.575062147141085944 -9.8928124505560290913 -0.60859259220471073615 -8.6116849299011146712 -3.3732222051874245494 -13.284970724536840692 -8.4521456858494836695 4.6933881031722508581 4.6407883430119207802 28.385395682502338133 -37.689264572706925094 -13.688073182493644353 9.325134694225761578 8.213911501594820308;1.7351610499024001655 4.8942931219276779586 0.67437908415731429024 -7.7301732434446464026 4.1891483142723533462 0.83452339207978543101 -2.1187458825521914285 -0.24157213171716329647 1.8730310922253705641 -2.2275472056867147153 3.6395872146259309332 0.2394023590362815701 -0.72624648514306977543 1.5623027720947906261 -7.168692202764295196 1.1755489474110043524 1.529032020883041243 -0.94781395556230574329 0.24179962402993684933 1.6182872622053048328 1.3065294304943624315 1.0071252182232681704 -0.15159816832126027375 -3.1643760898830004535 -1.6911122537025251589 -1.9274976559255863062 2.3959350680697650837 0.77073528386613165964 -0.61713557642077832011 2.3412837272488298268;3.6964976168196832518 4.6528904042760688142 0.86712436083739818926 4.3902090574814023327 1.9830123377083999081 -0.27998973339622318379 -5.6189398142312914075 0.8436351173593203967 -8.7450755783124698439 -7.4160496623436245045 -1.5601520162340485331 -0.26542918249247809959 -0.16314998706446715016 3.4873252895207502711 6.6187838138741890148 0.0051089296509753004752 -3.5667895084794416505 -0.51925095885928662653 2.4533206467618766666 -3.5433398152765072098 -3.6383587188813497626 2.3573269497884790091 0.96246892430594022105 -0.28737015106392377328 2.3998039839812741469 -0.13408646263554510614 7.5721698834573025749 1.8878328660338783429 -5.91843589296206396 6.3283645478210299729;9.9964060404479475608 -1.2016607683976332499 0.34895674207701710134 -2.1550594105755398466 1.9354835966583758822 0.057540386747905833409 -7.5390484523506406944 2.477156989541120069 2.180088791875275156 7.4299385827110926428 -1.2529073073704430907 1.0502254428952064735 -4.5152095383135630868 9.7187828058658887187 -1.7861848731268723522 2.470548328259073223 5.5543018833141903912 -0.10800118653639906308 1.716006700680611452 3.892307396048242385 5.8468173827760390182 1.3006851266721253246 -5.0518444391209023081 -0.54293593104110215997 -2.9363144473069389129 -1.3499090165842377864 -23.421813745478644364 0.67094011378267603973 0.21789470284121334465 -4.7723976244231796073];

% Layer 3
b3 = -0.82415113148090046735;
LW3_2 = [-0.12234411935420655415 2.3501804530849637054 0.74107452419958408374 0.043245860871475874654 0.0075419282931735755204 -0.2663684035994410837 -0.0019932253210957102951 -0.038452884327330724701 -0.30644721938331176414 0.036414181963973307754];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
