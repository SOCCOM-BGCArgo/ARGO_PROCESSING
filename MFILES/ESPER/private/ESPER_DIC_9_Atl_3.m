function [Y,Xf,Af] = ESPER_DIC_9_Atl_3(X,~,~)
%ESPER_DIC_9_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.4108198866445533781;1.1184381633905051689;-10.851005068926822261;7.9055251011513645309;0.99323755430501226016;2.4559709626495580537;0.31140234931796012541;-4.5697125346691489511;-2.3831960115778572096;0.62312506505783693544;1.1237765600481681716;-0.71236142786002543126;-0.79566416818535623534;13.1486626154819497;-0.8089646506773418011;-0.23369571146830847574;-2.0094425578164898383;2.5224730931117420596;1.3177797720716557528;0.8356661863632556253;-8.3108609169012748197;-2.1843933804483732786;1.3907439398530514474;-5.2069677658422115485;0.27737011676874984145];
IW1_1 = [-0.75539194085494798525 -0.79553218673330727828 1.3123481630038358325 -1.2388767953021599943 10.307659268916207651 1.4192868955894555327 -2.6130736729900290172 -0.7942571809395398974;-1.1674153299456615507 -1.3593827952097812251 -0.35731076062356248446 0.2298565502685376849 0.45998416015916182564 0.016964850296700091647 0.34391712495993814747 -0.32921611266086864278;6.4004693116270683362 1.406039797404939895 0.31153138410489411569 -2.3202318871087594943 -1.895539169093774845 -0.03278001071262877375 -0.99030982447622184495 -0.51892040569000252859;4.9731676427540740804 0.13028646635836299561 -5.5469853357093406032 -1.9702919780581709119 -9.8698746188452588513 -4.8323736511361632395 -0.23881065785056213024 -4.212498884272385169;-1.473172478311908451 1.046211357668253239 0.057469944358357338832 -0.78535861276667962017 1.6002256739123090767 0.23575963623293300087 -1.2163759414817287841 -0.22990487915260726659;5.1930935098378050441 -1.1045148898238701385 -0.081343407933110109531 0.017897529211651885817 -10.098396033886084311 -3.4428805923597467498 1.1922613021664028032 3.3272122908998649216;-0.30242858233241498578 -0.75465298779591427625 0.22056227720701840345 -0.55002393048117892427 0.43681483935413989439 0.1480493393416400516 0.5454732665653703183 -0.19826976564898413091;-0.68458430108951828785 0.21777843760431961351 0.65645833258736074889 0.025090480536831279157 5.8453610903705408575 0.28306509499064325119 -0.46728342232719066729 0.49716816864921320462;-0.96666792973670134792 0.34995358804945819742 0.35767562624253906867 0.1094723252376202105 5.8333482377032455091 -0.086968337436935355678 -1.9710164083502104138 0.96426718165122160542;1.0490403712256983759 1.2393673745155522337 0.010407774241230984685 -0.25597235597310957766 -0.60627380855919776881 -0.23138198468313370126 -0.14122781607654932845 0.59393255854045556852;1.0509193456303680403 0.7872664528515627147 -0.15059212553726863959 0.26608203471585201161 -2.5009987822368660026 -0.26000212686315260502 0.61229560922321901728 0.071096082008737876423;-0.41637963592974780447 -0.21992963480239310914 0.14663744176370802075 -0.72614139592228765796 -1.3746078432600090657 -0.57110579051348564494 0.21388631535098084901 0.57721910573737122974;0.70004500183419138271 -0.65540957531915178258 -0.99887995558647535432 0.63700172921875020116 0.50827582310133134769 0.2080112838913575346 0.12271856074768450195 -1.0456958248480912044;0.12916012833111364944 -1.3108344477651610038 -0.77521640934165358949 -1.2744404261086863528 -18.081452536722437685 1.6860011571889006454 0.18529820563535839839 -3.3289969705227253627;-0.32956877230235970266 -0.60181156198454055506 -0.10313295125466841184 0.087932582238952200493 -0.27004009911642795627 -0.34991466244111874007 0.17393190808291064675 0.022369443064510996511;0.20514958440403696649 0.074789187612193025467 -0.15229622189120645137 -0.054555628055387453412 0.43998893750397582991 -0.14509735864599179744 -0.082493482334250939347 0.72456426681630103914;-0.76695166418450566592 -1.5254678761452185043 0.19791436805953135925 -0.64361210240756960843 2.1816728172866670654 -0.2361865424678026848 -0.3063891943375967597 1.820808237829655063;1.1808302781620765298 -0.42526337245551099064 -0.26542565811889773375 0.4781218488610877726 -5.6851089301177548663 -0.57178877730863830742 1.1960293114109257218 0.057180697288829560043;-0.51149465758160628237 -0.84378975501952413474 0.23632991828512062149 -0.012005871149606214127 -2.8526626156392298483 -0.19329318205498730032 0.58011193420758833117 -0.85533224133705376691;-0.083703618696787732145 -0.074226418559810741771 -0.66816323908947816701 0.58698330390692876612 0.41481433405997769626 0.45658581575719386914 0.31432978776364550733 -0.90617183610430429574;-0.56946314908392137166 0.69246897317566524777 0.29412559236273078112 -2.0614071405508465062 -0.89982798380159245699 -4.8926717858926949134 -2.8564294168789499118 -2.090174464461591608;-0.61310031055843594583 -0.24700595328467897516 0.097943836827579719428 0.07651370932385737067 3.064426202772772001 -0.15810779157059226541 -0.69071565520158895168 0.14520829027128545619;0.24353627703959315753 -0.64453703343892287947 -0.40604845082459356531 0.44451547416400077894 0.6184941800835392911 -0.16218095226819173593 0.37259485819017945651 1.1939597305971720864;-0.35563137278926693075 0.7271062889947151886 -0.2942569915968951122 -0.47949926663255548753 4.6899520637376532761 -1.4380251886928590022 1.8256258765234507635 1.9911411133392737938;-0.58748767679777647022 0.43121821511547442363 -0.31788046955806370519 0.10834172833294528071 -1.5677614884918560367 -0.14318810679007218378 0.10316039002296317761 -0.17793088570819504124];

% Layer 2
b2 = [-29.924444654306253;7.5945527167891366815;-50.289873877484545517;-6.0921911596848588033;13.515093310264711945;-112.6304539605710886;46.380658383250846555;0.2861329372764329082;-35.768324016265765408;3.1761990672673801051;-10.180144247590959594;13.061288697097744205;10.251463152587930949;-6.7378218127472386811;58.869479180575275734];
LW2_1 = [-0.84538123268543063915 -3.524785090663157483 -47.847193838727939408 -0.51875492847142234965 0.53849683773187340119 3.6653300678282092484 2.2723221656168370863 0.15897895668043116046 8.1499349501503122184 2.7801711887691578085 5.7086000089965986959 -0.55098992284328152103 -0.072650326492154568281 -16.01423217666630805 6.3237802569350725079 4.952187255442476399 3.4723937206245154563 -1.1418624529775551757 12.702444225648049425 11.295994563870369376 3.6414233691113468971 -7.8663707795199870887 -6.1156392663808736287 -4.0986579691185918151 -3.6638359790051233666;-2.3216667540072526421 -15.925937755174480515 -45.498035359701134439 10.459530916047413029 0.63872118551895218364 5.1061215271603277444 9.88207855080318609 -7.6323250380110705393 9.1914816758844217759 -19.319048802415135668 4.5206613163287974189 -39.321269285046476227 10.121543781144524132 7.4223984589597193917 -8.6044143487440400975 -5.6424684041699633141 -8.3752062783589611428 10.008029666253612788 -4.2209334330410879232 20.971182652397601487 2.6112096754587392766 -9.3980931796425277724 -9.919382241652261456 7.8053417818001396 41.338365226146791542;6.4702437060838491334 -6.8531299738033304436 -63.288223090575165486 10.310151070845900989 -2.7653526059112003566 -1.0991238384888175617 -5.1646125565759826159 8.0312686943282880492 0.6654688849095911074 -2.2907787204756790977 11.598754200433475603 22.553103441424969589 -11.686574655713657833 9.6478593288055325417 0.28819891541159786685 1.783955360288909997 -9.9783435000330698017 8.608907786690144448 -3.7535294673778896168 2.3992989842479102158 -1.3867186268638329594 18.234022733568242103 8.808046287356283699 11.842957824003368827 14.076763050228162655;0.76899633153014990139 -1.5171161229081147059 7.6378921424817587393 10.417964725687445693 -8.5322980733367916883 -4.3093831382799079321 -4.2380054226133028195 -3.7188378089802021087 2.6808946258584320788 5.723071467348884056 1.2698142650452168834 13.970153696765503781 -0.97766996685114648802 15.014031589975095571 -6.7395484571234298699 8.0075256692107448231 2.0074145237784692952 4.8499964959652670515 -0.68532324671080468992 4.0366735189135143358 -13.751212422329254892 6.6013066190537159628 -1.8509550964261165529 -2.665638990545619702 5.9023560066436733251;-6.7672188292602948323 -23.636020949227784627 9.4104439913219799507 14.121142601649779635 -1.5924114232547572634 0.6224022729632269213 -0.49927151749457376884 -18.941770578834855598 -6.1846827879146424323 10.486405429690615065 -23.094150137218591112 -23.776977699135635191 -4.4231883575603827552 -8.4590924471766246739 -13.656235007069295051 -24.929680451818807541 9.1963124124118333924 16.037963650039252173 -5.9160842260316197638 6.5029032677306570775 -21.065189526747101212 17.356567612288642977 10.468286280231092533 64.460100394561052894 -10.692254000974502404;0.15049673066106608599 -1.6215130263190307147 -95.002273871934391991 10.702594906737934011 0.39680329180974005521 0.13073878449311093775 -1.1473713610285420916 1.2371195231920355528 0.74077252266550963622 0.71393616176456187183 -0.51876806754988347148 7.0105016089164582382 1.810378166251167098 1.5043417031284598284 -1.9013810132519060048 2.8456230675426072985 0.29272767518244136031 -0.14676580034895528315 2.2186612262882703384 4.963190293281593668 0.3246587291954192156 -0.95194518092271585008 -2.5836540331969564122 -5.7738055129648104824 -3.135384183703309624;2.247057636350296761 -8.7214968303050781628 8.4191119367034890075 -5.5193241567162605321 -2.4859041306755891299 -18.852926256075793532 -2.143654211321316172 -23.430377858993207241 1.0093704722687357744 27.303999383580141114 -23.136334161005738252 -40.262099873778012693 -9.8242516296279305266 -40.992907562528770882 20.518586664148951826 10.200782731575417372 -17.844434272136737718 -1.8907596170499409993 2.6873530251307449213 -12.7413490143214716 30.796054634329230737 35.450915878575429474 8.4190272337772462663 -2.2180301614125106369 -0.90765287561039420527;8.046606849641131376 -10.229317482012351803 4.2957127912731207786 -15.131250901775327833 10.759543550567638448 -1.9048474464044020671 -7.5841630776425184024 6.2958932689043187736 4.1527811803973477822 -0.60985273842836751346 7.8870254231331635708 14.702656670051675647 9.6970600592925393357 8.4599489501500748645 4.060353533365542944 -5.2850502793066054252 5.3896996805826473675 0.12531861927855586503 9.7911994082585387389 8.6997202570098970398 28.472179165192297745 -17.182918298904656496 39.473700149025873429 6.7835929454832442076 -10.983999026486115369;9.6740668098584610135 -0.79134326439025981514 -46.556502559284169251 4.000554918549122263 -9.2091856829557112718 2.8104512077028354078 0.52533771364680803551 2.2767421457834462473 -0.069848506054996845061 -0.3092165016240259745 -0.46828571143416219957 -16.750272937400247031 -1.6549269327219235937 16.20829571111983114 0.52105908080921636838 -9.728365198517129997 1.1926579994881258973 2.6283025111204176838 -1.2125022811859342831 5.1471698191725989702 2.6106545601002513202 -2.4075937725577842841 0.095479793672186105691 7.8052646942673984398 -3.5133538668563142338;-3.3803331144308197409 19.947810013982760324 -6.3804674395814373611 -14.043127977788143923 6.4661883390767549429 2.6844776403086978434 -3.4098913134576709361 -3.2668573547714605532 -17.593954891926411932 11.873980020545220171 5.4637677859938706959 1.6265979485365373858 20.8584097035143472 9.1417544307619866828 -5.028073202479559356 -9.3251947503585022048 18.96334413007843267 -1.7400005868717518531 -0.85574721627617167385 -6.9470951422555557997 14.009734900183877571 9.2944679099291498403 -12.920421165600650681 -3.9293201354050526497 5.4420216855298457759;-4.362681421162145412 9.5914832327914805177 -35.110814000318022465 -16.727852070122857242 -24.570433662133460473 -4.976565778657406014 -10.88491237158157432 3.5678561265429284965 12.130433896126884719 -0.83006217470121712587 22.191247491433493622 31.027165757455989592 28.386057275204869654 21.584759492811407711 -3.0987534793945976652 0.8011603417829719076 7.959230904294408937 -20.220873476907421207 12.488780949471914639 -12.66721787084435924 -3.4346692545967743015 -23.081886721740946911 3.6531451638308478636 26.278117240858382075 -7.1621727488873911938;-0.99514556413058641304 -0.37487006721617111005 62.306173842185799572 0.15273208310057334591 1.1763458643701716344 -0.52431743296426480683 -0.93552543926079112513 -1.1833670149689572426 -0.26557759160216781735 0.75805203166033119366 -0.8183367338952822756 -0.12493761921736720732 -0.8975460566347842617 8.8790847866357314189 -2.6697993399610462362 0.19846973267626630277 -0.045148952621472518421 2.2882182296343547279 1.3997819904298507421 1.7125854624318401775 0.22995322935151518706 2.6519696768240828 0.3951126079796454249 -37.702002833622891842 -0.4869070431441052671;-11.03576671319305369 16.757153530980087197 -7.0722693709496207148 3.6120502358512491803 -6.9905571842407585592 -8.9281126175829665925 -2.4437823985956361739 69.921058510095207339 10.805768718067120915 23.691583025507320315 -4.9640838661909993945 51.587536741173593668 27.704087547552159521 -5.2926282448174122308 -0.046232280402640657524 3.9748991930477162171 5.5793925038000287131 -16.377071444893367413 23.058323367799669512 -14.611753143108883179 -38.699237081747632772 -41.890158652167045261 43.185045693318272697 -2.2544108439924617215 22.006579217129992543;-7.6271351762690642317 -12.840316128257580175 78.849655162122587626 -14.653407401431259416 6.2677342584790647351 16.398324850441596823 -9.1467189220289490947 -37.664369490085178427 1.6285747404031609697 11.129661103757666041 -53.658227728553853808 -4.3854781447388404558 4.5424424930327758076 -5.0484900193921085076 -2.4473243547287708566 -30.984167785843638399 -5.3469671348342302508 -10.321557112794506494 -12.523544785069979923 19.442061005982473887 -11.393448508373266392 -20.489637646166375617 -26.143214157597736147 -36.079900410320057347 -0.6917934657324058545;-8.707767295847935074 56.96206189680094667 47.246913505116964416 33.304774315935368634 23.837899477852438679 -7.541407680259854196 -93.822498784185668796 -48.226258061390147702 -3.6172919878677300964 -14.33600119418215435 11.316638979926167963 19.14489555603794102 -16.107338716148223767 7.4717397712165780632 -7.5330694586225153131 -27.12419135865636477 11.541399475987066836 19.563169323665885457 -11.589611970940460139 -44.161991692530342846 -16.050007822335459196 18.510835579962829911 -21.989427387198173136 76.761899559819553929 -106.51344450155573895];

% Layer 3
b3 = -0.60878430087173873719;
LW3_2 = [-0.0037248573168084646995 -0.83424986981510840245 -0.059767406414331300524 -0.0043908660635624896865 0.035048162272091343272 -1.1964653712422699261 -0.0021125802773200984958 -0.010158708435212274873 0.87704313770187258825 -0.0062094901016635419694 0.0010220044236629202521 -0.073092018098623562361 0.021987068524663744978 -0.013234785254730133466 -0.023025564963275090002];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
