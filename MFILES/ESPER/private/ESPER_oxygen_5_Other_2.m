function [Y,Xf,Af] = ESPER_oxygen_5_Other_2(X,~,~)
%ESPER_OXYGEN_5_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_5_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.6911032192833364007;-4.0001567365368506657;0.038661623395024276306;1.228501049976163273;0.94232633287577116654;1.1320892320011561871;-0.61367469787222905797;-0.37253982746699038087;-0.74410782297752475767;-0.15370662003244867089;0.6407896120968619158;0.54356796627611769779;-0.54362397137778162293;-1.4389342380288783207;0.63645535469843328436;-0.046830568269734071385;11.059143118176299581;-16.436802218201727044;3.6222079161353284427;3.2551972053119362371];
IW1_1 = [6.0602853085411165779 4.2660172229659929499 3.215268746479235773 1.3191558943868444409 -1.0513453330937951868 0.80955679303447991568 0.63163430900278494384 -0.62572629957871384043;0.18834049576411801552 -0.47060992044044652749 -4.4781891760247791723 -0.86004377003406562441 -3.3296456467947193048 2.2324293483217116929 -0.36116170590366158955 -1.6462474674758371673;-0.031062930850871348087 0.17457612215757314922 -0.24017706602849611675 -0.21200342313013875728 -0.94313841780813678639 -0.88895516228485915722 0.77824737083301742668 -1.0132450857229349239;-0.24363573585144757128 -0.11207935060780505054 -1.4685336136422393327 0.26067344550613857912 2.5524387156798655774 0.18962437416902774845 -0.0066181574537172473127 0.89650393538975370333;-0.57361683630184290283 -0.41510202876189861154 3.0036293787665599986 -0.9651438232744282697 -5.0808034830626889189 -1.0353918015079550674 -0.417350171699542416 -0.4290194095962891474;-0.12750260922518696916 0.1743204137749863325 0.32514190193729514133 0.4157926336220705843 2.9598250274810022908 -0.34675478665569547942 -0.74408171345638229877 0.67911222057392461871;0.10440041914505331089 -0.03063311634639562589 -1.2284792472807151142 0.32825440992331200718 2.2174423624126440302 -0.52183926628251009472 -0.21264138000658849847 0.39542401338207544548;0.26673566650732433159 0.29248067268950106445 1.216893365156057838 -0.1844347257097108117 2.8177224090245043264 0.55715809448730291287 -0.76834053461769735716 1.0917414811195875757;0.03031960342170215289 0.18070034642062157704 0.32327757692523367838 -0.13844324178003708514 0.32120050302823033306 -1.009571862388539909 -0.092221078882766593932 -0.5680488702427588521;-0.27190645002359181692 -0.13694650296001503742 0.49436391536684187731 0.037750200120908565526 1.6982213252927349512 -1.4068113558947703545 -0.32184441768334826062 -0.15193035965417547861;0.18972024550585867009 0.029987228785579359697 -1.003666798752535172 -0.034131114149495093979 -0.67882331048921662475 0.50631676872224995467 0.052179863462641841443 -0.38826722506737071372;-0.050080206130976530343 0.053619027748030269331 0.66850714705767555479 -0.10506214998811191919 -0.84975828488429971941 0.85523887656770014587 0.16878843474655680357 -0.23851855579244071737;-0.098105797873236283424 0.11322658998768565797 0.45571688498314394389 0.17998265163839571867 4.3479034122024851072 -0.19755237302549949474 -0.37231489681791984925 0.26279164452799669283;-0.17980480641730992031 -0.41570746918530165903 -0.6324383829709857574 -0.068460523560932920462 -5.8488533638419006877 -0.44160631671922950803 0.56633063563931274054 -0.37197896224544352295;0.38997093553368628038 0.35538490889372953419 -0.46033050801875807778 -0.077856800847521223652 0.62103134643992730091 0.39222578482135922462 -0.20656094873237659804 -0.025145778452678645143;0.013176393719632233797 -0.22265748803329141192 0.028391494553901858167 -0.056631562210148519987 -2.8555541256173131437 0.54435521998465430382 -0.1038709501655123435 -0.10961850910091658351;1.647732363557996127 0.85815366472841092538 -0.31262439428650867779 6.2577966605072363748 2.6040307469092440762 2.0065330717377407588 1.0931791048671886113 -0.37606472669236934436;-0.081176169919187843305 -0.31495471492827148419 0.69969008331750326413 -15.585583711527899453 1.0129423152437597722 0.46907638488777481101 -0.63587185755929931386 0.027657482660252155626;0.14792918124477269504 -0.069065204735908033995 -0.81376405883926405949 1.7073849184871823237 1.0986682701221559544 0.40808155310593580145 -0.50478928497606501136 0.6246627977327112724;-0.030256702223378052069 -0.053103950413712304457 -0.083320155714065563535 -0.095679538392346802356 -0.20982571803313068703 2.6211208758134700858 -0.14337122044516578678 -0.47799513212968458564];

% Layer 2
b2 = [13.923054307554345144;-5.7721117378597348591;-5.4383740139777572153;-12.793936760076958237;1.2972859441789572621;4.315358465595358517;4.6964052608032469394;-2.8360498931682478485;-10.770438098753071898;2.1804583270909145831;-10.89424526318900277;-0.45384222462628165395;-9.1867684568011149793;-2.0417337058146789452;2.3560084717339830895;19.141903344743628423;-7.6802254364394544339;-1.1992854158592347602;-5.6639585676580139761;-2.9226735344641090464];
LW2_1 = [2.3393166588178537779 -0.43948071698405499763 2.8113879884076817817 2.4212029768019700526 1.7929985375229031686 -1.8679494658025590503 8.8351376755022688059 4.4073896797788210122 5.6667462406362680838 0.040136359752502778764 5.0524167866939677651 11.372050163096515618 -2.5423893242973099049 -1.3146140973529416573 -6.308240597069684874 0.92998263508356271423 -16.591066908045924322 -1.3428738502586996528 4.3560387339420270081 -0.88075039999034143712;-7.7582312816541270095 -0.62816943733578156639 3.104753270461615422 6.7825268018422253391 1.6813839675862851664 -6.8370683275863948225 6.2732505192166545527 4.6356850173519967839 4.1490628537408964505 -1.562298946291577062 2.039665582909458319 -2.1311810957241021924 6.2416868891908370287 -7.1036463508659002386 -6.3789625536640581771 11.109912153127750045 8.6530874062880851483 -0.59084724352486761578 0.56385249160245154432 -8.4520799936536192831;0.34137752583112668248 -0.80402949557599756591 1.2713671228314200601 -2.598390949007086892 -0.53734672812650818852 1.5076883742959565904 -5.4012060491523463668 -0.44716184149751486698 -4.5010327879721785393 1.7608605361125921895 0.25477930207012278174 -5.6744298110164459459 1.5123332785548577739 0.56128041139659989867 5.9922912580157881024 -1.9911709727942432657 -0.85337544995978231732 -1.1731271932076248188 -4.1436054579797678699 2.4342691227655786079;-4.034459021332867934 -0.67291524572866756593 0.6220237803301612578 0.97824584851107010408 -0.64169687499969563227 -2.1838267441250742706 1.9118700056227755368 1.1580405007134306761 -2.0997375004224068107 3.6569504123983023192 -2.9856321768467894984 4.3480560981320479641 -1.16161229712323677 0.19001359048919289063 3.5385360001170371724 1.2145122041515756806 -0.66307487380034157987 -2.75046147285571152 5.3877760581166231901 1.5262240459517091296;1.4336755431786765147 -0.27911163924173992834 -1.3715617697495690042 3.398851730860159126 -0.86833225283418857821 -1.6270492481627161219 2.0855674649714037727 0.26814907587990621796 11.353333885685811921 -0.56307801944838098418 4.5925839518417683749 3.2079970625683205121 1.4699396734314011947 0.25182474490316086868 -4.9524138497785763491 4.0738312955489330847 7.3175065596449568872 1.5558101209242658491 -0.75240747072692815145 -1.3790013739353510491;4.0745778004004309381 1.9778191235965569827 -5.6640715612651213462 5.0727385514130300947 -6.223360427531339667 -0.3346315785205793425 -7.1457932315788914579 6.1761848349537240566 5.8923810949358186306 8.5986349184199895035 3.7715084790842978713 -1.35759123507046775 -5.9414438026168507889 3.7653023492927895077 -4.9198224567589514677 -5.6863332060672311385 3.9289450543604376165 -3.8265733848121596949 -7.5890050060793852182 3.7768797617961795687;-1.2924274694278232722 -0.20539075238340220864 -4.3756962320596342053 2.6005016318249198903 0.33332819635287386228 -2.4896325800039864617 3.0979137363614417389 1.9264132908205899852 3.4947791636274221361 3.788665170981222019 4.6570057947093728146 9.1911539832848916376 -4.0295309712159896876 1.8525553220648376396 1.4627473824028669469 -2.6370022613903039144 -2.4602162079190428301 -1.3042082186373777919 2.1463391197964072354 -8.1710592195902300716;0.91622393318791706118 -3.0284669035066706932 2.5261262591034081559 1.2496270056188794051 -0.16146695960748400078 1.4655693424701257133 -1.4931433935488187537 1.0040579378356122575 -0.50320426241830462644 1.2085725293107298928 -3.4494070307964954658 -2.0213269530765138882 -2.4263571224759052924 0.16025057807696418966 5.2280754619015743501 5.0169479729096178033 -0.16310172122068425371 3.3889129303711449381 -0.073234923185155190173 0.97552913510297012412;-8.7241379126857019344 -2.2470623465335992641 -6.4960165861966912004 -1.2248374031599074119 1.5035682787582174136 -1.5916178571025645372 -9.0034495709263477892 3.5549894087234306106 6.4447451105392756787 -3.2497835853952881102 14.920403125417406542 -13.358719891404382096 -4.3143181654514917156 -5.1111078566251064714 -11.139070503781532295 -6.9596359644327803196 3.0338091472520933856 -4.229219698464590671 -13.977512244114359774 10.093633713112911465;-20.356621095346746131 -2.6859556370458350649 5.4504033303008840861 -4.281701597914109314 3.4686400590191022175 0.5748418938539212597 10.66154566829845507 -0.17129598979602045361 0.68641906525935758587 -5.1410445575541050545 -4.3662035306640385457 5.1196465844544487567 6.7631644899430929385 1.8630731866786871542 -2.4668597934576430575 2.9319327639171897104 2.9669222674954225383 4.3658100996260005289 -9.4407668703698277568 -4.1844055491574012606;-2.1348417283710707792 8.0515823002660020791 5.3276990269646837817 -8.4648336332072187105 9.5292527432024130007 1.6720450342957828838 3.7515360731411293571 -1.2046640318366406142 15.943066139043873264 9.9247279165273436519 -1.2864766503031626055 -9.4017766109427789445 5.7837795893504972966 13.313255239110349137 12.88895649738524618 -12.766539632076293387 -3.0308941419584831678 1.3173037352795455845 16.188920291748161162 6.3118200993507374008;1.3717743809440010594 -0.69934853954025544276 -1.7198159363048275416 -0.29813240270296220702 0.41908852974804811087 -2.2161370080714792863 1.1532800381288239588 -0.049175965948627761715 -1.1818062373771685003 0.86805861795129279912 -0.92541279931478859222 1.9443348512027083252 -2.6094554476010358712 0.044252512440989121012 0.73522242352632027895 -3.2208681877640135127 0.63995059036659063256 -0.92523498078485677532 -0.70255137533465727984 -0.42204573877031437146;1.1565754885664187857 -0.5743380628484181516 1.5814020743982259987 -0.62948337849360047613 -0.93544282511774989874 1.1150294577355273073 -2.8025252931390824962 0.067414667345816733923 -5.4792437157983551188 4.4541140508594416758 -0.95982043295653918236 -1.8302425424728647751 0.40506655544080405473 -0.63101534887802879226 5.4166635655080623835 2.5359761679485766095 12.587281494540118132 -2.1008260446078663719 -6.0015552261517690624 -4.3731398080146846041;-21.615345062916510699 10.026317756354309552 -1.1070299572867445814 7.1602083983952615753 -27.881523667969670299 14.365472397682617967 -2.8648810979906706997 -1.7269336942556747783 2.0967350714226666852 12.708309074353381973 -14.692912175165094624 -9.3808460300685450051 -2.6165171941258051902 1.6403958835695258145 5.1471711773310531157 -11.34596050977590842 -0.47417028385232617982 3.8833974297039968171 -0.20689150221953053754 4.5184531419661757567;-3.993488879621547305 0.15885487506224993393 3.6230586561387969624 2.5362705928942665956 -1.2843050442176195958 -1.0911600222796913329 -2.3566669832702848986 2.2370391567264520383 -6.797516027323381671 0.38998718969924489608 0.92106636782015405274 -2.5705987044695843835 1.7751172569900213194 -5.6879477097248480888 -0.88452850138064975649 9.3878207042125136894 -3.2405802228981155366 0.6404536370653632904 -11.45392796430691007 3.7388023429833512346;-0.91601410676780570252 0.21562702723407836669 2.3897412159751842964 0.92478962056237423717 -0.73647044405956596513 -0.51362240758006150187 0.52897025267860742215 2.0907412185234206525 -0.6739647331060473201 1.0625550026501853207 0.29112401986525482389 3.6008214492592292011 -1.3287365272977695874 0.58839775757417589475 -3.815827071610857768 -1.2545030312858957977 -12.22513272016339414 -0.013574989578745649474 -8.4302474654031414047 0.89303925852131116336;-2.8945567991896496984 -0.5667119893989787105 -4.5096651515278658451 0.7103310868034506953 -0.51683480549588312059 -0.95795093087209004512 2.9137386877947295538 -1.8252169264541522331 2.4149927820582011151 0.14708823807736787215 -2.4454900650591326894 3.0883478122906056207 -2.9857177037877020709 -1.4880132258566425296 -0.71224569967429407491 -0.46217983062150108653 0.44233375105831951313 1.7811333562101665517 4.4427157891236452869 4.3460545884152681495;8.3591924031665882922 0.41201242637255219847 -3.5021561218860366438 -9.0801075440984035936 2.8616354873628480071 6.5661710861849265086 -4.1304974310281989958 -6.4689848819724478091 -11.50389728609533968 2.3309282847213372847 -0.6652911683006658139 -6.8872081071447022182 3.0614487556998111195 4.905562924431247751 1.3483004585795899111 -5.6815057863792972626 -13.247289172805190915 -3.0026072503188450113 13.511590021223666369 9.5311711249181296779;-10.72603175186391411 -0.72883717887512144973 -3.6378877222531453839 -7.7315793039155256139 -3.4050770080371730586 -0.14905426530322671286 -11.632417118834791125 -3.8789006399081031873 -6.53578409543020733 1.9620368429322250226 0.77332897922914034528 -16.18191571301377607 2.3844778048347738952 -0.79777486314673917711 2.1883371738831103315 -6.1047046214743154735 -1.8478798086522612021 -1.10134374879199326 -6.1056639352952748467 5.2070558186149700219;-4.9983864768153347669 -0.72878476504950973069 4.7614635896910355584 -0.43700360157766526825 0.0012061715679127600273 2.3569844832801751799 1.8303417526860177311 -0.47914400489620040391 -5.1582515026783646306 -1.2812937992841515467 1.8691855308650360268 1.0647893242564556715 4.2361871708419016613 -1.9571382669169896662 -2.5165832144281861105 2.2754585114055618789 6.5451434354223190226 1.5041182066703939757 -2.0935910651461502319 -8.7562506469593621716];

% Layer 3
b3 = -0.6057871037937927472;
LW3_2 = [0.076042310999543824557 0.061938974380311789814 -0.47393918048614303018 -0.19685694755933777489 0.070089407416383461835 0.019648086336198841706 -0.087274486112603910648 0.054513149183033245138 -0.027647360625815020629 -0.031966540114579528042 0.0063047877259819291515 -0.50603414427935389241 0.1150894497364504665 0.0052833699130400441774 -0.042201604684887067398 -0.077893695667347384592 -0.16856058500542067669 0.03756794341391872516 0.096870571588649895256 -0.093569174025872670075];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
