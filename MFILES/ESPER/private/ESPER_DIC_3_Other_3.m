function [Y,Xf,Af] = ESPER_DIC_3_Other_3(X,~,~)
%ESPER_DIC_3_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.8649541218094940476;2.1214008993323076879;3.9056172246104838841;-1.238310913798676749;-2.2811440561372609004;2.4829053843795931833;1.9967998733345579954;0.97566940751412201127;-0.2811716319121558838;-9.3292637916079446114;-1.1472014584181300378;-0.67190658808036407557;1.5478407621795688964;-0.09147059304611852848;0.8043429054513842047;0.2126572605657708892;0.50413827850105064066;0.69842368503627205722;-1.0000155574770559497;2.0698245408376934051;-1.5832179096608631763;0.54758850260021996181;2.4801218519631516024;3.2283990254418055699;1.9814152948054986059];
IW1_1 = [0.16285198860331095982 0.041540350649660912064 0.69820043744702930955 1.1629383314044396958 3.0206222188452280797 0.86753804454190719397 0.28460554436634172282 -0.091021884780158074379;-0.42795770630220231201 -1.190492079248394619 0.080326810255233999092 0.3358282247119083741 -2.689772880730572524 -1.8844199521639812822 -0.94774087614870250462 -0.069427054819960531962;0.22117972894042256526 -0.14006438387719793992 0.60139338775416328886 0.15963531161736033148 -1.5836519172078216133 2.3106182788409941331 -1.0517047814159037333 0.58509525590495237157;1.1099356972421265954 -1.4246970584974154583 0.22397339234033492028 -1.5613253497050683105 0.26080222365524613481 0.24645411247642684538 -0.80966646383362639305 1.3539350276905921522;-0.15817236509098681063 -0.2157746598725596987 -0.7158613372489384119 0.80372705029391011688 2.3618530093325276198 -0.7987747990720678315 1.1703637233626469349 -0.4599910896862141052;-0.10274364368519241231 0.01397926342833033693 1.0733229088006432939 1.4550435179090535076 0.043262761909538219318 -1.0612644454180366616 3.5725481996481374125 -0.81443296465393932859;-0.043176497327382615254 0.0025361936267886998897 -0.20095167253987220035 0.6435532016349428952 -0.48127692739145633283 0.88326161574800277076 0.53513442036375091782 0.93177581963299893619;-0.82698183892025500796 1.0361979964059837567 -0.44584317815874319191 1.4308682634788836285 1.1278935673160281894 -0.101008082793104359 1.2604331338080378977 -0.73618971852615633367;0.18952408778171220272 -0.12856373018863859192 1.2684888067504545006 0.48644807783481974761 1.2890179907051739772 0.13061584951107879649 -0.21197658294208424068 0.38761225183838360353;-0.024663610022604798983 -0.020316723610892012397 -0.46683683091155059319 -2.9757014238228962633 -0.40724221439684482604 1.1008035628696848374 -2.1223462030964692637 -4.5986147887775157272;0.87366735821609942114 -0.34032282764837956668 1.8732012342953134887 -0.26722120715694641646 0.36522142709531668636 -2.6362938471426002884 -0.94867032186457878051 -0.04123024090674282105;0.14101987384142372628 -0.26829291715134895302 -0.10547473347231560437 0.43844442101356978503 1.3883563919284072075 0.33490509606651158725 0.23915918482074632889 0.20812711197731526003;-0.14937951768425178356 0.0055866479797319528247 -0.44437782857849217333 0.69053396365786279265 -0.80478629330102680051 0.45364928397635173596 0.83508375085399477733 0.64026630452025545814;-0.039596273120595999739 -0.086806714250709640646 1.100333388018561509 0.41197656884249100884 0.77901598116785930603 0.21718210778218380308 -0.0052208680994931186414 0.40536909513426799823;-0.028833564838953735371 -0.093222150093779876379 1.0159347426887286314 0.41502466173380225811 0.11372767154624413566 1.5411777630311338516 0.70985039743097355647 0.9585003752489156259;-0.31513325812716552754 0.064527945812431458661 -0.32638355875290153696 0.22502840943263938134 -0.15774403380033871769 -0.27911081147748545428 0.45256814892768221226 -0.030886457426760827172;0.61844107970639328187 -0.78796817298786170358 -2.768380806017008755 0.75539827037522344622 -1.2912120271442963926 1.0840901255676800297 -0.54475207872668396369 -0.29690231591844623571;-1.3698062541399116387 0.32127183685551208292 1.1542280553567321189 0.18020318915465297072 -0.46214921018769661298 -1.2101824261807780925 0.91259210641420640542 -0.14302976985584775482;-0.33699016204253601225 0.31212066020723938653 1.3093404212602139935 0.37646588174249773218 -0.54110093542791570798 1.7160418288229590811 -0.45017295098761650474 -0.67507380770732994257;-0.26307459677352157401 -0.71817324951285654855 -1.4173229855447451175 0.7202061527466627755 -0.29614348389442912701 1.5642157185343088521 1.5723362702394387824 0.095916135154382450856;-0.82264606151426444836 0.078406610150697955697 -3.6157328280242571061 0.46879498660490109829 -0.41014154085750892387 1.5825728887880070594 -0.78862906770171969928 0.014871672572450485295;-0.30619904517953411283 0.058538928587903577005 -0.26479242063915425787 0.20358183052762687804 -0.16432492376753876639 0.64253759397053067381 -0.43186929724003203512 0.0688875585373975724;0.4991858561583836229 0.03440681188030816906 -1.0749355000080003109 -0.62865249792163901965 -1.1090490537752808464 2.072801763409209741 -0.50997404447521366144 0.44254406854641570312;0.19509232585986346908 -0.23205748021622629729 -1.7504405987062463534 1.2236047408946280068 1.0624555920433167433 -1.1265657184821638026 -0.1140255922159319063 1.3689930701877197627;-0.19717363625046716025 -0.37394542453592122255 -0.45362602884075209353 1.161766706272858718 1.1797564857605924438 0.54501790257737536827 2.5227162143922106097 -0.3883031582942557125];

% Layer 2
b2 = [1.2495911581211385233;2.090201318706517597;-0.8516067611316101571;0.080099182598342005823;-0.40055492548416782306;-0.88326035121294677044;-3.4758982857014100176;-0.36464355661134645326;-0.26957663096789596935;-0.80256579781177350696;1.2936520419566392981;0.3723350208979223086;1.2131604915189040383;-2.8661650959696247654;5.849518393942909178];
LW2_1 = [-1.3228612781317365954 -0.40256113188984143925 -0.28130746049059490721 0.43109997558023388509 0.078740840241729073701 -1.414836091155511566 0.15684279194600214691 0.64459492476098589897 0.1053533901185267907 -1.4054413019772220572 -0.071989051509635040849 0.71056473356848270928 0.33077588464914947641 0.16806863205282193685 -0.37674295556536940843 2.1429105516822986033 0.60171901016256712502 -0.25779932060135918315 1.1442128222549934335 -0.97741194190537816766 -1.1335634398475076257 -0.094870443268103885059 0.21008204645930877996 0.8575624838635863556 0.87620830858026921284;-0.78833944365446795288 0.37585531251856912904 -0.94493858571455435769 0.15268498564398330641 -0.33517445236303655687 0.50347862049588043565 1.4367031449759211092 -0.42598938091065408074 -0.87204225725114015155 0.59484782146110715129 -0.15903213812108868419 1.1163765157408880313 -0.32601519517583693597 1.2787402776966840801 -0.67599739499893796157 -0.99481037339886679849 0.043825303043338245668 0.44115294825071349472 2.2651706097252297667 -0.68915724878397000008 0.53976184201886201475 -1.4736161399426526142 0.34358400885551637627 2.5861336318658203481 -0.29671721857069427442;0.74597508471617690606 0.058581180970372959127 0.41641355558138259951 -0.24494684194377619457 0.21981259107951170439 -0.71590519773398497705 0.63444149796642923533 -0.16816304505996801377 1.1759288931094515895 -0.90457467292312587759 0.26287934598852674695 0.036664494802401449702 -1.6551848517695888496 -1.2659728454845708967 0.62150677598865078366 2.5891334963476024811 -0.12277850853171817791 -0.45712548721503215576 -1.2343225425003447882 -0.052090757846105312234 0.36702473438139726625 -0.11534995097149952636 0.73773332910734679135 -1.1473973107340249555 0.25623988460963847968;-1.7624090404207735094 -0.08491840687049859171 1.7832697091001661338 0.62289237530498409168 -0.85365162430253260784 0.041608134979341800108 2.0556074540475552936 2.4156513738590730256 2.1042369085571595022 1.1317292132689389383 0.28233200865341262498 1.8834055313894708661 -1.4785783212411636178 -5.0486760065405551501 -0.27851701884830926126 1.6026278144040897455 2.1488431048603109375 0.44481781338289133609 1.4190173410932669373 0.14154557070799689278 -2.1195502063622888578 -0.2975336590474556564 -1.2748377768389405063 1.2496333788172053758 -0.45116030854586947063;0.63804766853831507145 -0.1383618338038860307 0.52436984577155187903 -0.31559202738326519455 -1.1931012584657272324 -0.0083586667298452405062 0.99607122391670133155 0.22604527398747525924 -0.80384431984819271211 -0.60551952908248862784 -0.27076637288872940079 2.1863821262379539156 -0.39840124336950449857 -1.0534564421030239156 -0.88328093497600967954 0.21035220107643348708 -0.13608139435705779441 0.39500076272083278761 2.5370787044014200262 0.044647450283717388109 0.81146274003163088029 -1.9388867141574215314 -1.3731877993582282116 1.7766699738564293298 -0.48278255539030645593;2.6166995079929846746 -0.48412819183817840107 -1.1531527391846891906 -0.62920834661129487753 -0.2044506721636775437 -0.6295368356417708755 -0.90097679249806983393 -0.76378227861696412759 -0.092082233764724075176 -1.9200268244112823623 0.73570476858425082334 0.23461039132691191567 -0.1911795100762541666 0.63417701491893030408 -0.3333631780691112545 2.3574299433826180206 -0.17962920036303350879 -0.84949910096038994123 0.31918830825962557496 -0.58062026458579452104 1.5432750503085295168 0.8106884162172671715 1.3132400402984121257 -0.16158813040779509973 0.37956861347987852495;0.45710271624572179627 0.29785749398672428656 1.8186290850121231699 0.36283747544492245263 0.72312580438283513562 -0.076438974807974208181 0.95111926742671892843 0.0095293357509238247466 0.40638456782009940715 -0.99381421454810825455 -0.076576673443092616034 -1.8889832537071999941 -1.8974633222693761958 -3.1944818269019839008 2.3338955267448935338 1.5602745180514330237 -0.16085706885096723306 0.31479233156220853829 -0.30420535245931240587 0.014646099351449904866 -0.52267543591575993389 -0.5566404195222828255 -0.89537593567610340717 -0.27179709858741024631 0.078614313469194743722;0.93053789180475698917 2.0523765377331431026 4.0153400821078237826 1.6463929511258736937 0.17918316356258756628 -0.16585498072224116872 -0.63286307216585291346 1.2320267981290384807 -2.4128095464814078852 -1.895482398704539273 -0.15049063579171123584 4.2439781131843243855 -0.087399960613965238521 -1.7007137682609734242 -0.053371999077734808004 -1.1914849430477636449 -1.0576206151414397905 -0.95579846733853246477 3.0138307806086572782 -1.5360925090387784753 2.0685694631311184466 -3.5119755263348748642 -0.63873226460853371744 -0.30856547660649036313 -1.34778872292446672;-0.66935036781678891593 -0.32511784313350317044 2.6744775058723768701 -5.197231905427263321 -2.0956354882793921668 -2.2748658069190135222 0.13109090487545824177 -5.8580967285932592503 0.37274747677774361376 3.5692220936735781223 0.33929184315810367867 4.302318633648538615 -0.018250301647705444857 0.20740007188626824464 -1.9176324097105288402 1.0827393379397696194 -1.0230944126288583629 -0.90303410304116238372 -2.392404930200220381 1.2569508711059258488 -4.7354312747526128291 0.8315596386957140318 -1.3948802311976946644 -4.6174023527266863098 3.3462289784911711799;-0.66596610516041110372 -0.19052799500650169362 -1.3472241144234882171 -1.0529165363073518247 -0.45711084204958374322 2.0854691026143838961 -0.34444590571343430829 -0.8151049269511932982 -2.3284174673647259901 2.4521410576031135164 0.8328036176021088588 1.0944862108665311951 -0.59030597256376626802 -5.4778040357993917908 2.702746944467885104 0.58777361795373406217 0.11291281292083529819 0.47505418145797873031 2.0248713314344577441 -0.81040686133065631402 -1.0247212264401788229 3.6860415189748740872 -3.8023876096108666367 2.1804761695227763418 2.1458420558373267895;-2.6801512213925833272 -0.078743755430285958252 -0.49948814070619118599 1.1033724123336419165 1.3062097264317487078 1.0003979179383668541 1.6408814681637644561 0.65424577673302641845 -1.9763990128509107969 3.012397634717686401 -1.0032627239694213994 -2.2792932523524025434 -0.53912617110881910776 4.8158187038478104114 0.90878942955180663787 -1.2343451278177981489 -0.1772397289174199031 -0.94566877778125746357 0.94644281308347244508 -2.0021126621354490283 -2.0636862854469604223 1.3089441012914997398 2.0129099742057694478 3.5421676831385422446 0.71347333220282282973;0.38852122477448192139 -0.40317123693980533305 2.0970774362846582584 1.6967232808570933411 1.6819392314190937388 -0.21396744857947891383 -0.20476926778994666845 2.3231072006647437433 -6.2851365232064937416 2.7420941271559859942 1.3324430525565524874 1.9317861575183055134 0.95217881120048530885 5.7010200530340240377 -1.246412569204322196 -0.85061828844349518519 -0.86999491682006557802 0.23240146733346894736 4.0461757713579906692 -1.045417336886861337 -0.59713436720478174635 2.3909591562432073175 1.510927905285902817 5.9657429585563672703 -0.39529701564203351127;-1.0618215381355018412 0.53253255490852002829 -0.56069300710450897807 1.1968568673481867481 2.5566825757519722195 -0.3968554727010348282 1.2884625614872231569 1.0539748827809287679 0.13838663810529489018 1.3686594586991824851 -0.0021001244829427631253 -3.3759517089617792074 -0.87191550420028507418 0.33771838700837980562 0.5636440667229066781 -0.48782859932057393015 0.0082052993344092894218 -0.0042406013028526154743 1.0410258711706494861 -0.91171373536652255964 -0.1845111170403354317 0.9536798020327306169 0.5467139140876818848 2.1933324111009895319 0.55966246199616687118;-0.26748398141090756752 -0.23632375667186539259 2.0709066034701240078 -0.33555553458417070045 -1.5666613018691437631 -1.0523500815916944084 -2.7586350530317407248 -0.63938694452581379402 -1.938596844505858563 -3.6892461503770745956 -0.34457573814817671343 3.0762995693322676694 2.8566854206912148939 -1.0292085598663773816 0.72661366237395785816 -1.7598177470556572999 0.04248321566485631362 0.81343050597473087748 2.2684030225954190385 -0.62548342149197566631 -0.33915750979114372976 -0.6879369603363213459 -1.0018206452001126028 1.0083660548974853199 0.97169504727512656661;-0.35095114683481459794 -1.7407783923423736372 1.6625191279878492878 -1.1744166465252425802 -2.8154103149467561984 0.10035823033996028875 -3.1169910519638897028 -0.087851586750570392903 -0.78741641772098436292 1.8660444504212148065 -1.0114414889439367062 3.7452982351524783944 3.3414660376058602509 0.39525454976285540054 -1.9566226991646264999 -1.5488644090252352559 -0.26667172480862288975 0.49334975716039058957 2.2389431268192296898 -0.039129908718638140019 0.42431697048049754617 -3.1516621095937353836 -1.5944217298026690521 -0.046288157567810905846 -0.80678390847657732721];

% Layer 3
b3 = -0.063189291969061589516;
LW3_2 = [0.25126308791481927196 0.25429892088677258366 0.59505502346770322575 -0.15864524843689678524 0.27941061449172416298 -0.15610403661208310799 0.30640755090481902601 -0.030164003332727413326 0.022694527494550659902 0.067420879543091408181 0.069583292653346895396 -0.049102925742806065312 -0.22519553810257933457 -0.20821702389682811285 -0.11025770421030307855];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
