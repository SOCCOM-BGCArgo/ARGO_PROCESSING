function [Y,Xf,Af] = ESPER_DIC_13_Atl_2(X,~,~)
%ESPER_DIC_13_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_13_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.89502346183222625253;1.6009700976493854707;-0.45954349959221657551;-0.058120633283121329871;1.8191517640844605541;3.1464745790412398385;0.59890159172814727562;-2.1538660248719030399;-2.8464068160699973475;0.10078798721496377844;-0.4881892597057315708;-0.78118152975832833018;-2.3888918965991927656;-0.047357342160508852924;-1.9408213634533808545;4.0256636391478028969;-1.0094951030962642236;-3.2629611981127153442;-0.40388273105118654982;-4.9977584356197857218];
IW1_1 = [-0.54567412404470561071 0.89019042664412073584 0.33819787521469180103 0.97598273698607207471 -0.20925648137314303843 0.7771593194882759903 0.049729656449852291389;0.0486449849884904445 1.0166466514205367844 -1.4964624110799733536 0.18862045900558602196 0.20099293393558564924 -0.3603756816535177987 0.10012296019853633711;0.5347580780399090461 -0.94029084338310953139 -0.52087632903132807805 -0.99453132354785256375 -0.18660453136328306045 -0.86281632145752407137 -0.15132711024148631784;1.1598682400644368951 -2.3020120170876841037 -2.8320223904094019574 -0.71857083349882033829 0.94767620773279737101 0.62103852612625698448 -1.7401356643865930618;0.44823718402192669341 -1.2184416404020745883 0.13161062223450942232 -0.6448359373017368279 -3.7955288549389321062 0.68253102077329497188 -1.1542331494428668126;0.0771627632784848555 0.96096658524457090333 -1.8969814791983405922 0.18230761540534970444 -1.1305044601674307803 -0.20572798868670244543 0.065911628837917235479;0.022898765709060742157 0.12908974810082110563 -0.71741836571606365514 0.93029954674644588231 1.9819746446847974486 1.3154461068624683229 -0.48052369233188468867;0.33953615837971584668 0.039854054367099239764 0.78964734649448742321 -0.38278540673532424066 0.036341941778527266094 0.10390140316831011913 0.1462402700811588907;-0.036993627661542724527 -0.02689634809216696204 -1.5082719087128311219 -0.18635359198329431996 1.0349046113021229676 -1.8510479595997997304 0.23011594817890113074;0.2640783033690490833 -0.019337391848834161595 -0.18083709081572885147 -0.38939756558513005658 -1.8858161532230008905 -0.21922860764715598747 0.088306499001466587373;0.227086669310392536 -0.59281573242699636683 -0.43840305750504310334 -0.30359619177436852899 -1.0633174816191568457 0.7771157718454478891 0.025134089277953564762;0.0025911834823020597762 -0.23089679132164594999 -0.73135494378400556226 1.0845979972287600468 1.6428129984794255236 1.5365287950791386429 -1.5177390625409643565;-0.39641521122083533957 -1.9779263640891602272 -0.11707189694225732246 -0.11021962259231633807 4.4491500097651623946 1.552787845054460103 -0.80318145263693563329;-0.34660352091717377965 -1.0700436817752079222 0.62900776399758917545 -0.55074776256047164313 -2.1276007806251042709 0.36440007700723631157 -0.66070376633565397473;0.23414066243584569227 -0.30672569141378774882 -0.93919414392083788723 -0.81109866941998420842 -0.77915385770852185754 -1.1936171750946025227 -0.45273484818646786421;-0.32127193615659627168 0.49148543596550592349 -2.2218096051969045135 0.11247041623703513125 -0.97280625974835333025 0.47714424370689056953 -3.4959102899213991833;0.98598654562548793123 1.8382699372331945398 -0.10977349739535713358 0.8928286709972415025 -3.2704327178389664965 0.5819789506351263908 -0.55711154312575972281;-0.819799512970690758 0.040642138041454577146 1.5335846261979770855 -0.45541682416465628647 0.35538068235437081377 -1.2560767270033534881 1.6856654444943186544;1.2986499917117497738 -2.3846239315103447964 0.19318468354815132582 -0.806832095416430084 1.4325134185984134128 2.4769562768978730105 -0.074500128086757128054;-0.54581177556334892209 -0.19618087293170419216 0.52474469830393466463 2.6686219064479366203 -1.3164789808545787064 0.41023418874144673696 -0.0021228191462070934888];

% Layer 2
b2 = [0.28664903028339222546;-2.5327388213780666071;-2.2358354409211225189;0.23833209470573690769;0.93185385435046497182;0.71270790944754969232;0.20463406238602838139;1.3255163676465375744;-1.3305520896608409309;2.9386458210255259615;-1.1713847101827812303;-0.0093295835609153495577;-0.26133524080898717923;-2.6517301664359180791;-1.2690682230400034403;1.6760467709378443768;-1.7283749161182910825;2.0322569746385630296;0.47662785449264949422;0.67653265337618362363];
LW2_1 = [-0.10590347174814700171 0.020857712165850739866 -0.88102461198184056634 0.93042887095528703512 -2.9838066330597401432 -0.78707012583792446136 0.79692909378723697511 0.85748338254225231481 -1.0848005185471389922 -1.4504006886268967502 0.86029651913526006268 3.5337542925609981559 -0.36003665746425944638 -3.1117840251775561455 0.36580007855870760869 0.44620679170845345407 -1.0445559579924135196 -1.8953306361463133634 -0.50090420106026301017 0.73511965833297510109;1.1586114841222956429 -0.082480958911285789936 0.47181235646141278517 -2.4009879771738011911 2.0329561557741424593 -0.61857896976269177713 1.3645878393916077709 -2.8595442494789553578 1.2896102817690513476 1.10877231081314509 -3.5277386466652904673 1.191740407374919597 -0.40198491312617923299 0.48518016328002683268 0.56124797782072288754 0.71703037692377613599 -0.39358758600991811116 -1.8135430152855471775 -0.98373857783999141269 0.11896000428806899341;2.5501231662407737311 0.16520859719542524413 2.7770476960664787214 4.1346440123899350638 2.016778762397166691 0.99812757364568671647 -2.603948323129652298 1.8367641999819379617 -5.1335858859251626285 3.9503078657818790909 -1.1022523092837985814 -1.2775054716074594197 -3.3730497439679680838 -0.21443372802764171237 -0.047739415626603491638 0.43811661996470607772 2.9100789582381758613 -2.477998602578304066 0.17196008920784466856 -0.44080893349543182058;3.6135964765467374349 1.6392117427203900526 -0.46281688516519736698 -1.3888135625027733244 0.88971655749477518427 1.8977404404178284114 -2.6391903911684511108 -2.1973208577354865767 1.5336809045794190798 -1.4333264810803760803 -0.52737054968917895792 -0.34036287598120668063 -0.27172318861190730699 2.5709630760826711615 1.855111065579180929 0.12061442325490159821 1.0636533117484021638 0.028361838299773688837 -0.17797325281514581041 -0.80047947794731455495;-2.774406487456021253 -3.5481540289866058124 -3.4085198889954395618 -1.1890183766035118396 0.21716574826226192618 3.2295101263309216044 -1.1982304358450539539 -0.22969303989499598173 5.593794767379260513 -1.0305572916781102766 -0.12854707617632454841 0.77888922990448805628 -0.6593515215040449684 0.37230568095864680078 -3.3218639962238003527 1.2049212183665993781 -1.0359351012991540042 3.537175008290294187 0.46115944273384101848 -0.78442757435563681412;-3.4061818395242755564 3.4347835774239103834 -1.5741832204004073681 -1.6828864178632965132 -1.9587764558150717598 -1.0614818813665285457 0.22392839130494993083 4.051946679596501788 -0.78997751871347210439 -0.46792079643393946764 0.33963370775854795358 0.76235417265619698224 1.9604048497107959825 -0.18943068011904382053 -2.525192277530216689 0.20802617573996357025 1.1078261803762070592 2.6019232503057856398 1.0658407001633665168 -0.45466389709718824097;0.76755327627663449963 0.47316468466415961824 3.1625890394003066675 -1.5554314339730008765 0.61899689236956889626 -1.4917285149314267745 -0.49836508992696815223 0.55808964169478303408 0.05974540412614631063 0.74096228598014479694 0.13096810664246374967 1.2060572354383640725 2.6761617632206222694 -1.7004089599152818479 0.75631861780268683226 -0.97360539614380947615 1.7198526542026901787 -4.533049444063238731 -2.1379775177130579955 -1.5409728280907841746;0.50928543202258924616 1.7918891882414151873 1.0286232297293538274 -1.349529728882950419 -0.049156600438868422454 -0.1510853670151685868 -0.91802722206739240107 -2.0809660613735303514 -0.93468403622076545734 3.6549410992945103871 -1.3031712469618694783 0.87489928301797381671 1.5653394955679951206 1.3468488851874771406 -0.037224360675536527499 1.1305846521985840614 0.19398914838445052711 4.8050267012361258523 -0.49458941277570056538 -1.3312182834201597981;3.4177727366332768533 -3.1165444042582723938 3.6351853009059817978 2.65582527822171377 2.1098314591295941334 -1.3138290026980097291 -0.76710893776990962678 -0.98455555402067218562 -1.6561394734134073925 1.770681368869662542 -2.770031384940016661 -1.4928537339924152771 -0.20667139006933074596 -2.3017947973774237624 0.52658403116848240266 2.1861007049045646511 1.1641433928554658639 -0.58987757124987150181 1.9737120921132889073 1.3787242481554744522;-0.66016357724810514895 2.4033788525108930045 -1.4403268744052915018 1.9365839120231023163 1.0534729066437620304 0.1459525374385642893 1.1722781070618106813 -0.61615217106108621792 1.5654759790187473545 1.447751337731436605 -1.6045837689755755306 -0.33840394166271875465 -0.95031974256597495643 0.80168245205448340762 3.6478477559106181616 0.038162561793346511108 2.0381322799208949625 1.1099954411099635099 -0.11433587956010161923 -2.0162559432644644453;1.2037467871785114681 2.4045949162348501105 -1.5252613050885273083 0.21735952241049183442 2.5980950449666235791 2.2201365155293215636 -0.65584169839617123543 0.82781347772016922182 0.37827486944460947393 -4.2036386957382045892 -1.0037072115889895674 -1.0484434939454543301 0.55055276592478408215 2.5269113850185132009 -0.52980339170386625547 -2.0651576331613421544 0.7999353675591691637 0.72005184884863093764 0.62987558640123786358 1.4872854357421927407;0.76498678833690869627 -1.1408804961917151655 0.26644261183949191629 -3.5808661519376858706 2.7016107183293613936 0.016754583259347723828 -2.5985070109507004688 1.8753000894252431774 3.3530938421512836989 -6.5080549680479684582 3.5306136896669149117 -0.77108209558308660192 4.689381444763689899 0.30872133835288190218 -1.6734127878972908654 -0.90589495268991071519 -2.7493640011401230261 4.3180725504537793569 3.0585046695568407493 0.16166949822848525331;-0.3707968235119015743 0.084870613150933832403 -0.35813385481491388784 -0.65754676180781690409 0.69256836254087572602 0.88400372830067630581 1.2362691378098245032 0.89403239764843722703 0.64024435476716945459 0.25189214177839097664 -0.060417068422949748996 1.3298833431558572116 -1.7565037502905678224 -0.96909168291513536619 -1.7033019713437418385 -0.19717715191924453655 0.45988567310574268721 0.39839255722159139239 -0.82560028546714681053 2.4779685805169675561;-2.7254820603972915727 3.0224830813194789592 -2.6507291841216407136 1.524718348800538692 0.6416061609166187063 -0.90615048356533023366 -2.3116261775598498929 0.15925460977068797708 -0.091868059406496782593 -8.5841846962676964239 -2.6054389171092253719 0.20802878068625285657 3.2666394811680099508 4.1211889989269971935 -0.89337506984509251762 -2.780707687272427453 1.9623271758518774366 -0.55651282812594249361 1.1054328006030014198 2.6195493490034480466;0.39882857935992049869 -1.0573861051269164424 1.1209142442790038796 0.46043212125618177 -1.8724277811904865843 2.4925074402397946471 0.3044718813796086776 -1.5761013418009393039 0.98306418455399768863 -0.42446540093611501154 0.33807339501208061305 0.41922510419857311748 -0.41089177366403506486 3.1752037825998140619 -0.35032535662788744091 -0.77247069070364726695 0.99304219286082706653 0.020746952393784396512 0.10661730986614445515 0.31446057169798702358;3.5602781615362588674 1.4718006661804381441 0.2681669169585029211 1.0880382126543877153 0.43603166552838606984 0.39657190109314177651 -0.35305306926568130743 2.1454819712217050309 0.29253350239517450504 -2.6582364752343843328 -0.57045227081329152874 -1.6397343138420013009 -1.6944892690685178227 1.1501151691446989123 0.78758486793548942995 0.056229639905517346532 0.69925524022307594674 3.7921379334739016009 2.1379527982733321778 -0.80584228361998622159;2.5984653214912571961 3.9087025497112724004 -0.75106721354118533007 -1.8361178830437585585 3.5773428405644422945 -0.093088972032009192903 -2.544844235930766807 -1.0615158325078326573 1.5590597904356191528 3.1390214192807008864 1.3061995327299900094 -1.0523406014824345789 -0.39528722456613685221 -2.2431057644990222144 -2.6171820254032764907 0.41147457199887060852 -2.3254466247279577118 -1.5120243853348029894 -1.1683181648233478267 0.68414126601912805814;2.4321952477102253276 -0.39909837386329355402 0.85077920402987083914 -2.66595242400269683 2.712739721564019213 -2.2984051264481375476 1.5669843734287547399 -0.31581789649068736647 1.511757279166179968 -1.5458996191384728469 0.27005471067750225211 -1.2206522845160894253 -1.1865911740024692733 -1.6463526593586130797 -0.25387954155079961449 0.38373054591100042021 -0.73062024122533419934 -0.43504648791811884045 2.4690545309615061775 0.68917376896168525136;-1.9503166379608716241 -1.8344911805559933615 -1.5373263290220231525 1.1451483359191692024 2.5527359408994731993 -0.51476420756108021148 1.4408253974772147199 -0.31349383646871736842 -2.7754865811630935468 -1.4133925036925274465 2.0886102201735110562 -1.3712835703355763517 -1.5257618239252344061 -3.2020020165482252494 -2.598908113071924042 -2.581491594437010928 1.0864216172450469333 -1.4082776784501849221 1.4228618692354302322 1.0694227583674222881;-2.1689756758817115845 -2.6545962256906121546 -1.8303693909273386353 0.98029104940440059401 -0.47278389432807826909 0.18186887597252451854 -1.6031642533188295019 -3.4069651778955374333 1.4911486859823985807 0.28019096517703084848 1.0610053533878156529 -1.7223550707582560015 1.6690887510831453611 -0.35027207409603627886 -3.1115280069331583412 0.62471453162474932519 1.1224572199898661395 -0.83117783787318622046 0.64055906172858378955 -0.026828526255840142584];

% Layer 3
b3 = 0.37574272490980398231;
LW3_2 = [0.0016180222681230062125 -0.029627632898618749824 -0.0131466712888641344 -0.051589312470973161528 0.11882283773846370745 0.037471794780866304886 -0.13015518938891909584 -0.066824322228341379026 -0.018047539855677759146 -0.028887534335886987796 0.08258123594683083879 -0.0050933459730720595515 0.64074250764329154784 0.0070250761433005510029 -0.54010809064458409345 -0.18187044409638292164 0.018207942425579843465 -0.12929537803596644063 0.029234576025295392482 0.59390630382805220666];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
