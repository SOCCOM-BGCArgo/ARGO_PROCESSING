function [Y,Xf,Af] = ESPER_silicate_4_Other_2(X,~,~)
%ESPER_SILICATE_4_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_4_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.85212188389799681243;-2.803371181187247263;0.61622976968616260951;7.7464703065616120625;0.55364050042946022501;-2.7061288991188252595;-2.3805239931145103505;1.935934828092487292;1.0907161550726853783;0.40908544415427861018;-3.0385373783012030735;-0.88565531690490872929;-1.2253318500431147342;-0.044141668186838720067;-0.92356145135936640322;0.63240508025008490556;-12.291735687541805788;-0.29196635156064748573;-1.0387618471008315257;0.21318365767621616502];
IW1_1 = [-0.35444244840160787913 -0.14309803277375082731 -1.5357206014107749326 0.47274339515795210653 0.32994512617290205903 1.657979568512942814 -0.13981833673162427645;0.023378649536684788235 1.3121188298416286422 -3.6246161949943975777 0.31473350482854745014 4.2273509669734963268 -0.72308782938403748375 1.7675111552267057657;-0.1136374130299394325 0.0501804177230569734 0.029858742675326770816 0.90121615023765977437 0.085093264125083736826 -0.11512423863785517519 -0.15474135407358011185;1.4076394621002663587 1.8039972935507988527 -0.17743105595552638443 -0.0024998359244974011073 1.6685721288494903547 5.1909858941910416164 0.27762118656595863309;-0.11175728862328018764 0.018269032713920559108 1.0442420666779270721 1.0853142767847485661 0.69224213094574027494 -0.42240263196837962711 -0.31701920396904159638;0.52492889322342672909 0.23771832401376299937 -0.26669385584737803629 -0.25228816743618592833 -0.56754114657530985166 -2.318386193962140851 -0.95727023362731178402;-0.067625837852267736694 -0.18278757112127760887 -0.6128051000351240063 -0.87193092381189085671 -9.3937794867245170138 -0.16893203517066751607 0.061386952112315339158;-0.19197509919310754012 -0.28558478902974548941 -0.77410113030248506316 0.42664863359955101929 -0.38231957988878628729 2.0163337264647211988 0.68909365617147533278;0.21916350647995710976 0.2438780226912803939 1.1237588294415714607 -0.18343306147253668481 0.83742515803398365204 0.35775294508977206753 0.89732842779301402736;0.51147309600478252367 0.22559986033235160385 0.36295403406070403385 -0.84699250145773097298 1.8098906099940210712 0.18773428131841987665 0.40143575719770530075;0.38775355045955361977 0.30748994696559456274 -0.8062883424100262264 0.20315488999693440131 2.8710981770854653305 -3.216567598833063979 -1.1614871851538510761;0.41925922156084571846 0.23039647672964655434 1.3978500443670540676 -0.952383819341993898 -1.7239469980043908848 -2.2205414452851823803 -1.4058714652626655983;-0.0095754949594707115812 0.0087358735001943424447 -0.25179692732004160804 -0.37239684354851471104 -0.63045990271316199038 -1.0027999376594722847 -0.088932608844284638527;-0.026158789300625102936 -0.36896895467672496949 0.40008060779321463762 -0.18867979291949943388 1.7453897510666724902 -0.3135058588901272203 1.518207733437455742;0.080470618742091007403 0.040973425415113576276 0.48181843577467892148 -0.68425197123402314858 0.0033508310418647897083 -0.11954740697309110264 0.44560533151568659793;0.41397403171449798087 -0.12531233629572513522 0.5090236117967890106 -0.82190591218182040834 3.0142178945989863692 0.12895695905873316711 0.61518753954940164075;-0.43410320028820015281 -0.040920985195292906844 0.73553180953401642306 0.35155808172173025339 6.7212933015641240786 -13.787843721774018846 -0.22892818013353485873;-0.12041157490367963845 -0.15280596305893245912 0.85469000412073081741 0.27917684026643152517 -1.4629184010754638923 -2.3706554045622834082 -2.3560465309397979894;-0.076829697333888502531 0.080391116468460116495 -0.16818986606586602828 0.028082958956677610274 -0.90286157210081707802 -0.7919469382545919478 -0.50281577700140278608;0.088667705786666259349 0.038935988795552683994 0.64261961250120358535 0.0077110659151605840528 0.28708018630483433942 0.12379137253960378895 0.58846347995382630724];

% Layer 2
b2 = [1.2607832529231077778;-21.085302305346900198;7.193703059167474656;0.3871452103171946213;7.0486040378307937004;-10.602329682497643404;18.501434178790269414;21.292642043852140432;22.55927139752747479;-8.2697497740506644703;28.21322755728839482;-1.7208255288582241516;-11.643882112683177965;11.41592140498413066;-14.51741199782587266;16.292230157719739481;3.5277548434589860449;-30.797588753576590648;-26.645525701825302889;-39.823659822924433627];
LW2_1 = [-9.6232685349528637175 0.70495672170065448725 -5.9721890491899758402 -8.5810251005483930697 -2.11556332456903462 -6.8303556872304032055 2.6764023945467627641 -3.9709587528109961951 1.970423440810582294 0.66996399676271212176 2.7219232351099518219 -2.6577557380081673344 -26.26249790248768079 4.6211955537285573925 -0.58584227593208759721 -2.7910746272311088845 -9.4079151381388310682 -0.27626627471726039609 10.699557901079602473 -19.145835583131869839;-3.4201061956806277919 6.2703883913276223794 -7.5614488593204978173 9.0250617662238195038 -1.8809893878236718656 -2.6422838238123311783 3.3493618661217814392 -2.1988133563729261866 -2.6008680214918169504 9.1226499595539660703 -9.1223231199870955521 -1.2486212863638015413 -0.28903165346787917933 -7.7343221140795472834 -3.2626384021578633821 0.42877797545662599266 -2.8403409991403316681 0.75120971859519980462 3.1014404294783428639 2.6640372981880329206;-5.3236592439195584703 -0.24677093208724931728 3.76520090451220657 -5.8022001360130541769 -1.2587114186017809292 -6.7413761874530084839 5.7711736318660724621 3.9455087295553612492 2.8931421693763579306 2.4849968370681372321 5.657917632786825024 -3.2628565249309113838 -11.146877667976847093 -3.8998656007298784232 10.66211541034651944 1.117126073202301173 2.4968166882438107557 3.0206270211358776656 0.4460516049839515218 -8.2968903415206778362;-1.5363610674955983093 -8.765985562713591861 9.5448408966070594772 -4.2270107436302080117 -1.0008832946694852239 -1.3975401827387723408 0.20968971071240471993 9.8350594682191285756 3.8943066774460604051 -0.99118451348157887715 2.7434810207551896255 6.2250216225529619862 6.1785456749474887417 -4.9866409848971731122 14.379902751287611196 5.7678226686422542357 9.5088364424647835449 0.95699889694259265838 12.526955957051605139 2.8663943485330083405;13.128004110665768778 -1.1471910564833946999 -3.3384379227710900828 -6.7462766552666586506 11.416747335902201144 1.1043121030427058837 5.0722810990027653588 5.0275453473645903557 -1.6346311854389985463 10.052324914074304729 3.7753714288373907415 2.8844000471400139674 -2.0989881988708862792 2.4863600876607194756 6.3161349738607848181 -6.3313093912479851966 -4.6562684234851712262 -3.8847645362493281596 0.56246543694938377911 -1.6424823172801521487;-4.0905709106771688255 -1.7492225168844253158 4.1522479089168937705 -4.0225339703574887196 3.972629331140259179 -2.8744415757550405566 2.1852265479177983565 7.9026445239775702234 3.6049768022660511058 4.229934693753074626 -1.3670829096877268327 -5.7412431515358148815 8.593830261017478378 -6.0768046410304270566 6.0388250262499534315 -2.1791205113760176992 -7.566705461820812495 2.9044429724945532989 -6.7611941360324827599 -9.3288057583915318105;1.9435313575204840042 -0.83413753505757837203 1.6874680980570966327 2.3235434570261195297 0.23738418809308359236 -1.6103865954660023796 -0.89413737194740483538 -1.5751465850527464063 -1.8914949930014490764 -2.4376066850880824255 2.9479861681828816167 0.27038386873879327599 -0.63901751949381890849 0.98199829737152621867 26.217923710134456883 2.066162222210591537 4.8452676303736161856 1.1607782559440602554 -0.33377250295416971415 0.34318474411277094527;4.4695405774541567823 7.722968728160004126 -2.4154221804477886693 9.5166671369210540377 -9.406668592518407479 -6.9814255469734938231 -4.1274078158873130917 -17.009012959586058855 -9.1740732375856222092 1.8049673762987088477 9.3707671813809305661 -3.9040075511087244386 -43.576087222624465767 -5.8406260006831303144 7.4085675571832494413 -19.006199299177165329 -13.109961842816268529 -1.4419676285315645714 4.2856811413554485313 -2.3367128310405087532;-3.3712168422414072744 -4.1606975657204721131 -4.1237170790118451436 2.2192730378248679557 4.4481632467983320822 5.3241169669855032964 -0.65188011574917303914 7.4400611146184933986 -4.4673794158162314361 -8.5224409403822320996 -0.9853273082830840135 -10.141376964424011931 7.9471359852990355321 -1.8988980906541943483 45.47195182609573294 -0.57973262722101948086 -4.0061608097764995762 3.2750272517911365178 -2.6946519510850732715 9.8774777644313935809;0.89053508904851708117 -24.342867432994331978 9.404111258603014889 -6.0282103780504048274 -16.670244041113885913 19.676591917862229053 32.531640748488008796 26.252422783315907395 -18.434220157634804593 6.9772482072713168932 18.253577500023411062 -24.638529328024855403 -48.981428238600223324 -16.970743408985004663 -44.967693510250690281 11.648444774699832749 14.519411431216575181 -16.709414159809782063 -25.519113576465823456 31.459575939806423861;0.19221198554389562485 -0.97605645691673847963 -15.191645937564494773 -8.408464896754590967 8.5840647612513922837 -3.3733265784317745251 -0.19311193835593451484 2.7551423048251137971 -8.2855193313001969102 8.0315761144894537438 12.890385165219173658 -0.35509840099785577872 6.6120450171583620147 1.3705938704647069315 -12.857050240457587265 -4.5144903284667527998 4.7751370734984055488 -0.81632098019757859397 1.6889231631023062796 6.3401557504163976731;35.620296686782033646 -46.743959676991984509 134.17038617492454478 53.81622331213214494 -5.8507680186163106839 11.375712749719239625 86.820420951976672086 52.573236780810070456 56.14810779900199833 19.231209776804291778 99.314311306513971545 21.534229306804771653 -85.262993774262540114 34.036914460736404919 -19.931694527424959063 122.7628724879882185 95.982270717042581509 -12.385295706709490204 83.020192098260665148 -28.22580534189946988;-6.7977937195952025107 7.556048797176279308 -1.9505398404250986477 1.1917386631128721319 -5.1453396800638300235 -8.5532260724555779774 -0.16218617325055165179 8.8873024153230133493 0.67500215557426079815 2.9186039729692567768 7.1585746498174742669 0.57066215898780536797 5.268128699133416859 -2.8725663235147331775 -23.428141927681533474 0.19146132665344733903 1.6199487001562689059 1.1606477022191863391 -1.2499491538945917135 8.9396747550210946542;2.5174219838945242067 7.5774074701861202641 -2.4462040889204725858 -14.170016378408719859 -6.5602012786788490573 -3.13998464382731024 -8.7409707150524518227 -7.4592364319270334505 1.986688135736548011 -2.2343385763738261574 -3.5997557251396936628 10.274432449091422725 -3.2921623032029270206 4.5733928806008092849 -5.3415552727442285885 -12.124518989624787579 -2.4155484140113774316 1.2602326050679490965 5.9310776740992547928 22.153604812883607167;3.8982050319171381858 -0.24586635823463579009 -4.1753530473738402762 6.6303379877444372781 -4.388798169006260963 2.0429187587631028045 0.79368908390511627715 -12.533180983587275392 -0.25641427861781868058 -0.58562589936062070528 -1.0389936331260996027 1.1082445971483347869 -26.549599483615917705 -2.3030543341769336152 -27.358734660762756619 -1.3361742244046863615 0.60220388466871466182 -0.48808511228808448834 -3.3618292018475730565 -4.3720895624099105348;-3.1405420856841228527 0.5160102403211266342 4.5760608536270588331 -2.1729708918160506315 -1.1552884796114226695 -7.0744576514508015208 5.1595692644958122131 -0.44043839589701178072 -5.5299908561010511221 9.8270723024754822461 1.484621464677752023 -8.2891971093006393545 -6.3252288970365473375 -0.692787170674360131 24.367398771355475162 -1.5965450160880281238 -1.2809423563253496958 4.5344717168123054307 -0.10601050434125607047 1.2954026026650902192;0.94677216268553410217 -0.17595978131586531568 1.2555418413244310294 1.9068881160236013095 -0.21747227156423176719 3.2236791630138847964 0.89079348225067522815 1.0157477588763124121 1.1523156689904880956 0.76873925229348705201 -2.1583242155907544912 -0.18677070071812357233 -4.6679967485357618528 -0.057672498946392106167 3.4650469727740698112 1.4028882451484054883 2.7714665422831208375 0.10412418952509000514 5.3211173232822135404 -3.8149944224520462299;-32.975769628128105637 -0.58161429918979912213 -2.4618280961595004896 17.622189352261127482 -7.1657910348865980765 -11.471275163764449445 0.40876944750869559364 8.317757573328744769 10.40465907049732408 -7.2873807278081823569 0.73740089913999551374 -9.9744122317781638287 0.17117172922915283029 -7.6577247209475451939 -56.086816808497772513 -1.2416174083482787172 16.585549365846439684 -6.1986785366336878411 -0.21222628808981991444 -9.8072555384577366766;8.7982138942233696355 8.2934421589927840301 0.77144553143153848929 21.029001358648873321 -3.1407067942035062913 15.828859819612427273 -9.2429992463393428892 9.2450263551677434037 1.8640972975204241902 27.870107350223126019 -17.19935200433178224 -9.7411255895381323455 0.1197716668418142838 16.12647967308609509 32.150269623793114704 -17.621856189157817596 7.2031679708737899048 28.641347822404526369 -2.283836322122502871 6.0920638676462566252;11.241784298850564738 -24.463353323455102384 -5.9339775500559763799 -31.033617915055121017 3.3968928826778546082 19.133614025473963949 19.445132818895004334 -2.9383589266998160205 25.815138062316012935 56.997531956169140699 6.785321683133380688 -42.436571498288813586 3.5441773000981640074 -28.063011336040286636 -37.017039586663415207 13.855970179414002885 -33.296601044763889377 -18.74149367014072709 14.103257899832415845 -5.5622017761214861409];

% Layer 3
b3 = 10.775397007254097659;
LW3_2 = [-0.14882543268620535004 -0.012481155179529006966 -0.059260194930331133722 0.036400683439932884911 0.016244218020899158644 -0.026628092167240949295 0.015290910484128093089 -0.026047419641518677197 0.010316851065561028974 -0.0052667993366449592646 -10.741601607141312513 0.0037395603851316039715 0.022073614730026662467 0.0098223404778701121215 -0.0069219269562160465684 -0.094017446111555588728 -0.57117346283004899465 0.0070517959206924229337 0.024776304236496116823 0.00052496472499008863064];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
