function [Y,Xf,Af] = ESPER_TA_12_Other_2(X,~,~)
%ESPER_TA_12_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.1555597747178874002;3.4165778404962314774;2.3833819145236052606;-3.1717856787210987335;-0.68173815560778561196;-2.7323848966328529997;-1.4066220295040543498;-0.38570761206287801359;0.37070928394473734446;0.34937021841687077028;-1.290445586129327582;0.50273622509587256868;-0.062335430257908303053;-0.0036235947491016122848;-1.6932506508976092885;-0.84722570021423282416;-0.61148194262369226504;-1.3298567626473851711;-0.86711925586193483451;1.1734670187129829788];
IW1_1 = [-0.36614371294941860935 0.26082554353366277367 -0.22107166344923689927 1.08531254919845499 -0.62285525005686848132 0.9293420643349843413;-1.1123941286894019065 1.0399880516421600163 2.3913328593064306915 0.056679221991014105964 0.78038737207223463077 0.099686050156534297684;-0.22999825473827398281 -0.47038659787979081317 4.7687418373917509484 -0.42158227808526954616 3.5906676062523832371 -2.7557008705681385052;-0.40368863567858942476 0.22313857806002831974 -1.7347403049518892448 -2.2097562183604151365 0.11716366699888486336 -0.4878051140822981524;-1.2010721254078318143 0.48108772720232895193 -0.67230519574051583742 -0.86243534734384330598 1.1190993261921491353 0.61369780276426955101;2.6801712647934121669 -1.8439893308719748077 -0.25924192550971464355 0.34935321858808460194 -1.1248966129298947347 -0.99054000613510628792;0.12203973917289553941 -0.10724067264137759903 -0.013445046793303654098 0.071507520010120659282 1.0142882347793185094 -1.2319580510569871912;-0.76682174489388121863 0.35282392506056731163 -0.88998797589779377049 -0.36306569043342312719 0.9715561218616870498 -1.3764726080564952948;0.048466161509742700098 -1.8751684881099450752 0.61750379246750719542 -0.51812754886428036283 -1.0821077942364960567 -0.40802479397476071332;0.022708856367357265621 -0.17720994400275669189 0.69721980293556795605 -0.4434679103238028941 -0.37736894061596737426 0.046191747476978642362;-0.34455668363524005748 2.9962482735585806992 0.13092436577539950937 -1.4650842507332921816 1.145279247962378566 -0.29608354491195215674;-1.1893055919222490502 0.20379685940297545543 0.15610450539910758483 0.031520775032502626467 1.832555770002149087 1.0524362872187527085;-0.33940986448628363004 -1.1961866751312444368 0.025715915904292147021 -0.24841819447657276232 -0.057239668511971729392 -0.34997803506818558894;-0.41679466128893971621 0.30309715874565212879 0.22896659877022770835 0.332220620237830222 -1.531631968194096638 -0.10238562680897965451;-0.051269762636563111224 0.20957445799582063994 0.29025300194280823085 0.96474611899865814202 1.6717212336863411792 1.7095226620948018592;0.20774886614373591631 0.35674390790192350709 2.004070947316013207 0.010119319244900592744 -0.5706046907205364338 -0.78901637542469071906;0.095837747735445802388 0.045800615405083892895 1.3387970264650086438 0.13202360881263347503 -0.42141516840891285467 -0.3764991277626469901;-1.9754983724134969059 -0.95735974516091004727 -0.91775833951431162738 -0.057554657540464938814 -1.6455265204384561528 1.5162139650456674111;-0.4780830588749250265 -0.11904817342050501294 0.55528705180712656375 0.38346272214791093935 1.0447209618799628839 -0.87153793542534330197;0.459620882630542682 -0.34824806086406662198 -1.0221360794283436135 0.76713815879089031213 2.1180704059251174165 0.62526866990505491906];

% Layer 2
b2 = [5.7454813487791644988;-5.7796645814465348323;2.1880713608549049454;5.941192124090981963;-0.11671639210704828904;-0.89188690844592444229;0.63918876962728976565;4.5272385860104842337;3.3348365499275440804;2.4467191022090499786;0.19193452177360331712;0.74395097286100120293;-0.71123946660371684114;1.8853887487461600259;0.58799202093260527491;3.7414328700758114898;-1.4517230572299866243;-1.6756438888509617158;-4.1791923629628193737;6.1703610877285104408];
LW2_1 = [6.668167201471868033 -2.2908531359578048203 -0.23678601895524795107 -1.1266274267806806186 1.5619170629458976052 -1.1553281022243044873 9.9257359705753387402 -0.44506703503284333889 -0.84488508479209245561 5.771577780336430763 0.57819106048864443714 2.9826326760821424422 3.1586039045588178986 2.0862212036203944265 7.2329507989925456712 -2.0780937137184576358 6.8446480884207110407 -1.92681434790419015 -12.163052020255381791 2.1887654239484972685;1.2895920704948391489 -0.3271677219594950059 -0.18396887863378377781 -0.72820891088134698244 1.91136699930368259 -1.0651769915449684767 -2.3054344162053386214 -0.29256990307932789763 -3.249707415540959321 -1.175011782676834704 -1.1629100705394685988 -3.3251407548936482428 3.4313155227962313099 -2.3364104070447826444 -2.7298831863161785449 -0.38035297264335393708 -3.6379138788633578194 0.58909789888833585803 4.6209363953814435177 -2.4856479330664975613;1.5236222423285354921 0.34829062522210002539 -0.2450302423319755396 -0.29693409901975598153 -0.39449193908645585616 -0.098991243462879449644 0.83698061612311658308 -0.58586737996096316383 0.96978909518272582435 -2.4111308530835060537 0.013535686425522427956 0.91128938616256049965 -0.43706605859963576499 -2.7802258908783712421 0.10082588042306463161 2.4720834650069032357 -0.81037645224411813949 -0.41737452178429534921 -0.039275832647470101944 -1.7603587498626971364;-1.0229283931620865022 -0.54762886606883309781 -0.028265585494592432303 -1.0985370413343757967 0.86917574781312600951 -0.66198302905468742185 -0.73276680082365031055 -0.90401475092386984755 -0.012748540561312683012 -4.6445855167078473613 0.00010507449544579607406 -0.25483871286863418737 0.66153609504737775904 1.5554852906962266523 3.1762888299371740963 0.97533992600697516639 -1.7528370847320491333 -0.39419571817808990444 0.3555678603392145587 0.39892069338959723623;0.22600916368431561709 0.62293442106241525558 -0.14644958449408998491 0.0098337235911579168324 -0.079615880697987667647 -0.062006920272416304885 -0.29695534967751635591 -0.47581645531345712063 -0.65402841469122952045 -1.6047086391998548471 -0.33101825352273506198 0.065459657764780590505 0.91988921642023624425 -0.67501735723884814799 0.15704097576551045989 2.0209990071416426005 -2.0347033868943404933 -0.19606606754865252285 0.34241586356779241118 -0.19124344373432178301;-1.5231244564140755671 -0.39895749648107087237 1.032291402786988721 0.04244434286401740225 0.87565336917905955971 -1.2406273006713230966 -1.0047750796131633688 -1.5639652000748018867 1.9048423174410680225 -0.44755645866487531181 0.24319568913230268925 0.036758085502491585905 -0.56608534683636402285 0.18283609679226478506 0.63560949706793679059 4.3061388748237821034 -6.0941717393229373201 -1.3256508718719837159 1.1642244132952810354 0.011575416761342627661;-1.8954676065893563131 -1.4314019975932359419 -0.91734561194471253565 -0.41624708309773544856 -1.9402225134050814503 1.6433691558196916738 1.5819080966153797885 0.0011951102107371353034 -5.969438232476901085 0.93032693149661860321 -1.7041887706679461623 0.54309537728392365263 1.2721714051128012457 3.5337158173404454864 -4.6172586239805930575 -3.2739027815923309461 2.7263461650067020159 -0.94944866277646033925 0.20448752132591402342 -1.388288463553329688;-0.32146303229712247518 -0.31787001051460467282 -0.25434030857703121553 0.64490008653766150992 0.96264310715162826337 -0.88062718277236751163 2.1484168568207655525 0.52291276267418151935 4.2584782479462734983 0.032411320268626718499 -2.1133772576388816233 0.99167485500468965931 -4.4508090492918004344 1.6278564913720066087 -0.27418542701162085251 -2.1438658930216463183 -0.25089204173839035894 2.973349523578759257 -0.18487311087507143914 -1.7229361087809818009;-1.1780483143311544225 -5.6904260763172604953 0.78175223800116266926 -1.1431278342197077613 -0.63598511632807497307 -0.68445798994447515362 0.70153827175050265108 -0.33978037582000975014 -0.45208033919937284928 3.5141927575639053671 1.3671565270134666825 -0.76584842816937526155 -1.830527680218035913 0.13437533952017127747 0.033568730425792191185 -6.0295210198641893129 6.338521420447411181 0.02095106807793171988 2.259883766975088637 1.0176107579487687627;0.33622148988517541746 -2.3068114107847006444 -0.85834763006050751599 -1.2043288128433302653 0.27617127915556510809 -0.91431641509100891607 4.2993087454792053848 1.176596231259686709 0.32222288381895319853 -0.42805373537149665752 0.97948348119631845066 2.388866241275606761 -1.782930305459722975 0.40888156815604359551 0.42212722287922582742 0.57503016604052004102 2.4606462136855502543 2.1033869792540880184 -4.9905469507068058732 0.49939015494952038177;1.3675494754259551744 -0.78205061804528563929 0.37301335824549625153 0.0056379698266827843467 -1.2038984612635086346 0.17883944693996889352 3.4853904291380777281 0.76271182048596486425 -0.81200484488037127928 2.7276369679291003756 -0.13595222274898816073 0.9222146840489581221 1.847603318289196439 1.655267640478263802 0.72020497114776926839 1.5884407505874986732 -1.396363514520309268 0.22915367819135706862 -3.0501990064870012631 1.8252336757719611615;0.61756132903537341861 -3.3280943673815368555 -0.79656482920619442467 0.23549466072201025169 -3.8914301036387293209 0.77534951689855668988 2.5291994729732127922 0.32406549642789372889 -3.2006655983372764851 3.1438751363777726056 2.6514328944534026888 1.9918967551989588127 3.0641923180743937394 0.33877776474175519406 0.41381173174905022671 -2.227940688796557378 5.8529778913466827817 -3.2463288146516897648 -3.2407991435424228222 2.2788113780923264784;0.55372086405209508531 0.42478110471252622515 -0.034608303105154690493 -0.18772932295284144866 0.18499351053244994514 -1.0136662617208302972 2.1484860035965560598 -0.94208260615748939948 -0.34667293624148132203 0.088793209753893057035 0.049061348163883036766 -0.082755113572142657841 0.70212149862920880672 0.94624618795385351255 0.28267853749314114653 0.36066305148119687241 -3.3379409779924271717 -0.56478545392310885997 -0.24910517204178916906 -0.77245808621725586818;0.76720578416161733237 -0.076902190174079620988 -0.65857401533741832811 -1.005891322186384107 0.65491568018954748887 0.025611332820987160741 1.7997931605673624933 0.098542532529362014682 -0.44910098411137194807 -3.0177921094416126913 0.45289801126196888026 -0.2635456106111579988 5.0115055079766106516 1.2443219616544500816 1.1619975404603899438 5.466219308691871781 -3.373928497724657305 -0.075321828268659282712 -2.9125052053582058953 0.52408847039341155405;-1.4234644999116672359 -1.7332698290566908028 0.94250866316411863188 -0.01111665051676526475 0.052156779588373745893 -0.95534949377111499924 -1.2639412196570110059 -0.47131667977883306975 -0.71894266051561528386 -1.5779396058268271297 0.094679991629442947221 0.30183771429089339966 0.81878574367713696791 0.84928365302294539507 -0.66235882484653463287 -1.3070745899211255736 2.4467772816621642384 -0.10187590265501125786 0.71763090337426171939 -0.61132876045650463848;2.9259249017842741125 4.8265287409273796015 -0.23293853013141704866 1.7066180352578688151 5.9682378495121364281 -0.54674030318002786455 -0.51949717807825268601 -2.9665602282053473715 -2.6403839967165070313 4.7337886906241353202 -3.5640206307796375995 -6.5370789505440702882 3.6071325693661537848 1.4502280494534229849 2.4352008644641762736 -2.621114630481236496 6.0310760215559620079 -1.2221384584647474458 1.7933986435680746574 0.96387065298677232494;2.3891124575319699908 0.22217152689244756836 -0.67171987563613133609 1.0632468243028538879 -0.18836772738902043955 -0.02022275259682683804 1.4692253469756890727 -0.37045713378687405992 0.5442609462765304329 1.3501292732482315095 -0.36080013958169243615 -0.0015693814807513778442 -2.0596829817626969295 0.59667399812749677412 0.36829260347408149245 2.2771899679701381736 -3.2269684958721001067 0.20301358124651933124 0.52142578866205302468 0.54962542946230896757;1.9279329064653893955 -0.13251457705387664765 -1.0152074413592662161 0.8598034322118215389 -0.4664721429807377473 -0.42927668307984678808 -0.07672938965836470504 0.20502070431331770317 0.45555328002570688595 -0.74937562406962032746 -0.50261834154696605204 -0.18030587363111283405 -0.66007024822192150726 -0.7708227218368898237 -1.0896783829014107248 3.7044817566245344942 -4.4744216686222877399 -0.39510488246379149579 0.72875871353536758601 0.11799047768985206075;0.22717609945766975565 -0.269612013620266322 0.31411532096264110914 -1.1755467457093760064 1.1173404886112128231 -3.476422999817715187 -3.4077581421810347884 0.55307781337455452775 -0.86818432348980945079 -4.7286023390999041283 -0.08881833551544826566 -1.1793247927333940783 -2.6459532545386443836 -6.0128266422412899317 -1.7024640982026317815 0.41072926250160729511 8.5220677915026996629 2.9485095740161533229 2.3429609980158629945 1.4545646357799519865;0.02179681676131150353 0.28415031013895653 0.15751481681506065979 0.17360604692470146815 -0.2786786427542110034 -0.636892567863160175 0.92763845167824499072 0.93489208790637767788 -1.5972489453292617601 0.54692486701076226119 -0.49802626635580249381 0.62302550766025055484 -0.22107421168659424637 -3.3024452925311611473 1.9992854033292424276 0.75066566121303890391 0.22524990849040082974 3.5328585002565500162 1.4378269132242562645 -1.0666209102934349762];

% Layer 3
b3 = -0.28026955470082393074;
LW3_2 = [-0.13993760455242379437 -0.090075590302382949059 -0.24059785305007211353 0.49196979789135786287 0.54041189255686494786 0.14307033144530120761 -0.04026966262783270023 0.085250825623926412833 0.10795112511341384276 0.037793953461426978147 -0.19183883464865655877 0.086535304075246011202 -0.38006018042886297037 -0.07005430602147404151 -0.54832112450974557216 0.024161947626476193429 -0.22135961094151065942 -0.31473516267381140832 -0.051321038001202988477 0.17737476237931235068];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
