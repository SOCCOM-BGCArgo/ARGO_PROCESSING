function [Y,Xf,Af] = ESPER_oxygen_14_Other_2(X,~,~)
%ESPER_OXYGEN_14_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_14_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.3902313861464179467;0.66575249019710402987;-8.5440537644994982713;4.3517046690229514994;3.6463330924805283928;-0.56339424639361279645;0.10422824236750488636;0.32519968647080865765;-3.9621522474653194656;-0.29319889916960051313;0.51331377499499086792;0.23944125994338438801;-0.51213140179772054239;-0.01944278698631789204;0.95245842226557253518;0.44871165791548695001;2.0707842614948348547;1.9659199623000804813;-0.7720472866991543448;3.6864999610032600508];
IW1_1 = [0.45325825429627525365 0.31642005293226715956 1.9100128395385973512 -2.3349405287724014357 0.10774372371128453085 -0.98311697452913071604;0.4529450407742742768 0.055287375905909263984 -0.31142872461204745838 -0.69205569008228540184 -0.82709121539494101505 -0.51222531177403263225;0.47973463850688807808 0.62733271597282280752 -0.14637476694865381166 -7.2807007897027595789 -0.92879528774012187764 0.46757676644077028616;-0.22709088998406251614 -0.16756532315502262187 -0.80178716226597146477 4.1447532805382456544 0.91338613190508599615 -0.53765860192915371218;-0.33619017580827093017 0.37980638611417116834 4.8911863788688254573 -0.52757872763804458671 -5.5135719551958271012 -0.62014595637809677431;0.20670110384150691685 -0.14119280359051578078 -0.72587715492780258142 0.53195498537100094349 0.70505699482050299132 1.5117927149317558211;0.41376545887223564746 0.11328391258877809622 -0.64574803598995034193 0.61226571015287223343 0.86904368493577877075 0.65200750564035703238;-0.23379397372123603138 -0.034698271852684439698 0.64820084736152450144 -0.70233480773099499217 -3.9540904682935082981 -1.515807287090300326;0.27367749219000603311 0.1127451442433851786 1.0270510039969207305 -5.8803908795938912846 4.2478648367609359582 -0.88491847921443067548;5.3260630193594309389 2.9583542416688795029 -4.466410583411184021 1.3613215265460374415 4.3928721053596957447 -1.1253883999811769012;0.51903768709230058143 0.03488792631552719431 -0.27496105988898450478 0.019920553093064181926 0.68901853467809426323 -0.3164655256873185607;0.84586409725930977732 0.62053270807175686663 0.5947104104298441829 0.54643133759609341382 -0.82031937892126416401 0.56893545693909197691;-0.31011306148545236816 -0.22792818383869190013 0.19359725087973603253 0.29171912190332000003 -1.9139366435029725455 0.69405301031954802493;0.77815062614979979561 -0.18768413074242973337 -0.77645445322978712266 -1.4780642881692034329 3.2075302136909416006 0.3032133770032394704;0.3463530837419068753 0.64922147156053156003 0.86798973392610689892 -0.73536276781283937964 -1.4078047722478892467 -0.14458645560288413412;0.56133921396429309336 0.27525021591588794134 -0.36600505131746968734 -0.45673587993031106169 0.28166518998744149993 -0.15043631353775416271;0.70118815822174251906 -0.19730280634099664483 0.86305640552637674645 0.98066928548814524813 2.3040571794693760488 1.5347685501160712729;0.69414896892481237067 0.2693366219323545252 2.550710574274407616 -0.19626227827714520791 3.4306627266061129333 -0.76780467129442520058;-0.65958898843517010935 0.53306082401105414625 -0.34305221010377939805 -0.50173577045998363211 -2.0405257891824515326 -1.171340526040150376;-0.73099372586638478033 -0.48320466005044404589 -3.5880428783304818552 0.5500099917626938284 -0.15391660959154757071 1.5308752999668198136];

% Layer 2
b2 = [-5.2613075966536868577;-3.2720282436912375701;0.41152382885538973945;6.8212446827758785872;1.814871205782315311;19.959523974105866984;-3.5728589526819920508;-0.97142591523031973644;1.7334576870124187575;3.7917606236492664706;4.6137534779212838743;5.5037315088436029598;-2.4095536468677849484;1.416560258819821172;5.2546620789125233486;2.4874227616378932204;2.7180502123286385263;1.4515136209683652257;3.566523584753880094;2.9694298187969949687];
LW2_1 = [-16.414151752567036624 -2.9235766350713880968 -3.1410467928028857898 -0.51066580198084698949 2.9927249781312852406 3.3700132255177166485 -4.4497576234265601158 -1.1503533932806262463 -0.20218200497870222887 -1.1492477314114830644 10.697504655671048468 0.84382825603102973311 2.049898950839318168 -0.79378708494261052131 -0.55876063978834689117 -2.1862538948750915857 -1.354796712491921129 -0.68441626783405351553 2.2365656179906823198 -10.549625045450715888;-3.4843565946285406376 3.4275954663683436685 -0.69283598070204444053 -1.1650675809977733 0.22937582608137943585 -1.910181504650431128 -2.6050903067063937435 -3.4701564747851390003 -0.41200114692412626027 0.28552369323841642057 2.1873465803996370305 0.39480293620836187651 -0.61903222352853448651 -0.70984712712335595874 1.3396234102790052223 -2.2649392854119345664 0.80363707715656351738 -1.138903601036629798 -0.82243195747019892661 -1.8201503644711529706;-3.7199111752704148159 0.14005205538187120995 1.1346366071808198228 0.35411452918102559462 -0.97261602308692651775 3.3050476448493739667 0.21501361369173446758 2.6041150826979864163 -0.43988442177415831846 -0.11793248823488462762 -0.28039180414103093142 -0.16229309311581557873 -2.5998740297995408532 -0.72167257555987651685 -1.1908007751672873287 -1.9000555920669339738 1.0952329301674845752 0.61922940007725957301 1.4658173961998814949 -0.91575347196925205306;9.9436576242413181603 9.9319202769973990996 3.6696953081967618182 5.5768115054210003478 -0.74447293095303324062 2.6810060126496426669 6.0854878572332165021 2.8272807269081443593 2.5018566891220843651 -0.26062394889427309419 -5.4229871574179240312 1.5205913181130847889 1.2526808171866867792 -0.46656481833006319127 -0.58875390157285523163 -5.6510144215419639835 -3.2208039705493218818 1.277514828233714983 1.2376065734960870479 5.5338411414368655628;0.20559331562347782363 2.0995982973513305225 0.25098325853526903817 -0.9276490589763312089 -1.335212434399419168 -4.3679692756223582606 2.7769532435626480549 -1.8501495939663479273 -0.18497024293395714079 0.10264468031393608749 -1.4015342019000878171 -0.91825714696848170782 1.1312118047450081537 1.0896661811400329967 -0.045911537485292155947 -1.9084908608601987012 0.5594885037404037087 1.0248684899621609556 0.33218102780239289196 -0.63134124724556384134;-25.572639381568361472 -31.907215109095496075 11.673453555595470377 0.45127419275392460785 -4.9504026850407250038 -12.530889787905392652 4.4165869572402609577 -4.1944582189765649005 -0.66448677359310270862 -0.1427178541002276646 3.3952279252668393639 -14.456106601461499395 20.623709307460813989 4.1447989227883450525 -5.1478675433519738291 37.559332440558073074 -8.636410029303718261 7.1693686300960157709 2.8642281740378736643 -8.8794371999660004491;-10.329603821395243912 -2.4009346835414659971 0.91653962291819079944 -1.5151993101006449027 0.36096059391061147137 -0.25903980670590137647 -5.1617461946294147523 -3.9734135752741797099 0.017181490531491417501 0.045938999141678080185 2.8035293145402064852 0.041547732217410905664 -2.2269580813248550655 -1.3943272879387995644 0.63867065700385550198 1.9874569583183367971 -0.09046216511482295386 -0.57868147468319341975 -0.94257237350773948048 -4.861963433141161417;-4.833145295126790586 2.3662093177986966985 2.6734931110107420515 0.70815005258978136471 -0.019516430656936509941 0.57162015360424334176 2.4652375482930426465 1.9140752623243406649 -0.40072543996365700414 -0.23114013490991569544 3.2226958393404379066 -1.0052179572996777779 2.6295043355562151 -0.12907932696955573548 1.2626493710760084976 -5.2355265268915198718 0.31540258896106826425 2.0444449911538202791 1.538122883204057878 -1.7153740729625670536;1.6125445170885586155 -3.995731682999307921 -0.21094050362580596403 0.4708725822997331667 0.92284977282973690293 0.59032996433302520334 2.3532788230820402831 1.9487280506119151191 -0.22753498223942755785 -0.04109571368819449344 -0.96224998312617060492 -0.51425164018526647869 -1.4376128241064856095 0.30028460311592369836 -1.1211110707260731889 1.9670876952646629832 -0.45298504009508760992 0.070985826131429008434 0.25957741259429045755 1.2936868859778154484;7.9676674545464525323 -2.8235318813224621337 -4.5340104918121832966 -10.676055641309504907 0.15354847498119250648 -1.281038341516620882 9.7675124580888894599 3.786889455274165428 -1.1277696628817885927 -0.33529393687535347102 9.5312204355114733545 -4.9725331259145928442 -2.1245437260045840766 2.8404049580399695074 0.92081504556103543901 -9.3749903786460659916 -1.9043574688812121565 -0.66364799686811104529 2.0268056325527603612 4.5408051007174776714;1.9436969143387352599 -5.0426178524731657404 0.90513445733060082787 3.4666350211874612519 -0.20771204921898139828 2.4243660508276447807 6.5794517324621377696 6.9563875955966265607 1.2163588518973662556 -0.390132376934801961 -3.3745156136549332437 -0.47693122402217114075 1.5366087123133880254 3.0745280651174127229 -2.946058927273669692 1.0965043422383486948 -0.3749720223293387944 2.1568129386612122644 1.7567008226056450848 -1.0663438809954848274;8.0150973539677501378 -1.3410263152111010498 -0.3355761636406843218 1.1039381902393923252 -0.53053517024597440788 2.0002292217353097037 4.1130046730953733203 2.4715664210687582347 0.6944186595206153223 0.12297863705731737483 -5.2821294096959361397 -0.26327824645395658809 0.041901025994931603846 0.8010103859521907621 -0.35370759749618085888 1.2918670033896839655 -1.165394336135919362 0.98738404160292836398 0.73519276803994815239 3.73888219564725377;4.764189663236237493 6.6645643392782787373 0.205989819197848395 1.46644983472771262 0.9442977415507288752 -0.34957283415269613247 -1.2044709455834552436 -1.3111513370775949028 0.83124277832350224049 0.49182534685389650564 -1.0212950034859871185 0.1143813772720855132 1.4729961889575422518 -1.8734049832528094637 0.3498130943884096844 1.1490801939492529815 -0.82909396089922327011 -0.92060842923001218185 -2.2726334024802765654 2.3618281087410353258;2.1328792497895827651 -0.36792801559914495302 -2.1946287434932805205 0.46077051204732960565 -0.31167716454374672086 -1.1054839535862002187 4.539784888311777955 1.1510790342237218198 -0.2675421589550045498 0.28689601704826817041 -3.4276076431955257995 -0.45172856666683736115 0.0083503700303917301195 0.095175127563369127381 -2.0656735555643228608 0.82860145403628848726 0.41468989674570289061 0.073816643728892225584 0.18508486808930055267 0.27839431479733206531;15.741670934512807634 4.7958302444885934079 -2.8217514109226859986 0.093832768649315265175 -0.3502027009730393492 -3.5148212766927802164 2.9035615580920426382 -2.8958998000053610689 -0.58797385030495741276 -0.77962516263962966523 5.1268166872186364813 0.7684229713291452768 5.0460214255684556761 2.236692296301605154 0.39746502669150651776 -8.8111383988927940436 -1.4295209763307281658 0.22584206436524986716 2.0283602735818133667 8.9149684065380316866;2.1565212519348624376 3.0953013425708642004 -0.38003782713838935026 -1.1394718705396633673 0.45379636503609832587 -4.8643179853513478506 -3.1810056033650813134 -5.7746213981945251348 -0.1477380433249113334 -0.20791249180949250563 -3.8412533539178799202 0.68247769943714120533 1.6574475209665224806 0.82693055873195442373 -1.8355195541718263286 -0.27706552598550859834 2.0713689773730634691 1.4123393311121803517 0.047475835664396476288 1.4428721715225547584;4.6554291175047790574 1.2990943216853425568 -2.8275612132631517959 0.72011205311674630902 1.358307335436381269 0.78770208427734011991 0.68689294492950070392 -0.0051068360838242964767 -0.046151539602816142593 -0.88799813813546912833 4.7861056322933661633 0.44557765843811386608 3.1975443884489558322 0.91863554953688897342 -0.11597925699822031476 -4.5392500601710548125 -1.3801142937541337474 -0.018633156428857107489 1.2618634715935543866 1.14716889250499543;3.8905018802343001028 0.59820936090448062483 1.897867008091145502 0.28038074084050823576 0.57694672657790468939 -0.49608563510023812038 -2.1718207249478438392 -3.037149351643491979 0.40974406656127326798 0.47980832670448508859 -3.8454740990276170542 -1.0523901822980752385 -2.3745104326336807787 -0.096318600548453620069 -1.2959550186713284514 4.2782470014533631186 1.2457651816454817784 -0.15157194873495391518 -1.0727051129714204603 1.0480299325856596848;3.3952762168835066703 -2.8136491114312538464 1.0578604699977658399 1.1744218468784746179 0.46505353713621361278 1.9607033329611613937 1.8314766039688283872 3.6567550153799839308 0.24210160415508036325 -0.41455225655050875755 -0.53371043341015300676 -0.079186653804485168662 2.6002761089848940301 0.060429542316678713787 -2.4093849703532534967 3.0316443717655889856 -0.023354879696424114821 0.93189236954988396988 1.9895141080936986633 0.83618133012520268199;1.8724376233716037987 3.4667728976622997905 -0.33370381079179894934 -1.1345762574719506777 0.41682887198798368455 -4.7799290843658264194 -3.3181074671242001273 -5.792317263525374571 -0.12830166970489756406 -0.2170683039661991387 -4.0093899862029687142 0.68719207586646280372 1.9188235312184689363 0.72200220798792680288 -1.8408038189374653637 -0.23146975152387661012 2.1531523219601451657 1.5709965918749231317 0.10846437792054189342 0.68695910353274447502];

% Layer 3
b3 = -0.58591644129213871217;
LW3_2 = [-0.16520925256321272734 1.2221197624159685358 0.55479325263057177597 -0.13695255473214826281 0.42102698746484668035 -0.15902930680907947925 0.28848203097410751727 -0.32315528586832681368 0.74296316809832663175 0.15523480317560739428 0.2039074489541980173 0.30652905093896731792 0.33207016862380056565 -0.39198742881933007487 0.13378380647633694722 -4.8975715824667362952 0.28975702357540539245 -0.42804346676156246332 0.62279605981665209224 4.6808337212440012109];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
