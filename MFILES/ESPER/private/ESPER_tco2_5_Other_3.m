function [Y,Xf,Af] = ESPER_tco2_5_Other_3(X,~,~)
%ESPER_TCO2_5_OTHER_3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:54.
% 
% [Y] = ESPER_tco2_5_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9543541200243859;-1.4201048007744017;2.3631598611653701;1.2230042710974869;3.7859469995252848;1.3127743415531024;-0.4757311097175505;-1.7613395085330896;-2.0945912963735318;0.18139091481813516;-0.60024254832028012;-0.18405629966684045;-0.97336276003234268;-0.41986916384880402;0.59224960863286047;0.44350134058480667;-0.47824118022296713;-0.20278694352690246;-1.4636638499596228;2.5205408078038141;-1.132100493674826;1.2287681962817676;1.1210403894236669;2.0718015082128454;-1.5596790192705758];
IW1_1 = [0.2088938118528717 -0.25476886082584949 2.6635970837447847 0.94453425664873403 -0.81203666436091404 -1.077499553175034 0.4768324019732742 0.28156052021573486;0.88403906805561372 0.86418545765451571 0.58411736630960986 -0.60924215626636902 -1.3781311288095124 -0.85496364819846205 -0.58354958217099706 0.26144139697459617;-0.76125889746019226 -0.62714139481933473 -1.1972266274571868 0.32410119410493543 0.018148592910281577 -0.35783179507885343 0.44202618419970069 2.3852943975723089;-0.14105589725204751 0.12799615882235754 0.45980697870777743 0.30681414396165252 -0.52776605062567783 0.39775730266407339 0.28103954240816426 -0.88547228977416403;0.065441189616281176 0.95290821848178398 1.5125005658095418 0.1183929965432664 1.0683671669004142 -0.25814752380237904 1.9239284537173809 1.5051837561834709;-0.5734175330573239 1.23614351918368 -0.15721594179607418 0.24682428588975933 0.59278732975756221 0.52132247214690863 0.30300892407198288 -0.39998061777831301;-0.21708403720627686 -0.085645432912169916 0.62238198776089193 -0.82220058940400498 1.5903500918665405 -0.86425691660005188 -0.11721840685025649 -1.4703491416007946;-0.20783826413096326 -0.092613188854751158 0.80735842813565728 -0.20567603118872049 0.17587163590539448 0.54132126603694541 -1.2324163535093609 0.49458587108504853;0.25135750013067393 0.027379995590309757 0.60110750267363944 -0.065129074710303908 4.8313674515128904 -0.70774234644897294 0.53556721875766811 -1.3510538773384047;-0.0073199900053624589 0.081112908379140203 -0.19194835948135691 0.51275378034060315 -0.58381132699396743 0.88768507136427433 -0.4779380199874117 -0.05272310640531952;0.11843691065536206 0.033675977650548243 -0.29121578238627893 0.27175610582491377 -0.39893645547901591 -1.1125539470534267 -0.43609293521823056 0.74557492024116834;-0.0069164399603490693 0.1711845552320711 -0.34236840518457562 0.23194034185371984 0.5874469381855163 0.60468796008385339 -0.058610581339924313 0.36647660525017017;-0.070226161988547628 0.017227816899120833 0.11570212004640421 -0.3253317173160763 1.3430289879347648 -0.085412566991556804 0.17637049535436547 -0.045001674685842007;-0.3372976828278556 -0.13494357090091608 -0.3946711822389789 -0.27194358648724826 0.070040413314274727 0.76170588641152526 0.23907667851219386 -0.5239262957558477;0.75445553523224784 0.011518512336026156 0.099825589462929173 -0.20469779966301793 1.2448264473918007 -0.4454939826844575 -0.032875754834684634 -0.328780844964914;-0.068711084851094728 0.20921176667122426 -0.14230747314810069 0.393142300626529 -0.28446989414096058 1.4115984177401355 0.11966205255497313 0.2751602612633739;-0.16459444270885501 -0.019351785390528557 0.56486133436586494 0.34391593248626806 -0.2473078611665693 0.61890174689793931 0.24893711841794391 0.8752413117819362;0.020524959683072944 -0.20719465280582752 0.10771820195046815 -0.31516658070249892 -0.079121924654256076 -1.1960631365607122 -0.13047868015344194 -0.28902623695875251;-0.51723940508612443 -0.12372130103732148 -0.42735230731515483 -0.078437085559406663 -1.0321311124196362 -2.5262996854351849 -0.75492320571406879 1.6895740971704796;1.3084648016888079 -1.146177858321165 0.28853111192641134 0.13156389745691907 0.28284387716443959 0.74099605264600443 0.53007921292013682 -0.31867662369603683;-0.31017550703744312 -0.010178864495091401 -1.0813461606454533 -0.12016918035199226 0.29891579314209571 0.10217678808748601 0.0080574605545733376 -0.35090485578054981;0.43990016289515921 0.30119453171839072 -1.0175110977637236 0.23467859508958588 -0.45866645384564753 -0.32942755123207113 0.080002152850591243 -0.49846751277427837;-0.028415081529310365 0.055458864570798461 -0.12617662589313577 -0.13028453700839909 -0.40526739192013966 0.71300571093058351 0.19854890230655522 -0.89368333100330788;0.57932950264614436 0.20400354084501876 -0.84122223420325393 0.23473025443432427 -0.94079546729589247 0.46023090992216553 0.5533126210851238 -1.0525899397615763;-0.0074836728864550789 -0.12947915803653695 -0.72296481631027121 -0.36005198542080297 -0.35044768285745159 -1.185559376592521 -0.32954327250652304 0.46528942157521136];

% Layer 2
b2 = [-10.942456271214995;5.0241764716254353;0.81389797494437721;2.0871022035797888;2.5625035973355557;2.0343199704565862;-0.32459778077847934;-3.0917212398353753;0.57003909071277081;-0.6572663000516803;-2.1068285832321707;1.8762212707304815;-0.41688939978791395;-6.5619392821747846;1.4652525957991998];
LW2_1 = [3.7248063398269147 0.57292180946728466 5.4018645934150351 4.4264036421579762 4.7460685771286011 -1.4647828692655436 -1.3597661155127299 0.3318943594898825 -3.4588020839483007 15.139513573578521 -8.976893083817739 6.9987297586813622 15.817420662537938 -3.748309559588153 0.46882471741736537 -1.2023485026723315 7.9075565958756044 12.816857551803707 3.1015256532378221 2.6538783632815326 -3.4552200989423296 11.052908783926945 5.7332570486909242 -4.2410800703774907 5.5832675766257394;-0.13399796657711802 0.14748238031158881 0.14359822153397753 2.5109935454543963 -2.7582839668696897 -0.2999017085587618 0.32040666219593289 0.073257974140184243 0.45518666045221218 0.089348161032388754 -3.6309646821364563 6.3933980937943504 -2.9263505238658296 0.57607663607050108 -0.9334705991336455 -0.21651432071038126 1.8363313298693906 2.8535301555780128 -0.16808230964328585 -0.019169337666376119 -2.5661828331308212 1.6536411067343095 -1.1554453277642531 -1.2971134168710734 4.3836708949726839;2.2939674631672586 0.91082196663673809 1.2245092393622723 -3.6363738658909064 1.5856174112814827 -2.0690159559584735 -0.59704920685116947 -0.22997743340474816 -0.40142538209908962 3.6848498458755921 6.8429921448985596 3.7403394436699617 2.7677140212953883 6.2139649910688375 0.60998886812199926 -6.095735836157993 6.6621914326170648 1.5177882472879733 -0.45644567318143126 -0.618065807894843 -2.0564825524074992 4.0503614900076865 12.201253925950047 -4.5741483748596048 -5.4854016018082135;-4.4134556450711422 -0.93853922815301061 -2.9560138569368108 6.9319791800755235 3.0376809303719408 -9.4814117106115638 -2.3948918347654837 4.7601156478471944 -6.8111535023208791 -9.7048538307687799 -0.33508405072134873 -0.42179113489172626 2.8128628506883224 -1.2265556901158092 -1.9363093651560006 -0.052337960712421208 -0.236710595670479 -0.63573713657988973 -4.8253848949066729 -0.47946642478226814 -1.0672771895646229 7.0754401327793843 2.2733429399173586 -1.4846413281154802 5.7553556053483161;-1.0468082969038537 -0.16162632741665861 -0.78853733147179628 3.3264440765905334 -0.29441239511826384 0.21926513474360648 -0.72674791314202414 -0.99966900205431963 -0.054229512700416781 0.054477847654852106 -0.7071310106719364 0.234299106118666 2.9577157917782753 -1.3607004521185406 -0.84936912509193752 6.141199043415031 -2.351632832868531 6.5005444452363106 -0.73165425282928032 -0.37859304975724928 -0.55021318523304408 -2.0643025658992582 -3.8003882151104422 1.931472826371577 3.8564564096882612;0.61140314396484141 -0.055204515488503983 -0.6081337147711674 -3.564121244067664 -1.102763459379924 -0.91067091043279347 -0.44365568851901049 0.22235336859424701 -0.89722868129887323 1.3860583906701125 7.105655241684274 -6.6051160527907369 4.5165176756383989 1.5551713585996652 -0.48570796910449993 -8.4968600838856272 0.83526193943516669 -12.347092898609391 0.34074131048227413 0.69579303843194829 3.2335877005159044 2.9287517843843567 8.6911437436763173 -3.237762733728514 -6.9333468592955443;-1.0378005702633708 -0.10724517378579974 -1.0020801511971298 0.51251436680356166 0.99129096659998839 0.56970382373776751 0.086925140869782702 0.10951792736344829 -0.21805648661908747 -0.81361782722659282 0.90167305276533183 -4.293151347675308 1.7903237828214338 -1.8444433660842392 0.38225873364930479 4.8566881634279344 -3.9970426964730468 1.9126752204893605 -0.4507243484554781 -0.08404415504481097 2.6341137189558852 -1.118577768372307 -2.9464855872083144 -0.38022166057173951 -0.77989746301211627;-0.12687990162967283 1.4482687648478003 1.0921835193846445 2.3563339462263446 0.1003996426919182 -2.974914727916433 4.3299542771494943 3.4356642250209894 -4.2386689587009494 -1.500103504234211 6.8743923247575394 3.8787208268510067 9.8905447209491246 5.5913883385258911 -6.1608252616905439 -0.91200588320884091 2.0524486627598875 -2.0356584421620298 0.064472571919079513 3.5633516603191904 -6.8099135976537006 6.9746969264738654 4.4886340441786965 1.5188552832825395 -0.22362236122154941;1.6004671285862118 0.45915217448917595 -0.0068770993879333055 -1.8517374643776292 -0.86407536411175612 -0.66612469285799247 0.38401460339104132 2.9153469350683032 1.3664199803229042 -3.9932294654513201 2.6779062079112066 0.75709223825217065 -4.3785584980359227 6.6790137126036653 1.7867098963566002 -0.33048770174804032 1.4217266031382263 -3.5100444205125103 1.3527756936007223 -0.15846565437079865 -3.6010833720128619 4.0704748238287847 2.593593701744656 -4.8050079026515817 -2.058526240356839;-0.22992737884030828 0.051521395334081128 -0.062347959061605923 0.91849135129196424 -0.15624624045183888 0.092489873874941064 -0.11172793034780171 -0.16766537438694123 0.106703868106462 -0.054618708259422416 -0.91898065392259543 0.30765269649761456 -0.23657366024591328 -0.16090457095501856 -0.23574202644100031 0.60539251096460278 -0.81992722561995701 0.54706974874236924 -0.094125790987757696 -0.22681717352566355 -0.65040748535485748 -0.90907794389357832 -1.6898040472990541 0.84713933263978325 1.3774133990361972;6.8509826914259691 -0.19470734566451661 5.5982305770618845 11.436567390784809 -12.652567476074147 1.9134873877130532 0.24300460003159213 5.7518999429812228 -0.90821158313958161 -16.991880403416701 -13.310681877944949 -2.9406434923249298 11.24942866022638 2.8822384936325092 9.4424174291820933 -0.48462005743086811 3.5462396836855974 1.4292667814011142 -2.4843071560141206 -1.5218823633500289 2.9817995962135009 -4.4757437731978502 -6.9830134035820492 3.4615258145673709 15.255532523716985;-0.79416901015438879 1.578826690954418 -1.2655477725645219 1.7785849155278215 -0.45012955801022697 -0.9922245827593551 0.77566657394372029 2.6455868559766049 -0.14519102008503063 -6.7124458633660717 -2.0747821987140562 6.6972482368637545 -6.1646977740046687 3.7912660055357978 -2.9306194326409511 -4.5692683606847444 -4.502469773427193 -5.9822930939092256 -0.15164886986386317 0.23277818688764731 -2.9549994552078234 -0.5365884159888239 -6.1336965690922369 1.3397322260074114 0.075995721648456568;-0.92810084199501797 1.7474454461755591 0.34301315550288386 3.3971241920787469 1.2163994880864184 -0.70595371349438363 -1.2394235137979372 -0.69146338369969962 0.083643738688797556 -4.4620566406862592 -11.416721770887271 6.403455354969199 -6.6150284854534354 0.46743870523098385 -1.7268232421627916 3.1567632953497173 -0.56013260220944983 9.3559707935201271 -1.2229881780350829 -1.3077466986327146 -2.3187484331595507 3.1486314536126727 -6.5959957426026037 -3.3334624933721555 5.0394272089428354;2.1899116505342588 -0.14998107921651097 -1.3166152660511976 -3.8463922244365603 -3.7890264049293285 1.0843282641623557 -0.50958562292297749 -0.89137173899719968 1.7465907900936388 0.22624209065770351 -0.20984281542860297 -2.9217616791336569 -4.5605858927613427 3.660359031546383 4.466875217174584 -1.8988763012670713 -0.51149746128981866 -2.1618998301192076 -0.39242673188797417 -4.4994582199386386 -13.724586327037038 -7.0196451187944513 0.76389102450846447 5.6009830378115408 3.8743051450592891;-0.27072834644833604 0.2077858273913856 -0.42665438658582477 1.9826294732892786 -0.43517872021186965 0.052691770968794509 0.007261007732610395 -0.84561892982424214 0.14229502296936686 -0.013876836699375918 -0.95220680655919943 0.88630055622308201 -0.68201847375695956 0.67040591972693253 -0.73507148605257433 1.4089680518942034 -1.6711959843856095 1.1933374257202609 -0.091058128457710927 -1.0333465110609568 -1.048299273827747 -3.1952849902076275 -4.3621653138490091 2.5223925371780034 2.4659893981272445];

% Layer 3
b3 = -6.0366033389487601;
LW3_2 = [0.03671849843544546 -0.34678396466874023 -0.19272258592530714 -0.0098148829370463334 0.51994196771215317 -0.40359751358874246 -0.2680491068062506 -0.030411858946487201 0.15727147364055172 -8.8236478183413851 0.0056453204913986489 0.13044497050139969 0.049823357180868416 0.083629332877822316 0.75173784858192694];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
