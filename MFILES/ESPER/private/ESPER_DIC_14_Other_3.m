function [Y,Xf,Af] = ESPER_DIC_14_Other_3(X,~,~)
%ESPER_DIC_14_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_14_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [20.743098155774600144;-2.490173811390676839;-1.0059937777611620557;1.7644217099775265645;-35.880399407807779255;2.1017168138679012124;-1.5839727551627871271;0.84701458780689364847;-1.6526360569866049843;-1.282721381668002314;-0.82796547821070953788;-2.5814160007991957535;-0.18583307570761994909;0.41516245589611289191;1.6002696997713798943;1.1335013598947594193;0.17933050610638071043;-0.94247980430705091681;-1.1497028540736224933;0.54715011691597115195;2.402127914926417418;2.6410373343953033043;0.78741125119632704443;1.5906728454154659413;-2.2442816883766600888];
IW1_1 = [-5.3112796862482740679 -13.099583780238603481 -18.69572207511083306 -0.67414202417607094198 -0.2100049949909436886 0.54090211664974185979;0.77496949645015666963 -0.78244174968152724325 -2.5360802846305947611 0.47639609790644937837 -5.4802043025766016271 -1.8442973255999677296;-0.22319115358585800424 0.26082997745705666093 -2.0404215212700376192 -0.47451999858028753865 -1.7349280298742635331 -0.33843024365804685871;0.34760923377706492987 -0.35682456619939167952 -1.4255507101998754482 0.63113141929231453275 0.032880015742236999576 0.4124911533047350698;-0.10284305965249741777 0.39293023864273485257 2.6254050106123663078 -9.0867778216319141649 0.12035699725027884655 -27.697056870944393836;-0.7504623014493447819 0.19982937937222289282 1.091557669977074152 0.075202124623616181665 -1.9262905608047673489 -0.41888656796194151388;-0.15143195535500267312 -2.2476262850971564511 1.376004182930714359 1.2595662911923717342 -1.5811007329145585487 -1.2993327524259778993;-0.27184795471700701208 -0.26677770881074486242 -0.58698298278484617452 -1.0205685897984451138 -2.5676917402830423676 -1.0305076219713031893;0.10233181653189875326 -0.18594889371512268728 0.6534895207949548146 -1.5330998127299790834 1.9034794049354715195 -0.01004419887895563121;0.47637594637933677877 -0.44029979193677759586 0.21444479897489820974 -1.2365680543340018538 0.56806873840722005298 -0.17878165256277189776;0.49112334117684491863 -0.039144614206914785104 -0.8019850723756603017 0.54877165447235787266 1.3337681131861522932 0.80375296450007605031;1.1797272656530435331 -2.4602152687210998572 2.9112571248515273226 -2.3534350395224463703 -5.7706797978174604324 0.80488512714083570998;0.12240010229462022773 0.016019528323902507139 -0.15564801475259568142 0.39656487053516203956 1.3186598038947767719 -0.33963266287250942765;0.40991572251948982242 -0.32231649531120237784 -0.16151744260473160919 0.20596093607579463169 -1.7286886894945332482 0.17436110959996908853;1.6481020260340082384 0.53011473099388561891 -0.15642167046724095303 0.15542730564767595625 0.82197927166360040818 1.7653314619300355393;-0.030615318481147735241 0.41912541405196090949 -0.31529970042429822374 -0.025604447649534321091 -3.4291659250096051537 -0.033292076985993623861;0.25645599939312574422 -0.25946740641067644884 0.9669248155401337641 0.61877429528386851398 2.4079379198335613133 -0.16620555703744549492;0.21729212440153616859 -0.27267063576425654148 1.7657946100585897309 -0.078820865922271304838 1.591671769221494781 1.954506744070543478;-0.46338594394694287981 0.46325835944754212292 2.814526013629916168 -0.11069037965263972545 0.052051775195080661474 -0.12514806867879321728;0.10884824040875340501 -0.22748528605374251921 -0.16472764638407183524 0.035303533699775936638 -0.11427596736857095761 -0.48740084877926270757;0.38937459454342615572 0.16928337224372683179 -3.681923231207673286 2.4465099419192810615 0.75881429014614387718 -0.37972596965941868286;0.27939954647142301036 -0.23691029221565687579 1.1089806493434541945 1.2254216493388003784 -0.11382867000073160213 -0.59432683942191955051;0.20979351128991804987 -0.10925179730236227182 0.35831007300955497463 0.99810595531453016882 1.2579574964432336248 -0.0047422480409033199167;0.35003685264185546711 -0.48584960097733309592 -0.96631068969025901705 0.31144320739827269229 0.32280038331521621053 -0.25963314409303323016;-0.19545715715737058127 0.42195619221683655642 -1.1839716559967112808 -0.56703482441105368395 0.49804016513447663117 0.9022704865742808833];

% Layer 2
b2 = [-3.5522449943524612159;1.7497490435132581066;0.67527462002111837691;6.5774055953397025931;-10.241458101655098289;-9.159373280259059058;-0.20860697632411595581;-6.5901127404619987971;0.77565902260879227015;14.846753250465059892;-8.7002383408461589909;3.2348200267158149224;4.0545592844908533436;2.2011410568098304097;-0.13924108765793632991];
LW2_1 = [2.0587008739368477528 3.3781801182741144629 -0.52274739591955377005 -0.30997218250268321338 -2.0928851522606803925 1.3852528667279357943 -4.4763365398608172541 -3.1719295085159786574 5.0221237733120736024 -2.5754695175114248329 -1.7139329820477862132 2.0906150159390297638 -4.6372817433884172544 2.3871308032428850687 -2.5890330384129147667 2.5013981666568803064 -0.055125813633926795676 2.3339043957922824823 4.372394728903453931 9.846369495284184481 5.5884938536450325941 2.107311335576073752 2.171453393303819368 2.2506467544913442147 6.3632239245608097633;0.00062953082945018442457 -0.42270665329402384858 1.0311012013444449398 -1.8865062554961797847 -0.62193683363550178456 -1.5165393859964486634 -0.67001217536487422954 0.16281571845889863948 2.1831742097001693992 -1.9874065588393967641 -1.6918329375520870794 -0.50814893902558744276 3.7745836542484503262 5.1462808831435671308 -1.0917616000070455851 0.62324193748577183527 -0.77817092409650623352 9.8353257348623773434e-05 1.0790400733182472504 -5.0758040849439911568 0.33166157442466354111 -0.97143458493440282275 1.3256301324336094982 3.9344755175536398895 -0.71413669216236996817;-0.53126391462340549765 1.0159698765550908561 -0.79033824506523286946 -4.4429602106149248542 -0.51985003501208826293 -0.33476785663455382869 -0.067490468435756525989 1.2132407370513340616 1.1455238835767000971 -0.77889982960675663293 -3.6160530984236580743 -0.10217357259089134003 5.0670371093906085846 4.1354169709614865269 -0.39525369389643466578 0.98492806274711353076 -4.5864577200389193834 0.68926220893171352699 -0.10410594928989169716 -3.427491533613900021 -0.26781557686866558354 -6.1283970665821376755 5.7583817688288911896 7.2438244506167084324 -2.2499085309556052792;1.8519397261541572508 -7.5160709955181106423 6.3107821484201203077 -2.5729658425662047527 -2.1282865633192016297 0.89950097317627097926 -0.42239256678139586176 -5.0053040393938843522 13.405980524846926372 -5.6189268657481177272 -5.0376431126038303532 -0.17235662682399630063 -3.583468921352323644 17.532090580876758423 -0.70076813424741080105 0.15875577378640975956 -0.3847045154133608702 -4.5106136001332419738 1.1356349653928734522 -8.046873778676983946 2.6420650070361126893 -1.857109534767710235 9.185851478801719594 -4.176153635038477141 4.3865500001367774274;3.6721155862913703594 0.34494551929181793692 -1.1417099446989524836 -5.7271771295034410443 5.0737483800688041313 14.068156061342305563 1.6575033801614893481 4.684813631985581317 4.5601960521554936179 2.7917542442150993232 5.0900365834869170101 -3.324173154039546052 -6.358666878418713253 7.8819355509817832228 -3.4578089634564728172 -5.128755270770025021 4.0795153912089787696 -3.6104898719871618695 2.1221580420016032953 -12.326908534357055913 3.6127630893346891483 19.058041242805654036 -8.038787376964219078 7.9669876337708416258 9.7553511775600121325;-1.0832446046549066843 1.8080440598210234526 2.6901704531186600988 -17.462991490589839572 -5.8024361146074827644 1.3573699046646607869 2.0969175658435221798 -9.8065140944463902173 -1.9979092579012258657 1.3902517406824068669 -11.186604034785030848 -3.739500152014798573 -6.7463807580395904751 5.6130801669742966808 3.0616178105199023385 -2.7042774677743892653 0.35389745690397544919 -8.6768836631186978536 0.018976126322372086769 21.223420243965026799 -3.2289162119534560169 -8.4222269306509414122 8.0565978588031814667 7.6064574125467689925 -0.27433399788523010754;-0.15553015939722711347 -4.79477016547168855 -4.5170007918002168523 6.2962787922102076976 4.852408765446080352 3.1568426703105774145 2.9927510498318672383 -0.78413846858629210335 -2.3367132633243050677 1.0453956457170334726 -0.54691979058010431469 1.3462713730943371981 9.4605117247044159257 -0.90497595836071442754 0.8763591978540840044 -2.9936435694625740389 -1.3277970547308939331 -1.824003713791596315 1.5392388653474131655 4.4343990525153467175 -2.6869463280688883344 3.0070982797686220955 -10.092099509191923445 -2.5708042159884123556 -2.0729090423589995318;1.5169116441151313524 -3.199482050243473541 1.7147451129302881956 -0.6512127017826366826 -17.51316500026786116 -3.274048293531163889 0.6678655541552805941 1.2718334159473885236 4.4644973435436616782 -3.7586431599096541412 -10.537534206880769361 -0.68373508742025068674 8.7470870635007855753 12.371077066457200289 -2.0895320582056062797 -0.088500201787355098348 -6.476745691425743523 2.3874091037935092352 -1.5553127550217258346 -1.1462544188844050463 -1.2477125402460667036 -9.0762097708426452414 15.326922126691783888 -7.0232795156463438957 4.0079752189888750991;-0.064277274089393557355 -0.071345830835592649599 0.3653935936431164655 0.67126160923803412928 -0.18859578565248227844 0.47368068924135314779 -0.0081553662849457812106 -0.01881532993728197295 1.9316579439254946138 -1.4540588167104619988 0.30178883734063238764 -0.13401812676207386366 -0.019694624808193447046 1.6276136844842161722 -0.10816510768677474463 0.20728765615027869296 -1.4744055207078941017 -0.0074117730638950055783 1.0425252928817478892 1.2637585205087435991 0.19514642784270821996 -1.1015655255752838659 2.8420567954064837046 0.090666856168652720793 0.087579907039057547369;7.4120808455054492114 -5.0845447725066534872 -1.3930010764314235683 -4.5515665161622518298 32.221711780762198885 -0.30086198251730478237 -3.0727002598280663825 1.2461808329088874814 -6.726921931663699894 -0.84573276842370515016 -2.8918256103013719738 1.6769686586581717958 -10.725259175474949558 6.2428089895859386615 -0.86518822862263300433 1.9054974898711010134 5.7137377955230412852 -1.6853941459671357705 1.7511371030605347165 3.7090494583386250937 0.79497256663314241898 2.2418114540141762525 0.85984491986536315533 1.8616616690562037828 7.2318434459018865468;-3.353522170041303152 1.0979097409526665796 4.8947050975509549531 5.0005524397459497621 -5.9978304174373295865 4.7631734611569163107 1.8541690154715402272 1.5202435089051962169 -3.7044260356433813541 2.1896989823274766174 1.228090076138941944 1.7146384273092982742 -1.9894549388977913473 2.4621741193213426691 3.1296427753338935673 -3.4473308892302600981 10.659867344924936816 -2.0960253241246245004 -8.0269233030551969676 -18.203382671868705955 -1.4991176291376473451 2.5079001558630369395 -8.37751096323036748 -8.5253926351322224519 -13.572490821601721933;0.058456134120826078182 13.959767274832788786 -8.2301784218676790061 6.5560237412818649361 -0.49243457244490207447 -3.7667147440310397855 2.713010772788761571 4.3402480325497307945 4.5377003168180367609 -2.2709131597843881245 3.3476439532389186127 0.13668776920196867852 -9.7153956771977423301 -7.7770180289098780335 0.20119516559580874482 3.9673152076040687497 -0.99484104982460641597 -1.0546247875622365431 3.7517508057131419008 4.7899155954156373838 1.7476222922358830569 -2.1656846296110523475 13.186961035116457452 -0.57923427076654088186 3.8079453603579840326;0.1847069932142255122 -1.2577946763279705955 -10.059386776384569018 3.6761964463804961412 6.2641718875478495931 -0.30465064495289073676 1.9233100944665721954 -4.585065323375697055 -6.2854214663437435462 3.7229695446934285563 -7.9888803850027603204 -1.3579363201248242365 17.006115892657724942 7.5184064973305186896 -2.3558004653798518824 -4.0754025935453661589 -13.470316324992856138 -0.0082434728883138286976 -1.5354566818188453148 3.0921171861010656734 0.16446536453958390811 9.5220601435808323032 -5.9387199030598143423 0.60835144397986651299 14.507468536312620344;-3.9723730103293588556 -1.4357081254853636398 -2.0122424676697474588 -0.44744773683958410926 1.2058831203037259083 2.7249941542197588795 -0.62308675100922095158 -0.13172845336452890241 -0.65380787010165219986 -0.60926065043472155125 2.0412248258029888071 -0.91586187978760924544 -7.1389891918734722509 1.754097019684717651 -1.1479873902418991083 -5.9691526625438262599 -1.6214746702744897711 -1.6363808304496494372 1.278287898126840183 -6.5331521256547011589 2.4981422807007036546 -1.5889048096478961547 0.98158862273472236026 -1.1190573105983543378 -2.1103907983395990833;-5.8935884656055410602 -4.0348378263096922325 -0.075417933269017314868 -5.7493140797172399559 -3.8158165056206838628 5.7935008700012824434 -2.8594648003605485087 -7.1199095137246102283 -6.6174806453963199715 2.9614256906846030404 5.6312323260816699033 1.6696758252311350024 -2.5931210360963650174 -5.5055962477624795781 3.9836245615659224839 -3.1621308775110472666 3.6526870837495635236 1.9557654289093173716 -0.6487690177026572691 28.537465444237415824 -0.032187267825489675188 13.124840285633123216 -17.009733456213805169 -7.7877710749855904027 11.534103256231546197];

% Layer 3
b3 = -0.67560850961012497429;
LW3_2 = [0.04031572182453081743 -0.31043971167340184136 -0.20713708524183865878 -0.040956228165064709201 -0.018146201386702913438 -0.025034157850491060848 -0.040932360412399906857 0.044168331716919174978 1.5369411555150322979 -0.020233236688714698048 0.025389222399940850755 -0.054025583495798015776 -0.039175868663550300619 0.072104349542912005155 -0.035980707411708411081];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
