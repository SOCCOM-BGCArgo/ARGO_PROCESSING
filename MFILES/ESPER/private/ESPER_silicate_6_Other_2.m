function [Y,Xf,Af] = ESPER_silicate_6_Other_2(X,~,~)
%ESPER_SILICATE_6_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_6_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.8878124678767584932;3.6489520773797603503;0.34354118119045845559;1.8011127496993033503;-3.0660429262043327192;3.6205467843367729053;3.4815134752761620618;-1.0347072837313673332;0.91402660072450159223;-0.66526727431498211551;3.2129629033234237134;5.7798695638402630692;-1.890230239608067464;0.64597786335759488363;0.75768815500120179074;5.3573131866436618509;-0.55820953031665176969;1.3227180601176140584;-2.6111514947363292372;14.495871298717585063];
IW1_1 = [-0.70816399715501210377 -0.13413817090016971756 0.37969731058842132176 0.010185705957862722926 0.77062879407876272442 -0.14606951832398429314 0.76147193465526274991;0.011806820668572210603 -0.03635788834817172549 -0.55142643668988011729 0.34695483678298538743 4.2467260395299524234 3.639934637948574192 -0.22963670801389415854;1.1043872646979677743 0.0026881408612331471851 -8.1177016159232791292e-05 -0.47538063343139863592 -1.2237244413934118548 2.3245117191528699152 0.16622642191899611452;1.0157394413665334909 0.39666539362972574878 -1.6943481508973499139 1.2438303508570127676 2.2590938488388623284 0.77780861366378073463 -2.1190978144153000962;-0.13886615735876062239 -2.1692520674072826026 -0.051748307527094389302 0.25650888992012754741 6.1168596984261096594 -1.6593780206289487911 0.20182479767401506621;-2.0674295820817238933 -1.7437220449621413376 0.1230104049756927248 -0.31855002517032182663 -0.99836202712164390238 2.3663589700076443911 1.5530324208555186249;-0.96871583372181901961 -2.1515178972622441833 -1.301243028567108162 -0.031606066753448104623 -13.955226033616551007 0.45313775814803780584 -1.7457111176173734091;-0.53666054402523744038 -1.1805568845247118581 -1.9455500543741635067 0.54792985324946008596 -2.9807788083192692241 1.6257838112793241425 -0.0028217963844274114582;0.13123007682037493571 1.0642291213155385954 1.8055042868188662109 -0.34769845889170331033 2.4546372489495049685 -0.53558803947997657424 0.60595939697267464652;0.67967197363241127483 -0.30435209436166726915 1.0643828001591846277 0.54810131610738166419 -1.6104151296319748621 -2.0121143041246400962 -1.3718276315617135008;0.06634258907090055668 0.0082227487392901865704 0.040051871065633785907 0.43116366164217018175 6.0932485733536490002 2.7757762434079022995 0.099074287000345234722;0.10964149003208724376 0.0089020743003544924171 -0.44464593088447179614 0.088333749447671874866 4.0499354160963045857 6.9533113898344991455 -0.19512381273110734892;-1.0968596328664534933 -0.056514371160371341951 1.5126967180400943125 -1.0327709008872345553 0.86356467456257768323 -0.89863849802409834222 1.5737349861029465981;1.454473435873277376 -1.903050784780804694 2.0316917722931844281 1.6550406282204994657 -1.4610273930844799306 -0.018427980379742754657 0.11369275488761368398;0.29131393382328207853 0.25542884183537400977 -0.49820639343719330672 1.233113729429751837 2.6190909248971068202 -1.0834227464561141385 -0.26172174270170789345;0.035351935972627999971 -0.028717298591880158209 -0.63521397744278995656 0.2694860678902581963 3.2007778996105766822 6.1334910835366711623 -0.34482955615218069401;0.056753061246864723588 0.12925657141530155769 0.62566205469927338445 -0.10625891550516811113 0.3023008321331831505 0.62729752753933420983 -1.0481425075990278284;-0.12908020514224982644 -0.066952107369613308996 0.65520723071925779379 0.66960721903208320072 -0.91584724092799663087 0.73695595122334034421 -0.22345834171847039906;-0.092418374478296469454 0.52245518492922782272 -0.50709665808223025607 -0.25618877064011985611 -1.7688876531839747841 0.097491681335219279592 0.72533861460545734356;1.967194218328465638 0.32399683491819897263 -4.4920762818981962994 0.42301981968542795576 6.9633790347163859735 -0.47476867383295301428 5.1767775497439281196];

% Layer 2
b2 = [-3.0978443146647873796;-6.8914821196079394383;0.95615581087540713057;-1.4787642771929339069;-24.942384763665142344;10.918053988616764016;4.0652198455095902574;-20.921271760055294209;-21.81348258755747338;-1.926752667942764452;-2.1392857834707954545;8.0914007689853235661;-6.4887069239495316353;3.1383176824936476201;-8.4186671374846593352;-5.0559780454562313068;-1.8885836974894913975;5.3153829851728806588;-8.3369034337296845649;7.7495089239375873902];
LW2_1 = [-10.04799034922866241 -7.8216499624722422013 -18.605930220516885498 21.118181868326399098 0.023025070334114071391 17.442130222735880096 24.005958030605047071 8.8864048645466269249 -14.270500499698195895 -24.316287028840243067 19.156505319720917413 -28.53486186048441553 -2.435434373216256887 17.287484563710954433 14.293465512091728442 2.2945469743253625872 -17.425022719611018118 30.993089837089549121 8.5327064716973985981 -8.321191115634904989;4.4632855387737953023 10.423756684611916512 1.20708125387132581 2.7197169896621589125 -2.9274314281505873225 -0.60956646358028832022 0.33305116659640160437 1.900872182591400561 0.021279285402467328775 1.618800337022512803 -1.8751008969325491105 8.9975042144889982865 4.9942732266863130164 -0.79686571207845768861 -0.24915415821589603773 -15.883380258711740751 0.81028471693208448112 -2.0177307770924679531 -6.5561902681386881042 -3.9344480848175824583;4.4523249512934501837 -3.3218892581962897737 -0.43223654912345904622 -1.4535574759906977338 -0.033153733406316790444 0.31414987796610832627 -0.25307258887088146526 0.25867407780538104189 0.54874763079455868287 1.1496740234557731863 2.2577051460260562088 -2.3446846132773950799 -1.2415048235095440532 -0.18633535815265381275 0.25984382494853552892 3.9108516027518982483 -0.21701074968428002432 1.3746550668440316034 6.2060152850197320973 -0.97838066033392978582;-6.3185493204825835534 3.6477084368256575964 1.9145699393052220127 -1.0012671361270399917 1.7764026978770854903 2.2265586617901247379 0.048028516967899073653 -0.031494154260915646626 -1.3092675001228939458 0.56616771264646070794 -0.7776689239567322609 4.7689698193024687711 -0.27795310047206089887 -1.4768086298359819342 -0.89870516811682810143 -8.2736443323720472165 -2.3633823843088404004 0.55459512222885443133 -3.8830515314228000179 4.0891111297832516414;-8.3189027902143592996 -3.3378922007838238706 -0.75173555849376949567 -10.478402027018244524 -6.1289557731520236672 2.0258595140117949818 3.069583895400197715 -3.2418939560666957256 2.0238256473253093404 -3.4285088074981686646 2.406470540549874304 7.4266592959089221537 -14.783684996296488023 -0.53666967399238529879 1.1482207678869293943 -10.947770452520932949 -1.8220935628760794867 2.2815244543970032431 -1.9623624123137688446 11.91659334222403821;5.585349947391359926 -4.6932578182403679179 -0.67886631229329008619 -2.9274654323270459244 2.6363361518474479617 1.2485690588109865651 -0.48505059379166820532 -1.5171601243964976113 -3.0535743644781021544 -3.2975421388323469252 0.54884503648310467572 -6.6996137186733575319 -5.6846371731385811898 0.85801782579879815049 1.2861902093771007127 9.0549444903265161599 -0.80020070318623304217 3.7557043638512630501 29.881799145184938737 12.901888082981168182;-10.709500573579612492 22.307021511337435271 6.6677366816498588875 16.443858991346161247 5.7515230230744061046 10.007915477070014276 -4.4417569465895594405 6.8846327790888706133 5.5497141467109347701 4.8582381007634545256 -0.95743889933461590047 -13.736770440138199589 17.586325974402416961 -5.772943052045388157 -10.450239633318329169 -5.9933039385491584383 2.3354765240198775977 -7.0019328777177252121 -6.041773094855508397 9.5678147127382544568;-2.9925329506018747416 -5.8709733799430185996 -0.60931938819194231272 -3.4159664065254484733 -2.2053602148553395068 0.34629729389455354838 7.3815313734168714888 -0.18124911707570334762 1.6430295516469510808 0.33996634904864198035 2.1293496895396502033 -3.6874897299608702106 -4.5129065925408129445 0.18738537603169411194 -0.61427367217952777434 6.7464289137579029898 -0.0039539351597058791654 -1.0038951160772928706 -9.7579724174909099332 2.8395863770006894988;16.880684857381023534 -23.828532591223435588 2.6100578958738553936 -3.8091618084343674688 -5.9471993149073423268 -4.5743661368745973661 3.71093973173388747 17.184093777536158854 2.207122936384225742 -1.02383661389284919 0.048859352644613288086 -6.5147957025099705319 1.7682766464072263712 -1.8605317400481478085 -3.1130121094982863283 33.172078851273369082 4.1665525487595553855 -0.51442992603067216884 2.4401322815270787281 12.87307863545501263;-2.9873898684560207251 -0.85525477462446952703 2.1080476573355344527 -2.2034590260139497175 -1.2976669515267915678 1.5454407043476892092 0.004731939514248349743 -3.8781452423321542966 -2.3132768345850478475 1.7812323467623583095 0.46068859548990709341 -9.9422880707654357479 -0.57075852683321437464 -0.19145843173114127089 1.4987935536108445422 7.9106759709241822875 -0.20000999764498489375 -2.0133922697886843522 -1.5834661451817706457 3.5556352772755541736;9.4621729258217861513 0.42228136416465311687 -0.33147318463918451492 -0.041454042357003298425 -5.7508054558640226972 -1.7963553556843976367 4.6309155327517075307 0.44753095485451899194 -2.0139521059250364843 -2.337245611671380896 -2.9224598289328911349 6.3099820645292998833 0.11404649552152738845 1.178760386588521003 0.95499334468073848736 -3.765336774736586456 2.343704661123609867 -0.18499341922255901904 17.204460979716181157 1.1072368562466192721;-2.870248974588286206 -6.4116354209717965063 0.24261541825861834831 2.5367713838240542046 0.98898045936812351009 0.015929962505076073614 -5.9633371719759153962 -1.017649103952648737 -2.6999582867438594036 1.2093634590807500473 1.532088267223749467 1.6167375000931900608 -1.8302822865623045168 -0.87090168942246837247 -1.6460782760320862295 9.0348056533860479078 -1.473280308794015836 1.4357546973293773274 3.1450665416349266046 -5.1649634735503475724;-1.9852130817508146787 -3.0310248735910669815 0.070494520003176797118 -2.2434496553185989676 0.46917594789331446004 2.6668100751699772566 -2.6701871400811549861 5.4534647348929423671 5.7592074931349257483 0.91245449978794568313 1.2006529281383886421 4.752525651027764475 -4.3221502423146462846 0.30208060224694871509 1.1499398913309721859 -1.1239864586884331654 0.12369406869299305607 0.84966062319433144356 -8.2006954604142769938 -0.13305315118304975042;13.387111200027220548 6.9076031862230102831 -1.1306202393684452456 1.6628489477408867625 -0.42274184905214540198 -0.97753145497748539228 4.6001676977780903144 -1.4058697623392875098 -4.2384748616159599877 1.1046504327363171338 -2.9765955605868845701 -5.4757941325871843929 2.4965243654014965813 -0.55885487299144820383 -1.2972329911422293414 2.8407028604084563206 3.3686975196274171473 -5.1565379998099620806 5.3244058401926084301 -9.1324358926116246948;4.1114325072943174177 6.2040734045591943158 -6.2286201176390205703 -1.8384059243165651321 3.6068566348024195811 9.2248478970878853289 0.71370237672566894105 13.897442207248616342 6.5767331762372593928 -2.2105950982320932141 -10.546578197121490916 10.446260474363164406 -4.3239452834415947891 0.53524549760683792776 4.0281234507924557064 -8.0728165913553215915 3.8162218903413798188 -7.7296480879116256091 6.8121564533643201855 16.250622138912664383;-0.72180057331923253017 4.7159799089004792449 -3.0506235635052587618 -2.5022662735902629905 -0.78365649750038102184 0.14329587168209778625 -3.1103469421455400834 6.6991463242577333759 8.5722816433592754493 2.7777570949089969154 0.76980851877572886721 -1.3657255822901173126 -5.8374651606122975878 -1.3562293992930147812 -1.5851292558222829232 -3.246820620519994538 -1.5876747785119360579 0.085743463696650992767 -3.9502173753631142361 -0.69185425711449666242;0.20458610835663609828 9.3113130124886112071 1.6839133224261513266 5.7176149849836734873 -3.1038404004943647152 -0.47288621374950257081 -12.750660833523777882 -7.159541928396816246 -8.4456514122045351911 -4.3727903401930996452 -1.5090146130294190829 -5.7709257147700645518 1.0190283996282660794 1.8763105900957979255 -1.9350193638480983616 -3.005060882840372205 -10.727952583791561025 -1.0325912280270870269 -5.0668887355668186245 -8.104860499631321602;6.216639400617611777 -10.819119800399654707 0.95188777222009524071 -3.5593937246492179938 2.6314187806289743854 2.2076116241044392297 0.56900700537814641322 2.2007676848857538054 3.2920709345219845154 1.7603374353272622788 -6.1753882916685771676 1.5964857283503439689 -4.2489989940753627451 -1.1493861227425035132 -2.6518752264810148134 -0.52676867822070416736 0.673416440585381193 -1.6999737750432415417 -4.5659229827722098705 2.4845438060923066281;-2.2220522271423064353 -0.32773494058713048549 0.60102618514392014415 -5.25161462178592231 -3.0839789537608957026 1.7904416534772851222 -5.1200354616712191458 -1.6117532696097196521 -0.1574068956507910233 -1.958403226621932669 -2.1577690790375108065 -2.6047029710742535258 -5.7281963534688529194 0.99116512287934976921 2.7444174491828685625 5.6600470415783785683 -0.71707846324353530232 1.4070652266391645568 -10.016802719060137861 -2.4188456624542928886;-0.062068607496675448632 3.0725707358118818924 0.23950680311364974662 0.11654825196153531519 0.15191794855588663937 -0.044948278832182365916 0.12775665428275670421 -0.16120483276775623982 -0.32184581187032201832 0.030172671306071562058 -1.6688044611184777999 1.9993203797301830615 0.1107146234925009548 -0.065848390467297471251 -0.26248929402777859687 -3.3077567632413007459 1.7444376533918013461 1.0016341188767141634 3.4375987666126346376 -0.61022202805502789857];

% Layer 3
b3 = 12.200359523551965069;
LW3_2 = [0.0049696876270094950817 -0.083220392079900062932 0.18000178955880991039 0.056066824842267500018 0.041601957278101994731 -0.050715753688838141611 0.012711648400493600827 -0.17393284867968791807 -0.01229096166928216223 0.041913875871452982436 0.053259503221412381191 -0.035511423455125805393 0.052368101034188346832 -0.05653665059067530807 -0.012099425076743022117 -0.038560011454911058415 0.033320232079110216616 -0.10477602895298461505 -0.05832209935342045487 -12.973858869682727502];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
