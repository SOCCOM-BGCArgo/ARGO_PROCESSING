function [Y,Xf,Af] = ESPER_DIC_10_Atl_2(X,~,~)
%ESPER_DIC_10_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_10_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.1068925838877889944;-2.2839026927111851784;2.1616552661292502968;-3.7407515795726169472;3.0464052954340536949;-0.42658490492455319876;-0.08567553381698071735;1.2130678334375100125;-3.3156472326361412506;1.4052914526830220243;0.3484172765062397148;0.72296714062049904914;0.25304985941145630157;4.1141790294999669442;1.9649044654860190473;-2.2215552357792325289;2.1632281880531736284;0.39325687134132014666;5.6860295438990879902;0.060645328719802993334];
IW1_1 = [2.2547899833490143706 1.6838871695528951911 3.3656751061706975392 -0.15055001837957995847 -0.15539407121572426651 -0.10265553130361990131 -0.29932979322987041115;0.20070025537580785113 -0.35096806761860227519 0.36393247405298351227 -0.69912414232261121949 1.1090826584126181054 -0.2656201607166343015 -0.52543667977423769155;0.64786443455972164696 -1.3248058878117590087 -0.57325750326486346609 0.53821356021237487521 -2.1547448977296168593 0.38320151795950613272 -0.34897202005800243008;-0.16983257490986580773 -0.40225558772314790046 0.75336661685860561999 -0.10071596679912782346 2.7061066173568528725 1.2060744079265670603 -1.3103786167780751004;0.86279888183654429579 -1.5213476083307269082 3.2028057686761823852 3.5822273817320735567 2.1192325102555438221 5.0374096824563538988 -4.8205727948365852953;-0.13065873808097477893 -0.38816995096508594143 -1.578240718410996335 0.29433766571666536427 1.2712509767928097393 1.1347229889968120098 -0.8082586783123674179;-2.0527711269563000407 1.2528283958280248545 -0.63979854697892102333 0.096938222864280068625 0.48466742676366464382 -1.3848801520262310483 -0.79835258513831741656;-0.32001543709722962694 -0.26685620337161630733 1.0516482774146318491 -0.19696018096788289742 -4.1562251203302391644 0.79192756126312269238 -1.291911817607932278;0.10797462519518399859 2.1386612447057102848 1.1290393230750928044 -0.069628687412637044196 2.3469621666867666043 0.84950565115018139561 -0.17187462840374062578;-1.7151422247975895985 -1.4953966205982915927 -0.36333720481137693481 -0.22706911794615836087 2.913847738953849742 -0.25709474169211454786 0.7690229023463195368;0.41376027228045630935 -0.063534352925932416345 -0.06989764969090227209 1.0484795531530015644 -0.11503318587971428366 0.90539814635814053201 -0.20699529154550599941;0.065523914374739089528 -0.32415213115910596064 -0.98756567961917196552 0.94000820497919046481 1.1809473006066335543 1.3902678875951053339 -0.26965469367266636791;-1.6599589958982186033 -1.5091938943792857497 1.1816437184391410664 0.63223453675410468122 2.124322195349404474 0.96016621797359147372 -0.42356349976789076095;1.2857239232062698253 -3.1055740176680330933 1.9111677369714021868 -0.63531022831813577234 -2.8322778455710797552 0.12591764555442161444 2.1196440279742514434;-1.6461612303925703404 -0.28298616484981431451 1.1765110315138345154 1.1394518515507228162 -1.0384656329641723804 3.0129312503750114161 -2.707772408638905226;-0.0064372635358857918306 0.014970553195755270659 0.41700487910397648905 -1.2077364919714446145 -0.017625682309118036878 -1.2446374964904876048 -0.23173005316882924753;1.4615833135002880283 -0.76355036770847628524 0.52269317557888450576 0.18215514546148828257 1.0280806784956479927 1.0642739401326564153 3.6952243214403130978;0.81346988511818973944 -1.2421545766985588877 -0.24917757138023807761 0.12243148078378549015 0.87473253546755835863 -0.29147275769608871343 0.1024937540200684255;-0.74732399693643469796 0.22467240848614231097 0.30321620405311494606 0.06770277518498293845 -5.5394948296830017753 -0.16306898799284536006 -1.3848366897070678583;0.34880056580983564984 0.11475100392433650043 0.094952249874811336938 0.27798524382819755907 1.6562640695767338883 0.32211795954530958452 0.079665323155660730525];

% Layer 2
b2 = [1.465142246884443944;-6.4146733307502774579;-8.7133686244282451128;-0.35812139446898966222;0.7400328171000717381;1.4270139927238361111;-2.8464152876804202918;10.260203319111473874;18.209807819230313441;1.1051522793314920712;-1.1597252281654542028;-3.2958338806700990808;19.082658948928294507;10.650519776437450403;1.7545881158476122064;0.92342700832370505637;0.00248292415408825351;2.3438868058830002461;12.758803663381085514;1.7597680257091612432];
LW2_1 = [-1.8212502697976489241 1.7214550783949815749 -9.3208344301605769999 6.4523766243281128752 0.092363056589830253018 6.7445530664312842717 0.23139514466321814412 2.8587849598213828095 0.77230575189899208777 -2.138953095813987737 7.6858580222396462034 1.5981195742263245574 2.7025784297882560203 0.91806028716790410993 1.5416693952265629886 -1.4591747214089287876 2.7605537827140023133 -0.047891440477007642118 0.228689534046328663 -1.4580181651749264393;-8.2257114570481366655 -1.4622462066362500455 2.0182809872408720153 -3.760545040940725503 4.6318131304776919421 6.6175581813775012918 2.2125525384676003604 11.039103268552404202 4.292857691652514518 6.1059929382026414402 3.821382041614327818 0.10431248918792676572 3.6206906278755064399 -0.66038440067020987012 -7.0949350065058949255 -2.0307801959169315964 3.2257303774731838075 6.1853405906357261657 -6.4348031170615795915 -0.94612895726763379667;-3.1009208454610153183 -2.0136847361380891819 2.615567383778730548 0.74685104081810027576 2.9012228716544639084 -1.8243094305268534594 -1.7433825641933033967 2.6270807250598937621 2.8843299862599640626 0.81318552626024342977 -4.3632245923292192202 2.0472903102233503958 -0.53248489480443628175 4.3197644155995664761 -1.3693970856510495615 0.88603661571944214437 -2.5315963296324679455 -1.2589217294686869675 -1.4101479487716910288 1.700878025158410578;0.84395157449364077706 -0.12314745472312726982 -14.355832831342699052 5.6274683299511174539 4.0476167375898954859 1.1168539362720726338 -1.6220602633484231259 -4.0663502497993917473 0.64184169209822239388 -6.2728565664315603101 1.058020282732170303 1.7862386185647740611 6.0977845137686488286 6.0179069562482547795 -2.9979230639929999036 5.0639417224848637389 4.3263207094314237722 -3.3500951256143043366 4.7912147019832502792 0.78579307439656753687;-0.61816795962545323384 -0.53496726782423109636 5.5823747046101042102 -1.0092856768545863666 0.56622226115737051 0.6149299604609511638 -0.83049380389289451099 3.9519505780648835902 1.3942900142837160171 -5.2030027608479674228 -0.20199766419062065159 -2.6101849743680949345 1.2976202125312714664 -5.821703414418065492 -1.2994577719693343187 -2.2026901023338689711 -1.5789150676806453788 4.6898116770837612322 4.7693023167042669641 -1.5564071536086929726;0.3909602208081564001 5.6072739237085622577 0.24668524985300602226 -1.6174253078374483117 -0.01234624226520587148 1.0694579890202646766 0.49704094353120076288 -0.53433569033928141057 0.71109215508730261313 -0.06952936723146196929 2.5794712340610992385 -2.1451702235646181727 -0.64474057676472018574 -0.83436346821467599622 -0.14438504877376767688 -2.5170433869690600481 1.0607202029647289088 -1.0889613467346386244 2.3523135724031241089 -4.574697537668583891;5.014284104397995101 1.7486801198355670373 4.1679356877553868088 -1.0468938547981583298 6.4356006929654876458 -2.1330117757833577663 3.8490994886367362326 -2.6941381933231243195 -0.20647166741402361856 2.7811929205979448732 0.099524610425424153703 -0.16642949868255740853 -1.2847256813188503433 1.2903778642442520486 2.9085356282820686857 0.59047836100420858507 4.25898949274034333 -3.065995588980773956 -2.9341860238797052851 1.3567359726856558222;8.6264015469507455691 20.684775046541204802 -3.5483276287842135943 -9.4209973928667967158 -0.45701825053525280129 6.5623037985198831024 0.40432393408516192901 1.4458053856304000639 -4.4620330198464461802 -0.81014712930178200967 7.1614768850387342525 -10.653336149925120679 -0.950754823831347462 -6.0798273195448464534 1.1629544987318991556 -12.441564376033024786 3.9378891822938864031 -4.9734453703144607672 4.909876232177406763 -5.248373161243881313;22.014045925883234389 0.8570519778651776166 0.012038289824544353562 2.4924608565418449047 5.6549794519570548701 3.0007670705133473454 1.4858309337347579415 -2.3062976597062454509 -0.30083525620290063607 5.4665290062359321865 4.3924843039112779763 4.0407961655819786273 -1.2474075706110900885 0.51121877364328194293 2.4991075266248290454 8.5653302445878320981 -2.963006101270995174 -2.089976143153450483 -1.8119083213589970427 1.8675999116752046714;0.061241001122773731924 -1.5210322472006962968 1.8650425647186721356 0.014338811000345091928 0.4135836372343877354 -5.3658782463350052083 -1.5665937012488730939 -0.4877673480035454312 -2.2322929479125481755 -1.4086851056579794417 -2.2383926116411458906 -1.6414238780370009607 0.44231384586429367545 0.60901837488831622736 0.75824919328610940195 -2.8740620958884512959 -1.1497078897176165047 -0.62795189270768492218 -1.03293548448124195 -0.9235102815823963418;0.16844394334427442717 -1.100238804197178899 -1.5800561329667615063 -1.0880273901543826565 3.8435135111216482962 0.7408169430341426942 4.4794973470394934267 -0.16892685517548211571 -0.16730582506017671607 6.7630729129132607369 0.61685858184408959293 -3.0272790976964261134 1.0042930417960587164 -2.5949725228932360999 -1.0468422733201447894 0.84271170928731942151 4.2808299352917078551 0.18495185316172513268 -6.1600196789658125951 0.43911208706736964968;0.42189008787983928173 4.640713937909450415 1.2849885351541872058 -0.59365135299356153187 2.1209898576867853848 -1.6011634679839561457 0.57436509389684886617 0.74068387087767895149 -1.3142107783621508332 -4.7772100017037573139 -0.55116171794711332765 2.6771357380521108027 0.64273965161787471878 3.1380804867167775285 0.54169351490705364149 0.20448446666844768971 -1.4409982648590988763 -5.6438485486892417953 2.0584286549311245906 2.786893630930082022;27.961109277267894413 -1.7470619471332060613 -4.987460028817125135 1.9435724010152379826 -2.4280491856089594371 -1.3647316912099176633 -2.6273617407969376281 -1.1290010230488889409 -5.4442905810538242406 -3.7651358168643103141 -4.229978022828499995 5.1187745231777954658 1.7381952033961485249 6.6076308265837679912 2.0658923981431867034 -0.3764972871664005738 0.98412141745787240499 -1.9525420272564726343 -3.443533499763309802 3.5184773168900806972;7.1841477078714008897 -2.0181910417065860308 -1.5672801220130949673 8.0207190907278960168 0.60184969495758855462 -2.762284895113472416 -1.5220768859294246944 -4.8531334032138859769 -6.578423782675879572 -4.0933186345169447762 -1.7972214129823604889 -0.46724555123969352399 -4.7437826560349103389 -2.5239249879633858242 -0.60231684559138565227 -0.90860365921910224429 -0.135056747906386998 -6.7148210924029223534 0.30300135334451683278 1.072181153207362625;4.7826907208574320762 -3.161019079233378104 3.9244610922474865156 7.4529908244592766309 8.0464305293313671541 -6.3525818009283190335 -3.2207359176353458352 -4.721335755956374669 1.4179399705510937757 2.5256975930726444091 -3.0630485744409097215 1.0470766772517550169 0.22912857375827866413 -1.0759366939677919017 0.56877109791215219037 -0.98098813598219669618 -2.0502597824230130996 -2.0451854053622393614 -1.5297450589479399952 -1.546234105939103376;1.8993171793234184808 -0.62969986090308049942 -7.6103437235335533728 2.1994558806450199562 -2.0092127617857689081 3.5658064562643878581 0.030022470893662386165 -4.7450847926320074421 -1.8262084880095601491 2.3735331724966695077 -3.3574595645507381292 1.8345421510457176062 -2.0458466952499740898 -6.4961820693633702817 1.7690673880898255543 -3.4849854541966549526 0.74216164628346847909 -2.5148771572619126324 -0.74608852344590126382 3.9581133525501961401;-2.2910561590763203199 -0.61888715125803472894 1.4731782947594109778 -5.3424947672456157832 -0.71712887049287288299 1.0144129994051089838 2.3381377542468433361 4.654723924800140189 0.51027148959404344808 2.0134937855945342911 0.22013951726894454008 -1.1646423389020139627 1.768089153137107683 -1.4709962435414951631 -3.1601573056938985218 -0.44218506108405358779 0.34316547492375587547 -1.0390518772061942965 -1.5648509822111726919 -0.31633076607792498525;5.3877322639944145166 5.3503765509101892661 2.5094769392183011725 -2.1400530662675056881 -0.82916340180892023071 -3.2302470824318625375 -1.5191076378708796568 -1.6999142360263450602 2.0032780894436781338 3.8534116530397537481 0.61018681741731561896 1.5824145215549254573 2.994340763709344877 -0.49080627228279405383 2.6567345118436396234 -0.95029961912455263029 -5.815409327204845269 -1.0712727529326169229 -1.5580292734736420623 -0.87343450949902035063;0.064965153413632528712 11.066146048474756469 3.4650677343358227134 -3.6010748432681833897 -0.4238461578741316016 -6.4233598906445257271 -1.0086237649197411503 -2.5635935474089488473 2.2083523262333866199 2.8727182778745956604 1.3745547978844012693 -2.5697946654130596755 0.9492546965503135814 1.4205465333830380459 1.1425429128631534592 0.41199511729683818695 -1.4960681744396979731 0.88831203507886336013 1.9203115009938052093 2.23459404745719592;-1.3648969375548525296 -3.6457718647740064988 3.1404202830325993467 1.4042142844920038058 0.19244288043344481842 0.71185965049208377309 -2.3947491394270934428 -0.27246604432064253087 0.52871833505085175098 -3.2337736141445576621 -1.0554511931803240987 -1.2331961718004376127 1.1464045781383800371 2.5829339199746277345 -0.080591934296616207778 -1.1813586037192702616 -1.1178730416338886755 -2.9214923115489197514 -2.8255583764883214215 -1.8248036268376319757];

% Layer 3
b3 = -0.39067319592212901291;
LW3_2 = [-0.002416620233062484642 0.011729547988607371203 0.028787792040284036071 0.014466320312981163082 -0.034876273267306946713 -1.7249542646333957396 0.070801712724510121322 0.019113927876343389523 0.0121590087008879872 -0.056999883684448769683 0.027577328023615108044 -0.073868579059833669453 0.023452588057469116178 0.087787672888078885358 0.061220146088110445615 0.01024430820201973312 -0.014624070373197023062 -0.0062632201793324784531 -0.51550941837671182544 -0.060358251555823146106];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
