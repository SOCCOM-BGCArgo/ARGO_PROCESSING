function [Y,Xf,Af] = ESPER_DIC_7_Other_4(X,~,~)
%ESPER_DIC_7_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9929089039003327066;2.2307877114655556561;4.0505048457597112588;7.9003611695394662107;-1.133673293082934963;0.17508385187241171099;0.50237545307462128097;-0.20449427023379079804;6.789057162218567143;-1.5101207317985234635;0.88843391023875550871;-1.8840580991291113744;0.44878461445608580638;0.98604846114324939954;0.4714192851209381141;3.9655248098391520095;-1.7077945161678922403;0.65847508484491035219;-0.52195164778584768328;0.92029987268992075045;-0.16109189696426812199;0.82272245579027525331;-4.6679169085455072263;-0.72675988915006672908;-5.2267672760415004873;-1.208214558873369926;-0.60872535774131319997;-2.0192577050487785506;-3.3065560500601529625;-9.8053708048506234007];
IW1_1 = [-1.1626689018799409858 0.32226924610176793662 0.50693002191766711739 0.71635970749243926825 5.4769573641174238432 1.5479732500580754007 1.8374699495415562911;-0.095184913673671836531 1.302858374504183292 2.0290307218987559956 1.7776300039540346987 -1.0014969231317556453 -0.2498070460080058508 -0.78089835170799526409;-0.11197187475440378845 0.17758016789973760097 1.6196273681213719797 -1.1122706514238256403 5.6158588375464137954 -0.64426191461515847081 13.05818328458186528;0.036817169433910557075 -0.2510282482151266481 1.8624847005704276981 1.2760112732261525981 2.6252477220385177503 5.6046877458033748098 -1.2135425668576078628;0.91184828452834765233 1.9123156501272324803 -1.2438245844092694625 0.42257837292749172997 3.2095492020523304078 1.7061454629923582527 1.5055785826030838592;0.28421522181743968938 -0.6651712932692221969 0.75097897285676629142 0.071716659953382680404 -0.9622204844769154386 -0.083214173093379972812 -0.29186826082302858021;1.9217111380125744269 -0.12039132612746519801 2.6951068224863998779 0.024239851545786381126 0.45422197155825816406 1.009529768724952925 0.79820241271539604799;-0.24451322486975343717 0.031969778801281427405 -0.10028596100848832795 -0.624297239112952429 -1.6972368941410462817 1.335334684901331892 -0.68945299332481901899;-1.3896960837521914467 1.8674559554153955521 6.143843021993050435 -2.8108761313005112825 -0.88525931511017075248 -9.4729936155920206886 4.9367930351405364675;0.29371303458490660709 0.60345531519253581276 -1.840650564411102641 -0.20081150407254361179 3.3153488534317503422 -1.8324446685747712849 -2.9637778727689130243;1.0411261469545538549 -0.82978499746914491375 -1.5532410905470017681 -1.4428438583312961363 -0.88076826397822793879 -1.2009778477026054055 -2.5274318493411280784;-0.70463338322398072489 0.78534674676580407127 -0.27706349582723888147 -0.69811298929198639662 1.7458509215801041314 -1.9210078921563480403 -0.059748361459249166305;0.0036389204107003256597 0.37594271672032808507 -0.72221826768722396928 0.23912068266335298472 0.7384791536394722522 0.64958020041507347209 0.73409504672296543859;-0.08859151905110713987 1.1046330944203064384 2.2818485611419605519 1.1001105907662334094 0.92429167546308399483 -1.134227196611301558 -1.5224259696686941457;0.53909215508786811899 -0.81606934300951239347 1.0020234426303786801 0.20619982332456790464 -1.0477611813178075995 0.041436251487833038187 -0.41771158462402446787;-0.34334861552725104428 -0.00047879339935368633169 5.7055545479039615486 2.0469579608053765085 -5.2533206753536800804 -1.1264306602617735198 2.0179320973495742386;-0.34936745515168993181 -1.8481151768174228778 -3.0180466407217618752 0.67741898659946653272 6.807439648804948007 0.25994622815540274763 0.56772798610623242954;1.0515336335135638812 -1.0182454763654829044 -2.1884784485563808509 1.8083662114454894798 1.1827801135929556509 5.0672032567021867422 3.2274152046380630843;1.0687948617717561994 -0.76773122735467969058 -1.5625327031762263896 -1.3324790423736478928 2.8952071053338293005 -1.2600396465554490888 -1.3783047227467890572;-0.26335657068663809177 0.90578307733092922049 -2.2652151498671053709 -1.1650383338822862811 -3.4018165870776906345 -1.6490131518070472172 0.24012792061590754189;-1.4926323432108155043 0.60254889458751959008 -0.82409260541624729246 0.18560041011216879547 1.5089155721186975345 2.2236187715324451375 -0.47252788504156767457;0.059625433724543167036 -0.33189379139124264295 0.55476898445738831445 -0.40965391295488967627 -1.6675671128634221851 0.83726151139019511227 -0.025899317767674116808;-0.114468232403658568 -0.51297029221382417496 2.0674992395023323866 -1.4105797918442746219 5.0127702659595811951 -4.5094960529871270793 -1.9088980121788923228;-0.40046856923110540905 0.26238902605424141434 0.46758393948482951386 -0.45196858050712801491 0.031820735180429535194 -1.4199354509208466091 -1.0924865952202731378;0.85690105144847272811 -1.1265624494789339138 -4.2629170227988906205 -1.0763251810807219488 5.6963196681028707147 2.7946687219287471571 -0.3169088496610564798;-0.66014836378743779743 0.43110471966134400468 0.56515660828630109869 -0.5998433446272384284 0.14349999467204918591 -1.8757814853481138417 -1.3263001000449694544;-0.0040377529780301086443 -0.030457874528525951535 0.10949112689129045228 0.21540422408071968619 0.0098027053211765888957 0.060306954788693273306 -0.43280344684893856666;0.19846719935720999461 0.066198153477573504211 -0.25142974398686523951 0.80989230500140918512 -0.34340123681658335508 -1.5822002851259076017 1.8605041520833021096;-0.57827732648218621581 -0.25363864570922806108 -0.56316955043172678419 0.25899948389303806273 -3.3430172305401031352 4.2059160927971372956 -1.9445862913498208613;-0.83155962292891905108 0.18017733798191995498 7.6410632008675376525 -2.6913290653736106073 2.0441407036701120248 3.2510513483405385493 -0.10958356079596026644];

% Layer 2
b2 = [6.7025383340857134229;-3.0959397487449504816;-6.8235225934814387472;-6.3899474383797301158;-1.0296381060177497435;-8.3143719586774409436;0.52418194656144201371;-3.3760233009859605957;-10.917884657177459928;10.926189226465510274];
LW2_1 = [4.7668142656495469112 1.045524265543009923 -1.6484092247903328055 -5.0444152205909924547 0.80904942475418739622 -4.7232445618948100119 -6.8696856157081409577 2.8117539863433997915 0.26312939937448159844 4.5194055501877512526 9.2761760364487102493 -2.0053429311635633248 3.4242656105902824493 -0.79351034664207653613 -2.0164927618706474099 -7.3805945200442275578 5.4308811023830072529 -4.2347163302428150189 4.4388454744404866048 1.5300946761713003497 0.92384847635428235524 -3.5516182841903796152 -3.7355448981975372114 -1.2533959294805094853 -4.989655245426429353 0.11132014378012967948 -3.032465097772882423 -10.404248625692844143 3.2015073766601349625 -2.6951737603789220898;-6.249835765277341082 -1.1536096759589788974 1.9126165972716624442 -2.595154142973520095 3.6960817602159012907 -10.219929495080700477 -1.6807639798258660058 -6.1268117378734512357 1.7897417241775970265 -0.36059071755207211529 4.4569086249733711469 -4.3709412304616828138 -1.5524107682231964578 -7.1576875525480314622 6.1410452463281650637 2.1116792988156052324 -9.5109259354987614188 -3.8694213464037394701 -1.4926915295895091251 13.124337112699041796 7.1346890897275798693 1.7203046815390006241 0.53872127229414268346 0.64508790735726384558 8.4883314458162022476 4.9714347048805462848 -8.6964046879295739956 0.36826292249884928776 0.67374941403973387377 8.5230267147377620773;3.5128339642288262112 -2.2241339656912000322 0.80182491808505751418 1.7694642744443289661 -0.57131360595399949265 -6.4293028962645930591 -2.515937217840654494 -6.9948981723696812551 2.8754822691502179843 -2.4139841777247834642 -3.1613423350690084135 -1.9521308304879529949 -1.4822256816804701973 1.8853005154111812658 6.7416747728981718524 0.071152089026441392439 2.7915399628853947434 1.215778325386322134 -3.7604840327721005266 -10.269709131901130661 2.3921417551359800413 -1.083749085939872403 1.3850623044145802254 2.820355350467179445 -5.775604683046378085 3.8595246752900091991 1.4059577162158640729 -1.1615663229023771574 -1.0797587848489507145 -3.7810199793742427232;-1.5161545286600683902 0.57300287511588277045 0.35003854083294994037 1.0412189419179855854 -0.092220507559495831784 5.4254505165633792885 0.48951910781147117691 2.1762402521943315925 0.52724085116091634617 -0.65800873675800475304 -1.03056474141218124 -2.3848631888308489124 2.9663881250189332306 -0.99971086243043882913 -3.7485341652191266348 0.3173901647663588399 -0.47817733930636352468 -1.5285709919604126839 1.5860899278676074964 0.63933039111258938014 -0.54059814043616882806 -3.0556000669841067996 1.1257789338030350645 -8.0103436626788848685 1.1084986624916401965 7.2378903488901036312 -3.2406091066505036125 -0.29816078260738659855 0.13758871666341146445 -5.244689460349993837;5.6219957055264595525 4.6054584035359500405 0.17447474182522057506 2.0994129544568149726 -0.93433287824443800318 -3.6812338461450297977 -0.65482043445021498318 -1.4004849336628069079 -6.2673610356803122201 3.6025549135370580345 -2.0706056459508865863 -7.8362807005586656572 3.3003605937648052837 0.017823114186014801796 -3.9923838126510395874 -1.4160948227137437616 3.9559249477672189244 2.4460104693848645496 6.3147619877488292417 -2.5659610953008833434 -5.4941905212720891782 14.232308483497181584 -1.0966915568439148387 2.3592812594266012738 -3.377012582528094331 7.7198004380490381493 10.33961545209223587 2.699917807372827383 5.1075815003480968812 -5.6673709031600987274;3.0565662801280253369 2.9657773266410392132 0.3707422059340626519 -3.3662025100611856487 -1.0860246967973485877 -1.9428399361375117138 -0.27710665279131890815 3.0737416356062512435 -0.97209432776692150657 0.58705151582436732038 -3.3790055697478380559 0.38160620041696308169 -1.7370385717091276767 -3.7280608969793851415 4.3099191628994715231 0.60862254702337881263 0.31535247331162447049 -0.20822646873677089219 2.4309507147464146648 0.16840573545618883755 -1.2453466117944953506 -2.8588384151706853764 -0.80830365315703400775 -2.5181862957199552255 2.5910509444059917072 1.4663889099899862778 -10.536711329016894112 -1.3450164909574200411 -8.4686712475888317186 1.7317606581431310708;0.036793220285124654534 -0.033588745509138616396 -0.013299893332651302469 0.0091906731182117475804 -0.0035280535242287686462 0.099804034075403835757 -0.0081757685021472594616 -0.10297104395791646658 -0.020788351007545030624 0.0015994219098647175989 0.0059573760793925440923 0.042997784833728139309 0.056516435132613077053 0.052742786242171303679 -0.039939271344612080339 -0.0094699796977622246325 0.010257632608549257028 0.043698202242261202644 -0.02511081419755399613 -0.034352010399315999201 0.014983703962340116575 0.053479746321372492734 -0.0095441180085638083891 0.32455281696991028495 -0.02471074242033313717 -0.22889035269502483461 -0.34065123771353994497 0.074615233158375995903 -0.03206241902838177088 0.0054119659087009577142;10.649280778017237381 -3.4886581449624149975 -0.26460401661638810467 0.25511625518985925343 1.0906913343702535624 3.6127400441247239371 0.58690543638831504936 5.6637432229977315856 1.6678574411468853889 -1.2312183397301970089 -6.9279492249416820826 -5.4316304921077191992 12.549068984089139178 0.5156311233959059992 -0.4709662151612351022 -1.8367204157742691439 -1.3014316610303837685 1.4716825469114838132 -2.0668734847335272775 -4.1008708719705317947 -8.9384291595758362803 0.96633608414761129612 2.6445065601882449258 2.8942437259296283081 -2.0456642829318618659 3.697572910025530124 0.71158208279833323751 7.1915029451628855739 -1.4193193541997441987 -3.393987832773927682;-0.38210758349727808048 -4.190294648047668602 4.5699322213484245836 6.1323663864359243547 -0.10387070396498238045 0.43628687280441574847 0.38882593262930120748 -2.0006041417882256539 -0.02117638724132308789 -0.34196110698138010298 -0.88524379956351384457 -1.0217028405220329734 -3.564426865531238775 3.2626075420091829038 -4.4264004285476072909 0.66967081458534838401 0.0417909210999969985 0.34008643133847032969 -0.63466460890658127347 -0.44440195274998339769 0.42943759113234658553 1.1409076331717995512 -0.27034788894419914396 4.1760066461200544552 0.33130531993954170922 -3.947982950320541029 -0.12595143636593553182 -0.53302752454907553759 -0.14864231412402825749 -0.051193130471054969222;0.9482101163798780652 1.0449294624821154898 -3.1887453994262506818 0.87621507791275243804 3.902826834775223297 2.8848616953371104543 -10.900088717237709446 -9.5449617425461266151 2.9245984130884221663 -4.4051646650292521912 3.2773846927800041051 -4.5012715938339038502 1.4978413419463521006 0.24269441212209513781 4.5326538910308480368 2.9376945150112190319 2.2604170261389477936 5.5045550456125935668 -1.9110940943304850492 6.6798939660344558433 3.6937532998822257824 -3.4859904230797083002 -3.6682213135322814246 -3.525747040798185683 2.706075265457585477 -0.58015154171329996746 -4.0749693310461294615 3.7526094747510012617 0.48564848484477152191 1.8902758970261628324];

% Layer 3
b3 = -4.0464745567304092333;
LW3_2 = [0.0031592723636979275388 -0.0085210292525255467572 0.010853042064191603666 0.14021334580549138504 -0.012361721524606012271 0.022550399797581489186 6.6572059375500014511 0.0082547356375018855063 -0.049991272569193431763 -0.009316820197901044473];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
