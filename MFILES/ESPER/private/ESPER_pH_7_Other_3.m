function [Y,Xf,Af] = ESPER_pH_7_Other_3(X,~,~)
%ESPER_PH_7_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_7_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.3239882771266453521;0.060027896406954175945;0.89143672551145514138;1.2855927347450182285;-3.1207834880462819171;-6.6500125130495160164;-0.23287315196435237619;-0.82097069248727416735;2.0800203712189233585;0.28524388376999237904;-1.003615369699886184;-0.31594537878215489535;0.80420541098178233153;0.67855185742645518499;-0.58572698669019662709;0.50270985887881058929;-1.3591067433275683118;0.44886996719012639545;-0.62450886032754882038;-0.60444772656860290549;-2.1153554499634275032;1.1294781252964876117;-2.1689508032007984717;-2.2392904016725543315;-1.6946410095839570253];
IW1_1 = [0.069352772840549192779 0.077974783025610588938 0.26370399209985173616 0.4100612265784161492 -0.41117156857824782579 0.92879538430336228139 -0.83859120618286597804;-1.2865858830829721704 1.271006231711741874 -2.3496881036633370243 -1.0510497900583524178 3.0397083102270108235 -0.048425190137556382852 -0.64294429046459711241;0.563158682515733644 -1.1712445747160942222 -0.3889630400518599429 -1.4979337781238339922 0.75829614263900202431 -0.59577865112556271932 0.99226590704161965473;-0.35889299672371127725 0.18797730867947795574 -1.4351595861694326217 0.83100766023365479906 -0.39722434593867816943 0.27632260856822798978 1.3815215959479911767;0.53441698048646946173 2.2580779799632435534 0.53552541781532547738 -0.72215525877477682037 -2.2384465960052795097 -0.014042699829567484651 -1.9311501426954496008;0.027414943334520842227 -2.7307319756892667328 2.2401621281942283304 -3.8182224345870947602 0.35530459197215147338 0.66699152216456714104 -1.0940396089966817339;1.0397163518320868825 0.36659021536605573832 0.51272613910014841476 -0.025114817394702507874 0.22208458917372780883 0.26178956940366926442 0.1269403542966178744;-0.033312376381518842006 -0.013393231973981989044 -1.3552017690223761015 0.4426062840140023158 -0.97069499312709217609 -0.68600562428862410513 1.032899803879788303;-0.094306020421932257314 -0.13061723282468765128 -2.3876357700455614896 0.60056173311990002084 1.2681121320048394097 0.39049322258418228682 0.95391629268663424845;-0.5568707706285651593 0.44817508025118490966 1.4854746396869642489 -0.80708434167522458136 -1.4830506531179525886 -0.0012271887567000588828 -0.044464452276795962682;0.4139874357724262488 -0.42344888324818774628 1.2074892838346740209 -0.3143578272500355264 -0.11423021696265948932 0.60540273796159627118 -0.78158594780780443756;0.35561845140860076642 0.24993481998568156666 -1.4265197365418718078 0.69283226008631126902 -0.78983158888528548491 -1.049111474271497535 0.47228209355709704909;0.95092330651093148752 0.3462819600393345354 -0.31985940651433097948 0.44930836136348634158 0.36572553776688010441 -0.49734386431169758103 0.89333306391572231409;-0.0086027563102492321523 1.1707040879653285437 -0.33178394576421710305 -0.17447594740421817905 0.23076873273039780199 -0.1232295213427015701 0.026350017090149866622;0.55027865803361197816 -0.051538447931516857825 0.61313969961886238824 -0.33678983859500255527 0.062828345951817146653 0.17927613308518633439 -0.83095312366079443489;-0.42492919172057025401 0.037947200457249884165 -0.33359844874536431769 -0.19154996747194980022 -0.5393920157043375907 0.59122708827955794408 -0.40280254709227697463;-0.18579215683967445494 -0.62238277410967346448 0.13662897509671262375 -0.19956108770055960844 0.54086456977346430985 0.79956247123826118539 -0.59264270775966276794;0.091899709383442190758 0.14212102838957912931 1.3723102191575506925 0.83507800732050130321 0.31174075793591182748 0.059775657179105254335 0.87784478942342525354;0.13365083714666850523 0.82539017518985524635 0.69753765289961544571 -0.36225558988259159987 -0.59214419851077015888 -0.1863721720149877914 -0.83478744452944009247;0.019378826723456185621 -0.13815865908194663314 -1.2487229396685983751 -0.83176657743714410564 -0.947177235132391937 -0.16347061450347680212 -0.90011326325805485205;0.34623693462159960132 0.23340161917357640786 -0.14508135939817065618 0.9305871624213778448 -1.9316814241048592127 -1.389772942156976443 2.5648119051471551799;0.090251220418251787425 -0.032159018886575331531 0.88881455473321602234 0.40983943351455420778 0.27270018769368581379 -0.056766221608703440471 0.47753663073200181;-0.24919580336174798618 0.3140286710642968826 1.5732031281356546604 -0.29766982101011574269 -0.52921125999809359719 -0.10909894181463516971 -0.22663286068321109035;1.3871766790871933317 0.2596090523471183964 -1.5632060138444392461 0.3447803910880888334 -0.19545668152688203123 -1.1279366859462172101 -1.2224775429670846627;-1.6052135855318767632 1.0486371272331720395 0.070635753510394597154 -0.057835295148739612747 0.15237040135064752744 -0.75595045536745641979 -0.3277506794969998194];

% Layer 2
b2 = [-0.25128461427355547331;1.4908422982361284603;-0.55481322693801649049;-3.3463649418923244738;-4.9061361032638668433;0.10321162256936988744;2.2741231422207373036;-0.97771226625654328313;0.5861122233872679832;1.278967372534643987;-1.3653399090691162865;-2.3491544044763967847;0.62731227398597511069;1.9655834135346270664;-0.45292187899093966363];
LW2_1 = [-2.0937722236499589634 0.47929835694808270441 0.13231321789929656463 1.7941526986975813163 1.4809399927430815236 -0.57885603217691417033 -0.7335620107922827815 -0.54146366475875984392 -2.0294527763395175946 -0.38193926359508256763 1.5875862451726803215 0.5387785239712727936 -0.16568172546442358484 0.11352928909933279744 -1.9405400786084903153 -2.3497284778593963139 1.1988563989668596932 -0.28672502805768579348 0.067208226520942770943 -0.70057296873977537022 -0.33077801078102481158 -1.2941213390365458036 0.39263849531608985277 0.018054965129874613744 0.33715448915970713806;-0.52513091231733843856 -0.56391012206912560778 -1.1194531041964768114 0.88713485849760098656 -0.28341165541911400583 0.23557209584269411806 0.53482929044892424386 0.62717452468041101632 -1.0522682961731260054 1.0229256436748279668 -4.3522946361435250751 0.20411170289305374803 -0.34910468231620578328 -1.2765540801905628232 2.303484767903616337 0.25768714716319368607 1.9692380744360100664 -2.3022520500572234425 -0.76197632080931043674 -0.87594852467317785294 -0.79580130944143057103 -1.179379802320875692 2.0093411136112031556 0.20424074184315185732 0.51926693059151074472;0.12898483472140642725 -0.33045351843586934226 0.25498219101603986081 -1.0706032264868048376 2.0155167408855816369 -0.61774769773587845378 -0.70050282672228059155 -1.1296006902036681563 -0.19187841300113925302 -0.77897483846299198085 0.21857730399687788636 -0.31162079989967111926 1.117471305559182726 2.0551162125561863725 -0.76553582970089995019 1.2068816368657782068 -0.17870614948678723022 1.0092016870820019747 0.023193711225513249236 1.2597837922250665343 0.58268448045619436471 0.28197098426140138061 -1.0122425804645474035 -0.15013079402372261906 -0.86134404310367951307;-1.0912431433195675101 -0.049511627826934100083 -0.078355550038835444782 0.21895853256513791996 -0.094564109349018113382 -0.46160541796973664219 0.25165617267756856812 0.8718106413411976785 0.91564625274935251831 0.70781801066216321061 -0.72183811121436236569 0.275606175793690511 -0.030741225512273030046 0.019393936571399584406 1.0773724467570557906 0.94943594035342770976 1.8437063737248067241 1.2304745187182202226 -0.54026193111355225174 1.7374607478678532058 0.083244814080098913922 2.1289289748147628423 -0.57625685484572253259 -0.40452713345648133592 0.28464826923347769094;0.049371394997933915061 0.32247811905190582049 0.36886868820111551326 -1.8985731973348245472 0.2657710882434451416 1.5912343253307650315 -1.4036836572350703811 -2.9126847709424086297 -0.60661560119384794199 -0.15118813089454999354 -0.066253347720452632208 0.42498767392634362317 1.3780397562723301075 1.6878656426761959874 -0.26269770938800174331 -0.28833813542406760977 -3.2110861511647597055 -0.84889921554809821824 -1.0289533987763035405 -1.9198798105644729883 0.70530018434205654643 -0.74433987548040025928 0.26161955323503993665 -0.26987168942853173581 -0.76467077519038362254;1.2291242047387409553 0.14970310396394492791 -0.31398735912203906695 0.036847591187195112561 -0.16597620622132960855 -0.6677370563002115178 2.0094916117303389669 0.85282277297679354167 -1.7292146014399856213 1.1113145036221419026 -1.9966312817484788145 -0.10469313517329562058 0.29099926168573897467 -1.7651781149210270527 0.71922916630062316834 1.6762734066032070057 1.0489373078690849006 -0.0080761841908885204089 -0.74426506896221955589 0.50385827614874567626 -0.34662052456593211991 1.5002501342957286212 -2.1709915610406262942 -0.10296380912953631559 0.86226319843192034131;-2.1121120616236859213 0.0041065762548277437785 -0.093569237857772838418 1.0461298173788664556 0.20101301696669987562 -0.17578744350868574786 0.9679606131735084551 1.4101135539240243766 -0.72009395973604684027 0.87723484359895320672 -0.75636893327336163217 -0.5314957634057225766 -0.43467668344211080056 -0.57318099024011481823 1.7028416099849372767 -0.71255998256332264695 0.49026262709148604735 -0.96634145780420743765 0.71911736694162886607 -1.3839439558031823019 -0.4184012966079476703 -1.0798428790052854165 1.7343686487682401509 -0.018651536220885250872 0.81264891887487766819;0.7398148520235805492 0.99062290540535891115 0.67946567348968645028 1.9777940227652617278 -2.1034733313666515997 -0.76336168572001317223 -0.50139609595906065032 3.0537289410836923054 -1.9423710271331899868 1.8862229990596643958 -1.6660630858014846556 0.66969310151124017416 1.4081686785228444414 -0.37642960131416841607 5.0958434609034712892 1.3878233506322377178 -3.9356955974389911113 -3.2217500585530540747 -4.2088761579443474403 -4.4479304237825534329 1.5272876747275476728 3.3194157454089570081 1.8066180071087845072 0.95645861182506031195 -1.7234413054482180527;1.332043050893639613 0.14077000218896154604 0.14914347270102434884 -0.13601769901229762705 -0.12636597755782566499 0.16838263480221504764 0.23919194060823437131 -1.2782153760557863897 -0.32696278970554831789 -0.26140261644090490023 -0.31663565484486771995 1.2911950891459380575 0.062856551251871922714 -0.52570748022185354031 0.63577026848150319793 1.2245036224982737139 -1.8964541848285185743 0.0010661155808246898513 -0.20360128174285582747 0.1758691906594999077 0.25507996224947809827 0.42281344283568483844 -0.60217521692741360351 0.61897899527272792763 0.10689726483685259295;-0.90829361960193721881 -0.12491286227785647345 0.29520335011509923895 -0.3535184258244745692 0.19511916060728895506 0.2195268431494524497 -0.58063213044688144482 0.37267094614055357171 0.81576326863962322911 -0.27678335745156062986 -1.7574506273612511276 -0.011909778614691625062 -0.47610422036813332403 0.32969677149200460331 0.38352963286114954977 -1.083230045630149796 0.61513191559131685793 0.76303274206514359879 0.23238295160210850621 -0.055309422492269340321 0.12773339002760086824 -1.2756134977988748958 1.6557831856800244719 -0.1251653111133561036 0.041760234918354309508;-0.049440210818063365372 -0.23818719087031128834 0.044933217825172996895 -0.99524798297898386945 2.1281615945125440525 -1.1316179789791667165 -0.14163798525634727077 -1.3138695269934614895 -1.1132311862199963937 -0.73601174745562869539 0.83665387471453855905 -0.40163343264052525639 0.68711793045847224803 1.0015875712550230681 -1.2965835082385255284 -0.18895258537054171466 -0.75883876557909657468 -0.36779399533337336914 0.1687303592352570325 -0.19062803310469209062 -0.046024331656031813864 -0.39286120193247592303 -3.434165148836093362 0.074749301420982822153 -0.72692293364146665091;-2.7772204770692545672 0.26624357547957161474 -0.99238260335934747047 0.65335099653985184709 -0.12429509476799861789 -0.13409314218522452866 2.6996739746268030302 1.3770299106493752994 1.7734965958201376335 1.8395571567905784072 -0.32656104922635831311 0.01459223114305088255 -0.022584030235846718621 -2.5487516862528383221 0.78129738830160189167 1.6744126053369094986 0.83177655202036171467 -0.095182714940247339919 -1.2020093026045570728 1.1555949952495361277 -1.0066496345619300179 1.9544377246544395454 3.1497620310884353323 -0.92032946525217862455 1.0657486868124605994;1.4170202992932416919 0.020633804109047072101 0.10893540625705047664 0.74502744944714904829 -0.17764112404867754558 -0.11207910542614711591 0.11713724234577323202 -0.10170308150341418607 -0.3354110822441960793 0.018248254021730758029 1.3930160692488404717 0.51257836784138022246 -0.012178907739312769959 -0.16581905302161126237 0.18397317744307853382 0.79631672536804298801 -0.42034720533180414126 0.082617473848106998124 0.0077107420784347114467 0.53400172555720470946 0.17824459308156834214 0.70975083221355927954 -1.5819604341762782962 -0.10371642335207253982 0.0059649264687418922584;0.80291045142420414127 1.972092915419516812 1.9042258624404213574 -1.3409732588089848804 -0.77322930615978091584 -1.7258376508228896462 -0.11356423213603646094 0.63705262754997038499 -1.1384623103898092733 0.34783582822171660309 1.0005547292382173108 -0.71849637413811962006 0.36848785710917375535 0.54623774378461364964 -0.082890067769575220824 0.92965240958760242407 1.3469280113867199145 2.0015695759896279249 0.31335824166180831218 -1.8761421292759077328 -0.68078595984418854847 0.75149219408453971081 -0.84952062349369905636 -0.039759929652650835563 -0.55508803259071559655;1.9380912885138110724 -0.43954719710679046596 0.037624250314774079773 -1.5122598466621719471 -1.3750963018874129418 0.3400000075392490273 0.41266375850703679307 0.32374621067053727108 1.5562161374622136556 0.13231719558241869517 -1.3403309549501463138 -0.68731661136530797229 0.27168310178853866121 0.43901456609251238161 1.9967327835996457885 2.2278136953253637742 -1.4625490416113116066 0.30394845216998411797 -0.087269829262131767833 0.40370473340253648642 0.43625878555439484563 0.11508152539074215093 -0.95132775338656283548 -0.19474034225057182401 -0.51588112552175569014];

% Layer 3
b3 = -2.3686926567105985875;
LW3_2 = [2.5505844032642230879 0.83096954611270867908 -1.6877039497726085138 1.8207952666894562377 -0.71501053732958030906 -1.2924052664074308083 0.48104568088789501079 -0.040567417654718586351 1.3638734586462362142 -1.9186712407803514502 1.0795485403193145757 -0.87662127084710073088 -2.834288804623894098 4.5943978360364994273 2.7941954241882775989];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
