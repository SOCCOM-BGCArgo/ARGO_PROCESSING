function [Y,Xf,Af] = ESPER_DIC_15_Other_3(X,~,~)
%ESPER_DIC_15_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_15_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.7930331307175271238;3.0066653657820703316;-5.0799928332433594846;1.4754564122788267344;-0.46367349493063453325;1.2461174325404131835;0.039189712769175488738;-2.1771444947560611993;0.59627935562519029933;-0.71170999513355392985;-0.18989491853573073343;0.22160030223112991976;0.20883671506758702541;-0.28505162398063316198;-0.50459281616973561402;0.082167476106066630881;0.57920087333441505617;-0.81013207962530431328;0.20712356386611599501;-0.13474109998252864484;0.71046837746308288963;-2.3588462750059533413;-1.0604261123805154288;2.0277160573890884443;-7.0609642293096381849];
IW1_1 = [-0.12884606122596661826 -0.25549930456043928872 0.454040622940651728 2.300887675630745477 1.1365661742943637957 1.6470032923631556798;-0.15898504429465143417 0.0044145327470466594333 2.0261318858609902449 1.7219957813795225832 1.192736560658993028 0.24645470730082949529;2.9349989251316510597 -0.0021991619886372890461 -11.121140461683770795 3.7014966976292642542 -12.883338234297152525 2.3674492385328442801;0.12379211674909240681 0.39312589934392289104 -0.40440985068208973319 -0.79363683993970401964 -1.2637915813754714289 1.9157821098662581871;0.8201732472683652686 -0.015253086284748017601 0.30571599029765583744 0.82958163754578284621 2.0951041511564043596 -0.55384588155873726301;-0.064429839686463402648 0.014919861944002394891 2.5682027085250820342 -0.36892537039629963447 0.9630366404570376293 -0.38832023240034913014;-0.028844420298337492686 -0.15521392486108950837 1.7953555089695998337 0.09947015538446414562 3.7291161503235898955 0.72308174088756904663;0.12194022146573470222 0.20621474079455598405 -0.77867619031520773909 -2.2359404578863530944 -0.59599232303245586184 -1.2984562232847316476;0.077494580538306601092 0.26875939895376249611 -0.62287144713723097134 -0.75879514860342067717 0.03160347583762675161 1.4534039054775507172;-0.79529262004755529869 -0.99086176460745090111 1.5939247033743584314 -0.057018424487591527761 1.236661120569784611 -1.0921384877662136947;-0.10451246943261352507 0.080716763972037836039 -1.4494732730684496413 -0.04673304264116173723 0.7115368136355757489 0.08848213321155662392;0.094635137368933933133 -0.08590748431375658245 1.7483660398220863819 0.014612731290070110624 -1.5037627537001516664 0.0073136492760933931312;0.048074389130022751604 0.079895422761145570845 0.58570479116246565443 0.33793219613784991617 -0.11260987366159302958 -1.1536283831635893993;-0.33080962701084415389 -0.63924275571831812304 0.89775821403373035068 0.51367612689424624328 -1.5051177658975904983 0.20979748300107037284;-0.15556638662512281557 0.1668806389797935219 0.37002384329598170254 0.39788053395118033739 1.7403550021652340885 -0.78964397362375582379;0.16469947960177908075 -0.28357935856162741484 -1.7652211689421892782 0.53177778026853539384 -5.9719661847146969791 -0.031688634252076387787;-0.12907674120076179092 -0.0016522526495101304625 1.3741776844452762152 0.069997604475713515182 -0.25671926482101586897 -0.12200924985862214578;-0.43896692048813518161 0.25284833194771400011 -0.69228890505106610576 -0.78800731315502248187 3.9872308321696836586 -0.74028734167361265328;-0.29510376982267694235 0.0062913983999141488007 -0.77958704905218889625 -0.37892497353361886958 0.48530578579258348837 0.036726996052817130478;-0.1293296717583427291 0.15354068703164083787 -1.759863432685356166 0.48127784945796292515 0.30904089764886527592 0.47805483823722799697;-0.59250845386826600514 0.19054406475806623389 -0.83651046012348662106 0.067713054562362817723 -1.1716798570249549183 0.47234656896091309353;-0.31116935397289374743 -0.26488844712723058628 0.74686918227721366126 -1.540226010925140665 2.9404816214273257202 -1.9878536333265064417;-0.40661942541333973011 -0.3474233748954755896 0.3224523327129852901 1.0843939012456595972 -0.20769155433827271584 0.39681699510824647303;-0.047908677346527650531 -0.50997949525353147848 -0.33069391053912994272 1.2060237865151903769 -1.6185642137286215814 1.4058300704239379275;-3.7056269951223810288 0.89473167417977539362 0.70659245861640407327 -2.4571564141178114937 1.4192495101246067613 -0.78717563400663614903];

% Layer 2
b2 = [-4.7860651184681071157;2.2425173859963472012;-2.8379258690714199709;1.0045330904056519739;-17.973810833362318107;2.1823395000061589499;2.2123839995074314757;13.873211962667793884;6.9857881073392738003;29.995322533489986228;-2.259307713632606518;15.909230897156207973;-2.138869358069914739;-3.4025353892109135856;-0.01600691225941938689];
LW2_1 = [-4.6630877496418294825 0.0509749673474926418 1.7064376303960742121 4.8310876738519219487 -9.5747627787254856457 -8.4022443873043588525 5.3771859312180554369 -2.1656865422553823741 -9.5279092648543226574 -10.290595742405461266 6.2644298678942362812 -5.1873906144430765863 12.239658435441409523 18.070526360792001697 -5.8377858270228983883 -5.9766827111047104992 3.0531459715296751511 -3.7522466136191501285 -2.2230472036959554316 -0.2962439420665719525 -8.4457566072313507988 3.9076256045740875855 -12.168346633470891405 4.3365020263760936103 -3.3176970710481725746;2.6341571387967528395 3.5021479848965153536 1.6336066828034911946 2.8329831349164442678 0.012656991639973198815 -3.9696583852650042523 -0.62341427941173188643 6.7020886220275492917 -2.9176423193615885765 0.14688117345077580933 11.073211889614150039 2.2370902043077065535 -3.9361209361680464802 0.092562850463167076209 -0.050449620672377432085 -0.15240972657820772707 8.8173004249162438839 1.6097584048256332601 -4.985467368649541875 -2.2397671310960221014 -3.8566920313828982891 -2.0066353717624356712 -0.9507007878279143398 0.77975789680422635808 0.54493308326989031709;21.622688810418189576 5.4579405912916501009 -0.27870623171082442582 0.77915694808704771823 9.7004802450292171301 1.7359824353707433708 -3.473956033712904734 25.005902239166502454 7.1990562784121738815 -2.4229012678437542583 -9.8705032045019578391 -4.2421250415732494332 2.150414344788715848 -0.21638426535338514678 3.1033682848208208327 1.3921377854934593454 3.8668596247558744139 6.0294428413550376078 9.2961307788184779355 -2.6544274694355300959 -0.12774271336662237908 -3.0857901636909699228 2.8315265862704364075 1.7980704109562473114 4.232505163060748643;2.7137592747975376462 -1.7650608080486152041 0.30673592717644826422 -3.8529097219279582198 2.1215188711740595728 -0.1735755816621290526 0.82606072730078139443 2.4477351460436280739 2.2293547997784135539 -1.6531018397553001176 9.0964016007428192268 1.442597677836776171 1.3606111427266460723 4.4602425961948828359 0.46699392383043131227 -1.856042466360837917 -2.1971948870499211637 2.5137870132447375227 -6.7282286769534076498 -4.4748812563610851356 4.9381948030058770982 -0.44434671812656090228 -2.718763100185614956 1.58454330505999752 -0.50359309528540707745;-6.0458844888777285576 -2.2731589647229322182 -11.033074837012005531 3.3708899967748315873 -0.34691318900366385769 0.5647723973238218953 3.7751026089705352895 -5.797738439256558074 -7.6634909945994387215 2.64188063708223142 -3.539775003715108781 -5.4597371662545066684 -1.7648933645336055687 -2.9601205252110407429 -1.7960064528596659805 3.0933563610439565039 5.5007354080983894562 -1.3184671335856934515 0.0010128756245367867561 -0.53123299845950566755 -1.2228279991921648939 -1.9643845217197615227 -2.4232469532564722137 2.1372763947304811438 -0.803171257323406107;3.4015859615610768429 3.8915532513331054787 -0.39298522326266072113 -9.2852189490698968655 -0.049179254921952852975 -1.0574735132598513943 0.87220086888091474808 7.35613017888293097 14.160367219003385131 0.91151274245242208671 12.767898252495349709 10.829801151884012711 6.2223233140332592228 0.95350148387520605731 -4.4627266634308364601 0.77160213738562177799 2.0938327766234112737 0.74364552603544142872 -7.956855904514313238 3.7877741172527108482 -2.1057179319445604726 4.4074089068039974393 1.4885222791422576538 -0.21367479177416892622 -6.3668331176036403463;7.448227210715785418 11.045064217545000673 0.31233910906002543273 -7.6547481874128537882 -0.77528218872251730698 -7.1949611714133965279 1.3773163496805989059 15.386871119879046432 8.4600162539146595009 -3.2164498501567555522 26.859336428865766777 8.476251759497229088 6.0247657540601862181 8.1202281988206657104 -7.7934536639841507366 -1.1161382989177257574 17.880817769569773645 4.8029996335095059834 -9.8598197824830062785 -1.1372390550492026406 -7.1654184717474276312 0.73229514676932072614 -1.6340857978411933438 3.4388358232212010712 3.2655466763398774965;2.7951237307775351759 13.566256250666146599 2.3331471417626108433 -9.470938720262168431 25.895212753288312513 -6.8391003321071490717 9.5095563262200162313 8.0368627072704317271 5.7952996832301408858 6.7955806289407032494 -18.38256802386933586 -21.249249667580233591 2.0061407907542818663 8.6880380505599230645 -14.579362739006672456 9.6990822541173198346 10.844003443967809019 6.6791221083141687487 -10.23269524016372678 -3.9972444164584808313 1.2129568282477658503 -10.433496833164872086 -6.1169191406842156056 11.723477994379740252 17.949722916352783386;5.511175297028738207 2.0518297108212126822 0.13992987272864587656 5.0747169033470296284 0.74036655240091742147 3.4437414678824556091 -4.5864941208989113974 6.6678512226446935429 -11.485678431711779268 0.95269625895456155895 1.4464832410077892444 1.0080365793637509064 -6.9635165475827642823 5.0605003060777873358 9.4722226513755742872 -1.1996335271697431413 -2.6907120910823336679 -0.96563349727368708031 0.6481716517067949157 -5.7038453000320012976 -1.4424246463700427512 -1.1328637100591136821 -1.972475018476654629 3.6097343058009982997 -2.1223167664034741087;-2.3341760042823347376 -28.762298772756384579 -1.3444410046458421526 5.142249362589384809 -0.15737037649365409608 -9.6473378665707265611 -2.241809742879086631 -1.6296706066524664358 1.219168010544787073 -0.79374257897045641386 2.7213356613840975484 4.429694529313714213 -2.9072649476481875475 -0.20674122738246586417 6.1428844549538617059 -4.5575902181514029721 4.3984616366734892168 -2.4316056633436700096 4.9906661857055460985 3.8576363436171430266 -3.5975782130158404648 0.22673100778310611991 0.13290297760059843757 -0.8186936821897348171 -0.27388876515988541671;-17.79608147286943165 8.5135195491292652292 -0.10636637194907222481 12.386312898925472936 -23.16592185604044829 -7.0373435220280189384 6.1099056029540230739 -1.5802328895371284823 -17.352001302301886199 -10.619512909754094565 -37.547109277690367435 -4.6056171018102958215 -12.325669611999689579 15.310062233038857826 23.782536490638715776 3.2246336893697300496 -11.678810784105161602 -2.6116224761050017555 38.880783335882227902 3.3037268253514318062 -29.507502982187119756 -4.8499466371824917488 0.20752273508692814508 10.540289243940154762 7.4434754417336375099;-2.099596183859111953 -4.5441620043859352052 -2.869629378578970158 -5.9939005578320756484 0.27123896556352650178 -11.580109555117385156 -3.8620908326696472557 0.35753460952641513693 4.8498850658880465758 2.3066206737956607142 18.297667455573744633 -4.4541446204165415779 -5.5801197961727124763 -2.1071205954004676997 3.7484902890500144679 -1.0812920090094468861 46.57991924192069888 -2.956333789159104608 -7.0513898134966384035 13.635030016033233835 -11.309468167421096396 0.19293106651224067871 -0.65810316515692002248 2.8375928303982553835 2.201234980599323876;0.43170644021001236545 2.1685676786929040105 -1.1070932133273096998 -3.6420015532020402205 0.24245911967725417013 3.011376466316662448 1.0958926041717782507 1.9150848642053530657 5.7768671908482005506 -0.76309394051091372635 3.3322995187861645938 0.28033368101006816975 -0.049391530710016756656 0.75119239534202530972 -0.17194686053863550423 1.3377078029766575895 -3.0107189170069199591 0.88712287058990768607 -6.1359158319900890532 -2.5382765132920037665 4.3050797984949493724 1.7527350353707347175 1.7239371862177765848 1.4047643926233750467 0.22534136493741649399;0.86478264412757599455 1.7894226607188861156 0.057837144019114314353 0.55777588683105017164 -1.0765301318779594286 -4.478755880728716221 0.63396813989790556931 2.262937793793197816 0.62527533069889729145 -0.23052546412780969276 19.062834974242292674 6.4584274900048184165 -0.29363890977695078499 1.5032371543489826404 -3.151056709523712307 -0.052531515755919654109 7.1162472170071211508 -0.10367829124179622768 -5.9259224745250538291 -5.1044224020354720395 -1.4913019118771306815 0.47987403370336012554 -3.9047396023499341133 -1.0825989314788142526 0.25729524349056037691;-1.4894467854206581148 1.4405520418291704043 -0.092499669863147712667 -4.1677727753587348047 0.025725044331605814718 2.9389082633341474526 0.041265225578510963955 -1.503780704522956535 1.5822582327384528966 0.36363413404006761365 4.4331231275048255114 2.9884059729549412587 -1.2082778937058347157 -0.56156940061393956221 1.4602279779603912768 1.1618663373073407907 -3.9528873097042724893 0.12033946709158938049 -1.5319617317397806744 -2.2570951027613768147 1.9379353944748298755 0.40022353675294181086 -1.5848339808519718019 -0.4834318658795607182 0.32530528774392558633];

% Layer 3
b3 = -0.51713773369697724203;
LW3_2 = [0.024167050999035738501 0.17050015629364256853 -0.024555605908461942272 -0.088286568777598981028 0.17988678270471855636 -0.035069530559184519669 -0.06839204330276905941 0.0026591374980752704831 -0.0636901775068584447 0.16703069683428334313 0.015750161902470929953 0.44964963035477822917 0.2625011116667717026 -0.4772557665138510985 -0.43338751139549530622];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
