function [Y,Xf,Af] = ESPER_DIC_1_Atl_4(X,~,~)
%ESPER_DIC_1_ATL_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Atl_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.9737867357898435383;-0.030669540375269841587;3.1727926663668113427;-3.2710892388062586811;2.1811069199302925981;0.67698316229921218223;1.2607885728058974006;3.3584633274491619837;0.22163507746755575778;1.5057617943831758112;2.1767968021187118488;0.29296220177594234357;-0.49384877744647009967;-0.56159712817766305193;-1.2202285325000425953;-1.8759522258489957913;-1.1224852133761520356;-1.210755431722976061;-0.98970626908880354744;3.03961865248212737;-2.5268525542234923087;1.210651840685725622;-1.5660984899070535814;-2.1761050924201246204;-1.5641757583231052919;-0.088330847027317971332;-2.42640896385595628;-0.38020996212883217957;-3.2284075497966648882;-0.39916927171205901503];
IW1_1 = [-0.050310691825188241788 -0.29509323560178390977 -0.44587654569997037246 -0.13847632907558016235 -0.044996530988010471908 -0.044095350198569818745 0.40611137895492133154 2.1783187056619026656 -0.9131513769480790188;-0.021014659528855780118 -0.3476119103669447763 -0.78342424216645090151 -0.23586262314396289064 0.46479014963819575978 -0.93937161228044896433 0.40170775349311160785 -1.0513127399384238903 -0.097186351590018038582;0.019264668292513727199 -0.053884281194725797137 0.045110267154692462732 0.23554253819101250711 -2.6675685655738869961 0.31863514426372885335 0.0010493527290380347261 -0.088728276241313006056 -0.23872789746810374467;1.1408955430084437577 1.6552706659627782759 0.053416679608511465072 -0.4730427821956022516 1.8831511008839989518 -1.5934307217761718434 -2.0863946902478955892 0.5082595922281147871 1.6855563637567514412;-0.83457652240313950909 -0.28638466033114934328 -0.93294913449321303922 0.25032751767217692462 0.88042468181265853833 0.44032641251834170326 -0.26323335020870691769 0.56411518187146048042 1.6838647625285887433;-0.49174073193233874823 -1.1746309354300843442 -0.026292334781648066255 -1.477028987843074237 -0.12486108020642194827 -1.6625329564847566299 -0.69584662825730358993 0.86455900472299385129 -2.2145103833356190037;-0.27887668066155402169 0.032662790193768526104 0.63563305331255548491 -0.47330127147875589166 -1.5093120815119667188 1.0907822931645403397 0.30448181505043298012 0.013552721255279519957 -1.0473250495280255201;-1.5530177435366800953 -0.090876014182317513268 -1.789148717024230395 -0.023676472908319305677 -0.56622814651731268043 -1.3917114721439949321 -0.87006019144363266893 0.32233138255498849922 1.9412751987703462664;-0.4506244303488869396 -0.19762591008650592928 0.11666534685654564307 0.46757737496902268548 0.57973451712128176716 -0.1769587070159474862 -0.59756001343167941542 0.44239590528101330191 1.6293686160701246202;0.2858153596428150145 -1.2468561317152109247 -1.0306450924085490684 -1.0494948699046446894 3.038980214277652081 1.2193405094238249919 -0.41433578605428600383 -3.4990971732882218959 -1.8168116612334193061;-0.66390089760975468103 -0.96037159217290002378 -0.070313391324014984374 0.10881844448108231316 -2.6671799103794251451 0.2479195994101753564 -0.68186972862209904722 0.22021892364783257623 1.4006349578740888706;1.2911141504347596332 0.044084100501945777673 -0.94399473725868932039 0.67811106359580997083 -1.742783380843382357 -0.57412374647841646347 -0.18998335300724492058 -0.2405588378687076867 0.51691106303652079035;-0.36343279412056866962 -1.3629409925688786842 1.2406479573941247008 -0.72288053324363654717 -0.66803350620044188446 0.75672433941727179629 1.2986204689295168802 -0.38827951003103006178 -0.93918579527447232369;1.3628026107512121179 1.3403966612162403482 1.5994479118967281916 0.21577754815462460436 1.0858388334774013995 -1.6689756364128482957 -0.77449466848026515819 0.90830977889096342626 0.95815480998395163859;1.0364109467796507325 -1.1137832487453165342 -0.99910968145617962133 -0.15756451796658998976 2.9140122678025299763 -1.164151036891440949 0.18374113288224167007 -1.7491257298897449068 0.97947824104435154968;1.5297787048916517971 0.013448387709488775904 -1.8773172789235677005 -0.044760930002910814807 3.2347993713277247707 1.2048195509514814106 0.19844581867610960879 -0.22945578374777259034 -0.61885547945281715876;-2.1051300817076801231 0.4070215575422840848 1.2137134841663037577 -0.36395379840782537961 -2.8846690871714857352 2.4132457012189307832 1.5665729257500506932 -2.0993230083877403302 -0.71315867793982901102;-0.48223662887559270995 1.6811618414926956522 0.70606305451429873798 -1.0595270156681761975 0.22783580065608544096 1.0466767404134114106 0.19828335815771541695 -0.37061017008554514307 0.012140677815975577797;-0.495176365538897989 -0.56447242943285302896 0.13614057546651733843 0.53756669263579559548 1.8926814936668834299 0.38159871403146661262 -0.19047675068776714902 0.44864917289810624101 1.5922214172262050269;1.568977351113667984 -0.22047294091229507895 1.5670507684046079966 0.74638638026201009623 -1.2636076193854968164 2.2200410733535176355 1.2223710388514348324 -0.51317173361573165113 0.74458387829629901766;-0.68710431912837155455 0.91438602185803463662 0.83060608616361708556 -1.6671854285986018596 1.9373505370017209959 -0.035470587145504446636 -0.43278526751842322229 -1.3466521504826631794 1.4634132332949767452;0.087055176180445684175 0.062848829211826245933 -0.39296495823233251743 -0.70845017639187957137 -3.7333095310552106838 0.29552178017171809588 -0.095867902138114052812 0.14439965458798584286 -1.3911688167618547762;-0.038370122840593157143 0.30233580457708220113 0.45121823276208172793 -1.0153992034946199841 -1.7593591048986725323 0.39168407761925638777 0.045966974694007678437 -0.055440493503063771608 -1.3793824111041987912;0.42932348836328687591 -0.97687667933396582498 0.49548556833422174872 -0.1925452969495614064 0.23030137916386736463 -2.203511144907670527 0.24846703627622304666 -0.78678674000229842367 -1.066132845833216658;-0.19100008844564131394 -0.39102284353734995115 0.32773123656841091078 -0.55195406255997814249 -2.0952376311717602064 -0.089555906416884406562 -0.7981390975654684139 0.61947565261530235237 2.8430140693024132936;-0.75454645858150293236 -0.76630577940166511031 0.58952300710978033926 -0.48157743004265818332 -1.418831938279649485 0.22041284202171049222 0.63433465246017317618 0.13818399373897077842 -1.2829087873296625144;0.95390336226227856464 -1.6062250171967515922 0.22710291619240560723 0.67303820903008026999 1.9156813498936922091 0.94717348042852367307 1.2738438417356900967 -0.42222261517152942512 1.1299361380154695489;2.681842180665580333 -1.3739344267406046196 1.897736507299790043 0.88315480789022060559 1.840933925891863554 -1.5086508792739694584 1.0676191110021480135 1.4963030084226958127 -3.3850770249615442786;-0.78434511656730854234 -0.99990293808740071668 1.5188558948569308438 -0.7191808196752098592 2.3940005692691745942 -1.1152943517350453195 0.28932344826645783886 -1.1916507074543367661 0.021723149545647371661;0.41632827476168099423 0.24510824127381408699 -0.49120648204366718081 1.2088471618849467859 3.1692514162256966159 0.25964933870285178408 0.70323973171683495931 -0.11822654728217776854 -0.67355427331300155025];

% Layer 2
b2 = [-0.90466930815963486623;3.6522135619215498892;1.9307702458272038015;1.0749018502541425324;-1.3750142023003431024;-1.8004401443112523218;2.047729849137717828;1.723463987366165906;1.677277194166513663;-2.812440404081488321];
LW2_1 = [-0.5098913881822791927 1.4184792875234613074 0.48526973535258399739 0.47932695467680291879 1.8485765385723078591 0.77931086598575338709 0.79877031218594041206 0.30327156980524111463 0.28597748710193582333 0.72777596107381603563 0.80576933136833372995 0.011044932248352118745 0.30185518337165118119 -0.6218422999351249647 -0.46274311463496820007 -0.52769455878388171755 -0.30859891232259784033 -1.1309017454623606636 0.38956597443626361787 0.093005667461948299257 1.0506146187693603533 -0.65153469479565018219 0.95010598299380100151 2.0293725151716293098 -0.91525354169967854112 1.9258266371369729963 0.1273392376635308354 -0.14720936225588740487 -2.7666809650571488888 1.5842399207366058;0.10623425936546976311 -0.15270780488530966146 1.6583829579561009115 -0.074949827827177975537 1.248633536605219474 0.69984052417767761423 -0.72677715819758226257 -0.29114204103854812722 0.45355048463947533754 -0.80871618825111635243 -0.49287629662911502937 1.7562480621713898454 0.47834292120808385995 -0.40537433242449111281 1.2302029060868924226 -1.3136303976344774203 2.0775840091229800244 -2.1608729726423887563 0.31957169723205341993 -0.50761954999012515177 0.38445830663337760003 2.2768894700029265188 -0.81126711088602510014 -0.24669711117527887145 1.0559637070663874248 -0.28546868185777685145 -0.015246140229612806238 -2.1088367237582610336 -0.1069131428137335138 0.51337182880282528075;-0.1213149798013664904 1.1554321327961281085 -0.084089983892569719615 0.11453789504525851983 0.23611914336905429068 -1.0841982198615420785 -0.16095564252650901294 0.2624744303832623471 2.1580375804911255955 -0.45366218799886265378 -0.50747825516846034599 0.46716563605876376686 -0.27240385254245452762 0.89971688078793632393 0.43093438540473516518 -0.91637874896595949981 0.17584518678238914013 -2.0717728577202527696 -0.38443349758915978942 -0.79804487434775983612 1.3490334480903132253 -0.25093546331038651953 1.7227805506138913483 1.0025620479063670487 1.0148474672792233697 1.3685690644004979699 -0.037313784331190077981 -0.17464362920699827431 -1.1154370897139369578 0.25603602065245290031;0.64885619195374455437 1.8938408998533033945 0.39048957144344137449 -1.1782140428715532909 -1.2406494097417446465 0.37274731045673226149 -1.8537857274147497844 -1.0121668490035446997 -0.77407425002848184725 0.47380304520345206676 -0.50585589551013931953 -0.56672015673347053699 0.14667418525167513765 -0.23524432436254441581 -0.45597222381188295959 0.77270575753667825047 1.9347913496639859154 0.45069672503164870392 0.48035733785917494876 0.084594751330272610623 -1.9572102938967597119 -1.6866607421556756297 2.1188535919862374612 -0.54288408820257039178 0.34297147879042233498 -0.081979054692314937136 -0.52724412904975948013 1.9840168581023041039 1.436411308126868569 -0.91275919253337056691;0.29848915643777884643 2.1704281276529595601 1.0080579271764751326 0.32578297699405073251 -0.39953694110256721128 1.8797496249512688493 0.11981793972477169929 -0.7551325050493341573 0.30949234464250785503 0.15796682589486152337 0.48531590658415724171 1.0040575309899846257 0.42783771594101710489 -0.58273521739817224496 -0.46152605973301408238 -0.12193928657495922696 -1.3514865129475122085 -0.91950528096707873082 -0.65728050324486919642 0.043992755146584350268 -0.80167754158637460904 -0.0080896947672192270895 1.6385810673578848906 0.1352695379741093995 2.5217136843756571274 -0.52307499738737350814 -0.68396047359991318793 1.0727217579983345797 1.1240795737320399272 -0.32780889197396101409;0.2659665893158927874 -0.21668278542165869682 1.5489479875207194937 0.24943772956665366536 0.11055041376372461148 -0.2351441501007190682 0.1849852876846984906 0.17255846167796631829 -1.5258998304045936489 0.36670628780591552065 0.48140301485607922549 -0.15395833485625154413 0.31907878201687200903 0.19803743495337156055 0.17682602338012787246 0.22862612480150071304 -0.37470342584673105302 -0.35921695556859861709 0.89016455571938213343 -0.16170187426128074248 0.012714964801145030998 -0.5842184740248675956 0.8324904008175707526 0.072945985218191344845 1.2548592036664216742 -0.56954747825370721781 -0.61960464367156442567 -0.36583158405165311367 0.22925163432540932029 -0.036937048233238123363;-0.27247062087241413764 0.13885671103606767041 -1.6884078544836580438 0.31379500268667714913 0.25996540897189901465 2.1812022923127583063 -1.3809507878707145689 0.011845724086082597831 -0.70347077233736199364 0.26176351208198728182 -0.054451408476025142669 0.83895479039350118189 -0.42384967658791189438 -1.0377666175640603008 -0.19860597003769439595 1.4837838362031929851 3.351766347129014445 0.026053351505676412836 0.62786886688936616174 0.79116969681547055782 -0.94556047254721642403 -0.16516120094075470437 -1.2175422439269831809 0.50875571646034456474 -1.0282106954762948448 1.0639661709414094393 2.2930722876105185115 3.4340360772112261678 1.0123031478565851504 -1.6371736604925295477;0.56629165569647488265 -0.5427232756750396403 0.85364329089021451225 0.62455701485711045962 0.34292177394023731773 -0.36873701916039236526 1.1224110856756750465 0.98261270772586595257 -0.7841384187212078194 -0.66475499687903250035 0.60856262398642613221 0.42562443565743507401 0.68203184769877145399 0.48057882308624444434 -0.35446724145365560155 0.27873389281795496464 -1.2881925577378756653 0.27265279058969787984 1.2298709780097336619 -0.42592497173265425614 0.35693195159815710449 -0.40922336195693592709 0.92170534718150998188 0.27656962250965921868 0.14385737531533532296 -0.76508391187282664969 -0.8298651012954594286 -1.1229398300335724503 0.32823595950836848001 0.080439153650113615068;0.83145088955153101384 -1.0934618638056012863 1.1682459076786757546 -0.43911756601350726559 -2.094235279794545157 0.48899215352794639378 -1.7676618447588516858 0.4618259371376968736 -0.070031354545346008456 0.2160075947472954172 -0.63631489811353469932 -0.73331245581322168636 -0.65700394228200131863 0.065274066895771892804 1.4485072745051268406 0.40340926024685330731 -0.7970002296695644084 -1.8428949360713471339 -0.36069630892673582023 0.069034981419432622785 1.5940714771054245169 0.40252034703526334836 -1.1303566344336539728 -0.39491066567004623478 0.9443358301354541906 1.466388022578363648 0.7178400940145396314 -1.7439195401943201613 0.12323518643512136606 -0.22894132873759170943;0.066202300348379636286 -1.868775645873012925 0.87213148414724195323 -0.45882037198555425395 0.32854220025549690787 -2.9306166948387235571 0.70916052732090728572 1.1567357686499604164 0.45573389747965215024 5.0008922148008139175 -0.26460043816846856579 -0.35422024080105424249 -0.40891406340085395543 0.63014174955682378254 0.401671966496155608 0.4409580706769179459 1.510868740066549254 1.3512975468508829913 0.17661472790064150495 0.5098319390532427553 -0.18286674194141186445 -0.8132581707969861462 0.31852777642500612609 0.0549844963361457717 -1.6825074737090721655 0.96487169787333149085 0.5405628601036600589 -1.5453675875518977367 -0.48680805462641235648 0.58906827136685557811];

% Layer 3
b3 = -0.8369493193810746412;
LW3_2 = [-0.49329130191322423382 -0.11231695084410452112 -0.030088106719540260586 0.066410865053956588677 -0.11412432051027324165 -2.0618442126920264457 0.1945552577156632601 0.18194224456239330157 0.12507980716957672884 -0.087097023154040428827];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
