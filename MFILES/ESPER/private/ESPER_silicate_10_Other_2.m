function [Y,Xf,Af] = ESPER_silicate_10_Other_2(X,~,~)
%ESPER_SILICATE_10_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.86239368208432687357;0.80442357914712536715;0.90809645943126693357;-1.261858091527207737;-0.18900960104201386391;-0.28076129299939178718;0.75803262058676990076;0.34364070072865882111;0.3315091841859647559;-0.31858636134466639112;0.12038010844149280021;-0.33147735837431407946;-1.6647575920258943505;-1.6679337173141608464;1.9359965367011444659;-0.72388789888994786725;0.31248964665607459334;-0.69360757820248131189;-4.2100992960969767509;-1.810794495246999869];
IW1_1 = [-1.1010472011592957742 0.43617011737126387683 -1.1402408653757369894 0.1177512387742402078 3.9562748914123910815 -0.53224391882897337247 0.58046535296633372525;0.18785147417627420796 -0.39629758641749007753 1.2880140166439300042 0.29424637386391228056 -1.8505787582392354551 -0.52665395028856720749 0.072357126534072765955;-0.050880080360896230707 -0.31915092761470609251 0.63026968607390365662 0.1003511867528825291 -0.25536916002280596327 -0.053765193802851864169 0.033237184237693652433;0.037867840277332830146 0.11227008421170578401 0.42180374491358879618 -1.0640403170100254382 2.015525236400508291 0.32934731439542602738 0.41029947568677571645;0.073610270530275273559 0.033669583445307675607 0.35471059135881410906 0.31534849184683977352 1.5862020398448084535 0.10213822405267172777 0.38900821602516194586;0.39335920976548310879 -0.059838231255682883258 1.0327257155023772395 0.41824170445165503862 0.50231787403682914839 -1.9499548985870529538 1.5595599042034735682;0.50930913607909733543 -0.12737566860916418876 -1.0777801814923260171 -0.4185703051013463516 -3.06609606781689914 -1.1161367925828142855 0.21121232221725505518;0.18633335846098184052 0.29382247642938702503 0.29454862382850099944 0.21986911828782959577 -0.39309448541789487885 -0.2424765179295449713 0.058355123272251618882;-0.56482051886486450698 0.018012976636205470238 -0.45056005774641055828 -0.065890886895297817727 -0.11524399726563398783 1.5303302727440781794 -0.73982902769440317403;0.32880515044066355168 0.0029583911294359297416 -0.45646908998841340122 -0.064233565716822954572 -1.455821767103145481 -0.52172455355618330142 0.11166493296024992965;-0.1319125078070113033 0.18556486980194628056 1.4368144103816460344 -0.09901147830463274957 -1.4342979772186792431 -0.32804988581732086317 0.095364825616270049169;-0.2843625284205135717 0.7100326256183203677 -1.4467868859193762088 -1.0226019845414400233 2.5023035424523891734 -0.67240042143184175494 -0.23128528074950197024;0.077065471241643673794 1.8655787981490261629 -2.009881966589439628 0.23017880795814169015 2.6913118464142109509 -0.13334070748231996451 -0.48419562242339875269;-1.8373554162359770903 0.24015895027097033942 2.0038901547928094082 0.60241408910032523405 3.1553116117150890041 -0.79414223753572621423 0.15514360018586759171;0.24132720790587544601 -0.15623471968617211325 -1.8958411721252106386 1.3581784703600261466 -3.9248530445829201696 -0.06998745412171886171 -0.81546609599401054247;0.54747461219013504596 -0.020551403530503879746 -1.1469427641013585362 -0.25821211859289483481 -2.8169359059719676353 -0.70095962571876857528 0.17398919007324215036;-0.6722579159969523932 -0.042692745216089171556 0.25729098456308324705 0.13699003371933260453 0.99707592796392685575 0.86027781270298242511 -0.57598740686357741136;-0.35725191071640205465 0.38029329632784897308 -0.94793106515742175944 -0.10754214727952796093 -0.38521022902107793229 0.15431074655464144252 0.099932236303536203792;-1.9126682898881282036 -2.074831073730542208 -0.7593409502419241619 2.6225907146194704644 -10.514483069981404029 -1.3708714020611485473 3.2835095647216028247;-0.13205530221728689622 0.36518509389823033962 0.99711473306733533484 -0.97108597275127794823 0.14875144305286616686 -0.038544623885255500928 0.073337186841873083787];

% Layer 2
b2 = [23.655322564088233861;14.391281229896659255;1.6419506259211911203;-10.134401113016449969;-10.448006578997096838;-13.589104608395922824;-16.185903292416135457;5.4350809436787930196;2.3159465657845625941;2.5475604629999581974;-20.093339864555641583;-4.2996416078563930441;4.7600012535820130921;-17.501552046468987101;23.959762438810052743;-72.741124297031745982;-5.1706479586884164235;-16.339844842282385429;3.2491776346109366713;5.6781061377867265705];
LW2_1 = [-1.2282921021992856403 -4.3121506683865522547 -9.7420761973431790892 -2.9198497091497070954 13.72376080577714319 -3.5258636782630889961 -12.575982493380589489 -24.738735281392553844 1.460493223368968696 18.063097847269425245 5.1155366575118614847 3.0906502443996552998 3.7064259904120522293 -7.6684024669788222184 -6.1029881074906695559 3.7095864306650030429 8.9772068210468631833 -20.702935086471143222 -2.5600747862837720525 5.046250858451251986;-27.168935779481838466 -3.2531203581286178839 -12.805016100377279997 -21.508126436917731183 -39.479801056191682562 -8.5681738967514959882 -19.295198275058513815 18.212110237799485901 -23.893902686533106561 11.306192375473015588 11.488670493288486441 9.7839292992546322836 3.2743920854609553928 2.1382395338026021214 -15.92807028698089411 -4.8606248671690526209 -1.7481508051382597113 8.6622127526713690315 -19.560602761215982071 -1.2530928516627264369;-31.293395752656127939 5.9087284334815732834 60.647868515009776047 61.370758796363070076 -29.059934042061573933 6.5134441783490997224 12.19301288057575583 -33.158443387350018838 -14.803184038218260454 19.543663336185847612 -20.763476927801594485 -7.985879390761597918 11.591232249280844613 -6.1399506692595071655 -10.323732495447963231 2.3276876480562163074 1.3794874364077334139 -28.379578199717435893 -13.935614763133161276 35.776215956258859308;17.014446848152168457 -3.2924717443734894395 -13.161502482707456707 -2.4412313723041658697 -32.277608724417873987 7.7168682987372232418 24.15193846704823244 23.421257486833042094 23.137022452913967641 26.47219371314566061 15.90730940050639397 -30.978534695740762572 -5.7531883380427517594 25.171024066270916819 -23.357522919845145282 -7.3427790869613680513 -12.953540456849106377 21.709106860079351975 -22.636239611239204805 -5.2500315397839276699;-14.073067323606046841 7.4132329300488581936 4.2134138767796933678 -4.6900096796713128811 -9.1758292618578174427 0.63884253353323638969 28.153741415040236973 -38.988660125589696293 3.0843676199943579341 -48.381188106674244409 4.4982206797000658938 8.7719105444861487086 -20.538961493978291628 22.709007679709870331 11.406082790627726453 -8.1251144859134836196 -41.595471444404765293 6.150125221297731315 11.673296325684674457 16.461818921609992827;3.6311736618405650034 27.681967737625988946 37.193089407656046319 0.069955588748287278467 -46.726821890109974333 -29.954091781163199926 -20.300572075495889379 -6.9008222693992999908 -5.6843611124242725552 16.458439710429608738 9.468478938676076595 9.1398555428639713938 17.718567667128017007 -29.606146957090359706 -20.293857840928229308 -12.152666305073640984 -23.121090807620618079 7.2477975491906194705 57.386309602314582889 -36.755217772119316066;12.538246424051898487 -16.574302565804948983 -7.3125102937182795415 -6.7265677941259918171 -15.690294055364475412 8.1282843186636544175 -1.3059843105119393059 5.0639584450528669635 -23.216249674872269537 10.977680680886759745 6.8686277883291024793 0.87787473010257000006 -19.235617628618442154 -3.3031968928195429847 1.8572675996730418913 -9.3971945592197680952 19.072190002454291857 1.6549136527594545676 5.00477768734598083 3.8814573597621455647;-0.71292084129407085058 3.7801441391212224907 -2.2675915795378323025 2.3463472246916508013 2.4533492430975765153 0.83154325171469778422 -0.42542194945684141949 -2.492507099869025744 1.2512741306392132223 -0.50182953415048803247 -1.45317596670897764 0.098645536596000227281 0.78975874666732148732 0.71704482301944527656 1.8969889007059406172 -0.2600422817258372099 -0.96872757919881335997 2.3071372246007912921 0.50882959591191079252 1.6567714041426386817;3.0717247666659606153 -9.7874239420295214842 7.1269513898821870157 3.5794010435776582035 5.1735904115454420804 -12.781522959336887979 0.41293490180508846121 -5.8121697123367050963 0.25500464046854093292 -2.234285955160801862 6.9037667649687390892 1.7841113361664009407 0.84563044078617599641 0.38919607360513758243 2.4390423411891082317 1.9715574555652173316 -10.726542308882708099 -8.6279884156594164324 8.8601664806570354926 4.0898812878962331752;-1.4490986223255655219 1.6327994367245719509 0.66929018762381886631 2.5302848401781403709 0.36087912029328822472 -0.68566835408729120971 -0.51446304493329708674 -0.63750717481299823408 -0.954789603123827324 -0.83710293870178087428 -2.4310880967697472421 1.3947897900316550412 0.35736033809444223142 0.49466352319653655867 1.8750626165237831433 0.79904829959829926089 1.008103028273012125 -0.41113330836130279611 -0.22605311484462423111 0.35318990926535825947;-2.1552729457478676522 9.7402346579946392779 -1.2324496396447459645 2.119476170348498556 -2.5818170311584003329 -9.5719706169379250582 3.6925899050130222001 6.9217087830828258888 2.1897603291237062173 -4.6957864459163216608 -2.7385494497269453618 3.1345076129665097042 -2.905246743393374409 0.6537335458831358137 0.62529269872253057105 1.2249028767532155193 -3.7604188255729105173 0.88102158420208875889 -3.5305763184944161104 -10.470380401671759429;3.8791894730008689152 5.247744593234895838 1.0090717329018989989 0.89757977630570573435 -1.6398333346582429915 0.19896538170183805661 -4.4464039172920486465 -9.0186259653942677517 -2.0715905819249611497 -0.0081281549863924888039 -2.3993342432130635444 -2.4576102325261452997 -5.8898795873567477699 -2.507791267678173508 -1.9545467999412144966 4.5736972810699487724 0.38997517458751373987 -9.7770505224674462141 -0.91721396295109081098 8.7027418378140044553;-0.97116594205482220659 0.79307957747781765434 -2.7117200440123241378 -1.9510016758789265889 8.054007890630689559 -4.0530383771358202694 3.5791116168705361389 -3.5184165581327588868 -6.1270617927852626394 -8.6902325410451553012 2.355574020546606917 0.91761849355808799977 0.069319206059568580502 0.061194646802932413376 0.13446418967848650095 6.256639477625331125 3.1960457074325576698 0.52060338386612770023 0.093672207241960236956 2.9256366934079891529;-4.4768532506679221683 -7.7980312627405954373 12.392195933273395525 6.2583343511150886229 -3.253418961258127684 -3.1002533723740075544 13.268500002835843077 -8.3336616666328371394 -4.494657614863281303 2.9237917703149358672 -2.1325805404642288465 -2.918099439122816996 -7.8876604620063943685 -4.4546138361820641904 -3.1055706798725863926 -15.337261078357483868 -0.43175105926009693658 -2.8715911567585354902 3.9072309595327925358 -3.7708898199541653895;0.45684387213101390612 12.63383906494247455 -13.841485084648414983 9.6968216704318983545 7.5067546448551452087 -1.3299909632845285934 3.207503104892872603 5.6960411972340594389 -1.7400426691227164344 -10.545812316851227664 -1.0765919089382771645 3.0018788750767639861 -13.944755114838711663 9.9494810904220010173 3.3759734606101829968 9.7824638496831806123 4.458652223512901358 -6.3254456636079732235 7.7122752680710320305 16.695706498735983558;-2.1363893490905394579 6.0846508556922627164 38.025405405852119145 10.743164470463694826 2.7857653404896374205 6.1280430308615025936 -6.5950170058990726929 -35.372830238336625541 -0.43665952373463601255 -47.371574112428440628 -15.487957492478857446 5.5667990952905217483 17.125500977083806475 -2.6263995274823517256 38.234132529515662213 -0.79227669873513273391 -6.6274203397117368297 -13.465989447362536779 -3.9369208875722714325 -20.181770730914269762;-11.976465318504306623 9.4813882344570092897 -28.042922604811224119 1.0278590061727113092 -28.492168660137355829 9.3865805164570748076 -13.232063985264971961 4.3892574952434877389 5.7252104423140242062 -8.5231987064158207801 -1.0060264119614261702 -7.0421197412044991282 11.311518421773554266 4.4767054881123202748 2.5521746649107011073 2.8036326997774070335 9.192799598788706561 4.4646147098686626009 -13.049505421096226243 -20.301783489862259557;-5.9383412305598453074 -26.309168894565804209 25.555106973848122465 -23.584472753496083186 2.0655865544785383392 0.43361676006247029669 -6.3118984226545249427 -8.8106558398790735254 -6.3568595058253798413 -17.585234696392998188 -4.5444497783898860632 5.6834172108850067318 -7.2999392984990212341 -4.7845246164565855551 0.24744824358334149839 10.344974075297560745 -14.238047836576935623 5.5367942379843313461 -3.0312560214856500984 24.099428168756325874;-1.7943549209340641237 -2.6703280353745197928 -3.2080167683853901828 22.155718817169891111 20.517208210523047995 10.756678929052231553 -26.991599234418210074 -0.6329229740767868817 -4.3941865468897685076 1.5376556991037098054 19.929461414785031081 -19.421225486756966916 14.998357557136632323 -1.317112534226495324 10.048629555639788435 -4.5282191007169245722 1.9158015335624505315 9.3275941750714714829 2.0983407187824569817 2.1423105843369145695;0.7610752900780032304 -2.2720855897901941489 -6.5156852765557102813 -2.2946274651622244889 0.45966710137447519546 2.9515483624412888197 -4.3285370914356091632 -3.9442834261461952039 5.4959220012464964356 12.517216779809981375 0.87684258996503683381 -0.59028876002421326596 -0.8355273023703536639 -0.24832185143181162434 1.5573431196354767803 -7.8164238649451664998 -3.4310912327507656627 -2.5654250659679922464 -0.15840197318391066594 1.9884446033847329449];

% Layer 3
b3 = -0.28441805309559270443;
LW3_2 = [0.027487539892290413501 -0.0078393505779692975594 0.008048354484662616215 -0.010977721856309288415 -0.0063669344765201691186 -0.0087896889437765191033 0.01027586305042333184 0.3302716619919954244 -0.023223435571635697716 -0.35090833712874691663 0.016567353891058962667 0.0093614025305367234986 0.50426404057915041879 -0.0089363215902078900477 -0.019132277117081840367 -0.019093029037761583 -0.0073326034151063477703 0.074003659574773617003 -0.0059468668286920094157 0.49966351855083479538];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
