function [Y,Xf,Af] = ESPER_DIC_11_Other_1(X,~,~)
%ESPER_DIC_11_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_11_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1783494620740919689;4.5684539721617918318;-4.1276411877358007985;-0.91271814364556813626;-1.6184937472376526024;-0.1386124460411624626;-0.67970774666367550498;-3.6118647537987280671;1.6258874609118607601;11.296882296089325592;3.3390902454323443393;-0.12244083985920499458;1.1205415558629476802;0.4299080485326849943;0.58946113609744765771;-2.1258656129710575833;-2.6472078890995067724;2.5495168943703094833;0.64548163737296515574;-2.5497159548233438997;-1.659899233474102731;-2.6702367104179236534;-0.62888679874507302792;-0.04796062485951851917;-2.726111376412509113;4.3989250412519265154;-5.0359600748327073561;-2.4921991032832448987;-2.4978112576507238707;3.4210515208061518244;-5.1963245458070552729;-2.5899932756795949196;-2.5504356356916386694;4.4256809743586043027;4.0427919796311932998;-7.2640249047461509235;2.6721972931103046278;-2.4586512530492221629;4.0558044130234520708;2.9569277421777560022];
IW1_1 = [-0.10654500283443453512 -0.029052284916517675389 -1.5241461045939441732 1.4887777401345503314 0.94050801420009200182 0.79023283620721185283 0.43071834468342784508;1.9339572902055253145 0.83477649398400499692 -2.3707104152922546803 -0.73899295694209565788 0.8926538185503429812 0.13923135224035257385 1.8432918515115928049;2.7991020880786603442 -2.3891003272469126806 0.39457793936220031394 -0.43869607041432551187 3.8847023222036134449 -1.514312395609379136 0.0046650271965972675212;2.3816338279313593596 -4.5410078988922544241 -0.18681121157070454397 -1.7328216775307752062 1.1381646732019976564 -6.0399763389818366122 3.0879173495789387083;0.050572614955359078415 0.037111410324130428284 1.6252662012190379759 -1.8165956538805034803 -0.59648285423060354304 -0.94628938754225755403 -0.33130679930606454775;-2.7888480935588444432 -0.10428477969240482204 2.0824495496382460225 0.607365608903105203 5.3349708561297353171 -3.1938092231848989044 -2.5039654454250985793;-0.5967079183756583971 0.24744036092983351383 0.85747160379027476118 0.05522491592387498982 -0.23113006866927437999 0.51293693762208214526 0.38496419293864087008;0.65256468930250799421 1.1079294360919016427 -0.59320657653654951247 0.21277963906332750255 -0.070243021834408628234 -0.2440366240355795191 -2.590290768240716357;-0.4453605655478288794 0.69887099295886079275 -1.4184562003393548224 -0.84917048439656339642 -4.0426501059504040825 -1.0165157265577100532 1.075050627995581598;0.043431051253458675954 0.074698682657834553078 -0.19078714674652505479 2.48272121714591254 -0.23456113175737972054 -0.04065525304192080247 6.9836409488712511973;-0.7044152532761961405 -1.0493035668301915475 0.71970150230914009537 -0.39219565260556238373 0.34560414589742710634 0.24795920139673199856 2.3715688303806090609;-2.7717623246406275506 -0.10523639836912941636 2.1195171579182781052 0.62901141232613799747 5.2978022902078958367 -3.1857322348967382908 -2.5648736656088759744;-2.67489187317986854 -1.2379815396084243861 3.642110001060322233 -1.1548805837592417411 8.0881892510531052665 0.62935741166944247915 1.2666683213470248948;-0.17535000824774091277 -0.1514036086302797679 2.8780343738088571826 0.45336566766815356022 2.0018739152581024321 -1.9904954031073154308 -0.70488813228481572715;0.12051281286395505721 0.12803947423085237922 2.0255464603181692063 -1.6336712454097768177 -1.5183816151579201392 0.73771579549484656013 -0.07852572636024644781;0.084199175514643953555 0.70659633975341806789 -1.7578796204559554717 -2.7230059522672047656 -8.572921172136462431 -4.1886944997497463916 -1.5612698965526679018;0.13202292339721824477 -0.10746933587183278569 2.774414346397439779 -2.1888756060174778817 -0.33354478926820602114 -0.9909756396821500779 -0.1051951537882703791;-1.3086087231757590477 0.35787557242231948784 -2.2578479369068604754 2.5395861093795311092 -2.7882890400480797588 1.3526856147318988555 0.17632013235495039294;1.636108612141312646 -0.9552857627524909967 -0.96029140820267389067 0.019856535392270887458 2.4358438899840746394 -0.36108461206126346577 -0.50308960550250358956;0.076750848983881916898 0.17515698520124434179 0.40422360503437915202 0.14169338219470337115 5.3986022797013859531 0.2008481731020597405 -2.2788864960467796195;-0.97906652977264807536 0.70133378035743021428 -5.1876301629804224547 -2.4400020007259626276 12.911870510557545089 -1.3033891290943511176 2.8498229576167819488;0.19077290123433415792 -0.13620560457475058835 3.1194133347567114534 -1.8214125404721426271 -0.39321764645081180856 -0.90451825924981288374 -0.23565079837971383836;-0.12512890649258459619 -0.12791884334251996114 -2.0605280033060395795 1.6619699455501959484 1.5439850923057800713 -0.65388677832526354017 0.087626997908630488432;-2.0867467689963699051 -2.2720396672752340983 0.85646440657054478951 0.0445497074739825763 0.14311691985252220083 0.7326741162911942773 -0.25026744140228729396;-0.67538195492133268338 -0.27752262160361451659 1.7120410567205257557 0.7127696313138198736 3.3487377416201118407 0.60697806926480868395 -1.234064143300183769;2.6368250818479417319 1.1294236648847297833 -1.5432761388516653689 -0.2964121413204812705 0.65780144521564765103 0.052414696430276290495 1.1937554723632630704;2.7255029086015012396 0.90623111324060978689 9.185105277730752249 1.7883460276501208508 -7.7595755732125093473 2.2432708181377365442 -3.1285089558503127449;0.073301476713695745691 -0.046067219389672606211 2.3716147621079541885 -2.4208281459158449422 -0.42526710008599227786 -1.0463788615324696174 -0.072128485849763446236;1.2946802629473872503 -0.35640270326544692958 2.1601311337483433128 -2.3845174143066887318 2.7461102325355528642 -1.268343240108939618 -0.23160800131500192123;0.62714013417141434292 -0.034640624146628891389 -0.12440056834591095569 3.4188119297083985337 3.9755203574216295692 1.4796501221864211129 -0.44388581462471632388;0.94306872243823780533 -0.00025451390367835132747 2.8207204141359039085 -4.1675566885794106398 1.7475069494055879282 -0.94898974322652207558 -0.042842879686716357768;0.15050019064593675444 -0.10242490894012588887 2.9830436620497087219 -1.234969374751875959 -0.33933415079268841597 -0.48182679891245278059 -0.47981434780828796649;-0.45021942027067901604 -0.16549448291501284158 1.8213330641618736827 -0.086979687219252074803 0.12077937255357194812 0.16543172164197217366 -1.8033699290991500597;-0.66316132428761398465 -0.81658993374208910243 -4.9852547386254544293 -1.3177731247120396674 1.6840933788923373449 -1.9907740023726212542 3.8163738304724970085;0.10301559165012877384 -0.21823511264791592423 4.7519946461690532047 0.28740523271579593301 -2.2773348247047637827 7.8477356457660745193 -2.3493954037593907103;0.05508308574173939598 1.2576942814114955294 -5.9027945261990177883 -2.4842596382657329279 -6.9817057794569379325 -5.0409538611036692757 -6.3646802516664955363;0.50272848885316490097 -3.2720838861072900627 -0.095958205771513579996 -0.078921292645760310336 0.81790341522054332835 0.40951551638391314736 0.47962038166850307075;-0.35590064983431329848 -0.10315611358033735523 1.7720690503647871239 0.1732451824664416884 0.33122460299087236324 0.33426956046078026841 -1.9831129091844801327;-2.7677909945662690916 2.3314835698572138334 -0.38042745889895868139 0.39113747605602244839 -3.7383915171004962197 1.441984057309584788 0.034149940964715262692;-0.93977500899798216416 -0.94611715891556724678 0.85572673435134227748 -0.50225762070234380996 1.0445331599083571561 0.37356739916003711688 1.8350118461394648861];

% Layer 2
b2 = -3.4249397694273344683;
LW2_1 = [2.0151228031187473633 0.84828604567522292168 1.2841571683648054236 0.014531531320372081603 3.3115893188690961324 -0.77857643864603975903 0.45336404969125354558 -3.0932946926353253048 -0.11756323652537378766 3.4377336698960565542 -4.3335150529836825584 0.76414195269777562824 0.028213593387345397429 -0.10046198899402478122 3.3635210790681902004 0.04775373216552914607 8.9437930600563877448 1.3652191415140384478 0.11787811285457729105 -0.15235616063687518196 0.026540888747888853605 -6.5974271573328664431 3.3018034300444796258 -0.051503543599490837768 -0.2917862803917227188 -0.51211077372830915433 0.079044671029979224341 -5.3959726608485407695 1.4252174820061238592 0.14889589786612406064 -0.24364532785372181034 2.467863491909768392 -2.7638672125478431774 0.21980019062623359916 -0.038476948106177487341 -0.031190741181860152931 0.066494496235592850941 2.6138511839628990607 1.3543489411449769477 1.3221808215045609547];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
