function [Y,Xf,Af] = ESPER_DIC_9_Other_1(X,~,~)
%ESPER_DIC_9_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.92592239555633337744;2.963450791198857015;0.26745266276913437498;0.024431313589340687004;-2.0503977800197756842;-1.1124231168479190579;-3.1560632623422182341;1.7529523924778618316;0.70403995565285593106;-1.7444088728573978742;0.70696605434492487685;-0.96711671393298526134;0.97610157551655118979;0.066582948832931143635;-1.5025685847808820661;-0.54923566786407085338;-0.041736769272355214722;0.34588454056795248093;1.7930073586951629228;0.263978140861979238;-1.4777881854117778104;1.4817479381344798028;0.11958562292616173317;0.17609129174412394003;-0.95913910937921331712;0.52005247136747279058;0.020392566128816763671;4.9037242513796552856;0.57038739147701378318;4.7630492122167611413;-0.1626167746391198321;-4.086632432639388135;0.16600715356383508037;0.048040146257779942074;5.431136142237046549;-4.3172540151068368175;-1.4989273534009450728;-8.2323407529466869903;-2.8525904904816634655;-0.0129823595167196746];
IW1_1 = [-0.23880963719058001526 0.07339529320531211487 -0.2488541178661891895 -0.40975094062875372369 -4.9214026935807781982 2.982732680681262849 -3.4654021596752677681 2.8112074068277546068;0.31943222581077446165 -0.50759533902620390666 2.3821034540137127067 0.34261319270464213327 1.7253662594018059906 1.7865796297933640435 -0.26283676366269342894 0.75645626482709871219;1.1975474399548791116 -0.19163189677032105296 3.9535090026141510577 0.19785028753605587992 -6.423703994189940758 0.68344028606752438293 -0.58588218982756434805 -0.56264580336774050462;0.021090522966469647803 0.15862739288691687922 -0.57213124175118401649 0.33566293407121350345 0.20545179830958801293 -0.053744345786864600178 1.0478893898774455096 -0.18483984109950940544;0.42136303213601172812 0.12681288487541719778 1.5092070747082286797 0.068217880588063203873 1.7005810668354526261 2.8289762047476854079 -1.2069785049364987195 -0.12837845047964505096;0.14838671900900118894 0.55123937780980836187 -0.72430852175623661182 -0.20971883351071171631 1.0288269258336726342 -0.45879592302801774917 0.30946790138007995719 -0.3519772830824926535;1.3481958701035239301 0.23698908091728060343 4.40446801970669366 0.51146138224889758916 3.2526067488098591163 3.0714980041782831144 -1.736013775765007372 -0.73536184211638944141;-2.5999331154996561111 -1.6077620274241632981 -1.4063016525129308221 1.3020213875797606029 -1.3700198029296675184 0.90304885074647200938 2.237259095416016752 -0.011989453011625132023;-0.28880481188076201349 -0.60714085745525636639 -0.1326012358218724152 -0.53243819230974309686 -0.85032529114163768469 1.1448600695439530295 -0.66425083585910771333 0.90598126078271479233;3.8150910160786883907 2.3311241226819605643 -1.1211802228887630672 -0.62906177780710159642 8.3160003883122826096 1.0777511153071119843 1.3398903678891467273 -2.4873925839191701748;-0.23126532407494862498 -0.6080126441598554532 -0.20547168880065516672 -0.21229999917587419334 -0.95823781992199552615 0.79194582402891855466 -0.12333246625864352497 0.59715805047010528384;3.4844548372043058215 1.4191454563777599063 -0.72930423793305398927 0.17553756998361011443 -2.0064888082024299187 4.3352380023902945538 0.11807941982416561566 -2.1122190178098421143;-0.05481435161048819199 -0.17943691161992192384 -1.8981754107731432235 1.5166101025796605573 1.6167293264865676417 3.6698176616161086727 -3.7000078202487589607 -1.534414543495689065;0.0033935522606756106379 0.19128377756118805642 -0.87621136631046425691 0.54963955030324340711 -0.17614724465039541257 -0.11026944272023218863 1.5977706225227270576 -0.28167746220070077889;0.0094584018123986882132 -0.21255806691870252068 0.52565000420357110844 0.30232400573958712053 0.99719667202184603116 3.2864867184445287762 1.6674740999591528556 -3.5738381160405192638;-1.0527849582576680465 -0.62594251008044532458 0.050076640345789992514 -0.60127049273443300414 -0.97958485485236346246 -1.6918350476257233428 0.89931492179458283331 1.5679887725474845883;-0.082249984504449272227 1.351271332477770093 -1.7007000233831934821 -3.2365452210593588234 -9.9871141441332138555 -3.7028683517726799224 -0.56359775182944127359 5.0954128789142911771;-0.30729632933561801256 0.61288085052638063832 3.3361367025736425873 -0.85627115729653868748 0.83683638146472971719 -0.87091795479491307397 1.118793439973467585 2.0417439866989663955;-1.2068817141036660701 -2.5826093152913842665 1.1973337218829669393 0.52787953850609836692 3.5455395522614487902 0.73631915120729829471 -2.8551348713866553375 0.33048946021425273933;2.4063625307362621619 -0.47537812695161785204 3.1259544311976723563 -0.82648011213911409811 -3.4558711958865706571 -5.2701463912209280949 2.8606262902394723469 2.7808414859616719106;0.29435829398019208725 0.20463541372148086328 1.7162218946708067691 -0.63387313509492082542 -1.0600689861080863086 -0.040308900763293208092 0.93289987978705979366 0.84807553953722913942;-0.17349857669995008558 -0.29233161074083702236 0.3038940037278488604 -0.96516277167259323377 -2.4427593089063632803 0.91260682515444624396 -1.459510357997609642 1.8873381415882408696;-0.016595565454268136618 0.41322207288260071056 -1.4439862174855815358 -0.027993125414379208676 1.4233620292004867114 -0.73970552572505976485 0.68520445805357221847 -0.075887932051055165261;-0.23886382708766504268 0.66029825373908435093 3.4613394648992388269 -0.68505667954660209862 1.0915878674118322245 -0.64267082959033994261 1.2140789503173547992 1.7900967985650231284;0.13832739982645947396 0.46626653271667095613 -0.45547713168254050364 -0.16653757988962183956 1.0623827490238806348 -0.41281350513908099398 0.13887687069082274571 -0.39484191211234909158;-0.41871385512222036862 1.3939728403662361433 -3.4481261680521120283 1.0452555691129685744 -2.0827290516418379696 -1.0310508014588692927 2.4714561952769176223 -0.25499284578054076666;-0.0011676705795291833154 -0.21612024560345516333 0.24510118052637869246 1.1201704242422099167 1.3263198006823153641 1.7776329480210162348 1.4883595394902893183 -2.0867065702100626723;1.4571121361301200281 0.80335692126223490206 0.49357470116342722077 -0.93053293659737212895 6.9030133530275312737 3.3308886619810360585 -0.85740210943161931922 3.8141723283724608962;1.0274323373405267468 2.3119308598748378181 2.1752946171002074394 1.3490375606141231657 -0.78856999352201140319 5.8571488438087841999 -2.9626394048106750034 -1.6450770449661895611;-0.63483337655995764059 0.34612537948307825486 -1.391835966265903668 2.6108784710644594718 0.32378245490591062161 -4.6097095165846928566 1.379966006243369181 -0.6018611619514906419;-3.0327363839906089638 0.9161335967949568726 -5.3840367134674957939 2.5349983170373877606 3.4767722537130474336 -0.70940689771226073113 4.2482356713964675166 -1.154117542688711584;-0.65960923073070598655 -0.30148365690370881875 0.25405398390534805753 1.3319215107386779273 -0.49162892610947750427 -5.6486172317000518106 7.2217071334110221059 -1.7594166380397793237;-1.0608340821780513075 0.68573792965231950003 -1.6725662305123678575 -1.6674891232353032944 5.0677847646738429788 -0.89598411850848436178 -2.2918696291965905409 -0.24178656237773132887;-0.19586528696938518279 0.73497258981717372706 3.7313193039486645119 -0.54508438884640963984 1.3073728867527152353 -0.49251805605595522231 1.3732914181929605224 1.6003365453367188742;6.9308123466814439695 -2.9837490035550109369 -0.089954635074110889104 -0.20615058398059377121 4.4231745794723060783 4.0951074001423783955 6.5267403346815306975 5.6504127072853069791;-2.4327825681870360874 -1.3729472951318517637 -0.034521926467106750502 0.78160181888069690803 5.5925274621564335931 2.6185304022804172241 -1.1260890520356447997 0.71165175495146204554;-0.25166668810905129527 0.17370755072090460214 0.97581341924209530347 -0.55015997528503557401 -3.7241136176936651125 -0.52988923198079529442 1.558006956456241765 0.68754295634330386822;-0.0016549819965339751613 0.33634618966709495247 1.7991062551874452691 -6.4276387474028648938 1.856875903248554005 -3.8562321184842076605 3.6642394684818588857 0.93988931853867874189;-0.27946685621887568107 0.43673623718397264204 -2.1336300354825428194 -0.52656579713250506458 -1.5452346007366979386 -1.7534312503211113565 0.2686115981425674093 -0.64448851134547924246;0.36758588765524274899 0.30079251083123936805 -2.1040074137478113059 0.18369690046610354095 1.7433524122996624239 -1.1988088142210784337 1.3223591755647956525 0.24660135768557209235];

% Layer 2
b2 = 0.1496407344221997171;
LW2_1 = [0.06744371782010481764 -1.4109242010154021685 -0.11994552577444864139 2.8774284243707723974 -0.33039727993070738821 -2.9816345805403901004 0.10517442421687678289 0.028475270271160150332 -1.1217405638054136485 0.017625495526556966136 1.5986785401080463309 -0.026293130741288906621 0.12004673245744233723 -1.4197068836230559707 0.11057320464554065698 0.098275209487341558257 -0.038528501262112997694 -1.3339712581988807383 -0.039506595647888761991 0.045964865452442799088 0.43907118453775073608 0.40500156302438494738 -1.0026196958778945678 2.74978895080046426 3.9176083440519571255 0.095144037497103650658 -0.35839381504587530802 0.061723934351894410577 -0.014801191012646819356 -0.073184310986247488873 0.041390924833482230227 0.095774526357205583271 0.052669270935448417315 -1.3516245875036181356 -0.0038354822242034794337 -0.039012613931246005461 -0.29444949943743609078 -0.10361537458257280564 -1.6591602061280650293 0.24486054281300489999];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
