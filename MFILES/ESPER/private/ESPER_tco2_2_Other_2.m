function [Y,Xf,Af] = ESPER_tco2_2_Other_2(X,~,~)
%ESPER_TCO2_2_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:52.
% 
% [Y] = ESPER_tco2_2_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.51478225622095397;-1.0036198190890413;1.9795687577664716;-2.4474403759076266;-0.9046450449243395;1.4433409061690097;1.1578620944473117;1.4359276976240087;-0.29167320742904818;-2.5551139509031646;1.4081165754239182;-0.44741282930400861;0.076740856666285842;0.51585674555639005;-0.35770245036017839;0.36296671833030347;0.51969864261564902;-0.53001277615161502;6.6519212942495871;2.8114663154796911];
IW1_1 = [0.014440654102386038 0.053454560610957456 -0.032902850008405635 0.009578859374671303 0.96690999890154883 0.47877290884145002 -0.23559885564637473 -0.070538753731472767;0.026033470269205841 -0.44265087789557828 0.69655701438422779 0.46893029837844852 0.5632943495577728 2.4235868393913531 0.96154656110608827 -0.59143204830049145;-0.40437986702179896 -0.86813611822760972 1.369627358910658 0.32700383055929655 1.0364698208423002 1.0342698857671706 -0.6581630007524254 -1.1759219327574615;0.13177806620935886 0.38256908115719712 -0.87537014608563479 0.069330572440747598 -0.79212926478592971 -2.3639658371964374 -2.6050621818611082 -0.36704227076222667;0.037884751113529506 -0.14564210280918158 -0.96489592775397526 0.035294101982503261 0.69409950251800245 -0.35852412862447536 0.39590090896499297 -0.37410194600442404;0.080375117224118914 0.1656057199821227 0.83129467582000205 -0.074091120960610726 -0.080580300108870406 -0.42402114105419653 -0.89494243398916729 1.424983501376728;-0.23444573584273201 0.65688103782183616 1.0771082478031508 0.32994664294015508 -1.0370896559285492 0.24432646892988519 0.2761016485517912 -0.15885907320544274;-0.086234456615712121 -0.15885651068144019 0.59191405441757672 0.38453831486414447 -0.059657416597354615 0.17229189675700951 1.3179572372466197 0.069118358589647377;-0.15813341225954003 0.18916228571278054 1.6501818549320089 -0.24368335284113352 -1.1202819657140071 -1.1698362696796563 -0.65121163268351601 0.81910511696569732;-0.10437287285534726 -0.014156080756741954 -0.33749655780103072 -0.18848820230794472 -0.61111834327408809 1.2481704533196512 -0.46448260751183862 -0.73637284271926606;-0.029185207057342021 0.2782881861279915 -0.0657185827769311 0.017073733929863825 1.3013107568893725 0.56120758811534865 0.13726758640274656 0.55980029399894682;0.27709447902564804 -0.19839503512462367 0.64720928756984386 -0.27735151116116202 1.0649166029981436 -0.96401263266109816 0.13091930238813435 0.38769607401696637;-0.65447356543372781 -0.066879280669153635 0.10244013083667976 -0.47575102159459493 -1.4498027502967579 -0.65379017017002872 0.62969451572680135 -0.587043957991504;0.28401433725066888 -0.2522008874699973 0.81526549624055189 -0.22055353201975256 -0.49212163097318817 -0.58058827930925816 -0.32461826162810853 0.46898516977435706;0.034742577159273216 -0.27232637887906297 -0.2916598856191544 -0.020002460242463667 -0.52720586675495273 0.070215861983294089 -0.72688269970349983 0.61904745455279653;-0.47506195066541329 0.2173818068822933 3.1469917057451955 -0.39411780323984308 -0.72027622367458466 0.80588905583040726 -0.57716215725037257 1.2947754327448577;-0.041703588712363557 0.21417215818313456 0.1919207679597778 0.15920811657972608 -0.22250374773570164 -0.55436114881845333 0.10626889304129636 0.94084085673901674;-0.15363871531292111 0.0739597495167654 -0.64542836296939488 0.40190694083210654 -0.35195551795677327 0.69022900741754156 0.63159735275075979 0.11949934630682019;0.16076946345877291 -0.18503254482807169 -0.46869558299198666 -0.38122101364034411 -1.7933206849142163 6.3550116795383378 -0.60567934247043531 -0.011530595764206484;1.2932064494717217 -0.39154110413812221 -3.1072699699293453 0.2415028483688163 -0.1515344555939197 1.334681304614749 0.12180444555994417 -1.7634809877588851];

% Layer 2
b2 = [-5.6344162398585622;-0.62744186350689946;0.79805679578251287;-1.6459172487472342;-2.6764610269647182;1.3557168374500332;-0.26946111973032361;2.3689015074965081;-0.26007066908114423;-2.4446648762814687;-0.83839881800047422;1.1842453236234618;-5.0360097873246241;-2.0767121744929398;2.5178880212165113;-0.57621182075708866;-4.0263754514767403;1.5855908095878846;2.4942035023741154;0.030043000431857071];
LW2_1 = [0.40405229213917687 1.2235605561979472 0.94749774842122625 2.1608348380212359 7.8835885961296297 -0.5328031420511089 1.9181618295742697 4.052036828019693 2.2636072726831902 -0.020565007754543511 3.0434267387087606 -4.5873228587680135 -0.73117172092431737 6.9806753630948766 0.68902813798148466 -1.2747838965307592 0.51440373411941587 -1.5060501092701923 2.2733930485247487 -1.5679023252962672;-1.9405546395132169 -1.9496744770161998 0.95326057434938938 -0.70660830252928275 6.3805879761040014 3.7723672403862971 0.85153757614423597 -2.2362456431775422 -0.12222346943050336 1.0169546468957793 -1.6613533340592366 0.44500611792625533 0.67663089573913804 1.5549516571844626 -0.64622265831481029 -3.4623834743476691 -3.2859928761157846 0.58099985410398114 -1.5003316856150477 -4.475022754092234;-0.86684298501875112 -2.3564817381156713 0.17595360269630192 0.60888498756874576 1.5243016713255086 0.13154293305156536 0.32031651262200356 1.6110294353286365 -2.4922136262858103 0.34572431961074251 0.073667741651557775 1.8585770560139754 -0.25114921980044902 -5.279539425990321 5.525556952726224 1.7532430213169545 1.6794368013212058 -6.5110672986039022 -2.3233823356652019 -0.3227263725988927;1.7652876134637434 -2.9337708134156153 2.147060693536559 0.20367124409388818 -0.79781073150737969 -1.3613830131649782 -1.4484775790602604 0.078001729057953953 -3.0707523293263788 -3.2474022540513401 -2.6145739783889579 3.6839438282725423 -4.1867464328679036 -3.6955412824836475 -2.3888195700721466 0.99462859019336247 0.96705836298558723 -1.2616455512740858 -1.5088257740842075 -0.29633548097871587;0.67443456441984639 -3.779662656904327 -0.12035045329937881 0.2661880312926353 -3.5351146068474333 -1.2352279407420093 -0.70124188922021047 2.5539671359188794 0.20676750379545508 -3.2561829173537458 -1.5799539602223938 -2.0584904619268305 0.28316824935018031 -0.89805720925896393 4.5296062411229023 1.7940399717227622 0.31562991380991012 -0.37275150214046149 0.86697893813605531 1.9447987697141575;1.4256394889366832 -0.18754988288605662 -0.82115723690178688 0.43356867648122016 -3.0929253884975947 -2.7726270383176517 0.67182530813643349 2.0069701038125749 2.054443294265961 0.71112017329903354 2.539574497940976 1.1057281937793797 -0.69119706715150175 -2.9344468022482717 2.8681134548151483 -0.97875491401461667 0.48731210607279724 -1.4773670970820887 0.54490406529169466 0.62336127236457839;0.27667821355648098 5.6930493709259231 0.66265919123880856 -1.4847492129370181 -3.1632098550446761 1.4921680136390751 3.4605905373331267 -0.38189784855854114 1.7266396579948893 1.6147215066643605 -1.9033543708825831 -3.238481360852032 -1.5093265523452462 -1.2791064340076197 0.94876478896735206 -2.3247901235639024 -0.61299789165419682 2.3501001055695454 8.1136930451496863 -0.91646445434268842;0.71981148830474184 -1.6489118346648075 -0.37293673999591825 1.5410000925710996 -3.4384045807721688 -2.9222426906553771 -1.2565169659174327 2.8609067418290577 2.6566792670354933 4.5610004275276994 3.5707576683422655 -0.66284920073288633 -0.49263193504210923 0.86740965408725967 1.6834524558991935 -2.1463086334864809 -1.1883924132786823 1.3353108687569535 1.4793652105586692 0.40060283544264569;-1.8171454267592155 1.3616011266391994 1.0013288012083486 0.44695979593750873 -3.3408217947726664 -0.64543157084540626 -2.1969757400932668 -0.11052234269721294 -2.7955559602915381 -1.1767406667770255 -3.458276031437074 -0.32849716935703144 -0.027160784649019859 0.013397834558027476 -3.4621091169101548 0.34072795835845815 2.2836655245406692 0.24875132634126826 -0.14261160715878113 -0.65041670115138417;5.9976380077496758 0.10357667962553535 -0.60330213412696432 -2.014252438788164 1.7143928836037605 2.2802465966099028 -0.039116988434548819 4.7666159158949988 -1.7573781189154634 1.6834954361601078 -1.2057426391175328 -1.181604291420375 -0.48736252801828306 -0.81263491605683014 1.7271993220150796 -2.0888686136742471 0.47250110740962065 -0.37896447819575307 0.45753246074372889 -2.1416337074605725;-0.66976990155476079 1.3489021659688003 0.66520166336647868 1.1912265136697158 1.6696583567829226 -1.5141401084908006 0.35803238952060351 2.95471109645284 -6.5532754153271187 -1.8162295556673296 -2.5037666553474742 4.2208989837562498 -2.5973349845475671 3.8650225754510106 -1.8483316430315722 -0.8773564906390684 -0.72516423501647775 -0.52329093246115721 0.015874560442844049 0.59241085435304686;-0.41950168875879928 -0.37892522007081808 0.20520498204217327 -0.37506208032880894 3.3453257955760742 1.4967443598447758 1.0819656253041592 -0.850812806589476 -0.27751368421885764 0.95814272990964489 -1.1081093348660822 -0.31627003447649382 0.085731158211538802 -0.11461747225949188 -0.33531010377002551 0.24586458297957248 -0.66428949518444058 -2.0389705056557679 -1.3509877009638342 -0.44273181982400117;4.806632216100855 -0.78724601397783911 -1.9673047012871889 1.2431362259786014 -0.72057092075096851 1.257254810984515 1.906885487209764 3.6940919427961965 -0.39059701639767325 -6.0156404847619758 -0.76213345205916283 1.4304128909359435 3.0596009271889866 1.5314085213800155 -1.2540152113264209 -3.21003777702381 -4.2124421907216325 -0.49219667670087974 -1.8018353733674726 -3.4479140060873195;-4.5857276026171903 1.9477261807920341 0.37582440112632187 2.964856635927295 -0.9644718825749149 -3.8029986735639487 1.088744389307138 4.6379609807604281 2.5973456642092025 1.5759241312587258 -1.6601365435899642 0.0072538560566869255 -0.061741598116166717 -0.36510046646339989 -1.6154979093811082 -2.0096486920800709 0.18933674883181983 -0.86505322879447122 0.93466076283004496 -0.96527312770040063;3.9272114860639302 -0.044360865598713529 0.22829083045853993 0.7467381482192611 -1.5451122173473963 -1.2174216565289402 -2.5319470904502182 0.82992401949245942 -2.2187173492477452 3.1396143093289357 -2.5556298325489695 -2.8793614507071177 0.75096675556578285 4.0001686239540843 -3.7034287320260533 0.42645598018086006 4.2567558587295755 0.61018723757171467 0.85160541828165037 -0.34212596438214932;2.2004895954352115 -0.25698030922545195 -0.00024666670845287903 -0.21884996755439831 -1.0018256245839117 0.11958379406806924 -1.0561595290613199 1.5346426512476727 0.17877767475889972 -2.4709863631298772 0.67788107640191997 -0.12137898803161398 0.83641157229438601 -1.7378537787314545 2.3988876978336102 -1.559055705426162 0.058402160115465701 0.01290535660967628 -0.8532638201505085 -1.6009968759133304;-0.18421434821150115 4.103997342650433 0.38494040465002549 1.2901528138221847 0.85666574298827391 -2.3439984152661464 1.2650801885770864 0.071290292193456631 0.48544036976542759 -4.10293715223116 5.4813978973656967 2.3918603661464539 -0.1405707697595599 1.9207615372299627 -0.19062327202224852 1.8141342638981597 -0.68115026100200071 1.1718591530244913 1.4509027664366216 2.3059837572551962;6.3053837188785549 -3.1048357108397515 -0.40892343569814821 0.22947063702189668 -3.9723176122351136 -4.3742496193003362 0.017077452568326303 0.8380777882682362 -0.11449123906882018 0.31017786913533574 -3.0532534831820262 -0.89698817625375904 1.3240268842390079 0.98009189368966654 1.7768483607108347 0.51563700738484075 3.6103135853612578 1.0569098580144163 2.3282030916047138 0.17378123730976397;1.0941329466736707 0.51812339872082003 -0.45624426178745159 -0.81953492192460864 1.3927512156779773 0.40163589650733084 1.6387484650185749 -1.3470833533808986 1.3442055871188232 -0.97992884244579515 0.31069905505589657 1.3779925427342399 0.013999082054116575 -1.3257563583780592 2.0977614829564986 -0.17814961265059653 -1.4171351279943551 -0.36011975280303365 -0.69382002108924845 0.55482054577802875;-4.7839766112840181 -0.56489997623335408 -3.4572081132839996 0.68160605886950854 -5.7578118543035126 -5.266121946379398 0.22905084582844476 1.7413614034000815 -0.14921349401857475 -1.6880618720766285 3.8262148935516636 -4.8872755718040626 0.34760660417259243 1.6773795212175229 -6.4329042408253967 -2.2316268310777243 1.890106364223157 2.1825687410606438 -3.9562337133849357 2.0426188371317724];

% Layer 3
b3 = 0.40036071481095487;
LW3_2 = [-0.044049588111012075 -0.11665444832842173 0.14492573263071382 0.013121583209054695 -0.079621785671569703 -0.20188723402228953 -0.028315688167185327 -0.13474059281885323 -0.1636221190627718 -0.13080388005575616 0.011825515457964543 -0.53252554635287463 0.024207260096202093 0.025297686784402602 -0.29481666927046918 0.14027450132621924 0.074346677901979533 -0.15136894418771574 -0.45478275199979257 0.052487234553546633];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
