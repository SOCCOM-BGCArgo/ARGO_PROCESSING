function [Y,Xf,Af] = ESPER_silicate_13_Other_2(X,~,~)
%ESPER_SILICATE_13_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_13_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.94025771099106436601;-0.63452580343161979481;-9.5751984638432343644;0.061656954175397016282;-3.3323770129203000856;-9.5580764757036291712;0.75361361456331643627;0.038727325387144885538;-0.60655864387278357608;0.69978444793632310628;0.49746710016303324897;-0.60990642895752211761;-0.14736711682738956597;-2.318214147992767149;1.0849946734782400792;-9.8374542837693059738;0.74453931979898801963;3.1923806759152348889;2.4729236528203761836;-0.090509326702738229775];
IW1_1 = [-0.31300164385660556032 -0.026045513756600077032 -0.01671972766195067156 -0.63384832850251981995 -7.7112024281349924593 -0.67850975819273962042 -2.0067948945756217682;-0.26486911465736373561 -0.20876205693295707411 -0.26388708933568605364 0.54564241504178312425 0.93361487576143031841 1.3255554580542225906 -0.18848259039996054232;0.44303581117293378 -0.16142952734589480213 -10.373881517676441177 -0.88726893262769934712 0.17321667761272432906 0.40361324900838874141 -0.37417625117981273553;-0.21644389661759036447 -0.28600910146695157632 -0.77568453567682804639 -0.8015325954666844277 -0.64591147466239007269 -0.19828553798708570266 0.49881355945342925606;-0.43212605850465896085 0.064647440848881937425 1.2542841823866699436 0.39917193959981228657 -1.2798148699368954162 0.24998377107882138737 1.1498431383980856069;3.0232213889940289242 -2.3809613934232327637 -6.8712469120570043302 -0.90938850257591663517 -1.4313211055956391871 -0.9231876834487355854 0.4950645879476868183;-0.28470189504360010613 -0.030523790642697223863 0.17556593095818318062 -0.78195682185114046003 -7.768522620505632581 -0.68343211275619453193 -1.9973004848753392881;0.047570098248381847972 -0.25142203726013523379 0.84992811481602392742 -0.036482966330395945331 -0.09247596720692999317 -0.33856384403997902277 -0.059397292467579840269;0.27450864634044969126 -0.80110412982002632276 0.041094871754323233914 0.47655735953963379581 1.3076023367504110428 0.95565065462433751442 0.61244746654656723184;-0.08958275349389802078 0.17756922611834871639 0.54826695918335166535 -0.51871888229649931734 1.4319792758556426637 -0.73525989927479296071 -0.98856189491697477045;0.10643699387006422263 -0.074136585003137522865 0.49429088760173828243 0.32626528060423165556 0.079505880137742623859 -0.20316128571799610403 -0.26998484998094207654;-0.25947357700648820966 0.073703690803459842584 -1.9662227188892491547 -1.2480334123059331208 -0.10774618537691381392 -0.094795807825069217101 0.01775964519880108422;-0.077391124135868377687 -0.12489147722441175381 -0.61689709472748832653 0.027134636080109603151 -1.9943189780763797003 -0.64790725647795477382 -0.88028387244518135901;-0.080756422225911200785 0.014605453477841532847 -0.17256139140355697403 -1.2800570402750603982 -0.20745695681997927684 -0.040750945958929273016 0.60547331671348547655;0.40221049813456799527 0.038463911296078213964 0.079547545693960011737 -0.6857853984446729001 0.60314078807584603492 -1.4269398345097277225 0.070520399261073909991;-3.6282230865042910395 -0.53496196977964582953 5.107957334424738427 1.3662713840732225723 -2.8080315463385692176 -0.64796768191772957657 2.3909880934479526005;-0.080574349440688919355 -0.71164821856188043014 0.17552595040519006209 -0.46023657279942187248 0.51403948823891087994 -1.088929203779490873 1.9667320064885502884;0.089348050044161714256 -0.26587085427520218417 -1.2472929839998325718 3.0890276638232343487 0.5843679824082246288 -0.7061611279490115356 -0.59881953593617609499;-0.073090434741524948348 -0.44508213902035620446 0.010687156102104725455 1.5847190933740245011 1.1457870769552600532 -1.1034498564137020793 0.83457083906344053936;-0.86256297715426177852 0.50236565734801819083 1.3371482891777319857 -0.97464775857855767693 -1.0736643535928165338 -1.7077602650348000513 0.62573929723617083276];

% Layer 2
b2 = [-0.44879796263775612042;15.547741881848285317;-40.410027395206562062;9.8900116997721472245;-7.8253004527932175094;6.581550488942586874;9.0903948242817502745;-0.44067635152726625236;2.9335266836837075033;9.4933569306196083915;0.17472640029438188392;-11.953060204994276461;4.9358076593759880879;2.6272312029188831239;-13.253946381689841516;11.962926806358012755;12.673806707526079407;-21.835690659232959376;13.702625330113926694;-3.1233024194914955629];
LW2_1 = [-4.0383972287675904411 12.075388733437801392 -6.2320447538278598287 -6.4034034234781271877 -6.1599595216237261752 5.3963487271999248662 5.0610530184915685226 0.48702374188681946121 2.7228717871582417409 -1.9425457720025962605 -4.1362915082377691434 0.77015241310407100972 5.0377093020824403879 2.7085019615326499931 8.9003581346196654067 -4.9366767762546430731 2.3486786142032123337 -2.2098560084063634257 -1.7691030617206175979 0.96323239262512105885;-2.8214354513469115382 20.123989975226962201 2.5755124485783853494 15.704922173086954373 0.85497583496863638342 0.86509629620690786656 -3.2361246384906547924 -16.994414733755903057 -5.6969270944765142417 2.6664494035335399857 40.586096727439411325 -2.6457100263732455936 -4.748536854316705913 27.380671601028275575 15.615420504144612579 -1.0610057465466300464 -2.2791426014799034405 2.4215064707988882553 -4.7555686025316692422 1.5672451679921592937;9.6559518324201594197 -3.1782562940615570746 -42.251676826897501371 0.7126183365946326953 -21.011924254069128892 1.9664258226392035134 -7.8168569006982604463 -2.0520751365656901832 -1.9879698303713306817 -2.2819205353163583005 10.091327505644256846 1.0285523066828585748 -2.9329437008223595562 1.8740760172131800676 -7.1344684814028358488 23.833954436885125716 -0.44163244787872307784 -2.0824923865508604415 4.1878011766117708703 2.4430611379305062769;-17.588263127642150607 25.826431838710448119 -1.3029235427262770841 0.75544656952227806634 35.360105393459924983 3.953279849535606072 11.826900802741718621 -1.4778808978032402788 -7.3680118453352365648 -2.5992671200665369291 8.8039530825971699102 2.5469162603461397154 -0.17924906532501577727 9.1210554264527878843 23.313258602005909381 -29.07235724115323805 -0.57272060064386631772 4.5571482000625005426 -4.2369896543866838456 0.094613875891152623976;-17.543856233927233035 9.4729236746870295605 6.3197510435925652317 11.778512499772411104 -8.2963783860073281318 6.7629760832102832069 17.023612223880132177 -11.381914439454066112 -4.2342877954005864183 2.1358102163161576392 23.407982995244545066 0.49221657302226579089 -0.23755164610618059728 18.109817521585551248 6.8519984330901859693 -10.011118559665177941 -3.4688424975917331317 -2.2776053741462862767 9.0332998812152620616 -3.3953859714592500296;11.400366344212867986 -9.828230854414879758 -0.35587335216531051918 -29.20077916467370116 -0.44818987971366491818 -3.8773958249612672233 -12.720541291029869413 32.518611690500833333 2.754862210985206783 -2.096559962299011648 -31.184446889120973623 11.569028228401421643 1.9983104009343926055 -17.322016361032858356 -11.072272404839468507 -10.46885898341997212 5.7631229428613091059 0.47829989359344493582 -9.8808580573318494089 2.3937061412995368492;-1.2815698007285267757 6.0990941834689840206 -1.20307298064728041 2.2551989590315688616 3.9333490730533222646 -0.69373701533625664606 1.2266093499372905384 -7.3704077063004991288 0.32714254079461901892 4.3698941289898449725 10.05528065762587353 -1.6560180021569368414 -0.34517576046788156496 18.063960802119865434 5.9075629094137287467 -2.9348127771563659039 0.36356688195905451089 -0.59236537439750935885 0.29477522839129116639 -1.1843281292428216034;0.39411890229138707431 2.3695360109363212686 0.042595307246419536473 -2.3753502175003666785 -0.49880942197332506227 -0.19989430594739843183 -0.5842745686653033621 1.4626787235549580934 0.0051182575389960623807 -0.048846107527903900869 -2.8142476901764941211 1.0858463218193117328 0.89273693264886333498 -0.64409113049367883175 2.0847119669112728069 -0.13053885892288683013 0.54074073527010557694 -0.20556596893289205696 0.22722042721161372913 0.6443269604505482695;6.2754261846870527108 4.2050642273513743064 0.72170859155857602918 3.4942387131936718525 -0.31987553944168950482 2.7325233116581619797 -5.964698094345736834 1.701426152077826881 -2.244273415953856432 -0.6040165200169775872 -7.7896863761901951051 -5.7064765223580868891 -2.3918316171337115073 0.13904704518671107127 5.2371320546618198577 1.7386641077858373539 -0.068060871559841779055 3.5230307074403892642 -2.6784471803697380565 -0.40929109221876724956;-13.593100097660039793 5.3615801837692469434 6.5253921600921716006 3.6762456159909318032 -0.11088723892395070669 -1.6293380151343335172 12.405917263554743002 -5.202256792034873456 -2.6374000864313864589 -1.7220440757092967399 10.441359874156884047 -2.0091721629917476122 -1.9039875351644022228 6.5836121555724167465 5.6828243803716835814 3.5002924487364710515 0.37027383807089336853 1.9081437323402075101 -1.2453287437616893385 -0.187021087006039477;-0.51989008937382374942 -2.257264215764919868 -0.032453083671914767505 2.3762288653532053218 0.16271768480276663227 0.19820603989216015184 0.6841935334534522406 -1.4197799936573072266 -0.048960099606285445439 0.056610504443681243514 2.7855939316105335912 -1.1056684086244037424 -0.88036651220628059367 0.68823584288515982088 -2.0131849179662713034 0.14422029449777701293 -0.5637114097484420272 0.21442526183062513012 -0.19944222264589958615 -0.64824801889651839648;9.3962512449042243645 4.1144170074615189492 -1.4192882059545082196 -2.1758282815242573349 -20.531142921967560966 2.4988771962357878564 -8.8560889353715932515 7.073975844119861911 -2.6416045696694214762 -2.2079082220832488836 -9.5950791544833311519 -2.5172747967243926936 -0.9372982939757041887 -5.5942591744058116632 5.0869974001208673187 5.8203960981535027841 -0.84637251961942472356 -0.065640671755880911076 -3.9488192898350660265 2.4369232833429577134;-15.840163190996051412 2.502703982151662121 8.6128456689783874367 3.0787193748523482562 -18.37418697742980811 1.2965178086614705943 14.175759019625905566 -6.0071424656458916047 0.5479184686733782339 -1.8330675124208255511 12.452418192294976151 2.0802399781257188138 -1.5580972310483391929 5.4663510767083129949 2.9905484242840252307 11.306920236895525278 -1.6472436616084409344 -0.7309731618378982887 0.78779174427674714121 1.4715735538007179706;5.8590181805002208293 7.8457921808640644912 -4.9386764966194887094 1.1347459372226900154 12.243689492075800374 -0.39935477373315902971 -7.0867476666276276731 -4.483616582230173897 1.1621429249344716883 8.0392459090881018824 8.8028136612759375623 -0.16076945447282575685 -1.2542453003228222208 10.142103574183600756 5.6761170007690129324 -10.27790535162283625 1.4298905686356269129 0.080500243178704342095 -1.6355242597097576773 -0.83389926825902327412;-4.921789353889050922 9.0251251222012527364 -1.4461934781972634045 -5.3988661147355196945 -11.355560751400648911 -1.3818142590986948193 4.516507989637535303 9.3668509621601714343 1.5732534312030779233 6.7679967677234600387 -16.918632108442896111 -1.0896532329547294893 0.23078598984234530156 -5.6601597864585437847 6.5438245568110033901 -1.0458588823189596262 1.9599647401161672811 -1.973476149187841644 -0.3930440794828988782 -5.285306226357695536;4.7569821526312123794 0.72203166817581287962 -0.68005258860413519972 0.17164587807344799941 -6.8719757837923269861 8.3055231882440949676 -4.4940513424530523778 -4.2190772902962061508 2.7685136604000808447 4.0823880517860784423 6.9160240656244242885 0.91938945808483063526 0.80913498581107112795 5.2851043821381322729 -0.48614098133723421258 4.6962479141212387646 -3.0238345010957226044 -1.8143491056962317565 1.6858420672962100006 0.022477149828588435798;2.1058731027262744817 -1.9578342928054108807 -0.086164720424464338877 -1.1384008029953391894 6.6269246650019626443 -0.31115469431185632798 -1.1587822952575130842 -1.371732231106566724 1.0737470482970057351 -0.081912107525210275938 0.74616803960884581226 0.63036412858480672661 0.37844624347977673384 1.1263320262597820154 -0.83295173998879812327 5.4058480294905377761 1.9179744759426406997 0.12758868455619168381 -1.5988899618333274333 0.4670787175642679423;-15.831270249173371667 3.6348134476806306381 -0.65113005946042801231 7.6420317069412071476 -15.603752903152500409 1.1134773474631187717 15.374674054776825471 -8.7704505414563875831 0.7371925495182567456 -0.053160962557810123585 22.993063355138552595 1.7465280107312952662 -2.3839998028854227918 17.100763428554202505 -1.0423774943151478123 -18.273722778958429558 -6.5477315330484984202 -0.94726781842166174474 5.0351336528474952559 0.43911589996771493993;-12.929391371044557602 3.4450849084408106116 3.0966766806202330464 16.044574542144708573 -12.2241175255032406 3.1376659890017761789 12.031242511248438021 -17.64473110776548026 3.6082098676531222381 3.0143185356993287272 31.335163074734470712 -5.7450710079734399471 -2.1871403460952389963 29.627505038912474333 -4.890736206392944041 -2.1865322145597398951 -7.332286314744805189 -0.36573922108535400488 6.0131848967151757535 0.95002557105499829682;-2.5889850576385620151 -11.461182250584515785 1.1888776842149892943 -9.2272519110037052315 0.90497985273301584375 -0.6876684602079232711 2.6237937276560270305 5.5487729439064752412 0.86292481817701138791 -5.1973097776114007829 -11.041352171752023992 -0.76580727137022619466 2.8740104216016986172 -11.441715292530247439 -6.6600434844412506052 -8.5127973569917507746 -1.165084213303069216 -5.9613254202221783729 5.7810339182904080246 0.89249927611863100196];

% Layer 3
b3 = -0.20611689523646695155;
LW3_2 = [0.047188150773614483124 0.047073293516191591634 0.052011325829943499954 -0.098252175808228786602 0.091874304076195109636 -0.14840850759565307748 -0.10652981754136993386 -15.927863516426773671 0.12159072233010639885 0.16361782142698846898 -16.133357258293365533 0.089232643336455488847 -0.11454359116478809999 0.084431351583359140478 0.035331035986081782418 -0.096105082312985548598 -0.40175239985699273682 -0.085309822226772816234 0.079073638898961393084 -0.14616544339218229265];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
