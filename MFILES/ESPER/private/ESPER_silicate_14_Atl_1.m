function [Y,Xf,Af] = ESPER_silicate_14_Atl_1(X,~,~)
%ESPER_SILICATE_14_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_14_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755];
x1_step1.ymin = -1;

% Layer 1
b1 = [-6.4016110191435995347;-3.3719100554059360242;-3.6677945765927195687;-1.4461567126463148458;-0.08785032494304316486;-2.3421010079921606994;-0.09070055546157795856;11.050783003601068799;-0.9652173695936906439;-8.3489748991581649307;-0.013573293606292887586;-1.2334648922630699897;-1.6171366218039326945;-0.09057294336352955666;-10.508799881382001828;2.6154365831741621662;-0.09206807616817327955;-1.2839069965367311266;10.073607210125576472;-12.809358067206135345;2.445792258727077062;0.0075403320369153833611;-0.57370785143329738887;1.5508180830847888565;-5.2835715969126795244;1.8308488174746033739;-3.5659264603745106648;0.3990718513098471254;-13.724215340567768706;0.30472793265849573707;0.30571962272036379282;-0.35069032211315742664;-5.1412017317518783344;3.3504342413939434131;-12.065637488844268788;-12.184081365470113667;-4.4226546665718569074;-0.34329247692006409354;7.4888670736152809226;-2.6400884623597948853];
IW1_1 = [0.91120746229994808996 1.1769911534397197173 1.1272224862484498953 -0.66746110484303100563 6.7045600793668569395 2.6567868857124485871;1.2572376497559312192 4.2964044108006760325 -5.9719611692556915372 2.043239043652596898 -1.5040241486261456405 8.412894161436778262;0.62416482272210371818 0.39188231811813573069 -1.7305651521463549791 -1.8978206502999512839 4.5812993869582951945 3.8289814301209439407;1.6777550339832307813 -0.30214540589625565881 -0.713371501311744316 -1.578439420313210606 -1.0220130816224501924 1.5991243240047690044;0.12600294537098136183 -0.076693617046390230585 -0.56059018798636861547 1.1438087190413923633 0.013001783585976573951 1.0845757275237002393;0.50853574181565719403 -0.37131635940355500747 0.36616300212611913034 -2.0912421014652320395 2.2399564147314885432 -1.2852402287959898697;-1.3731072541164968115 -1.8630000536730884075 -1.8618552551309028864 -0.78847904514237909801 0.18022804384263810262 -1.8040354264950229091;0.23380884202282631312 -0.092363432351476260074 0.015419149787608162766 -0.60044310365329622847 -15.533426134097851445 -0.56676448932648160195;-0.15692821077874066771 -1.7367338541409982344 -10.961304985632015274 -2.7325093439973473508 -1.9471853690785012603 7.0427699595979023073;3.8301088669583815971 -9.2050619028289570878 2.0777675428740418617 1.4052391277146343285 1.9961225855994009226 0.76259995024676219266;1.4366400954851334948 2.2037455882342396052 0.18471098788706816207 -1.140479514803272032 1.5638807988338025989 0.21726327047986776497;2.643842999566716756 1.1648144105888513788 1.7859313021945240063 -1.3632411994212825235 0.99263123349163684406 2.2353739733206241524;0.2918410121616966113 0.041728608799452296396 -0.41827302373002334113 1.8505042126247324141 2.6593736904310767422 2.6880301606032301898;-0.25051034950355377529 0.26117573294378770843 -2.2898024905253198114 -2.1068851834881003882 -2.764812657015711661 0.58359456140351451126;-0.2570780686689971839 0.12693528629101480387 -0.14071367540229487436 0.90085138989012014665 15.333687862999500595 0.65523661623010165389;-0.022326807411887101412 -0.031216640570481186956 -1.5190594742351668511 1.7257815358161336938 -4.2583240186852915343 1.6193609062970546475;-1.4195840671445920655 -2.2367492197446816604 -0.12203430282872868018 1.4016737061618433913 -1.4554607177743337232 -0.45758836415571396694;1.7043502939643058181 3.4372056219150231016 0.40233868063506955659 -0.08343248289859930833 1.8663764942031662031 0.63507254667735513198;0.26990818724916237903 -0.15491996033877952765 0.24966586239766264121 -1.1471427640499609613 -15.175551743851032782 -0.72952822047343723888;-0.81447417441538350058 0.92507757610130447734 -1.6198876220453395369 1.2989264283871211347 20.005070279356910845 1.8232300374750864957;-0.21939899393272307981 0.14162914176160631974 -1.4347711539545151549 -2.6719610299309142221 -6.212433444716416453 -0.29731203421529917019;-0.13228023962724788642 0.056747400396540643996 -0.29296534205384694438 1.0088642670982972405 -0.4180483064398210491 0.81591056790252436404;-0.4291545230738054717 0.37896952348849521908 -0.22139562327489786808 0.14041641375832153438 0.50203072826215011659 -1.5532122708821205492;1.6526350862997851721 -0.6869939717611014407 -3.9231916480759894128 -2.5074820691165657927 5.7749762615528519305 -2.7388366823614300749;-4.7032503506345619826 0.3888809850449130856 7.0286123392053152514 0.63265674167051511034 0.76447947556233142308 3.3726691473713299452;3.936330599056066859 6.9825993477582883884 4.2076527144926414437 -4.1202916154120385883 1.173052040833463483 4.7798354260559339224;0.87608184323555915451 -0.53167306075609799265 -1.7168305970543504824 2.418297231670938352 6.2492496561051007475 3.5916146488333255959;0.37190205692526517867 -1.1950777523299851435 -1.696109003995382114 0.057536360202636152583 -1.7403866426032958969 -1.9059853804837463276;-0.78166039349923743806 0.89273571416848551685 -1.8139942524962577863 2.7584471921064519506 22.348570822838606631 1.4909634765447290494;-1.4960014363133107285 -2.3482825225076053854 -0.17583418356117480608 0.57313964408660855732 -2.2636231060372420387 0.28929617233092180806;0.52983267741177086929 -1.7890684496551809701 -1.5385615503918972369 -0.68180693117847857021 0.93605360925047853549 -2.5587492219452134812;-0.37358509514234511384 0.24444635035426129366 -0.13697646413308944835 0.22400281072328773191 0.23086707313392929031 -1.5174113602731169603;-8.6929762757887907298 -7.0617381491284492157 2.1148114400520654499 5.4516062893428252067 -2.307291863197605597 -1.3481036810195199394;-0.35935117684541467709 -0.26204125780408821234 -1.2677502334714201293 -2.9349556946812325187 -7.8444922614793517468 -0.095250732344735536405;0.74205904305948844346 -7.863380747407596516 4.2935460795199942297 0.93617613169275992746 3.7290519673522726229 4.5806797458603858431;0.77949829461682529352 -7.9287303316646831064 4.3677072175555755607 0.92439203352626442278 3.7040221154619059618 4.6266792298172543241;-4.5974856505152024155 0.14995552361533157071 5.162675160976530897 2.0896903443673373602 4.2813609137132857541 -1.0709341763877409104;1.5330971218551232571 2.4913364444843164591 0.059259940228530615103 -0.22620708157307223285 2.5957117800384357231 -0.69888785072145409583;0.25954575967711590589 -0.01527920852134400341 -9.419890730857098049 -0.089682672392396939332 4.1241299153667814181 -1.1239134038149123374;-1.4072322252746094495 -1.0071767046564852333 -1.1544887133444172722 -2.0111740090408192216 1.285773720569248546 -0.49146785744144461106];

% Layer 2
b2 = 1.4433441705320639858;
LW2_1 = [-0.12746820683254228568 -0.020165072319982033089 0.083519554868529702341 -0.28549426416809969842 -4.8735130796452192925 0.87664311636420499951 -0.14067721806653191163 -7.1271526629542067965 -0.02337595632584459418 -0.018871145009653134822 3.1853079926271981037 -0.10356051392947226986 0.81876915986482423637 0.13495808663008004857 -15.610065884487468679 0.78412588817350714621 2.013990471370151969 -0.048450483321368170708 -8.5915957778641303122 -0.35468472843657150584 -0.25646215405133815368 6.2638132874172978148 2.1329840865811537931 0.41861178211696220552 0.034108264696158845097 0.02709049494875161862 0.22730633160334964837 0.25383616295359434645 0.27105051447447747748 1.7764732938228717796 0.18508789289587299076 -2.7078690764829107529 0.021660039357273914301 0.2529581066443979398 -5.8706682549532205329 6.1960110088736026768 0.058884926778971884154 0.6857081136578152547 -0.21768620957236509139 -0.15758213839361068231];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
