function [Y,Xf,Af] = ESPER_oxygen_13_Other_3(X,~,~)
%ESPER_OXYGEN_13_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_13_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.048004289762199031655;16.573306945259510314;-3.607750426193004234;1.7801166297597366128;-0.098299667582702698887;-2.8896697217568103611;-0.091653865373394510785;1.2462784489921470144;0.5789637872227035853;-0.080436274817871480924;0.072193114521748577572;4.0646601947439782165;0.4250052852150014715;-0.4347298420203001279;-0.056736352940907085196;0.28057821112485514803;0.13774303340737378831;-0.021542010811876979165;-0.50528645068139466101;0.67851362229715228569;-0.88838247480034571169;-0.96037299868710424011;-1.6587675120737574996;-26.682376861765916942;-0.17263085935212549304];
IW1_1 = [0.033079997597862925707 -0.16951685126917886981 -0.35097590502173481308 -0.0065772031652995980103 -3.0195072709239512143 -0.68329979161200249393 -0.083916125207872227509;-4.1545190695349036858 10.356516257665919767 1.8581955891556192206 0.23365612743399519213 -2.4581562446878519879 -2.2409665725832788041 1.3108988716006846342;0.55635149626865620931 -0.025820441610305496644 -2.4217291136649103933 -0.69421542709941341798 14.501445699707495862 1.9423728247730958074 1.2379746804069868826;0.21675947817588026023 0.17134323286592093027 -0.062019868705079708726 0.33231641182997878614 -1.319330728285382337 -0.71782148373953091891 -0.23572958634901905461;-0.34639815986526134584 -0.42489756642163373224 -1.1112714729700947647 -1.2174063718618024499 -1.4939447547321509369 -0.92200046421576886679 1.4208074414273603736;-0.24543337643921669944 0.035470069529937989228 4.0947684670472979107 -2.9987552333126834547 -0.42613458790651570496 0.15641710149894066939 -1.376615874214475177;-0.042185367394172654243 0.098766699506634386685 0.24594760043711511033 -0.82380412535311864364 1.1088029512895949402 0.1078692160984120324 -0.38962090367671942115;-0.38454299904277317035 0.056960446543879383885 -0.83181097596853326159 0.32966867415003209274 -3.5903997560612159745 -0.11356874078394091354 -1.1482333448171395673;0.044058692428699176846 0.16813936665930961922 -0.62224458003016014374 0.94149334678907159457 4.0956176344860280025 -0.4078947294277703306 -0.27844281471941595418;-0.11839359898032035534 0.21400761998849784917 -0.51794977650546059067 0.35706555663975236836 -1.3778833246806860835 -0.17166754669251790832 0.63716361479647354304;-0.031108214342909376593 0.17306216009550393076 0.35093946805857084703 0.086964020172201658698 3.0476765819386715251 0.68217791274687811232 0.094759706113161631946;-3.4660900411469532933 1.5158980111038067307 0.55744336323388243848 1.418576295371263063 -3.3997755786925605292 -1.5262584915734456192 0.84449977826875588516;0.11127273313390322051 -0.036002842182655925285 -1.5008830667090513611 -0.26892428840008220092 -3.6155738140837576644 -0.57135559779222588883 0.16540912710245475603;-0.0034220209359447774193 -0.22010570728501654969 -0.075804272368627190204 -0.54496209656378113984 -3.5626922463130408225 0.18729251778068603529 0.041041501283505310571;-0.09406353079468823819 0.048947950041373915198 -1.0886329372632721491 -0.32703376111861109932 -2.3982953370295674311 0.22141142649995940173 0.73263524740583951811;-0.12400127308146051408 0.53256291781736297963 0.51444639884525178442 -0.36163412664770300253 2.1270176857616434063 0.28198663462096662524 -0.66856007071034884159;0.024397652761043536057 1.014885206480518276 0.18340104189603814722 0.03305699281494576397 0.83177842765324916385 0.17874213816277068068 1.3376993968975399163;0.038296154859446707164 -0.16917361721021959009 -0.33413943306537430278 0.2018801236112904296 -3.0350753495548001837 -0.69501877564497438478 -0.029510707731567831225;0.26672744787569124814 -0.61441727163137693779 -0.7737544679450109042 0.0047810834214088828234 -4.5878553530345245193 0.40226391332875927054 -1.0275773008399649022;-0.10120098415365366695 0.74793452003420823893 -0.91528788434704466681 0.6526187297054124592 -5.3316490781889269712 -2.4345790222814178705 2.5756439871961505084;-0.11064951063063391268 0.094646152810938272149 0.51371909664117865191 -0.39119512093521335849 4.473782535595861809 0.74946926903218202831 0.35606361038166572941;-0.89085715050704272766 1.338951187116617092 -0.55802900190326110152 -0.82470490269601903766 4.075009994040417638 -0.2233661654801286367 -0.17245735224284480802;-1.867924722891702638 -0.75126298172776140305 3.0109534322351567681 -1.4895139892169229068 0.54227145301011958622 -0.12448973601801609223 2.1061141709914146247;3.6884718488210541665 -8.674481391919286466 10.836303697824710923 -23.349043959332885123 6.9178871859285626655 -11.145639436803104871 8.1554427633243378182;-0.12064228715649054358 0.57042404351565434428 -0.68621191891334276658 0.54241983942584082179 -0.97444016356617935148 -0.37365888892657767029 0.89285580697954036733];

% Layer 2
b2 = [47.305298988911388847;-50.419141947976847007;509.16108686645151238;256.3049818275404732;114.65574131706344474;-208.86272850418538383;-43.063930088463337142;148.42460267769141069;-83.403711165438679132;113.28629031531195892;143.36512267326506276;273.17939667502940893;64.078476792595708389;114.25710787145928293;-223.5814086112733321];
LW2_1 = [30.722285046144193643 -50.2237807054646197 -0.15685614923381260843 2.5715536138128722854 -0.16513731428832453818 -0.059338361655010739282 -0.60123974937082935721 0.13415808109802135339 0.70936668121762724848 0.64406944627820117422 20.386564637912876208 0.012844347755906372968 -0.075939864534158130205 1.4985166593350669473 -0.29784670155492820598 -0.011634373944622194638 0.081724731174671216838 -9.8693560065343870491 -0.28914507700135921864 -0.053856195400111606109 0.99660188846396702278 -0.038516043144047218405 0.043111485173351810074 0.015561933129847230206 -0.36475723479744476263;74.308249412436182979 149.01560374731033676 21.352769155814470992 42.061741383607589739 -0.28919749954900764166 -13.896733532761041729 5.6044637393471612441 -34.44064405375761595 39.635130849812739484 11.176637032435635888 116.9429699406772869 0.24763154886025617873 -78.085169300974868634 94.779487622446708883 -49.109758130348723171 -23.241756231621206297 -17.059245914192207039 30.716029208306068199 -8.196706345616403766 7.8743792113706696512 -15.733337831579275345 17.523092914574341705 4.4213622312595513009 -4.6096250226322670329 43.356716715157219255;-138.84985569145496243 -379.87369948653525853 -184.2876079855463729 -96.077508288698354022 30.862281695321577502 -5.355036424358099012 -73.989677419169481709 -99.377645399613598443 -73.070021474474017964 89.029258125162925808 86.196903784103170665 -69.225710263027195879 75.769871587803478974 -145.0972675589519838 -36.859673171378140921 -153.91086304076364399 -44.789807797034370651 46.938878708902130654 -4.9554493533254797555 156.91337099470811722 13.033315483721738204 176.41373161123024715 28.200786443915593082 137.19514411736878401 -211.5412389832548854;154.210606237781235 -286.43523354410598358 -95.803688548279353654 28.047793337218760001 71.29358747505288818 19.06232477481373877 49.706051478061574755 -18.711394766207551044 22.181382510471877367 -27.7501813141995477 -35.788184525455683627 -17.042471151415636399 -31.005301069291611782 -229.19033049173756922 10.458392772458928732 22.936431047836165931 -10.675114165453866377 -92.04643526750869853 47.603372821257678993 178.57271578470604823 72.800572692756531978 12.197017558353632438 6.8278216906124873375 79.281466236142392745 -3.1612300087958913331;-369.45212290946915346 27.17925795070930306 193.71548838011986504 201.52793223173205206 146.75784178759167276 -3.9818179293612492309 -11.625760194707355666 -583.31156079449260687 -32.089911000934662866 366.46108480007222852 -88.34595220120648662 13.597867559737670362 -95.696371679822078704 43.277187632712646348 -73.340868200834606228 44.303878338463135833 -27.036379235490706208 -196.20963037020487718 248.65677707728303858 -26.715945786859048638 -782.55681604122742101 239.64698491140893566 -31.110303164327433478 104.68853186982518366 -225.75878194274855559;-156.05005927060187787 300.8970287465406841 -8.0546288725597872116 5.0271649635673396617 -383.46066337982551886 -86.766242135193593299 319.07538898947893813 -442.32488708116306952 43.085697517971304649 -551.91684482425500846 -168.70797629034771603 158.17194062859655901 22.500615614884633686 -56.337965767165002262 309.9178992056895936 -65.645953340067592308 39.148903189144846237 7.4208741798662112288 -75.879477950500245242 100.16428435789974571 68.078982668677113566 5.4695586292347710966 71.036271058812118895 24.712855117045837261 -247.81938089384135537;-89.906596976495777085 195.8388122739045798 220.52417827216012824 92.120149257292268885 -10.488725555592383287 -3.7816500280921281352 4.5486361370767038892 26.286376514637844082 9.6747323836874539182 -19.831957131712464104 5.8028413352039063255 -55.742524927984511862 8.3687253552814819813 35.812263305192779228 5.5094787396886468755 14.617707958672342627 -12.750996372661596467 81.696741025655839508 -27.799835893838949374 1.7359555895736751285 -13.117707095505533488 -8.8400995910019499746 0.081388029605101344655 3.0133809772128068438 14.660457754256247753;-119.83884913079150181 -148.15645417784367055 -1.8710841487601941324 19.980375152472895195 -4.9624553192769420562 0.24325687257990766255 -43.372632568809287079 5.2485908070851410301 10.636472896177503245 -68.131489127575449061 -144.4849976288741118 -1.8548981636951804575 -3.0593430676283617231 36.872208776006559106 5.2587951624611504187 -9.8611643926310250663 -4.8571434842553777855 -15.767487689816205076 -12.361117606176250661 0.43601935444187334134 21.614496151289710468 5.5030569904981447849 -0.69511927262111161685 -2.9087120140824058723 30.976332653184535104;-180.95887551456340248 118.6074197322400039 14.117614299751808815 115.49860166003765016 -34.218501885767793169 -24.843314157122094343 83.392563722840847618 39.191284693841680564 39.218431591767810573 27.851519566517790594 -37.277715427281727045 2.7421336244891185707 -50.036712812159173325 64.591102535357407533 -43.617698631106804896 35.294825903683673118 0.99294596336159535177 77.356518005675937388 17.989116929293725633 39.344770769450903458 -47.817624404737010479 -50.534348562845430308 -6.1716815486866334339 176.52348952725461118 41.238966071330935392;19.188487015272052361 116.85382704785382657 12.199276614797474494 -40.355546853708155197 -0.79068957517033311433 -4.3948125620762859 -44.116548007850198587 -199.7078670653475001 -99.294307870322839449 -17.598066580947890003 -86.930615831254840487 3.6437512320992828663 35.494423842825689519 -141.83249217884431914 30.713644380979978621 15.437922348835803277 17.060398903396457371 -19.505684295193329802 -28.618033481703907484 -29.099121389595751452 16.387672166263357099 -2.2209279644263384412 -3.0632161773581012554 22.782463310767134601 -14.811445852704766324;-294.00426890509316991 -6.5107506905559393573 37.273262340008074034 8.4119979367282589067 69.164220023930965908 38.209520028345188791 39.566148015002241323 2.5970231830059211653 -115.9600161933756084 -220.16698930779605803 69.115969756736447493 -176.37121210606233035 61.428635796306657824 -293.45704735675099073 61.463223256059492883 -82.918723094326864498 -11.256587393963803478 101.35607552433147305 127.35380631166746923 -0.30539045605930903449 -128.43491470127764842 -41.934659976946605298 86.082141401041596396 95.415494745729262149 18.963446914657705378;-94.750768645516430411 -42.304629717692847635 80.487733285819601292 -97.90145316115120977 59.533535680864780204 0.6907829008022511319 6.2067260964144006508 -20.936178064646732366 23.710162560732097603 28.204864497045132765 112.81767907603237688 -135.95141654922085195 -51.592248868624636771 55.642542437047048054 8.4469742916882299966 116.6996092783436012 64.16103235446105657 168.17284808808472008 18.923978116057959653 -69.863718139774974247 -124.16881936133583508 -39.283332611556708969 11.790095532885770169 53.439815948588346828 104.90331205917244972;42.391619404641254221 -55.958267345257787895 1.1186973158216202417 -15.878993821096381467 2.2624432189764935863 -0.97608007069558089253 15.93283827954128995 0.58241699142295455527 -4.7266047595436786466 -1.5630715840711595366 76.874644146456759586 -0.39317954643641489509 -3.7057401799981697366 -7.2715504080626098826 -0.99078301745558339242 -5.6670383044406120732 0.52974011550719157793 25.943788744233685861 2.3324364597935125509 1.7883676679678888188 -14.841177219486967331 1.0840527945470663784 0.075918990862587049095 -0.52296694997927239967 0.64614763837164235216;-47.577717762319089445 273.56421695053143139 128.51761793821302149 -428.44609724428238451 110.93848471475952522 -70.2235540849562625 37.114715711148335231 231.90567987593718158 11.650916076537271238 -9.3943185272101334959 72.187999424610580945 44.650059215552936109 -42.76972157701402466 -108.69690142923984411 -9.7960032372734762163 34.982470176918752713 -32.495655274845788085 -14.72264159066359035 126.64213070591681287 -10.148257013076555921 184.89344886017633485 -1.6845892387270666735 30.236674373778040348 62.011009365924202541 36.531986202213026615;102.17736305340085323 -31.533194604604517508 15.096598935609932823 71.057912216912484382 -71.598673328345171285 -45.901477868965017137 -175.84372791127529467 -61.782557542191035793 -58.444468053163845411 -474.40660899109485626 158.99001944414780496 -40.469521374517022139 66.749621692656376126 60.253265547409768033 26.648110298945343999 -208.18961175932022911 13.485660564547268692 -124.08678393178870181 -7.9292787928385539686 -7.2018045689596998926 -106.46204915025759874 97.506538613944130134 87.735193173465390259 -219.63574688030203674 -48.185378491218848751];

% Layer 3
b3 = 1.9417899032774941226;
LW3_2 = [3.2730888487080673777 0.038955999706383602488 -0.012411688495920784187 -0.0066205868244738697373 -0.013264408218695494107 -0.0093786877272909446174 0.025125129396801688247 -0.063543024986087937034 0.020020485580555462402 -0.019226482713871138885 0.013446246994801128866 -0.01264332389658805525 0.1702084795869829581 -0.0091239982781148969149 0.0075938496026772559291];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
