function [Y,Xf,Af] = ESPER_pH_8_Other_1(X,~,~)
%ESPER_PH_8_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_8_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.9375268808039738389;1.0251807284472114201;-4.0380762146187114681;3.0419352707097320199;2.9597216986400121108;27.244469133470094135;-1.7384768682745792567;0.7676608361411456638;0.95074416205376655054;9.9505746161740820099;0.34582139094457403639;3.7887851218273667087;1.110148285938507895;-0.48324442700047198773;-3.8132924929096381206;10.245641793938162323;-0.94086446071448759376;-0.54458840765257410244;-1.9789690048370536246;0.54883269017332414474;4.1113074226492996033;1.7003728083882629907;-1.7908336491157383907;0.44701470248217406445;2.2173704130634623866;10.257083879495196399;-2.0258537133599165969;-5.2298121774233443659;4.1652351834765619643;2.1706774775726191962;1.3212240970918593952;0.37473433230155361873;-12.956807033778046545;1.130271101791403332;8.9258560898788132931;1.4589834636559235737;2.9778776848875452288;-2.0286663109326008581;-7.3224428633135865141;4.094662134667838238];
IW1_1 = [-1.5252482183625097889 -2.7416499003023173664 -8.1959414180285765639 -0.70657659572134667858 -2.0194081617766932446 5.8931468717163806303;-1.3328559716216006326 -0.72760791636624455592 3.3930468864261578155 -0.77228989137297543444 0.36659276910733484822 -1.2500133140566567214;1.1941033789194719361 -3.6148400899375436879 0.974818980182153072 -0.89921605315725583463 3.3171201293989067693 -0.012971892337216534702;-2.9675218371806590945 1.6017832217292498065 -3.1901419688987591172 -0.6108340225678939861 -5.4724191925914702495 4.5936429897075452544;-1.560907865420944507 -2.1875640309028443475 2.2406891265147099723 0.46911395621636137188 -2.6128369691445367806 -0.93141506459759892955;8.1749149338156978928 -3.4572296972428055994 -3.2065164335877618385 11.796538633614254366 -0.62858207471190818971 8.376347735095746927;0.092941741901441651819 0.0044019809834722782235 -0.32962845098548204659 0.23857693358842635423 2.201198289521786311 -2.3452544382117568311;0.14486928142686411602 0.15238781300944703734 0.78384890551411068316 -0.34149143065622988846 -1.0452981231266194051 0.60407735753713698301;-0.14021557375113447019 0.52415663933784639728 1.2443239799424352654 -0.60976557586814883472 0.19646085296828255662 -2.2693217910378256086;-6.3761992900216748481 -8.8008749869893723172 -0.404822842622793444 1.6405542471223353296 -1.9587402610731130537 5.0691549259031409846;-0.023940677737070991532 -0.41855062723939945313 1.8889094295657085087 -0.76487999604838718959 3.8830247512987177139 2.0494527247524780833;-7.8381919521952037044 -4.1676312880447206055 0.20652036879115648338 0.51791610713113178655 -5.3614514253992027193 2.5822022202803971425;-1.3229623489440958117 -0.6593187884950297839 3.0838328258265321757 -0.62196154964387273534 -0.38082362387688101224 -1.1558078097844266541;-0.18208836898418737094 -0.12230272829039331994 -2.4465696734266386692 0.89424628148618245937 1.5256369708654868855 -0.69786991431208766912;-0.48890205923124990806 0.59453512216353210373 0.44538012429900680766 1.4216700592762934185 0.14114293236191788328 -5.11109313637382634;-7.8086594908852875463 1.0308834940838649263 -5.2511762215037212087 12.385555848617473274 1.0682435366259104281 2.0692744192808434356;0.17061075318571225501 -0.014245950430724014027 -0.45015880236815969395 -0.10848408908508332116 -0.71079220197104731049 -2.2792551553476805282;0.83814531653166091107 -0.99620166810317745121 -0.11234913317393190046 -1.3221874895783376491 2.6309848415450658443 -2.4565443355905642875;0.079224037985502995807 0.04392170932735604133 -0.29230749077009055004 0.31674044322684369313 2.7888198324202142508 -2.7925910680990702062;0.21641225503629465954 0.14948617771963487733 0.78748371302557085283 -0.29716306184592611306 -0.95369270694175911629 0.3902748059244040002;-1.0405051685285835461 -0.35205583439521120903 -6.323445817354212295 0.97946854408269168335 -1.8732004957998744654 0.18239082503084580456;-0.45223319805392336868 0.73975224413056239747 1.110209277142466977 0.44952467694165765266 0.21172424241960555169 -2.0437694677474929073;-0.0056522840663996015698 0.40017241310659590336 4.5644269779809727439 -0.49301973007782057268 -1.9264435165640647618 1.5185647503903276778;-0.13339505726474965019 -0.94799531123889491102 -1.4338136314837746088 0.99687971343534964586 3.0117093885124242014 -1.0846580835712495983;0.54573207745711926897 -0.49060027760267099772 1.7316729685666700789 2.6927331810030872283 -9.0671427851240178342 -4.7291447551215117784;-7.8612524917916113409 1.02096007687193846 -5.2397429513776181409 12.399247461232391743 1.136475080697233464 2.0425750492978846928;0.38681641163356605961 -0.88511127505176645514 -2.3617895751953748018 0.016469489151446480707 5.3430216664926897252 -4.0728144274324717955;0.79449812565378263862 0.45591106722779933813 -0.22769294437090384364 -0.9103039793478245878 13.875493894386250915 -4.9486875052221934723;-4.9656286088062078221 0.013129364577545536708 -1.261676441692195727 4.0235322257085428532 -3.8452082750136296063 4.529264810195591906;-4.1371754321067077953 0.020026009473151844958 -0.52357689166043774875 3.0902463662208017325 -5.4270341276401827812 1.1806512763217382744;-0.63501510447168063589 -0.2416718666250333436 0.67175092331612584751 0.20414024964785942862 0.62999543643188971043 3.6149923135491648374;-0.019531431378304542346 -0.31797758960339189693 1.7266631493905055805 -0.67634674519859294683 3.5278468678358931854 2.0336640740582336839;0.075715815791583457317 -0.38281368765274675914 -0.6668477621021513535 -11.097113743108456774 -6.925143945875821494 -2.9185159841507957168;-0.27661735589696340165 0.45423432976741562328 -3.5962477033197419729 1.7434031236197364834 -1.1387014487079079039 0.93482021689322136737;0.34681317946633338778 -1.249000187522929517 -2.231919896799024805 6.5601490877896786458 1.2038970782792688397 -0.033901985624325059465;2.8111955781632103069 -6.4855081840440851337 3.7310873047991588436 -2.2774805961832829126 -2.7908899099849118208 2.7507935672600329902;-0.12655604437040243737 -0.14432067791512262489 -0.62256444536050448146 0.64269760695512845317 -8.5022938552862417083 3.3822217171054878015;0.40092431177754106475 -0.15749389960883880546 -0.67108494659299788854 -5.1258178949643777855 -11.35314536198151103 4.7240237717171016385;0.2659622044945982311 -5.1088069261107378338 4.9184010957176562684 -2.5795286481141648238 -4.5493404746280834416 -5.8423881432412585468;-1.8298139243210058691 2.3757687647938050546 -2.2505964404612130991 0.37773077967000789901 -1.4427158785217946146 1.4942151552966864703];

% Layer 2
b2 = 0.62730544685727374077;
LW2_1 = [-0.24793857928145529579 1.2853577123239969815 -0.35649134385015279758 -0.05310958082644960665 0.23300034923566853573 0.23387396526960083087 9.1859747855446318709 9.5939929395736402995 1.7301699645826595919 -0.13074197393299732961 4.8506458234822913411 0.10797100517625701777 -1.561746852813812092 -0.91932939602879559793 -0.16960322391327503633 2.5009113139147660654 -2.244255184501695588 0.356700120288902911 -6.3285952006557018024 -8.8730821685050464964 0.1514183398350544274 -1.7856822942189478631 0.55208050810203623815 -0.46532887486220669837 0.097626040339598429973 -2.4943477781386338421 0.28957500997120544373 0.19888808732425897197 0.15383001078381619564 -0.1884594499634242859 -0.58953438944124947341 -5.7436125810041467332 0.14908054100078563242 0.44693247648202633071 -0.64321120927715325077 -0.03051590850394357568 0.65609873920242356427 -0.28574877592212000188 0.080198474729627683422 -0.85557038159388398846];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
