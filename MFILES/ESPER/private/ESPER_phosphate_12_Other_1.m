function [Y,Xf,Af] = ESPER_phosphate_12_Other_1(X,~,~)
%ESPER_PHOSPHATE_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:30.
% 
% [Y] = ESPER_phosphate_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.4185818129707259416;-2.5009619839749852588;-3.0492649445926418572;3.9984047279982961598;17.312854228581233684;2.0301616769571482202;-1.4126228840434684741;4.1058993510731047749;2.376191349511837636;-0.72993772174208215731;1.7369195630545473108;-0.83532573083539118919;0.55378867593207536935;0.24637725498282969649;0.10981726914738948464;-0.0091459026902152296135;1.5939215834465096933;0.75904131855389889161;-1.2463505676001411793;0.12827149835494716656;0.80318303816731695388;-0.88082366525899735699;-1.3874058364491992368;-0.47350379428732652931;0.55237673359798633577;3.1672939812278291249;2.4634250045576804311;-0.074068298485324521319;-0.76047115581410829055;0.16438735108482666059;2.4099199114393283772;0.65835930434873524142;-6.3970615205644154599;-2.8634203753619709154;-2.575638804559779782;5.0412975471296297414;-0.87797958311305190904;4.1245784953542852236;-1.9328311340830306442;3.1265616439922481185];
IW1_1 = [-0.21908899259091121903 -0.077895792295813795492 1.5820907103210644085 -4.2123503813283011965 0.62080915572094808041 -2.7902211197106492335;0.27993371521594323514 -0.59637513954545673389 0.13424049117121952812 -0.84361426938748584892 -4.138075494391560305 2.0152883101195002702;1.2623936460493292433 -0.87440660347959542342 -0.23545970936740820423 1.2099337660310929277 -2.1491795951788823515 0.13890331089769436534;-1.0910389938221978223 1.0058723157633762124 3.284543014156855012 1.1045406807243445257 1.8011476312621799156 -1.8138706414582337345;0.12261699912382859057 0.57057741919926585616 -1.3195982378164445858 6.5262601813673919438 -1.404101144931311218 10.895065364690232457;0.079910311378272758098 0.13712227222786560477 1.518745008278797437 -0.82887733488053338959 3.3016500665168027062 1.0215085037157412007;0.16258473251970795292 1.0016428488747368686 -1.6345919416660743551 1.4419098745125891181 2.5125114038939138084 0.22112264609762644074;-1.1406810462291132602 0.9206439644538562117 3.490854930695263203 0.93623111427299277043 1.2708284683172765828 -1.7657255361180628217;0.082159553433142157308 0.29969653311303023902 1.4963057635109675569 -0.087284763714731275486 1.5017892056466271011 1.6986701472778618083;0.14895689598150979593 0.68473892510004419343 4.3841541873638858462 -0.80613941877151962245 2.5529083840529338545 0.90626538492282959769;-1.5619038496612180911 -0.58282636060507198028 1.1670273189411644044 -1.2573056092239291992 0.26293171908264090231 -0.5576855046679352057;3.5343979603527442279 -2.174589869202331549 1.8191523665082685035 -1.0128361003073262925 -3.7299241778186855711 0.90792365030955246574;0.79869896391025474447 -0.50794724435972826715 -3.8909529894706498254 -2.7891985267033749807 -0.51175773711872973859 2.1633441920532621161;0.25957564789162707042 -0.010286338236470007543 0.11110852707704746423 0.56156379023613234303 1.9966888105326585645 0.12486196733765253519;-0.17042510355685772105 -1.1470594360189705352 -0.069486912666300887365 0.022941841708634131553 0.068775756806726026649 0.067418103856323532974;4.1110520725827903732 1.982353548333287474 -1.4321351053587043634 2.0156116209211418777 -4.3438060281964263609 0.23863743706154177948;-0.60217671495098823442 -0.27840428685867713021 -0.31935449615208039154 0.41750626059044249061 -1.975821863748237206 0.71963570450472968965;0.19000414194359285802 -0.14450480044953648018 0.36708309342613271165 0.16595420559585680187 0.6772892276935470468 1.6617091450938015207;-0.38899137907993885932 -0.7423528041112208431 1.7818472251974777354 1.0391970408268322856 -10.31893224336088366 2.3727223156850612007;-0.47649553513259113036 -0.23528685421086004137 -0.78049675028807785626 -0.3561181712724063031 1.2765283577635613277 0.1067294353542754537;0.27888037557533174038 0.59128031490909882528 -1.8653972749195337766 1.8837838441457190886 -0.23750386351543226193 -0.94928836346672196278;-0.23546506682547016509 0.21799769458118720133 -0.48051724555197422584 -0.23357398843306395597 0.020054068366347117119 -2.1689150478076228978;-1.5010290761258944237 -0.41811712793273553279 -1.2980714340846759569 -0.72384624518008489069 0.94535903727393755247 -1.8033565962992736953;-0.17170883359211183694 -0.46194369570658555535 1.4003685101448737349 -1.4554911016222127351 -0.64976110563620004257 0.09187378901298967615;0.80906875966267732814 -0.51547248599169348537 -3.8984534137876840632 -2.7575339940003575911 -0.60186753140030935239 2.2324322673209189283;1.8596381093635039328 0.74913114191864738078 -0.72309034763872426232 0.99062282362736631125 2.328872958087506273 2.691399069313353376;0.14117821549175085805 0.28699037378497149753 1.4846910386949037086 -0.02807642750423674366 1.2410693707954640885 1.9344819359664939817;-0.021176224506872093345 0.18078606376756198304 0.89257001626296028629 -0.0053987152676964397791 3.4971026738795978339 -1.2565803327600510997;0.43758289422547475001 0.41243452067735791866 3.1326132019729122646 -0.26746599041937119123 -4.6829242639700758843 1.6491071288393248651;0.030958161611157213045 -0.16503734070585174276 -0.718853995751401742 0.10299577176331330131 -3.6213816353538788029 1.4155284901907467798;-0.073392681289780076215 -0.1039393019891178549 -0.75169822504576400135 0.0032299630668300707489 3.4603845077381936157 2.8304090163666422164;0.11797124989130194916 -0.099502689180593240081 0.095649110943575518795 0.12816083046771847842 1.0221359264047236159 1.3256473219001427832;-0.25660807411867903038 -0.040430428640846637067 1.1215145375308936959 -3.4355482787599602723 0.46816715712168599506 -2.6017063841559853188;0.093585489239721778021 0.10753993855975561844 2.5395613624589534751 -1.7216245681026478564 -2.319103730698836241 -1.2073540752069236159;-1.2772047434402467037 -0.53812634163312345059 -1.6060631937874922937 0.10736224129556705409 -1.178520842731848095 -1.3643041275139149437;0.32661447123730796838 0.033166773789877569689 -0.60209182055336385453 2.4970052405492837444 -0.57758428342619483331 2.0915621838297755453;0.53024983143005766095 0.19907354752852240987 -0.61510941787792761115 0.28519608161197446128 0.033632110105629900443 -0.3389605426191776294;-1.1402777156385313084 0.80814908216447056688 3.6312859030184139186 0.76457775279975470628 0.67420620209323434135 -1.6886305764742597368;-0.9129515695874212966 -0.022038086195493855612 -1.3669427681094548088 -0.23647041348796110638 2.5419993789901229597 -0.15991613655888808898;2.1658557499675579194 -1.4947279579385743808 -0.11058095254990758793 0.37196161846350755953 0.11484632469181919878 0.10118219634757058545];

% Layer 2
b2 = -1.597036423918902992;
LW2_1 = [7.9515451933234047033 -1.135340584682310805 -1.833865718675125267 -3.679474402379393716 0.45335834682996756229 -2.2187785476444026322 0.53281022854242887643 8.125592089488716141 7.509888639363031082 0.25436885299198241928 -0.64564419991431287738 0.046879588542399777684 3.5418387308587306883 -3.8684623434866405312 1.3816880933711306323 0.062931929147256052137 -2.1196569561363940437 -11.656809268555374359 0.12731097591873849484 -3.5373991700833262719 -0.54261581685738291547 -3.7680801223450859361 -0.21942239049225809033 -1.5696230559110595504 -3.5713952535405071309 -0.096896803927659605482 -6.3302809985942278814 -5.9030380151787262832 -0.31731348699874145636 -6.3725597003975389399 0.61085416798865754817 10.235315575485515183 -16.915304873028034649 -0.50399669282341164056 -0.60197137670447287139 -10.523520836984042504 -3.2881710800295009811 -4.7221804458193439302 -1.3538729221559373528 -0.68835475004320390013];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
