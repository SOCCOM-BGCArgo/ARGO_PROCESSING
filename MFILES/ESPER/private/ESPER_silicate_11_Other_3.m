function [Y,Xf,Af] = ESPER_silicate_11_Other_3(X,~,~)
%ESPER_SILICATE_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.8122992034064027145;-2.2974461229449163469;3.091370713400654946;-1.9311171510231677217;-1.705401309129571441;3.0639777298093187063;-1.6418438051039865311;0.70189202526651972569;1.0277360024613078071;0.46751664629044670241;0.7428506509212592368;-0.04078040826018609899;-0.52339906227046262277;0.97627467852475124932;0.72573495897850903713;0.34677283574372436137;1.8659532369392668461;-0.80933913673709623193;0.39931664025132446172;0.12057154299801621511;-0.20699384430061623652;1.6032110388590750105;1.5905445342240402962;2.2892665716354496652;-4.7278170707672684259];
IW1_1 = [-0.35250376450205184176 -0.88605756571529314947 1.6859097920991208408 -0.46918962756975463035 -0.65358592152685268672 0.59591448441586591933 0.55628863495493696689;-1.8728600609304535407 1.642283473885010503 0.53180635943381759922 -0.71968792843146445204 -0.18507803412070700233 0.26552743141605950061 0.69437103448201642486;-0.32354614858609898054 -0.23315730853651744914 -0.71978048112352921439 0.8038679580968531857 1.668693525744006978 -2.0412424397227137973 0.070716691660650241036;1.2374812467722997589 2.3303842360107638321 -0.058909627448378000525 0.53411770329094132581 0.55842047862675425751 1.1144355456593841858 -0.72206440363466439791;0.38289637541597382198 -2.7027065459488386345 -0.10301075184406149887 0.72855660016684120617 -0.47217363024232106294 2.3009519002020768497 -1.6686099541206036445;-1.5475972128798354266 1.9273168964567002348 -1.0439764807785849587 0.97347474636492714595 0.66936936790669987474 1.4915466064551901049 -0.49564909721612726567;0.8512513799555395666 0.01458595593241524338 1.0116334275795209052 -1.421052351982469375 1.5902772530172135657 0.81559252025952144738 0.16541623667229601868;-0.42459286328380313469 -0.82923322234996643676 0.19631625064976723771 -0.50059179511782947447 -0.28206351741184482185 0.026609052544339668184 0.25650548247173265981;0.042824906490300074235 3.2986796485500002873 -0.2392504448598954947 1.5182093680119854717 -0.75591120146727341922 0.02514401041111218385 -0.28076176790384760329;0.29442090696657691185 -1.4711261355769473802 -0.5262850086617926193 -1.5308846915397724686 1.965391024628398986 0.2976082209068550144 -1.2236176695927181157;0.14006043918999169784 0.33404895659061240032 -0.64531232392354598293 1.5508216564133376902 0.7113008889936925927 -2.3234973683695665514 1.0288697835612632403;1.2077475239761317205 -0.17761956361252262404 1.5834453349075821027 0.53249855713917415567 0.060196124971980659313 1.7349148342912441567 -0.63148780408016069732;0.1093525136211104809 0.12007356187461372399 1.1032921755403362063 -0.9747604987264121279 1.2462859576323954691 1.1919834556847117568 0.50605158980302966665;2.0381061528104709168 0.89159501696912923929 2.083654336344070046 -1.4586598981547027609 -0.040796765100613197053 -0.50959262405066774182 -1.0781016858286029958;0.9981468522531524723 0.83292975198178964558 -0.36108519305773334462 -1.1740789864299765455 -1.0599999178395071997 -0.23634174553145961828 -0.4742922148499229551;1.4385350222290176347 -0.78902495202187383772 -0.82064238493365160299 -0.67424473195486012145 -1.184125535592408518 0.51095580551132913083 -0.45021702690084719478;1.1563642377401783801 -1.2699029439236135808 -0.55130061156083265406 -1.486646463567584675 -4.0122052147148554724 -0.99925770639850441945 0.14539414411849016506;0.48046149176130181768 0.39546553852560717424 -3.6062562644647013776 1.8502602208098939407 2.1393000499077010623 -2.6238068605776336817 1.6142698876753429627;-0.28659841914660671991 1.4360699743155167507 -0.25635509628710217989 -0.14617443031893670446 0.43378905165785114351 -0.35258910831930645458 0.70767866525909151054;-0.099821037132674178549 -0.04365310576714823837 0.48752756477352682252 -1.4178077392143990654 -2.2016137380579801075 -1.1904750715778320558 -0.71332438440835177484;0.13640281354236594158 0.10236614672844125684 -1.9668555669202134606 1.1799068398403871338 -0.65029034803386631669 1.1138459693740634382 0.53277242612992958826;1.7520658682511387472 0.78011599442309109698 0.22324127731705917244 -1.4579136125041403105 -1.4189525492154180242 0.14592429790697405978 0.92533412023498617938;-0.049969892666771049961 -0.032900925442449345526 0.91562971154777228477 0.20385114445443369702 0.33593553453848112866 -1.3829523956398315221 -0.40927355216767680179;1.8425024645288736735 -1.2307526959367331987 -0.73322771834878175401 -0.98052565897858523503 1.2288643638527370072 0.048291974671644470607 -0.15865408510864256741;0.28160922063157284301 0.062439519456370634609 -5.9120125501551132885 -0.49878860330214636054 0.91979536899916514159 -0.26376050302711601114 0.35852870892260785274];

% Layer 2
b2 = [-2.3256544278731241526;-3.5075121580477510719;0.60255512744320516294;-1.9735919199688707337;0.75664328081380705093;0.88231085280023868744;-2.9849977706621744211;-2.7841064583871610871;-0.19642684047607977815;-2.5150598653617297629;0.21962546894029666422;2.4215275486577043651;3.7198718201179366005;-2.1235708420922749795;1.84694972427659998];
LW2_1 = [0.6458705962606614559 0.029836595103835159698 -0.68129035268542958992 0.26336220691528888782 1.0278494594636342629 -0.18381549761436380419 0.58847990878592393305 -0.41994675392343633336 0.19017353237827688828 0.35576230574998490841 -0.45566624511447706425 0.56993105305258662252 2.4869104639880958985 -0.42058415488554656836 -0.98156526912501962379 -1.3863200161751938477 -1.5471013722504083354 1.0956861910971606999 1.8805637304209581462 0.8574115340987994438 0.64354617171007633125 -0.90796205251413919513 1.958091742162274107 1.7051027405473031529 0.95050135787137379761;0.66810813557896941983 -0.46926794032113378075 -0.93357750225932123467 0.59125354464520729625 0.86087026686902923256 -1.3142284251562641462 0.6652854569079652558 0.51535668243382515286 -1.0590241753790055057 0.18599664319806802348 0.08543940837413761813 0.39542787395411277407 -0.28157842170803210058 0.6681108436309208809 -1.0744350233923840587 0.36900870565629073639 0.91999960948687564688 -0.064149761902303689687 2.1623449992926233598 -0.40068927203633031287 0.27173383767601083649 1.1147611576081708495 1.9159333633469635139 -0.1464425721845654671 0.010806304947620059762;0.57525664643201313009 4.8299826581070863796 -1.2225196874290167326 0.79042535607801489572 -3.4166708023731087174 4.0111574406320782415 0.5083454803545097711 0.067208156923283343676 -0.54530310580200402892 -1.2154068425786803687 0.35894479162368847502 0.98972048143073865223 0.48455906909075119327 1.5413957380283060949 -1.5482964969526946675 2.2534876668861851812 -1.337894335642150434 0.19426853158963389157 -2.9502488264099904214 2.1697087290026151329 0.44935015417485574263 -0.40212390659194008347 -0.2255511338318620107 0.356484535546571224 -5.2185940244972570667;3.1672871089188321392 0.76381547092262136456 -1.1668958371025850429 -0.9118046312986062274 0.85306836744746017409 1.0299847366382248737 0.087538357923639481539 -2.1183133640414948395 0.020259597512691046584 0.10792994355456647648 -2.4357505840163864441 0.42254944181688525173 0.049668297520404788847 -0.47172854714658191133 -1.5059296686562611001 1.0935780718256209454 -2.7381207098355506702 1.4468345525880219604 1.2919158514163682216 0.70491787318073551027 -0.49929090070188197892 -0.41034166179217285153 2.6232430380664304437 1.3547949031050801061 2.2141631964286130341;-0.75323733673842263592 -1.3090570769435219134 -2.8444224108135829354 0.41106174820049751206 0.69874342658237398318 -0.30304457037236948169 -1.651194786211564125 2.1579660910656115469 0.3456390166078769921 1.3684085393862090996 0.32411027152308707899 -1.7338006705017521281 1.4801642350947290527 0.43332953612907093577 -0.749642890294003994 1.42238597538931133 -0.17215504019759134136 -0.55462578916288751696 -1.3573482990861900355 0.35939854108644431196 -0.7301512326466604863 0.27909800225088066128 -0.35646647677595694192 0.83128797174954904836 0.77333043668159207051;0.54006397759086910426 1.0412046584767520319 2.3625467619765880833 0.69874649283059964144 -1.6147539620473341238 1.1814385501710260584 0.59315690984775359951 -2.2175571963852642732 0.19126312605760473207 1.1921379737046591263 0.55161783705030731362 -0.68989030452284771933 -0.62093885281353899952 -0.4891578225004288849 0.87381654023366706063 1.1453379157177330239 0.51884898127225964615 -0.23281844319425148981 -2.4903922926033916774 0.10070570932613097381 -1.6774481271554142481 -1.2260876943200673672 -3.9575262771107682092 -1.5043103781272386676 -2.4083225153439551391;0.60739670506741649803 0.67976932757982988509 2.5657188474887662188 1.1788994517927526839 3.2268235634698436698 -1.3219599238320822732 0.60260860831854068387 1.7692679229905750038 2.1498141904077163744 -0.84199150503198694206 -1.8198052908316320053 0.93863030857065121726 -1.0487222532161437627 0.2186862450657927337 -0.16445262892538189958 -0.2765715086621936547 -1.1778540200088849499 -0.23729349580810962794 1.4483572515416462956 0.68699619668842226705 1.284254542642544461 -1.0653299073964186405 -0.57001888490074525961 1.3590716838358132268 0.25052191160030368167;1.5405792979244148366 0.98738338356966470766 -0.59422864292339683256 -3.5518669827447006959 0.044655205187578594916 1.7864106348165842419 1.7917722906135928884 -5.4811272300492817067 -0.060842701940034146779 -0.5271281120750800353 -0.46644006412049232591 0.71926567115955974963 -0.71698886819538154569 -0.026979455320227982429 -0.2632782758666825651 -0.015241357494169292808 3.8395934730364094101 0.40736927374721676465 -0.97840356066038469685 -0.41486992964214602919 2.0398208983520351723 0.84724727830974055909 1.0777147446880246395 -1.8626892416707048206 -0.036449878813564318136;-0.7972384804982598494 -1.1597876605236121517 -0.0034959398966572345635 0.30304474967774203131 -0.40324499583928113955 1.9510843135709303731 -0.8916345985916445116 1.1415157311087005265 -0.13784981530554177298 -0.20035346899332825976 0.57040873774526146267 0.011928043024757835691 -0.10607552879892336029 0.40102186475909351593 -0.80329626380097474136 -1.2442121406350448165 -1.0685232441751875143 -0.48558442983211119737 -1.3809257658748756992 1.5468650702250887896 -0.84979670525390793578 0.47507891198108753716 -1.4711694828925163669 0.21319728772897209024 -0.15857685293731155207;0.45160656696910511654 -0.47185282201248096579 -1.528378062458475295 0.395773543562619734 0.28862778394707128138 0.7454466450651114906 -0.33833627696089463299 0.45644951337759159804 -0.19420566590076532298 -0.08869748160378061741 0.31352794063227890087 0.93444750836764800539 0.94455712462799767959 -0.1696765831821996362 0.20942739945261462653 -1.2986739454421989404 1.2827444031704102745 -0.31128734385901141168 -0.33487212855542120016 0.54370786839586349171 2.3665577810287694582 0.73218374954708298485 3.4699977728096196294 -2.003939940117152485 -0.10449228040674884976;-0.34455958916275336579 0.055934653118989666187 2.6093200154840028304 -0.17769679603568727666 0.021159932469494654311 0.30219170733567429776 -0.25569086717333511238 0.83979916766690709817 0.094973342511377609187 -0.21340517446393431067 -0.064183050132592858739 0.022470330779386982201 -0.29812520487948868109 -0.19519101582194298139 -0.10907972201909017784 0.68647305184448514925 -1.1261771353471752288 -0.0824442721298746517 0.23717477476350665166 -0.14212704867622857896 -1.7244329002395459849 -0.038234283165067273202 -3.0457487381392112091 0.34964740216108058934 -1.1204678125110809628;1.8032185426330076261 -0.67760037158270469693 -1.2655616088130672292 -0.75982841234774356476 -1.7213346956720922964 1.3841833625094277505 -0.63901334763310968512 0.26973566952179561795 0.6222520709167509434 0.46598528793994570263 1.5620733261572019579 -0.58584246604374801137 -1.4630956032036017689 0.17441523838446043593 -0.29159553144919947432 0.41026277572272146221 0.84609149368620417686 -0.31889445952922462757 -2.4509911806441047055 -0.58480714152119395166 -1.6544748052676576666 0.77025801550495642811 -0.65817267930238598783 -0.68331643341647363421 1.8890538730690522584;0.78388078058088517253 -0.557417763015449097 0.65829820506352532128 1.6594546907526110946 0.74221872426280988133 -2.7515920412951393459 -0.084114167978409065674 -0.11671642771171482356 0.18708770432968541142 1.4253095551664223262 1.104580354259173447 -2.2601829714738959076 0.41096388046471027389 0.33006850011980604087 0.22734360071679521331 -2.863681662702922015 -0.094437181015565571651 -1.0149663748674111474 0.9340548402373074488 -0.42436518705207471047 -1.6963224970197687824 0.38998145966582126176 -1.3838238207009370129 0.28393086878704815179 -0.068931583057025416772;-0.041485251234213815774 0.20743405218789653932 1.9686238523108749998 -0.069605484562240554913 -0.11437498357681961936 0.54208830805705310318 0.26059749263724879542 0.28967126549486987841 0.19268354912746699092 0.084643412637401549414 -0.41632295970449417766 -0.29648702554293693279 -0.87238691162541570634 0.12673520976822705286 0.46500529635356663283 0.67282210652120721939 -1.5312095227282500609 0.71655295962423182221 0.21660581764699773921 0.76681040600545657959 -1.5154292181285002883 -0.75785759315858969298 -3.0745913317731714542 1.7183874934454468342 -1.7904608035825502199;1.5890912595695791953 -0.27549410551022379678 -0.68909457722628331133 -0.62627922594482554608 -0.1898772951026410083 0.696235585501697396 -1.031928581179926363 -4.4297754622064271501 -0.64211723243391549687 0.9014217776675818028 0.37242336206198861648 -0.28155004200963229533 2.3144229577194646019 0.099516005632641041379 0.015768054520794064222 -0.89424205451960125934 2.293475407773317265 0.26519013073003433467 -0.22012969902036624847 -0.012820636503343245394 -1.5720967820326741116 -0.25403267458339245932 -0.47287414294476748378 -2.3773142982999222461 -1.8434146860973281701];

% Layer 3
b3 = -1.3575045170269741668;
LW3_2 = [2.1299272833915208203 -0.5799669481612196309 -0.057023349908902322414 -0.25206140348978833821 0.038307189570946247048 -0.38521200575261171917 3.9085594106512302481 -0.160721395294041558 -0.28787022690857916318 -0.40006248122957960289 0.48584220601504279902 5.5421430959091058099 -0.16751119886009185889 -0.6671632031810192931 0.52493843137638995788];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
