function [Y,Xf,Af] = ESPER_phosphate_10_Atl_3(X,~,~)
%ESPER_PHOSPHATE_10_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:29.
% 
% [Y] = ESPER_phosphate_10_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.20161195303578000049;-2.3299587465899982419;2.5164604699735830806;-2.043639065571923652;-0.66418857158773314531;0.76816871532487596141;1.1910684902552979292;0.42320441870794733852;-1.5224918059571679319;-3.5057272131349779265;-0.70077740125345899802;0.82890316686435938642;-1.3536239059001782259;0.33086573721471151943;0.81145795225178396493;0.99437061687317573888;1.5411866175854722627;0.078304429390812474443;-2.7481265767282452295;0.19802533308400668832;1.637857324895249489;-0.35935724414414288441;-1.8536475241709977624;0.56625496935325703163;1.6784641529207535715];
IW1_1 = [0.68089130647730577994 -1.4206837798431697362 0.37400583142648952117 0.29833796878757840032 -1.9908142105573436442 0.064288366827806156523 0.90850554781382175662;0.66629851852695665126 -1.9531711994577216629 0.012967801219254421197 -0.1458402703369034159 -2.3836623768602285267 0.69056440863334489499 -2.643412228849993717;0.49343876465549990629 1.2875066655070934729 0.85117738847765578303 0.87690019867324264791 -0.18651029198501950512 -0.86565707660300683646 -0.18624028146819704421;0.044141507820238679027 0.12685183040096364993 -0.51261607392750618839 -0.18650075859392800659 2.806189959467075834 -0.89865461063982365886 0.75830690741518658182;-1.7495223499272698486 1.3898885056178529318 0.61455700215606423598 0.0028685637605123659455 4.795950026965134505 0.59647889817275356883 -1.635810430102012214;-0.43016137696090211984 0.19880386552166892655 -0.22391012220467057525 0.40609234877118988161 3.7018427517978640395 -0.34591005651290968048 2.4733131845162410478;-1.4294261042148055374 -0.29926996867089744603 2.2129122939545946558 -0.36574801035996185039 -2.6336636096675580809 -2.9011757310616999028 0.97482077283166879145;-0.10970902335170930331 -0.79812510504451150695 -1.636776400846736923 -0.46062825311676203199 -0.81059128287968928994 -0.39670299481865312075 -1.1047634058323405615;2.1099795016606979203 -1.7656806346071318714 1.3413068513114068114 0.20667371629923303455 -2.899058238824714806 -1.0551875271585569038 1.51682205673062942;-0.38742177981697328848 -0.98365576077448124703 0.80865462648059638351 0.87654508906863981554 5.6273986044116588445 1.1129162820682283463 -0.68352990250276035589;1.5127960824182260513 -0.57095653579756466822 0.88993234344380456324 -0.025589793468540972948 -1.5759203966987900269 0.60113392970452261821 -1.4763814129076038295;-0.51697968025805673964 0.58309238540734120715 0.21973368707288670754 0.39737289692155236542 -0.18818853801154689087 0.10426181049421022473 -0.90901576282869345214;0.045125886609279353134 0.75091432469143970518 0.79223626120816470486 -0.53451295683509914003 -1.2270140232273973879 -1.5512677357369837328 -0.47604813634015469281;0.49765558894321482164 1.079945616815154219 2.0899406846102848156 0.18376455691606105591 0.32182802417108513637 -1.60431502229667311 2.5750276095518347397;-1.0956105455303857266 -1.5617672599643712683 0.8717580681738881232 0.73452090152002236234 -0.72017097768698634663 0.19386489395680622794 1.4728925854236611936;-1.5017159978296987788 -0.37229519729206450585 -0.43981459380986109853 0.6977189030441137696 -1.4921447265696266005 1.5420710082923743123 0.95680141449176359103;-0.23883231726524281613 0.34287052138534279688 -1.9224501002820277851 0.65088439520474783428 3.0391659904262122716 2.2755474994892352925 -1.3966972497746108495;1.0873073281662248846 -0.60469772936357235604 0.35617962018148463521 -0.28570188563562365358 2.0294228075439395553 1.5955153144442717483 -0.89954143336231373596;-0.58091055297840288318 -0.3133101052085256466 -1.3951174871037492764 -1.3450688826563055311 -2.6149554612142900112 -0.091376835169235282041 -3.3463248790737316618;0.69144699436213730159 -0.083779161832252493913 1.4826940553941279077 1.5246575178084347257 2.2135483522546848256 -1.0661420903707963248 0.65791190136038490976;1.463035412628587606 1.0776366659955469718 2.3911719860378415348 1.2278029480227963255 -0.36712417283078285779 -0.7889160131254157049 1.5982628910836371716;-1.4043242533870998745 0.33913598177784964882 0.23196811175578688213 0.30721081361350111028 -2.1571142273009842327 -0.077880414895783844909 -2.6896118492011180656;-0.45398872864684319817 0.77737700156975275689 -1.4194868171751107155 -1.4927833547361761823 -0.12282033063790058491 -0.48875734131837167418 0.37171500033554927267;1.1653242252152165026 2.0514014910645799183 -0.59553204802868264789 0.36010036042373722021 3.4329398109542945683 -0.15929276062685054915 -0.029958623814677697028;0.93521543541997742555 1.5685747181511193737 -1.5716246110428284677 1.4697884133412160157 3.2730278374088794813 -1.1474958614084260766 -0.54144200713498047417];

% Layer 2
b2 = [-0.69046444628493519602;-0.16324927533324121165;-0.66097348994557536539;1.6651616860613469573;1.3318439148451108878;0.96140820214149502743;1.2064574343189728989;-0.51657103787386615679;1.1539237473307542015;-0.65422798420731331781;-0.52313773838595301058;-0.43077657245045331003;-0.61707783756468037595;-1.5888125927153731176;-2.0004728079963229881];
LW2_1 = [1.0402398999097168808 0.50240237176018620602 -1.2263802470027671543 0.0076931176639114529081 0.13032073265580795818 -0.023062915967289775859 -0.19048070581606696416 0.15842364051624466259 -1.181491481436319102 -0.59048341096150624985 -0.17918249512100165033 0.83299471861636020797 -0.3903988018864057441 0.10190758051090505198 -0.23508588961935980577 0.12261768393240735087 -0.62574085719442296138 -0.23526911235611419615 -0.10054412056686345966 0.86754512182736920334 -0.093855499552335561186 -0.46129312066149918969 -0.43521404565159893529 0.27060932877497295701 -0.29409583511157355584;0.76427245313956759798 -0.61662920317047442698 -0.74121085922624319053 -0.39258045679216968527 -0.096038123444415507413 1.3980977172777329098 -0.21012027128290688971 0.19576537910666796938 -0.72222617851188830596 -0.26085551714452087646 1.2978846057435393657 -1.4379583327606819676 1.6577177271506293721 0.86923752642756368925 -0.689870526598817424 0.64658445178755974414 -0.7242983653306762637 0.10511029667228077855 0.56885335710186435421 -0.08196289915420561234 -2.0237528928080110724 1.2062136666569560628 0.80245898230504875137 0.44099750868235843004 -0.18147011983330305074;-1.232443889039313456 -0.14292820378532511416 0.28747937725409211662 2.8339938951124916677 2.6659165392426240615 -1.4182915339245456554 0.11196945565320429172 -1.2356410190020474804 1.6909678723513970056 -0.92994497611503468271 1.41755336196083781 -1.9176544878886345735 -1.4418510708728173864 2.0822994806643717602 -0.65576621086584996334 -1.1777057832835400308 0.3223350769570591523 -1.7386238651084973128 -0.69388294155213026126 -2.0568088977199190381 -1.3707289239821920379 1.9006640392830982389 -3.5198989654705390429 -3.3909712892042240817 0.84409197362083843164;1.2781601499995234317 0.55486898107944548908 -1.163320802272650889 0.12920360562709626295 -0.86747571091746678018 -0.24142265933087722618 -0.091248348305067519814 0.80492658224402946487 1.0530328550872938287 -0.57724118616125097425 -0.51813699480506658634 2.4252669386296537013 -1.0708230671640237563 0.34267710184474714508 -0.42125474062996015601 -0.34200731931182309919 0.43438178147176770283 0.085594782803580682362 -0.095094120300781959099 0.49600665880115107909 0.085870466157421262987 -0.33921959193600020877 0.51794317833265168805 0.21025108948692380895 -0.76139513293047889064;-0.32534359675792196009 0.84615644392142264074 0.5094892197758975616 -0.46474947326613519349 -0.88384199054024892295 0.18522705346534543147 -0.10874108750979029347 1.1188901571096583343 0.83200078466852256387 -0.60050961193137519789 -0.37817365286586607231 1.1076228558257459333 -1.2286728634435897245 0.924913771254704975 0.17687561979344199048 0.0058475255892752936102 0.59375612203056293836 -0.23894650675764572689 0.22909292534399969266 -0.45040163475409200622 0.20777598450863621338 -0.19671307495487683203 1.5859144972150642783 -0.19479555879835638854 -0.12695534625457702282;-1.1390484264060170005 0.15674876258915165783 0.06457402342147425256 0.66135005802452973001 -0.52932079145238675189 -0.35286406271414855196 0.43442617356868562517 -0.26652388443611574331 -0.089387015742175501831 -0.135606247786027867 -0.096535312349678228938 1.3176434322339680705 -0.44781190979866603019 -0.30970506596729563409 0.75320620717303055081 0.10070411037413755373 -2.5558410394235484553 3.3909722087374531974 0.41729212953969763156 -0.10734358173918323587 -0.28061965909970865152 0.68270229029794249342 1.120239147735552665 1.036092268812952355 0.43930925238889284579;1.2308110154046532081 -0.48776288260867389779 -0.94944444056894228279 0.65684989916566727253 -1.1016098517697991976 -1.3487769400553009103 0.79978482021084751352 -0.54614657344226469338 0.16038957114533872184 0.12549587875773718371 -0.66280585362971511376 1.4965433482755423622 -0.63662085573538795824 -0.39244846839062030863 -0.41128931475798241602 -1.1222608306375005949 -0.93266614378349432801 0.83373921555188490462 -1.5676077490877999843 -0.16985938815799311863 0.28293159348808982756 -0.10113418167414749138 0.70973602554311965296 1.0977446736632257007 -0.86949871086904750861;-0.98884681826186149323 0.47947671013259757222 0.27889709792461925275 -0.997751497564821066 0.53274766176970345111 1.0584962106191493358 -0.77543549276862511199 0.71538773326182747425 0.16481104173628641218 -0.17350499851121109485 0.35741113812343466849 -0.30497059434651901944 0.40938619028132516853 0.42082442739181952218 0.33623917570229555629 0.95833189352904224467 0.76830981763186712019 -0.19875854702032505483 1.5894326436959242965 0.57931132034703891609 -0.35987534168002416335 -0.28369874138727174673 0.099780942180080822723 -0.6360380532499700923 0.41687525198670172255;-1.5509968369072355543 1.3270680474731078036 -0.48886627838332485929 0.98663474270752837825 -1.3999076984130978119 -1.4948456502383653532 -0.36519589793120266208 0.9317848131769821407 1.1782834686444290107 0.1482006874668113372 -1.1487003343320316695 1.0474407880616602995 -0.48214074937495809969 -0.78025627108384476571 0.90459401425879559788 -1.5081182097570628997 -0.30830121098576152017 0.72746801881601141915 -1.8550392904083254919 0.053047416487970656951 1.9843559497369342992 -0.47112220742296950782 -0.40618574430318915569 0.39308087525124818518 0.12392194506676690313;0.3712250466519651515 -1.0004702069865214487 -0.88284119893290502468 -0.71638420825148418913 -0.28216793083276014986 1.7830974526034915062 -0.5576290068914209197 0.091623832033347091253 -0.70129799982080154308 -0.14944352813157146809 1.1731009573603552454 -1.1816417743205034352 1.5334677698743937047 0.57953811997168558356 -0.51312001778902849303 0.46345761718306482946 -1.0622906033916053037 0.33989197649737540319 1.2397779398030690512 -0.080459989215375282701 -1.7672636541472406257 1.4501234776131892712 0.58898455702905161413 0.82886205622522901582 -0.42273878199260206401;-0.26342251886939005434 0.52383689259810251038 -1.158323921653086952 0.40472310937615513238 1.9779925293465756564 -0.62822895826995495128 -0.15266185554347636022 0.48681783356063257351 0.43879874525347389858 -1.2772512295341944544 0.80944561181404817152 0.4172746557562401204 -0.72679484883855660637 1.9837353203831145088 0.33394420993175172319 -0.59436782311550218072 0.1996873330997791518 -0.0017220824028378062948 -0.038570684761666154672 -0.58817132464315580176 -1.2082510103082075847 1.1410182262613099979 0.43113360934375349887 -1.5341122502706037167 -0.085630595938660847288;-0.96841587270900553186 0.31348615323936085408 0.45668686652888329514 1.7456580220361304079 -0.90100582377485571861 -0.56785895011561116075 0.5915467385136978784 -0.99252820631279026209 0.76948541231509581806 -0.10617583353026723014 -0.057416479508765591588 2.0365779251224354063 -0.31133276966027462196 -1.1954560938944169823 0.93325666013773456164 -0.30274205667794706898 -0.034882809259617279796 -0.17295331847744518927 -1.6444795649395085313 -1.4095740943465857598 -0.36967247321904161961 6.6336925438613934813e-05 -1.3017283344846275472 0.65197268749721248859 0.54918946879776853187;0.86615578985601737738 -0.20302729620190385074 -2.2597727856557212611 1.2295862141650668597 1.1430563076453026383 -0.2998931611816363918 -0.49150979704352432131 -0.71067889210469104011 -2.524491777364795464 -0.5635085638210668435 1.6791210243115592959 0.077588159147771118551 -1.408799791527785672 -0.16505672239018864822 0.48899824034535133155 0.25369228375297731004 -0.24987016863469982408 -1.384451117671770648 0.6425381822636535567 -0.2691363208624975023 -0.58389959258090673444 2.7140731380729485878 0.75405448365386107401 0.13073195518311175878 0.13908465702080255455;-1.4611335509125322751 -0.44230889773701914658 0.23681967928322453232 0.16650238484526416749 0.70485349762026139331 0.093573360130236135634 0.026111220956817615679 -0.20503608156774855154 1.7466738187873875887 -0.38976411648738129578 1.5962963528285116777 -2.1829827278504869703 -0.058655890646103464592 0.30504121098393616185 -0.24009789850469390182 1.2090129505817228672 0.61370967523267949684 0.29661760014356453041 -2.2071203036632929262 0.86130899419578599296 -0.5746156765459262683 1.2925183103251638439 1.3396257483560158885 -0.9670103093521684734 0.064753379635210342458;1.0069248715348855239 -0.20687947183411767305 -0.21987825510431391329 1.034751672304163872 0.156385941778822396 0.59888425410179257913 -0.014783601447449182253 -1.2128461192409552005 0.19932559996139073699 -0.64728575549273903444 1.0157916823827131125 2.4824522977023724124 -0.59416672495666345011 -0.68422888656436431365 -1.2981244854732976179 0.70770942509947920573 -0.55236899350620916049 -0.56925202809893704625 0.19478944723394511773 -1.8416254291728699766 0.029924992023583202316 1.1808479246170617838 -3.1268842816827753239 -0.97120626735235660032 0.2352587841372528743];

% Layer 3
b3 = 1.5371200358074721404;
LW3_2 = [0.86491958261766876959 -3.6352523845605126951 -0.90015581241695385994 -1.0721422270568907731 0.75873145481699344472 -1.395867917517010337 1.2911069117460201028 1.1790000902728980936 0.72303397399127644629 3.4760925415568304508 1.0058377964409088712 0.69846804510090365614 -1.0186870724595011861 1.8376878368798625907 0.76321810950946866736];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.604229607250755;
y1_step1.xoffset = -0.03;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
