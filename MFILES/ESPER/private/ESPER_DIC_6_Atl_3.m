function [Y,Xf,Af] = ESPER_DIC_6_Atl_3(X,~,~)
%ESPER_DIC_6_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_6_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.22639915486677125722;1.4234982767703945328;4.8855466189526648435;-4.7764876662918149819;-0.13305002330647433539;-3.2286552636795833315;-4.7099530035287884289;-2.4857660750894767787;2.5225062440730905422;0.36141840045042006313;1.024533193481645954;0.080905229440248860318;-0.2615054570330037631;-1.8779779755139056618;-2.0498603755511686231;-1.3358362423109473305;-3.9598285637003285409;-1.0282146802639429151;3.2305982820191188054;1.8628528156777788283;3.2903902370214384021;0.43674979906500716043;0.25055547849572190611;2.4566699999598542448;-0.37814595438873493949];
IW1_1 = [-0.68952402793895761768 0.22107168348739467123 1.9241737591617364966 0.48919934472971393635 -3.1677531263647948911 -0.19066778808774792475 -0.18144229544739925997;-3.2193979968571997397 -1.0008636541458484359 1.2618545167982193611 0.030674901590112702704 6.5520609811626790986 -0.9996709541950118405 -1.4548343511152630469;-1.4146838322909418562 0.67955141439714183971 -0.34528269150553841937 0.12397791225316592834 -3.2300847914391166427 0.355552647742050143 -0.63920265493962724612;1.6494516694209950813 -0.9996187674206287177 -0.40048037831456484437 -0.73936960584217403802 3.5857785691343466716 0.6315895659607873025 -0.87882997117274930243;0.72033498325845657373 0.72503015656328517746 1.383315662711676941 -0.47595832142974359158 -2.0866493582168477161 -0.56030482695676053773 -1.0940338476811581891;-0.81575317088207366378 -0.76346606893503232705 1.1847757674170797948 0.2327800655151823217 3.312643942299418498 -1.6380366701207802471 0.66574881800652974118;-0.42738139536198688218 0.68069908591303784906 -1.4372374609233673493 -0.13213413073362118011 4.4571083556121831037 -1.0675055555322252587 -0.43553733573608843788;1.0299447732991600102 -0.10391126366960286298 1.2275190326181724121 -0.68906010289189512097 0.41410429482801902612 -0.88179987265959058895 -1.2227480819258886857;0.99731671351559059158 -1.3243518532735758519 1.1941268972733496412 0.002792871537558864331 -3.0269951658480365175 0.66376005814878347167 0.575318150580041765;1.4746102955084394726 -1.5586867773918517965 1.3379230210527643941 -0.62469822017077070164 -1.3612816793358830658 3.049067422226519497 -0.77227102124549162898;-2.2590170372878843885 0.93933944575698646862 -1.1624629386986251589 -0.54536721518025299549 -1.2314297660387218958 -0.93867632127720079804 0.955887720141832542;2.3140005838960329143 0.45032555730829881835 0.18020818841937799593 0.61126299555058005719 -1.1149401654292911967 -1.0882563281514132658 -2.4948645985723039153;-0.50161198494411796123 0.48052756494489640149 -0.3811111493405329731 -0.52641530712960771243 0.59652307269348359142 -0.016692979951839572589 -1.4782407892661149074;-0.40123327639405470535 0.92213637280661719942 0.36989226448201895092 -0.26297460207308553937 3.4358639845042904248 -1.3687506914077054443 1.5275488268733390385;0.13925532790534650429 0.78883327578299355931 -0.11000838579583727128 0.072167507976581668494 3.6723241175939933534 0.21456045821411137697 -1.2725360515682069273;-1.3130284428299623389 2.0795743444437673197 -0.073144640647813063961 -0.55514907698131721325 2.1035652327928131555 -1.2373319017210804294 -1.0982595104346593029;0.79459917645917599316 -0.86066851090320806161 0.61458741169208663813 0.50128507491591811629 2.0407624844623963867 -1.853147522451728868 -0.070946542931417333477;-0.75537180048100116547 0.98082275215147873837 -0.35015723573367601995 -0.79158276311926323299 0.99787387395848137217 -1.7850610163802287378 -2.048861284099909863;-1.2496032957384881623 -0.56350448698774646683 0.92073440876244405651 -0.15372113191671718524 -3.0913720926738719186 0.57406294334984153682 -0.88900234316921644684;2.8984841235919320823 -1.0982304868615579974 4.9566714369271851481 1.2058814608404166968 4.3807229290405507172 3.7142332834941607089 -0.84439921010380936117;-0.45033962108371200506 0.30874969252173112277 -0.60673412976568064092 2.5514064505400351202 2.2797550542034450416 0.83628217400639481838 0.5084861220227379075;0.34483798333240761602 -1.1066040668656986767 0.2249113268420574463 -0.0742893804528568652 -0.16146152330514051965 0.083145414629311742427 0.22837585080783417979;-0.083155264065060727208 -0.77666898005475204503 -0.72747920437788637926 -0.16898702612132368572 0.20601120154392510431 0.6242361591221241568 -0.9987813098172871884;0.86564503611086707213 1.6316706928084516726 0.60298261572530020835 0.89331159940533122477 3.0916958215765291129 -1.4957429630038505675 0.36804041634432343999;0.99543973753497838608 0.22167138270995198623 0.73788293906704394143 -0.15966938826836232779 -0.060825211655084678031 0.14411021451454816833 -0.54904553606922379405];

% Layer 2
b2 = [-1.2168170458193010575;-0.76252774167654580051;2.841675765353894878;2.0112890273081358572;3.5955942286510693684;0.30443119731235829262;19.047343166936123282;2.0836976729517022733;-2.3923055956130334643;3.0926572224722215232;-2.813911057374724578;-10.543950639558270055;-4.6571356283658209563;-4.0547197517361750485;1.3657075319448612749];
LW2_1 = [-2.6340355219575384282 3.9401353918525945375 1.5910142653182872685 0.57118724664823827819 -0.41490188578871844971 1.5088805136730061296 -0.63086968897087147834 -0.74138717776294360551 1.5416497986666666264 -0.96309131135597469964 1.3257426602131194837 0.82044793781586211612 0.63562616943874272746 -0.66230975448268791794 -0.6601787006849634265 -1.2049978463399733108 -1.6120635846474984376 -1.7171753252549153412 -0.51442914967130171089 1.5601905541831504465 0.094217909366109214853 1.6533396548179202235 2.9741638102563241475 -0.5453472349724244328 -2.6594326337262943483;2.0335237256393061678 2.6899359056734866158 0.84565202074964762602 0.65919124458040945225 2.4203773592156694328 -0.004728738682750109612 0.90163195636130155641 -0.98057938886613782437 -2.0508789569069256764 -0.17661889015397530533 -0.76664405064669227663 0.066672797880357292932 -0.9183082319734479082 -0.63122289179827584249 -1.5183153889758138622 0.51640548130854080355 0.032495319783915149747 1.5574405882446076266 -0.18434478862431014079 0.10358145729365095256 2.2893357818888824262 0.50179446401957206181 -0.96198974531737391214 1.50137654093033035 1.2181945677433125841;-2.7540874368751571133 1.0541545308281856652 0.89335782574376021437 0.16685330140633974905 1.2780689085526120152 -0.39770769373067760277 -0.017026209159302016505 2.712923158178289551 -0.17059280305457644178 1.8288798493898781317 0.69661779125279288394 0.90447016223387710632 3.27510923910484264 -1.8716242778946547975 -1.8278965473510173645 -1.7474626908494257371 1.4238720619412801316 -1.6361846526945420521 -4.7146210564565294021 1.0764922087440600418 0.3377882424039161946 -0.12006575654946541332 -3.1820446596141205298 1.1362244543469288693 -7.1974279648825332245;-1.5053208124595836015 1.3581810414163966172 1.6949445424068425581 1.8629157679253032232 4.3077621306664584111 -0.19125704871686596831 2.2853898311301379387 -1.5890808477187559067 1.0468305138017743872 -0.30509356890780969795 0.3198862006624132448 0.98391042990154031767 -2.212056513503191546 -0.85400254351023474619 -4.0582612399829445238 -0.62208836458804228631 -0.71581923611011066821 1.8211706038676571673 0.52657432523968661364 0.72872802585876694792 0.77032688848744468313 -2.788173875604368579 1.1381240529754765856 -3.2415996513899822951 1.0013303766781369575;-1.6919289192815223366 1.3350251244787203486 1.536635831815691855 -5.387890522676325844 0.45681401334343307852 -0.86138621771123313753 3.8134865282079504212 -0.99107002777319008757 4.8602967374458705407 2.9016662364876784075 0.21450717470331115422 3.1289840831850881386 -1.5789005482730025243 -5.3145871390031640402 -4.4066739884837264896 1.4083113901733694817 -0.8247170641749249631 1.0675215770965587048 -2.5527278260800692067 1.1703907373862183494 -1.1452985243149818029 0.98485279686217352957 -0.86558897602076034783 -6.458061752811265599 -0.2577466153749698452;-1.1409238797811702693 1.9996813899477978715 1.2658320003107061957 1.0200232194330183244 -1.1399535801717253225 2.1056640033509887999 0.88852811762234384929 3.7515373928771382772 -0.92370294791040885585 0.8257852774632148396 2.3706518199282973214 -0.30835449695832839456 -1.21944634284889597 -1.8786576181774501393 -0.21286110730982482631 -3.6262654771698623613 -2.4408170136113813697 1.1266371402460937379 -1.3084798523314185026 0.76883935981880213717 -2.6329428114395541094 1.8943736188706186141 -2.3170374036629675096 -0.32630432894284772116 1.8592750233970167795;-5.5231387136616874045 -18.132925996047060124 -3.0627481626633019651 2.5900833142799397635 -0.040737059945937882655 -0.39150899511392556196 0.2538496910354185454 -0.049483686081706626525 -3.1291836544267250808 0.89676945865378121514 1.7021849558175112804 2.1117884146285570424 -1.630891203541746437 -0.23808298079708861694 -1.2064305247142621536 0.94706025852973585444 -0.6214206425561680236 -0.15478997444291983654 0.71949326669820423685 -0.33913737099725099755 2.7697084575145316521 -2.0701994115717239353 -0.98566828532092165549 -0.53621854006463798292 -3.0499024431217662823;-0.65875492839089122565 -2.8886771709558884957 0.09494188044243843938 0.32844744375770673628 0.025225444934387462881 0.28638196889629541353 -0.15762295868816220135 -0.036039076586492871379 -0.079942362412573228503 -0.29643427445189857172 -0.26501793617936908465 -0.03511475149296660464 -1.0066720053268662927 -0.36552417700999173533 -0.25690328332296474834 0.26188484578149240356 -0.83840653645319240805 0.18040351870467802309 -0.26703489322144791096 -0.0071403681878448059181 -0.91065307164831699183 -1.1316434012397078579 1.1193186853739693909 -0.29241452097358960893 0.26400084416542296539;-6.4622963387621963349 -0.4885258507085620816 0.94447652143640836719 -9.6735465749916560441 4.8333629345235724628 -0.26986838460701578768 -4.1419509141875696656 2.8369535606564153518 -2.9258199513313249973 2.6760733737867856696 -5.2522652561226417234 2.1923972100881816694 1.1522029468824013243 -3.2465535382626140581 -3.0905786275888762482 -7.8572568291825222175 1.8945892389511613807 -1.9787556366291567667 -3.6772215849129930021 -0.47814038059215990817 2.9596485214240866313 2.3074047808167130746 1.8317073721514760543 -4.7335978939094074391 4.8720893436818464295;-5.5146415919955540375 0.42933895889047629657 0.76121003350407812071 -0.72369654990332321631 0.34500131454080296134 0.9814055787347074622 -0.99331119492372565993 -0.44513618636880580848 -2.2483088459403544057 1.365780596946540415 -0.66371254884801444973 0.38522155078711878273 0.85963434624910139981 -0.10347731282559793908 2.5386541961189639238 -1.1656969712773115333 -0.32322694629665960075 -0.98787415547753354428 -0.53909054344274376369 -5.7141416291656881299 0.43061629636049358894 4.1297168299044653139 -2.9096917384384903826 -4.0836820822240502693 -2.5682136439935758787;4.3086314845850965938 1.0212614817664924516 0.17641089784019819975 -2.1384945284418934719 0.10944446126100756955 -0.4727953565351936116 -1.0754288283983008956 0.056514605993107244752 -0.51264333076739954098 -0.19906382584183765494 1.1005803087444669952 1.1619551663403377972 1.7736009371488299369 -0.49997099928320332118 1.3652193400068333151 -2.4561232196759372748 0.63021897635652690539 0.89147713866891087342 -0.25199439856824396022 0.58935785554876440884 0.13140252310793068546 1.15001007796384358 -0.90287841090277931588 2.2324416464766492219 0.048121542458570414069;-2.3086752889071462391 15.367057918372752923 -0.90610284057004475411 -0.17998237865148575265 -0.69161017260998136624 1.1924538396360191417 -0.21931289408726967194 -0.15793708818704849106 -1.6192458230500768046 -1.3317618472158727627 -1.7584692936438848232 -3.1656084260529171459 3.0686973645024009372 1.4714376779615301327 -0.8865935100736804797 -0.60459341930878451876 1.5696233759019873055 0.33555678844557840224 1.182707989552543637 -2.2470545475304732896 -1.7720015123775954002 3.671315752973442148 -1.9122296543642445243 1.7833891387750979707 -0.24614526080731574664;-1.3402340695468872855 -1.9856400444211403933 2.2300280875161462291 0.3534045030891880268 1.8906715267484832665 0.25063844702572668499 -1.2407461888677406847 -4.1182969370458817338 1.401474966589260962 -1.7708914342822219545 -0.9952642337411201634 -0.23855988516519827103 0.67548363213130879767 -0.78894776893653051353 -5.3204542825877183532 2.7475809139472100462 0.68408576606931714714 -0.36897332329922771788 0.46897118863037856595 -1.5290554028398211095 1.1866444450383244469 -1.201153776416950425 3.1758595820082442529 0.34170017375839034646 7.7656396089063361998;5.9625099964474284064 7.1884011060244876745 -4.7318311752261754677 5.9930058519537476869 14.468460227329556389 -4.6761625679365801389 -3.8650304372898927063 4.2155894091024874726 10.712149068862061085 6.5800565621523459114 10.313741244576650757 -0.1526560475210977097 -2.8246183092013765759 9.7566727121848977333 -15.285532058280015377 -15.102181553697713312 6.0310289814014845788 19.204534359374939356 6.0905765150042956435 0.4409371081425596528 0.66550510096917592229 -14.729339292395060568 -11.04331345648504481 17.549764307399943419 0.42276040896663985569;2.0034277794368122727 3.1071872078491740155 0.38073017715997575783 -0.33454164582437728725 0.0055973197171968469554 -0.4852369761517226765 -0.64975781331643578387 0.022050271698305035084 -0.93900638277010517463 0.29128086269984077017 0.2045710686822824198 0.091420015408879173879 1.1514737545210551595 0.60120686806267031876 0.52238098444476654958 -0.2301635718446655432 0.90915221675928137302 -0.19076481165191494505 0.29890772387723968384 -0.055986377993229016758 0.90170907858777504806 2.8399465504907461799 -1.5258187305281958324 -3.5414802464497907586 -0.45571811293218789096];

% Layer 3
b3 = 0.10436579677252637299;
LW3_2 = [-0.057157570864001999711 0.042449641290721686071 0.17976875695139740707 -0.037359112347450783298 -0.026172319748478722889 -0.028818148178480523791 0.026157770714488191161 -1.8715597238776440214 0.0064320518008560050374 -0.090015201823648693935 -0.021860493276769636661 0.073710996274852849663 -0.045845617440280227173 0.0034171180801973459647 -1.3227056329219246678];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
