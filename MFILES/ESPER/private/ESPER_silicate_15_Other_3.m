function [Y,Xf,Af] = ESPER_silicate_15_Other_3(X,~,~)
%ESPER_SILICATE_15_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:43.
% 
% [Y] = ESPER_silicate_15_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8801571781914061532;-4.2883489223279704916;4.2132848674799046051;-0.42101699391830621488;-6.7236840473272021512;-4.7147516466305923188;1.4652026334573893251;0.86392802785579336788;0.48357413535934784532;-13.04497256424231999;3.6203049546090673161;-0.90466509947237727651;-0.30036809845859696599;0.25893913288513825677;-0.72231744180686485723;1.3418575001282955217;1.1721804005978191388;0.70212923937748272785;-0.35042395523998898232;0.21065018673348309686;-4.8691062087041663275;3.5428180057882401321;-4.5124166247505694827;-2.1431392622428182548;2.7386835586962772204];
IW1_1 = [1.5911012855494848228 4.2495677711044397284 -0.18560081048321211417 -1.4122759207091080125 1.4998765658811967771 1.2934463981029091784;0.53313538282204042673 -0.50273907297639675029 -6.2254792934017144646 1.0623461574117876172 1.5686014600966751154 -1.6676316508949267092;-3.2237131995768346648 -0.53874983556826272491 -3.32776102832539733 3.4735854358195044078 -2.3997229698926374475 1.7275504411520705705;0.96540828872043971121 0.59357424761725741114 0.95520415541188974373 0.18350283175425913251 2.7020271280953660487 -0.50234227193211034024;0.35939942287702247858 -0.51662912874930366769 -5.5557686871778395599 -1.2588764172585762413 -7.562561227121692653 5.5804509279539420419;0.52320172255213426293 -0.82880248535058564929 -7.5483735322380560717 0.5293282763840491123 1.8193899280031657906 0.31090262575562288561;-1.2851215332550205428 1.4590993957456608321 -0.32753072343279021617 0.25433063384015536235 -1.0504962584475230347 0.30007976333959651694;0.24169189361647061554 -0.9002449050916755402 -0.58492154346908231677 1.1942286997760518386 -0.60702337342492163064 -0.21039187862438155086;1.8641017038422997842 1.01075148168956086 -0.10615168515959973183 -0.94416989257345562692 0.72785113705641690807 0.35000086814310110706;8.9532943210746243068 -6.0248028535645445913 -9.3464169831489218865 2.2662824976820683531 -0.37069872173784002012 0.076661513965976077478;-0.051139199225099955803 -0.25201156934574991952 5.9225220359463790487 -1.6271933515359688904 1.2721410061688911419 -0.32729632116971019151;0.53805857561922187937 -1.2147971082958430866 1.583501788584277481 -0.86613640271882164079 -3.0157735915268575333 0.72231656076536565614;-0.23694124557855961166 0.13984537732902399543 -1.4500049817792144413 1.3081578701757445859 -5.092637540362773052 0.98424405838431550109;-0.51535964142964341139 -0.12414859663002766887 -0.25518104642195965637 0.86076694614168092201 0.51241666989982859182 -2.0654183042683054161;-0.34457922822148329134 -0.044092926344647807857 -0.52699948131839180476 0.42462370012778127837 -0.24175268881711187152 1.2562039810186655941;0.68072684153788620698 -0.70510702829428884009 0.94197170871349256149 -1.7635309563061114524 -7.2607828645802223733 -2.3783206889497696679;0.83831766399037099813 1.075174726889834842 0.5759518418110876059 2.0024933081866422846 2.7816047485646504533 0.4634717562332938412;0.22335224261859251693 0.35746030357113267595 -0.12482460571500023083 0.79064592103455044736 1.2923245676545245253 -1.5103534458264329388;0.19305255995879094799 -0.85304906209552511243 0.58725415624693011463 -0.2844570362615433945 -1.3340696934487714653 0.46013043790102853281;-0.047919772953405125049 -0.078149856017985769308 -0.19428505810861221303 1.425971448204732317 -0.89619873903582458752 1.2802482378303552402;-0.18989953712453913615 -0.37065973241854832665 -4.6874298145930026749 -0.92540089854136908798 -0.061089782624119438881 0.11047978872843902676;0.24043034082278960661 -1.482895788940053361 -3.9571858682066665125 -0.40932973858856974703 1.5001146097222877174 -0.28384594157090836664;-3.54231092410390902 1.9573868090604418235 0.95143149284342687366 -1.7008857964594346068 -0.1641095206566808018 -0.2271089404350299934;-0.19136408645787050808 0.26167717812551444245 1.0103444829499683699 -0.4208330523428520098 0.70354494365488229324 0.85070952553659906492;0.22253635521783321494 -1.331056467236620966 -1.8414547347176692949 -0.94649499597182318311 2.3781067602015917295 0.34042325789748983933];

% Layer 2
b2 = [-38.67861410499527608;7.6136256304439271503;-0.58415692437607480425;1.2373092274367827326;4.9582464391980112239;3.9612910776237963972;-1.1656952836407830087;-2.2770784184786361237;-2.0985241820552564818;8.4196830904097534898;0.10638900781401963713;1.8741757092680564334;-7.3179699439616818779;25.797628129916912343;2.0885502748362410053];
LW2_1 = [-1.7387167701176122758 -0.19305105014195259039 2.0593123637935777381 -1.0431031631605141019 -0.46980189798032134796 0.9545352110026087411 -0.82701918444122601848 2.9656642202372354156 2.1138675324691322821 -0.42387763851844517671 0.4637782276672975379 2.6121765731754993389 -0.13529269632335047535 2.0118927481868298379 7.2761534067818365301 3.8141873055523989322 0.72408244117071773882 -1.0347192911506715163 -7.9960942889923547483 -1.7739707656281522574 0.9437867958505082866 -14.65408728577848585 -1.0260259569862411055 -36.916746961354924395 11.449262158284330582;1.1086993569195933151 5.5488996498366658372 0.55143347446740065276 2.0809974683369336645 1.420170031039327041 -2.4874068161918461151 1.5214295527109820139 3.9845001687663255119 -1.4983227658632303214 -0.94466685395385485702 0.22519365429289220359 3.5259055467362170333 3.2862541821311408441 -0.42217343319785777256 -4.8254586794568146146 1.1792032217966919028 -0.63307787154326711221 -1.7321989393114236577 -7.9352154450051033407 -2.9313025273920048086 -0.70486275683104904211 0.91513893337776353043 0.041812030838536268229 10.102190695009701571 -2.1330730407669853399;-0.068757877398488750909 -1.3081649840052569367 0.9450167943092798728 2.4669793556832306791 0.53998794154879203866 -1.6291990406981371464 -2.3631119627955681217 -0.01930169327426110859 0.015729090314200760287 -0.84023083023880684728 -1.5636209959531963687 2.4652801024514601202 -1.1959037733267217085 2.5130906448145675647 4.8173388495543925103 1.1687394254861738219 0.53975583560587891974 0.34800613069146535405 0.17842222035044774664 -1.2842013409153629766 -2.3771068512842337128 1.0053907160518962272 0.35814312553125360328 -5.1140920391064446093 -0.85654760261167650626;-0.24163745046342957612 -0.91686222470390910111 -0.74758526239998812635 -1.1780427473484968992 -0.063946044476308833149 1.4806241215282192059 -0.64449386798907559726 -0.62352230965263377716 -1.0357622471373366668 -0.072189459079536180686 2.9537044920278847648 0.29170788014405035771 -0.2315390661873026612 0.94460673443554155071 -3.0042485550759532309 0.45947781650759561556 0.09973896202625535945 -0.92690307536093108354 -2.3203173163896262388 5.1051266767604683849 1.6400476070741263346 1.1488792104117804271 -0.45137264971154406057 -0.84592496221360624631 -2.4871639806595173816;-1.4077762487730343111 -3.9111467863306166315 0.8783095137348050363 1.076119196297065761 -1.288582419232028764 -0.42553060013855875665 -1.339377073649828942 2.1555747506058224872 -0.65892592039738029364 4.1808840481081759322 -6.8524539556825683206 2.8960659316179140355 -1.1015952603679146637 -1.9470436977621512487 5.3803442353992698699 1.0473417283422934432 0.16586073679055388097 2.309292138573756592 -4.1391215918024109044 -3.3904334377331828421 -0.71474388782067688197 0.044624603385768076003 0.73155264359970351151 -2.5896840834439065482 2.8559629364894849601;0.69656026002125492891 0.50524914820533062265 -1.3881013682808553966 -1.9448473209460754862 1.2551375530083643817 -1.6538086401499847433 1.2614248986112535089 3.2261717629741064606 -0.3933227796131191778 2.0180234731749728816 0.62376132264439787534 -1.1961321872650150233 -0.027216332700668643962 -1.5383567949989325196 -2.7477596981977425727 -0.31933585927623725498 0.19888789430893416554 1.5005895063885947849 -0.68660400342086613801 -2.5909595206387003863 -0.35754686204788432846 -0.1703250787732562832 0.31771606546900560408 7.4978698472236038342 0.94788739817127054543;0.20822373037684435704 0.071948054576881761979 -0.89671974226256179197 -0.69083170246089531386 0.61572561135071079974 -0.50827563067237624406 0.91966512087899876526 2.4331982645140683985 0.30544581877897214461 1.4357351765995689519 -0.10141316211057971319 -0.51344982957874440999 -0.56938808025737663865 0.32959430507745812733 -1.0682295210367880323 1.2050672344820825277 0.27254253254986093857 -0.73412731413553178328 -0.94361040558974318415 -2.1237421116956416434 -2.0240556795792787881 0.13396063491903961729 0.29778819513251963969 3.5211292355800143383 1.1297577961874503139;0.73078695986448871658 0.9883709964632541034 0.0076398352758770514404 1.755149407102354564 -0.11836678627566525612 0.4785448169329095669 -1.271649032234104082 1.4099896931479714013 -0.85284067335849911284 0.0079071949386305909885 0.88158052288073929237 -0.89890897589400919898 0.60566860413841072663 0.23281650705338438612 -0.58348231132876393623 -0.41820970215495434363 0.51310786577190226065 -2.4884540215828883092 1.0938888861087301407 0.059069759681093042536 -0.3394129934214007438 -0.56490241368723081994 0.74240452179836657898 0.5912721063820040035 1.1527363015482121611;0.97165581089962893557 -1.0453860268943360179 0.083555112572571837992 -0.37401559767534331424 -0.17852841269359365217 0.0080328815251234746142 -0.49297767348690524347 -0.69938442798114697219 -0.24095682095840162407 -0.32797618252404092676 -1.0379869752732706623 -0.91982536298124084606 0.53467807509700204793 0.58198818431870502632 -0.13872144674523750885 0.31513227290430467775 0.43348718473465785994 1.0880515108483357345 2.4180844320205832076 0.16878916179065922565 0.96133530502037123355 -1.9309762059549044899 0.12018473364300788497 -2.4267332676483119869 3.2728585222670258936;-0.53862083104889557639 -0.96623860309059483864 -0.59371417948614224613 0.51267516177552208134 -0.58768907745983844926 0.017205276942763771814 -1.8481781154356498043 0.53787043497232533973 -0.3471730700204401221 0.41816203361583875742 0.77966732656337722762 1.0958856939431256272 -1.2351817675107656935 1.6553354779370392791 -0.050854154667060010031 1.9571938971055964362 1.0680631805242883914 -3.2660031128960707036 -4.602343983881976186 1.1796203046076372267 -0.15034196617429526621 1.872634604484746168 0.16224587159356509969 1.0681531663531804721 -8.2394468239068778814;0.0037136568815334149163 0.77191562576555183828 0.059385233086261389468 0.010391435996908202771 -0.028229425096866867656 0.27697696572307717311 -0.48039709688662701748 0.37029301701944983272 0.046609010734373554352 -0.088946198842067752954 1.1967534610998762368 0.69489302477854708595 0.43432602188427171797 0.22440458135080570967 1.4098081414184391313 0.60916711706829962392 -0.021194198275475507887 0.383410770994820016 -1.4851752275713447915 -1.2254715242213427562 -0.01559742208111568329 0.60105328061587015576 0.17055041540543497414 0.72837431003749553149 0.48222756003864997165;-0.13015753481580255579 -0.96672237610343381142 -0.27105031581250971229 -0.2864969444630102724 -0.075010725556397636615 1.3590003210765291275 -0.6967992767640613927 0.15084503001583587922 -0.81011992634778240419 -0.077971764438198504221 0.53432586072528109877 0.85626864859725959622 0.5791684871752699193 0.8141785023917716968 -3.1942509675084220788 0.57026014161837279559 -0.022628741448147703802 -0.69612152212494426973 -2.9548393359991669271 3.802377419132235925 0.87856190417285751071 0.59806624217445381042 -0.12386179888320283937 0.62427866568457202057 -0.44694625885062627679;-0.67611472305625852641 -0.44842793282523479848 -0.70402518990619855632 -2.0956872655269598305 -0.53900327343871168306 0.80964072360804673067 5.0220246501673768691 -1.3086749864611511018 -0.78041825381993590316 0.51914829320199129548 -0.092166635955025083549 2.6094870258783466888 1.854516047168036641 -0.93736755017246109478 0.44187131241926203007 3.0528412637655359951 2.1293181983840159255 1.3125397593624659187 -2.8559601522094935078 -0.35644148765591449068 1.3351846309718855554 -0.49054157962869476828 0.44301231969041054981 -0.45500526244543637588 1.0072208595983831447;0.54424057867373676345 0.25933787054901463742 3.7459611105757590899 6.6012793410802999006 1.2826689634792747263 -4.3619458530461621137 -7.8410368060400372769 -1.538328972427297936 -8.8986385770422575803 -0.090841806721640272482 -1.7970910423933559308 8.7546819419067638535 -1.7814499912152463867 -5.416956812117416753 4.3473112672389291333 1.2323069107082902374 -1.3952002361365176686 9.6518636209425867634 -5.6883266373210785716 -0.74380289271366306636 -1.246947285802692873 8.5736513306519803734 2.5113368346750677418 17.202807214647609868 -0.48199012813941255473;-1.0055399990569082735 1.0523369051427404752 -0.079375702793998942353 0.39021464906945096951 0.17165002899413389637 -0.025964824174643338917 0.50823480445624735768 0.69326452825999074214 0.25140399827877651928 0.34984500919679223374 1.0678048890815126093 0.90696591837357565247 -0.55199824535241492907 -0.60048374624892109086 0.12756923032248643213 -0.346815936349192111 -0.4446128646781736804 -1.0981962304926229379 -2.3850724725677774352 -0.17213215206566140347 -0.946298430998514295 1.9579890115355347291 -0.11988159547057196386 2.4062845548541997864 -3.3150813933456606541];

% Layer 3
b3 = 9.6560638611046094582;
LW3_2 = [0.28005663626945470623 -0.072067418550215991968 -0.21286801163147595073 -0.2462435133664120368 0.22249074528621190505 0.21020181460697162645 -0.3078002532675400138 10.37327415946875675 -19.222737532559868612 0.21033014503403349438 -0.49405897439921825365 0.43710834556386907179 -0.16788000048162854405 0.11349156377491372016 -19.153053774410718546];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
