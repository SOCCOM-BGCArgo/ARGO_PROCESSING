function [Y,Xf,Af] = ESPER_silicate_12_Atl_1(X,~,~)
%ESPER_SILICATE_12_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_12_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6230579701255130054;-0.15058687884983901206;-2.0711037142509303166;-1.3658230055975870698;-1.932062427889702283;-2.2273790644386055604;3.1056796969275142217;4.8820234956659049885;-0.74265683722421038659;3.6549580798046359398;-0.59108586187292055936;-4.2164657025138749802;-0.073316727313319354775;1.3936872054513833596;2.7504023374299428895;-1.5090752830023728137;-4.28102621116885107;-1.2495869645181822971;2.0099177713813483059;-1.2552399390235875476;1.0995774074120960861;2.6257019120661646561;-1.3750134729951644097;-0.90292699647552687736;-2.4005686383127771144;-2.1315253877281077344;0.7531117329332420729;0.58971260594831320656;-1.1875790719358121361;-1.084524678313838697;-2.4538960245568306462;1.2686644917816349842;2.4773256483477426038;1.058476306084352947;0.34643372424402457677;4.132056599144682707;5.4623904682986861303;2.7928480199324923205;1.0124639417484500026;5.399186022954578057];
IW1_1 = [0.5564915578005419361 -1.0600561598288833487 -0.10557528414516549609 1.1148548913321123521 -2.5783711967268065912 -1.5810389993610181048;0.63684228434610401504 2.4439659202849899344 1.4539013476725584084 -1.112789207916943468 -0.23363521611432283565 -0.87449652933356158968;-0.16451510201671606937 2.8438767561741218337 2.734341653525878435 -1.2883571670508613405 -2.5456213058093548618 0.28506892709543374398;-0.20732501995363919467 -0.80828523754203318585 -0.68169430351892412734 -0.87499832880119954304 -1.1310250838648616689 -0.33369884255540477325;0.019155556540931054088 -1.2737228967781566435 2.5530643081471762201 0.31515533416285762547 -2.4902659514236820115 1.2281968586121350118;-0.45584834187012035489 1.0316556739052997749 0.13721694975264553396 -1.1329381000654892286 1.9911267395484855136 1.7369820672031541786;-1.9628818516966042296 2.1412060719830678934 0.86829904801663448932 -2.4536418555809613729 0.87765376998537281139 1.0963066855123719812;-0.056494015129857577673 1.0268777476431611984 -2.6425434751432779201 -0.25489084700691300167 -1.2839910980899464921 -0.35836816968123408333;0.92863449652697205305 -0.63659898854600949214 -1.7423266920935167601 2.6614777762513721626 -1.1580999007114891608 0.5808600336250665519;-1.2854112320642079315 1.3635929453087505259 4.0842861499573128725 0.62323301767654948335 -1.2061501784001946724 5.3769501253332014912;-0.29335483372450105177 1.0257945707986848571 0.82545058469243859367 -1.4249555015552242132 -0.034957529476694948478 -0.51427412475871714381;0.61539065028927553147 -0.27258542274513436476 0.36904799768191187681 -0.014749674394884323969 7.0020047486767653666 -1.1020632732030042344;-0.20935138092616223382 0.79126312417754718354 0.68119411892975201273 -1.7728867280095628178 2.9322053584488343425 -0.38382766535418016973;-0.34884796968227199665 -1.855993607007650148 0.38647379659837449717 0.72731077141259548036 -3.6796923691165823733 0.93173600561413039145;-1.7433193591846689596 -0.38037491293627828659 -0.38778200447036836884 -0.013908993250948156056 1.5255388364961930403 0.10242263560316140769;0.067655499396655285893 1.665502752165652911 0.94727512573061933843 -0.56037402754057186183 0.69429774588838022442 0.87100454906861890514;0.59968263981758918035 -0.30581114885289550909 0.39049432247267157337 0.2840674946715741056 7.6616207258138020464 -1.1622753560592904432;-0.35920284278644837306 -0.41771954526188215251 2.0308880429130615752 -3.0359713482689727471 0.69089969499899861471 1.7567018028843581767;1.9788156993044179188 1.61113793413684947 -0.66270397199857700166 -2.3878773985129120305 -0.8959677532625049956 0.55822220657929544352;-0.86627644603323938899 0.57664042469102649857 1.7497924340346173722 -2.7536565235710956934 3.9617891840716348284 -0.49055182543490005731;0.44583679542555920694 1.7969905821178797645 0.62411603072502985778 -0.54954298725778316648 -1.8632606163238916164 1.892259607483522732;-0.5264427042941574042 0.78517302500293195688 1.8073922310089534093 -0.21798810949523717007 -1.8555930086907830301 -2.7082923330419306218;0.83680881281182617482 -0.32912045081962298942 -2.2674872588092815917 2.6354627905225127549 3.0174754429279935231 3.5525114949012595034;-0.41059825860232185279 0.60655322589438509517 0.52090124373477630915 0.13028307219143855922 1.7319232634233343582 -1.3503397920117481412;2.5243114171171083804 0.064023406872758079067 0.50036444112513012161 -0.55202692292742605584 3.7178747161274663391 -0.34737164036801465583;0.058858985436579504269 -1.3978229834248083741 -2.6282635152629132413 0.93427581156403527451 -1.553200613868637614 0.23922859001141316693;0.45741132052989824652 0.6962477241274123152 -1.5954768948911384197 0.44801522960844553101 -0.099765428198869965382 -2.1982723195162519048;0.51973753436314995557 -1.1729583082595216315 -0.87587324609873118408 -0.19852182059947565129 -1.752569019288147123 1.3210569434033723191;-0.38586451395952126031 0.46122424618348628611 0.44522515967198111886 -0.33283527174109994728 1.5470393860757309934 -1.1305396487135612738;-1.6106416672616663543 2.5847772583829491388 -1.0455847148735306629 0.72192346419193909046 -1.3778833934672107819 -4.3245281541788971325;0.071309968452413996509 -1.3647047606141735621 1.9546395578094590828 0.61091206181457369251 -2.6631627396439201405 0.33633571936675310532;1.6236934140531122939 0.70791709657239665354 1.6838969294427514889 1.5344049735990428207 0.35723111074972263568 0.22117554844269482484;-0.8047654628827882739 2.6115576895186354278 -3.4195612835270745578 0.8946693712597189041 -0.94913722142758416567 -3.2047712795152589749;0.93197339041279358973 -0.6812207200570526977 0.10353361459007832945 -0.89886881592037326527 -3.7980332389428683726 -1.2629903546327370112;0.50341701520330461861 0.95836799867687483268 -1.8036453183651226517 0.35351302496768516326 0.61362112103994381762 -2.1780303999952042027;-0.10958433908424712599 0.6995913118200840497 0.67033777794796844951 -1.8993927197086282188 -3.2185151335051189747 -0.58331470930586570844;3.7171239508972151455 -1.515765884053539736 2.9907824652988153069 6.1053441481751979936 2.5427646506571517371 -2.2823715810940212734;0.34883678806624929258 2.7046749298576870935 -1.2503485485995546878 -4.5662001943586227881 1.7364578856891923486 -0.84461028268169002775;0.40607120816042552303 -0.79468231208550865752 -0.73227097901785243028 0.98079689748459952803 -0.79760491404881828092 0.78984711581213618015;-2.0905879681439176743 -3.6228757917696357005 1.0969942603511542156 0.40647717945014250063 -0.025899740928258176142 -0.74678964786232970852];

% Layer 2
b2 = -2.2783158536851448872;
LW2_1 = [2.3374134862186806139 -0.13461994972710231155 -0.091886079789810601315 0.44988618883801489989 4.0263873131794518656 2.2234507823463305343 0.47692853631990506091 2.4319895456555347124 4.5664187067022039557 0.03670660356433005922 1.6577078559882689746 -2.859635340381252 -9.2624722164269641667 -0.28440254425684358131 -2.2580568457724727871 0.40032713176754092244 2.5991028537941542886 0.06787048901291371783 0.13386610643888069427 4.2621457464680840843 -0.24191095238793908218 0.34437614663621135547 0.19462856260149438703 -4.1784303095194452737 0.094721168610379019581 -0.42013648428155442316 0.96058242850807740165 -1.827321591441706472 5.0129325943114704245 -0.041774004530631070331 -8.4020605415444240549 0.10016291555774681221 -0.049202190258664207922 -0.32876147673667427407 -0.87580716716953033174 7.9210927325286419887 -0.35836225208179606216 -0.048896053152133862885 3.9910743170658591339 -2.3004986219207714804];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
