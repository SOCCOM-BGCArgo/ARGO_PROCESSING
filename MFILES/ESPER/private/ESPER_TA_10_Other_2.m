function [Y,Xf,Af] = ESPER_TA_10_Other_2(X,~,~)
%ESPER_TA_10_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.50065719994155355455;-2.481142450827048318;1.9843014596633514746;-1.4193716361007102655;-0.30437785609193201974;-2.6082163584402562329;1.0096926997254227487;-0.25852885012301785039;-0.49078084826691342757;-0.14964230278765563997;0.5922035672288997743;-0.49680445369889947305;-1.5897046278576965062;-0.84187898705221098083;0.083969179994192857941;-0.028013495705012800979;0.31880842519265989443;-0.22459590262161049923;-0.4593017749310626674;0.65659986609338538699];
IW1_1 = [0.47844795703467429826 -0.53462181492880844758 -1.105799095162542045 0.40109566933771645392 -0.75975769430781581182 0.42232708012645836515 -0.87317483109828786247;1.707406240682248999 1.1095356791131603114 2.3517775832875957853 0.32256595558365674936 0.66325317224365643032 -1.5327817995940029583 -0.99900866297565482643;-0.64133799446140393741 3.2672949411917597828 -0.6004349013960547099 -0.82085867299073234093 -0.046147666720289262643 1.0006176763759175863 -0.57951050750263899403;1.4189346347293030348 -0.086268976261750673906 2.1172215582612587959 0.66319771214201173049 1.2444504974497341276 -1.0570845435927427314 -1.2396508761410247601;0.43951510157573259185 -0.41405564547554041255 0.75604392380938501006 -0.38758419880145783543 6.3232286281288709873 -1.3111693883082922163 -1.4910949028502638036;1.9899536799373716001 1.9675679678457405064 2.8619111806345411964 0.34126740250060300097 1.3030951398650993944 -1.7783629723724878602 -0.2721248874931500028;-0.072791896383499171685 0.1650272489541756149 0.4299817852553901032 0.86150785001475060909 -1.5443981357934541965 0.79155540978314753442 0.83077058081008703372;-0.10370575572181360557 0.0092195154049666584728 -1.4764361444519185085 0.81605193334947978556 -1.2546889668617748903 -0.82860491522697876654 0.59993112062669651241;0.22118177743438277583 -0.13036178195932726642 0.0097785216868341295893 -0.009349311583518728902 1.2180201874426921371 -0.075419691103321195857 0.45829054972789257105;0.91291664768051172807 -0.18017468511658782382 -0.40948712836727724218 -0.50355406216326337177 -0.45457366867426729495 -0.096225616154793899848 0.1692625947994846336;0.48668733142928854996 1.2830178416888149417 -2.2780171145909031694 0.82393237096563176625 -0.78213238651344485497 0.34242073100803382957 -1.026765126074401957;0.21234985360057045956 -0.046621398055072399425 -0.44647518252972345776 -0.89452091047299686632 1.4920101190030088389 1.0977441988763450009 -0.34008758176141395957;0.16167522557145028173 -0.17689864723893639065 -3.2446234754218479246 0.82039029722284084745 0.44349191945361243761 -0.05977360733553854083 -1.510704985284849311;-1.111420093710669299 -0.055767950281001600621 -0.84685257938041280656 -0.62383997405771107747 0.36747237155993223157 1.0378194019689204186 -0.41282423716719635065;0.64275221433713491948 -0.24053021735595533914 -0.26801371471999047014 -0.71825967969620718723 -0.86989493373098747409 -0.28044793811399465477 0.26237307289732159088;0.6073345469054798329 -0.27041482558247303958 -0.070960721928775741252 -0.5787597269166558922 -0.32382644762265783145 -0.057630907774142141331 0.35880700435523604774;0.24391488028905169982 -0.47555271142346167146 -1.2440726318277119944 0.37097837334505595619 1.8050182576316138316 -0.68165897822149068563 -0.62325656069273360771;-0.28005488736458095111 -0.30665095673836878509 -1.728258128702954588 -1.0099501675194388906 -7.4188156514351311088 1.4647053339667279737 2.2942063306795104083;-0.14281360899911810236 0.56239268215864512968 0.27645577693278078346 0.5034391391020517359 -3.6455653289593725752 -1.6625974949375121881 2.6448067154158727554;-0.9097620859271497995 -0.24853278511381551863 0.83981907835669278306 -0.098430540166218549736 -0.44263190129201612777 -0.40896175146900271002 0.32612067355183843587];

% Layer 2
b2 = [0.21663503419261237459;0.012218958499794688524;-4.4887284253051928928;-1.8169132974564699001;6.3701423881023977458;0.81531861816989570357;-2.1206151178884202757;0.32039267721431252678;1.9879926706532979885;-1.8608903385366242222;-1.3958910356788694074;-0.60490574932646412609;-1.0026954104760148478;1.8998768522928093372;0.3934653401053049282;-0.2539058083766137508;0.52067789187749524693;1.1420047346253754394;0.78308826365992090235;-1.8127410000235446574];
LW2_1 = [0.92623621713080328544 0.50184237711394874548 -0.55297324069906406141 0.050484654585098612256 -0.17866414668597660476 -0.29845179483886796756 0.11649428346075144103 -0.39830351779830452941 1.0585830535614495496 -0.23582273327707103938 -0.25245116518823768059 0.33614897550990768815 -0.37245729572532210172 -0.5746211180290766718 0.08730441577169133216 -2.0002536017058289985 -1.6153769329548879341 0.49029949377658693654 -0.46483469099939078717 -0.7852134684415117416;0.38031865554299654208 0.20309164690815920129 -0.04035987699039563642 0.013396871494267000025 -1.2496058535350231811 -0.72323884826056772379 -0.69738942530445913182 -1.3821663465335634058 1.1715412855511222467 2.7222662991585022674 -0.43081883028023498783 0.25860420426221814028 -0.37861888380573516244 -0.27471275064401667887 -0.29536052599353368464 -2.1919916860065900011 0.82917870730429243942 -0.98433477586148532268 0.83324694571323865144 1.5962684098976536173;0.088246325617508919459 1.1542949383695477739 -0.040648967263741959954 0.07726827178013499775 -0.26766065383831455504 -1.4276574095606036074 0.042452712071311966835 -0.48525417768265061147 0.13477242866291919143 1.1093586868701774684 -0.41367886268499687308 0.24501854353976335044 -0.15130146229766988641 -1.2259853446942958755 0.81374068404349864103 -4.8128547622854238597 -0.085211989274459443156 0.50756459560710431855 -4.4970597415175754819 -1.8197339579648013075;2.6195813461965880009 0.92603645588080862883 -3.6044365902339126073 -0.16174109465493594073 0.16719867679792646542 -1.9681494254108600206 -0.89185043287652687738 -4.6395962520362186154 0.62756235191483222824 -1.9099054731684315112 -1.3157944163789940806 -3.302671610823944004 -0.56433459052327850092 -1.0299486064331206947 1.3537559601276218935 1.3851412063712333911 -1.0424369554453256637 -0.25876748049242687122 -1.4483713047314137334 2.5261529713457293589;0.79012456876307435305 2.1454843240946348537 -4.2427724453147925843 -0.21674801428644269174 -0.930760284208329014 -2.8112609516784243802 -1.1592435945785786178 0.28531632541908752421 6.3617269164736862663 2.4432458800770677776 0.4459106024824244785 0.39277285128991340502 -1.8304733681787928035 0.23751967513344818261 1.7317532329544544911 -3.1207447690184566547 0.68595831660353723258 -1.1167005952801569713 -1.2533556014515905286 1.9761088627429959086;-1.5017334512872255736 3.2532450834121346972 -0.94453994605154256714 -3.2034470361479616685 -0.033840193960715567179 -2.2810053113108401668 0.25015375011692608798 0.54967743634317556278 -0.26212915525299440578 -6.5266733229152888995 0.44686453380638851973 0.88859569450276132407 -0.46469809072358225777 -2.2600604403557911226 -1.5345233426326658766 6.5299508963076569046 2.2246126011265694444 0.56329700364424917236 0.32671193872725284857 -2.2010237686011056013;0.11758353088348948157 -0.29461125700348245182 1.1020507374305943404 2.8567366316298397066 0.39523480702398472442 -1.2446749778509169637 1.0238676183673911524 -0.61678212273297472468 1.052177075471945944 -0.51684713038449636713 1.5884727982771353894 1.1725161431732713524 0.092074619525772366524 1.0027518201030636291 2.9862168835665050537 -0.48548759355097914625 2.2928367722785067961 -0.82992909730341790642 2.1772225905794408973 1.9443582571085646915;-1.4579479793481180394 -2.9361981814263731216 0.032577518593777193834 -2.040865070161935968 2.1382448438972789795 3.1783232672253758366 2.6167997801434546012 4.4641482724740138011 -1.137576278525705753 -0.52520073214062579225 0.3218992482212515438 -0.2706110603249564095 0.082798317689040848433 -0.9555589466972339574 0.91084434037012296237 -1.2636435616460022224 1.9296908558943590695 1.9482574278449551475 -2.44833866410421086 0.17551670527081050799;-2.1334943090790337017 -2.6639829805035772914 0.50500437814883891718 1.849079024255455117 1.1815315066145428702 0.80056438120496109523 -0.14434279682471692907 1.9669513524268720239 -3.6711832317592656416 -1.9611884420126635131 -0.65155291769615153452 0.18264212335084997751 0.85784915412349660446 -1.2093477505635006342 2.6119688628698507493 -1.0471053275407744554 -0.38165868343969650001 1.9933411065493995551 0.4804855348092063605 -1.371969104293308428;0.6448741425215901435 2.4215535215486809761 -0.44799491442649791439 -0.80041117377072934502 -0.11200248614998820074 -1.1914963551847432832 1.2176663140587413725 -2.3143822992051483745 -1.1472012235942572467 -0.86930854648729338763 0.022531591352596601341 -0.57815267066903397453 0.0058328908384773997878 -0.3799708553467846528 -0.40516825686745044921 -0.25662282541361158827 -0.4898614282590513791 0.23810539356275087219 0.0072549687050183463144 -0.61327612854508928297;-0.32183008848579353067 3.822165216617195771 -0.20087229242640142202 -2.0109775090095953765 0.47531077152537482 -1.0962354137337642079 0.75379448721688513402 -0.54543790135760916726 -0.86520649983135977656 -0.37256504606628504384 -0.7736151117556466783 0.50641829469904664496 0.79858563350098421552 -0.33819501804969231973 -1.4111230683091797733 0.35611426499022735825 1.2297728486380741231 0.94364647360447051483 0.89258867604720382172 -0.86644874678154726322;0.856052562059358646 1.8527423813366359351 -0.36691119412227313212 -0.51743044615966948818 -0.16283826839495241234 -0.92250457384791628712 0.71648559097333464063 -1.5876142394609711328 0.55994985586620049656 0.13843492434617085673 -0.10138998508810999344 -0.33978758058218649918 -0.079859732543306846675 -0.31498857643866357003 0.085151451921672449696 -1.9193621117042840574 -1.0137636285982840612 0.2828456554509545251 -0.17780432213885033477 -0.33904348764641895064;0.31949346532931433007 -2.5424954074990209207 0.52790631952417199635 1.3475749665284295631 -1.1317532843003230703 -0.039102852261174311788 0.041742405283779385194 -1.2851488753252888753 -0.50314215235947257199 -3.1412245286955697843 -0.50659317480683674351 1.2027048097927051096 0.29780968248146982846 -1.1219067429790996471 4.0521910975437673841 -3.9700568092260293263 -0.37629521478823924063 1.5027642713744417957 -1.3047093567085392696 -4.4592507306922612997;0.44060789679495776516 0.79566214275099478304 -0.085046103820842558485 -0.61437411380641870906 -0.51815415742751225192 -0.045481371366869673134 -0.98156951012403004242 -0.062072089219354087408 1.0232197814308443551 -0.36018981778764191937 -0.14966778918037756951 1.0756694783682310135 -0.24102011624089630937 -0.65016969694757631437 1.4185423805496080174 -1.7145859276708672603 -0.80350645409513932194 -0.35102026605140912441 1.1970467197344032417 0.32636143921251731248;-0.010267407448972844242 -0.4458667103958074418 -0.52761555961554928995 -1.0446770423444267095 -1.0035942152650811909 0.94288944366459026547 -1.0927395232889614007 0.87511110697251381918 -0.0093536402198442850087 -0.1353274007363274023 -0.065237763642140150777 0.39140471560348294444 -1.185541984815654093 0.74801543132777004175 1.0182721057841293 0.89034489008844119873 0.75495089890608857441 -0.22131004104999096871 0.19823149643648713125 0.47612986402886720017;0.093144658864612636662 0.2396261526572639744 -0.035117610484015904238 -0.18316877092842409613 -0.080770536258603864432 -0.089321159626335730475 -0.13370052798881287837 -0.10281302235369309261 -0.18277736746066361451 -0.2517733248342521879 0.0039713549862489105208 0.087171098414352971018 -0.093585641663535279466 -0.10991619376023449572 0.24789890096508107598 -0.13283051235243950594 -0.043953442317987478916 0.022014190456219648317 -0.030864259562076109406 -0.16829440124255329314;0.54605514095192875246 0.6751959448609986536 0.18479477875298189193 0.24679765082413307464 0.10613875275821364752 -0.29427881711232589668 -0.7111053053835793003 1.7006329767886769755 -0.9325710736955509228 1.4483899640023774058 0.31074392419509383467 0.75851992845371818408 0.6072486122117617402 -0.13071379158430893042 -3.0433945258372707698 4.4519841666903881006 -1.4340433019446887641 0.011505688526834055574 0.21326451727790443624 2.0947192824204585726;0.72600532572304188328 1.2362817860450263652 -0.36652104220107045718 -1.375975735306770753 -0.49757893703828282028 -1.0422897044171224312 -0.87667508168769092691 0.52582123370921607375 2.1795063630339108762 3.5032556704960491345 0.26936613380848251076 -0.033653294138150838255 -0.87783917838237734976 -0.77878503126254450262 -2.1212196925345687681 -3.8422035704801729139 0.071105861594583388841 0.087805751891642053186 -0.78171598524058705237 1.3679697192655697613;-2.0041814899018093321 0.19731136949400676639 -1.9108845010051005442 -0.032595692702311052091 -0.71198755357096787932 -0.74465246535104878678 -0.74899980209936012354 0.37079895051367744996 -0.79905759227505723796 -2.1438678479123001175 -0.54198460121224323327 1.3944342606558093323 -1.7719141339345847452 -1.1284737069461401315 0.54021181615051383496 1.5990518075364326123 1.9989771467685049089 0.72812257908476596402 -0.15972008033655121784 -1.6391431084708771859;0.11822616226222648628 0.99017125356413149273 0.36458961285844360134 0.67501303946241464349 -0.16541338806825622854 -1.2424400183531190134 0.4081696077158153968 1.9970905272846681822 1.3143464949101877348 0.72190446364943083868 0.1728091786519793116 -0.73669884413443809112 -1.7735795129048390617 1.3109615090228385892 1.800825449987008664 -0.32138490397165381252 -0.49672174343999908608 0.074787634681450096408 0.084487796806555215401 2.6970151876334180763];

% Layer 3
b3 = 0.71911426879225426312;
LW3_2 = [-0.73169941132547322571 -0.22523185391578354198 0.18020485331443336641 -0.021458540633221442201 0.19329635337835981979 0.092868210934551137514 0.057499255026435831806 0.04689745164151810225 -0.070947471959365113192 -1.2592146695277510737 1.2340346714004948314 2.1647153420705307347 0.049699591690733707638 0.60752579559575425883 0.15822481673245450406 -2.7798097243353070418 -0.13112202316234994326 -0.20013801530113067839 0.063947523105387107933 -0.29625662045974082703];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
