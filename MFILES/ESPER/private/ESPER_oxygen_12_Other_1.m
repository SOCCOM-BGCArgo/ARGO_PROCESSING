function [Y,Xf,Af] = ESPER_oxygen_12_Other_1(X,~,~)
%ESPER_OXYGEN_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.20656809297729566977;0.097400832568297707192;2.2240773723450515398;5.7272083918678076131;0.30277217772851833244;-6.6353327076055270695;0.64606285016020403855;0.4215134369485873389;0.20035874483711119121;-0.46456727775488282361;1.7878965520462231087;-13.127171289139946353;-1.1458231732523060931;-2.7730761661241518645;2.8512943082520179061;2.931827718454685261;-15.495154051748128765;-2.352773905724302228;4.2938910190264572009;-16.345714789433916536;0.075023077762348233666;1.9184554988741744364;2.9738861378419327863;-2.0191449981830045246;-0.43342681532586579962;-2.0275505000027274072;-0.93174171131275029811;7.1622496291605335372;-2.0243379036357715961;-6.438011063455376437;2.4061186976434938423;-1.0704382073450471324;1.0304940435973231061;-6.3304040830747494439;-1.164522041938135688;-0.42427016386032578854;-8.4500075603644848599;1.1542324417731684161;-7.6170767315351817217;-4.2035659036808059597];
IW1_1 = [0.28604370409434637379 -0.050343948631038713815 -0.11318356292618093895 0.97174972177100416015 -3.1387388070770514403 0.027877350175150823058;-1.1454529833965834129 -2.4794436941279140996 -1.106396132108721897 -0.73816022745033882391 -1.7788400226047762498 0.77337472018059616463;0.25040023150385304351 -3.4191044635144165476 6.4184665904986681895 -3.4745205290945935239 6.3978265314306170808 -7.9015162101285820739;-10.848047691884211474 4.5540543304444955908 -0.39216621387177980074 -0.2262990666634991932 3.0453170509882845352 0.50468007063346997931;2.947979788974098625 1.5964342538538907057 -1.4265641421440053982 0.43361458968944505132 -4.6660810351337858037 -0.12571590850746741652;1.8569677526521612965 0.41855016273934131377 2.4431744140835012224 -3.5753425270747940523 7.0994631675323569553 -5.808432077181238995;-0.05194088241717816079 0.58810903705292705279 3.7840914942100272178 -3.892517997725117862 6.2249309027128436611 -0.30348835525319672879;-0.0070890410896698981616 0.58434381097165699614 3.6871211062882425225 -3.9641434381007862875 -0.024432608521466395862 0.15770319669393123574;-0.74882483997978188661 0.80688113645883408065 0.82936919095599515028 0.90215535569935989546 0.28979486098584406051 -0.19723901756294279219;-1.8859254370839484416 0.66495356305123431984 -2.2750609799308625369 1.1030079382438824354 3.8304557489694994743 -1.3433564750236135499;-0.44734534930388936136 0.26640037786888115523 -1.0574331975362571967 1.8650333842943473961 -4.2175173334298774463 1.2371332659372167306;-0.19540758368970728709 -0.59659289650162761198 0.33029991824471266471 -9.1266107122207618119 3.1090226184623621641 -4.9932248744015552688;-1.2514690949565909772 0.32512418772317697169 1.1942704312976821779 -0.5385880752971949903 0.27504822985154980808 0.47501210250507236443;-0.6103703816240119151 0.78982908882696722941 2.3944668621959412924 -1.947493411334368707 7.3345527488624009393 1.3105814244524112144;1.1518415979257488058 1.7957021561753758743 -3.9799135907337608309 5.0000151962732504174 6.9821441840029629944 -1.7007870586776014932;2.9909943528580149597 -2.1988020057555877074 -1.0468098876760056903 -1.125829219089444555 -5.8230730313451015689 -1.4914859147218637592;0.0055107517189447296352 -0.22114231701202383129 -2.1969763381615465825 -12.104595910172054829 2.6009713921075561238 -3.4691991367436902927;4.2752187454350680795 1.9656143810297466157 -4.6402894807646886122 -0.84191982325359349115 3.0349010538366467671 1.4104473618118644751;0.48306960003630117217 0.086441505213222899484 -4.6847590291766998405 3.1827588157834649785 5.2192180484391661466 -0.099922940896143980227;-3.907440979067860809 -2.7037967699701948021 -18.080288514558535695 1.2342788408834985958 5.5853135554193960033 -9.3871370344902729244;-0.39348899488549232695 1.4335725457291539353 -0.99965535889242829182 -2.2144014691135316397 -5.4498137461383748814 -2.4429164455243075338;0.48781107967980924522 1.2902860746653241897 -1.2192188240136943023 0.029755525997732228116 -0.80325699920718940383 0.18883104683607776497;0.96329768215758881933 7.398861790503349134 12.148404537005667692 -5.277767548930454744 33.801527731840209867 4.3584012501116689009;2.2474410473087949036 -0.16357724493315076164 1.314731799822080438 -0.90404030305169003068 -1.3614272572310746057 -4.3183963028513092652;0.14007134670749046834 0.46773456874786828452 -0.6284498679654954012 0.96522303604995274284 -3.4217343953372880705 -1.6656914689692072784;-0.57190407173567847643 -0.90851429041797659991 3.872845092181924187 -3.3999687743654858352 -0.65628601359728111486 0.7871937383346753192;0.0073296126914568710334 0.12678580072572587234 -1.1612465546619235024 -0.14420866654468031398 2.9756587355570727205 -2.1341105457579190308;0.40870133478623538181 0.50478607412440190672 -0.7832700639871502668 3.0098142054056102879 -3.4866698685486765541 4.2007826856201626597;-0.50460407241299809478 -1.2046299267348148376 1.1658314409568655279 -0.14009219674678163869 0.81579945218197291723 -0.1019795907892257214;0.26231389931976295538 0.028998949915114140274 2.4748966882224312513 2.401357726662096681 -2.6542616417660722661 -7.8739218753831847764;1.0502214709636297219 1.0783488748299774329 3.0249565044684287862 -2.6301358481543655188 9.8884600528271970887 6.5073720423170033911;0.05730282345867367122 -0.17138985731103698051 -3.369199369188463411 -0.26124117502618832143 -2.008437322382129242 2.7324035963969288687;-0.05779301639147480657 0.16433085797174071252 3.1133939973768050002 0.21206865819356607306 2.1936783768240788461 -2.5503145102252018361;0.20864493101868089586 0.036524032897558081356 2.5549450185292550408 2.7983330276229523292 -2.869469253141279097 -8.0118229199832402543;0.4641109854626743747 -0.80590111617419712964 0.28958261854955963388 0.42797602323904099242 -4.0778493807629478951 -1.4727826695417869374;0.16998766326899233947 -0.22467635925411572062 -0.98987023373396243464 -1.157647786009924129 -4.4241169425366546619 0.92086193149369865996;-1.0652741295785417286 16.37706969263687995 4.1840037755643457729 6.2698730186745521564 -18.164710859142058297 -7.8563830963204130953;-0.47933825682634995102 0.83321234056617654584 -0.27677740483427987206 -0.60095971001695724922 4.1621323953018203312 1.6443683770485257867;4.0338400372538378846 5.8598279285020380414 1.4803038046433383279 0.038850266402625219242 -11.723932417059707234 3.2949292147053648172;-0.97369369915860437548 0.60274628800209217871 5.16535500822230631 -2.4211221765704906694 -1.580638279343775876 3.8661488012774793965];

% Layer 2
b2 = -0.37847418140663047215;
LW2_1 = [-1.0723670954024051571 0.11136292047464863009 -0.044718852771202390051 -0.058417091218946969045 0.15178794840428755375 0.13508058662847316489 0.6008207455139740194 -0.57034693730161079017 -0.61694512726699057836 0.13210745638005236269 0.61501184178537249281 -0.37273084422719804376 0.62485141615324446551 0.31442589543942711661 -0.0776065642231931474 0.14722996431299914533 0.26485643673129644071 0.062675424633380383277 0.21141898095211497655 0.055671385176350333956 -0.073545316599569185434 -6.6733778772332197349 -0.020136548049110785524 0.1182535323631058316 0.97577575025713014778 -0.24493781131843145316 -0.6786144800589921644 -0.61828133971859966511 -7.9181744132549241044 5.9976760089730962733 -0.078612464496082584686 -2.7547881755759857647 -3.1884311650203236432 -5.9614166989423651444 6.1760919495201918039 -0.75881002341967362934 0.019709697356182380445 5.6723573142748300313 0.19111416640378137144 0.11752856343014556062];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
