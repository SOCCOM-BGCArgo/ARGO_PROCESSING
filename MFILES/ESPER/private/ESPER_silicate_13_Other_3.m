function [Y,Xf,Af] = ESPER_silicate_13_Other_3(X,~,~)
%ESPER_SILICATE_13_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_13_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.5927560375029905515;0.82318652467767439163;-1.7345146758310254764;-0.22996461153848396508;0.55236133604481796322;-5.8682437645743599219;4.5209307434779937296;0.23118534818882047199;-8.5653494628914419451;0.2699514584583276311;1.1206587131302072624;0.67638787589092586039;0.62233481016641245542;-0.57689745695660132885;0.042159410176192492481;-0.47800199217136718488;-0.83995771840867439195;-0.83208056086982629118;-3.0688550032897041753;-1.056643341344764897;-1.3335345405413738806;0.72753562865103360568;-3.2528200376444211805;1.1113651809906390788;-3.9232470543726587486];
IW1_1 = [-0.25954922826747517384 0.20323510937471650495 -1.3482520429795914474 -0.37849183495298632796 -1.567183094455665282 -0.0021423452949619128938 0.61984217696572774248;-1.2324266766838649634 -0.6611428065005189314 1.67183131615505709 -1.197302360677494848 -1.1256323243991468441 -0.140506540935473212 -1.6115899153650359299;1.0987752392711542804 0.10710451819512938065 -2.0048193359445232176 1.2262093651381309467 3.3532223775986094161 -0.66450555730891147643 -0.17015313216520469575;-0.0070132888308327883189 -0.050977547520531671377 -0.74673488065244042478 0.81077992028738632424 2.8645267851552960181 0.27882903198057817917 -0.30106091990826755467;-0.085436709864944934689 -0.022517772715931083649 0.021953051234325334645 0.15408863128433372691 0.87250372032435963288 0.24746035604472740865 0.82450481760023786038;-0.91447802847979275942 -0.87126475249182067095 -4.9862680575172948494 -0.94359658674901458753 -2.281329015204685895 -0.22946410291993024622 0.6276985125360796669;-0.32868318447849076414 0.41979031247497888835 3.1112583257146373406 0.95556546873873771109 7.0158644304554265148 -0.98004841252598529078 -1.198393681521023213;0.60860365157681961534 0.36730553044856645295 1.1974572095932431992 0.20645307325084147343 -0.20311762942115410557 0.34648702425052613219 -0.88811607484314192273;7.5514014054351701333 -5.7686156115875935058 -0.99246439403672681578 -0.83040391466102525531 0.72320218562621674252 1.2220437596295083971 -0.74116644259582420418;0.79709631668116975867 0.22222372059645956188 1.0291708087564526153 0.45769192295178201535 0.10936677500683204822 -0.050923585043409783091 -1.2827919112109540389;-0.54465858832040092707 -0.22977319357887435181 1.6387868232768214583 -0.77478846276510404678 -0.16713053263585803121 0.055869036823341509945 1.2575439825733483179;0.64791419122547544429 -1.7040044666869911261 4.4288366945881874059 -0.8594869926437114227 -0.81982779811729322716 -0.37446318102269421368 0.94704002002326059806;1.0506418228353757716 -0.25986353301496528667 1.1144714252378804531 -0.28206783807924373786 -0.80670247893667179628 -0.69667146658548939619 0.96747731838347050815;-1.0016937789481150656 1.2910130943922042412 0.072835402988342942687 0.30458028044698204351 0.080770314244640900592 0.79832558560575272999 -0.58554389514634319625;-0.33284241993025093231 0.19361477181484365584 0.065623222445785375778 1.1564656707511036249 2.7507765514306417032 0.27394590897678550157 0.0096156015790020733791;-0.28552105657944798489 -0.13414039509439973363 1.5402860041535193503 -1.5712225250428668577 -4.3555493080057026134 -0.57534524353070981562 1.7661821596334585927;-0.27370374285802429037 0.0057108337209784802713 -0.98630900192331849574 -1.332218218250882158 -0.11477390766506459507 -0.55896739018380892094 -1.5473930542990501635;-0.42882400043585622296 -0.28105950856569528185 -0.9739734002320843409 -0.53561091849182573821 -0.18670591503762692942 -0.61824239578729989208 -0.16726126898860207981;0.10234262702694500724 0.049977124660857470684 0.98052956840484195578 -3.4111583344617768532 5.117449224722443013 -0.081360940645113247194 1.3073346259369753586;-0.60455755984726078367 0.33679835879998948345 0.29018382219693339419 1.2948720452636826028 2.1949577344008215363 0.41371783757118990588 2.3838220731701187383;-0.13959848656867920869 0.34575881925336077183 1.5490500278471492912 1.0313809239115256933 -1.3465364093348684005 0.43501085212878592978 0.29311270500438785236;1.1769760644690436813 -1.0471559680798006031 0.13884405617982101266 -0.14067582983999310509 -0.26708192096018634754 -1.0413754281113960509 0.9375638147834064462;-0.034235902166669072988 -0.11920879161228950527 0.36519287941962758071 -3.1698756653611437351 -0.52801789237438934155 -1.0869764064725742081 -0.23249179062074989965;0.53373016575144482943 -0.29584422681774913411 -0.75291092241684576258 -0.17081697659865197059 -0.15205821164255564626 -0.094357606303823934879 -0.8529447870498352291;-0.36790299611923127365 -0.21118749842876519129 -1.0033629271010344741 -1.8296987625602798566 -3.8272970837717177339 0.0030194207083970060757 -1.0013940197391628661];

% Layer 2
b2 = [-12.780560047990363159;-6.5504152909921193881;-3.1566438541219987712;-4.8266051352640273464;2.6707332194840938122;3.6908010059705431694;3.3577239491615644695;-3.6590022323220616762;0.11008048646590469499;2.0058364561437298512;0.14663173411425942105;-1.2809486220448309535;2.8548633679003629915;1.2557972326896453819;3.6930619247931488758];
LW2_1 = [-10.294254326150129586 -1.0123584671526191237 -2.5982138286942881855 -0.0064485281436244615283 7.6491248390051529427 2.287283188545959689 -0.2905798373724168826 -1.5100842477644063067 -0.80727835236769207583 3.5124789694376339355 -0.29208509796925136159 0.08572047085378262099 -0.34886877754446726785 -2.1661080671851209445 -1.9642392325060145097 0.026828581380665482425 0.57254319132755437938 -1.2167891844900915466 -1.1557267043151888686 -1.3856461089817031507 -1.1094925071172374587 -2.4669329566216156024 0.98511334527220073554 -0.86757950022083285546 2.2318371891694863685;-0.79901496508313107903 0.76804962341598481679 0.90762647840958132761 -4.6881516360206294536 2.5112058263678878056 2.4856417208428491783 0.95133153144285265146 1.4454244177800443794 -0.0066655778794613282021 -1.2622226879616695872 -2.3288879519840852694 -0.19236315947574655905 0.31800198067294610516 1.6099720931820560299 0.32962468340223982644 -0.57329411249769735015 -1.2321656798482762962 0.13219704403695239914 0.1784473476180197804 0.60628480231318382376 1.4659541569204457279 1.29377204913048649 -1.1161124891497062883 4.6101126657336086723 -0.14605931874374861179;-2.56744931179739444 -0.62072133081959635081 -0.64812451103500967609 0.57715729441448737624 2.227024003114670414 0.0054804978701674606292 0.38746490683261569643 1.4389839747166577322 0.28684291400651923398 -0.49002725734929203361 -0.31658760632098043031 0.16692840175684023341 -0.89251640513434604696 1.5530434434089579465 -1.412422305512686771 0.7868375669331008071 -0.24435956011246004471 0.46425516740153444095 0.21346762429317550636 0.6900344449802049418 -0.35409952752204026938 1.747844173440787241 -0.85542902589717928485 0.82433467856756581504 1.4965810858992680821;-0.35433400503548395655 -0.36896230494533843736 -5.9176336372090201365 2.6121256106714421108 17.873022511718033911 0.19739853896673620337 3.532314175281016766 0.30154402741245561748 2.3993616338199146298 1.8260218154930156764 -6.4356284532937291232 0.42608154432191058802 4.5358637405767234796 -2.4693303891687636842 2.5543203748818177345 0.93968988741950965071 2.5981489954700869305 1.5741383981177712315 -0.63751913957793526766 -1.9784492074533182038 -3.5792884514532699036 -5.6930864474150011389 -1.8891674406727190227 -0.84525639199320423689 10.025606119052197229;1.4972342065527386445 0.29277682635085972018 0.48287165835389295188 8.8514145362081197987 2.5758897285463966398 -1.5036501302638305422 -0.20904622354797175454 1.3703391362623684735 0.23827902627892788567 -1.1110619060158719584 0.23662719337058896185 -0.15550548685476192623 -1.2825666893163545357 1.9388737760493077733 -2.9098425170158721542 3.5260289957944603856 0.97658674928011657279 -0.60220757455258677737 -0.41164664647088761162 0.3951792637760257465 -2.0002568044047746021 3.2267789901153669518 -0.26419382440144034696 -3.2050437214534319708 1.9433211268504881897;2.2520130414451680068 0.35493075992545192188 0.18297468312662582002 0.80996979995922424589 -4.9642456101966576654 -0.64055120148902910948 -0.23108519664917237524 0.20366892261270413966 0.0064933963909254216115 -1.3186524569245969829 -0.18927009494054997107 -0.094565662551653259515 1.2157474555718204012 -1.4149125561713955523 0.73240453250595782819 -0.19780835374783195535 -0.57376805134317732104 0.68022252917517556092 0.51198350080675680829 -0.22647351952414612741 0.44995662107887984815 -1.9810482061559444578 -0.01407574939503374728 -0.28655857068898443751 -1.932585126378477236;2.6940459866233816832 0.56264272449300500867 0.63952139833037180416 -0.3863205822192196659 -2.3803608194836400891 -0.094499626799423322443 -0.35515658628529933605 -1.2536050943637733202 -0.24870478176051788455 0.38019808159458418073 0.31741854582782053074 -0.18341456703124933703 0.94573921003780125893 -1.49664115710738721 1.418968962361592645 -0.69305693092577891345 0.17238577638929622471 -0.25748839458100269972 -0.16186760967381924603 -0.72343563958480561205 0.28969035890700178815 -1.7083590613395664981 0.78502891982483768984 -0.85455128788653833549 -1.4640395777721042503;-3.3136293370590577112 -0.63016325762273617261 -5.8587684851987722467 4.7749771153751909836 4.7527242514821672614 3.5575333722500568356 1.1046141448217137171 -4.0020400466386050198 1.2644084049509345391 2.758714560570258989 -1.4640175153708423483 0.49291976289923766785 0.77628314970172906939 -4.1325160820081654478 -0.36667347776401953974 0.65779076134462033387 2.0761086084941884344 -6.5337184690369545237 -1.4447827941111968109 -0.27005016984517077328 -0.46810726130535934564 -4.0167754364560179781 0.77347539292387446075 -0.40189229168444123852 2.8617885285805662043;0.82644885758957142841 0.71262150179946548434 3.455614544903864882 -1.6602680271061451833 -2.8547588954534224293 -2.8173689278803291103 -3.0224985979801135549 0.25810390182825626582 -2.6999823344307141149 0.50100695190042032756 2.9106987482070576512 0.33613071361275415061 -3.0466162541822288112 0.29589239256106170117 -2.3473290176544590047 -1.2443999304587238797 -0.1251403632803700372 -0.50307684733015356482 -0.55235227388483665312 0.10566037812168201093 -0.35002848124151514364 2.4573221308212498393 2.9218056486757664203 -1.8746174222267426579 -3.6259626822860053785;6.9540869064259203114 2.6835710516388009417 -3.8013538789318124245 -2.7716252556199858503 7.7496287883884322767 2.5032081678313544693 1.6363872092816580395 -1.0132178405214513628 0.98508947245067790544 -5.8634758887075415501 -7.933149232250404026 -2.2526415647953634824 8.330833990870168293 -6.2088969303632453034 7.648708166435704392 -2.6451491256655539352 2.7893258755187004816 -4.2376465324371173082 0.55419646297809466162 -4.2785093289042119835 3.6102629586021985908 -8.2947222810238443458 0.44998771725943642608 2.7316466024602874541 2.959548227446779034;2.6662628776090615546 -0.10936201096474668093 -1.2338693841233789872 2.9289961232737251606 0.1223340885947321599 -0.48489355829410779597 0.25752823906715965885 -0.57160048055648160492 0.23437744301840446326 -0.45278427297644352478 0.47004416866780884821 -0.10987508191408644487 0.76934671937498277927 -0.50032714568775238373 1.0127731630478946645 1.6515931228920464058 1.5884065796584421193 -1.580284020158184477 0.33630411494337769662 -0.53205147393145024726 -2.0042588203376956457 -0.14082982225291218459 -1.5285265104394891722 -2.7638139456780597136 1.3231043507455952923;0.029888796609555751821 -0.65640819689505647272 0.51975360249425928139 3.4259269222116142117 6.4279011666960643723 -0.6969987788885686486 0.39885721488074749042 0.10171347272366842995 -0.22404437598359341899 -0.78219972889828193185 1.3736364277687427293 -0.18875993381119748893 1.6243499752499159783 -1.0552840263270824028 1.8665738716046771373 0.6529472578746305933 3.1147658032950604756 -1.6237448255869662006 -0.90422831285569338355 -0.75202244196856260494 -1.5871254722583225671 -0.70716018853191608962 -2.9203587598799134462 -3.3648790854164860598 5.4032474486508874634;-2.1233132144545034947 0.069890332843233676785 0.7356053160667530566 -2.3197655514621970951 -2.3831733588592811657 1.1772741562923578762 0.0028085445270288923736 -0.86613340169267361013 0.095366948597011530486 0.27379462392351572309 0.59072280588499614939 0.072297715328154973924 -1.6170514959355730689 0.63108881790988369254 -1.1802861434124132245 -0.74482849141005191829 -1.4836610451611602635 -0.62915717868292686532 -0.36593432949037763002 1.147456818621255481 4.4092791091906509138 0.82173123244519352681 2.0854040449417796665 3.5337837173176009919 -1.2851893271459005064;0.45322121626648542714 0.55599715073479494265 -0.46369571043576457425 -0.45991395544666030526 -6.0910554106616512371 0.079711847978663610825 -0.1955399520372502753 -1.4188072917939389406 -0.11639047357662811455 -0.89847293261337424219 -0.62867266364560925318 0.081632655229537137709 1.4210709769356746346 -2.53848417159468287 0.99350172765603261826 -0.63203880705002102314 -0.52799643291103814935 -0.8497463039483248437 0.58330281596310473713 -0.21355903363391540162 0.80740303418404124614 -3.4479074665246391973 -0.0052391538261307730312 0.24143929307910666493 -2.4623418089694868449;1.0182118611802934982 0.12164116596387006264 -2.5544112256233848512 4.2431556640334813224 2.2133631204158996653 -2.1435689069663750317 -0.13049508018741654003 1.621132593105884423 -0.29201272920362686403 -1.4192522475722499919 -3.7966844970348812005 -0.27190746403063703607 1.2316912199096476943 -3.2667233707463627645 -3.6662190891000130399 0.058965248902935779585 1.7414357763795769163 -0.19094426960203747523 0.76874480694053515251 0.061189208583258651586 1.8210360679281913932 -4.5468174572378057263 1.9383763763768662169 0.35478370893770005967 0.9800578942760729273];

% Layer 3
b3 = 3.1809794513282922956;
LW3_2 = [0.15823142994673961015 3.8258465470346840753 -4.9441368608244271599 0.13309731363412322103 -0.17293470845053135476 1.7102035861122926175 -5.5073898948693562616 0.1160659215439418801 0.17347667542299335941 0.24468530496320375911 0.60734317500563261838 0.2808806654524000912 0.80586938092024196223 -0.90147472971161657362 -0.18567269994916729692];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
