function [Y,Xf,Af] = ESPER_pH_14_Other_1(X,~,~)
%ESPER_PH_14_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:25.
% 
% [Y] = ESPER_pH_14_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.66397371433333873814;3.0159364923806428749;-0.59033008499194494778;-6.5172669395575626439;-6.9547290108374379969;1.7891372084236663031;-1.9383780767799652089;-0.66755410585795826872;-0.29428831084648476857;-2.225369092636111823;1.0746293316048398658;0.061748835299638912821;0.97151730505187139375;0.42023973826092492212;1.4643330205083497919;0.32440508311012489218;0.78575858374561191599;2.0277287074572205583;-2.6162960403244546193;-1.5483977579669352398;-1.9036619587902052775;1.2219363887474310459;-0.5501589448755317413;-0.67839061530501598707;-1.2412014999567699824;1.470062584986080001;1.3638857210028103584;0.24212360226594681345;1.8660681133612200266;0.80278580027754897763;0.89558173824530273865;-1.2747965083240300199;-2.2712844836982446495;-1.7204725976859169823;3.1428283590770624834;-1.7743352853899663213;3.5896568185045589772;2.7986858216988523829;2.5551829500237221993;0.7945236891688117753];
IW1_1 = [0.47937728987701677674 0.61502726647711802865 -0.96888795919451164984 -1.1247590906066740057 -2.0674025515676675013 -0.021405346524138713776;-1.4533357372797401919 1.810582761472935065 -0.10643761977038264377 -0.10481030878276251239 -1.2315966885095737116 0.5896940592899305722;-0.5234595802016445143 -0.76614953917154537955 -0.46527304607441755113 1.650052761188761874 -2.5086947687090028758 -1.8254398339367698956;1.2022778956539974526 -0.53624468616008913457 1.599468064623497332 -4.0973478477022506894 -0.98649306520337665116 -0.3585995337925791393;-0.89577575076394633236 -0.53451501844665305629 1.4716533601628625227 -6.8246170153074174891 3.5228771737648529871 -0.84299878930748006756;-1.8728335466772190188 -0.91411498203993024614 0.18208079147830177891 -0.032639125137766587803 0.30104520472969048539 -0.37971321058876916776;0.80051404881967358484 -0.15144049897870048849 -2.4381686318479425246 -0.41832857557292724149 1.8846203555509215555 0.52409087272789867118;1.4435735079872615838 0.52821681226217553906 -0.46337962674471927516 -0.92114514539574088303 0.3321358766005078067 -1.1492945194110844032;1.416892213692535929 0.49995663916827454143 1.5958474213422764176 0.72773954729060852387 -1.9702613080912056986 0.91307876149155631218;0.77497757981202408661 0.44232357878256989281 0.048170020058829678133 -0.090172832929964599757 2.7858970259910047496 1.1547972784830999871;-0.65324989643186825994 -1.0037385908277092206 0.47237571896972074814 -0.049214002907551353261 -0.89986791274731614543 1.3556394774715785356;-1.2509506694727543508 0.26310038041606631509 -0.20118481456146902753 -0.31159345074052202662 -1.6629422549334584858 -0.73648094384493256737;-1.7782158472142757244 -1.0631066519965928219 -2.9380806525995541989 -1.0395175464765946671 2.4141782914217295719 1.292599963240944394;-0.66094345932220455175 -0.036784157970440031771 -1.7316112017338707307 -0.023095492447334369651 1.4225318991476234576 -0.18910029524382054866;-0.90326653749963958795 -0.63057096624374153748 -0.49358365583641494734 -0.36074185897224159136 -2.0181093136484262729 -0.86645952038101969883;2.3821245253007670151 -0.38645501705558815697 0.061974177820200281042 0.97786385522024388273 -0.34149413017792468183 0.82640937893480004295;-0.84926992887285790435 -1.0798392626561661434 -1.8136260025217543213 0.85391384152774907346 -3.7572149941719881205 -2.1845741374063405438;-3.6502172126959879783 -0.80053152265893012807 -4.6531287872574740305 2.9090171239454942764 -8.8016037254830177261 2.1211506878488197714;-4.7302771399082397252 1.6645190533394398358 -1.3792987215360721365 -0.8084736179450118243 4.8762415301047861149 3.8734329983459030444;0.40577219395204888741 -1.1770668014167948723 1.2614509244616067818 -0.70319249101332303997 -0.53328033447137146439 -1.0700096735259514436;2.032085911121038091 -1.0749968241388532242 -5.0903240603813371123 -0.30463669037651458504 -3.6555890672868343039 2.2274866069762313536;1.3762522972606343608 -0.44530293745001531258 0.90844465099160376376 0.79740384659897378672 -0.43747489653883109284 0.58898838833593569753;0.28802201070418548268 -0.42032574854261040009 0.070846736423845840802 -0.57531321720009642728 -1.1489297136342080385 -0.66254272135406355737;-0.54656900150870257882 -0.79240362686293142058 -0.53591790850498832732 1.3825486130578050759 -2.2558991102959051744 -1.6532634947428412886;-1.3489372647856898713 0.49813631883913650489 -1.0432693597989304291 -0.75895177312250761137 0.11413695402545553925 -0.60084591809885012914;0.66105810450436230941 0.16358231821430305186 2.7539970924612942049 0.058792939082011885787 -3.6484449031604562208 -1.0583724291478213697;0.17774357074959504232 1.1599707527402831619 -1.327261316184138451 0.27810873668090008159 -2.2810810244117876167 -0.041820089746356342575;1.3896190982554950111 -0.19393568419684736881 0.050270424355394076332 0.73990220466236256147 1.9522666667448560496 0.811571118282494397;2.1682013327364804134 -1.0900999288397164033 4.2134297613808842087 0.7202905308652226557 -1.5746232985682984129 -0.1880921273274654415;-0.40343520254734865915 1.3158078687320580169 -1.603187134639568745 -0.24696571285165555554 -0.80142413013775692932 1.0499973605052106418;0.41286115173140869317 0.54375832889969499817 -0.98058692978588091194 -1.1953512544984552513 -2.5392742797059564275 -0.34770703159364646506;0.23138038532340404752 -0.28642986015264765287 2.0497979343252641371 -1.4966436624540480071 -2.4539083113021993299 0.5950841224257108486;-0.40426998671915986838 1.6980754176273971101 0.81686600038712409155 0.602773702017670443 -1.731274769261415436 1.1724184086656121995;0.52589947399191250277 -1.5580189966139628144 1.1290194994223379243 0.61341929957365770587 0.83457241106850454937 0.36585586043830031766;1.0804222905833911206 -1.6708979243370964962 -0.54314873497280524717 -0.75004465086340121882 0.8481886159884781673 -1.2205214387853029478;0.24110778461288320806 -1.4185886487366228259 0.56796044482969043621 0.55916674449936831781 0.34671956124612074435 0.70351219357751615391;0.05844771862774012644 -0.11813776177925038036 2.8920771660087001287 0.3409616853819625315 -3.8979902426818164862 -0.7655499954059988843;0.1583163528410487797 0.44778779229416942886 -1.4942682396326221195 0.12657498333813146929 -4.0629326915562069544 -1.0710626904281062011;0.0095013219586469448846 1.4008535936974453318 -0.27438851173269107608 -1.0481542493728761567 0.42539491997038642035 -1.9585875813255599898;-0.77678414866438993958 -1.258317398171727941 -2.4090406372830930337 0.38727159521446269386 2.8084730703871247925 0.45939818608055110749];

% Layer 2
b2 = 6.2154840354823326365;
LW2_1 = [-2.0796390541582696621 -1.4846137623249633375 2.1647296034894458749 3.8062327541679428222 -0.12453409439811763404 -1.0109547718718447928 -0.47198423291178559502 0.45836043017047278791 -0.75303255101256705295 -2.2736807075243712362 0.42475507637787746074 3.1018147814835081988 0.371146641040925096 -0.82933071074651354415 -2.891683960193967895 0.3548010105943440462 -0.15545829917627623784 -0.038683999722943042399 -0.039351968999168276953 -1.1428734461549199253 0.050032933749196602247 -3.8196087671673635278 1.7217431103947287152 -2.7505378436112328799 -3.2266921179851015822 -0.30811449392654627344 0.97859382367662639535 1.6738366941462738957 0.1170709977578249239 -0.83273872563748796427 2.0748466328209467235 -0.27590820712175184726 1.4624977264338989702 -4.5013073775205318938 2.0968498411931166814 7.8812389884214493208 -0.49576172378342375779 -1.0929257221476627038 1.6970395125443309414 0.27516751591624083462];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
