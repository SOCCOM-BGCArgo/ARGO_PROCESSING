function [Y,Xf,Af] = ESPER_oxygen_5_Other_1(X,~,~)
%ESPER_OXYGEN_5_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-37.026798211042986964;0.67208901562033929178;14.852303627755588877;-0.33446255444788375311;8.7047041533797244739;-5.7105620004430583947;-0.82612120731647231686;0.85635139008113569936;-13.98111109646904815;7.4268510584173572653;0.87962122152562549626;-0.018048304705630589806;0.30211802362519779575;-32.667637814362414872;0.15213942884966197289;-1.7124972775778002365;0.90778934965048496686;-0.027674852000955027509;-1.296485152112799133;-0.93127039234991970673;1.281368547613783937;-1.2934776360583830623;-2.1097070549217376012;-3.3131598743244508043;0.095564121150016029249;10.908901154688878776;0.94018763426869400579;-0.86243899188500205977;2.3396743520853302556;-5.2146383667245039817;1.8877045806262113814;7.6010679767232227633;-22.674809204704423848;-0.68581442829727912169;-0.033795012711055373578;0.17947332759832168581;0.034119522885483193064;5.0299292106624120535;-15.866954785221343727;-12.752321552553013362];
IW1_1 = [3.3490435660819057873 23.748173587151200081 -7.6296359370327779814 -35.406472212673591571 -12.595808254262818693 -5.3750873231601001834 15.290639912092844455 -6.4635122834484004528;1.0578226290149432831 1.6919956032473932872 0.19099131502934099669 -0.095101095580892427983 -1.0325845285982198085 -0.57718807366030999706 2.6793399147481036238 -0.74930564276766453702;-1.8514073037849536618 0.025227452841644473769 -5.9594382423806848692 0.4118396527756430503 -4.0624565970643748969 12.440386635546696326 -5.3098686781033928028 3.1952337729363793351;0.12579293487608542157 0.025230200118244679175 -0.31028172642905577083 0.75445825253885456796 -1.4706422324277199642 0.26500990581431932425 0.89822459156670886316 0.86671958599981713256;-15.81542548049040775 9.3595498738470706002 2.0295429319130073864 -2.6211258182822860796 1.6021215580871972506 12.119647783241779493 -7.2019199806157541133 -9.0668130210697874816;11.419120215971581445 10.212046567294001065 13.311158318875961015 -8.867696407908951528 -50.771577152473568617 21.369342293051367676 2.1020865056619828515 -2.8446264651068218221;-0.21650735087324043948 -0.29882231763155980842 -0.84646000356961426103 -0.54979608698318949145 -2.3738248248709328259 -1.335657974749526522 -2.4815472801265134883 0.43902247193340437903;-0.20058462423671574726 -0.5630852632758269749 -0.28262075310499978897 0.19089972440046712454 -0.63173544787106195031 1.1042110655656727225 0.79928924752505092766 1.0353078435836782223;-0.095811121448792543887 0.30080600475106672453 0.58506330223005842406 0.2086445197832875742 26.190053863672417833 -15.774234453186146254 1.2033945410262620879 1.8901351495639449052;0.82106006925066887803 0.26207037249615716679 0.99484984939365272982 4.9605720292312245334 -4.9767118853832794656 1.5051136157645907954 1.8465651830107479014 0.89380977701375652344;0.18341551183608878484 -0.033021147329141999072 0.30406362993764657343 0.26423974018003798525 1.4857193212988117903 0.1964730077506797179 -0.28037108103532343284 -0.34142080396565810396;-0.11679651326839024517 -0.22694541221852804203 0.48671232515183365797 0.34564607512832939973 -1.0110702606449872842 0.18391819619297097854 -0.016539799381524101368 -0.67347911876985178115;-0.019183961146454049651 -0.12806995219263242469 -0.04727696574934676238 0.37056381717053216152 0.087760421211563563459 0.17127465009200310009 -0.046804530811069111618 -0.21494107197922615593;0.25140877459767879687 -0.4813467312550993582 0.24532069601901093647 -32.427914549761489127 -2.2281914730379384082 1.4409513701720200185 0.24211507156562955823 -1.2502829081334392303;0.012922924268464268741 0.10698369425723269766 0.23623180223945902667 -0.52897175625640235896 0.86794625515448653452 0.25700735322059170551 -0.80793751893625675997 0.55662132623744098314;-0.28658091169853883162 0.046123446381887277246 -1.1786041294909981314 1.3207759141063222241 -5.6960443296651979139 -3.49139637461757113 -1.4649665452738107607 -3.0940370239026839805;-0.22283581018059400725 -0.59296391055908825862 -0.35335499831060634968 0.2179603222859639311 -0.58073663053966340097 1.1905073527398131183 0.72836819153826581896 1.1248784540411169708;-0.28920976491824984533 -0.37020696719052803569 -0.66552478042295604155 -0.67127379420362875972 -6.3240337218385249685 0.3378564113735815222 -0.19085188011861325963 -0.18609808766063193342;-0.021690503587543999431 -0.17007262773680148493 0.39032991895673785354 -0.36227676295365934811 -5.5357647652562489426 -1.4218298723431808117 -0.63141678166428272245 -0.59632318669980788339;-0.14227888509462746636 0.033985764397303837303 -0.27651854283050192329 -0.29508536180001981863 -1.2907128420378723987 -0.37767371353199230555 0.33874574446578592513 0.064071072734703582441;0.034998337128160007803 0.15694461903693496252 -0.39207430408073790096 0.40545893608487165727 4.9777448770562067182 1.2034288698014787844 0.45335345526894665902 0.60966841842948105157;-0.055346965678190591931 -0.21678357638447884326 0.36095265355171912702 -0.23794385414304136672 -6.5774007195756443167 -1.8076747899468512681 -1.1084981314487871717 -0.43006039026589182317;-1.8656777994231206197 -0.87378840538449209507 -9.5756669548488932975 -0.20765626117973143283 16.634941951510597846 -1.1006123927867590417 2.410487656750646579 -6.4969760110407701603;-0.57436467288134906983 0.54104362585570064947 7.4334201774874033575 -0.45507188578874979701 -26.335365747783885837 2.0769899743143414028 1.8008948164452354135 -3.4886735500543863964;-0.20488490220729813074 0.047127807109072578085 0.75007660514354879133 -0.41266410002450232275 -3.4319916017062768177 -0.26676759081825945907 -0.10916513324795897033 -1.6768887881305318821;-2.5187993922461955343 5.4709098326993785832 -0.3440463734761542991 2.9250740352050645932 -2.9287986231725837705 5.9273499667345568298 2.1783976235805528887 -7.229228168995676107;0.36802334146893483924 0.95224062680898058364 0.86240245390513448065 0.91026384848479902079 -1.7017478244535391152 2.836176972575988664 2.8624643028442804393 0.65472889194870576013;-3.0235464090171344509 -1.1937990244669689499 -0.25891939852351703033 0.52416445229558195074 2.8123652302419843707 0.8589100471566385453 -3.0259274284772388341 0.36342850362418621657;0.42940195105645523332 5.6518459010128871967 3.5042955665267765397 1.7726467221755883852 -11.066531806963970652 -1.1353290855710020946 4.3003978892871304041 -4.2192390845453502379;-0.97640790161808843628 -0.63615090709148147674 -0.70750017386090591209 -7.1369595293222127808 -6.5494646002611123237 7.4643151563709890794 2.1304438985956344332 0.51186942457167472487;0.040854781085549324304 -1.1469853810832280061 -2.3979738466253892604 0.68908775553047352247 -0.14477832040877974817 -1.8656540413889668439 1.0952267501047752152 -0.70072285500809561309;9.0093375930640036131 3.9886678520645264534 -0.57114857311162914311 -1.1113695329794548439 6.229071928643941547 5.93358324296792361 -12.862768109434085773 9.2049994870473259567;-2.1279254598490333628 0.51090746555018706765 -0.1225096930188104144 -21.723666545367365188 0.90217791126421409409 1.0438666087996306686 0.0077247055275445359462 -1.9223939565364134285;-0.8871993833091287307 -1.2169841592652290707 -0.23841687230957170351 -0.01555313010255556308 1.0261333384307222971 0.41120439565563193796 -2.6000020281909779207 0.85735438383713447053;-0.11745145661171599305 -0.21141128346902987589 0.65347651300790898787 0.29170775692271461166 -1.2130155002325162528 0.13396915638540446425 0.05849649778534037059 -0.76723155216002814072;0.21724171039955278428 0.4563453801560275469 1.4544243769545974754 0.4737734922829353601 -0.99547374820931266992 -1.2983922397389939807 -1.7443835295135592389 2.2564787199962448305;0.11414095157138350045 0.19020903966660368534 -0.8474135954461295972 -0.23152766518487316594 1.3870632411854604271 -0.10650387084030818463 -0.14288985304104281915 0.88635134609437615794;1.0058627447946268951 -0.26478232095366960319 -0.58772123413617516352 -0.30150050076513629227 52.753551971332719006 0.82355645653035280951 -20.593570754973281822 21.636647016676402444;0.43048838138499118111 1.5555254873831874107 -3.0436012938467817968 4.7668364198668831122 -12.941622633695976319 -34.379388122772255088 13.233463542729460016 -38.558687875147960256;0.090795411076396367878 -1.451406927053638718 0.42024471103095312197 -6.9372199096064370849 1.395356727327659252 2.742426837525405503 -2.8487029244809258799 -1.1602801572694627641];

% Layer 2
b2 = -0.21805673028583155704;
LW2_1 = [0.004484524332718974049 -0.40928939908525791003 0.15317000128475480314 0.89395248631234103254 -0.0060274235042191565137 -0.0055810167722394063775 0.33623759421141097281 3.3333360737679029739 0.14445957288004523944 0.1398421347731440556 5.9182125853780807034 -12.893202806248993397 5.9431723893802379521 0.10384769398007220875 2.8834023777769273167 0.066202776810585214906 -3.0684276158790106948 -0.22051248753780405831 6.1807971717993668292 8.9054481820872517517 4.8461491926400181995 -1.7260899211197839875 -0.015832179017583877106 -0.038588336015895896569 0.4839804435191321641 -0.0083078754877477841573 0.11724235933630196282 0.061919909296294657619 0.012922482387923091979 -0.050419574506978703798 -0.1194891115088847211 0.0074434210575703846358 0.052800957694718250734 -0.58684022419763404166 20.015077785552033873 0.19016182995604530293 8.2369510636030103257 0.013495764319532982042 0.0068082760881117039553 -0.13968219603921352978];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
