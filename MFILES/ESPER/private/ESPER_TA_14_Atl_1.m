function [Y,Xf,Af] = ESPER_TA_14_Atl_1(X,~,~)
%ESPER_TA_14_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_14_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-0.2178];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0479365703301392];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4201218141676914541;2.4037109829343208389;10.906157605862523141;9.7718691466148737135;5.2274676943311941812;1.2572894811550017202;-3.6714198944759197651;10.007906852900186223;0.7876535131775687093;11.044953532237844485;1.0796914473461973749;0.39860322434768596933;3.5509257992024712003;2.8062262857003856809;-2.1583660277623399892;-13.200463431544454451;3.6156458433341764902;0.65090758610279320084;-2.1809603109352524442;10.335887400728777763;0.063886206568062181566;-8.835380876987793286;2.2181145898449226017;-2.4272078292931036358;-0.43700469647829759401;0.62413869533825794278;-0.97623014796782248137;-12.469410474925579635;-5.6469417568665596363;19.457260380059356208;-7.7285683606770056997;-0.15069386123056996429;-12.80289034505326029;-0.16398769104003405039;-2.0164737663435956527;-1.1103031253738748774;9.4886081085396885015;3.536708239506983098;4.008081536489605412;-5.3438846846158787329];
IW1_1 = [0.057433966546353631966 -2.9913924402954057413 2.372931206161131179 -0.23087185207879643012 5.5082512996754928736 -0.14495126125262158823;0.84739813563987065326 -4.0142883328415610578 7.6465013825892684807 8.527158056026960864 11.691938168549038224 5.2879314770892085207;0.10187420831580652758 1.8549403317433752481 4.4942429263784644533 16.840000735219639694 18.958003851572673426 25.897691818424860344;-13.03409542444917335 2.422901522286096565 2.3107761891095375262 5.4904207909619060501 -12.33782918701435527 12.803782945617594891;-3.977877416320618309 -0.49251436714486906965 0.22724609932098596699 -0.044103342744012598298 -0.74948383730895640209 -0.026102619760438844354;-0.051327996218581001253 0.28989196970736880177 2.1018064602052479728 -0.01027981794520572284 -2.0829872634823924926 0.031060645683325664723;0.78165001766487784973 -1.3308933585726820947 3.3648466081893082524 0.039804042870564056156 0.76459270682371049954 0.17897425945820330528;-1.5053103815746711192 3.1476986571074978549 4.4377499517916083605 1.7430224884746361447 -9.7508142838477276371 -2.421138357390089979;-6.5133863017930568873 1.5491412536351822915 -7.0331958704562911322 -1.990287427643159468 9.5026355487031270997 -0.015107095192234749892;0.64776444766821583698 -1.6400347448739682754 -2.4306615223430725337 -1.730952696137842306 -14.038510592987719861 -8.5819933158048247179;0.41418845764672168608 -1.0395448771713131642 -3.193443350194372421 0.068496661316644655293 -0.48284453432480445301 -0.24973263422734337524;0.46375680259240464887 -0.27451445311510175307 0.229256485469413962 -0.0097080342887376977479 -1.9045027105386953536 -0.19867229839961922377;-1.0126665173899025429 0.52457877967328991886 -4.9186333967732922545 -0.14746523048387125132 -3.5722362356315806586 -0.07797110609709705098;4.7543537875492978273 -1.4683456265194863022 2.0308719354789404044 -0.27406967106824708935 -2.6253426939114201666 -0.56262996039751311805;0.081443097832853555973 0.93438271529700633877 4.9636418313404044866 0.022953393721055953547 3.9296911692583442743 0.40789613127550672367;4.050805987989416046 -2.2939082659891552041 3.1606313316401268843 -6.938516825873584537 15.691231112148274818 0.69705625222873135449;1.0344191149356170012 0.61626620388264985451 -1.154031178808661684 -0.2584247707087720114 -5.2372452455476423694 -0.31168196050765245575;-3.0524959111847391746 3.7073646009617706731 -4.8818884998387925833 -0.79887005266540023207 -0.60015186192254643682 -3.9176002752998377865;2.5386601057260849146 -2.4035522595240128574 0.30680006723555930392 -0.065369729078493643559 0.86223099239671074923 -0.083305451069142319453;3.3510314186284766436 0.86580352941977201109 -3.0749581018716725112 -2.0232650188065250951 -15.584740226522711737 0.70386875634858558914;0.26032420905279984868 -0.82276313266310907579 -0.56296516842584598539 0.27096759206909271089 -1.7057310414836852619 -0.96446410045921937559;1.7780761934101660948 6.253659977659618896 -8.3874899914008853585 -3.8366655589746989641 7.0731267328125841942 -4.7053993953553021612;0.036110680226795192904 2.2346115720536521287 0.044312947329615839931 -0.014982435376986385361 -0.7683054080075656378 -0.027994459004072980851;1.7235775004414191081 -3.6227279773665705953 -3.5650103287891550252 0.27009180956609052382 1.8171453374317807494 -0.35538788433163898128;0.55099229049459519381 -0.8766417673516156972 1.4965474683240773679 0.017284175200617635931 -1.6472351874049893095 -0.072146033846873486306;0.56329830172524331111 -0.046664705864537789348 0.38729646340948881145 3.2350613511836892044 -1.0180883844061037191 4.0575248287905472111;-2.4199866381900907442 -0.73519321696319572812 0.86366531427269344068 -0.035264204224803467891 4.0040701191674665793 0.26674455047462070079;-6.8161698307001516994 2.8591245389965989077 -8.6933067239755921207 -10.369814452957260897 6.586522402400453835 1.4773682546454032227;-0.059172227371038353672 -2.158219316821980982 -0.48409187553984417418 -0.10250221228339456703 7.7744881716029574648 -0.5206763182032552173;-5.2993772526235494169 10.798685363335938092 -7.8166053481362398614 2.1460515831847311041 -4.526732307468048333 1.3821405535924955466;1.3262038441650467746 1.2447575390938729889 0.98214653472684831925 0.40751876695900773884 7.6767953348561759341 -3.3245727853406306096;1.0164559435477940053 -1.4608460256721067516 -0.2503782687061547052 0.36188188671393051177 -0.097258468840033557301 0.77026769616791845863;3.9097212357177411057 -3.6809823505169712021 5.9445713799320509807 0.50307317590238664895 10.832645915340155085 0.014700149828133078633;-0.95530622540846754642 0.60511448130770073561 0.32901523921862735333 -1.1973447841478335185 5.5875973341131901506 2.3854745759408042538;0.11445694719832899544 -1.6844885365460109394 -0.12143089732628001287 0.032013262360191828415 0.97420132061807596102 0.028547427788006819738;0.20252500742798731914 -7.4304168524258171757 3.4764767798133711096 -10.789052208300557112 -4.5528618764874586589 12.788277532530770486;-0.15256231708348552689 -3.7933657685742856458 10.072547094118039723 -2.6772742838792709108 0.79515316538569169591 0.24018418928340401486;0.72769605741115261921 -1.5402079412112132939 0.78558770504887420749 1.1607728598963744648 1.523085712498582156 0.94831548830666412275;2.7223656863327008182 2.3227045672618551464 -4.5404830660063275616 -0.27485398591822185477 0.15211754113282760503 3.6579944085393920616;4.2715940115057051685 2.1096633411499126076 7.5852868449174613019 -0.37552289343696809709 -2.7328964221986642436 0.65498382407478394907];

% Layer 2
b2 = 1.781354816739687319;
LW2_1 = [0.057220584052017763044 -0.0079002562581589521468 0.00098696977620375695231 -0.0041297973096358336215 -2.0203419485176832282 0.55701947899753490034 0.40324171715917378478 -0.013186475898714281399 0.010386677357587139128 0.0061477479455822256482 0.50897028014406819896 1.1814394807935164611 -0.16189403492204940127 0.092947134586411128687 -0.1488631130196051422 0.0026796157539572479714 -0.14929066581886898946 -0.010284276670856960442 -0.27696098865780421905 0.010234312309369801228 -0.12631677898240073477 0.004549642110669718624 2.2055020588361089473 -0.29609415903587765762 -0.97305865060633889296 0.0089093094247932515944 0.11758779543363269415 -0.00456162705230963271 -0.076428057829929382794 -0.0078520395079902521873 -0.0066787791278652914109 -0.15966681413953076607 -0.028845121929885343681 0.16647331414656402204 3.4089718883812949457 0.0020297241834008419338 0.023260082881135721311 0.96045344366106988332 -0.0086080499360508405671 -0.059538456741661506533];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
