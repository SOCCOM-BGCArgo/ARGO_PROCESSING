function [Y,Xf,Af] = ESPER_DIC_13_Atl_3(X,~,~)
%ESPER_DIC_13_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_13_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.0543854095167941587;5.5585406725944190853;-5.0493028388118217364;1.0404301955912926836;1.9121852955213654024;-1.0079913688445236719;0.87229130124680154257;7.5226795551552001484;3.5008602896051703723;6.3088192702335694761;-0.99458795029924085274;-1.4425757851439939827;-3.2458849529162780989;0.32767366975219025527;1.2326350147242897126;-4.6828187843418813685;1.0477684852626865109;4.2282368405630652575;-11.437981654352595839;5.6382788307959081919;2.5743889521586060809;-1.2141081650570137995;2.047999318459775786;5.6804345627758694448;-2.7188652674045759028];
IW1_1 = [-0.059309864179448064381 -0.34895313813897821387 0.40256424568510335016 -0.24816670715025176963 1.5414127060150333293 -1.8016999943838021281 0.85263012663034476457;4.0685084513848641663 -10.103996961780692843 -4.4170782997517195057 2.5057076732639300687 -23.912305270874625762 -2.0630892778458291836 1.5187100295042337272;0.047045234670579902381 0.40102925595682359372 0.24864834444595240726 0.20327089125128450231 5.6308726942382465452 -0.14460732070196938293 1.058192917026611779;0.1586135728992512095 -0.26688317275603090639 0.10982543216765783267 0.19202083902933630988 -2.9097810319559220815 -1.2562654978697749275 -0.30164216537879318114;-0.34676011404687506756 1.5551589390753688402 0.59759703384199180931 1.2539084507547533232 0.15734021862037372852 1.2534264584890668637 -0.72642526473341562099;0.47297796401222408358 1.5573031522660105708 0.57950982107950643751 0.41352350738238963235 2.4941471986311953835 0.84796635508488260591 2.1199586605848272924;-0.34126687003185052216 0.67341542907882978586 -1.3190920928651888033 -0.10068641327487305726 0.80885905334980745529 0.35699461880182814522 0.76525073168411217317;3.0596733117225194398 -1.2028998851679690851 -0.52969189018709683658 0.24744770201591539949 -14.726327616105702845 2.659164745575523181 -0.95802017074645451356;-1.8457322874766191045 3.0508238321803817783 -1.369009288760115961 -0.31744325021985458912 -1.0624318408787878365 -2.5360160788615622174 -1.6849163580969819254;0.43286249233376600243 -0.942294011916316121 0.59753899354057460336 0.10354239320906973021 -9.0615931374392850728 -0.78650200031188921557 -1.12773008427966559;-0.22247602717899248037 -0.051467370838826208279 -0.096066610954548922741 -0.16720568209981204189 1.6680741541769270597 0.4573254328085762932 0.33794093245220979682;-1.375629677224968539 0.012649568781626386801 0.0041272579143958260453 0.74848704409425981243 4.0050610504143291379 -0.072889003132199092772 -1.2139769126386403819;0.46287552506209750369 -0.68719053689308651212 0.029200453401852219382 0.54945345733395145604 4.0048064708641231135 -0.014789776293774863081 -0.44042348720082230562;0.1971228655699351906 -0.050180692318360323179 0.23856492659622896557 0.83412168964332567 0.32419360604908392665 1.0981245014969021057 1.3406973628556413392;0.37295945555149018213 0.23181463593114401411 0.012569244263531939576 0.28054364432556816444 -1.8326663757648169462 -0.31264244629853871205 -0.59222501057150056525;0.1461631220155298061 -0.49306652666452305267 -0.053279261661430071806 -1.0195182269980023193 4.9913891281935605093 -0.15495769206885437463 0.68964640022501078054;-0.73471621063115288841 -0.31505945396968709771 0.26374252369962930542 0.13028441316695901775 -2.0552142781594113785 -0.26179488184283572494 1.2517311286813026516;-0.87229730941555549961 1.021615992740253942 -0.57826432174464381664 1.2676111980129993739 -3.3835130458066000614 -0.20828146754472462443 -3.4431556679974510971;0.76113991569916517044 -3.5146075156526963568 -3.4552867085036456096 -4.2375653187252320109 4.8944432289890382748 -1.7468197565664891346 2.7641520714252947322;0.072661678239665281054 -0.065590786310794402247 -0.8019079056458876531 -0.2559281270757449156 -6.8957828175456636899 0.0050903592580527892361 -1.1979073208907817794;-3.4132461859353493416 0.86544912705332366354 -0.26897824681107856959 2.1108724744275404461 1.9568435169129931861 1.1036775388501072204 -1.3343490285536192541;-0.93459749036678896328 6.1837565542324330892 -1.2055972957300338244 0.70056554102227674985 12.93055739714917074 -2.2018867540215945056 1.2131742790715636104;-1.7270428925075360649 2.3544237812793116227 -1.221181352684151955 0.53602188029877662068 -0.58119313924228810375 -0.4807207430858983499 -0.8802252371411196652;-2.7004521259950733381 -3.1214857819037029607 -2.9822144246172932469 3.9396727595327325488 -0.44395026151662331237 -1.8440911488415172581 0.36366173549878633153;5.7758787700763027928 3.4513303485469144505 4.5446748851526788116 1.3888786001904218637 6.64159640583139943 -3.7472919191315900989 2.6302656969679265586];

% Layer 2
b2 = [47.082033620491714032;-6.331799948985449511;-240.79066453452801966;-5.1712471040419414336;37.026219315039547553;-50.798245226913628869;-13.848811151442653511;-166.61564844199835989;33.577536501480956588;27.907937547962855973;-196.65491109013294135;35.573224205222608418;83.036461196007621766;-31.564437115161439351;21.811631708011233854];
LW2_1 = [14.695292916875230205 0.94110434715319646326 22.703779809972807868 97.627416694840803757 15.064180127136474141 10.198807660695587529 -23.91912022035871388 10.913823857288884156 34.880076365911165226 81.430321028135438155 74.516225771019165336 49.647382742200100836 -106.73232173809968515 2.8483174735779974718 4.9854274749828988433 -13.493373054013860113 -64.887009445966455701 30.256019923797101256 11.416526753498905222 -13.869929173983985393 65.411997058407052918 -9.3708000593095253095 7.5613611087668424204 -3.6540945401532316517 -20.562573373242532426;6.0916691138732685928 1.001300392707181075 -2.5623054546029182532 -15.938627513449079132 -35.137672895195663614 29.462514526190432207 -16.072369115526850436 -17.538459904697241143 -8.6032122109386417463 -3.9638358793401975433 -48.480301879544498433 26.420102313673929473 -46.341235497811446464 -11.754257689325964265 -14.984383628948284795 -15.249126016167979358 14.398337600665586322 23.593504954674290985 -12.083556334777625807 23.515698335765694793 -1.9644166085674026334 6.0803405057493282726 -4.1089712200678647491 12.114997712436450072 -0.055731261742387898372;150.70422832083116305 -106.6463963819500691 -20.600904607364203258 -51.390034292268737204 -160.61792616178249204 163.77334472755654815 3.7027880027840640587 -43.992329431400762019 -169.00251039798050101 -3.9957250094117324757 -131.45016114331042445 -74.550423055067440714 11.84985493437643278 -15.356855465094882973 50.850163400633213939 114.01636065078906768 -41.475027791434037283 114.9295217588505551 -26.330479266401983551 231.17563003573252445 33.773313062045701827 -40.196283407396990128 131.54789761053655184 9.2147965290504032509 1.7677242367187215866;-0.47713547510881409996 -0.016239879441386769615 -3.7789420012468957211 -1.4143346259121689634 0.14605667461292509701 -0.18759344165198513221 0.55266833735724318899 -0.047694121407913681043 0.044305380121215820477 -0.67593345638835911071 -8.4157551273196435915 0.11966169814548828498 -0.47506029843584235417 0.38285895562240102041 -3.7923461806181384404 0.57796621842627027288 -0.53237312555069271625 0.17486225034619420904 0.04409992255871381106 -1.2250812901502030616 0.042526611832034801053 -0.08653602743550903309 -0.20031552341805400341 0.059499023547177717908 -0.054938245514578223916;-26.274750798276976127 -1.8946474318038986073 -26.485153039104858408 18.810967241352891222 -7.4217451603324899878 -13.837104397441455816 -30.091414561749537881 -12.559667869620925629 -0.11859622458605850737 -5.2577216547656719925 18.400054327018892764 -26.202490605064564733 55.792886599641626333 -17.493433908466258231 -1.7593866999624967473 -9.1277204613548299506 31.611545489293394695 -15.655745353666336683 -12.792579001225339752 -20.242042871613989519 -10.916477510754239333 -17.99469464110022443 15.805352289456243042 -25.147799244723529455 -5.8683789450247640929;40.268210466743973086 -1.1936185764985607349 -20.281827949953520118 -42.582689466137843226 -0.65983969934516339961 -3.8598480310676550609 -11.168436748756258581 10.572041355932851658 -20.764578420826698135 23.589927125555277598 97.192019894235968991 49.297011900609021495 11.710448717366555016 -24.791208192037334612 4.0112368516519794071 -68.58919849049415518 8.2665493979935753543 -23.678145985510806071 -10.147538327487300336 -11.11247423189216299 -28.247385421762167823 -5.0968012100840907053 -32.894675431390048459 -3.9571196528803773695 -2.3681993893894697223;5.7879841667948106476 -14.084821089064627486 -2.5296383163003612893 22.91423141192370494 -0.640718561206609305 -13.761003862726138181 4.0299580492712543389 0.057791035824585015868 -17.175331380143436633 1.8932217188259010676 -13.828329082481928936 8.6286132454198174457 -9.8764876141804052168 -4.7910062303326954591 13.573453333340989246 -9.2882644620398551183 15.189580140769940897 1.075924569395925845 6.0966481072667813024 6.84686974240840307 -11.676806864360999683 1.0707038513767264121 -34.156030785757153012 20.10443461475292537 2.5136268672758790288;45.414681568542128787 -29.211759276977470989 -90.611377568276836314 -21.063601584138165634 141.42980355087738076 -56.305891306971311394 20.14313628664194411 48.928045913161049896 48.692198889193996081 -15.608227611490667286 -48.951445803242002341 91.389220352353888188 31.831026575429245185 -19.812172206155810983 -1.0020489087215103119 -33.707989462148091775 -44.743990087519286192 -38.277010770862879951 -17.34843948616236986 65.628381018546420478 -83.568619568710460044 68.628456336144196825 10.591360829680366962 -87.633653298719849545 40.549652807635325757;70.22636952595003379 125.95745786783014353 -62.523021386272986888 -122.98180919973466985 -150.58837994737268673 16.773739472844713561 35.004818799718265154 123.73190215453361418 21.407348053492203377 -14.733108802549571337 15.913315670898214194 -90.367191753848914004 -45.079157545907804661 -45.432167133896179223 -11.337456897268936018 -4.1112634818421875949 -130.14275829425787379 -51.992889554082438508 -75.038402555667147453 52.044496277611358437 -89.611057948432872422 -57.469742300590397122 96.28517782890050114 53.294207693507324564 86.515971838940572525;-10.044211110603928461 3.3874669695524954882 7.2299782140419077692 27.464796965841859588 6.1091789709057948699 -3.9882734902962919676 -2.8849573753637622886 -2.8996277015879243777 10.518212780418057406 9.1971166693852861584 15.29154082254607161 -9.5274980679796072991 7.263100219566310578 19.208567376498663748 -8.3613719841966513968 12.076039171470155154 19.693282921568432187 -3.0569720157423021512 0.33781733579001316237 4.0409523472221513529 0.96096093543042759855 3.9759990378582670267 13.882230269309186355 -0.64260960470731931515 9.9254400497654042823;82.698799231721849878 20.247100628325057414 -106.81840526499227906 12.266657048695904564 16.9413406122682062 80.957371179601736344 19.66134620994429838 -93.7059183355932106 -38.274818072457819085 -108.62699254699812457 -59.382569345838689401 -51.441134681008449547 -39.17535209719029865 11.043824517078618896 -32.359147983788474789 66.747377626413680218 37.451700129324954958 12.965019411893589307 -19.961975681217939638 0.72741288734696263329 125.34131000185486471 59.076106068750334543 -62.397484029941367112 -4.7418645726010488772 0.50427695438481379142;-2.6195589587304830559 1.8512913618158168827 30.880147585893677586 14.076382897344720035 -4.3993912520403588573 -2.4505051800191943734 14.139072811639339378 -1.9379309495170673472 -7.6366685306522503751 -3.2664363096958402011 36.928351461672207279 -3.4309468473193667215 25.683218783277318664 -11.043063324138040926 8.5759426332584745012 10.416836587185821728 33.250099960896172036 23.037588437475598369 -0.23638485793318494976 -4.1506059160129460395 -6.2992994226320755402 4.4436661033975992652 -30.215443226517766817 -17.389450273152721849 1.9390657878387511648;-25.155584949274821582 3.8294000406100456857 -55.256072871512394329 44.20646326253214653 111.45491184954423147 41.376853005792206375 -42.053613791886171214 4.6587664413677947195 26.923214216047046676 20.702528789275110199 -4.4031126374515174859 71.637325700521515159 38.90152304659546445 -45.96477445364514125 16.339939647076121787 4.8548014112588555591 58.051120705647619502 34.642659227795661536 57.712169084717274359 -5.7055828642923511751 -25.606111063898609359 -3.7511543038213899237 -100.24876607951878782 27.66396694657682076 -0.8446180840534436296;-3.8302721890553899087 -25.723491508735374822 7.4579709467902421949 -30.783457995040187427 43.114389772933364497 7.0596554771192385758 -2.4197305501286456852 -3.4814720811241928189 -11.477929890435758509 25.455588017038166981 -44.601289345726513602 2.9882711947299793742 -70.562469412515511635 22.663129115545672221 -5.9811393480777326204 36.007741733519672778 -49.350916282061874085 -47.427886217307261063 16.754623115038310033 14.936900885960822549 -19.269448441526034088 -3.2206133178914546633 24.166595147413772793 15.220821433618553442 -2.6898122351537208097;-34.145417548082015458 -8.6890332785299246865 41.143523221099805198 12.313507599724454522 23.079221701838935843 1.3232453669115042949 -19.126600137878309482 -13.609696780225194246 19.86636870355183504 -11.795365926249473887 64.838050737908872634 -24.998849862157040747 40.915858698876490962 -28.232568366593024933 4.4908675910913933294 -33.590779839390748407 2.8298068709569368373 -24.340612264851472446 16.287624318508363785 35.089764894826316777 19.15371273046013556 16.598956377822233321 0.82159268533093599007 2.1007702495264561904 -1.4710882108985943173];

% Layer 3
b3 = -10.173709569948467646;
LW3_2 = [0.0015981084144487526545 -0.0051811271364958846886 -0.0020435681511736815928 -11.029100461995378524 -0.0039925513803319651399 0.0048779807661315736228 -0.0045062396315832262475 -0.0011268203081921980557 -0.0010808195528572166113 -0.0047898369480900574238 0.0017513559452885308406 0.002850989295063594605 0.0026520455700049651131 0.0019024081703822130762 0.0049486928182047784305];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
