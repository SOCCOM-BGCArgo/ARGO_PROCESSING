function [Y,Xf,Af] = ESPER_silicate_15_Other_2(X,~,~)
%ESPER_SILICATE_15_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:43.
% 
% [Y] = ESPER_silicate_15_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.61345275132574694776;0.053526544010802007412;0.99124008700208721123;0.86773994949735788751;1.7732940210755994137;0.64844860736647735866;-1.7335016876084574644;1.1963648119159109307;-1.0984405103131966719;0.90843350594089322669;-0.24143650650734577168;-0.17072771033067535296;-0.6052418237628062192;9.1394690626589785154;1.1533373653568728123;1.4570218600199442704;6.4641783152693399472;0.35969695565220699551;3.056408412639433525;0.1658200198351079957];
IW1_1 = [0.0070343402685794816087 0.0082906790226331406046 -0.49849872471771661253 1.7274437902332659966 1.1763575137691271166 1.521496115448999209;0.03209283190442448197 0.1008572135468376596 -1.342633407012579605 -0.81344520407965559272 0.72632333450292663191 -0.20943494501359216642;0.052967571611742252091 0.062138454868662235109 -0.062373207397882914071 0.043366798593554668761 1.0306115867450977852 0.14370876839895060928;-0.48039810963178691816 -0.29237694231985289495 1.3309117322705878994 1.1189887514280658642 0.05017220425401049122 -1.4434131404106496088;0.21997700444854070834 -0.15442788969250703657 -1.6704129846870250375 1.3944087877438724465 0.12501417137028000837 -0.7600046716045785189;-0.31346119449123899248 -0.26173498583666343631 0.18986428449606918001 0.94495070858539653713 0.062514949955844889562 0.42580255204502309718;-0.61878455980346003251 1.1548417642434170016 -1.4193031507510167621 0.064837174503059341601 -0.21674787496444261614 -0.10050490079667707966;-0.093134392028933019048 -0.097567384970873888284 0.70509665300861612547 -1.5915975744428578764 4.8655834825619272976 -1.9737505619252313505;-0.25744214408893922874 -0.13637641811504283562 0.58026635334153553458 -0.95768264479016396162 -1.8032776076097618567 1.2919702595014790347;-0.57506389456370143876 -0.14479680599220345893 -1.1328727274221657151 -0.26532530275053256563 -0.96731625539457943841 -0.3026023507727612083;0.22565830000333411687 -0.044145449829346657122 -0.87483369664236143581 -1.5805490188484829783 5.1848208301335176884 -0.49228397098661325071;-1.5343632448500377219 -0.17440127028689128563 -1.2690607630642618542 2.0018269803797332784 -1.4189689994836542919 1.2147777016525553861;-1.9276928395581884867 1.9573217492278003338 -0.24363181345173168246 1.0958170454435949281 0.06290483321445038134 -0.22178430048163619293;1.6274093645986447143 -0.94657675554082520986 -3.4141404426345327572 -4.3274013873966028498 -21.898995109553702321 -8.4045234116366014376;-0.080319992113697516456 0.32341094543048443111 2.9583800717347825682 -1.436417941783029617 -0.36886039299975093009 0.42253233829734637705;0.56034982750921158434 -0.67639549601324922001 1.6459009096073089484 0.42562686755584749898 -0.012255263873798414448 -0.22032406571304302689;4.2267465101105416991 7.3931367317068641398 -3.185930244207497708 2.1174450352572389278 -1.9611287026100046038 0.37731217795701771367;-0.33888048017577748761 -0.17720108985202778773 -0.11972310905331513819 0.40124699238216010588 -1.1565443987411245796 0.63511968373758609374;0.12248519555822034999 0.064031508243737211838 0.66539665897283661877 1.7936443826898185172 -0.41080246350232901831 -0.83829474532095848982;-0.17010479298460884356 -0.14173299043705625544 1.5789410152488141392 0.3100970246028114663 -0.75428909534529797742 0.83288163102572576602];

% Layer 2
b2 = [-9.0929669658244769437;-6.219317312037290435;-6.5676739168662052748;-6.3045601680160672231;9.8774417888621979245;-10.15663945302384441;2.436541047148012229;14.030144461166406344;-0.50197584649311433047;-20.061416756407982831;3.9196904499925087073;8.2358763505355980783;-11.342727602215804339;-12.000206646504876673;-19.854841439631204736;-3.9968259833062402819;3.4666699679349650687;-10.840707274319250075;1.2904527835493126986;15.507067436161367624];
LW2_1 = [27.199472097505037027 -3.0204054448440516012 13.801449577560925164 0.36158533605421150359 0.24686113089720709834 -4.402891650614320973 1.1322697583683718481 5.2696278230087099104 3.2667728403940028414 10.093220582527290929 -1.5165216664674590064 1.3323215054642374433 -0.77490903256641607832 10.24107746180805556 -0.011009385187290511229 1.6743857419481347204 0.3076945798457820791 0.34729470831760106408 3.7679304997668108257 -1.844640469850895359;-11.002948385354873295 1.6590839112407058664 -0.87858326796483088295 2.446123042246210133 -1.28877503428897211 -1.4237409266758713766 -1.8766308199603876083 -8.9082597056429673188 -4.5860675211145904839 2.4763814561601553699 0.34193684240170169053 -1.0106408146524619163 0.14183140977666927607 4.1529902482711742451 0.13782813976776991938 -1.8528994686003015246 -0.34947838976031292413 5.7056191465193473178 -3.1189126635359465389 2.1436578592490000972;3.2162891088621052837 -2.041233373448420263 2.4077049075453151872 -2.0100581492555655849 2.0127865029802802788 5.1389384580574875017 -1.0603777666553741987 3.334422144301547597 5.9833428413193656681 0.10163210164392123824 -0.34718939047065050518 -0.47772585870761880011 -0.88536335905582008721 0.56514776270872946196 0.0053038859847174572512 1.8836643509355164294 0.0038620168842016964691 -9.0394702551108387922 4.1545257965062267758 -3.8502606328042054962;5.3466153557656763695 -15.028183766960465206 -4.6033649155971678724 -8.9334059682954727322 2.4812466987220522796 11.656228111214121057 -9.5225206831042257249 1.9376630208364760133 10.284085674720071069 2.4913380403255125373 1.8724490917726290817 -1.3109639446658731821 7.7194977499806887167 2.1335512185283294073 2.7853850756327802607 6.3193594287429464273 -1.2519040987839380463 -10.097609597403284454 5.6383266554542217364 -15.154134680456458284;-6.1166259461068186454 -25.166905559394891156 13.348790896762658065 -0.5756887869303388694 -5.7381717028420151649 6.8324685588436331329 0.58396230994572317918 -2.2672264495500860093 -12.045244902452502345 -8.047841364554468413 -0.98490642597945898817 -5.0022684545553737223 -3.5810369225222840051 23.767701847455345643 -26.186161614454302793 -5.8558316235280321038 11.495024214351328595 -5.5021862818647644389 -15.328700602307050005 -9.0398317159286403211;-14.905925119560032854 -0.58045221735564067611 -3.7126643612677057149 0.10105213039856972279 1.0020569638162963866 1.4803018271858165988 0.8940960545298188844 -1.3479125279724426534 1.0417346328763796848 0.29797535401698593827 1.1837059262308573526 -0.19554437127343732294 0.35836572826935858549 0.36833687698502237673 -0.64436282256397237056 0.66598659047259589627 -0.02463571570170327435 -2.4196493731743244915 -0.79578421567296353523 0.82684683882787357589;5.3461148386549872669 -16.704900649045633543 10.372048420870980223 -2.7830081819390444231 8.5201530662929005899 -15.975028645596930588 -4.4152404403356335649 2.1534711657684386665 -2.9320453641948627244 8.536259213891812081 1.5925898627395129736 1.5405783666237646834 0.05519340272020946403 -10.530543719256368007 -2.5962404676977057782 -3.6418969525139148757 0.09317532961138463854 10.336077472823046008 -1.7096658892227305504 8.2114650947803635717;21.826842370697427498 -2.1837809253158697587 -3.7699952952461965872 5.4236727018970176672 -0.50720823750180088485 2.067964476748253233 6.70474990761147982 10.344083250324301204 24.206099374226003107 -0.65916794217305929582 8.6152818435876703518 -1.3475844623853705517 0.79536530274813999064 -10.24527883156802055 3.6285833489548324771 6.797064503151930559 -2.8750915583395433295 -6.826695115144114645 26.211360037928528754 -7.9043453535807781662;-5.2839399718195902977 0.3092483399785514453 -2.4137476507245607671 2.3405463362995040377 6.5516050508941994224 -5.3419655097756448825 -0.49702398468043673674 -1.5439036017098439757 3.7997074220686011259 -7.8372765080375303981 0.37254229382149472993 1.4150363803348766645 3.8027309725031170906 -2.2824899372852551771 -3.7571856785637494092 -0.76657920477244179125 8.0950672619375847461 -3.706363440637567841 -1.7525037333786421812 2.9201176723423807324;-10.627980358244423442 18.398509407992044373 -3.3786120460962245637 4.9704526178427128613 -5.7674607222767049208 -10.994138085866651977 1.0349924553751601586 16.166666576827534385 -12.174403629726452181 -8.5167321091126506616 -6.686939457427452993 1.2014972419635219225 0.41906164418448244025 11.949885962147082097 -7.7447371490290786156 3.7274776695790348136 0.72323546029630048082 14.939748056116169295 -13.945497277023333638 2.8453734509577728318;9.3279131061855800056 5.3947353187043614042 -5.642841498451386606 2.3595999276559114222 0.65437267656240472036 -2.5524871360942089638 2.9135837788594303177 8.9359339511635678122 -2.0250522110576381074 -2.0268718885306737931 0.51947697051166374926 0.60338954076602713261 0.60456022099648154544 3.6020963098238816258 0.62713044214915714125 -2.7139827945053842662 -0.12188545510955064999 7.463403929659724767 -1.980053396202040128 3.9084386468241674173;-11.343004794859380624 3.2075203423899121269 -10.637674190283417985 -0.045345453872827005959 5.8347482594620192486 1.4869130738852764928 -1.7387540137487449421 -5.3201085909039429467 4.6845661637077888884 -11.614735695071757959 1.1742862591782905479 -1.9405482750431941597 4.4716770196089337119 0.13731055075889772588 -6.5498577795128536394 1.4760333259731754918 4.6665704368286915482 -2.6132497865620503141 -4.6521767312278523576 0.46943429133815589571;-8.3726103035852155188 -0.089029518699651255531 -7.9367228592381247054 0.33684102992257136666 6.0099432344569292397 4.5401580611877632165 -0.50426120680278441188 -7.5060219086471162697 9.2321066452878302044 -6.1759871872517333458 -0.095249073471635151145 -0.084467317057265942082 4.4190547709817069588 3.612763919445151295 1.6591161232223172739 9.2725582531394792341 -0.31985765783922942562 -4.3669819668164882032 10.752950143042673048 -10.733931178789147154;-2.3068864276380138811 17.14941353429141202 9.6896824207700245069 4.3090870508402510097 11.535475984683131401 -3.9088743083067822859 -1.6580007504354279391 1.6770871319582680847 9.9387683443339458478 5.1579912116365056463 -5.2162068806374746188 -0.88223997855526781198 5.3152192942933300657 -2.5120553537999912308 -11.773378561609957771 1.9953130711889408566 -1.1720460536624770498 -7.8622871297055416662 -3.7677766120058331367 6.5976320589201424838;6.2559711509049220624 -2.4723602943765849993 26.500741092079756811 0.31020432558657407007 -2.4935242474640304522 -5.9749984497903456671 -2.9636448013371570198 4.1349487301025353858 0.51133763384504227201 3.2258694829798701953 0.8288262304574891548 0.25993533916902850089 -0.48983756086368845928 0.17222191273615641838 -0.89391746356899448589 -3.8524981409915151076 -0.12703335509623392419 4.8228974475488461948 -0.35453629829079857938 0.14716225240616742642;-4.2933086812993490611 11.549514053236022093 3.4432968143730726673 11.896132546652292916 7.5109192878305615082 0.60851598559443609293 1.0866321999463550707 -15.907189854367690174 7.3797026418846805029 -1.8883869285721122111 7.2814689598618711486 0.82945791581783601121 4.1962539446031215107 -2.3229292643546028962 7.2918858992824970855 4.7086051016404066871 4.9890513110345668935 -0.73877494342479554934 -0.71652017519970734316 5.1068900729872535038;0.074905831661750008066 -0.055525178363278165916 -1.9579607806777841184 -0.031328970956056211017 -0.1111113742785436731 0.13865948784456663678 -0.10163695945764798789 0.0047388257688254593544 -0.20471511636515424271 0.18866501657975415229 0.11921375505153805618 0.054071884313227208674 0.0031345316773589227202 0.015802381922972414535 -0.069439715531180057351 -0.20037668981147788161 -0.0087376197624178513629 -0.643796291216063854 -0.59012989648672520282 0.19176151796648793768;4.3371431449764799027 3.9710178679268204327 23.85276009308870826 6.9473836215489823687 6.4968862919197833961 -0.4361704371208544595 11.982869911069425228 7.9991223198539680439 4.8355445810697785802 1.044168483000161407 -1.6619960578954569019 4.2144611879984292813 -6.26051807080216971 5.1397437843901823129 -7.7435055956045779624 0.75617860473307485503 8.5786381301175094194 -11.964774390547093574 -3.5558542009911020543 10.115424052159012192;0.10372919494350578418 -0.75576402537513232005 -8.5499218083661379097 -0.26699246617523142433 -1.587578398209645858 1.2012863189488742766 -3.1074148977088045243 -4.330852419030046363 1.5410346035677253695 -1.6732228588583046847 2.546448843940837925 -1.0138835982087441856 0.63318593985823312664 2.7848630005027374956 4.3042521797945392237 -2.3342294370804013148 -0.31123261375832483866 0.5903838174345190648 1.57080754639784681 -2.1447415897199371138;2.0489994674249460971 4.230363829294204514 2.4877666028463631953 -0.71555763673432259964 2.6081634822218888736 6.1450755755678363457 2.7656163370903019683 4.4352645777404609007 0.39563398546994704708 -1.3193085638742276799 -1.2271091012830064315 -1.0250284723847413737 0.097832434744240789892 -13.544643320993831281 -4.879616913132369227 1.7821927276853950506 0.30725258074863115443 -3.9810805282010499617 0.079036755111762044268 4.1137992439368025188];

% Layer 3
b3 = 6.8228228365423060353;
LW3_2 = [0.062031079656831203395 -0.11109475496379889181 -0.095806209438009631851 0.024245252143367014563 -0.0078387830200988793672 0.32591039004418265179 0.11503847376338995068 -0.12775164158027824124 -0.066068501956210543002 0.01944780221470519474 -0.047410486762316739195 0.064116263499430989348 -0.042900750146235538951 0.032713775164050509781 0.096427429645803058866 -0.016732560647620537547 -7.9245051886369397565 -0.015751012217939418247 -0.16349093810145881589 -0.12231648843924156078];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
