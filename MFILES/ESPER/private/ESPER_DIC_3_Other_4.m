function [Y,Xf,Af] = ESPER_DIC_3_Other_4(X,~,~)
%ESPER_DIC_3_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.6475588843989881216;1.2128911201452685642;0.55133702148819641042;-0.064499670089581989663;-0.042236531714878677857;0.54324930883095079448;0.18891618223790690445;3.7492686659136151839;0.54998221558659821095;0.58465282775578653052;0.20237538556569989456;-1.3581716422446306058;-0.31331967650162562133;0.085424184176045594996;-1.2696969554612553832;3.2067160728565333727;-0.61242441654201662526;0.25964057611426472061;0.058543063516089913212;-0.14302598868062227355;-0.54373047267436658281;-4.3637064611947220527;0.78115322486587923656;1.0073460789648356339;0.26520995023366850107;-2.328497661763209603;1.7807349987648248835;-6.7340954269485351347;-2.3392387364614339873;-0.53462176479247192074];
IW1_1 = [-0.35394097951130842894 0.56180582272405410471 0.10325678955486045085 0.12535684875232172564 -0.3753860050105923829 1.9974613716997846602 2.2294330257731189704 1.643600358733850797;-0.022321991245551637412 -0.2703828455522183094 -1.186905936405753037 0.26371201400174443252 0.53313469308868577379 0.34483239143262839344 -0.44320582699948907202 0.074546201511203766255;-0.25388618819034497465 -0.1796982456831135444 0.50069890974250563787 0.71867876118186713175 -1.2261482158780117047 0.49603208222239925096 -1.4002809060184169265 0.69490717370796406538;-0.17746693895569812249 0.55352026441704760273 -0.16792134932791089041 0.13316004092187166963 -0.22216952024894520701 0.045879984123649096561 1.1549684034558105328 -0.52270915403190143511;-0.37169120296843843887 -0.17950833535285684595 -0.98076517143341845895 0.46002255386075219246 0.29527787403087446538 -0.46081972547282507024 0.33793577222529064263 -0.19023726064754678533;0.29970168830140592187 -0.78782508865094413864 -0.45240030408711862098 -0.010343650486514394116 -0.57538744428208632442 1.3477548585658183367 1.2102962357938398252 -0.0174725124636261539;-0.18698258593404551431 -0.3310522180298134387 0.53771343664170578869 -0.14530626548206018733 0.75242379214769328222 0.92437099213249074303 0.57243619764706665798 0.46492128877266070131;-0.58956270238223806857 -0.16085364412961519753 2.2812585259294615447 -0.29095821700930346587 -2.3612524770278748854 -0.68045995692275695887 -2.3522548238598846027 0.81576070083375917807;-0.37191031361990012361 -0.42152709502795870922 0.48016202693130694001 -0.091166499594007910368 0.99100041502909885782 1.3133657510638088173 0.28013997067611351444 0.75419474410261466701;-0.38241007822604855537 0.2240010448758801842 -4.5166557538663436588 -0.68248815606098955922 1.2295049569728280225 -1.6433652439429595749 -0.36896901578807739241 0.06972095951415577253;-0.14130052013771765562 0.22242880557872940495 -0.96084072287632882325 0.055560685731424502842 0.15702781887956349105 0.34308158292732471306 -0.84416235963937735765 -0.055741269774505552981;0.044513626723747756753 0.52483924231157552676 -1.2599139178317000365 0.89945060795513509522 0.11512016773583386153 0.34828019683911942694 1.3854484486100733243 -1.6962786680774608605;0.51896532039829190719 0.37597199041489387517 0.25069530462734640475 -0.17429011834398799863 0.79912371067885568099 0.60366869405344536492 -1.0523832254391429775 0.33557029595565990299;0.17347076313136627901 0.14831949392690421674 -0.70409535004417522774 0.072559756973896563648 -0.53968576710182114553 -0.80292903980435348377 0.16389233851198464764 0.57423269437987223274;-0.85680743204275300329 0.22472941851924443935 -0.50877346445698801158 0.091486499401663867737 2.916856714836716602 -1.8399753414900592574 -0.33047210746746130683 -0.8336584262206951923;-0.26332766928486106561 -0.62406493396742490631 -0.84699408275213838859 0.68609040966528989092 -5.3812964250992312287 1.9847008600422073599 0.26661451801335400713 0.12823365102215864009;-0.28063975973044691381 0.31611051684592478273 0.10720505615602214655 0.44173086206989964353 -1.4904356665492051182 -0.17573434750434682727 1.6354849096361423477 0.16480959405889100688;0.0086632588234119446008 -0.15917272774946222835 -0.13689517304182213797 -0.22897391130366931411 0.10749408983262766226 -0.37044905521213622457 -0.081562496706997902884 0.87344580179234376782;-0.11290637268920772351 0.55862863773419235702 -0.558373092044788355 0.15509130211892449558 -0.79943966267910260282 0.042386196476912135767 -0.3051105356597584306 -0.15980588387253200078;-0.14848863785957158723 -0.13551558870281968372 0.44295006645645473853 0.33623817326686139539 -0.60161757797848958162 0.15586688068452611566 0.82820058119210759884 0.2457645904384237745;0.26141991312659623725 -0.92133107806305303278 0.49978918724391119266 0.04119504574126361951 0.099750710160978764418 -0.34681422632183384058 -0.080064754919210473494 -0.055193136515916028928;0.056613440543034763974 -0.21952036760950735528 -1.1339199533682120524 -0.59944023536069079849 0.49920795859142297335 2.0017361599048903997 -0.29543834683031422461 -1.6028986562796714299;-0.34408869190154900419 0.010616456021716985658 -2.7665285663401233407 0.76996873284075195709 0.55719099203039545998 2.2999577727427644724 1.2989717958489139793 1.3268083983363270217;1.3106453513804090516 1.097992433586578942 -1.617899506728926573 -1.6059847328253571419 -1.8752686995932257297 -0.78718876793115988288 -2.5071322572776799653 0.50810807745495334409;-0.32457348983959311006 -0.029721745344359853935 -2.4999073076398379278 -0.708276035465067344 0.40002079289800707151 -0.97759005005130572563 -0.66375956191936669182 -0.12710089262570281599;-0.056581895861515858759 -0.072296718452854388803 -0.99332204423944703287 -1.1046430125268180689 -3.8460897792788300009 -1.1924438712576612698 0.47944041186326985526 0.53116173941657351953;-0.10055274331096611395 1.0926248990603790734 -1.4259080803342205623 0.31922859546363901995 -0.53944150619488429044 0.76446573395055805733 0.43893226325207046479 0.48133651547674960458;-0.73447483491840681591 2.7031464258831610081 0.7153257566646221699 -0.17406468004214842304 0.94703370716039581012 -2.8772213926586238664 0.44344576170773508661 -1.2239785838454886324;-0.35523049754876551143 -1.159946547284880447 -0.003912966540961211083 -1.9793235556449562118 -1.3480262269317428991 -0.04027109386080499065 -3.2515563395385185252 3.497472131688869279;-0.23002744728127949569 0.19545843085664782457 3.5294502833214629334 0.049184504865885145253 0.84045250533804249926 3.255409508485274106 0.36061678632774690767 1.3326841595654970174];

% Layer 2
b2 = [0.28547372735864667836;-0.80804978760497336854;-0.78207509242297335028;-2.4022947743937805853;1.2198318954090612287;-1.463283717587196886;-1.8050568584019106577;3.2084842873382499739;1.5913396284593959162;-3.6124526584882459268];
LW2_1 = [-0.14657090589793331237 0.3302539963996126704 0.079835109869120540749 -0.21438570144780344506 -0.33113481594153987286 -0.11597286036200793458 0.65082650988654611179 0.2073406257730375235 -0.17628043625866521293 0.023140940140167678279 -0.91607478416658205678 0.48329534502291993103 -0.077807688090650584112 -1.1083363604829938875 0.07201949595635175061 0.039901458240230738839 0.77341760858580599347 1.665845357484443845 1.0754697696345048019 -1.8450339428467705805 0.90725136698819019987 0.27085132921719290433 0.029819271437285955334 -0.19862819391970948368 -0.24839903950516351028 -0.15622062279076817659 0.77033237189907644016 0.40345426141476797843 -0.48999160495414761929 -0.091810497667889720552;-0.15782959187538439516 5.5577272639402082177 -0.61858211381494454528 -1.3280804687551501786 -4.2554058319232712648 0.41444733209686329678 -1.1316342810440429556 -1.3762930061477565147 0.0097523948743139521333 1.6824642779198288878 -2.8036320591475827335 2.3670768502136256828 -2.7506084693581809297 1.9777714409173592358 1.1612808997556747226 0.40055057129541804528 1.4083375467599694719 0.12759084133840251085 -1.1784514413381557141 -1.4677225705437408898 -2.9224762205802452542 -1.7396804615256813431 0.26187952388010243832 0.62837777718653853309 -2.9014436238592891115 -1.5221897816244449597 -1.3838723875266905061 -0.23054276192864164852 1.5433403630880486723 1.2082841376955943957;0.49177540273269931825 -2.937604864158902096 -0.58718054223328342012 -3.044907830243197111 1.7778869407899917654 2.5587989788647877987 -0.81674484836542837751 2.4359523345184053156 2.3642685660365807543 0.22914581813958842527 -2.640365762659511617 0.13964365821053889571 -0.89478012249210137075 0.45535127154848542563 0.20881367964392025249 -0.81757380197486007045 -0.68624635069684680744 -1.3715651603078773402 7.4471098846231242874 -0.0025160740347284979435 1.1398941865120046923 1.8697916227997883887 -0.46060667312601039081 0.023311283869387820766 -0.91348742751072364854 -0.07095757408957079071 1.3857983514117744317 -2.6572116480688854345 1.3593994923368717398 -0.74613694053970858189;0.65659453299197279019 -1.5404852938222202141 0.84634364332439571132 1.4658827174853794606 1.6054341194956309735 -0.064802991106937213317 3.0365869732364316746 -1.0706782838990454021 -2.2929599882334232852 0.265478933326217581 3.4894621266329455267 -0.6936390465630690727 0.39695436400964506651 2.0697785308814955485 -0.8434686105331736794 -0.22024987724729774841 -0.2590968214178926976 -1.4964123160341094021 -1.8943127464524560644 0.10326415231992998323 0.9574643980035661972 -2.9427170034511309638 -0.47591007251823469471 -0.069669327912947498493 0.65979665195212455764 -1.0884286763392763131 0.22375285356132254555 -1.0789423949409517878 0.34620368777702076324 0.46962211365806438845;0.2013998860249009426 1.4539443257337232307 -2.0976502951067796943 -2.5883299153282863792 -0.38963818339355804632 0.47751033485313826299 -1.1882728587284976385 3.2478649650201671939 -2.170068675978249928 0.14822627966624937756 -2.3786715500027209025 1.7504724198215972919 -3.1059327173927715471 -3.3762645814808029954 -0.41153370421898677334 -0.84890693861020571909 1.4064213753193492984 4.0758879499149927028 3.5031778889175022584 1.9571234039738141242 -2.6456841580885352982 -1.1343535748299329313 1.9463282400514587689 -0.083863116679679092225 0.71253220072731160428 -1.729357298045699487 -0.19438108393704883747 2.47136197898188259 0.74830726889617604769 2.6734447459299981453;0.4807558425043469974 -2.1730406979092129482 -0.34016656465427003164 -3.1918235426421381895 0.46045188183314045283 0.39546406981145343362 1.0962992174958856584 0.76843002879938981931 -0.045616481064233438403 -0.26600407823815103159 1.646205313946547566 -0.77286270418730784737 -2.4340176725912372468 0.024942471267345833752 0.70486574938598489659 -0.76587592085004208009 0.19482640810002579967 -3.2279022049210928103 -0.96090356860335324196 0.92963787112039841798 -1.7822813248206612613 -2.0858793121863299369 0.47927262795760899872 -0.15307218911624240198 0.0027156374884944969351 0.25681005104661758232 -0.73811463717654579586 -0.033453371438083502609 -0.46171508499981062101 0.14430881072473264459;1.1395002908013562859 0.32031392472474506938 0.26242288944167513343 0.5143914587235439706 -0.71329062548424737589 -0.87868451306736028439 1.0878538589302135797 -1.5780293360823758331 -1.0475876057739872405 -0.056907139641145410014 1.3786428254620530787 0.054095379575175218945 -0.30358869519438030915 0.25776773497639926536 -0.25474140557571250953 0.33005506665251060916 -0.32416522038335005007 0.40839605441621190662 0.85776471510599083814 0.10374299114296359203 3.8410681647437341368 0.59329993098033828591 -0.64950599416431264999 -0.44434416288350508939 1.4680260263005269206 0.43709578276114463558 2.3182466848070570897 -1.4156384306197156153 -2.1249505331823899112 0.70310024971233897606;-0.3109335999803120032 0.072995644600655024137 0.46711873269635661998 -0.0061063325235463806334 -0.098888880061239539665 -0.26889591017767133785 0.78014908487266065862 0.4090689329727540402 0.12460759382585395727 0.20756615578758408347 -1.3532149929318899595 0.76401521844061937028 0.20986337443207270237 -2.0106409269527762973 -0.051389815173228464706 0.096207807124078031924 1.5748945264411944311 2.6642140938597989042 1.2926872669372915237 -4.320575130487142701 1.6015042056651949132 3.3565218392629039279 0.067507802852600370946 -0.37212689734659243346 -0.54679414239400281339 -0.43305225840878081023 1.2553018348035029916 0.84854351357210633378 -0.83707707164074773853 -0.060201331109790881535;-1.3658054287410272831 -1.7446041489605135233 1.2580383218388238031 0.93545157478774398907 2.5603085879032674299 1.5395072036462660314 0.37740081275532544325 -1.3821774247555369541 2.0499433864644727166 -1.3473562088640600454 0.31017696737517258532 0.65010797513407159176 -0.49696212272896966855 2.3883899324203663461 -2.2873840736450037348 1.0554255172396671547 -0.0055023222654801817039 0.4550087656432359462 0.92329464202969391273 -3.6634898712696486456 -0.40175280443861127733 -2.3890735921088972482 -0.25994119102908663788 1.3044703702189850425 1.591682586748489614 -1.8663025411061633374 0.074751563685003893922 3.2890600959762448241 -2.4505681301792292537 0.9690493389302873295;1.5326725389825113233 -0.073683963708348135246 2.4669499754005341785 0.56425773268230361435 0.64062260549889316064 3.6432173767933799802 1.9850371513386304567 0.15689086071256680421 -0.48237978712671142345 1.219033219321248529 0.54453339067563266696 -1.4836908876380003885 1.0738169841179581177 1.4126708207215967761 1.3602835543950109187 -0.1723371318265914387 0.12726186374134329515 -2.933591911397694485 -2.4296813638543968139 -0.054303643733255885229 -0.22353359739123704331 0.18907440360727259532 -0.16420503521295770621 -0.5662744235448327057 -2.628864228997215946 0.09888184053221764358 1.7294366820643949367 0.57106271458123680773 0.66967940261449510064 1.1701193118842272423];

% Layer 3
b3 = -0.56352424226463271317;
LW3_2 = [2.4031131679932000722 0.10975522411197802253 -0.081419392144948185552 0.25038977832084602371 0.069303431242541513324 0.066367842674805860304 -0.13687563357416526744 -1.0734696055071837328 -0.039088918396055070958 0.032517212787419667863];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
