function [Y,Xf,Af] = ESPER_silicate_6_Atl_1(X,~,~)
%ESPER_SILICATE_6_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_6_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.03];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.604229607250755];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3095393010509068787;-3.8514372013789359706;0.59343925442499245726;-1.9254157924905501709;1.5257773687297224718;0.16680140799426732001;1.575686849959701874;1.6038801631158947636;1.2461787790901690531;4.476126015109431755;0.30731819429615947481;-2.1682743625046771996;-0.90049273519767480956;-3.0514566050237941219;-2.0901525091313861715;-0.59825553676512177592;-1.2621305430514668799;-0.45675329618926113762;-0.79094002446767075476;1.4251824723327368716;-0.20406724824213870462;-1.9373577050091188578;-1.3989851127623749161;0.46060535205240626944;-5.527059376142394953;-1.7328875850683993498;1.6747760911849169929;-1.2633194164606780241;1.0311515525337699994;-2.7188245573594338467;3.2681409638964313835;-0.89626852054870120856;0.0070037050522263749608;-2.7055555213868096587;-2.1598317636783006535;2.1815792552987223196;-0.40250313997999798143;0.59824784407115094709;-1.7067949551240089168;-0.90141823266842424633];
IW1_1 = [1.0855574382124333344 -1.9194337918710004942 -5.0065860568772739825 -0.92640687977781333018 -2.6589171911619140509 -0.78755974494371117078 -3.5351200855453206451;-0.0074043849824714357694 0.096647574436664607234 -0.82746970967853750167 0.79749895622858313349 1.0809320110650857405 -4.5194894825487716972 0.61347518696269909277;-0.7257121488641941065 -1.0343439934484635057 1.2958751205891276825 0.50646833475149288795 0.56455745314401084567 0.39196251548538080245 0.13165462594274135455;2.3303418760956446931 -2.1749269772025869862 1.4106965376283426838 3.0120719609035182529 -0.9324279592703931252 -1.0471827134814351012 -0.41284941608694447623;1.1273841177530345981 -0.11762825503510283831 2.6548889458842204192 -1.135928213137080256 -0.32709380494630763136 2.7916935134497973259 0.60246452126117144843;1.4357441344413546247 0.47091772529209352527 0.90218011711453272028 2.8808596113874571643 1.3655916196552244646 0.42010670630513641255 1.5570292778771408493;-0.098577187804387456094 -0.018841769876101525927 -0.32564070680163248461 -0.62568204872564781027 -0.93067677652725899762 -0.47884448495461412465 0.74357290313206003685;1.8886013410156512471 -3.4259627350283743397 1.9207578571030277104 2.6140576754950455296 -0.23239898296191507931 -2.3674274812189688433 -2.5952879142836193793;0.16816850037335934198 0.16499264835383739558 0.089541006952873286595 -0.11012620648234128229 -1.0736881522284353885 1.0741855009225074191 0.93639596204254149647;-0.28641321135010172627 0.66957196069356150758 4.3546201516828615397 -0.92167460480351237617 2.1138160062520863214 4.2834364606454844449 -0.92862413303857871405;0.77484361698904757887 -1.8251132304985824284 0.49936103101859358189 -0.37834056652245068308 0.18535314187916779316 0.65844511510012715405 1.2997610768593006458;-0.23751453347556625295 0.84524940864600150991 0.85108397613434916273 0.67884391605566574146 -0.17102543352902926932 -0.19407584153386869819 -2.1886469980468654661;1.8429631189340980324 0.94187834969119765827 -2.5564707097747692011 -0.61555251569667945866 0.63988994326725379125 -1.6754708596398908416 1.678284767344413897;0.99188085606615306045 -1.7823242564369905505 -2.1812700073697501857 0.31873052353203823461 -1.360206047509664673 0.22114227435930264298 1.2858304957661443879;-0.59119544888251696069 0.69709257940825608557 -0.010629396916553728036 2.6616480822841883658 4.9857403757748306461 -1.5393904253513890357 -0.77575927679946110604;0.49054914456056358807 0.78427766542084564882 -1.0240074380435695289 -0.14159706407329669675 -0.16617888175300057907 -0.263117041287585951 -0.33136033598526565269;-0.63067480545958709559 -1.0210913551637585961 -3.3067720087827736641 -0.21302126305474064494 -0.17535719972801724897 -0.97476046030298080236 -2.3051187218162012549;0.45643571450960163105 0.16404838943465133161 0.90419950046779551389 -1.5156561253364531083 -0.20981573952297613572 1.9076579564324556149 1.1791223987979380095;-0.4748212666554605943 -0.21118049979104885905 -0.65991572318182589729 1.2041989927326250953 1.361507022875223516 -1.8417866401842719615 -1.4072226087829571295;0.22774291200772378563 -0.2784854175735761439 -0.17342062171321770414 0.47132566084519966765 -0.30974521435947605097 0.37077362369844207857 1.1380030733077126648;-0.38569810395529430247 0.30084703538033780168 -0.142107039793364337 2.7665754677558882513 3.1976462439539150573 0.75046876355701275241 -3.0051958297665133379;-0.36555708576654621922 0.13733664629576963767 -0.35448504656933682577 -0.0013445826890461263451 0.81285999111465145894 -2.9402826283658005657 -0.58639527105190603073;-1.5352082982842225611 0.3017443138532603375 -0.4158737289046957053 0.030014397018810388962 -0.36737678846955795775 -0.29152299241274814978 2.8376820843216741252;0.23139571315237483784 -0.58192442498295271491 -1.0824486797728887222 0.37391491348271432837 -0.70924658768552151233 1.373997888200203521 0.71621147128545725735;-0.11383321928245603016 -0.12273433677593741098 -0.76622160360881508279 0.10925204337884862615 2.2480330968257296043 -3.9069467081162008171 0.8478262594410130859;-1.5040686451256839451 0.35425732532690940024 1.95067706864895829 -0.69831762771483529839 -0.67654563940133971567 -2.6173072531545527042 -4.9956899811509680731;0.37904413717765794711 0.91265747999368795895 -2.3858350619194967912 -0.1647784373777735345 2.4639792310988877233 0.62357971965937708525 -2.695416227030901446;-0.73995372205893095163 -1.0597174082198015377 -0.90119866345798949059 3.0282389080741123344 -1.7666198513624442601 -2.3704711805482370224 -1.6156839169384689114;0.66258396206120906413 -0.32883761835946817564 -0.28342634693407453561 1.8616920493287745231 1.3218855946445429161 0.46383268118219450615 3.7702747778194067863;-2.8596297409465889494 -3.3338887755904109689 0.88515730374047607576 1.7077538966424616884 0.54385111155464616051 -2.740932378264136382 1.9888810245306662861;-0.085524514960698669319 -0.36989611997796351117 0.40974129567768502458 -2.1260701941215471855 -1.1842015326795236607 4.6768140376256956969 -0.81573535902833449462;-0.17040143222304346415 -0.0044704520214896596372 0.066293297296562608834 -0.3192791544385177871 0.38501290919309677507 -0.6825157177189675739 -0.59555539839664051183;-0.14446287088415674105 0.57465077426101729419 1.1561851647858207848 0.28799035924741733794 0.82911362029053603528 -1.6116288949292227883 -0.77471856551781326239;-0.80032565133358346543 -0.42031475093587039593 1.5154271455709384941 -2.7949733067481847826 -3.2604794727166321877 -2.8375852619648265218 3.3326787569518585563;-1.8598092666987000587 0.46084259654946801987 -0.63185291894425010817 -0.31160219119324894521 -0.35526701849626063368 -0.69797175278409784305 2.2752768949766042361;0.52191816558655723668 -0.2662975274580814955 0.19485574783054981918 0.39504548320203669576 -1.1681542741905537319 2.6606649775252528833 0.38305635442377128363;-2.3405589854148263207 -1.0016610342049130367 2.2302784801139918791 1.6873388983569435062 -0.09584081986193884739 0.78862693041566866992 1.8641547459392575625;1.5341535385381082079 -0.29100744388484456326 0.60161027293841562447 -0.65963404538681746914 0.39048737770034025463 -0.9315575639038488065 0.8157378087314104409;-0.58193548013628970672 -1.8206863786533089566 2.1749564374951733114 -0.57232396672693142126 -0.57291793652080635901 1.3450656505894593717 -1.5465827642418539245;-1.7955202493460324931 -0.64099692484221926225 0.68986064799963731087 1.2862950233292864688 0.1467069523815189569 0.048314256038373228075 -0.36018371425412432085];

% Layer 2
b2 = 0.29387771271817580976;
LW2_1 = [-0.069832410704720654371 -0.52411877596299238924 -0.56176088339806895533 0.013856522315525098693 -0.18561168914345141379 -0.076932531614527954744 1.0124572552060093766 -0.082111332755396559957 -2.5757781484903805591 -0.092700045081912346712 0.12651083504239274413 0.23574936041512253859 0.080210535792722775783 -0.45487799246232546446 0.13088342872102867731 -0.85004316647880795443 0.11936256466646978647 -0.59188843096138055166 -0.7981227368833836433 -1.350915509408087356 -0.12674971473916085696 -0.81526974624922887713 -1.158898907249746868 -1.4300060273431900448 1.5652367675091654053 -0.07050572261321079448 -0.39467586542495119994 -0.049081162772557855589 -0.10556810737802493905 -0.024648704018597054899 -0.23436878842445915683 -5.2194885419594232445 -0.94716176160626863734 0.12569434295313158811 1.3544184808228885153 -0.99536192694080172227 0.18723737356361747075 -0.16731691245362981246 0.13871922231546771065 -0.40296582298613847772];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
