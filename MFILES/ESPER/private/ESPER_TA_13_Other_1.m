function [Y,Xf,Af] = ESPER_TA_13_Other_1(X,~,~)
%ESPER_TA_13_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_13_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.549723685958034558;3.7080506268192618968;-5.6371099247191969184;-2.6103936546437140898;-3.0136797971153588271;-0.40441291573848270335;50.842924253948446278;2.6417109364156341478;-1.4093063889073838002;-8.8816565299320817672;1.7150410582872579468;-0.092070103806669023605;2.649816621761341473;-1.8931520859263750722;-10.566259839343951299;-3.1135722871085005359;2.2556191038464046272;-1.2303418395322127665;5.7348059688766559461;-2.6211057821437138138;0.20794186607149714452;0.56699257363500965567;-0.64790361730086321046;-1.3533243914159092114;-0.90579189115672087418;-0.57551376348641691827;-0.36035591867211286266;-6.8884738274795029866;-0.6827891955680821523;1.8324520559401535902;0.34260613537929840433;-2.5016374968504639931;-1.8144514795927477735;-4.163566614085041806;-0.021121707084495691675;7.6370748131961336824;-5.3652275678504510736;-2.0733113036474235535;-1.9411845870080752796;0.61116204340332835887];
IW1_1 = [-3.900366228627119014 -0.18084353887251758408 4.5336794408087630615 -5.7759886140209584227 -21.648734078571855832 6.6871195610485818506 -3.8101562807024742519;0.96018836028485876621 -1.0835061602184845597 -3.5858069137928976211 1.7567576198407532928 -0.99342292312133406718 0.044910245594654937817 2.16667617639957788;-0.56784275978802356555 0.57633888140109945653 3.2262199000640090496 -0.68297657332003980368 11.722539659060354111 2.9873608492977887785 0.10396440648365996851;0.22526155984272444588 0.072245671065804303868 -2.1205924506530937634 -0.3103679214674172071 0.18980383894726024496 0.66253528769506497831 -0.14617721777578790432;-0.33813154761104863288 0.27825499401482201023 0.63878107018911511883 -4.8481463325378841844 -0.61232995440412862909 -1.6066870683985736701 0.29440733405331798167;-0.022399725853053911034 0.040037729362094549856 -0.53877333419841677564 0.48063172733833237071 -0.11301028751414790574 -0.42502975780335749967 -0.42754991679788206804;9.2378295997524713101 1.4519862041477384906 15.517901466992912063 56.993571497060884212 -0.41349275984211836255 -14.414952823058463593 10.974178484668540179;-1.931518172056507554 -1.1729933967981596155 5.9134871824683479247 -3.8652449168558655757 -8.8521189986165307317 -5.7542216751375283579 6.2245984762129467072;0.33145774243495179645 -0.34012701865830141656 1.6084632240149907556 -0.88569317146880599534 -0.64934893208431021527 0.10007907579010526244 0.22113693643454149229;4.1492562399639503212 6.2356102892664608817 0.20913581227429317577 -11.933638146984785422 -11.880427601528527504 7.8374251474950664687 -12.290400759014698195;0.1473968244692643037 0.069371400404508301585 0.58070448746046965383 0.1239459197870538959 0.36046490756926558019 -0.42356777881071472347 -0.16897716735023968204;-0.031766434928002282301 0.1167349854205949472 -1.9636195658503921013 1.8496613462839606168 1.8490520243563564051 0.12187299152811838232 -0.0067767303292322195185;-0.28610982115538818871 -0.1411839669703577882 2.1383425764942169955 0.17122621506578541983 -0.064832062526226544308 -0.66788063414691212216 0.084317458051508475947;-0.25660191438064905434 1.0569471513104675697 0.074516425043936102002 -2.3730373655067849015 -1.1547855489859562006 -0.30391155764287564045 0.030404014368134418822;2.8278796451789447453 4.5138337854322196918 -4.5590446974916254419 10.99288015160208154 55.196007604932013635 1.5279432607996281668 -3.3883465849494038835;-0.92393328919636330543 0.62769994024362529839 1.3937144707844553171 -1.2664734496774441297 0.78133022398044293944 0.15196083215228975427 0.0008388014176754074111;0.10986298745254012565 0.059256928171715614329 0.09070210846484967615 1.7313070706659494657 0.38844978342215014111 0.016277440751292525378 2.0040484869987880145;1.1169588678169839469 1.5549251115191133898 1.8989600665353179032 0.55595743968252986367 -3.0962881252264580212 1.4188484310332487581 -0.5593646135807845976;6.4985002606166286654 -9.235333375048357496 -1.9002593430501364402 0.84851050653864013018 -6.1457321263155675339 3.2111630287692003449 0.86711876313724411958;2.080861945887773512 2.5523984666159393875 -9.0135042504783022821 -0.1654902687521426774 -11.198012830349810542 0.10540103101979848843 -1.6304110000901133049;0.039818779891612476884 -0.093158511689035689018 0.1978976703470654297 -0.24385136444225066765 0.31214169963768284566 -0.012989371208948488276 0.098528835971012029837;0.77433631279887504828 -0.22866301722640686167 -0.79038130905643888546 -1.569569431151263128 2.792269685325837969 -0.30949088705577887382 -0.15324060096336705739;2.1860606434854434887 -2.8279281980854231726 -0.28005841380830626131 0.19782057264970978605 -6.8178710062934344549 -0.059603025247194157954 0.29291504267709778109;-0.57093818494628401083 0.37548099971468662517 2.4166941950724591948 0.098383590710100402021 -3.1222172607780986908 -0.56642127420856591691 -0.056346443227015402533;-0.098865908408525132733 -0.56038089622429188008 -1.1945243481871465896 0.12276893163160146338 0.97368295293244833122 -0.44649590099295666246 0.23935882380569806216;0.07651465424506682933 0.016474757851488289195 0.3091973795364497124 0.85125969293122727422 2.2228330880077291631 0.67711551008524917261 0.60911626542600183498;-0.36684482333817175492 -1.1518260436609404351 -1.6136333439724646066 -0.20141127282329190917 4.0755838862741224915 -0.5456038933428321025 -0.15998523013287221928;-10.333798574793496172 1.4990501147140953275 5.5273495928694460488 3.3763883632678393099 -8.3768482004355835358 -2.7745980618120249517 1.5025962233016059155;-0.00075446610619964746096 0.028830562988393211576 -0.48770180048224681668 0.43000919575456408861 0.15965535299931882252 -0.55103712956751815799 -0.53712073882098021471;-0.39497117113452201442 0.1456236114163722839 1.5136739451734453343 2.2855795901727740116 -2.2573285518170624897 -1.7633144705586929479 0.26145340841761938178;-1.6316817822973508356 -1.2433249128590435628 -0.68415394417373254221 -0.11355079977614578046 -3.8156640052443941968 -1.3566894818314301219 0.58683484958639142715;-1.1842017872582055737 0.30996650234133588109 0.29520066423537050238 2.3218391122940107429 2.8486028779916190423 -1.4937958318185085016 2.7218244535011320018;-2.6421915081034397232 0.506814591598172548 -1.2106288330183341273 0.76457548985361412086 -2.9223144600804977777 -2.4217439263026054874 0.63622766063492219857;-7.4838059968007151213 1.1777437808893327365 2.3436994119766469957 4.9466325488371216679 0.45884872794320819001 0.18666683960291374778 0.28444944996721166497;0.082597749901732228639 0.13064883612329983298 2.5511310654586263347 -0.77736848843310224488 -0.0054843827581518523814 -0.93810662787857113099 -1.7238108060027335089;7.2027894962622456276 1.0499690955634162215 18.434794606044416554 5.1091147561165657365 8.6759143062740253782 6.7741282063614107756 -2.074155054069517945;0.10602550349442439737 -1.8574892410229784101 -3.0852106999779658203 -2.9473413474751430918 1.1460646513599550556 -2.4378628766201893008 1.6518647726477950766;-0.054008425252988899457 1.262886085842274575 0.049491358687595375654 -2.0068403224606274904 0.36453039070373932651 -0.36181401225011206035 0.49014177540192288562;-1.0162578115713418736 1.5949227624144932669 1.2386867046323597474 -0.62064626573520731423 0.11350234833144443036 0.16558621764772468721 -0.75264779451316343728;-0.063642809206998787741 -0.0082687564814880286368 0.78649045545013274161 0.64633000123644901436 -0.26543017239452137979 1.0274555391048787456 0.53192001264412824835];

% Layer 2
b2 = -1.4286738789850232934;
LW2_1 = [-0.0076585781534461040004 -0.11065569722027818189 -0.063596465592266726574 5.0299559996389717753 -0.092621384812688889454 -10.105084752279962501 0.0045699110085752813956 0.026779631826339418688 0.59470696172519821321 0.0088080519535542554227 5.5749639353070277181 -0.26904157466984662817 4.7832700533446299573 0.20799622295084768675 -0.0074033449258948938118 0.37566461158235520124 0.22758909117235476272 -0.15442150210627372808 0.012887495239485121518 -0.028577799634944806018 -9.358011367959710114 0.64154342180443413302 -0.044623052760572025355 -0.20674461615811715043 0.85279083133216393442 0.92433632038863366986 0.12781845283949755387 0.013955541448330679999 7.5686850422808404915 -0.13520234892262633641 0.082355180615877959793 0.23482740890281697532 -0.087719009350126511682 0.016341901005030811528 0.094304338215301028447 -0.0080908560996757420553 -0.054276082763466459991 -0.22035676206052448589 -0.1348042157406888486 -0.49455281831598180142];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
