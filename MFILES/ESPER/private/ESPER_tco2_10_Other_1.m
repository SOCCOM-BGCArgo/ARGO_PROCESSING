function [Y,Xf,Af] = ESPER_tco2_10_Other_1(X,~,~)
%ESPER_TCO2_10_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:57.
% 
% [Y] = ESPER_tco2_10_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-19.590625736676259;1.6904381711122178;9.3955757796766655;-4.4793580164412594;-5.9828377829993888;-8.5443518864654333;0.085170061264413163;-4.9989066852381177;-0.11311371883390922;1.9522677005620259;3.1970358100749783;-3.5889979151645703;1.7489268911894422;-10.474970577392272;3.4094126277177841;-0.93603854539995301;-8.545112903697957;2.0466837894143368;11.346490964880678;-0.35256629620454077;-2.2314412945727113;-1.6195165654274548;-1.6475655209085123;2.5244117444224781;-2.1420165899665826;0.25071931746129494;-3.0675570535845367;10.171727889664043;-9.0450578978703913;5.4568532705837658;-2.1454001883599458;-0.75950210358409342;7.6630122060020573;0.74697921144354096;1.6839779756121174;1.8281644200406955;-1.0900193727350636;-1.3262336282994349;3.1574344350997232;-14.861022227708448];
IW1_1 = [-1.4191413539707363 -18.211293495527713 0.084626248105999169 0.085245573725334853 4.382618977091707 -0.6968270129553914 0.085301649454678732;-0.23599307461358496 -0.17217744994377088 -2.0175622327231921 0.11654572486180091 2.0469758231910973 -0.40230239228925385 0.71321260533964459;0.18605157647716439 1.6215004963892219 1.5845504528136625 -4.0946993131349396 2.0587795037692338 2.6156465231369732 -0.004996349220002444;-1.1188987631502227 2.0021496340424418 0.81656258721715869 -0.32714372720843482 7.4281561381371786 1.106965065528996 -0.05667934637073866;3.0888446290960339 -0.022831444110119562 9.7984450205055094 1.6876119311859752 -6.3374716162619924 0.60806568418040952 -0.32323491629515871;21.707158737232529 -2.0998062023967661 5.703480755240971 -13.803545074412424 -9.7615596517388639 5.5544358626749997 -9.161327543863095;1.3177633598784524 0.17567055357086522 -1.5497047390700163 0.55269666881976265 -3.8597057320521007 0.58909293194575252 -0.44070925156661017;0.059765793065284241 0.75821687369555513 -5.7290638482304193 -0.75704661935851769 4.2167741223362389 1.1390311637235044 0.1290802341218345;0.2977911538620322 0.91583936113378206 0.41467274834777929 -0.083872177728710695 -2.7920291485855269 2.4801702012637743 0.72421977770814461;-1.5644477235165539 -0.29250015943820196 -1.743879704101555 0.50305361621724609 -4.7202098122185783 -2.0188966122710763 0.85648387683944194;0.048757278518799511 -0.016117617544876613 2.2016391069296675 6.8554411453031863 7.8792025716740843 6.2456224430689344 -5.5616919011902493;-0.024306143951961599 -2.1895865935110721 2.4044114638763867 0.19854957958126249 2.9813994849817251 5.4823738465682039 -3.1959788214290827;1.4447301910179768 5.3853633611361165 1.5658896027446554 -0.70541880945413615 -8.2684690048541167 -8.390666618626696 6.82224114444581;0.0081836283023711681 0.11214748626481082 1.3095959429829773 -8.0867742071781059 7.6382457662107122 1.076838530227499 -1.8463402720453603;0.85796683446741107 4.0710806527372991 1.6462812562966898 -0.29620870358373341 -6.9290913756850969 0.17076761099382992 0.83805801468343777;14.036145122760718 -3.0423974536922547 -2.4730877953859829 8.5085174726422679 3.0446785442506208 -0.67893337621002769 -4.6281648806159792;-0.0063009389837002392 0.55044865435178647 6.7411041117425343 -7.4568259387547 -2.2691199680893535 -3.9013649843575 2.128760694306437;-0.041271580679522572 -0.14193135577325611 -2.0833635441955076 0.57976088535923398 1.1663391151157489 -0.24328095366551292 0.71060469429901596;-0.18563352749745521 -0.5559467914803683 2.2927997004925289 6.002184748705595 -2.9408079586858586 0.38975815395597174 2.3380865197325713;0.12691526613168713 0.075463836874445314 1.6225879994418757 -0.65253926858558942 0.9715655659950112 -0.026934058341183797 -0.51935127567368955;0.31634108563367669 0.45808956994451466 2.4387131440347161 -0.41789027052846411 1.9040776276349256 0.20403954026377513 -1.5668300996202278;0.043702654599042302 0.15010448490402498 1.4837373740094961 -0.45583088842723379 -1.5280868708110595 0.29190053696353768 -0.39077750425374463;-0.36007558658457145 0.33110796002459902 -1.8305823045431406 -0.92619431569589483 -2.1637208776666204 2.5213726043104421 1.8853553730852435;-0.3793321576899385 -0.56950774240822644 -2.9517881369276693 0.32047484800080972 -2.076772056868752 -0.23456652698329872 1.9797369512517535;-0.08884120438805844 0.055614923525052325 1.9266941414336101 -0.85951615105416279 -1.1962517277112139 -0.17938458668331958 -0.58601281351385848;0.023251161796580565 0.13776308992190012 -1.9634750399067855 0.098819956604293241 -2.435545412593406 0.6403009931671666 1.1717636884577114;-0.0014603283952139615 -1.0948912761465102 2.6614421528807206 -1.0280671228973168 5.4890368802507536 2.1171059550813704 -2.217095783420858;0.0014581189837346812 -0.13093278722151999 -1.3135354274942845 7.6958101395330525 -7.5951193545652131 -1.0446179045146577 1.8953079156318406;-5.2077291023723493 8.3865931155215261 -4.170267038571926 8.8246454779271133 11.275098577791521 5.0004358491536811 -10.28012246307383;-0.24888431202329278 1.1148096023370666 -1.7268076553407035 -3.3496795191399573 -2.9918262399089017 0.12421628806026054 7.9692191993415706;0.15921092113288129 0.20695678477605092 2.5474215711753714 -0.28266346164466938 -1.3789482181149968 0.40860492004907634 -1.0337368454315536;0.19306865873745696 0.11329941994327439 2.1970279708944624 -0.82188953420075417 1.8544667281946898 1.7069479370118461 -1.8382979224193678;-0.094915047370831659 -0.065925141594777859 0.26232506226827917 6.3529553955268181 -0.77586996723717361 0.85303965021054895 -0.022689482709693471;-0.19738268218911226 -0.076469433107083679 -2.2887238733828501 0.71752611987277592 -1.6890997065869395 -2.0724677840778729 2.0560472408014046;0.076113012297610819 -0.62993668035481565 -1.3016080063236621 0.36230593167163633 1.0867467352506359 -0.67899952843758071 0.32722097866187272;0.15077429710886264 -3.2934468303548718 -0.82758777809031536 4.7972572729062541 -3.1419089281352499 -2.4390418852020979 1.4741523627770621;-0.56124055160191721 -0.28153651491057796 1.9049371683968139 0.14162564703847408 4.008995230404218 -0.30812839740163572 1.4356309140367258;0.44662878369626169 -0.0039551062757015761 -0.69551041627499244 0.38234287902336261 4.0729156727354674 0.31888148106187664 -0.23614366629296329;-0.00047875570495362687 1.1627796845855114 -2.6561507484020179 1.085149428741524 -5.6604893302832302 -2.2030132480513958 2.2530143786386549;5.0184130968905967 2.0831711449465908 16.306245038216829 -13.691800842548576 3.1209366555923164 7.0270934522667794 -1.5274630970390652];

% Layer 2
b2 = -0.6287580996617248;
LW2_1 = [0.072302046071964346 -5.2822285690235917 0.14276470674326164 -0.071866997942127253 0.18242048993729373 0.0077625727161483036 -0.11005465075026954 -0.043451064095643394 0.051051540110657559 0.061681501336240396 -0.040594854610137815 0.022098711153607526 -0.01094392065230671 1.9633360689165278 -0.019125234748877031 -0.0030517880451460121 0.067064256908126577 -13.708591210405945 -0.39201166167859947 0.92432223328792495 -1.8159147476704491 -10.287397476065403 0.059781222627178408 -1.280252971700329 -2.8092379188466112 0.37227818010630376 0.95739589274823456 2.0176067877206507 0.0073942554198862869 0.15916599188786923 -7.5676406295599969 -1.154974892658386 0.63997054086793592 -0.99336948068556663 -0.90448823103586484 -0.011459718356067629 0.092716214367183192 0.27484755403366368 0.89747931873930287 0.0095642240525207322];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
