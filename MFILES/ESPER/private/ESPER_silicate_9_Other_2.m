function [Y,Xf,Af] = ESPER_silicate_9_Other_2(X,~,~)
%ESPER_SILICATE_9_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_9_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.2452871098298023966;0.83740932313315596947;0.044294127827663155872;6.7300765083880600415;-0.75382374972394949886;0.57018982397909356852;0.38921856379524838454;-0.21491943778991817737;0.87660716380963599192;1.0109991873806711826;-0.51002840420305428637;0.9605784700385853192;0.5369727291460301144;-0.11025823086744600265;1.2114144037245337948;-0.53716947735038911294;-2.5480838120217148557;-1.1037889138106589115;12.70738738551670366;1.2631880845722867068];
IW1_1 = [1.1185194549507488926 2.5831819713979289332 -0.99617023086561418133 -3.5239736804257124625 4.3160064903398627223 2.8867814827837490199 -3.3059327931436941483 0.77369310880067854175;1.3785521836792704597 0.28926964796291626536 -0.50293338683262189814 0.41392161163728857787 -3.6520042283902633962 -0.41149223906786591698 3.7106207644692310588 -1.7004501299210834642;0.064645099323400123659 0.010872065483068181144 0.03290203237960647592 0.56865646198369879105 0.1631529689118856874 -0.0011003750816158122065 -1.2247682106951076619 0.027336744834132949838;-1.4230200225768341316 -0.27148291769999743916 7.5091586897316906501 0.60718827117611406941 1.2849429198017898734 -0.11426812207717372549 -0.017187944531933795761 0.82319135887927030737;0.41640448706043081684 0.13162350039565270943 -0.040875642329267165842 0.14358799769314367634 -1.7970544566295834077 -0.30472098683597975688 0.33096292885562583752 -0.1308880421377416059;0.091476747662410845541 -0.26421304535000461611 0.29216382075651020633 0.60074325371560510778 1.9158180978682100015 0.17648295409433434333 1.0105873583843623109 -0.58409557485928442766;0.13280073546878060076 0.3926515676830157342 -0.73243893873567844643 0.38723342822770101535 -2.7662189184303436207 -0.080349685415013402667 -0.92681865971094368195 0.3339226557514072824;0.93223158086612933904 -1.0647427841171368534 -1.5914200461629484096 -0.25343502814646767796 -3.0377360525272929515 -0.43323363483095733706 0.94121489848803596701 0.41568691641872718145;0.11416662682753765667 -0.23786178493033760528 -0.47445231823918104785 0.27534175665814852874 0.8659118089411323993 0.049198689087366652417 0.38703521216532327243 0.10339509227579193884;-0.077895396624611312753 -0.1334136673563805775 1.0579465074957226101 0.14468855825802856563 -2.1110921848829389269 -0.065834752000190815968 1.2597310913348440664 -1.527140482845982028;-0.16950971607687709275 0.063071455022620459552 0.13096265713507371231 0.95079350220287905948 -6.3601882516244891974 -0.63246302335727144772 0.92212545873443096944 -0.26285974771310116616;0.20370138184602601394 0.3813286253726401176 -1.1729794247271458918 2.1832661958825654303 -10.560873496013806871 -0.086758088459540541604 0.83870695314023113731 -1.5394588550383545567;0.039508102986124414568 -0.058768313341156161456 -0.67111927350463185249 -1.1341972043814256832 8.2415173130803616175 0.83001966279042216357 -1.4283542361862222592 0.21615717930021388637;0.37990457648033953975 -0.48763164757246696412 -0.09888408546526754328 -0.090097887903208842553 0.30010526729960157466 0.074443706730779435343 1.4023088983762581616 -0.482177802795829058;-0.28249554606221255471 -0.13577466293248624529 0.50887256833725480476 0.17894831754076437336 7.126167083307790584 0.71567858261806516218 -0.2507079763596384292 0.30268782273076499933;-0.076304733501995763989 -0.07145300758506360761 0.02381114622658917282 -0.25692759723633734614 0.31897416905349190719 0.041829733044048161839 -0.12973623966030836674 0.028629723634416643502;0.12196059417843919948 0.18087659793773680494 -1.0573888426451929501 -0.34237903359156329763 -17.276115554634532856 -1.6130837427461417466 3.4985377319137582752 0.17798324077409119481;-2.298626855061997265 1.1355665693555097029 0.25921475334890248243 2.1043325423606593638 3.9853717541351900699 0.16428568011767466506 -2.1521133153007077077 -2.0556539455200559807;0.46299192238075398409 0.36746201827643698579 1.6038959873933613665 10.323260280079619378 6.1879377356619666983 0.49388951378322004659 0.50749915367264586408 -0.20145062775338060113;0.10499387871266932515 -1.092763750428072278 -0.11334698033376822135 0.73305072966246698218 -2.3227334911806862827 0.19328086453687468027 0.085122947496393541744 -0.17384119561745889349];

% Layer 2
b2 = [108.7727673494946572;16.310035870113612333;8.05676792301508371;22.599688499857823132;6.3225222780369207953;36.534141877612576366;-36.541214001918191911;-147.13497843219408878;42.479036667547440231;-45.839402943270357582;-15.478620230435753413;-37.484605537032734901;-50.318742376262648008;33.164822939006377567;68.802143296449528975;1.5154418802764535457;24.860977863857673498;-31.426014935316679555;-29.065896074866966359;16.169049405985884249];
LW2_1 = [16.588111755913452328 39.160166389159826394 11.22387623146793878 -108.44031351705498878 40.308566799845010564 -10.278928594876482805 -27.573798618630217305 -64.672187145397217023 -51.053458970326808242 22.39754277052925957 -32.680424861382377344 41.911448739301953026 80.567431767033269807 128.00340982098407494 -59.081106797343935 -23.121998537404039098 59.982822195390475883 19.821255328925321493 16.997585833044560388 -33.062308624259543421;-3.3697101093638037739 -14.860717667873254655 -17.015286808148108122 -18.188092052495978379 42.690574723657846334 -21.546522636697222453 -22.444421755183469713 0.40959164918533075284 43.913868873387144731 -6.6164026431713338638 12.088778629149908639 3.0974913409711208878 -2.1212333342066518327 11.994987818297573767 10.718323678938970644 -66.678976060538943216 -6.8173845490655109458 2.564990953930005535 -6.1523432846895724779 -14.497588523459720378;-0.080763191821025093198 0.17942611908169930901 3.3884385648112100853 -0.12081487229376350334 4.433638991971197818 -4.1822600470490520763 -3.3198967333435089877 -0.25871882864596973395 0.26663604365168724897 0.54983963688665005165 4.1191159490875390858 1.060958274934903578 3.2435477025118069072 1.9877375131179932932 2.47789223583050644 7.3660929666971286522 0.2489152948007776478 0.25826359497025663803 0.35323794627908472465 -0.94635287840936210824;-0.88834201631567799584 2.8957745395864669113 19.627697209057320293 6.6513401797699511775 7.5075365639752167368 -4.1863853453344033184 -16.086922084158956636 -4.1764340043687191439 -12.471583839289070994 -13.700076108292885024 31.458287929916249226 0.67643860814152045879 21.99903684443177454 9.6461473231881722512 7.5926263670948062057 25.397722231979798835 -1.0790516401898877508 -3.8877508557648003951 14.087299343590556688 -6.6851434505347606674;-6.3859961019337720955 -4.3169846386192567422 -15.545809456501588741 16.896015898887810636 -37.108648726791827244 3.4160949126712578661 55.046463539891796302 -5.3224073079174480938 -37.918517142699194267 23.314183535905048217 16.561163293648508699 -7.8936216821487885653 2.7966529516688556356 21.87591474600518282 -42.428260035539942407 -30.371494644981172684 -3.4649202365694038441 -4.2524682006156506731 15.381441447288906943 -54.557426132706893895;20.240608172860863334 -11.726645608090619177 51.437921699203187131 -16.530697204245964116 -40.262917050146860731 32.011995037588974355 43.331029077159364249 -0.57034542273502097931 -46.865238234862225397 20.559794616099196674 3.2688294419295904625 -19.836541301593854314 6.7056373290516351204 27.610212965535556151 -10.809536906921861643 20.887140102301277267 -4.9912089838585069757 2.7683580574781880834 -0.7137758501641097153 -29.310424129026941387;-2.2136008226470367255 4.5440036086766886214 -4.2559812158314604957 -3.1166528117105825046 -16.900716686174007464 -9.3900482584244286954 5.8335267976069884455 3.5164387586140453124 9.9657099305917160592 13.58557938019365352 -9.3136016024131915714 -2.8799988052060165877 -4.8556650090677617726 -10.932210095707477038 0.033457814348251450898 -39.194656914669579351 2.4275487545895035879 2.6266876361976252419 -6.6816576273087280313 8.2709167175695039731;-18.684916793518674183 29.824214394910164572 5.7342149737381618024 3.6988518789661912756 -38.007978233610110408 -44.635829823158026386 69.287676122270340784 -61.781420157095929824 -49.912469950130024188 25.126422659339908705 -47.773634577891229469 -16.643875925657670933 -24.168002271857435659 31.561517792364192303 24.354427473293952744 -117.89797057773571964 19.363371340873012372 -1.3542625632123930224 95.50435984143382484 -11.979030118747685307;-8.7615755147277400994 -22.680990097762560254 -5.6634176745914350803 6.0735740785264766828 -3.1331835423478127112 79.939703447432790995 -1.8382844032130389866 12.142588606934259232 -64.843405048067808139 -34.828405702654059439 16.004403228026312433 26.224218752914417507 12.21745833571429074 -9.9061413026523919001 -0.35092761728482435579 36.312010452923246362 6.2546782170751757945 -29.528165339036320347 27.601461900785245973 -27.034035211159089584;57.913597656428336791 71.573008501538936343 10.49229691590745972 -31.374107084004513979 97.399032365219142093 -35.941392358842399801 -18.246787203784567311 16.139266191140858808 -16.329607444177387521 46.593843400411010691 19.199223099090819034 -94.84433478723873634 93.392473819319164363 -77.047380546107405053 -19.064762673575991414 -78.767241082074690439 -10.950217464270194156 30.381264590732364184 23.307440300892999119 73.813968891360303815;-2.6014954348406407192 -4.5917940653571047704 14.041613065776189728 11.046802580956946116 6.3322433932517743216 -12.611473911768866785 -10.5121050760515935 0.1382505301370249573 10.353421444871141688 0.84121787778661927248 11.726920200604661559 0.78128749873860914299 8.7188778099852193293 1.4310488805104417676 7.6004494744195492117 -42.56276818943801743 2.2964944066855261795 1.7117227207069023454 0.76369252480674965078 -2.8584523592798589675;44.099965389612144406 -11.179255950174660228 -8.1356023391040537263 -3.8452006419351136834 -13.082530135181867692 22.465412794695982512 39.474337001724116192 11.865139376571857355 85.052763863993462223 -15.532991687131646685 36.197347844063990863 -93.257850828368944462 -18.553203786212808524 -30.00219389845050344 -100.64426714353851366 16.944455481583815981 -41.774171265308496004 15.167319215321843018 73.92760598314170295 -26.847223853120713244;16.785592435220781482 2.6678827428900855345 -14.882852175463462174 23.09621626261173688 3.9178455198974400098 -85.103031806364910494 24.133362867450170341 -17.146157929400832387 -21.233601572743861396 5.6187372640859774009 5.4102768345336746947 -38.08303341124817365 32.989030995429125426 30.91399539839264321 34.049250207271107627 -11.349417137807890299 16.723519228090836464 10.685737160900728782 -18.349565391876506482 23.382399188330577289;-26.309254748991712347 -23.969252360984249606 40.496583429150767586 -14.978755965931600969 31.490927173196723743 28.428171596532315846 53.643589676776727515 -52.614816524552686872 38.222590346294694541 -3.302752103873142886 -51.030684900115367952 -47.650824637099837844 21.660398303435041356 -24.909655376318404763 3.5567822171988621172 -38.469599162900252054 21.300460738975957042 -40.793043058375111798 -23.354224119135725601 -30.469792510127483354;-117.20843437752569116 -91.35204017377601815 24.463039774741833554 -7.6397477695305351375 -21.676720208170632276 30.224566622273613348 6.4293710208192544897 -19.13402115604704079 -23.199062828828065363 -12.175382701251130868 -73.605752570037722649 13.747523064783026214 9.0620457320489435915 65.384774372838307954 38.992272012156000471 -10.075281550986694867 23.177909105446815374 5.6146730276000766935 0.89333677734434713269 35.259216218413058641;-3.2579825250161675854 5.2880719845407888613 24.153902499454169117 -2.857027000737200062 -15.499200619609183605 -31.574621173518000461 -6.765648730225198193 -8.0885851581870795712 23.708217349277379782 2.0918840814756487489 -21.950041627461931881 -7.6604825287757511987 -13.024490067682267025 17.721626302397982755 -23.220000877915964566 -15.537934321530070036 -1.1156307001570091586 6.9687004914887005214 11.686948020162510886 -5.8230594877101822249;-0.92194236680019125973 0.39739789485230481159 -3.1053397604811641131 3.5607728099520437048 7.3211812176447459422 -18.323965769905207424 -28.589134056784761384 7.3741497733058878339 4.8979431249110181312 -5.2401425351566306432 14.703209385596530012 6.5118355965549898912 6.7013685222627747962 13.630316580242570978 -7.8115642981471751227 -0.069350802757599416815 -5.252188501528799236 2.9332296241492414879 -7.2841050745730457905 -10.648499668744909386;17.58458586937465995 -9.1621077756694546679 33.814069362782966266 9.6672313742692050909 -13.164106358388888651 13.022321676948536151 6.3994591840571803942 13.815722494666781373 80.104065922228301133 2.9568567304179746991 26.660951441673120144 -36.79679456708676355 1.2200670775054927031 -7.9333050973770502523 -48.312591082271055143 -10.913728923583301267 -2.0078481954130018572 11.485172050573272173 32.266536617662055164 -16.228572487279450343;-7.6197227844668082852 -4.9425683470386854168 14.608920577741605129 22.752316347459391466 -9.5373050888527632907 -3.7659101927186187098 -0.3500393836725703145 -15.5903523736704539 22.519804025037931439 -38.761560267318600381 3.6451663108663860946 -8.357644770300293402 -8.4585439287572512512 -7.1667784675355532542 22.944184031274325264 0.94338437578980971487 -7.1318758714650600794 -19.631583670945278897 2.1163472447453970382 43.089530633157302475;-0.53327663911556555387 -0.75235578869730657114 -4.4015617345032644891 1.6018631858187952766 12.555617524307555399 13.94927233923857024 7.4073799906620481082 0.0037404606230196286477 5.0136575962004812368 0.99629939349850671348 -3.1130185070820863835 -1.1622445310466811286 -1.7807399734587807671 -7.9903605310659466809 -2.9983317071036075241 38.878277803053499895 1.0129597251352584486 0.61166684454247421954 0.84033436727305232949 -0.65851378801861881751];

% Layer 3
b3 = -0.20018371243091470646;
LW3_2 = [-0.0061348295350573348733 0.032728230602856636655 -0.51167749191578038026 -0.031563783759433548803 -0.013140033460588451675 -0.013357191035467234214 -0.03216409157812947367 0.0082017185830304175503 0.010788942722568457475 0.0072937466655410444077 -0.020410827021063268627 0.0097295886280932553092 0.0090075677131785970853 -0.0044675882419462709452 -0.0078517183822292210826 -0.015655771058548421937 -0.016803048335988109846 -0.014810900484325120047 -0.0085141734716149275464 -0.19546970410595571055];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
