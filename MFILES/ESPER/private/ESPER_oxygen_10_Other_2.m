function [Y,Xf,Af] = ESPER_oxygen_10_Other_2(X,~,~)
%ESPER_OXYGEN_10_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8145117310124443399;-3.4286230288908732255;5.4330923160264710248;-2.9825725967605243305;-0.46689049211295480246;-1.023519666022233654;0.17790047087205304588;1.845911827055066734;0.14062170522585815124;-0.98490319394606984371;1.0967914828964444585;0.75382392677308607265;-1.1451275886733578435;0.01401090473966848382;0.98261264680551863027;0.86396430908289101325;-1.4643069651020259592;5.3463000001083411661;-0.026225211944102932993;2.9970476608854781375];
IW1_1 = [-3.2221138807815350447 0.20864187340555762074 1.340002342347312192 0.75109239754055179272 3.4185871668062568496 0.63950310231629814428 -0.59227570690793918118;0.58772104741244712844 0.1015515419337375963 -4.5265329422116016289 -0.46483590375148958751 3.7556496628941804516 0.31204722659768729942 0.73444703788607490491;-2.9980242302084256778 3.8508829535088859863 1.4215339544919298742 -0.16460422726533593951 12.247284421716207348 -2.1953463409502380621 -0.23154398828171035563;0.30342914439543089422 0.027117576899281837371 0.97555461913759533576 -3.0197550445974679079 2.7268575883602168552 0.16013391701239884646 -0.46825224140170901288;0.171143026344267285 0.10814339807290687667 0.12401502899496576193 -0.59619771079906913602 4.1963070943680422786 0.56046204479623018546 0.74628560492972073614;-0.2306197774395137845 0.12761437614728798895 -0.81576362591605899865 0.5491195334703345976 1.1015068447205567104 -1.1368827259548737185 -0.89933345680979170922;-0.042920720771318192355 0.36454317524824475516 2.4092677048078661173 -0.0648878642069054129 0.41630174855711854498 -0.60023217162736863806 0.63006702567608829924;-0.32399164726750234733 0.11897486089008159349 -1.3804244725282808215 1.9803549316870696639 -0.63421906348429502032 1.1032140112211661354 -0.20876369554846069265;-1.5146631750759960156 -0.34115610761730069678 1.9460345351579175777 0.37215067418877972871 -2.008385529256111468 -0.24203712349775197143 0.7247830330908452412;-0.017905894574578577749 0.44405110367581085429 -0.68595380138538064596 -0.64256031294545112864 -3.5507887280870624735 -0.37914219085964889766 -0.027928220908208456486;0.60499232265072921955 0.47685242693332269281 0.44863452453970659173 0.40207192376205003193 4.396631875842466286 0.2915684615485146236 0.16570971215338750615;-0.061070876780478698664 -0.14356493680231044441 0.2923292938031493704 0.81514301373281961016 -2.6396894049169259411 0.62460547717999503892 -0.46922172201787859525;0.13071447100135372144 -0.1196520624138361355 0.89113993852072981294 -0.63924787911623193182 -0.21845624785564074499 -1.0327369838314843786 0.38565615560261418127;-0.67891983209745221384 0.17250435268664057742 1.3144446587935387782 -0.84824671752988534124 -1.2369295893848761825 0.30339200715228265004 0.84363838650734201963;0.046986995802617066709 -0.66064848056644498442 -1.5026813824338349779 -0.62228491042411915313 1.3486646017301455736 -0.92963825340582584289 -0.058927314912707938477;-0.10085735513736890367 -0.0241727336711740938 -1.1134393549338932328 1.6928215900659562276 9.0860119766981259914 1.6703480664341991968 -0.68121441030806983985;-0.14296137730436606073 0.076831034670660380836 -0.94003908085027276798 -0.63992172259683910429 1.7925198775742214874 -0.88906641737234481937 -0.28852576351495468066;0.75187011834613559635 -0.093116124020827209518 4.7123821960365113171 1.6950917084172800742 -0.23648790859946036691 1.0023168170246203879 -0.37327635878913473233;-0.54783517449113872111 0.17677678093740920029 0.28388484071513236939 -0.23305160963129256668 1.6523273483236096126 1.4110574143852914197 0.23298993422982031132;0.19269282242124727289 2.339646796123552086 -0.88524080209726740964 -0.056521886369790032278 0.40926173747238708822 0.24588898634971925738 0.01137158582539028219];

% Layer 2
b2 = [3.556410196290950676;0.42377848698162745578;2.6769229426429164143;-24.262661776444186756;-0.77766356806220404696;0.88289775346804932887;-0.76396704181115171473;-16.102601102625349938;0.48872343951690205843;2.8542988463871452609;0.30489157624708934646;-1.6064488141022990053;-4.0509198459487212318;-0.71383399451071050112;7.0736141460550507887;2.1840402687283444472;5.4152805310474780853;-0.77867447456755367607;-2.5362254287733061453;-7.1376384567711648188];
LW2_1 = [-0.75517221082426722045 -0.092859642244809401102 -0.40017759187175516722 0.98510469248483267801 1.7327848811973829424 4.9451040678386499749 5.5884213254997670006 4.4150620637343651609 1.5802459544800924185 2.0614928462984560831 -4.347480309276346766 -6.579278140472679226 0.51519707970169181799 -3.3943463503770003875 2.1633971730402032918 1.6440415719520728999 -9.6908125628629324666 -2.5189887445896661511 1.632720193921155083 0.42833246148247683394;-0.092610264267919684134 -0.14297519587693180432 -0.069062025034371019028 -0.48568065598631632307 -0.027337574205684601197 0.22417357228377790546 -0.32080575570263919483 -0.14271860072722428181 0.014972198257069239957 0.33965266204943994621 -0.075861492669693567081 0.050685925847522017573 -0.19674002006738658399 -0.15243327053646604785 -0.62967742007414184702 0.10465516189655568735 -0.11122729643933462751 0.039511334113979050542 0.014728621149061196446 0.18888645291618130773;0.19155388287304625505 -0.72166230398236574928 -0.048074870618668635869 -0.7674504728292815825 -0.32870907818796823996 8.2362325537681400078 -0.89902935611781820135 -1.1289620886590563398 0.72849614245544314084 0.54384450702221742713 -0.74337564053115801066 -6.9913129341620248169 -2.7247201160043266199 -1.5253486919439995795 -2.1773767723611920921 0.4299833606340249248 -14.378801501558417186 -2.4668788487083932459 -0.21947572142185939326 0.0024705520708419967564;13.626856280958769219 3.2128258883279103841 -1.5458654188403517793 1.5073783924010173418 -5.0560944930126359154 -5.9885119862177420558 -4.0158879302288283952 2.4580121598500355162 -6.822004245197098804 -5.4996631136644511528 -11.311916806646145517 -6.7483575047777097922 -0.2023845733999592722 15.589518708597230656 -5.7557109026954451636 1.0603698939228998199 6.9071534661979923087 6.227500708043772093 -5.7399197923452716097 2.2832549898041345493;0.18101743813835252661 -0.74691959900288196206 0.11962229774650552649 -0.55686627648367925669 -0.34593302438372852681 -0.82715026816916004115 -0.53613955986534833631 -0.21386195751202766169 -0.54493888049245697847 -0.92181763358511659145 1.5584245806180057059 0.38505482254743328419 1.5389520932205824622 0.74696633142629886848 0.73630841572231897629 -1.0417123721943173376 1.0269958551107911671 -0.46621283393046042409 0.51618925615484612113 -0.15701387973019353961;-0.39229312625929291247 -0.83578047210209860385 -0.12325101574593332054 1.5175613953818378743 1.2591698953100860514 0.64740624268682067655 0.84247402551808681093 1.6958016030683915609 -0.4395594247591205761 1.1328836076274542144 -1.2880794881340458247 1.833540676556673521 1.149279073655136596 -1.0760380783862668608 0.22062866768332980993 -0.12836093590409880516 0.87269037227045809235 0.52870916507156517916 1.04780067360223339 0.76431568022125473405;-0.032018390474239412369 0.26371019843740950428 0.34109225647961122219 -1.1343416262726191412 -1.3679897316536167029 -0.48465722924866816435 -0.17108760589897381577 -0.27692256698924611058 -0.4344991860164205133 -0.75832773099604433575 0.69613882548414041107 -3.0560701093702768993 0.11850068429351584554 0.83857896952455124318 -0.93483491180587541258 -0.16084826472872768011 -2.0354476323360413126 0.87893246655646273258 0.23959272108962081926 -0.89964364520593886887;-1.4706850572327319071 0.039393437332383832161 0.36116475935159936261 -0.047793064730108296423 -0.42680520679441535936 1.1697611161897436549 8.3773024267452704805 1.0939527685401073676 0.8644538700573225487 5.2324601713795644287 7.2172590600222576995 10.694835037938400291 -5.4458987482134162406 -2.3461037666829138715 7.8874735591770877008 1.0601333488300228591 6.022521006180570069 -4.0730650864307413883 2.5095681788788684052 5.1431311535691186521;-0.095930223492835337007 -0.34015184138102627642 -0.040366902447587213465 1.1640709010221983455 0.55650160352280542142 -0.071864648946364892423 0.56507722059945386661 0.27530025595250512405 -0.48666662770557600481 0.67260260143098016261 -0.97047285397532612183 1.1463026889601943825 -0.88403329377338590866 -0.32623781078982638792 -0.023088887401365568164 0.23802318609169278996 0.68747101646445518686 -0.47071541023683460825 0.35536602067299238872 0.79801542349756737771;0.7039011796159162504 2.8171749189692674165 0.81804601688910927315 -2.7930486493386776914 0.42461197435606823358 2.6696855700108970133 -0.47230951917943186924 -4.2107458817567904319 0.63416382122718228942 -0.72090593007779457668 0.33532932608363485993 -2.09157424522899138 -8.1072720103943503034 1.685835502555658838 -0.8311403739843331584 -1.0628439755815379808 -2.0528411006642177661 -0.43336425386430421636 -1.5148249049550435164 -6.1730603807090940194;-0.10236317742966614952 -0.23324935973682750512 -0.074541984074020697926 -0.59515643674239726568 -0.13364953688054814762 0.0039103567714442264563 -0.30654000579423251738 -0.24816207107588739156 -0.0086066432678063142098 0.35260457586099164251 -0.09486283790053934295 -0.11931709230823636658 -0.15803215233171755139 -0.17763527351055788395 -0.68528303058744310938 0.13993670801341154264 -0.065039585735696625601 -0.01102593198831513556 0.10620529711516525639 0.35382179284641968042;0.042898439429850533655 1.0514601934887448653 -0.13019485284801321501 -0.23450138629043823513 -0.92183419680229539139 -1.3602202291614400309 -1.0456573060191927116 0.30027304062173537647 -0.050466811068746272873 0.37076509686617875605 -0.90517292594821407992 -0.98340252657000859493 0.70219810888118094905 1.1530770878489688958 -1.6140037321649851609 -0.41055925056586206612 -0.33008907337256998549 0.10688258532561172032 -1.1754466808998180749 1.643358774977437653;0.33581835967199724635 1.8359029804223516713 0.15392924173169622581 0.57079097160398084565 1.3737350900216502847 0.43568139619220952463 0.21406960882140327329 -0.41707272725270416736 0.99706766995208317983 0.073775805086000900701 0.25326109405773999939 2.96788539210811253 -3.1409215398243350847 0.46238024791379778167 -0.028094382288920537877 -0.76362316824279385941 1.0619835973072935253 0.35923738418677930717 -0.36621636592182771341 0.97046538067108822911;0.010457137168721928819 0.28482609640483447233 0.36792756505716928128 -1.1160045671124596556 -1.1643558624383154587 -0.40245391074017516919 -0.24610010752621838681 -0.36130016165584488697 -0.42668069888280324431 -0.8277250263454838386 0.77052034403529079398 -2.7865442008979321997 -0.12416526901704268149 0.92935734185925911177 -0.94893419174907100988 -0.21676284040023802158 -1.9211027718307103207 0.81507490384856684518 0.10345231830360239467 -0.96007110102378645511;-2.5313924255206341485 -3.6686968652886831066 -1.9679187725897222538 -18.779135280543655995 5.1641683357134384735 -2.6209899869571544606 7.4696900888206716473 16.316355146825305411 -0.096175020966387636534 -10.821876942914144593 5.3088752465967763428 -10.441223028656152039 -1.9240627067026871977 -1.6382196853028185846 -3.262265310385624506 -0.92281602568833043243 -16.384067055591614803 5.9682239651003632375 -9.6946543473736088714 5.3630950357197235689;1.9169411847134731897 -0.25764123349078160707 -0.26492063414977434777 -0.36484524055336386983 1.4208230517213378263 -2.9323188627544580775 -2.5740045324418954209 -2.3761902012636508807 -0.10893408938137089104 0.21824960693262296374 2.3076400152053828663 7.1837456148895517671 3.2677307356171358954 1.1929028117120823449 -1.1327301175224586682 -0.085105308231739604241 8.2653506237990850281 1.1769557030347193027 0.55200171848228118954 -2.2241501578963034369;-0.82428596966691758396 -2.7831444664798823396 0.25134929968903663156 -0.95137454963769063632 -1.4832397847193938833 -3.7179919488791033366 -0.25071260131255435066 0.57688905930017242429 -1.2263171228837945748 -0.41637193444874925907 -0.11435056232076899752 -0.74172299524194063025 1.6472103575661181107 -1.3898153397640020668 0.20728459679007604777 0.092353523444168361678 7.8025199902223025816 0.045179267911265835744 0.64921754945177445606 -1.0333172399754173565;2.8116676325742009368 0.64659591721709186452 0.48655689584136280201 -1.0686558635935354822 -0.87287626880695257103 -5.7287867534831411476 0.37444578736381506356 -4.2673653808990632541 0.0089495410175814953807 -2.3650398171539843695 1.8048958520382278881 7.5426858390197057957 -0.27185759604245951504 -2.1022470242828137366 3.0812453081129129728 -1.9235670451187592001 11.833989986022144691 1.9571500074862084873 4.8239383474223780368 -4.8035282610420066973;-0.20795941510785409534 0.61542921020284002687 0.049435780142600020681 0.68571515920615910833 0.28469734808893942812 -8.2510435708898288709 0.92457077068284643229 1.2320369999732969646 -0.67799917326459491207 -0.47129334438727327194 0.64461059809962917289 6.5943419626009180945 2.9807295644220253017 1.3314011861967929296 1.9926387402047049946 -0.43446858424487105887 14.163046103793510255 2.4281610129952122534 0.33383509319849385966 0.11878124202154161093;-0.55658648348818440255 0.993120659787510629 -0.40099311064878934152 0.53911625436427923486 -6.950720901790323758 0.11615902021429828916 -1.0570017040877670578 2.3729555195814970858 -0.56022151728914570956 -2.1683685905761271862 0.63447166883137751103 -10.583862537241705226 -1.3244164038795087635 -0.48625344845334766974 5.5816654665427476445 0.35408426798214143183 -4.3571909645653006393 -0.16618243118666561897 2.9609633542733084788 -4.9721675975993102625];

% Layer 3
b3 = -0.49822349093915452301;
LW3_2 = [0.0647124622095312102 9.5735640894750115848 3.3917004032070154906 -0.21042116000914898311 0.46516488144681567007 -0.77957347503787988163 4.5127966318703593984 0.29976146052010155252 0.85586720631090451583 -0.12272968807120884782 -9.2880539737552201274 0.36288068561343927998 -1.1293851332921835962 -4.5545090072213074706 0.058581378805806605392 -0.20737808664916607126 -0.95348025919848722332 0.1124144249690285785 3.4843354748346775374 -0.5501176706482441281];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
