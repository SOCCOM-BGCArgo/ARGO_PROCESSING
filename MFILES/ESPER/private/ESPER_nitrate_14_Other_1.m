function [Y,Xf,Af] = ESPER_nitrate_14_Other_1(X,~,~)
%ESPER_NITRATE_14_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:37.
% 
% [Y] = ESPER_nitrate_14_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.76985693864541870912;-28.941961106821118221;-6.0128131768953609892;-2.0425590009385268253;1.7710085794166570139;-8.5498934902583396678;-5.3235232344355623013;6.0257606976351318906;-1.8044033901232932049;-1.4656513984059591493;4.3696933083799809339;-4.4182475996131715945;-21.049080071381816026;0.55640134005084518343;5.0198933645571370832;-1.0385834146393824184;6.9618205495844520669;3.8449400724752775815;6.7255140994075981453;-0.62192291655797171668;0.8402098114611451507;-0.61513939200821488029;-0.77576884318378236394;-2.3569486944237896253;0.46357618982559833931;0.66412140668615604611;-1.2108967221628834654;1.5648745019001617518;-5.4549356552567740408;-3.8421026078257516367;1.270478010770322852;-11.201145118540441814;1.5832131474492301404;28.152703624329756593;-4.4859524316713645931;-8.9907298187246205146;-0.38687884841893999122;0.60162614588197482757;9.8605801642439239174;1.5419725613423334032];
IW1_1 = [0.028143030661197120795 -0.03181369016950293116 -0.4625224458038686981 0.9277075755970458637 2.0136479788322718676 0.43521890952857272827;-2.4157635476847079126 -4.050451199870694019 2.362386230635453721 -19.14658394271684827 15.104849355597799843 10.460118826317653884;0.25403474126170982883 0.21465369946520923561 -4.1944657154213444983 -2.6412729274529236356 -5.105222419922961663 -2.4153998629872828197;0.21897032646794239996 -0.72703756425127075147 -2.2184616502427063622 -0.68099630115573395184 2.2207140934503781793 -0.32641850362368973748;-0.50465183089670340166 0.52418146453730984913 1.0272707441200095158 0.51218690582804460298 0.083592471187041911262 -0.39088050645028449281;1.391322592196855501 -3.8365645622600035303 -4.1863326251200891903 -1.4853281252751813213 -5.954810969633972384 1.1478218817393306406;1.4458488392045685256 -1.3571980268003764891 -2.7792599064014966714 -1.075212158217082159 -1.023669186407492715 0.91735069841508110056;-0.23046897032121876903 2.431899888723872305 0.71271247680428007065 3.1419290588602262204 -13.873366148772950268 -3.651459819192380607;0.62638421652983344856 -0.63762445945142087744 -1.1105930179497487398 -0.59229964065848739185 -0.21882626445184955033 0.43911044593700243599;0.38075664157793398523 -0.051044105963560425232 -0.82943018828847514534 -0.58479899598273454853 2.8277173395734416239 0.88070837731667728221;0.42957275353251173078 0.061188182341142836884 3.5667075221671957763 4.1227929737074564542 -4.0985775750519009009 -0.27336036574092037466;-0.41911632079479593793 -0.026356398966682254709 -3.7242115715826891176 -4.0171721146151160298 3.8499605747550886825 0.15569381388524347609;0.098460303838096382978 -0.45039257294366535911 -0.4372535746398280021 -13.780891612537500279 -0.23798392221961481297 -7.849154671141754136;-3.1581127977253666828 -6.5131313816270406392 -6.159968008115077609 -3.5179501855795614063 3.0633091448996014883 1.4943298923496046715;-0.11946804407479670596 -0.47338164246194702756 -1.1669209793755854765 4.9761120298751713165 -5.1723186037493871225 -0.8832202073370648554;0.36899785730841944131 0.18331928132571226331 0.6882664004501710675 -1.2334262136591169767 -6.6417984509446270636 -1.4628459804010354173;0.2329901871954936643 0.43426725966197232687 -1.1735753354807354487 8.090673545849664805 -3.7613080197709307662 -0.019633775134322215689;0.63753445700983990552 1.8181463550740546431 4.0654030878369038504 0.77649511643177404618 7.9812813280889685075 -0.34669874647606896412;0.22777025227206093572 0.40725863067826434394 -1.166448571743903706 7.79552267343944294 -3.643835102870339071 0.019277329507039954459;-0.27903521841269274262 0.14322710931216853236 1.0815531893001826269 -2.4186600794972017425 -5.2177363263318961017 -1.9596511152475546425;0.58243986428120642085 0.11249126436016490538 0.6142349749401438963 0.33008784673728591708 -4.0888898626378207268 -1.0774261389602148853;-0.32736376050477017374 0.17219571243227854707 1.1246928990746980492 -2.5745297049997701855 -5.6321170709799837084 -2.2512844837871024417;-6.8073486840546921783 -6.2615133582545672297 -1.8936996189724275563 0.39307003120252065331 1.0099738837321940998 0.53151812576753398876;-0.075864167855080003044 -0.23075519295654839391 -1.5331734974088342405 -1.7706510233242973573 3.1412416155124773809 0.3157359121619873199;0.4326675632685379469 0.36977958031319385634 1.8719781827439376798 2.7021468865301558893 -2.2180716042939536692 -0.91938324982049257628;0.90863448076293118483 -0.40522891097054936083 -1.8302476041655979522 5.3053535427098452715 4.1107551485874296304 6.0213002424637984689;-0.26552340745800767641 -0.032011522250305894655 -1.5948840314137808782 -3.0159112709843394207 -1.4428534514984119319 -0.81025308926485972716;0.026075067512726268076 0.22961409212231123633 0.057604670850848319064 1.6464686228769291887 -0.22123517417703841836 0.28310143413355937092;0.39715098075041971315 0.53209505056921080346 1.6545447308151381982 -5.1901419768954770717 -3.3537000070432800847 0.95523564500038682379;-0.64281672088366526019 -1.794599006900233773 -4.080607275211146856 -0.74292836002953555052 -8.0626856210707611439 0.32027287126014597485;0.274531699673515317 0.049561525457467968392 1.6627173169965017152 3.1032751817102712799 1.3852850582131617241 0.74658536826315535784;-18.229599258336207868 -5.3555447753041329761 0.36573365446930916622 -0.79954989669628273585 0.47825052470404205707 0.64907308589679457711;0.034331330036132305661 0.20210667615034405564 0.19556235587080730842 1.7359255682249830066 -0.65765283052097556205 0.38651701196467097565;2.3723785665184964344 3.9596499053098792587 -2.3685569801766481746 18.70433707467602602 -15.384543772453914912 -10.068835618428442658;-0.4113438886172234854 0.0072621890631521428608 -3.9122697837047488711 -3.9256501440750768417 3.5969097669635470282 0.029598603200922859319;-0.151784890376625764 0.20045800153584267256 0.39883954407767718831 -7.288448113632794545 3.5811049541458235268 -1.2482147990465912724;0.038847551852693409935 -0.037026833058184022152 -0.23223102531511008451 0.46321473820540232103 0.81603661543017425029 0.12392620703206944088;0.04589859377219145109 -0.44752094547040754957 -0.60199053366661836595 0.10756375342121458905 0.67643005238868336715 0.74989212102656843673;1.1411394016203448842 1.3767784696269400602 -2.040676878511891168 8.2796242734835718835 -1.1010537977583532143 -0.26057741571873627162;0.02096678620413258351 0.25311843475040979312 -0.0068633904353262572759 1.4718506533853361606 0.29347661472559449791 0.21937758528433823346];

% Layer 2
b2 = -2.8211063226095394185;
LW2_1 = [4.2092116799344552192 6.6440484749695398747 -0.10805396521012143596 -0.33105598743557340669 -7.4066988764793570965 -0.072863709607965301829 -0.60989820588159260328 -0.10033420966263005558 -4.6878998060657490754 -1.2300490837118742693 -7.1136664605653336935 -13.724306030314020077 0.16065996023773057577 0.0096796586716785173315 -0.20219185470256240134 -0.25332580560626188904 -4.4777531148756013479 1.9344595719860391281 4.8604271095435258587 -4.2840330927618213153 0.65103972981240298967 3.7849623921256814185 -0.018466362468683803627 0.88003566183200776507 -0.16577379031163116951 0.11143335936064405201 -4.8712787936043522308 -17.24762822308697352 -0.10404686956280992383 1.9413153631302830782 -4.6967427696653309965 0.015038554309969190056 7.9319880437977969834 6.9742653497213824565 6.5972032998708618479 -0.4523605518830235428 -9.0667222852259747867 0.78683641412619076405 -0.10511634631646804561 11.027438630947395737];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
