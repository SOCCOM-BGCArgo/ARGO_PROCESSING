function [Y,Xf,Af] = ESPER_TA_6_Other_3(X,~,~)
%ESPER_TA_6_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:01.
% 
% [Y] = ESPER_TA_6_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.46055362309762165607;0.48055763829222764016;0.6412314757693478029;0.70697231379100722304;6.308127692212962323;-0.38805520502322016219;0.62587434989236989669;-0.10959295668647717203;2.5582649107865087501;-0.94659403961367349911;-0.85331949171516452424;0.46212857186320122072;0.15726264806831316556;-0.85873965870625590391;0.41526637027605262098;1.8112764272628105733;0.22119400305927622297;-0.82406679562581264253;-0.61655665194161768383;-0.17884927521890242597;0.95780898921783352851;-0.18863701809634589313;-0.021394903015858411643;0.13561227925596164301;0.37560313880988083213];
IW1_1 = [0.52363561199450736616 -1.524997323433214147 -1.6148171930524823914 1.0067542113193685971 -3.0232166856192792537 1.5754360851184456838 -2.118538383607461828;-0.19789234072237335549 -0.024439365869424998362 -0.035258388867106624232 -0.12675548261641642056 2.0871233119078471674 0.084108087505696579878 -0.60980175541962555741;-0.0086213970429510275451 -0.19620321214066224758 0.084707219577595332938 -0.6232579380269623881 -0.32118389733235291894 1.1027964108979797508 1.5806395960482673146;-0.8355990814098327446 -0.1694275971915749357 -0.28699759578940403637 -0.032566859522257393667 2.8220167255032770903 0.99869965958130701988 -0.42887992768361726803;-0.045318506423826468432 0.11828246075308376795 1.8826629163657564447 0.02493542778447406516 -1.3312484879134882654 5.6885330664494837549 -1.7303947055520285669;1.4146016872643283335 0.94470551738866515024 -0.46596823378606871957 -1.159929511759385079 3.6275604059262711587 5.3941565822810240149 3.4487299882657431738;-0.038751361858471250477 -0.25849812703314684059 -0.7285350666332982561 0.63027809017427538496 -0.26449329491332712605 -1.1549111895960597618 -1.0776066463272071516;0.52144091902588884935 -0.19305089488173290957 -0.17902760351823079898 0.41325537578276244632 1.9422462492552257096 0.68344325745133149841 0.62137269306536535574;-1.9142640542952764626 -0.33912068884943002978 -1.4651507776966139485 0.14767788357290514978 1.5000314883618917072 3.5998868710357143641 0.25606706821952313069;-0.21473304151476527157 0.20601030250986521186 -0.33476396484066256454 0.12071706458792297312 1.5795776233294163138 -0.056891679606467654429 -0.7624658277192092326;-0.37581402053932594365 1.0837492874577652202 -0.12188463658860196337 -1.3175915450295028197 -0.5980452072852371348 -2.5014736023513171048 -1.2883486673108974774;0.33798702963918209052 -0.55446672399801633091 -3.2677389723397394228 -0.05168227119365453176 -3.1614411358900782467 0.8688990166105835522 -0.11731753545106282655;-0.67884586401806568112 -0.78924048831821314032 -0.1428115213604805589 0.44324310431698871193 0.96628269351683293564 0.31040578577629929224 -0.29698869770901237253;-0.033411209508614300723 0.35851647727863839021 -0.43436802693435722089 0.48565382735814571769 -1.2236985051554087889 -1.9396317665737814462 0.58522108325670629814;0.92536439260975678067 -1.5808340556081030837 -0.13349367546080098679 0.49905645749226684726 0.71719281530336109753 1.1434828295946537491 -0.76370497263081782435;0.084328094617842533354 -0.32924293241086044493 -0.052406947924449172327 -0.031229598193357573782 -0.93946904090537741716 1.1324678375295724742 1.8350589135589894241;-1.1786027304547643801 -1.8505802509278805879 2.0302097251239215048 0.18609487831763990573 2.6913154458417238857 0.048029968313023627124 0.76249088770664774639;-0.16998301363384135665 0.15110840380319151555 0.24224110920404712255 -0.55106327632505325287 0.96846321070660956742 0.79661358933119086334 0.61299484956370176025;0.62262278716276775459 0.37008348638015703402 0.072108511251897752792 0.48750707610919369328 0.23416974559435346781 -0.99711604598726766291 0.4307530978922210485;-0.28892631134970553353 -0.081106328350114526016 0.58894453931835233362 0.78601694708362102038 -0.032474320530155427467 0.17926421659594218849 0.75250457432279882486;0.69790278890958235003 -1.2473091432400449374 -0.2264664476636874535 1.0979806077431679689 0.52773779310350810157 0.95821721437568341262 -0.83845549607799596536;0.74578722192110635802 0.067370622642846961226 -0.14201790516932097375 -0.84475785957407867333 1.2845070272453631421 -0.047576168965469164962 0.51074061456841712836;-0.87081976472794320188 1.3677586401102925784 -0.52418183319177702462 -1.5962552100235278818 -1.808015758335811185 -1.4731083765092949367 -0.47137969062273193943;-0.40370453778030834791 -0.39857366006924982438 -0.11838639728909534921 -0.23510995308414972538 0.85172030356370687088 0.3490161703795232051 -0.3428408962256874748;0.91301854132416870868 -0.015740334596899836772 -0.28537144140382791901 -0.56040920193597709709 1.0531037478149316566 -0.28293519802414923703 0.80683896482265160532];

% Layer 2
b2 = [9.2229707236240798807;19.670414690809668201;0.093449048164402831462;-13.601440111667907118;7.4319703134084127427;3.2109722670306890535;-8.3616770791849521771;-1.4089980253079190664;-0.46298499173659712902;-12.450983258506999718;-7.2094589558256156892;13.313869737597602949;3.3605732248825184172;0.85693610654657115244;5.6003190086307874651];
LW2_1 = [-6.2041034653342990168 7.9020256016214265316 -3.211356114721999333 -10.137232901569488419 -1.2741848561951747421 3.4891659755100365992 -12.952307516834116186 -10.109064055522472003 7.7434658347345894924 2.0699431398189034326 0.19923570474958757215 4.3131290601894685111 7.399292165282559175 0.90436484290548457832 13.151880658616951436 -2.1062031737286601718 4.4985119401191582256 -12.016144350003076013 0.79645443132446946954 1.2105566569580690217 -7.4149317799611891289 0.241011817419394897 -9.5127487108942503369 -13.7661397017836169 -4.949628988378117711;-1.6506677397577189659 -3.0879757994969949664 -10.087180763150163543 -1.0064030847755687237 -4.846706044132532476 0.093260098276233785453 -4.9459737389406859265 0.97402740736238313524 -0.8261538013788213286 1.7810651201101108665 -3.9352858903287044612 3.7242418621305439785 -3.2730258855485163672 2.0370099159077819095 9.2611731518751110315 3.3043781599376229607 0.55358598037221118382 -1.6865090586490687485 4.0509636641828743464 -2.8117392578729845098 -15.212760951623819139 -1.0343292133326675852 -6.1284153638948657417 16.90232795329289317 -0.29766094566193423976;0.49810189215668893015 -1.7024762370457033889 -1.029877607866546585 3.5342814045282238133 0.035195625526506554848 -0.13131999733704444178 -1.8370468233826375837 2.58340218922109921 -1.2784754872348611521 -0.038647840275078164385 0.024281605821643813259 -0.26801005009192979678 -1.208645457753817265 0.57836688205637953875 1.0504278143354668362 0.35106843822273886557 0.57393681391228634769 -2.3476199542415838728 -2.1746822808315573461 -0.39362051421633426074 -1.9007219730669751012 -0.58061823472973483895 0.18705450519953398247 -0.70145973300881037105 -1.2975864411342294957;-0.25150037091028004665 -12.696011252193974528 -1.9908963752752137921 13.147963470683121656 0.97072366467079229668 0.091303476523425408651 1.8461648262129060072 7.0670223636873741313 -2.1030702523065420984 -7.3334795785815805047 -7.3743256664700354008 -4.9435918191625374263 -10.313883909194830224 4.2974511696331703092 2.6439628782789328376 3.8393493319603928526 0.63302913641306624015 -9.9896863391162700196 -8.3858134506297972166 -17.357051056255983212 -2.730563043721044636 -6.0540420327345323415 9.5059687258771354834 5.504558721983555003 -9.2148328299109376616;4.0013692208749054302 -7.0055160512142089502 -8.9392386407551125416 -4.9663067369247748672 -0.76754982725403642085 -2.5867831798122202791 -1.0671096195927844974 7.5487743062707863828 -0.42529103729992057126 -2.3532912812026482996 0.32405339545760059039 0.78196986560090731011 -6.8662088496674247295 -3.1177310865757901226 3.2917920177492288047 6.7721886344507442601 0.14056775493978693192 1.1396934490214090108 6.4992078146362075586 -0.23382778236689039097 -2.2441125360333877836 -3.0439785529518670337 8.424653372496392123 15.503669133704196526 -0.7977092801835217184;-1.706446825926354105 2.0544989207278789856 -4.2264153328639286755 -6.5010515971272537783 -1.8158811720708349924 2.47691742949583249 -0.65177043205127993541 -6.7071621316924723288 2.4293989519759211504 3.7892773205153136296 -4.5520644179373475069 1.0779677680356190006 -4.0237540071494022342 0.38279205070352090301 -7.7736907894313453937 5.0154478882259789785 1.0034102989069761946 8.4490805103006323407 0.17639459652027900116 5.2630507284361183196 8.6689399388290144799 3.1558992755095047755 6.9355190779850079963 5.7520643035428324907 -1.0385555144233813429;-5.2091444856264548235 18.67315696117803725 9.9934048726460034118 -6.7236948352776888527 1.6975428988916039241 -1.2283556736833112222 3.5326923694199749981 -1.0354853722974257657 1.1546016086938100109 1.9376592984125831087 -3.3532816920692658513 0.096163626701248214323 -5.8714423223270895136 0.93522264220606043938 0.64102467946416286093 -2.8757302704945688632 -1.8840307689231770016 0.59754470411563043175 3.1200971629213025693 12.729875962094814312 0.27377414415442391515 5.1266177585940635453 1.8386722608377576993 4.0912963406812705713 -9.3469359404555731885;-2.0397140102242614645 5.8244179616850493275 4.9854618806704458223 4.0528235673628287827 -1.7587589363409372734 1.8877140019502627322 -11.759941770507776226 -6.974858633085470494 0.72935810293988978525 7.495398527563998492 -7.6517687565999885635 0.17077007499998578255 8.7905682334396377797 -0.063952720687238340247 0.43728875791916671512 -4.0611556009832900926 1.5268354648755129155 -8.7426339788302129818 5.7761402537942458935 -6.7648177420977217977 1.9718879238999413861 -0.6645286858608184799 8.1440266595697341501 -15.834892401092290015 2.2119581403177850376;-0.31852012743403546047 0.47914924638285122382 -3.4157506210754662312 -2.3291247037697697664 0.16483860038582884289 -0.15937838433854317755 -2.6264320722361054194 0.20337382720237096034 0.87317932856121061036 -0.57772705711612670765 0.7948302817901742312 0.47728875018897032323 0.12308374382386483292 0.35158658986771079702 -0.41865086819049146527 2.674141727108195532 0.077177142297173373375 -1.2598732210409853138 -0.86351529301464824417 -2.0660882513300125041 0.0072940238820418694041 -0.40401613364584282317 -0.96126739627244850439 1.5171714236175808388 -0.10839661575983822184;3.547883729837709943 1.1684391066645034574 -7.2251081508173049528 -2.6705927620141172163 -1.0300486773040191668 -0.12533718247178413097 2.8180722396098243365 12.250327930667770815 4.5680519845306566395 -11.505178663898878 -0.52748495307591980463 -3.5171699476276616636 -8.7793627277268413422 -0.24576636346407812472 4.5736997374997860888 10.242738912180358923 -4.4249389048756251341 -4.3599355742907670574 -4.473109867886067903 9.4866269805960374839 -4.2516445502257251832 4.2918324831075214121 4.1735831278126269694 15.472728184158286879 -1.0318953101629200209;1.5185220527147629266 3.4683940696185944219 -6.5524327872727052835 -4.7132987940007913252 -0.62810592124074349218 -0.05018939717125519423 1.4090843710668392585 3.707018407349298883 1.8626633343255138975 -4.3069375536223049039 0.40065552748894883717 -1.1096384414939126639 -7.6664729176516797082 -0.14716639592884078747 -4.0279882955210473128 8.1765847275142622408 -0.0004729769908233018294 3.3021820529653216347 9.3626695114144435905 2.4013191636199282541 2.7461607877054023952 -1.0477029212912400968 3.2400380585816828116 20.529359587543638099 0.73650534802843392601;1.5781197583101129744 5.0733509846252147213 -1.8462736418068932398 0.036580976752593218071 0.90447557111377807626 -1.4508433577796122638 4.0230124524442354428 9.2227868151549809994 -8.356771949199314875 -7.8280579563967238599 6.0757670547176454434 1.7475423383741293115 -2.1295838986986361796 2.4034966888862867584 -3.3594388255116016673 -5.5126569588397833499 0.23858997289453165447 19.027367824117266792 -3.8791017299416510333 -4.4210334197729510564 4.5848941610741933417 -15.022110902385538367 -2.515317419858917436 -7.5666464510524589215 7.9234220189188038219;-1.0940883097923554956 -0.59582579866550411385 4.5579613266710357067 -0.76648695967687308084 -0.45626149480850297646 0.48366295504549500217 2.6432170457562746968 1.8393244376594577449 -0.36301319585045127569 5.4427479537259051412 -1.9813928588664893038 0.67279774585734641867 -6.1032747270159255493 -1.4594263571478329755 -9.0139704766425641225 -3.5017895202764091067 1.7436249358433093537 1.0486410281950855339 1.3301292525084367213 -0.36838228650754828442 10.109731279976006846 -16.657141413385481599 2.1270644501819626626 5.8897475665592313732 13.745469025002522656;-0.015895228122472529475 -0.93573115212840252131 -0.17128357245818712218 0.20777184013148242148 0.027686955367836108 0.053948709145996850967 0.31066673875920347569 -0.27414184301521493659 -0.075793845220744934799 -0.21141160185047266906 -0.077704451179108777192 0.0093598407638162475775 -0.043986211519472802334 -0.18474592483304907997 -0.062845517749320678469 0.12607868715587819408 -0.049572854518754504161 0.37806113149262604578 0.29426538127027901393 -0.13984350111504548209 0.12619719657383715594 -0.042609343467204442713 0.062619338084747191986 0.41985337159948976637 0.10624566712800169455;0.52437968488881869789 -7.6351262060371167806 0.038616483805398185702 3.0851653510253127521 -0.81240205044296209813 0.17943098595090770098 -4.5032273645837941345 2.3701155257206112381 -1.8325897112067741634 2.8231385585846853203 1.534130377765882125 0.090175367191830183011 -2.3474003815419459684 -0.80709610737170556227 0.041333758648865827345 2.9473723138322585058 -0.10394129843889184095 -8.6495322130293672558 -5.54202400193417688 2.6548243106159126192 1.8574943409459860888 4.5633586839813125025 -0.26536147518173203164 0.23471781245221479129 -5.8067705456781615325];

% Layer 3
b3 = 1.5008334192559575904;
LW3_2 = [-0.0077602943451341071038 0.15728173051943319938 -0.19370339931081695384 -0.013984000327496847252 -0.022395387997799880153 -0.020737132348021089512 -0.024528121120209231409 -0.019641643064495190735 -0.19764309111040251343 -0.021215760189421402349 0.038443423496139834949 -0.023509591073424710578 -0.099728648706935499324 -2.4688450563138286675 0.056712862325121633778];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
