function [Y,Xf,Af] = ESPER_DIC_4_Atl_1(X,~,~)
%ESPER_DIC_4_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_4_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.6915097015812108339;-0.10113057931089040886;34.126219293738117244;-31.572834003970157823;23.980455751698372069;-73.994974223790364931;5.7230166614268647152;-91.133434655431287297;13.055712501005569237;-4.2978504410363633781;-8.0244198510591324691;2.7611736757125537878;2.1989032632284728486;1.1276062243999203094;-8.9322073595568962645;-2.2386386999409570997;135.50168992603536822;20.07073775034912444;2.2767224755430754968;3.8165642826342143223;2.4961526165428811197;-13.566788455222361875;-7.4579493737408935061;-3.4205182874466619758;8.7035205551963930048;1.6803980987768893929;1.283426590512579013;-21.916149510115058519;-0.29813755101595390551;-29.267067280465052903;4.1231144756262478879;9.8425428001012313928;1.0760109203484755636;33.113988831392163092;100.03458532271012871;0.18254869729586628568;-16.249873295033033571;-113.90735532499577687;-0.13354163796293502808;-1.5595759259183521461];
IW1_1 = [-1.5697783706805428228 -3.0060334829551731417 1.9279680748272043367 -2.3423814073244417777 5.6780276563790330613 5.9956041910340651668 7.0534852858771373008;0.3924590368660961226 -0.16833470042863021843 -0.030161777299670025632 -0.10563513449708834824 -1.7226029472639459161 0.57602099637710657554 0.10259095890679402474;-1.6091145018070223127 14.951064336220806439 -1.572578199462909998 -3.9038220837924311191 -48.101229527466095703 4.0362928675807037138 -9.4028362436193742013;13.070708242670459498 2.0476151603773402599 7.1315485786233958621 -11.787909874225535489 59.337436261421025563 4.8480434862189838441 24.872005147915416501;-5.714158438383793559 3.3133916128511438082 -0.66114958168717985476 1.6202293381544667916 -28.004482627963412256 -0.24123896953504742058 2.0532907876781547607;60.191601089832936111 -23.609398983617545298 -11.090607628860672307 -18.505472123336904389 -12.650767933021246137 15.975518889887592167 -44.938176786319687039;0.22556931126608498195 1.9726624349224677335 -0.4779973929391364007 -0.35940988408735313753 -5.4166907752100827977 1.9152661208295536088 1.3584619075271544553;-8.9932315100843087663 -5.53697308245399622 -2.6235113203225290945 0.0059643317328260045396 90.747031955892566657 -34.208130967608070705 1.4347205258867581357;-0.36497444102143056233 8.4243986058288999885 -8.4365726564372920393 12.930424684067391539 -26.327319431491893909 12.833075371838882361 -7.5548153603365424402;0.6094765800036020531 1.0911217510646116224 -0.84512612198422809584 0.24370547144493126535 3.4071777918109491523 -1.7778602989194136619 -1.3775055916384058019;1.5618879068715947334 -1.5970731380788596443 1.1507752793905783317 -1.4550898549993591669 -2.6595345474522078533 -4.4075321718238287261 -4.9853650646700495841;-0.49036591608485807781 -0.1981597457720407629 1.2369322739522361498 -2.3286449843395411463 9.0330504834199523145 -1.3086729738165090442 12.325261525487341885;1.2501791248612903473 1.1726441242603347082 1.4031482612962047352 -0.25658051174804807903 0.19257362024820029456 2.1555339563871984687 1.759995488591866053;1.0435929556891201386 -1.2717224106183482313 0.22630568693608915654 -0.427765518375274989 -2.398025580793109679 1.539877173832592927 -0.32287171282866883315;2.5827678514132035303 -1.6905955000675334521 0.1985556036853036721 -2.6997552626785412677 10.005427564371430549 0.61644362457210200024 0.2756769788033127111;0.43111747084255352958 -0.43061384463367852193 -0.087616655332665216438 0.32302196408915573311 0.86870215163536934622 0.95143951583239028125 -0.92868957536747531734;-3.1430831809005272959 -37.618226993587754237 -4.7588783563625529638 6.3713202526833780936 -193.48632660085351631 14.435250031763137812 28.987813294268796938;0.43075028176551999337 0.070282406220538051755 -1.1314595190463216934 20.757009147894379453 5.8016621342030338937 -0.39454775898259614175 2.3038309423754936844;-0.10173497731624278617 0.1253473431884163658 -0.046340131402544212924 -0.25241378258132968204 -3.1288570232643069247 0.12528403201307602988 1.054210341120661143;-0.04308380895771869723 -0.052587581595389801259 0.22454486930937636591 -0.20767397908815210528 -2.3049794939646166547 0.59605562157111724453 0.80977760539226573133;-0.14006551633640501597 0.082339404744893665566 -0.065569059255819420184 -0.20961532579643354923 -3.3993672214315622249 0.23416920987013081779 1.1204067324628712576;5.9051836463352129769 -7.5930183976869738416 -0.46535256278072151259 -1.7661008780971807486 5.978230737270290085 -4.3473528920884101368 -2.7657811389895452514;4.4804941860874389903 -2.3115017111696420926 0.18870349051468857104 -1.6129904879929999328 5.5663996143279188544 -1.4019680604462310125 -2.5232850697675228702;0.38013895979638384626 -1.187489928753612034 1.4349216424219626287 -0.38421427363273402689 5.0966217704260472487 -2.6037739309915837183 -0.85263204016239080296;1.5056236659971415914 0.42099040289708999918 9.1698933588306505982 8.4151696134649149883 -3.7029239580999240289 4.1958832409221411552 -1.6157820451958126995;-1.2435147371139150252 0.43129917305850806741 -1.3345366768988762285 0.72621728296075660491 -0.46775505396467459418 2.3494800807050966185 -2.0552391404173437905;2.4187822623721060289 -2.3565040112280866147 0.036982859055920198899 -0.24917395401415534661 -6.7937551437852174985 0.31358093129512282227 -1.1366680563256343905;10.404820633008041497 -10.03120920250474768 33.700041204690933228 36.497435139509704527 15.096143054758774937 -12.453421907366864829 -14.698604891089832591;-1.0667039566977556397 0.53473105823396671621 -1.0410568868168255108 0.26727953204179522029 0.0070712738939414532952 0.17516155457414470109 -1.6733281349736532917;17.319649312095513949 -9.767412845586239456 -10.309820521768507717 -0.4829636299879505601 3.1268287729226940108 2.0040801799569432085 2.0439516729747966295;-1.1492514668858389015 1.3547484267906757527 -2.4606890416503621744 -1.9074844396927879142 -8.0082910469785719698 3.7648317509087756427 0.64776335084627767458;11.368071566247630599 -21.580290063605570339 11.503934450233661124 -5.5080358149587054228 0.2448369365447964352 28.943299340946172293 11.613969730831756877;1.7586818096372598408 -0.44249452874255379431 -0.46846371330859915005 1.371234291829232399 -3.0591188930079171726 -1.0207676259714497657 -1.105237670342270162;-3.3885923924855729794 -45.576180070613588668 -1.6730047454265659646 -9.1822186935956260356 -95.193709010077540711 -7.8496007616140408558 6.0064065839701781258;7.7371520847674846166 -20.726201074131864743 24.647135136202891204 -2.2608855871181523511 -58.424969166051852199 26.807793854742293149 66.130328872096015402;0.3064777060696914357 -0.094281367180022779273 -0.13523950864511777303 -0.011832234739879071705 -1.7719284024492831797 0.75158596063774107954 0.045287404055305818806;9.408443751040222125 5.2852788502177308061 9.8971288732550846134 11.830975885202885678 5.535228346728721327 -3.2588083538284786655 -12.067228914177855259;-138.3995299229895295 -4.515023178021293937 -26.058122513010989252 -22.097857904720566324 81.604277268076899077 -35.807945290653528048 -16.111965497946659553;1.5700604904174939591 -0.12505974903328453962 -0.51420799857928889409 1.3484696157218851731 0.50346828302602530947 -0.084366630970826195224 -0.90165684198053730469;76.035867662544120549 45.347988765041691295 35.48881061034003892 -17.155448841955763584 -7.381904108546008203 58.457201960725534207 -5.1460988054603298281];

% Layer 2
b2 = 1.6784997941502632912;
LW2_1 = [0.054896824545960745678 -7.0294244793193119136 0.0023118720825296259005 -0.0013277548555538532405 0.019446885829885646874 -0.0017867692587362374139 -0.080850133300434348649 -0.0070406050704542120361 -0.045630816838367338484 -0.13585155367349616151 0.025697125488332504123 0.016751700060463808883 0.054949678858651533619 0.23124574252693383403 -0.029312071646406284708 -0.55867011941782174222 -0.0011817643411029775391 0.084089757866266490183 3.4490601987353994851 -2.9769836838157606174 -3.1046011571862783818 -0.026793680757725847619 -0.038626281562577954865 0.31752074054840623285 -0.013291959322806619001 0.08437805817908186623 -0.085751384289169105268 0.0047626254299696470576 -0.23717076298788838939 0.017652905978570006262 -0.095528332648948430239 0.0016769700031536297676 -0.088793001062562298964 -0.0020062956467213578435 0.0030116270660328504222 6.4812458559988943563 -0.0019856005190687546838 0.0026118653911635482737 0.11441693774497375957 -0.0011413940844100347368];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
