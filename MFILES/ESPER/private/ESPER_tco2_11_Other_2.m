function [Y,Xf,Af] = ESPER_tco2_11_Other_2(X,~,~)
%ESPER_TCO2_11_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:57.
% 
% [Y] = ESPER_tco2_11_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7693774015333721;-0.8549729975906657;-0.87549012162530271;-1.4784892004506591;0.65420601499672371;-0.12792619528165108;-0.93570280245712834;0.88507895782070423;0.39190534409987826;-0.23502415185790446;0.29860289471246543;-0.54528168388892051;0.20331690402734373;0.26029607357885198;-0.076204973051021724;-3.2870940284323145;-3.4581878781727178;-3.4973938428183597;0.46517927442830131;3.1128017481415];
IW1_1 = [-0.11939514632811002 0.1691252099493028 -0.3117653446446747 0.083358980710645222 -1.2753742239946602 0.53383763854722777 -0.026945965687880203;-0.2836946627151084 0.38350306238430093 0.34583542943543288 -0.80900279681409537 2.2639439093538472 -1.0687045127401806 -0.31560414792959496;-0.11383056965697436 0.0097640216096448809 -1.1895211110415076 -0.73444902755754238 2.0045914520367076 -0.74035304542993674 -0.27339864742600678;-0.0141932741946111 0.051980051475259324 2.4698449844054373 -1.2396330901654935 1.9068899369743721 -1.3891490103532718 0.27103491913863315;-0.16429153138048411 -0.02526101825140881 -1.0249784944067577 0.57815198187501471 0.0040918282393231555 -0.32576899718559899 0.22109853594663575;0.2153851538509334 -0.27195323684351519 0.3520268523838595 -0.022891775155237378 -0.44112107494784802 -0.39448573231345557 -0.393940934619748;-0.227994764041481 0.065356022941556083 -2.3263026639685176 -0.86703544776025598 0.33788389829232823 -1.2185381627594596 0.078922030133660087;-0.08527373791247643 0.17363166361435894 -1.6728081540175688 0.74546978867290337 -0.20388859339625598 0.81545102408233505 -0.5084772364739184;-1.055310083216584 0.079946963888706701 0.82410729296828955 -1.0543864438386024 -0.099833274013363782 0.048363767286794493 3.0354295012091104;-0.1565172857567351 0.30816832352937845 0.25440479208255173 -0.46713516461771776 -0.86122453885511341 -0.52075607763143084 -0.36749393850412759;0.088639123326121116 -0.32674142789152361 0.32738983126558041 0.11546462968682124 -0.19494169433945691 0.36210085954173205 0.65677999848219726;0.98205844381067964 0.054443328462594892 -1.1705117004632286 1.2086606137323903 -0.13506858069956709 0.43322577623952679 -3.0003473780665413;0.45697587920243343 -0.38283219700566806 -0.76158315310324953 0.74985277064274691 0.97413665431167951 0.19134858867912807 0.045637494564841646;-0.087802826763277067 0.29796111236790174 -0.75956311669439813 -0.065675721471746829 -0.8883995609096188 0.98138496932794206 0.96746016104738619;-0.023988150146755854 -0.12111953341113808 -0.53706441041211139 0.39552386164929842 1.5366887656462416 -0.59970839727613112 0.29460787081632062;-0.074966595613551512 -0.72310914151586902 0.13770185699642484 -2.0848097685495288 2.6289951351496259 -0.60102944059832752 -0.54894675259845016;0.16234957657852095 0.31919335117190689 0.39271535063062868 -0.57183533224204908 -0.10076112625015908 -0.16604642517294507 -0.90859078106679647;0.11734023862668776 0.13421036512800219 0.059845165445635611 -0.55733378190106786 0.57942419710312687 -0.45246719372668298 -2.2188896911236018;-0.063205533278394926 -0.20044867457387819 0.50749664804061401 -0.15329807110380939 1.739654122726989 -1.2102168302262855 0.11115089107149979;1.0639013056238635 0.036698487324782418 -1.2626333811640498 0.99627000525933973 0.40604658838415403 1.1682286466184437 0.98934337420429508];

% Layer 2
b2 = [-38.851625271510635;44.598595924117689;61.349385302214621;-15.326905788249196;-2.0270133800245786;25.775562958297499;7.1223481202357943;-2.5489821674364905;0.4590145661166638;12.097970599818387;-18.873788839097319;11.288026486150724;4.872305230627191;-21.571787254747491;30.961628682286506;-8.7194887951006503;-8.5893180501498918;19.762919495604798;31.683551023147469;-17.100690436774741];
LW2_1 = [-38.544816124905445 -0.10323193941110353 -9.2022019595319371 -7.5290761722138937 5.1439488365290265 -1.4389448986791145 2.6858027815513861 -13.40708295403488 3.07317071821346 1.2474450489917428 -5.6252978456104872 1.4599231566163555 3.1775101231889353 -2.9180336366335697 -6.8340989000582528 -2.3091257691335647 14.623210702415046 -3.7275208870510159 2.6419282728400471 14.123426255606207;20.092770227099326 10.616226539842213 -10.267117494550174 -7.3756251306011213 -9.2670411504548404 11.882341338662153 6.1233305136616725 -5.7643287223719204 -4.3051300012000171 -3.3554227860707435 3.199726811873945 -2.3556029788450559 -6.7476148549708741 2.2536663946366731 10.971732974632108 -2.8823591874574919 28.700642010902179 4.8945152675633006 0.35776439185883885 6.5204829816147267;5.3611473486379984 -6.8935349774338031 -1.2733429109905263 1.4915027022606107 1.6168722427627329 -12.101226365461381 1.2439739855799785 12.254582772693469 2.2839675887046633 3.2980962589933225 4.8617548908722741 3.6536105785004773 -1.9311939992743834 -0.79066266910331495 -4.7931869404471712 6.7970935169013389 50.275954487536332 13.255959031712708 6.4485373344391679 -5.638799411891152;4.733321364571327 3.6650123736377478 13.4384253699558 8.4810206454507213 -16.676855877611018 -9.032903312157913 6.2498126833590018 -7.9968956311616495 -2.3816629749828571 -6.7330241528546386 0.87202433583429217 1.3165354685173871 3.2986908679911462 2.0486157756357621 12.804043930340418 -3.4144554901547197 -25.225057862355911 -4.2288352993535092 -11.206689164721025 1.9009987541306883;1.4945794982126743 -0.039390281884426677 -0.27539641155989364 -0.30859326968524653 -0.44594385020602156 0.4287317542861529 0.2483520383163112 -0.25017942504546187 0.019462755026620641 0.21170146707647367 -0.21797117441097844 0.012864692074038094 -0.013268191135864617 0.30953228357817714 0.5242356767009122 -0.033851964145386347 -3.068209820308224 0.12668306898364387 0.21280897755253428 0.031771180953206829;63.133139077368028 2.7331334618291749 -2.6107852376323843 4.2916073769809708 -8.6703938949786732 4.7712854060903123 0.06239143902087297 4.0508538747473812 1.5791480911469413 10.073194023003882 8.6160839338063777 2.302855583641346 2.2528899240722673 -1.2594901541867929 15.43626966625347 0.45738488981037817 -34.029142628588083 -6.2115783113393643 -5.8076077655209533 6.305838677635645;-30.187221050322627 2.2608138349558176 -4.038195305568733 0.74830796226751661 2.8464659720636987 0.20439339568838463 2.7277933482775918 1.8828079131764566 -0.14511587406658946 -3.4125858273941105 0.44213629140386235 0.43220227730613969 -1.3193086011519966 0.71949666449720295 -2.3590350602894352 0.92854795937722079 34.861804625868075 1.5668773329273953 -1.6749923023784747 -0.030307178014460513;-0.5815081283363267 -2.0882329425311843 1.4481736183652598 -0.81294390963083074 -2.0782450423077257 1.914727673371647 -1.2350775029902521 0.095523852841893964 2.7888548484430427 4.4534744043023986 0.19839898417945112 3.1885618709790293 0.13749907231690545 3.283780732173792 1.5043538112270145 0.51843819883681463 1.0353581569479915 -3.2044378449160851 3.5519125756941521 -0.41916139134099423;-5.6325997301128226 -0.53957328732957599 3.4376767014036802 1.6718590319886428 1.6293777709449742 -3.4398534361938582 -2.9187298053418949 3.8640778530588893 1.3788340930452094 2.3643615714149147 2.6614178829822848 1.5593826226139571 1.285056594911135 -0.44421321319642443 -2.5825348338888454 -0.55190093119969053 5.6616835793533076 2.2544514559647237 1.0432921540674149 -1.6440740524704789;8.8316664638729439 -2.6751838660670249 -0.93570939926846131 0.66761120182830958 -7.8471325207373335 7.8914535554584342 1.6579190105966106 6.0415532622763832 3.2933481412591274 -1.7596835009718126 -8.2308759647357768 4.4645333357064096 -3.2421015810913412 8.8609456675060638 -0.87112017420743748 1.9572330867314949 13.065141457412679 -1.8149646982577079 10.95628245831816 -2.3893618046251652;-11.882133715214261 2.402466710940149 0.90447472600839196 -3.7673210153266061 -3.5186632576818053 -3.3974751176146842 3.1353824863014905 -4.4380130667637676 5.9038147870351914 -4.672278512643719 -2.0999462834529345 4.5122631883837636 -0.41512261298186104 -4.4247087624553618 4.439691632592405 -1.1646752837613372 -9.2069578132496375 -1.5223691777905137 -4.9709924446946516 3.6687656806808082;-6.8977941783515986 -0.49113170947133639 1.770725414427512 1.425094105757108 0.9897173131425181 -1.2387595710014754 -0.99039406109498118 2.2431409940614921 3.2000083340297141 2.9825164595202249 2.9568628464493227 3.8475466274837435 0.98368515288603764 0.85778224280962878 -1.8432598257013013 0.60822990081147288 17.758479312278816 1.1088576345610068 1.5268983041941291 -0.53799924415830702;-28.837814546658358 1.5564239162745561 -9.067001992361778 -0.47307840793825662 4.4157019068226164 -2.7308291779018985 -3.2480947076363087 -3.6214899127526721 1.6517624491924068 1.2642935646554541 -5.1190951433403447 1.5723402681170242 7.1721357969964226 0.93091335728060542 -5.0800787876047115 1.1797163651044207 22.124410006647913 -1.8515474826505955 -0.91608089717704033 -1.0239379516701381;-23.581823750615477 0.47177250640226759 1.2546940287132207 0.026539788457460876 13.653673072968179 -1.9513939849470625 -0.55008891191685583 -6.9825998671141587 0.40431587349114789 1.9894108839835922 2.041006389596665 -0.36998557401684939 7.5925186423620259 -1.1060627024977896 -12.930684051514202 2.1480214705184117 -8.8137943889106225 1.8428818745910776 -9.5647053778347111 1.3470595791616691;-8.18683154900428 -1.9882312226641778 1.2802389066705857 -0.67171171100926741 -0.70781881283792514 -4.9484122394304064 -1.553582596471313 -2.4304939172221367 -2.1144038273144012 1.3429354561740909 -1.0704418644184002 -2.3808341587423736 0.54983129592921698 -1.876233136842818 1.6552787698353091 0.21074447452614056 37.952568674822615 1.5518821661809696 0.39680098413388765 -0.22878803421169849;-7.1148760891096918 -2.9380900054680552 0.014285793125700358 -2.5811942847690417 -6.5612866301501107 0.26245607376698987 2.3659867001400614 1.3198449212798169 1.7825923201911205 3.4123048176949675 -1.9537318749883612 1.9187087084481951 -0.91079909773354972 1.8690373313421598 4.7651913644934591 0.45577509466784277 1.6271833186740776 -1.8045705759146673 2.9629703914456504 -2.3221554177671453;-16.587060284154571 -0.47996117900735807 -0.10811707575407985 0.68256015164326256 0.98999255045253898 0.0062090229569600561 -0.36150932490659876 1.1205246943379354 -0.86480784651355302 -1.0122089252494351 -1.1240803205018128 -0.86017351923570118 -1.2943105561622215 -0.48423966358145532 -0.42995886442839715 0.742233815483752 8.1037192151704307 -1.5246866363860083 -0.98519774715255304 -0.17582616238899407;16.017527906459147 -2.8476666134048121 10.651690983637186 7.9752823962947677 3.5127589620926569 0.76562646760090503 -4.3721428606797295 17.024615510494097 11.96072753307029 -0.84791655577693503 7.7860214381482544 10.888689035994926 -8.1982524120208407 0.98570118255149786 4.3527995928866732 -2.069243816291142 0.23840264392759766 -5.158494653752526 -1.3343687725608788 -11.864840983260791;53.379003496972899 9.6889805608933735 2.1866010461817602 1.6843849149064214 18.887667805301387 13.334673498683527 9.1481547416010649 -15.556718645468298 -6.951924768788424 -24.657241652697831 -19.355096329147031 -9.8632112853558009 5.9236882839071709 15.367258211280484 -14.05614260787279 22.651291671381355 -16.470314623205013 -14.797598236484928 -39.731888131372841 31.420033214444441;11.554973522804767 1.0958640925247272 0.30436061020726263 -1.3367985148507708 -3.1133216664258545 6.3805618365466872 -0.92052717938140893 -3.3896705997074403 -4.2721743538953119 -5.134678561555261 -3.0947818471529693 -5.1171010352864634 -3.153886164461901 0.56745792724264343 4.7842047744375789 -3.4560438554290411 -31.645044285767064 5.4844130473896566 -1.6382243137545616 1.6501846744449691];

% Layer 3
b3 = -1.9131972059285054;
LW3_2 = [0.0078630115618604588 0.034331301166740769 0.016388348782599864 0.0045823298565639643 -3.7627001427390647 0.014149515097521501 0.12880614513663269 0.19176620380929182 -0.13311397630830196 -0.35825911372815666 0.049147645012481138 -0.28203103386556566 0.18541045230584818 -0.039624824371713684 -0.12121601580748183 0.28233494435141682 -0.43250298882103244 -0.037706701840953163 -0.0030452880498787627 -0.11106873713668673];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
