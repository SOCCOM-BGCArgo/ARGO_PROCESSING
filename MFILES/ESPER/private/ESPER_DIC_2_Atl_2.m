function [Y,Xf,Af] = ESPER_DIC_2_Atl_2(X,~,~)
%ESPER_DIC_2_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_2_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.29306331981605454606;0.052075787557576996845;2.7937533680176804829;0.64290603926008560443;1.2672388971341548292;0.77950354321737846952;1.241681320614670847;-1.8523599505636831886;5.1143201103151767484;-0.19853221034728618655;-0.58950335260735120535;-1.3858859120763944439;0.18332905225309897856;-0.14875564895385870456;-4.7022138971334515034;-1.9589046918198158576;-0.16991803383189651999;-0.75134755955110221759;0.45145094768881299796;-3.0284843600386981421];
IW1_1 = [0.6503414746681601688 -0.45281505553010892307 0.36057610628439951128 0.22251975939962959083 -3.7114084711176733578 0.61950126839274655133 -0.86023490415975500945 1.1597602827661210867;0.012251882130988090563 0.068853937170573989435 -0.22045513042790554348 -0.39049575724606971905 -1.4579283082492997536 0.29772159312732127123 -0.7973400896272828664 0.20301743814869072091;-0.30821574621186487164 0.14610141521220423866 0.14288084696007286034 -0.0274436307630499636 -2.2943706221686448465 0.41253462250875949646 -0.31486399692492361702 0.41487173489421502737;0.047620445658132462552 0.034468636791486449711 0.12318233677127159165 -0.411401392437760971 -0.078359072354984127262 -0.77723799559036654827 -0.83686214994742957884 0.2849200926558395075;-0.90746668880346637032 0.97943098154987084936 0.50174462180274592704 1.8546287366708689159 2.8190496798379403032 -0.31821621870558830514 1.6016295157830304774 -2.1361261227602241775;-0.094710239169944601678 0.096348937323514724507 0.15712691713794568749 -0.36191306778945003808 -1.5423217723623894315 -0.26947331749592989825 -0.76469174435314091198 0.3514746292420941054;-0.84213094383275932664 -2.0262896428633019319 -0.18596954119668701599 -0.38676509099901246191 0.39466840174316875078 1.045462509097998316 0.3633665412726578281 1.532761384663660742;-0.24430322604470319781 -0.28298863086522096921 -0.8517457606067385667 0.61520196278377736743 0.4686814874107345652 1.8856534427958258071 0.25244513119965422687 -2.7449656489178488883;-0.75323731128700310844 1.4120667749507456179 0.69437315313576608578 -0.2584449767380219698 -4.4350107407064864873 -0.11202906072899111722 -1.9743598845179164414 1.8945948962121308412;0.38317799696386961594 -0.61824729677112977289 -0.4054612793813172078 -0.24576597515842898978 0.51963675273908949137 0.56713772234256032423 -0.082492476477864465356 -0.82108008257423337195;0.067264648550259167892 -0.66494377722046027479 -0.31578894559152259625 -0.14333535064207070242 0.62869280635126034706 -0.84814658799266573475 0.40887633959160785135 -0.19661815303475835282;0.067625071685520399267 0.12764209995864397862 -0.19495439360717195521 -0.24624078863031650943 1.7741032261907478951 0.33020436582712758833 -0.072830302017409254134 -0.56953288430652082575;-0.082169096236607550021 -0.020832421332016341775 -0.061612351163442394264 0.10365722722599937655 -0.12201456393069137762 0.4108701164284846441 0.20694624137265893449 -0.021325927407594105767;0.050670539943903705749 0.53413621733901062161 -1.4481559074206264981 0.70626800811534939939 5.0903532395296409163 2.0088911269772689039 0.26791319792468876182 -1.7073446793044524394;-0.56009283950394239682 0.58955658386259790493 0.46905916037170064525 0.85963026234482664556 4.429181025393733151 0.70464487468875602882 0.13067668172155755268 -1.760309797349958405;-4.1893904261911538711 1.9373684618586697326 -2.3059760446273811496 0.88143465888269001418 -2.2812715921158952526 0.41849952642444387951 -0.31541935845448487719 0.58334367946311493913;0.19236922567950143215 -0.51724775654271570868 -0.25222201781936498532 -0.14692033467514847844 0.24761921974856007655 -0.26690933601517941032 0.077775247785316692362 -0.3228694934414700346;-0.83934636737499945802 1.1098945478351589511 0.62147423492645126331 0.75258409941852788538 -0.94699849717342221567 0.4006159825524103768 0.65183144385967384249 -1.0936774980935759505;-0.022111171136999722975 0.15764532034321185328 -0.22807053675214777888 0.13405962576833144184 0.81989760469447159341 -0.21780904138029502648 -0.15784278297252740675 0.3255236907956663428;0.94005953983287637854 0.071660884689298071093 -0.13176359302982271204 -0.25193703043060311497 -3.8950887544336931789 -3.4112992185569042114 0.79145911703623428313 -0.67694678235620453499];

% Layer 2
b2 = [-22.850629676763887232;-0.78711909160514104133;3.3317917232874139088;8.2247761402062558034;-8.4659752094780511555;-1.9911338000857436992;-1.8272741004853951807;14.817272266949665038;7.5250132037208086189;-7.1867006946943012835;-10.192089532273472585;-18.530839236820874305;-15.97906714414116891;0.33088399072962337844;-15.45900090692450668;-0.44078187195153734068;46.761495938052384247;8.2410460116306367695;0.36693883837915092228;1.9581738687439316227];
LW2_1 = [-5.6859057495991311981 -5.6995507143824895024 0.22130265831442538782 -8.8423919904945780246 -1.4084059229628949073 0.65975570197611166368 -0.56030147175576916485 -5.0556274406229162466 4.086471501668652806 2.0076984618131614724 12.933238871904711331 7.9555752289533385735 -1.3264033195072268967 -3.2060703283963252197 3.3671436776431278304 -2.2038937709040498092 -7.025080371800807022 1.5632247800414391659 11.656098094708957191 -3.7364529383751650116;-4.855653783871400897 7.6341772074292313377 0.7182807445158192472 -4.295059633732615012 6.3520665552360497941 -2.3360241769346465901 0.26843595725220803505 0.50697954106508102967 1.0639670554006790404 -3.1527808660807825625 0.76405869532923431642 -1.8642205430772447183 -5.0642130697632543601 -0.68021591414227622341 2.0974666322008230779 2.3891512761741919846 8.5519647561095855082 1.8184030040693719421 -0.13974808638026026131 0.55324892409719705899;0.64078732293679252496 1.3002729234222729637 -0.56681400559890471325 5.9038038226014748489 -3.8646706722034709358 1.7535893774036588333 0.2251694978952945847 -3.0179891070610862513 -1.8676432670011839932 -2.2806814525586176501 -5.965794297503949295 3.1621864048371794986 0.36853405660374299879 4.7580696066837955271 1.12068079496093298 5.5787313241631206751 2.6381503174481770735 -1.6698177327603742626 -0.85102825421700689645 -2.3254905943641452915;2.4311511858599743618 5.7982295193104569364 -4.9063873896318117573 -4.0503973231419205803 2.989108882896565067 0.79705880541874718492 -0.88746877984503336201 -0.19083028756609005105 -2.7819126198088581781 -1.5739058769732199305 -1.3862654044869138215 -3.7176069393712465327 -5.2275575099430540149 0.94105569831342072984 3.0027952460689553149 0.58232212196249744096 1.7259008340429908834 -2.0056105260586916117 -0.23955677826156285271 0.11636518487935489097;-3.8974656807180503293 -1.7112783553459951502 0.44670171329971963825 -8.6598801309549049421 3.9787322797111577266 -10.60280418081232412 -2.0138715884191777938 1.7782966991120798816 4.5119899125233331461 -8.1831935068531400645 7.4147569506447918997 12.911217041288510998 -3.9269983952856293286 0.82974038195647792371 3.1488726245077525157 2.3626462936239649437 3.0893384575852977925 -6.1408641187030106323 -1.7138969904996033122 -1.6701550795361455037;3.1868720627054356598 -0.30362086756683037692 0.79982049603396265791 0.52654408701120203329 2.1182957013175047756 -0.45211437361262934997 -0.37754606351488223526 -0.60955152843508453309 0.077053159627545816934 -3.6831442128728997254 -2.085419987616215387 0.75032762146965148453 1.2012637082986825643 -1.7193229648127803522 -0.84675027395359592219 -3.2639184116718182871 6.3988541714781872471 2.0408688466944426843 0.45047015270764662054 -0.99971055710038125852;-4.7334745491503236181 -0.80450993835841999591 -3.1544851099705191189 0.2235682405753697255 -0.020607205273939964429 -1.8250870050287038016 -0.54747243853936911062 1.0342253594792629734 1.1384579515864954313 -0.091606075027345620909 -0.2816690036443770806 -2.9595532101151347248 -1.2813044626229996847 1.5822798690044659331 -1.4468665887422218486 2.3785373065935497827 -0.96076696936095229429 -1.0778431525293103999 5.504189689071484537 2.3357316728413137774;1.1858895820527581844 1.0842864873747917187 -1.1775925906933082388 -1.1961731965550843615 1.2421220998003503766 0.044197523384380668632 0.03757632900789806274 -0.45794405727425568919 3.4249849515883097339 -3.4993201333653494167 -1.1697193154526677183 1.3405112907769649588 3.5620220995044555856 -0.093313477714645098882 0.78340156012960326937 12.540555379029033389 6.7955973747196383172 2.5408674626008651565 -0.45715973465326337211 0.8785293280530361848;-2.7696550549820506681 1.8579183959716714103 -3.481081099699027348 -1.017593042787378943 4.8131223323102680922 7.2154805117383187252 0.94591099169752557163 0.14811168608694949556 -3.9781234989281930581 9.8306576902135400786 -2.8304298030705896672 -13.615184911868571049 -7.9920380453456463243 5.02619084182806386 -3.339591058237231902 2.4117071805705814214 -9.1283497124114791887 11.030235373251109365 -0.069137212539568698721 -3.1229033977550924028;20.586091240038090433 4.5332217389612994296 0.63208128266635932313 -1.2394554388457903471 1.1083473073243328422 -4.7392254049942641458 -0.1233790985045132016 -0.63976749584693415329 0.57207442242076778083 -1.3893235018526626234 1.147763810128990869 1.8187585117568800808 -3.4685819365912560208 2.6800841842500271461 -3.0449974886943227403 -18.324449350772649581 -0.38707711494009761077 -4.378471296880951158 -0.06753926732524100085 -1.0856120100646422522;-69.110627553216403385 -48.927248715539924717 -7.0588760332238322803 1.8155438918052013708 -41.771818540759532823 19.694852622728227232 2.1857938444510143228 29.675682843040760872 2.5957912430256175895 -26.879388694019869632 72.337010343687310865 -5.8687400130628066819 16.529358266117387899 -74.465205374657742254 14.091438682582039021 -28.30126081514648817 -62.314990559689150018 4.1778761403980650968 49.792637710385157845 5.1116270997865793646;5.2437411963722091457 -1.4784813032041712599 3.3016322270568494446 0.73404421048952084305 1.5580721932897736437 1.0157816988428867155 -2.3075313069202647576 1.4192743172933524054 2.7131693381696804224 -1.3101677014712793667 2.0137845283735167357 -1.7888828256997391097 10.763639658307708302 0.30089956650591376253 0.18163777498846045422 -11.802661627273842271 -1.0488482418191031886 0.1916487638708080643 -3.3148616403600250635 -10.843082106686338761;-3.6088094012588927129 5.1536357369191438949 -0.61827062462207715843 -2.8904081755865509429 9.6300324911135923855 -0.95211165922587159827 -0.74385783788682935391 -3.0538770922694058463 -0.69823415943486000224 -2.4355124685355562519 -2.1021580756545472646 4.1882015353093988708 0.92056781546979504771 -1.9401378960348369951 4.0452961008262313669 -13.675679877688176944 0.6965759707899042974 1.3951555205933596771 3.5990742183172126367 0.17933398715702419945;0.55989351589581193291 1.0813763167170145074 -4.4783455386273516297 -1.0371030837285564186 -1.3733533597486111688 0.21986749335701843977 -0.49001858467833325772 -1.4058648083810296736 -1.316647434526208027 -6.2202392819828267179 0.6737888426658809049 4.6223108035041446939 -4.7002284758762931105 0.52962394185228234278 -0.62818850951021898421 -6.134234386404082251 -5.9872502237829703375 -6.1576319470104277087 0.19520025973139984443 -2.0796904748913487282;-4.6761605283663714161 0.93080498950751400233 -1.8212709533768263181 -1.3183950874317631463 -2.8019125802551076987 -1.1652891582920403835 0.351667452275083392 1.2205170925745219002 -0.74558649499078211154 3.6742368117126100735 3.634337456005551914 1.3784318508325630326 -5.3612038727716155861 -1.1416068550396010206 1.6950233872026583271 -12.807323931847093945 -6.9107242122140162266 -1.5839088682848923018 5.075057593775509801 -2.5287248947915417219;2.9213375783965207511 -5.658865039983353995 4.9842781590956271032 -3.5070522211941725921 -4.4794083104976785137 1.976979157195644099 1.4859104137549377089 0.27847279972688315786 2.8834775760857875859 7.8885087251970134048 0.80809179770321071246 4.5388335550946496966 -1.8450534600994279444 0.64207607862110438468 2.5073333209256403187 8.5750744591499401537 -10.78287272044030054 -4.3732126091956686764 7.684624434454949693 -6.4359197003390242742;6.7971809070307971368 -3.4165565567321878326 0.39656473283003795816 29.686376904346207795 -13.596251289378182392 1.3664651053853746898 1.8487294518666019805 1.2609117026703524633 -7.842167182240191714 17.791341063872632589 -9.9013846432527152785 -18.105662907968362418 10.623212705011569668 17.102568755618456464 -5.8925522094972944132 25.912274980315537221 -15.091292213781624554 1.7966627967785127051 -21.26622751067154482 16.729622107016002275;12.227161590628160326 -0.4328382071067909953 1.7807701011907728361 0.15365825830007273645 1.9147671028595323328 0.7242960132726427025 0.70848580904942592973 0.97473066290284660074 -0.36668647046801178258 3.6009695850743934642 -1.2085938501365272035 -1.4321314994792693209 -6.0389416335900421018 4.2307382304779705962 -3.0316690784400979197 0.96185082490393769561 1.048383030032209895 4.6278341429187657141 1.7591140804060072522 5.2550438977018076869;-0.52913301023334380346 0.17148770451493502986 1.9633396943089973519 -1.1418797993008420466 -1.581448462979112568 -1.9083036087593399088 0.246149796092737988 0.21288584958580022977 0.028221759907365421421 2.056453488446182476 0.74695410503701509253 0.66988352808010531714 -4.6019324927109082068 0.93701533426303318386 -0.14084568649435283416 1.9847226708878216161 -2.5686593114393487802 -0.47776921672652195028 -0.17131299334960511938 0.23060857120149511057;7.2383944564199342864 1.8809308954487893306 0.55403088287950341684 -2.0853093518049767852 -0.18893699867421992478 -2.66384492609573309 0.022976816981207077994 1.461013398595660373 2.2214055635151521706 1.9214522656972949921 0.86044829574654924098 -2.2346237841955534087 -7.6553975429331195812 1.0737508713844285957 -0.40269537061353333218 -1.6368557228280569138 4.8508629015480204671 0.56650658885860916136 2.2640379634771825579 1.3737801012872714601];

% Layer 3
b3 = 0.31802847611436213526;
LW3_2 = [0.031495186329663020508 -0.041179363942658191167 -0.010559972616364489764 -0.029780150968966859898 -0.0039289356179680583886 -0.4345341785902928633 0.085202356594020436931 -0.12711893038507215969 0.037865737046932079757 0.073193008207528192921 0.0022483432194815486903 0.10353329137564443174 0.021026500912953421246 0.20091684996816297493 0.099457241952862054934 0.011143202820058808675 -0.012390465651444439871 -0.042895359049012760089 -0.60684092507552422902 -0.038180129468750108324];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
