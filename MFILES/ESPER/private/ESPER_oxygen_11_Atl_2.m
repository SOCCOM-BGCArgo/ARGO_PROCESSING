function [Y,Xf,Af] = ESPER_oxygen_11_Atl_2(X,~,~)
%ESPER_OXYGEN_11_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_11_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.4157128703723618202;-3.6217313844050598171;5.3650063800423035687;-5.267315579570266415;-1.5698601591378382736;-1.736233577041198739;-0.77770217604433455882;-1.1068806284247250105;3.3052069883041697018;-2.3439963006069426399;5.7188728706707214755;-2.9887949316024693402;1.8922186355810557412;-3.3326622549885485114;-2.421867482841730812;-2.3901398546004557488;-4.8406161863408847523;1.4378859545202027359;10.576467870536829352;-2.4113289370085206897];
IW1_1 = [-3.0007640557044643614 0.74517541961238897841 1.6937413228666120535 0.004123045539125994377 -1.7782794679374178681 1.9048866365151584379 -2.6919329421612250286;-0.43926735649128206829 1.5932339937140957975 1.7244878479046699127 -1.680919636025316688 3.2291677024199585411 1.7792309211213150899 -2.3793862875058047202;-4.8889614383450634705 4.5928065738000967144 -0.39763150307399641736 0.30578550364325096655 4.0305975462639205276 3.4674412590905534515 -2.2542190860785940032;3.4816385727013994256 0.30283254966372924466 -3.1415645579709310375 0.55949908419040539354 5.5764368447811634155 0.89614611516893627474 -2.5574218496721239369;0.73521375207072214852 -0.35553458977206692238 -0.034833787703197449659 -0.25794691730111996009 0.3023338113532078042 -1.4602642672964050163 -0.56895122958513322242;0.26686913814903567843 0.42726532583600046467 0.74120454603471819244 2.7147165130265777933 6.9512153091148194406 1.7549501180295412617 0.60364364253421498585;0.16500962324714632534 -0.58320510705066219703 -1.9347983543792539596 -0.42570513675361892902 4.6835729119014706257 1.7973331940008576701 1.3212220853122036424;-0.58413209959691858586 -1.1730155830881654477 0.27656441105633017274 -1.1053502245976882801 0.63698549286032279948 0.069076936019990486937 0.32591249883511519414;1.2820708164124230422 1.8651228411679601216 -10.445362119972456227 3.4821848717072603208 4.0518218420148643943 1.8320140887753364467 -5.4071126390286172736;0.29103736666529245181 1.2382895246265612776 0.22552048630579302202 -0.066069673243169826926 3.8400532980969561692 -0.50238340999946018428 -0.51637639243961064306;-0.14993730716319730867 -0.77335160990916562707 -0.41761804356625426005 -2.0122471434874160678 -11.374171363803101897 -0.10787051595842769847 -0.15809557787822001163;-0.11239688019380097983 -1.19906730891679425 -0.010584682911730630001 -0.75748807837680032229 2.9065140011899242012 0.33022620278907954816 0.3991322711426367742;3.0389905905803660247 3.2984300764953138341 -1.5861485544383249202 2.7490013261683698964 1.7040798845549625096 0.92229435317228181113 -3.5967162537743213591;0.19797260186835610729 0.26484540171981091339 -0.66870041998477758316 -1.9537984272843882394 -0.081519340010833080123 -1.2763969536437218544 -0.63608854819916016421;-1.0389112740706187843 0.43069654377375182763 0.64426726108671683591 0.65462004777985161041 0.40218179611031223963 1.1754365112836739904 -2.4618978494247487632;0.47446345564430775221 -1.2854196941404913979 1.0552789329449969724 0.063586825647692996055 1.5224459171774238353 2.9577281070631040727 -2.5731329267338520772;-4.7109025182748904825 0.040731053507004046088 -3.9184441164794070467 -0.58201506873483321858 4.4977904871982463675 1.7156290541237899649 -2.3545984202703285071;0.047183532847663377241 1.0661959119001997998 0.040964052225044934874 2.5598263251754094227 -0.14871410959567965548 -2.0960694294435788798 -0.99730965859907427795;0.12652642206065847774 0.25618503768550598965 -0.3957058212041353884 5.6828056681241339021 -3.0983800178641769385 2.3259764054317404458 -0.015977232853164359538;-0.85559415480036637991 -0.94388225185193230793 -1.7372190686730111242 -1.3848423513402501328 -0.97681423891704188822 1.4248008871890889271 -0.6733948343671725123];

% Layer 2
b2 = [-1.8108095616122277249;-3.6859253348816709561;9.4018947397716896575;-0.060338730268688703373;-4.0753510322459138848;1.50789680327603004;-6.0862673448056670011;9.3766120996045110303;-8.6874738980099106556;3.9797504479985845727;1.8058837282433271021;6.4292580099458600529;-4.6363785655460558743;-0.7846938067826735308;5.6277085869004039864;1.5416825649286280964;1.3577886668813536897;2.0951282167588245464;-8.5291581852003783837;6.1832997269153926467];
LW2_1 = [-0.25382046845782124667 0.12772017154246259607 0.46064150778866830294 -0.087548638966460590183 -2.965953093173629096 -0.36165609321160818723 -0.4137832948051663462 0.56336345813808019756 -0.12323308008494723853 1.1142274678569077384 0.088996054261484894288 -0.7148897051420409765 -0.09248502818889607624 3.5601800799976306422 -1.3219819357785871361 1.2783507720891906789 0.12213712286194261525 -0.50912457459073134913 -1.6989668819738088512 0.0018103633636179757363;1.8624048670429844687 -0.4199595490551194521 2.6305986711543605239 0.27731487089836603932 -3.0427117133024386142 -0.38827565939989305832 -2.2505457684657121931 -1.120237354345786418 -0.011033896263098011761 1.8033847687220769807 1.0387585591768246918 4.1161337996176268206 0.29199332994919502404 1.5381753134035451858 0.74273895085381191894 1.9169524033848370781 0.5644405658649519486 0.10103194065201474838 -0.81023123872669000622 -3.054973160284721434;1.2117696085709455112 0.068667822245221166177 1.2860477963180614314 1.7513430888086338744 -2.7128952712853249274 1.4088807230627715672 0.73779998816716096943 -3.614747383906999012 0.070541385252382404758 -4.9864722151244196269 0.53098154727302349087 5.9965265300333481235 2.4826437018644735844 -1.6374516352773678118 1.7678954660154315714 -0.80007069121199136941 1.6267076839585155046 1.2033789735084774453 -9.2654134086308896912 -6.1840980708271970911;0.15043509004435209886 0.12738670911578969802 1.1440299992797318129 1.1211146764975545853 -3.4537611838371269357 -2.2892678372620780536 1.6463750495633386883 -1.4219874463587960367 -1.56473437828546591 1.066687260981941332 0.23966835348306306241 0.30438942172255434304 -1.351351069824372253 1.1393896139664714262 -1.7500671226221848897 0.27771615047083303418 -0.43440159691342306036 1.4232214518909773737 -2.9935913062736183576 2.3410076515195745728;0.98188930010936670278 0.33375875912030894543 1.8400514370957223864 1.5303548541359544011 -0.6244584851213111909 -0.11461766771279675858 1.813774664456296648 -0.11830323242621768043 1.5080548812670397929 -0.16700641936462504167 1.5886097672718875184 -0.98827667066081370528 -2.0512201960075406859 1.6650811478104468044 -0.117551910775165247 -0.70517709872214306976 -1.1004915231242184959 -0.20963863497470258679 0.013528186924057123558 0.36757596102029188589;0.79881778832954164482 0.5559754427313711167 1.2312862720149642115 1.5114014208883244095 -1.5369986844527578906 -1.0330868357960540926 -0.85030237627268701051 -1.6371274942828497601 -0.33863136977053143184 -0.20110654154567036977 -1.4319237074437769497 1.5419411596536185538 -0.73189433996165931262 0.62719944899894697343 2.2566309942941842337 -1.3595539297139813684 0.057167155137884492766 0.12762775656664537838 -2.9815036687588460929 -2.2847969476503635633;1.5579377795201652113 -1.0606513322586119674 2.5479927963274735525 -1.3787717329222120011 1.5711257436570535972 0.36404239967781693021 0.38500941574680452861 -0.33084770165219107296 -0.69376730489633187116 -0.028715197259145106012 -0.24252946942784942008 -0.53589383896521258777 -0.83103549510738816686 -1.4289994964034971048 1.2100629681971144525 -0.84015012344906425668 0.53926568607345981565 -0.49364637446204884252 0.81949063446865144655 -0.092215307818872951917;-1.7629023800292591417 0.51476222907315283273 -4.1278553230057406509 -1.8055116558508799152 -1.2726505437212829452 -4.3701677766074595866 4.0205465391820105481 1.0320195991434297778 2.2071565858021413575 2.7400397765190600552 -3.7862302875666715707 4.3947549555529494825 -0.97583828810649564378 4.4188311928242871574 5.9259970758203808217 3.2128798140747485412 2.9390024858938113006 1.8760082018904835621 7.906737306706468793 -1.1713269124322296388;3.2196122991576743289 0.24854612005701856581 1.1374654923026106257 -0.28313540533821818235 -1.5068566461791315092 1.4868899873637699827 -0.14545955690175857433 5.46409920773848512 0.46963652419899865054 5.1876954444352723073 1.3710610637958919877 -3.3967899373989212108 -0.15943381247921004085 4.5703973938964317369 -1.5537389475756460122 1.9089693645557739288 -0.45756818143681921018 -0.47432347179801154224 -0.51075118008288400429 2.7523182526769383038;-0.66442396308298723451 -0.24079741468796822534 -3.0160515598183783581 1.165455021766836019 -4.9167372018330635086 -1.5498881638196717603 0.069921077892892355421 1.9986131791416961168 2.7229022923481220886 2.4465092657022911027 -2.243988290348643222 1.8671399730028674924 -3.2347255660559945944 1.7177357288094849963 1.16834162171025846 0.45988870116788149733 1.1729965567112834446 1.2520357526539040993 1.6706628209233178595 -1.1281879985648188836;0.62225023161046333353 0.48137959601575214252 -2.2213404958906508568 -0.23218846619220137595 1.1924162455915985337 0.20140873311533324941 0.46809378024942077667 -1.1076998043448149645 -0.22700085515741624809 0.3228050616558272301 0.81190894103977950813 2.1455298230841135521 0.06777737198508665406 0.5661748198407311472 0.26332927336472777835 -0.82489066162520319203 -0.12193353464437513278 0.15019696450128308673 1.7805570530122456496 0.47875267575105245887;-2.7932559844941975413 -0.15696524871593139916 -1.1077555940484344887 0.66947464910773779589 -0.48721220440453338885 1.0076391686558514582 0.13302529931722026357 -1.5372390161886979598 0.68785178081363618219 -0.4484834389368619334 2.6177751919405833902 2.3098810822835940115 -0.33985892760188940454 4.0169522064441895992 2.098522332314757044 0.27474545133652333861 0.84061353637465086042 0.96114350782924329319 2.2475350121779666956 -3.0665584221590340697;-0.55995704214769592699 0.74162955870731706032 5.1887560190714294706 0.18939720045308514051 -3.8051249487058314003 -3.6574275351393477074 -1.664076857971044987 -0.87536627987331894207 1.2498437083227091904 -0.49501524420862536013 -2.8182021745550072112 0.11381322444613226064 -0.48727369199540249145 -0.14066404866068143997 -1.3592055643200426918 2.2443189333963373677 0.47350863572826984438 -0.43883738273485001224 -2.742093281829339535 0.020837174719697860309;1.9986378420289101498 -0.75927825902449164186 -1.0750980152173903459 -0.38809527427417983558 -3.2662897250588587283 0.011071242878799065004 -0.98478778842061365228 1.4110051114505448577 0.026708582213146481177 0.67206598590765675993 -0.53529204963275789364 -1.6073373707021394452 0.84542130783095015278 3.8965307010898677653 0.10699484901651475088 0.27465464793990540526 -0.77110511234380507695 0.83930703862806432802 1.5509511999925735815 2.340848511286994782;-0.84696109556918219852 -0.10769807224257146872 -2.5186085139146143774 0.30400764931588913909 1.4293194943868103852 2.1341841102142091735 0.15640150640386657477 -0.74210302349112811093 0.68906625274729571551 2.632228858909783753 -1.0963057043039039495 4.0827752719610757026 0.055305376780014646465 7.3284102354219449182 2.3410031205036530011 1.0341122618754508 0.36727017471423822892 -0.74174218261733548818 4.4159523091762045155 0.54662937037242720351;0.81034488359444889483 0.66687587699912864725 2.3299691075044948185 0.34731754825735006165 -1.6494929520991159499 -0.56163894587942819747 -3.8343007337803820533 -1.2648161444540086951 -1.3345654986660377972 -1.9363069075776320194 2.4678688855317378881 0.31148050179187231068 -0.59871876536823465109 2.6279987614562179132 -1.9284871155837803869 -0.48406910808642966693 -1.0612227242382150649 0.67966133468996559053 0.76039559170494430695 -1.2779967095654423126;0.25155925888929953071 0.19754395166773136561 0.23595193298040878505 0.0036195941319576551559 0.30586411897611759381 0.091299848430244634478 0.050339120970610370942 -0.0071278221598320302271 0.059594257782778908838 -0.092815028932200713263 -0.31680225433591008288 -0.28025217102078592291 -0.087182744483841390082 0.7701917253582567513 0.16560697879654884268 -0.12106675734981449388 0.071736618088954304251 -0.42283741709174493817 -0.34361317127248902636 0.11180572246524267399;1.056473436714193026 0.20174159735330257637 0.092193933469498640099 0.072908068445544274572 0.046131862564439581054 0.23903342682998690583 -0.47192250214694692056 -0.52375199404556038729 0.29631970587285760832 -0.42256050999354338726 -1.3510842055668639272 -0.60962111607639735134 -0.015053835174344719003 1.4163959910453971514 0.58677826677979516568 -0.60737071426415323305 0.047772590526335527439 -1.406580705887006566 -1.1309894303192555842 0.22445800077258898364;1.304957319443898589 -0.40819632470076294695 -0.75645716702955878574 -1.280285780604721424 5.2957824289234407544 -0.35324939590126758215 0.12437573032231824532 -1.7033712893222026086 -0.77628028098852941419 -0.12697065849787619873 0.563498719339462939 0.70412100518900466728 -0.1313033142162463307 -2.3078770268238173458 3.1494346011586173972 -0.56037874983253832539 0.24425943836101077222 0.67210884143086002673 3.9420001809898259637 -2.5219231475530068387;-2.6338615833769654095 0.12739303060390980149 0.7794197230301552759 -0.99809277112993044501 -1.4938455192597399623 0.37044502922469718653 2.5743946649862374798 0.30703355263595505376 1.0407120432956633582 0.79258486939297012608 1.4921105487296970615 -1.7124645599557521969 -0.47554883545137205392 4.2181954259975125154 1.1006518436468055722 1.2876592384248255474 1.0868732698054510699 1.3623498219556919864 -0.75422650591368811668 -1.2660581756313991075];

% Layer 3
b3 = -4.7638278555003825687;
LW3_2 = [-6.9698979204256623632 -0.10780814564009513767 0.10221751981253583696 0.18681873395397002868 -0.19372339417685002783 0.085154417268322735168 -0.24427584947500113888 0.041808497469256293566 3.2194005428804368663 -0.071354484990949568202 -0.39252485638118950195 0.27013587401777322539 -0.057051460189296715475 0.11011570337450631019 -0.11813748369816470807 0.095800183137407970979 1.4426341617130995498 -0.3840518402739320214 0.17230389047856450868 -0.2134765151100757874];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
