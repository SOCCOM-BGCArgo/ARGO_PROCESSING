function [Y,Xf,Af] = ESPER_oxygen_9_Atl_3(X,~,~)
%ESPER_OXYGEN_9_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_9_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.28346203465495417584;5.0520508336910365799;0.95695803994621631006;5.5961049090795391692;-0.55593794297805687599;-1.4805634733393941982;-1.138818202436965743;-2.6714929437102967746;-1.6719013005995289056;-0.77616538333768192448;0.77844064148076175247;2.6578574220320536625;0.44307060137637427344;-2.1740457196188898159;0.78087586143473008971;-0.096011619111089713252;-5.8915148132765811084;-1.623581327577737321;6.1218808002199409657;-2.0021557495124802095;3.2095464802487541078;-2.1947790727403759803;1.7406577597507932875;3.9882427381653444698;0.35718227641808175665];
IW1_1 = [-0.87200647455328317292 -0.45298857297905620323 -0.13808730418957410047 -0.61315802109230044259 -1.1116523208729927052 0.26874299260734491046 0.2271847439195009144 -0.093810873238918165984;0.81841940092731668699 0.2205219018626911609 -3.3137003960055921858 1.0925815435467145509 -5.1413837562047390861 2.2431656151877437111 0.22422409809481025356 -2.4727336962296422307;1.6899051743995416874 -0.9555065831456465153 1.0949534930506834574 1.5489166125924744843 -2.2631756029518883544 0.38378595839544576984 -1.877415225714780922 0.60203254795752980666;-0.39931492096079196363 -0.16406646714521411212 0.47904492765143436017 1.0239829246732874424 -3.3464577113721007962 0.1385954433628958371 0.27330386234458520223 2.1944940298063406736;3.8438988440995420781 2.0139675673015209334 -0.099419358273331523423 0.85947450087316779044 2.0042558210730949675 -2.1623691767826027643 -0.036904805828608160112 -0.30423280298575028358;-0.1021950332726683508 1.5488742553622287801 -1.2969381664873680382 2.0670552814190217283 4.3216069681183659767 -1.086271394003959001 1.1250935953993925764 -2.8085725527667193546;0.91864581189445304599 -0.64492103942846989995 -0.3029956599833864006 -0.8284488307880552016 0.51039655528418104158 0.36075700890240974816 1.7176667126721107959 -0.36724696573323450943;-0.49563962883864581821 2.1501532869562582917 -1.6022397650326298812 1.9672178250121725718 7.1968037298457820938 -1.4383214025140338421 1.7412035926618509851 -1.953208071201567142;1.2579827756658521487 -0.80210875038980089524 0.63278542504758139575 -1.4794074285114591216 1.65667666466659802 -0.23612299493304619857 -1.5114254225489602845 0.64561421135828522821;-0.94624231412465698021 -0.43535465288785440974 0.037285349782566173937 -1.2938604082540969831 0.29752078935204884225 0.056579854957943057081 0.075554454401514758999 0.33671026929582786869;-0.4825862658760014523 0.19200942280022428865 0.61043947407064236277 0.98115193534662048513 -2.6611713208499128136 0.43415691766485625669 -0.2130035492654228646 -1.6724380730285872687;0.32979211936173125075 0.10963115915718608939 0.048203135690823545323 -0.46335598854689985515 -3.8309534987089182145 -0.41601483821648072015 -0.91736843978535398403 0.13206115739770513118;1.2009799476269191754 0.25485921624598900648 1.7721053516944254014 1.5269407318478600555 -1.1325916978752164077 -4.4771680838848277872 1.7509040319641395733 1.1857202936287896122;1.2969741689225471326 0.43331590335372516254 -2.3513548796708239053 -1.0569064452963148337 1.7667493645320386797 -1.0622748449600742937 -1.1685425362867452037 0.6590028663508178397;0.61192511560115414593 1.1749596324827147331 4.6437772035018145544 -0.26139309786841985472 -4.0983993357127896928 0.27578734661464932021 0.93969036217380197407 1.2450999916988265692;-0.86886717104635380338 0.32420684998237409014 -0.86823428243341327359 -2.7147343499191003424 -2.0747509601442621907 -0.34237425307338570368 -0.166148530897273633 1.6488776267607647696;0.12880961283200814682 2.0453756041429889123 -1.2339223139340675939 3.601953568550722018 11.603885689698426376 1.3485037220769005017 3.2808954469732243275 -4.6946275363595972863;-0.073216852196875487069 -1.3256146532472377064 -0.89442945548792052168 -1.778645427478211527 0.30493115361510864103 -0.64995591855428569428 0.95582709151419098514 -0.35768377818643709576;-0.81779314610247022532 0.47146531610680897373 -7.1327461980942530317 0.8711051113705827742 0.14210854333435202212 -1.0981911640072994363 2.0161415882977884451 -1.8260071406898716884;-0.24019783950539264072 1.2552755143865539367 3.3368050820412840096 -0.1667478002135598103 -3.1233161899860371058 0.82632013686168515054 -1.402740375370846504 -0.2535299937194379627;-0.16466468367185743693 1.1299053918965304977 -0.75125522297838409624 0.55228428264785311974 -1.67001933724778584 -1.4879262253788207992 -0.44652855887500814136 1.2541357292234773801;-0.27307063780539658771 0.49540872460501356178 0.35276161003493788915 -3.0771886933838477063 0.029479817710394887187 0.81368276393898264498 -0.78062355329745969357 2.3959239579868389924;2.9171680624369957791 0.17673966206692057201 0.002418978014866721149 0.96780251009400974915 -0.8544580016665619393 -2.3367313815367052321 1.5937620644885881482 -1.7422546091398709578;2.1282015105508449437 -1.426774866556924648 -0.63826623959759953841 -0.3370114336575633085 -2.0190837607343699034 -0.3356238214264669617 1.0993910596776754751 1.4481706698496741303;-0.53026862403896224407 0.24612002380718744909 0.17188199369693410445 0.77135270861681937138 -0.78590399541812194784 -0.2611008280586853969 1.1208364983045293606 0.12680022758808962013];

% Layer 2
b2 = [1.23560429768892166;-1.1653102670294395171;-4.2098776832632758271;-0.41758796591429270251;-1.7130097978252796231;1.8980859986291189756;0.46985147306003005596;0.89128821428693272289;-3.007074365241076741;1.4252365423417276968;0.80860871463942196602;-2.1128812574296751414;-4.2129276957401255999;-2.1379465649813211847;1.2660709851784048841];
LW2_1 = [-3.5612955757672315471 -0.40291765287608671819 0.86856428438923705126 2.7895166457791131798 -0.2925824174931731525 0.098860851979500910525 -1.112229575565163886 -0.60041629003244889606 0.835925350055930938 1.8909539359524392133 0.20047142010831792147 -0.83622114839304395595 0.046207828273008677566 0.87574322130112081108 1.1196282021002763596 0.14635366204660799072 0.53399833296839527286 1.4684375213484897049 1.3103163062690919016 -0.15458680864404153454 -1.3827513221741947191 1.2712782087272695986 -0.93936247792997096262 -1.2207767308372685644 1.3194549612355850332;3.0194180143225519686 -1.2925250049899619231 -0.11833628567395240716 -0.76326353183788098189 -0.0057019411296207666781 -0.42992075523966555295 0.88715831147012003122 0.45562001239569982491 -0.43618460099970385313 -0.39860712463686343021 0.99728825316977010029 2.7065982998732986964 -0.27885191899181249742 0.31427970720168968422 -0.36967783169081436245 -1.0441712322462251006 -0.89045481202391241204 -2.1336289023900656403 -0.48282060090780215544 -1.4081387365186524008 1.2264760741023388313 -1.1336480876875434376 1.6836959112607816635 1.1143320378708936325 2.0694074567320877023;0.27013584092205561449 -0.44665085877086874167 -0.086929592348392120682 -0.89243772456380821012 0.16636158710070220179 -2.5245280486880137261 0.14220261967648270551 1.6160200542090439324 -0.88889471677425635487 -0.44549537026894570069 -0.3255247546445748652 2.8641827883719828129 -0.47342291558084070857 -0.11398030498256607468 -0.35060635380132215699 -0.043070796733017426006 -0.036401822390706072008 0.029816602287726815673 -0.14703946304389392541 -0.070434844827721027061 0.41845370237733892083 0.38616520743820498263 0.18086232455063341873 -0.0071448675997232806434 -2.3208962673832007617;1.0970292521595073065 -0.68867834864321486599 -1.2284271406009696914 1.1467948415173658816 0.62228960632152674481 -1.2517254174627836516 -1.4096826576988439328 1.4128273487944948972 -0.70529713504823587922 -1.2068525603776116828 -1.7643747571378280981 2.0581757571793466433 -0.28685646112179691292 -0.098760367483383681986 -0.26588848321573732569 0.6346933435662930334 -0.40068243491689187197 -0.92926136152857119477 -0.57377890481348103879 0.025516686020618392639 -0.90251975098985903756 -1.0418303186315853726 0.3924649581968905343 1.5456617204561049483 1.3785156992300813261;1.0592650043907174684 -0.93333189437458541349 -0.53546867288647037597 -0.36753729969637299879 0.032044560403818998784 1.5070872326093185389 1.1769146167827331251 -0.62755097234663481665 -0.31138231458254239659 -1.107734607184810427 1.2619056281049594315 -0.1961261679740603503 -0.26533270492363275617 -0.15453608726410641983 -2.4995102000743734116 0.18908446887879434839 0.10387052645116372218 -0.13120781071486337099 0.79665366851171570683 3.5894596979892807731 -0.53364534375184535797 1.1896997936271231922 -0.20105606268243964019 2.2081833831285506697 -0.43896857028002872481;5.4498030460261217556 0.30811520393976266075 0.17342109141381978343 -3.0679436709802998529 0.5381392960386548463 1.5702847628904552657 -0.1611430679589344328 -0.25416747703558045801 3.544082073623242124 -3.2895288109799105669 -1.8947786289230914569 -1.7629764906323091012 0.8200074346139935022 -0.88536575370902759197 -2.327932923146994515 1.1676812373995753003 0.49796299828860141057 -0.24263287111865369794 0.82656603536112693842 4.3745404200639912418 -0.34323136218504413097 1.5910443922188626242 -0.87890834694717856479 -0.64838795484961486704 3.9349129385289014493;0.63424714854156927224 0.12106068126234374727 1.7221721280728139458 -0.5373579169291937685 0.13618737233413580334 1.1376837885127306649 1.9030525164583982356 -1.0955258283842845834 0.23973497691043776925 -0.32767924370657153244 0.50514569224149552529 -3.0434677134127201548 -0.49460977945766931851 -0.43123580218743112757 -0.82328988784466872186 -3.4478889445790015245 -0.076867576557349187594 1.2039872295764979526 -1.1234048849872813047 -1.1387016934524534229 2.4493439394287483957 3.9167198147032302735 0.79354294032333849707 -2.0087718891667272203 -0.98609847168546826968;-4.6488740698866370948 0.55700944528437001946 -0.25526314401717969949 1.1041794444120942575 0.37038668596932622368 2.7613758622931046105 -2.8701306340585452936 -1.1556962972481188423 -0.46859954782329765743 0.96389197865472042714 -2.388755056367994456 -0.78929758999778565354 0.072631276418001516904 -0.19588103835890013915 1.631929524836840617 2.3927744778775665857 -0.31059493174315971897 2.3971299608402150128 0.55541671571264394913 -0.13584615455659010408 -2.5441005692053599851 -2.5523918925769852883 -1.059509836470562627 -3.0510431334205985188 -0.73028271546022915928;4.0515893067417296791 0.48065690554726242523 0.49956794088712314084 0.63093816690339943332 -0.094756973855387602312 2.1294585384678148543 0.14893869656969246917 -4.0848323882926180772 2.3463086423737928854 -0.75017445845671537619 2.3995139895148507314 -1.3229549462050655961 0.33373702366573632094 0.89556688779143978074 0.58867081452377734152 -2.5535343645808485924 0.021110784540890707717 0.061481915071329100442 2.1654717468519582013 -1.6066826966216651851 4.2339742037157117593 0.88882360855730802029 1.554256635945449494 -2.3150627463469524159 0.70769053198220599477;-4.5853178367710363261 -0.34474687749807492176 1.8532882873264326928 1.6555960835360343797 -0.59370649954948362392 -1.62650226337643522 0.22407601729582984906 1.0251388139363710739 -0.68763874377179257102 2.2663787515313407184 0.21362560483030421099 0.14383183083274789227 -0.99554804889344861163 -0.58437881740444841405 -1.2212995331473956995 -0.030849739366496785331 -0.15864994617558139667 0.18140406320768326376 1.0372022066015600394 0.94203088675710455746 -1.8574724121579633263 2.4803593415233380348 2.2555839847746317339 -0.81862884797499346767 -0.5905150774111401768;-6.122572934263914135 -0.09069562850182587288 0.89273694856678198484 -4.129211634591003488 -0.38142449497773539546 -1.1384672659771533088 0.64583077095638075082 0.89213622337293285725 1.3373008067257481368 6.5054424196436659855 -0.44881901539038782101 1.6926724589250521369 -0.8272740381306670221 -3.2752390687538586178 -0.21517029601044956877 3.2801112912302889946 0.89587860855945744554 -1.9118422060740487556 0.69539044568121000101 1.5983205121016708095 -0.60568012202412757627 -5.2489632550862674876 -0.3460850314185834331 -1.1264409927029841452 2.7734714879836168677;0.72937042297591170303 1.8152803659193488262 0.10276845379577305428 -1.330153746138057258 -0.93408964523663073898 1.1576428415033217512 1.6530458772527290012 -1.6616950489036768079 0.8426822341507258507 -0.73466990476731408588 -3.4247372700144289581 0.43204037124260719072 0.26226433381942004797 -0.077104653666832972947 -3.1574351406290759314 -0.44107657519039722427 -0.54339102772880065739 -1.5558215322549231452 -0.36536155673598486038 2.7734564471005422881 0.21183590587533590588 2.3362477693790903999 0.26299229449301264605 -2.3135072217193028976 -0.97175787666261592701;-1.1087615762975002731 1.2987985737961953436 -0.6081900715404702229 -0.4593089200224488855 -0.68978540673303800901 1.0845517881461066434 -2.1065509887695723634 0.26574004238319665072 0.48692127789863004494 -0.7164182235257781084 -1.5506234549095754272 0.63914157153112849397 0.83763127168932005606 0.6292447894337174219 0.83913417954046143343 2.6175284181424935959 -0.76847597083770424753 0.73010101092682355706 1.6285849332355151198 -0.39821628246557494446 -2.4925829382613375884 -3.5079076438089580314 -0.24719053550866534885 0.74021713436424607657 0.7280286267037034964;13.194483967228009647 -4.4700917079356363715 2.1877128731036910025 -0.70799347995624051233 2.431558849317709381 0.78067474194212560512 6.2489483218469379366 1.376347859691787523 -0.72703037721153318529 -0.90225405785037138262 10.647071459484836353 9.8943456350217289241 1.9348895964800623126 6.0480689921564829703 -0.053689795477571383708 -4.6730629814217445883 0.87393115651876496219 -4.7717586430785434715 3.7873084883970395964 -0.42827041750980632262 1.4732917949802004642 -1.147920805357501628 -7.2486317401105493374 -0.23950589688665147037 0.046299850130628150691;-1.7835422826928111206 0.1135008047587207497 0.56327637785476381005 0.093895336992828412614 0.099802375748258814747 -0.76109060082006307901 -1.0764783470616039462 -0.092437164204481947483 0.2570656167627734523 2.1620303434089875871 -1.1455758496875121377 -0.70880076709814143765 0.021361879159592419425 0.10632001180688926967 0.026435034146965918217 -0.60124656227417228038 0.32234485382544897369 -0.48853622551179365363 0.3222196409945645712 -0.55567147693252072482 0.80627050633063657159 0.077634093228732783953 0.1943524423101684051 -0.6705593583956998005 0.10696393077679716699];

% Layer 3
b3 = 1.2162971564516262823;
LW3_2 = [-0.2297704861276933519 0.18164225068478814795 0.39092012306675005817 -0.42778813429893230991 -1.5882139695845436389 1.8972724065235253565 -0.15682769791551770533 0.141929964057471103 0.081400860957851650657 0.084952653873848954502 -0.092513886932172453847 -0.84426102850128215138 -0.35177701066678807029 0.068739986748280870743 -1.6318226680962075736];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
