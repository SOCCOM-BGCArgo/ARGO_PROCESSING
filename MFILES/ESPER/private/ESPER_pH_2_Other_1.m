function [Y,Xf,Af] = ESPER_pH_2_Other_1(X,~,~)
%ESPER_PH_2_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:20.
% 
% [Y] = ESPER_pH_2_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.6406053450188156084;-6.8944787583925952745;-1.37989505478328911;-2.3507731172184223034;-3.3986775406351230622;3.0074725470106140612;-2.4361876940724744856;-1.6680181417536827926;1.16980898187838811;2.0608749858355470685;0.73381258363632340114;3.31348074709508289;0.50988699851761554172;-1.2655306567388582284;0.64278320404399003074;-0.28276393317648185199;-2.5495496355217137641;-0.43774424281441504103;0.54467045603500896522;0.14224208976450825048;-0.62839990248767385594;0.023841773186574599652;0.32249950545565286841;-0.41949984415469232513;-0.10064916840491015815;-2.3840395903488404983;1.5678127977037781271;-0.99043666887581571778;1.9950660073239063763;1.7579000654721046448;2.680788081508837184;-1.4226924281827673102;0.5921234212141586184;-1.7780142322553140755;-3.1419922195394152098;0.72511327289483806791;2.4549523604007097433;-1.9705649725603235911;-1.950791577322116721;1.1633316715596715429];
IW1_1 = [-0.078322178654211635496 -1.1632304909290198669 -0.73886360912915682864 0.41026128522848398505 0.047624060897129921743 -1.3059650334069556887 -0.44959882094311282019 -1.114642529672305038;-1.664013533576694126 -1.7545346250958016032 0.649717894663655815 -2.3625013762462634404 -1.0114675890499171818 -0.71244091504076167976 -0.14038269654607882231 -0.043556468296921745098;0.31341487338541784702 0.23130523679834869011 1.633672742896313812 -0.39166815946830885187 -0.53851151186924339775 -0.72577206061461574382 -0.16128653407592663527 -0.3517659655997485979;0.88557521919357407025 0.22178039134066043769 0.57298969183803150074 -2.3515078285754187348 -1.1094911812951520069 0.42235025874031861814 -1.4230607250773681383 1.8649947294621926908;-0.37653333608331296389 0.15231368383348314888 0.75902384872151384965 -1.1419681506582044506 1.0901622619517372659 -0.47698988566569838765 1.334781591221507524 0.24128402649779118194;-0.55314008064343722637 -0.46728748083963106419 0.89004386576633243155 0.45220052513543151917 -2.6709944202908841859 1.7100808203201145474 0.19312541780618483478 0.76923481056490783381;1.3337659795896741333 -0.68313755752564875312 -1.5273720839574218555 1.4653895953280424713 1.100641037807320366 -0.82378032728238603788 1.4613608417949741636 -1.1733695810801707538;1.3368985356775273665 0.38072220132596285014 2.2757853825547633697 -0.29524879085379068799 0.81842913944972461859 0.48360016410195461045 -0.43644366045682508881 -1.688496318475436464;-0.75869831251134534078 -0.50505716354257979006 -1.6583104116860398758 -0.25929830115880764252 0.13314240887098574562 -0.95001036806820171599 0.1933114085642312352 -0.54610815080038033198;-0.10779967308637020129 0.057075956157466009588 0.82148091870037120987 -0.51816687487377477428 -2.155982822534282306 3.9673183474267910142 2.0912269038080957273 -0.40351591902774824883;-0.50672004328159470088 -0.29918099700959632781 -1.3442926696848267465 0.43324554089586481131 1.6848806341062043668 -1.0375167160212253048 -0.1427783246119918581 0.4561387388732117687;0.0922077527704314448 -0.45998728515359127433 -1.9436578208405990154 1.0189081646220528032 1.4278547668805079418 0.46431576305432775698 -0.15915332509841215169 1.5118878774635156059;-0.42435617176257894867 0.55720167689595978544 -0.04664521445465168864 -0.22450701624327956685 -0.77780607138628388153 0.68943906212476713247 -0.26858708177454476695 1.0900518107350254393;-0.28114665087324380854 0.20682068357508628931 -0.50989297211772066643 -1.3420233921366355734 0.53882814677515789015 0.80634470429944304914 -1.1052091155831271774 1.559863140421141825;-0.89383674319146000364 -0.48280752666567566811 1.4626963270307662413 1.0122673913762525455 1.051955072549736192 1.1354191572481269201 0.22419610519014671057 0.60371221984417267059;2.0186715470856952948 -1.2778603752609380972 2.7349533770210823214 -0.84781918756137220061 -2.4016457755312403677 1.1603512490370349042 -1.422658802718988591 -0.60291187928061096279;-0.41932790822686566434 -0.33873048879088518692 1.0970423279449943443 0.12194823278832761515 -1.0596761880546949897 2.8451398781559795736 0.65686674789547594422 -0.51303609568424268783;0.051355858657559934344 -1.2036164556511559365 0.45160195061337882194 1.0749877011128086135 -0.8393353965876296785 -0.64633209100562827309 0.92254419625465122756 -0.080221918420798787874;0.28342902397719166308 -0.10239592252657825355 -0.19626294022064549871 1.0813689730675100087 1.3154339320896626386 -2.2024611838768386463 0.19657305387000073571 1.0252490128441635875;-0.35763929296440694072 -0.087923643047887078961 -0.19060907435829652079 0.0098865312774684584174 -0.83155534649135365299 0.98343673415227306212 -0.053073603779124296775 -0.21938044228214925724;0.56404181004340769867 -0.24495800744901982671 1.6394066995421965327 0.49712062660058464747 0.81015604948056318957 0.65586256479364513083 -0.62117437167052413916 0.86641406519041086476;0.50798041818254158208 -1.185697796644644253 -0.69661721192856107532 0.37465995470486135321 1.2517839990336097067 0.11818220913975813202 -0.41925532731125125796 -1.3221443020772969401;0.21870415044354438172 -0.33479711598801392691 -0.16327010903800359687 0.44328466464447829898 0.83066051011657282555 -0.91440385796875789381 0.44803756103187070137 0.28535568669621630411;0.17772174908576757191 -0.54698706532560614768 -0.2311071947288988182 0.19376367948337455682 0.98227982809832792288 -0.9930198154670063504 0.28785107011973204427 -0.32607057935098349155;0.39880211470569904009 -0.98362532575312733307 -0.58676160693721490791 0.35344581955100518034 0.96757480233140857884 -0.11206576837904978772 -0.40246663919076369753 -1.3180017871543368013;0.88572480993185032094 -0.68652853972612271072 2.2893512217581015733 -0.84502634558878653159 0.62208232632148752206 -0.62970176379892306429 -0.9984414056290369377 -0.050657636330680579084;0.06262081980631716005 0.041564260101482342069 1.0279268047716638712 -0.76910606689387595036 -1.7409717081220417167 3.2096504489024630935 1.6848693124521818554 -0.15736892865389026652;-0.75080909947372775903 -0.49854459737416556564 1.1275859992500865125 0.61937945498254665111 -1.9017528818121305356 -0.82154955138997332043 -0.29678609356591800772 0.65259771506108454897;1.4832301944892789525 0.7365954673511668771 1.2229023975189423634 -0.58178123969036354968 -1.5125870852255509647 -1.0144023617051938224 -1.7970631882255141409 1.6154301669247828066;0.66776081317757129963 0.12806750476125508542 -1.3579928004018597676 0.48200666139640296892 -1.1111883606399490798 1.6504982376526047272 -0.61917280971860300109 1.5387658608312095865;0.18839197073435778873 0.59516145655890662081 -1.4502565987163495986 1.6808415739964543967 1.1085428621681581163 -0.59656160089062904017 -0.14863799596632359945 1.8668876868291977011;-0.096139328916667085578 0.14717472886404878163 1.8146285060015934221 -0.66572848999405076498 -1.6851160758728354061 -0.94334594799346649374 -0.61042109189352389276 -1.2359173410627180001;0.4831154195750275715 0.19852235151137700986 1.9114123545593619813 -0.015308603164388073087 -2.3213689661789436158 1.2983748116193152278 0.15560151590585635795 0.15353078297673228292;-0.92789201569084844845 0.6395217240898891653 -0.090776887008386639155 -1.2625600904590426055 0.25924491607507249569 0.32181595848130317705 -1.1515936358990714883 1.4348209757605345782;0.31362492074310954759 -0.58962859731108474559 0.18737901779959126314 -0.10942773197639182881 0.7516405512810804268 0.30491485795211997756 -0.23114732470753324156 -1.8782304467174932849;0.48083652637780077699 0.1396469367815003082 -0.34815488938073235747 -0.38191423380485961525 1.2097612318018498012 0.72154375454515440325 0.49458448616633177153 -0.87994383099153872241;0.099061773012790899084 -0.46562852467122733957 -1.6296731241374160515 -0.9549898694289471468 1.7713409511576772015 -2.3182700058955356681 -0.18122194689488532737 0.10997634490805568985;-0.20682275211848843988 -0.20633201302045062198 1.1074585138334667178 -0.92611644423431382922 -1.3568349732922047046 0.37350041767278030491 0.23805918322671809628 -1.491913152424209299;-1.2130485226290079748 -0.49101283317562011144 -0.89828071390861496948 0.47760065691530739773 -0.44013607886542033265 0.24311183239145650603 1.8563730811944227916 -1.6276532026663896868;-0.33529054287762971587 0.90406083373209389364 -0.4217760004932024076 -0.54676264000894148065 0.58558425713111028621 -0.065812334178542278296 -0.0021937817850696335505 -0.039555544295803601873];

% Layer 2
b2 = 2.003995300091108156;
LW2_1 = [0.60827009935262477125 2.6074338832829528911 1.7377369042061316939 0.57125768224117146055 -0.59720502377197592914 0.51409204695514809647 -0.17523817908684866107 -0.1627896045309325801 1.3667129484026854236 0.54381010523061334982 -1.1179489627761030057 1.6424222543754467551 1.4902687112709718242 -0.49644393327518437919 0.28999313005272092658 -0.067628248808230609357 -0.86946070262472974211 -0.23088495288310503795 0.55015199938120384893 -2.4285147582218797879 1.0291350915333250526 -1.1603154125399122165 -3.3821256219659754372 2.6151034008574685075 1.8315317598679081712 -0.86759638705135044834 -0.64667949891953757646 0.792659005462378774 0.26257566902217932547 0.24228883518857297075 0.94388957851801524868 -0.75677100638211003414 -0.81287304058916542981 0.518011638141067432 1.3439361597780348223 1.5584367919070063468 -1.3043660802557484057 2.4066427562439942633 0.27192355790921235448 1.375961656234084618];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
