function [Y,Xf,Af] = ESPER_oxygen_9_Other_3(X,~,~)
%ESPER_OXYGEN_9_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_9_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.9409754594686390305;1.0236606145514810517;-0.59679640641046061145;-1.3246658933738644226;1.3970732988594189994;-2.0450556865170348431;-5.7985890739368786129;1.1743638800138118672;-1.5012255393676803283;-1.180558453307218425;3.6574683534349463621;-1.0486862021558900349;-9.1571263306187411501;-4.6466799288152946801;-3.1762491357361639643;-1.382569914816006218;0.95157030434202383162;-1.363578559722414818;-0.6578779367421753177;0.41523569248332248272;-3.952886637403783876;1.146902260942205265;2.6132640163304210468;0.42864303161265243647;7.1620460516172208543];
IW1_1 = [0.52476023248464365167 0.077929219342486255595 -14.557963936961627383 2.9281870833428813583 10.479148128135017615 -1.3101260948048216726 1.3542101286670897853 -0.64297749714587260073;-0.55230676293893377071 -0.19559801004683544101 0.75883358479073115266 1.2936908787103835738 1.5016018986451515893 -0.52164155291204605813 -1.0094009810622968093 -0.63599654954240703031;0.035313911006207898691 0.48188611644086870589 -0.40709375153842725092 0.013027073496266259114 -3.1411596001064703287 -0.50199878653237539616 -0.04711364282349268795 -0.20056193740773001211;0.53795712902482695217 0.096418420582479971714 -1.0205041487554935564 -1.7673502143371906392 -4.2223320532275501193 0.52095091401295912092 1.2173240014478985405 1.0169850927348018654;0.28262436578005428744 -0.30843615461726597848 -0.37116536335783012479 0.4800700334263337532 1.8236022984950990278 -0.17086950478814758037 -0.45903485626783718798 1.006182189464531973;-0.10781051170746729084 -0.0073586304212190523782 -1.570618874256830777 -0.64121351065026022109 -4.3651153235252637685 0.40666497197090495375 -0.21145355895362430432 0.35381932776696811693;0.16563952552245170269 0.33669320816130571261 -0.19841634819323347716 -6.0225198210544386157 0.88170406440720139329 -2.4602033635455358151 0.17910090132421618847 2.0948621262241298169;0.03687886606831557168 -0.076707721759228159053 1.4411903717844309902 1.0587738731273996784 -0.00081959439962039112686 0.0058661532082116395886 0.4007177170794608001 0.19817528108437426626;2.6286639237488449439 -1.1315010754479102317 -1.6714160893001837049 -0.26996204057942940757 5.9990800159896071619 -1.2554224520203189908 -1.7603759009588599849 0.67602397541058822927;-0.07717836470378951208 0.036176437463559529828 -1.0575411763129229925 0.00383811295511043548 0.38872170314148457582 0.21541001567525333571 1.4396065947533616125 1.8664928577988508795;0.11867516208114177456 0.041204788719844710754 1.4047310689473058165 1.4532006169116167271 4.2384419555803409807 -0.80291671098264583151 0.51928575967786816392 0.76315073715470249649;0.41039589239063523074 -0.056377721364636639023 -1.021939536687621386 -0.14673739729490639649 0.63626209009641665482 -0.17553462682980644494 -0.18712659950707896672 -1.0983978267685927666;-0.28664297697659713027 -0.39594820832103894137 -0.24561335596948963289 -7.4554742880176743114 0.45345452474243214125 -0.1364983623703525939 -2.000690414688679919 -0.31444805093237537807;1.0343876801337545945 2.4510708140675458999 6.6989490511337566048 1.3941781388169893763 -2.7122733555661810989 1.9504443745840946978 -0.94399416480406372898 -0.68299534703108899514;-1.5251228984389162413 0.76861853460752671552 0.024139064558692142903 -0.30465528922783791099 3.4870290204729461614 -0.52658400266721061556 1.5033470605751724225 -2.0682884557591734165;-0.28625802670365230185 0.40299198128754659676 0.37495458096454115093 -0.31191981858171041742 0.37373047387799301911 0.022253585224825546407 0.78616451659365305105 -1.2123330984988400782;-0.048039104343947668097 0.21171264627941763226 -0.72147611026144309321 0.79194271369409208194 2.6474316635513965856 0.50587997817553820301 0.55362772017071149033 0.53964477994817905415;-0.023985152663041745674 0.045551362581986859501 0.72447171222094297605 -0.092201238093971973897 2.2571470864980027748 -0.44260493471955203448 0.90719557394634997571 -1.1430217187225355513;-0.11923035786320669571 -0.38318833910367372519 -0.56632186260312034065 -0.21856436657652072997 1.7399772908527160187 0.3346280787984227123 -0.78418962782318824001 0.086004591286154410956;0.0088154521129083941028 -0.017170407965964439023 1.2205369692106067259 0.11911124075443930981 0.1518876976840820292 0.42437412894769094285 -0.011533662798742344915 0.38445982562819269734;-0.15614030955471261408 0.30314515339418390827 2.9552904148459959721 -3.6203560196736011001 0.22733388961533543271 -0.46354167460857220728 0.40463385141024388325 1.366722170559050431;-0.13664675412834270674 -1.0455691468282088952 0.25693074230191170759 0.15646248161620618378 -1.0211697153462988563 0.15145178221766164572 -0.088317347171348509205 0.010423708640934441216;-0.061143716505523589 0.20639579706884988997 -2.6459913962886694172 3.5413540422789937523 5.4572595048836252118 0.63769286208482722778 1.2685785309663373255 -1.3120724732363537868;0.73769984322403647781 0.24468411286831973084 0.33126993786562175526 0.19398429743834658123 -0.58394790768940640913 0.90457170845048584518 0.93575673854585872391 0.08876439945528007136;-0.18247171714905210949 2.1369102743723900062 -2.6718109429945844369 -8.6678298015273860244 -0.85243486429344450528 0.56536065198449647617 3.2688511832856730344 -1.4484848426389960174];

% Layer 2
b2 = [-4.9230015175301300445;5.9656232576486933894;2.6943282978913090098;1.4827485057042126826;-5.432082770787965309;-0.84540398875315891924;-4.6697833491179867593;-1.2616345662886774281;-1.8868499999778711729;-0.78437046646380270687;-5.3151113857859213496;-0.43737550292928689677;0.69021992387791086809;6.6233676328543023004;-4.0651025628161905345];
LW2_1 = [-0.61068762174216084659 0.17378301825247868817 3.8870994480290894657 0.64658015218589193207 0.70396486685309322962 -1.4661094994786652013 0.2918204131325329298 -0.3642728634309534419 1.018619190925631468 -1.3225316480125908214 -0.83459710526124397667 -2.1816439812532166798 0.63745396070147197776 1.056152018030193096 -0.22688393086645311514 -0.29174233918895825513 -0.50886553537159595617 -1.5999764368132007863 -1.8782038413584078995 -0.57118584889824031148 2.5349206395660384139 0.98470347662041635139 2.0920346951591151097 -1.4745503887057131998 4.5000540979827849952;-1.177076598121916895 0.97216460043325747531 2.3901899448937484749 0.38563745178641822831 -11.893709974993120326 -5.9550725521219725067 1.3666214470002135961 -2.0934978893182929482 0.28489843956539173675 0.94232117559409345198 -0.74976863733920995347 -1.2015635619498770126 -1.4356769610012523053 -0.41183351036916365784 1.8027525808878379632 -12.954493359194794166 6.6311407937265300916 9.2775569481558459728 5.1185185978755960434 -1.1389695142848144105 -1.442725866319475303 -1.6743599416243981626 -4.0384463974738542547 3.6820894932692023183 -0.90437855220024931935;-0.88059300794516826016 3.2712352081931190817 -3.4777506874307073659 2.0663236381556386867 0.92323008994989474996 4.1517754540595284141 -1.716879200226247848 -0.44454175416729940773 -0.5803339712623022395 1.56583018677735053 3.9590224768581134818 4.3134247626123025654 0.56966101853111239528 -0.25218815077584694206 0.37304562560160553497 2.0604993036980978616 -1.5507385753690356989 -1.0627635454053319108 -3.154074709218981365 3.9116644761996095525 -1.5974808799528659176 -1.3134240369595624465 -0.22588463315894835581 -0.30625717123025886224 -5.1740398683476591657;0.4155063505985602812 -10.46540435454646456 6.0145725591669600973 -7.6670680059358220504 7.3134117041020756389 1.0572815945302200813 0.78131261108037208807 -1.4753055736231905914 -0.59231886703020020235 -2.0668888859182685813 -2.0924534543389778918 -4.9813863349479188258 -0.25705198179495225563 0.17304337192143864899 -2.5464527853154472758 5.8441327539445966366 0.75519934115141817976 2.6345269339814003651 2.8758577706452554956 -2.4140957907893283441 1.9003055260757106826 5.1208925978563009096 -0.13163088600186761967 0.16651478948204531672 0.99909878123024808971;-1.9235679723944214548 -1.0984671635087805974 1.1734549374731131355 0.41677564098753311361 2.1055719351017008201 -0.40028823592848117308 -0.27948073312509141841 0.46109361829493966667 1.8079628051500871155 -0.25680820514461150106 -0.93199751009415188197 -5.4325469301646762688 -4.661377750374280815 -0.66234784747748731704 -2.1601427483081745429 1.771096284977245805 2.8257147420579493691 4.6335934485697114482 -0.20908283914010278304 -5.7481246724173740148 0.87839862989537065285 2.1193961866469277489 -0.52125149796231040611 -1.525031533679798379 -0.25450640494146187232;0.73662113588974065248 -3.1540558940490543982 -0.26677802191329069714 -1.7785187222303120436 -1.8333244682284477456 -6.7785099124774159662 2.2565134078309934118 -4.6622992904890683263 -0.29143155649221780257 0.5143677744174399713 -3.494071609213061258 -2.4155276279514144022 -2.6251304054990227677 0.27713689891817233635 -0.28347699091549316552 -1.3289455740573021814 -0.18285217626293578941 0.65647838436654815109 3.0324984973933286625 1.9495028442210931008 -0.01061954921232608276 0.089603696586931402823 -0.51000337621350977368 0.82273031842720956153 0.20308643012274280037;0.66883053555467175677 -1.1434041100743708164 -2.3485278211065754306 -0.91527346301609124879 2.4735585320264084075 0.2469046170910284832 0.48378075428356648313 -0.46893291313074553228 -0.41332244494481984454 0.097757576540981688806 -1.9863914883298856573 1.0142644527636663909 -0.72983706720067165197 -0.70758293799139804214 -0.063194436174146884078 1.2316302019762952469 0.054935037989237503475 -0.28171977571162226672 -2.1807472174391300257 -0.0206394229072680499 0.37852184443716091478 -0.27211700872657851313 -0.43984605053857100954 -0.71056196066349353035 5.4305225842616531295;-0.058154706982373960411 4.6063551950097219034 -3.8407666444455941246 3.0777790837881262576 -2.3048752205353171263 -5.7913486803945621872 -0.57522364156063421348 -4.9507951012371895771 -0.10752661363601132005 -0.45623463563581023728 -4.805422162409714204 -1.468074115501226462 -0.20084150386921645337 0.28686649200791597414 1.2853231605213688571 -4.2774356187709781096 3.2680645980421196839 2.062318097918557136 -4.3278830166778448074 0.20143857257798253313 -0.26545264127437179225 -1.7095999161206207884 -2.1282841991235739165 1.0170799118248292636 -0.027446639769179222157;0.87153774004206996384 -5.0193463401848754657 -3.7264110147496296577 -2.151626626745890114 0.25980799209490473833 10.222424192560431777 -2.6684555070347477645 9.1504664987784209984 0.96713954088480114102 -6.291517019767383978 7.6350744854048704369 -0.6176584534221618572 1.4795908892701548076 -0.49360645106259443127 1.5117517862003451157 2.7618577985034353794 -7.3208379083385493047 -8.4754689703385572841 3.4290368910618895804 -6.0593323543639137085 0.75385097818359625421 -6.3455446098599708193 1.5490765408181847995 -1.853345607298042319 -1.6775708595276999091;-1.1689754774348963817 4.4110452246639519913 4.6379693583981609351 2.086650514294098091 -4.252834373833102255 -2.469997991403059423 0.94285358527730156464 -4.4262183492240367855 -0.431826235212727505 1.3296105003261373678 0.72784739037817280938 -0.47811393898781057166 -1.0705699910902053418 -0.8724422714360936526 0.80148246558281055485 -6.2280327965251585098 3.5324256103509861227 7.3390061960728427692 3.3701189348389166689 3.6984814431708463722 1.0647576109275316281 2.0726617184132165583 -1.6107202786871346323 4.1421156398550706967 3.886472022216143074;-1.5011907483649251649 0.028349044647450447748 1.8348666077730038104 -0.85227802912125261159 6.361173634154412504 -4.5265110147274052466 1.8389013712939989986 -0.98596969525117961197 -0.5192209760139303576 -2.1277560099123551396 2.3951141147079630933 -1.9889148757859500538 -2.0991468639514163641 -1.4086110275271404024 -2.0617047552573981584 5.0717590032428665481 0.93364221866506080794 -2.4892830137083197251 2.1001884339740635177 -1.5492425364823783074 2.7236149200668391401 3.7764216686247968902 -1.8018139246705944245 1.2935506575611190883 -5.055858688399928802;-0.20046702554523854189 1.328134330896420856 -3.716674146685937874 0.84524806539723329468 -1.29559803625093517 2.0688536044994458862 -1.1173119142789722513 1.4776343635940534238 1.4098492022837587623 -1.3170246283963662481 1.1845683540765472586 -1.2374846865913291527 1.6301129520225121627 0.40811964165680958416 0.53615571409595486063 -0.62780929499073256927 -3.3627784327986707247 -4.7707041852213292188 -2.6189513859389093042 -3.6237856329318542947 0.81243509622567211537 -3.7541576757326300395 1.4642707096564711033 0.9205352015854793013 -0.99778131433655736782;0.23924099598213038886 2.431851677305890469 -0.014681921365447145322 1.2118118469850305274 -8.7900701009717518986 0.78930710399214321082 0.039116187958073693476 -1.3639880018787053917 0.3596481144659807172 0.95809623821086153939 1.127294392315637328 4.5899888881403843044 0.55978546966331921286 -0.15263177848959080807 1.0605667847104200963 -9.4403239348007268461 1.7942674596439875945 3.9843344871743151536 1.2201897624323616576 6.4001757444715821066 0.053836449170545142007 -1.6736487399156232403 0.80774820375397671235 -0.20184967253519883745 4.3952328431158056432;0.41989702476864343428 -2.5568053770764631594 -4.8504338538601672326 -2.9003531783861808968 -2.3595283821180408346 0.96777413985364890703 -2.2933909751038057401 -0.77324103502451246861 2.0473066554118055649 1.2665191595924638612 -0.56758627307496134495 -0.34041195922274691821 0.11857110372973218848 0.6362062596026640815 2.1998581963747740886 -2.2754605686228304151 -2.6350367931784712816 -0.56021042050645186716 1.2191429371347888289 -2.2135501220778679432 1.1710645829629890979 -6.0137000724096942861 -0.4997022512388025195 2.5933646499036480115 2.2101837583697969691;3.3231014758491674854 5.8858755172251431276 -5.6554540291766581817 3.0055643005026455583 1.7796224173404839863 -7.2339774871222992658 -2.6260386832060942375 -2.6379380457134038451 -0.63742272493240736964 -7.0806762060270891368 -3.9198567874084955243 1.6698278520566189886 3.9847762674586615361 6.0163019211714390266 0.25226102237912784165 -0.69906197060689101441 -3.6855836990549830645 5.4243210900283003184 -8.2062305514386171268 -3.934182265507720544 -1.8226502946199660826 -1.8832159648923287865 -1.7644311137890975605 1.4940623718103720474 -6.7801900980618663439];

% Layer 3
b3 = -0.19060096383968697098;
LW3_2 = [0.077073126658875792949 -0.11273404395240933795 -0.16010158163689208743 -0.074211349525402023342 -0.070428519968825223363 -0.21842030612080295948 0.21205827486412809346 -0.12608149227323214858 0.12134108646475483262 0.18024088051991124515 -0.040348224460583136108 0.13645458318811609644 -0.16584615179426417941 -0.060837042195195291383 0.17032610995104524587];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
