function [Y,Xf,Af] = ESPER_DIC_15_Atl_1(X,~,~)
%ESPER_DIC_15_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_15_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.5424743914699732272;4.0212324458955892581;-3.1780725216979006653;1.167019208997447155;9.215780318624105405;0.0090434169746797105072;2.1936916315473218297;-0.39465908105196073619;5.1018598017508249853;1.096285635802286329;-2.6508722376580657887;3.0485443189664676034;-4.0622219226783649049;0.49265664171788159376;-3.3049024404534228516;-3.9977442433672374378;-1.935739741747547038;1.7527980421157622892;0.57512422798786488887;2.531472290378019796;1.5065805770286155862;1.7096087603497864826;7.7122988993693137871;2.0817345569698928465;3.3967428735498712555;1.2091841879804328119;-1.0321680412430032092;1.6336669028708654672;-0.62275909272690499474;-0.36787571092552784346;-1.2315312919214693732;4.9547704592317858285;-0.75368503382698703863;5.2461823748038147741;-5.0111055950211627064;9.5680284561288768685;1.4873545561371304125;-8.4141425131351201827;-1.77883311065521732;-7.0119696198074672466];
IW1_1 = [-0.77977523536908299739 4.366130106352179574 4.4102891767110889987 -0.036177727975702546337 7.9452239639296822205 1.0104418695873624845;-0.347443592522900635 -1.5070565783633600443 3.1537502847689342644 -3.4764051092371501817 -1.4325760953360755501 3.6712233146151294072;0.95347098064209490076 0.0079773494752888515769 -1.9209338642071764891 0.038162961462129101065 1.96009458974007722 -6.141568009374936743;-4.4628451145772398689 2.925483628020085991 -2.1002081173614470799 0.043966567615651361289 4.3488174084310990963 0.85303838831639411389;-2.147414760608240325 0.73830314755903725388 -0.73873703204041663017 -0.41355075235144500567 -8.1958739177895783001 -5.3779071287602286944;2.1869379438311460362 0.34072099128056299033 0.74184002323262354661 -0.18642972507695237949 5.346907921331367497 -1.146438882464059672;-1.8650700865684926022 -0.59141409834085112429 1.5278990292910534787 -2.259880859490576821 -1.6935598928184210088 0.88147134670841098547;6.3824421719051516178 0.36339334687831259529 -4.3059915532894894596 -0.10842281358660718626 -0.64863961185338780968 1.3441099871804615962;-2.1921142161994415787 1.0264404923997090258 -1.8719525266417122999 2.0340012448322957184 0.67145084882736938425 -5.8396462537849211927;-0.30085941042275393675 -0.85939388491046075913 -0.82856029797119334912 0.045672665995789896165 -0.7089871652384154288 -0.46258805065326552564;-0.55874915204623631926 -1.9639303198800279748 1.2581441341744095119 0.73917194381320572294 -0.81182342605738444519 -5.4601130526168821788;-3.6134146202299541883 2.7575107011668200663 3.725581242630105816 5.0861061817288861775 1.9029988171842922018 -2.1188715496469270327;3.1349424369206682073 -4.3806880340400393692 2.2623184824931099612 1.9736355449264157969 3.9319336395827049202 10.552168649510450749;-0.1287660144587238209 -0.5983299029196795793 -0.54021707254313822144 -0.00088905619771115110099 -0.023886774212081858526 -0.32815262753190849176;-0.25238856237704193619 1.4631442338036515505 -1.1015343842959028908 0.3162292680855673388 1.5846102169534115323 4.6106160182712914164;2.8797335911002237552 0.49850393161984229984 7.2536374052677761171 0.32282224206258247623 4.7724662707222638147 -1.4213336249029757674;2.4061751986792083713 0.018154436549596055656 3.8714763344712732618 -0.64880824197320330349 -0.89622230516505163589 -1.4022115399374077693;5.8902951022162470807 5.1165034994143390179 -3.5395110331754091604 2.4742054818738417055 -1.0141212466758324773 -3.62632507397938042;1.6755230296567722448 -0.12553517123563812108 3.4574246860383972546 -0.80798197995173115515 -3.9425893741703541551 -1.8332127973778442609;0.50274530948454576595 -1.0388489003871468341 1.4936479619481000114 -5.0221430870207433017 -2.6391523650484107755 -4.1630973344656876378;-0.024843790522300047974 0.68172800947631995161 -2.1577061658089777829 -1.3742745045829227735 -4.4743192473451287583 -2.0412041880005125094;0.75222814041314256528 -4.2914100439913820395 2.1512871498955776772 1.1789100698957872826 -1.4587699869930097485 2.0820336997621771147;0.97324312310231320122 3.7017556616726219332 -4.0473745417380699863 -0.021942614811849604078 -7.4334565548460718176 0.16056520051157310847;1.1250879063463401497 2.0514303761584198327 -2.5083145447749464196 -0.89995174202641392558 -1.4659215941923113835 -5.0295106303833554406;-0.17637470519604808716 -0.50141980666609076156 0.18244023127237593562 -0.015112270808249280568 -5.9515477421718268047 1.3472722241520593833;-2.2117048000459744728 -0.60112483327895804841 1.7707295562697991098 -2.3753460594865938305 -0.39938307957095409151 2.4805815896207477067;0.46542315421460483948 -1.1254936997902955653 1.7734721038940763904 -0.87811969534861589182 1.8043245371375162822 -1.568243024659743412;2.3849113207738845688 -1.7351383968109592715 1.1991145251748147604 -0.034413578419379302342 -6.2119942241682268858 -0.73361584779833888259;0.49939489610510601203 -1.1419231611028277662 1.8536462697348141671 -0.93297355872688569889 1.2351698924459355577 -1.6431540679864125032;-1.0691602180769683716 -0.47525397089699378261 2.443661346709834703 1.3247769272381171302 4.0990979695234566194 2.8150954703521056111;1.1155538994446534407 4.2714119999485680168 -0.83104344095884474797 -0.46281753767706329539 7.5119433882041795059 1.1850251061360894678;-1.9090235435374671713 0.49525252121834639762 -5.493400369393011573 0.52956634279454972702 -2.5443801569824913145 0.60563165008017694202;-1.6859330490109851741 0.076037409041761525041 -3.2110138054784780337 0.84863954434179056374 4.051324469994606936 1.9192143666837719884;-0.20898717068832126098 4.2883391684647156339 0.59945803279091947058 -1.510756727917207165 -1.3867366400369034452 -3.5094294613372474245;2.7357384940778244342 -2.2518375856839938365 -4.3636699549159070344 0.80558942717045889381 3.0749292539691142068 -0.11465908081188813661;-2.3816346131794241536 -1.1566185145315852623 -10.011788927219406276 0.44887460518911442842 5.4267830306076296765 -0.33766757282159304276;0.56204333042634768702 -3.1968438086802497544 -0.21227974741388894175 -0.96226989895765935312 0.78010131886508959909 -4.505861249416893699;0.25911749669662792472 -0.4742272129541787451 -0.27444143862752717888 -6.3734132844401143458 -1.6067089831506364828 -1.8635337062271597475;0.72648538678917018441 -0.40021919502284269976 -1.5363908060426940683 0.1313334857150733892 0.44898606508326205367 -5.1436353145314388513;-0.42594595391317535693 -0.4210406538736597426 -1.1366911250605660211 -0.24016885772982415892 9.5138551129148876129 0.49330160789396948484];

% Layer 2
b2 = -1.2949768358087931919;
LW2_1 = [0.024810348605275471534 -0.0068726686293751476642 0.11477900596778732589 -0.071153059051801526014 -0.05053408708700132812 -0.22913143601001850769 0.094426923942867946327 -0.016142948451285679679 0.025198502884954811915 -0.96814790481869450467 0.087402506461962167772 -0.0035359809376542062145 0.018393033264092990137 1.5322877941721055883 0.02213507146474900239 0.014404311198968556412 0.14716871284866162028 -0.0024719334296476980044 0.78021963652579429116 -0.0075398562072063997699 -0.18221782069588099429 -0.034873808962268403044 -0.021842196043294768298 0.020709180214828010191 0.11416804434978855554 -0.084270208488115713741 0.71690678597036439079 -0.20225393013059583813 -0.70952513656940952025 -0.15800467394836922863 0.080706809847284843862 0.10100272793343813282 0.81343379630858170248 0.0099693098518981778516 0.026135745146124985533 -0.093753254226885782141 -0.047841881135398792169 -2.1427952973495365541 -0.16278249841832984068 -0.14453188131859107113];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
