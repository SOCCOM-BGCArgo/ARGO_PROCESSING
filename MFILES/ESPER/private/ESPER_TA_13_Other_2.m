function [Y,Xf,Af] = ESPER_TA_13_Other_2(X,~,~)
%ESPER_TA_13_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_13_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.0297996584919901775;2.2160778677297234829;-2.6000915592667173115;-11.97549941309129018;-0.015576996982838353309;2.4884836853723539818;-0.83456113067174131359;-0.52270781407755373404;0.74452962081422024987;1.0110700810795174576;0.039120285522847797477;0.27290239958945022858;-1.5864572395056781851;-0.059942005073338723575;-1.1028225431236167164;0.30969441414642784327;0.55554768011927135873;3.5417753071903455009;0.45674894794398129827;0.78901991116456315911];
IW1_1 = [0.018200186695704622525 0.033232124911425180158 0.46012467383075750238 0.36466260250451937308 1.7511581594098146741 0.37248296599796004713 -0.08089018615327361883;0.36917735850025895639 -0.62149090006188112412 0.083329438861688989726 1.0420995894061637621 -0.160862119487536398 0.084603852997761352928 1.0157344944166071254;2.4886986344208041899 1.4996206586533842309 2.5089742477042391577 0.052783416419625410476 -2.7626674188587521108 0.3088138885667254252 2.7113524942020621467;3.5939466020264339008 -1.7772333443515142548 -12.214266200168825804 -0.04340865075210933316 0.7843183296941529381 -1.0032569291048507587 1.2492025807175197727;-0.0062398005817260477485 -0.19812600323137813385 -0.511447893262858444 -0.11450444767436412929 0.078326639429152300487 -0.18315119103331684025 0.15602389421686971294;0.26038988726211925728 0.024015507724017205737 -0.67713463394670958539 0.92437105062225544128 -2.398389350920808738 -0.7116656770695987122 -0.40367266891873182511;-1.410460720783720534 0.4206783753378708357 -0.40962432968814871392 -0.22909907461355183411 0.36100019434091806803 -0.66915743450152653793 0.54086452167316123596;0.40871790419975168041 -0.76361618466786385095 0.72414203917740926908 -0.36961790429291241367 0.92308645145116685615 0.13497659823178226324 -0.88474774134411215964;0.058704055467945936986 -0.64489442885567138664 -0.064556868187134755499 -0.36002830480607866948 -0.58832834823355473208 -1.0396413300277740355 -0.63787812172684277279;0.31067560666243643208 0.055341183226345194712 -1.3716184238352864266 0.17150603276666476216 -0.32797029966578228333 0.40706222453089196955 -0.28226806571818452429;0.44770582570957540014 -0.29097789253809691612 0.45674016192796790259 -0.018381511810726069295 0.44264678334615642497 0.28355610291753163832 -0.65206242853842277807;-0.0066705020297232082982 0.4110675769165781368 0.72697241973311033103 -0.26479342977329967113 -2.4861340756459657797 -0.50106988706668775801 1.3249014761604918089;-2.188612697809221519 -4.0858004566663677082 1.040713661524641731 -3.994944149783480114 2.1583235079536593481 0.56948468229846804789 0.95191437665939893087;0.095143271767538992179 -0.1522316424366266796 -0.87921859177252370543 -0.84859774376973917676 1.3994954679792230845 -0.45158945288746782376 -0.41660781732590373982;0.94809421449772357526 1.5323486820598171132 0.23525571626122995794 -0.35618158321011705869 0.80812209922673639007 -0.3281934210123191864 1.0981937683147040552;-0.1180043192552659298 -0.010495154266666984963 0.64739415376232334332 0.89778546779245360643 -2.3023551595590312502 0.19719728839697850398 -0.21119876413374677471;0.048345866063931416945 -0.61391938686964586669 -0.13636360318446438811 -0.63130877579598354554 1.4838778846293203539 -0.7537948407414648555 -1.6469730187844304758;0.0093305826125328200638 0.078993966569855328386 -0.22766638826515853133 -0.069816907480102274874 -8.9262363710146388485 -1.8072455035469778828 0.66112141001221913506;-1.560981085712602523 1.1555137201498455468 0.1974451166571493943 -0.58069098854198952786 -3.6576375157500251589 1.7883955368730748425 2.0433728411814944259;0.0099122054458145401196 -0.062332917431962474308 -1.2722177566689869543 0.10240424535288764063 -0.7491999531360427067 0.086535775007115761648 -0.43081830074281335374];

% Layer 2
b2 = [-11.292197878889211893;5.9263247943501422554;-2.6945063424446558109;6.2166406157663542942;4.6772309267149116963;-6.5356912468027799079;-2.1759388564170887292;2.1101893116083245694;6.2981426771438737688;-4.9900086485550056992;13.071410963320674981;-1.8707960603190516569;1.6044606583251976861;7.3383432121605194354;-5.7803646943219408882;-3.3229998360229369148;3.7688708755768320913;3.9591794255185868145;2.4599235807846202562;-3.5502700545239860297];
LW2_1 = [4.3894408807410654205 -3.6525868200442221934 -7.1738874193127557533 9.3355877097859014668 7.6236350966833708043 0.98474006806777358847 4.9894307253777476774 -0.46069401291347122918 -1.6280413751636033659 -3.4314621492459180807 -6.7367094690203632723 -5.1977964355340651181 1.113959460194534179 -13.434619623595402516 1.3387908394418086555 -6.5233444607270723026 1.846948927180473099 10.485013228386208084 10.4449386393545538 -3.0142765792525940682;14.814044048935926412 -1.3225925972755512294 0.47757454956486838915 1.014939482394237702 -3.1635876569743817122 6.769717073570331145 -1.1814111497874859591 0.91761251779766261905 0.81690792093002051466 -0.33417167296197658466 -5.2149940502912484064 2.5456570748759421718 -1.0514756211037730171 -2.9711567789224262448 -0.55603613281698993642 0.66146372787849105901 2.5839306411645726058 -10.448327627959194785 9.0298174799413875036 6.3665173125408713872;-6.1062661304405940754 1.6369208226298492814 -0.17853142452628839587 -0.19428090456729155133 -5.2773202530797966858 -1.8130226904094128848 0.39635868155946651914 -0.56011016671186297788 1.1520021565509843686 1.9456599822270645994 1.253902057738703002 -1.1153813895401867295 0.078719240699171952325 4.0655321900280796399 -0.089572854487767972209 4.6812633670321135426 -1.3300228181243556325 -0.021434933064557466775 -0.011265908540541857627 -1.6391071686097700155;-6.9796850606072009526 1.3354268181604989074 15.290500060070449706 5.8344871264203383987 14.016116482487152695 -7.4406285138222507669 -9.5170450976093476925 5.7326348810664136124 5.9992059838923186277 2.5545078125055749041 4.821536894705481302 -11.51639389244681233 7.6549337709767630855 -10.287285063873547131 15.835141983508080443 -0.68779269053837266412 0.18688052969518900714 1.4268658057661238736 17.822196280594432949 -12.235799382636649568;1.4793142939418923998 2.6261411689310776296 1.687364582842634908 3.8778592323712364198 -9.2358543636664318655 0.56073754547776832879 3.9301751817355565777 -2.9091782654723781221 1.8801465911213817161 2.5169179868560984659 4.4153132660977387758 5.536866618770027948 -0.88275184724971511585 4.192979073064199369 -2.0612995916739942359 2.4505430499931830646 -4.0460466178248175595 7.931553165096922875 -13.393000071196819789 2.213057991178830175;-9.4046124209927555171 -0.51698592068555326851 1.7675362131061020943 -0.15067279672707145632 -13.002212736221530065 0.85734647312056988522 -3.0959013863842996805 -1.1453075352880892623 -2.7170361250609342818 -2.3483891515850285892 -7.1783634626247536659 -9.7440747086889683004 -0.67378090672688539797 -0.95051577194667757897 -0.55211406201895252277 -1.3639059591549440587 2.4016996303779016841 0.52688461652467954988 1.677223152997032285 -2.3314214270672666274;-7.237637133909095688 2.832445736623671273 0.063100623074717296368 0.54341533167404365567 5.19393298056695496 -2.3877854494260475349 5.5407398148011619554 -9.2567811487349782595 3.4675288208789005751 -2.8801537408800013118 21.654741634494740765 -0.87039530531093167731 -0.034767927782495558486 -0.35331924080165344471 1.7120168001364917121 -1.2314763191998945313 -4.3015421867691943092 -1.3512046408051849866 -0.92571828742923611966 1.959274646476399262;4.142319441762472465 1.2080780499814744999 0.37456325478591251388 -1.2364583559744821706 1.9319923341825506746 -1.4081164089775795034 0.035947662167945960976 -2.0296517906973750023 0.39848703876538693613 -2.691444981591347041 4.8463271113608099583 0.91260460008967136947 0.17031498609707315661 0.71449804186586285404 -0.18482329403099295728 -0.1100936299633798604 -1.4320567538982611477 0.061150176505138244265 -0.19042353947164855632 5.2857152338018833504;8.3069711256798157706 -2.7488043507274846355 -5.0691591082558300485 5.021157005225012071 -5.6951409208669616646 -1.4306455744443129507 4.2318889963755426109 5.4139984715442004415 -8.1288872615043690217 -7.037726058368591886 2.9409717858922341804 2.9724936293359500716 -0.65058930393760550093 -17.753752260278538699 -0.61297638386323383131 -13.58584031798625702 7.4672234573995615037 14.259655901793106381 -11.624418169640737375 13.261633286650461372;-2.3797671883667632642 3.3134459060785070861 -0.17614181920223209721 0.23855917263623296898 -0.35191663644696158375 -2.225787711721657125 0.050247636182648776348 -2.7877860566001708698 2.5916705315567307721 3.9980177255955142712 2.7069290297376884524 0.69831616913721428208 -0.0076449341414239367284 5.3590927475311369577 -0.5824602244320148392 3.5169077421386871762 -2.5415417048747275253 -0.18307291733594485694 0.39483119973317010176 -4.3022704749660105605;2.8253807284179384141 -8.9812534063754707603 3.4039511085896925202 -9.5835035190835622387 -5.5799265319004334174 -10.895234135590502689 -4.9688687902105010963 4.8289791985190353429 16.650752870182945031 6.8163552353896017522 -12.94432398118959604 -2.1305651002917316283 -0.34158705012923479272 6.2804395367614844758 -1.7434158843635381153 -1.2188605250236128619 -19.265996756400426193 -4.651480887906200401 5.9397870418121394565 -10.608660182256597793;-0.19644162255430724917 -1.445562041505442652 0.38607903920425190591 0.81528451203608542919 20.588988503804696251 3.1195022390527036293 -2.9206927073835085018 -14.280668951274154921 -2.4450237459835562071 -1.1790925113771335564 23.156617515710522071 5.374611398687473951 3.5142931664628997979 -1.5050434481424779243 3.5634136686586961318 -6.1297929640379331673 -1.3724993068412825181 -0.93197177241202622255 -1.7139254979521258981 1.6753983563735472817;14.760034378594481197 -19.612882270187441236 3.856204313661950156 -17.704277043939892877 -13.795680600517062686 12.781355305766144426 -5.5302645208017082723 8.7098075597390423042 -4.9245354201721394105 -11.78935143633776228 -5.8983908647143774573 -1.8309731211416400143 1.2277400461449765601 -2.0894604182365115186 -1.543195765524908003 0.4368939283421973685 -3.3343032055758694554 -3.3836827396677202628 7.4494879350389444639 23.214336001617756011;27.306634871363058892 -8.3442023145680472851 1.3329251693604615703 -14.215894001646995903 9.4426749191163033004 -5.102716036838391922 5.334182558467382762 2.3800928629695365935 6.7356160626088090737 3.0368456531144598642 -1.1699770181348134734 5.7129126573658384203 0.34418449676314621932 4.1530739990819922625 -3.0359293661375437168 -1.6560170105395142226 -7.1229653853422707499 5.4751239488946321643 3.1567775831473867676 4.9112300732909925927;-23.779728938004378591 -2.3753180998879708241 -11.514307649467912853 -6.3376430609488183521 -10.018829535877651793 -11.070939880987920034 -9.8071137381287432078 -3.47569607059424035 24.562409339422877963 0.46466350967995384558 -26.208612521968529308 -20.036566783882783227 1.9505048362163110998 3.7326559405499333266 1.034524777963276021 8.4126260352103141571 -18.77865101963883987 -11.794649856554348943 0.58877488185039295043 -13.393566214889709443;-2.1470968256445588374 0.27650249473019167246 -0.39223106554617270803 -0.45492333711052984624 -1.5404225553208568122 -1.0465084514119589176 -0.3522188862117295316 0.97892819572311218224 1.1116813091519255341 -0.72314948375585785811 -1.9535678146444892533 0.21896452405814215147 0.18800222241008104906 -0.63604334950667773541 0.40633482425136729921 -0.37459038924790499792 -0.41728733341850449134 -0.05247407592882267352 -0.1061394177463368671 2.4110741959361012832;3.2763552545642751213 -9.4549950173975414458 3.8978709733074627941 2.5390537535080515141 8.565056212304764216 -4.7824734504048844741 -7.461148334374357205 -12.738975507821486133 8.9447810919829269238 -0.68684447174906393396 11.910442281232125339 5.1095823935199131682 4.2158871139434079822 0.65688948917402101291 -7.5955565206136377299 3.3059479828848572502 -5.3673007700524344443 1.4200583248860512153 8.052717310442595533 7.2157956038808865884;-5.7888552257338918849 -0.15647006088292278458 1.2843012789662493489 0.80881639822627582337 -3.870924211245480695 -2.3782377277531843163 1.0973965221032142558 -3.5433574697735714665 2.5550372818762623339 -2.2170384152765785224 2.9203106165310335207 1.5500917586944913396 -0.027140054128755169982 3.2823306967924152922 0.9010339162823334247 1.2453461421199376602 -2.6822736218306606482 -0.80618825654380099621 -5.4833948919514252651 3.0683843066005720424;3.1271363072811211303 4.6447556320416651943 2.0165802012458633463 -3.6603315334297943373 3.5596308804599186004 1.1133057444431591065 1.5435627865361318811 2.570374636300190474 -9.3811022327946709254 -9.5744189746121151074 5.3383649186675743437 -1.7861683007508819543 -1.1624319653696033594 8.9764664591208056521 -0.84850790912147699974 7.8284286577969792731 3.1236016534456081395 13.26694310453962089 -11.177404046801347803 6.1245765468107666862;-23.428511250445080094 -2.6060844417020692099 0.11342681236145432666 -0.76291136571293927116 4.0859309720331769 -3.7343543657306375039 1.4714710726767856741 2.769705241743105617 -7.186606159022293383 4.5370449832493235931 4.9017120271324250425 6.332497969924445691 1.1491768742531576208 10.000348731823988757 0.45867221695645643553 9.7050292271635569818 3.7762743146540382888 -2.993446798713482071 -4.0463667550469208933 -6.2660398092796523173];

% Layer 3
b3 = -0.33361617250257519229;
LW3_2 = [0.015933339918892671511 0.017892823678312269609 -0.20381208110938583977 -0.0058374496310041558075 0.025814441875935435766 -0.036110274749766912983 0.053929728760623275863 0.13289536831302098396 -0.012232137302699400833 -0.16832886459553925151 0.013991424432028869845 0.014305065118991457801 0.0078204526444087211351 0.016734953620879972763 0.012876158751907751734 -0.56222418898300630108 0.01254040037225514527 -0.051382723116081691073 -0.021960866594765877935 -0.020396585702482265129];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
