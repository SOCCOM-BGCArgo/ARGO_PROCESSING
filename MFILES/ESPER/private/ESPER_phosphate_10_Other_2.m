function [Y,Xf,Af] = ESPER_phosphate_10_Other_2(X,~,~)
%ESPER_PHOSPHATE_10_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:29.
% 
% [Y] = ESPER_phosphate_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.90932810626775961715;1.0952620800414978319;-1.3946366592495018644;-1.9222941721834658768;1.7195878488777529558;-2.0991787240597923336;2.1246253936634595938;0.94755279617064802622;-0.19436067850484675668;0.97203531202209114692;0.18553484583127580199;-0.61933676493998579549;0.75036129933478623588;1.1082852952786548251;1.0437878320526843279;0.11312256525928220119;2.3852492687873527721;0.42313571716043435478;2.5176478307832743653;-2.5013714115572680541];
IW1_1 = [-0.26542380768264045576 0.28129320099340493488 -0.96624669296377074801 -0.068739553822195376132 1.1417788976803824319 -0.046872797803191916521 0.23222758270511970058;-0.72271608358076133705 -0.17757229867063734075 0.23241301012187765007 0.38391740805134599857 0.42687993064843582358 0.31589485579917597757 0.36180325370620453063;0.88648544283219876672 -0.32196597068216215032 1.7664484949135912384 -0.72098246456989101283 -2.3800947860338426132 1.4349691430943638526 0.0080177735394348567666;0.33192059103481785787 -1.7407230206893047342 -2.0978409770855446226 1.1690486344904920113 0.75932254869630522176 -0.3808941724080319724 -0.49269955749532301503;0.32414840567953068229 -0.327875945679369174 0.50902262440391021769 0.96285237682766977585 1.0705864452956959099 1.4334404875165807081 -1.0307243851028207171;0.15137511969218195307 -0.39172316441989035729 3.4753375170542524231 -3.672161203111769634 -0.032604969075874921935 -0.28148986411772403127 1.2233262613146456133;0.085002419905578607828 0.67967361233990641889 -0.11108601378130673887 0.83645526376384315981 -1.5172064210249747163 0.1947276942347151707 0.49115192257639989082;-0.25285527111264832767 0.69464264790564145269 1.3157070273295463636 0.42893781566321792509 -0.41295888283892218107 0.92905695840436508526 0.54825547385123185595;0.40290612337376491281 0.11065963818292511023 -1.1142316224203048236 0.24993619837847988463 -0.01110492283619559685 -0.90051742404482160165 0.89811291697270489998;-0.46039273212354120401 -0.017534831059815556009 0.6168197779577283546 0.46501015488775421236 0.87673259834941330571 0.63439573692915074421 0.32407386146847877439;-0.10731697583020063935 0.08566290280293645254 1.1440627359055179912 -0.23455618251733872937 2.6436955885550137424 -0.61829043394041860449 -0.87511311305924444071;-0.47529193980088446647 0.10232261962541745748 0.20891785820933078677 -0.046053921345113872643 0.52842016039662909055 -0.77490369087435129192 0.04571250117640388716;4.2443295170146830841 3.8994770131443465822 -2.3462764681653887067 -0.11406163997663466836 -3.4140981218144936804 -2.1869865717702956509 1.4039199259224302008;0.3929445675735109833 -0.36717002988283620191 -0.74191824708070375216 -0.2099679518291134861 1.3673253523951509614 0.3368205741480868598 2.498968571871601263;1.1796831202876096878 0.060276172490704091333 -0.38057185006432137087 0.35461711015457791918 0.82766980661835598543 2.072036601743723061 -3.6881283144640653049;-0.2602797115384828941 0.60349829248859199193 0.35810985592688771018 0.47764558716772909097 -2.8288905583386556586 -1.0984993926025674593 -1.0252783399960445632;0.26316070854477330299 -0.12685252092231491527 -1.4462422127795009352 1.0340825652251444122 2.0469500040418164843 1.1983913383299191757 0.12046521932753684325;-0.30479135586860367502 0.12501338429038788558 0.98335195138148712157 -0.46238392234322406305 -0.89929033688535020552 -1.3090810857175005921 -0.61855786268735446498;0.1500568834666192175 -0.35357243859348014281 -0.80711426341748915281 2.6497565535966316475 -2.061900471977311966 -1.1354877393636033656 -1.4576783469697152107;-0.87420301773794850675 0.43765114642237934461 1.5584756121648026816 -0.22883353769925082744 -2.3880771654218584388 0.39117043917143173859 -0.47834986973501381069];

% Layer 2
b2 = [4.1668736753516686377;3.5289868074851598045;-2.0400751759413342512;0.83277387253755419394;11.373476428653408021;0.3364338796612004745;-0.24841946627924144098;-4.7315075656022935746;-0.36387070926209802435;3.1571556451141900013;0.132379960446214473;0.46848124936944118835;-0.36109134665228465044;-1.0110555379870753701;-2.635393241305805212;1.4188362157998926083;-0.15265470217395410435;-1.4243677018255467281;0.79351623543402660665;5.2103610937456590335];
LW2_1 = [-1.3952712851263022742 1.9062776554833513742 0.38196825016512619966 3.9268431514866972698 0.11783576393397746096 -2.0252094908354218994 3.2163364955282847113 -1.398303674892190207 1.6376461352496201052 3.3948190145269396822 -1.7504198992163721993 0.40485029397580102328 0.95635463841363343995 -1.4025225149329607621 -0.16821500179833373534 0.4812182818047865962 -0.9188567068073478783 1.8301238769491567915 -1.1717613967183346801 -1.3607967670531302407;0.092883776631481590469 -0.74519515082504739212 0.20505102863224683452 -0.14723837665574074363 -1.858856187729404974 0.055640424982195693659 -1.5566676536991241875 -0.2259582688847938392 0.089621028247714812354 0.59880952459876435334 -1.4619048477830069999 -0.56778855903181868481 -0.0038834933242261155881 -0.11435601871181452771 0.19431823165647429952 -0.023893399455080469029 0.20042833880535862456 0.794953681334888973 -0.0054454415485693970223 0.96545696335908981478;3.3878831768622514886 -3.0529768981620177826 -0.58243634455119019933 0.54166966527735960213 1.8974046312699779371 -1.1140891959660101929 0.33627154655647711889 0.049002720172712968538 -3.6110902987253763463 1.2267607523595196461 -0.64347851628434571403 1.5156520306780767449 0.32215837347075032548 -1.0046257272979250974 0.53790287114768065013 -0.74034816126021529836 -0.70121444437136914996 -0.75715714972301473296 -0.50998015393471729517 2.1619734575398732446;0.74054678483216507257 -0.60830079291580652079 0.51845532008797845513 -0.39620981659100729111 0.045575564077096272775 -0.72537127270891299524 -1.529743436019665781 -0.29702258777979145821 0.443938202977727292 0.36292970994086698466 -0.066604162323929946843 0.6203400123197905236 0.060092891762919514731 -0.42930446396566851464 0.027535439934190188843 -0.054154862361224249956 -0.66019100018569243371 0.53011914237234492031 -0.14788095958462657564 0.8066895222000635135;-3.9326380228787312099 1.3376987799696102854 0.56998609648684239737 -1.9123176794875158535 -1.1425888640530272866 -5.1299593959936604648 1.9628870525721870965 -1.6839432187430536381 -3.397090251468917188 -2.2906784439894893879 -1.396574988244445148 4.6284877162245523508 1.2065579527817869021 -0.78729725360643831866 -2.1558179356860351916 -1.933555826460639393 2.3352287454142692802 0.60106355460679927738 -0.77669510761699367407 3.3489891007527008426;-0.10932151110991746024 -1.4055335448533206044 -0.16536884722545705517 0.53477237036467895059 -0.97123956036900283006 -0.14658786089861949864 0.34804869604402055572 -1.1925695411680672375 0.0022117126041828940458 3.1792259245156926362 -0.1035319342823796257 -0.25792910747942926486 -0.060921098572228583878 0.091358372413937391499 0.51103931856697171199 0.35864419521921686584 -0.35551331364749744202 -0.27885028058291827513 0.40305776334373899505 -0.4454815058585150922;0.16816611401699915751 3.4877784599167864776 -0.53138636468826794257 -0.9597893397164179996 0.36837526722260249823 0.12114269334176559767 -0.17583084967792511621 -1.6144422136308480553 -1.3057088346441216853 -3.9942372819878495527 3.4074737632774017015 -2.392731450026707396 -0.075588817266605184964 -0.10420436673386047899 -0.16824221448662213252 0.49993660824224611661 -0.088178077283692049559 -4.0240006860519024201 0.45921924874837033448 -0.34553100954706672532;-0.36659231271867037671 2.4192296179437557946 0.47288878256588923188 0.75680162040244414179 0.53745190159082267822 1.7751793848139312271 -0.87355552001276282059 0.44497634659053764139 -3.3644881819682388446 -4.126439504114898682 0.18455520142467257694 1.6758881128323586118 -0.045969921913560529703 -4.4114006716717906187 -2.148135080019700105 -0.88514022380317969318 2.0686304542647353522 -1.9909785303720402005 0.18589105464940264278 -2.0563735337582835783;-0.93612778664284257424 -0.93124110135925619591 -0.10738655283390849404 0.31836950032764210761 -0.10378619379528943034 -0.29175494520106387553 0.79238540958260605951 -0.021257538401863826372 0.14401101478640496167 0.79540622804963412307 0.019737660770559269791 -0.23953064282854980016 0.0027660820512177327485 0.25481884133261056835 0.40818554063045059399 0.9241016354457106674 -0.29491861622953380317 -0.50564625431383569687 -0.34255776149883376824 -0.60047460406617569895;-0.96927964599559879311 -2.1408278307745352009 -1.1215901471671785306 0.99315588339878968505 -2.0205033405657792933 1.5562301032888488095 -1.6025284208257821739 -1.3530387022999581514 -0.74052572112806636095 3.1158668353970955245 2.1528871367069126741 -0.96392612810238942345 0.1579353745152277666 -0.48117048696391967466 -0.5361687744408769607 -1.7640318767318854398 -0.63431567521973575285 -0.75927798818288172455 0.4299756959999799788 0.64621905062760676142;-0.58350340415221813029 2.6784729382426784028 -0.79784991245591729836 0.042418379115769677679 -1.3960227011978023626 0.44413834197779356039 0.055077117006433008728 -0.47290000889972960696 -0.32783117305448417067 -2.6141954022461448837 1.1490930118943261107 -1.0296240216696730396 0.020876595236958742086 -0.74651137515559029545 0.0085094303064166421785 -0.22505863722019481266 1.9725940121611156286 -2.3794078751498815016 -0.085889270007623252923 -0.6283887278572056756;-0.10279334938013170997 0.87162747418836195035 0.1361454405510882093 -0.76614084478400990008 -0.7070448535809396029 -0.33290840906050722658 -0.89977503977942463465 -0.16230290923823326166 0.46855479431299901227 -0.68441770191224537978 -0.89210456204164545468 -0.59248605391640618567 0.052121202912711120381 -0.55370818135025678952 0.51611051108138816801 -0.075610972786618046992 -0.60311859032439107953 -0.30387977523869286189 -0.30413841721381845717 1.144690265291886444;0.26398063496775692194 -0.18692898690110557047 0.049570075632075182026 0.36774596739694864755 0.18254351040330318856 -0.1801747061832460195 -0.28154832275831559452 -0.74282574317938143693 6.3140930245490388059e-05 1.5090662068518509997 0.11375383475346367845 -0.30335587401179370248 -0.051379058009246046657 0.4751596115377722529 0.3230493600068626292 0.23122941407370942168 -0.34898057798539716678 0.013011309972945453786 0.39788714571779354445 -0.20263068030857472879;0.56426563564469656153 3.055089663374096709 0.52977365430125189505 -0.6621991060838479104 1.0518233582048266417 0.12742149877460684504 0.52453396643708649627 1.1717791233703958031 0.44953705823646572526 -4.4802640125728112608 -0.69462753832219892303 0.21635469364183887442 0.12226454167455244604 0.36879523798819102698 -0.85869791770479086956 -0.21617286617544359539 -0.041784966913251377074 0.78601346372884695057 -0.37901023438206637994 0.99400220450401266525;1.2110735415487015043 2.3205581317852828072 -0.1480165311604511591 -0.35859297531730732755 0.075696464119179782126 0.77028211808723090481 0.82195511558749001502 0.24492134499718154483 -0.1653867886554033495 -1.4895034117191010559 0.43365388408784821817 -1.9415094754204331728 -0.078998111723961539354 0.17405840101307393231 -0.57115383284850429479 -1.5857545943466433425 -0.27619288021071036754 0.78670809068298475086 0.7590397224783602681 1.0023935525252680723;-0.17960454056618621599 -0.53339310826366281848 0.26862414556095620677 0.44160544498425335913 -0.75115932328682244457 -0.63643834555919120977 0.87243117301679151687 -0.27338200674684703939 0.10766793696133110381 -0.057369644019828733295 -1.0822019936303681753 0.64038734351068993256 0.11272504227193931581 0.0056894466047479217916 0.34125952897632577665 0.2767817715897746278 0.20744107283970208977 0.68123757633790837929 -0.55980334940367737495 0.24034002430968873232;0.16373641628791532621 -0.61256374174285777023 0.21037257618644428225 -0.21610308799059599338 -0.12521329152689020248 -0.35889020190307102665 -0.42015627658235765729 -0.47596705886593426715 0.62696240747944553817 1.6061447254345835312 0.11467968175233576866 0.55498955636446678508 0.053659812822366009799 -0.22057707879219759506 -0.1681964671701238756 0.17584684351659396473 -0.40834766641171560408 0.42475040520133361399 -0.12432138094453357158 -0.51665721610380832551;-3.88350726336925689 -3.4379393644302047583 -1.219246986102161312 0.32604016648233319353 -0.33309742901267758164 -1.5520242780012534212 -2.1289535028466528566 -4.056228202312326836 -1.9808785961555690491 1.2051349399305917309 -0.43049205740371560003 2.1540352079637181681 0.022099437628899671476 2.0080131583757152569 -2.787302218120373265 0.98727580833586758846 0.62195743413732207383 0.37597389102732392541 -3.3676119261076506994 -5.8957062896601915014;-0.011265011546602553272 0.057708772488010311175 -0.031259517613973164529 0.75124506831102644266 0.12442056532591456997 -0.25610557953160056899 1.2242475729685724506 0.7382186701170686538 -1.2975845863698778349 -2.0815478701466871847 0.0019852429711117117878 0.86035562073645122094 0.051585281484633253857 0.27180500172013599691 -0.30830904872334541356 0.054619477094941366879 0.80575568387426144135 -0.6475898226686670478 -0.140171008235227601 0.51950242236955201935;-1.5456729231589232398 -1.3195407166042785185 -1.4415293589146798148 -0.70231218632761160947 1.2795977327458405437 1.1365950105526028135 -5.352519277826356614 -0.47959359544628138439 0.72222239421383405134 0.53231040384091010687 -0.42647818348831367796 1.1480146855876491863 -0.056448174509486845341 1.1572801579056657406 0.76013741250148270101 -0.13861809931029253629 0.66447420491642794627 0.43973388345690461732 0.68495994353716860292 0.48631489578167458321];

% Layer 3
b3 = 3.2735436436805822602;
LW3_2 = [0.26798910535073822148 1.0678347614117911224 0.11155168322340751341 -1.1343824333798204762 -3.7601682153428583888 -1.7781721911231769262 -0.32649558686668711527 -0.45186207905291253528 0.91558096981990000351 0.153306076685803927 0.34178836594382705494 0.83129311662123339666 1.7040763386658208667 -0.50691836035733939259 0.37845459440714601662 -0.85114782528674837181 1.8492943707713311863 -0.49732805348467284956 0.96590291476010980976 -0.15729099002415289354];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
