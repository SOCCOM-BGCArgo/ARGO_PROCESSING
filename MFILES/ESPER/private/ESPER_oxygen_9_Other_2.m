function [Y,Xf,Af] = ESPER_oxygen_9_Other_2(X,~,~)
%ESPER_OXYGEN_9_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_9_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.4848157405982878032;1.6400633108998112775;8.4116124092500985654;-1.6889599828484556099;-10.22058936553832531;1.0159553756722654594;0.31060150091571292474;0.79228841896189095007;-0.18442589181835594703;2.0727100250529710834;0.072674923624663531618;-0.15468988575454628576;-1.3483976936263870616;-1.340734078581151012;-3.3652301398417749922;2.7197052185482002429;1.8341413752139006377;1.5777293725601293506;1.6993258751215023494;-2.9949559042107476436];
IW1_1 = [-0.35294123072432798116 -0.88173696437646864599 -0.78151791813748050508 0.14899967236147038108 0.88259582583865980876 -1.1956704348503961466 0.22387964260396886473 1.6007676394697609723;0.19914368454328945646 -0.1500271883842330678 0.6103544324237213381 0.31294039645397625504 2.5412934958248678541 -0.22738928550866577272 0.30923401212181306219 1.6451261978098883354;-1.347473448515384975 -0.35512755350359065387 -2.7644093213642024764 6.3999569936219380395 1.1110522861819434048 -2.5401493479855097313 3.7878658577603441238 -1.1513713535608078864;0.033201363976498185493 -0.20834843928958807213 -0.34753375487899784702 -0.54215880342854072538 -3.9528397024220924827 0.046912111155424478237 1.033206003005292084 0.81383026054827090068;11.699667550147641037 -8.397174470264237911 -1.0896559060252704043 0.55120672789636182554 1.2141700040909866321 2.2987712355714311485 -1.1745632458209394056 -1.1812083999770741638;-0.041898911865389597275 -0.099988265504546466889 1.3933821150216372242 0.32572681842416845166 0.57525559168996975856 -0.31254101748996993004 -0.12857644785181684965 0.36320927949147324698;0.32254645321547775749 0.3430607446766099633 1.3892459171091195991 0.34359838477320348016 1.587270284226797834 0.18509315898291744951 0.89738016028201761376 0.35250768862086834243;0.20194457352307368381 0.024372821024090773889 -0.48852321475317445065 0.95067988234776867884 2.4993649760068983312 -0.50513548194894841714 0.54707867474326188351 1.2180499323342590667;-0.064197313080256279694 -0.16833618756443144426 -0.95205051362088177758 -0.24432873292181822578 -3.9494934980990974438 -0.30707764440369983427 -1.0291062725540007783 -0.14861480781278474383;-0.14711965138518887097 -0.19008169775664945922 -1.9221634760582415602 3.0658878665291529053 -0.61236380364127462883 0.17513593343758601661 0.40068999204381938739 -2.1962899313683781344;0.1312244860566300908 -0.35439277727908197191 -0.20893922551325549986 -0.17549191527019170067 -0.61282719042963995637 1.5211130083122388346 1.0567767818732485274 -0.52624322998356798387;1.0459799545962360501 0.51383260238020200816 0.51010416098606370383 -0.73611276950195825286 1.7722525289288026951 1.6240883820012994576 -1.9234501976902624865 -0.85111497113508072232;-0.24524808487678345648 -0.33489154059451559098 1.3858876898407079814 -1.0636247266210852036 -0.54178797260600408681 0.28803421781825927495 -0.18053595602863078962 -0.33266885579041532983;-2.3978604786275243832 -0.56039537433551844803 -1.2440497298094987944 1.5863004278567536254 -1.9338851233623817194 0.76059164819523517043 -1.3979715148136235836 -0.091670591789964936402;-0.47127691009679173462 -0.30080324298111837944 -0.83896276573304429114 -1.3783312978723782916 -0.82072514369984761462 0.025010016561752966557 -1.229626176381440894 -1.2801958841528988664;0.17019289911886512079 -0.04758095823569215288 1.9663144460449060169 1.4812174131431627977 -2.2389111959377245853 0.46909375050816165542 1.2760219780037049819 0.20475250292535893126;0.12830119487918681398 -0.029935510308362250909 -0.87730173137835387731 0.84804380589843952887 0.97492602755648083424 0.028136677343625793313 -0.78836031101959269662 0.0046628198336121102346;0.25442000996056846063 -0.14591942995529338933 0.32922364374537477216 -0.063712545386501923117 -6.5578868384054720408 -0.82023090350778471436 -1.4792892245694586606 3.0071023624382364758;-0.55382337838915773887 -0.82795449484610594837 -0.11039354786491459293 -0.11340626571503270581 -0.24742392964798445854 -0.37360864116899655807 0.23505279877594675852 0.3665350425779625998;-0.2090570801342029883 -0.39355616604764426247 -1.1468178900325474157 -1.1148462455649679193 2.8301789905898426802 0.7818239461489423503 0.16549170554836264979 -1.2412472385600790137];

% Layer 2
b2 = [1.7636271914945458317;-0.98322618489686020027;-1.5193575323324457482;-1.6377141243666690773;-0.17237028319804675869;-3.7752999948445165046;2.0795094811123435719;0.1214412611663921171;-0.097059440638957425462;-6.9248371282205267718;0.08629389836561378313;-0.49576626320383615498;1.4531163200195431617;4.8469026309918614714;-0.9693470130454504563;-0.00794515573022323493;4.9315782325572934397;-3.7930068575449524815;-2.1821518538466850856;-0.55619125932843527238];
LW2_1 = [1.6749234899145188926 0.58049128668718252833 -1.4484468159357670736 -1.3052917918680035925 -0.06172485005930779256 -2.3094164975563375997 -7.0187820463174048768 -0.060172000738590976365 -3.3265234378912809099 0.85030564980276579501 0.26999550050397941314 0.4351978790560472321 -0.66083345153019601437 0.63381303308181868861 -3.8100801393645458148 -1.2994323926953825765 -2.0637459626992735728 -0.58742070942404822631 1.2371671882377799356 -1.6761264021425590354;0.078128541775934964853 0.98947234534658612404 -0.62412536376280014494 1.099090488380213948 0.057505835550343789575 -0.4059736603527742127 -1.3348370124513389001 -0.60356198492593182703 -1.9285332478058141437 0.54535947721074518046 0.46280865230823070577 0.48555560691643645521 0.4931077494667737704 0.089516422590481856125 0.57430100943609696529 1.1524051460664663793 1.0132426430676528817 0.64382192417823813635 -0.41199351983224791196 -0.11064325642209209277;0.42308693059744550968 2.1208728185266396693 -0.25637086461416785932 -3.1223515057173250042 -0.16188993007385135692 -1.5947726559370647426 0.85009759243138627305 -2.1431876990903648839 1.1363631406917715783 0.31826985493451120934 -0.93802641424156019134 0.14353991963398485265 -0.28451015520017813865 0.23616423417499615711 0.90232500262253256818 1.7365518278561766774 -2.2721913976855581119 -0.39289653207425923043 -1.1033611313864406522 1.1394075357445903052;0.91959784153539048113 0.80414042058395918122 -0.88514556974409586143 0.14030938417760679959 -0.27747786990319217582 0.78969867421712891531 1.1181845814620685609 -1.3444418531767956537 1.5160409105536367669 0.53188017893455585838 0.45783345441769124351 0.012717770588843189256 -1.578210475376689903 0.2420755786781478569 0.33606114321226432384 0.085441374635886607747 -0.77347591566976536814 0.0067398352181526084009 0.86864675909892663519 0.52305765966624806484;2.0920074216849440241 -0.64858147758400319649 -1.351512676876880592 -0.95784130239634379667 -0.59618579321170372953 -1.0716978731922512935 -5.2215479503619697255 -0.39732998950621373213 -3.0574001249617115405 0.26889750137273094044 0.34255721223567808797 0.31252708876790274983 -1.0808812153352718166 0.66534319009933762246 -3.3874112751901477303 -1.7045613367017784512 -0.97134578970813190146 -0.80832460273938167017 0.71781292646302830018 -2.5495714040256158839;-1.3736166783270402636 2.4479326827049590065 -1.3264652533036778159 -1.1018243609594287058 -0.010784615341057349897 -0.51702046765628772995 -0.05641806215888975351 1.021629024195508828 1.2040142378390921163 1.4175459285103977347 -0.961263412586139121 0.1347232765843020541 0.41163119710360429604 -0.11725205100303935646 -6.4590382121316309849 -1.4965948399485142772 -2.9616234996082551056 -0.99628784371622536309 0.2690187815599818788 0.1012437745389873911;-1.0535185065593966058 -1.680114727662777252 0.69547024005109914224 1.0945017683016964316 -0.7111489368039886072 3.01251170659447709 -0.33232621323592415052 2.7356957142919999804 -3.0317060286896584387 0.57694298574402336222 -0.063381599366984342492 0.72049925337026976546 -1.3365309359663595234 0.56347064709933303295 -0.93009016126852472883 0.62034528960084756033 1.6223009531595917743 0.38076508490381261174 0.95819881726016398193 2.586903915305507784;0.57317439678891790589 1.1333694714274040738 0.26586349379866452969 0.99403839624331369329 0.43561183743396059143 -1.7263593910907562012 1.7373308161596332511 -0.52952624093123190629 1.3035315501183155629 1.0153895555149390351 0.24177682891121504705 -0.01564675768207340889 0.6199925475260867902 0.11636108758232766025 0.19417028274457689974 0.19774418208956945353 0.97418570606515342281 -0.099045927993529847555 -0.098690129393855588469 -1.0744922527761544551;0.68228094781641690503 1.3666693139374228583 -0.32045288750413486456 0.26740117802286073045 -0.51615252768208330636 1.8335898474850396145 -1.4799050389752061996 -0.21812165917430148543 -0.80625286783931870982 0.74887749932948921572 -0.68862917529107137149 1.2220140635587453115 -0.66647363655523350623 -0.11968901837544655697 1.0951125632251008657 1.481737390611097327 -2.1890473544379944748 -1.9249598258288853625 1.2322248558358581683 -0.29655251220658196409;-0.082745618567584736103 -2.2514743569173054638 -0.58605002839464959141 1.2020500191797616196 0.32583544119810192718 0.64677662203672259267 3.2675933059818045301 2.634331470117927676 3.8167956465343624295 0.96227314838543498432 1.05000931003670539 -0.84236776079367459147 2.7399802837868616479 -0.68683704076641105551 -0.42576486929279278026 -2.0513829024921390598 9.3907787720880531168 -1.7733624022725984481 0.33581228911358718126 -1.442920391177893169;0.38102000578290745603 -0.62716531992345037061 0.3119911827574532448 -0.11004874177622363252 0.070346209375610077585 0.69259040071161370733 -0.49694297253455338437 0.041032195735805868098 -0.1952351847991607714 -0.12716680600243857047 0.10781603496774809503 0.071779579819552866149 -0.17923204222112509854 -0.11238613517018089527 0.03648848847240495491 -0.059649896410402025726 -0.7656644200105647835 -0.1462887776308396115 -0.9454404349060494539 -0.10683602524405039214;-0.74692785280931206504 -0.41502217011772529753 -0.17483911441238142448 0.6982959563380353174 0.7705438898831582506 -1.3925541332089332869 2.9792590925356816633 -0.75395886284228230689 0.68169212631396391977 -2.6794346858669371159 0.73034102573791881419 -0.71900599286229738283 -0.20046958151061894382 0.19955190907426531566 1.2167658164029455659 -0.17908050670008562877 8.545930261684791418 -1.08921145035466993 -2.1753766686476594394 -1.3893376283917917569;-0.91596042475730865551 -0.44618665771680032783 -0.43950685146786167001 0.025960611561592142338 0.084817642207418511568 -1.2100848418523004746 0.25206324078573166814 0.69573700068224342274 -0.88750981270263984424 -0.75859846280178333533 -0.20212342570069458114 -0.23047270315099208093 0.83504894526775341745 -0.10921422215757163598 -0.0091300426720175072853 -0.73145129671643671632 1.684593192805071693 -0.11179414477395727134 0.51721160643311092642 -0.39404412807829780618;-0.53389989676171978328 -0.014458680395814422701 0.79379940329458298365 1.4220219482637896924 0.22132344718725413535 1.2497765661374933277 -1.1738318597943382393 1.1566827415590630324 -2.174875882759622403 -2.7180696395354200234 0.22331732702839604543 0.16234136518021227702 -0.15325879837050010446 -0.060420007102834176471 1.1787683113760440978 0.77374864767953810407 1.9304454279468892253 0.69625278648309862906 -0.24992029474649909981 1.073093470127473914;-1.8493786856225098436 0.22184893853517212436 0.12202532249711633972 -1.6155363841903993549 -0.16663303255782205281 -1.5744495669218960821 -0.58346156507970203808 1.1757665113038908711 -0.74165120102463855112 0.59618447760564774462 -0.13049668481176598944 -1.048669234981514542 2.886017091139238655 -0.25996376884807331775 -1.4717941469734365789 -0.28698878418445644689 1.8359325735316491812 -0.36896550476473843894 2.2301344295075185009 -1.1207181082778900905;-0.84590196286531427194 -1.2616729907315411552 0.26290040927808816518 -0.34369348160058899033 0.54728209472705924288 -1.8818137378296946327 1.5511818212492789471 -0.0044421122336038704193 0.75231088712011773278 -0.90399574089230338991 0.60077887877103475223 -1.2932040000744666752 0.47277358004642999756 0.11956286328007621755 -1.0633733975514625403 -1.3629890244735696214 2.518271245171833872 1.9891538069004772726 -1.16856471317356303 0.37741033033514692629;-0.35683867243051137219 -0.89093631323674404854 0.46577813076092261513 1.6900741111985191356 0.034163404447415723908 -0.66066037919002595924 -0.85598899692426155816 1.8098630301428544342 -1.005288405369232807 0.40507492077821094512 0.20780775373496604419 -0.10953588339758575654 1.4805236332516447106 -0.011687593767337370321 -0.98620420300184574725 -1.4704977853612335448 1.3244706393453977711 0.92251419288924274564 -1.4293539235741443694 -0.68862310091089751207;1.7045127083682194424 -0.24515739246727560885 -1.8360312746026843378 -0.38634963051837228898 0.19241438743160071967 1.1525615761457566055 1.1290419954323627216 0.063750192344401490629 2.6544726968932281785 0.83435318021930993115 0.97106806044998494887 -0.77017045153003182989 -1.8636741598596646696 -0.063034457698803572634 -1.6942964404289082569 -1.1478903807201623621 1.4692591129775891545 -1.0411400209095229563 -2.0603241437212598264 -0.47844104983706670087;-0.45988069609677395544 2.642651616725457675 -0.13290037555425723848 -0.2020612830716149444 0.049218589244622891476 -0.041347474951375765007 -1.7229646425839333368 -1.143231099680561913 0.039608889377581078806 1.6898585363609257559 -0.46058839172286686336 0.44856332766790912858 -0.22840019527656044152 -0.21613845562538661071 0.2079162764615908876 0.55189127333662113539 -1.7691324930809488869 -0.86999701348200497719 -2.8309885610816563073 -2.073973660079971193;3.1792447655581308474 -2.3720442347049246479 -1.2977200169165463706 0.060633622541967448216 -0.35886926067895025261 -0.40850606904202801939 -2.441648026951140249 -1.1162587827737084911 -2.8495968917769554096 -0.23184702243776397768 0.2510556108594431679 0.34370146823569214245 -0.83458009307324643178 0.20229268277968404099 -2.3081960469356048726 -0.7564528223177590105 1.1721880062829421743 -1.1304266403616987091 -1.3955306922886947518 -2.6342811480755794484];

% Layer 3
b3 = 2.616307523721805417;
LW3_2 = [1.762856837785142794 -0.67306607844016386188 -0.64072748189488715198 -0.81994064378631159595 -3.0559697770482072698 -0.68445090813593856272 -0.20000909353138832114 -0.87499483371623876238 -2.8343951494372401356 0.33688488910679192934 -2.7759156008575924801 0.14994130125809312926 -1.2163130285532752772 -0.60498055189641697371 -0.56197897244122307914 -2.6974490729358895358 -2.9785776367339003023 -0.41020623557103419454 0.6275807685482270859 1.2301718422458027824];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
