function [Y,Xf,Af] = ESPER_TA_7_Other_4(X,~,~)
%ESPER_TA_7_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_7_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7024987077283102455;0.72068021638320123312;-1.2483133166064808162;7.211529998571968747;-1.269191837540529999;2.4661385060894565058;3.7276196529122573864;0.75119877355367836724;0.26109433383516333915;0.54135375589207423985;0.52175932860705742655;0.17319183651296549131;0.16107101289693576129;0.88712516899057947128;-0.8429934755213926989;-1.3654204955336650684;0.57294120539428095018;4.9837045453307657894;0.57251305223116810694;-0.014959453577475209304;0.44243671535467948841;2.7383604020599170425;1.3342154892002529021;3.1272998011220383141;1.630897698641960103;1.7408911013683936453;-1.9737948379406500266;0.97129367829484858365;-1.3425215232094140916;-4.2333888062093389948];
IW1_1 = [0.82144708443501157635 0.91067925478980660259 -0.54122684713923274735 0.048747883120713229876 2.389616648776740071 -1.2375996438145009382 -3.1738260941909515189;-0.13017759991811531095 0.055430947335479402449 -1.4196268622464593978 0.50683233614768663511 0.44246218680207693996 -0.79191508502374863276 -0.6275356505402380769;2.0524229086246230658 0.81794678741059834159 1.6713352032055599494 -0.5907924858306590199 -2.2767649265096330247 -0.53616535326833492103 1.2873687391964534488;-0.6097459978161819949 -0.43499551868274072275 3.5646819560242493097 -0.54951475018656670279 -3.0869880280274459849 6.8241842420929677004 0.42190438136115621104;-0.14165654778799582902 0.18251251701205808975 0.20219623984966367258 -0.13788503453040112934 2.3770885878303382732 0.67486594206973871124 1.2748283988299784486;-0.83353199436821312496 0.95782251295853826356 1.0549478079386018781 1.1389551384388358901 1.5363136283132439175 0.26451670418430345277 0.72586388014615610409;-4.8392926750144447112 -0.21908113424591424412 2.8804122798218152468 0.70741186625876339988 -1.7698599006067643469 0.38475278566552872928 -0.033766683523729787431;0.77606692725076331651 -0.18251707158878480164 -0.44265078534431562263 -0.56628960711824316565 0.79897878577321113092 -1.5571751397486943702 0.18258431272267239276;-0.07271051655964796967 0.4954309888295194142 1.8077328554158238472 0.48092389350099845613 2.8517625298136679568 -2.8741948358587556811 -0.97498641101654881513;0.67447636927113230332 -1.2527725150373754115 -0.28213084565951390692 0.058239346033441684314 -1.1894768554048575915 0.43646192323462246199 -0.96503084784632686688;0.018801726600919270449 0.50196580929912160141 0.62209452994590475061 0.30216292829110585894 1.266137030252467266 -1.8429528258899365856 -0.36784575814164494068;0.42386497734689071448 0.56970645744248160636 1.2884528491649789306 0.78257555192364836039 -1.90162624266671898 0.40850367904788098539 0.17751559551366857814;-0.041051060599106993509 -0.63083574650816032214 0.74522606085960019229 0.62908246411696699951 1.7745266245608040112 0.15221406973979756394 -0.66432724892279948481;0.47963785696348393284 1.1823922077519517515 -0.02595031832411565445 -0.24145285936339053179 -0.036908232951122083021 1.5244890029657391928 -1.1139710171929364524;-0.13821503857983277741 0.22589468307801488511 0.81272920558940930924 -0.11984674712025829291 1.4103608232110920184 0.34037850605047914598 -0.36968678829120948937;0.5031057438770074608 0.24984255719481449076 -1.597024133229554943 -0.37155154305332943609 0.93191578816134434948 -1.0820294300628972017 1.1147575677485139778;-0.21420664096681141242 0.27657453042107144059 0.014576906543302367222 -0.197946881335998498 -1.4318854997764269843 0.28718564394496187697 0.20622435330407748455;-0.82078784498221735166 0.043461223334739236546 -1.2324965886302248208 -1.1298627301786057231 -3.1834316616228179875 4.2219175812961546868 -1.8759915411214240777;-0.27280647672980029572 -0.27819408197802392158 2.181164888599601781 -0.28651014127273011223 -1.1031114633081990917 0.4997455904547723482 3.2210372638725042194;-0.080442119505108114486 -0.084094370915000701827 0.15192047948743911401 -0.28160038195188002996 -1.5342767492507587423 -1.4613169437348521029 0.053871287554837873901;0.46054300812539866739 0.37210111710817267427 0.47940322509595462153 1.5638998745556831338 1.1026223902533112131 -2.9566443412585501349 -0.79118282667528472274;1.4074008836852318627 1.4571483642353904031 -0.77782671959843563414 1.3144014041597835707 -2.1352250689583152088 -0.35862731472869141536 1.4256350784959432865;0.37888531269274672297 2.0579609380112349193 0.90228917756390503158 0.36986254005878133055 -0.41479883816991541812 0.22043005342236451916 -0.11426088909392380366;2.1731968906752832105 2.2652500165609561478 1.8921338075653588717 0.28769597258730184031 0.067567352318302797975 -0.90384780421948041074 -0.32642908680285837031;1.13255413491286272 1.4860238138654084938 1.2712512395936317322 1.6096725348047200566 -2.4021633057077620421 0.79048986324462999775 2.7221344566656426878;-0.026145125833221309619 -1.4662881486602676873 -2.4615734252381815672 -1.5645463479155001796 -0.24245074530174801075 -1.6870362944825934015 -0.61238110881608032177;-1.8180832708513607887 0.68809946916339170819 0.16302197567252213473 -1.1372028766523785137 -1.8268313352553362527 1.7657301593442771281 0.034235113830572608262;0.14338416952427476825 -0.20161090442557552671 -0.16887310617444398209 -0.21334000492350080336 -2.5071657663933226701 -0.43986283806789955309 -1.1020951442461015546;-0.11241395057026822013 -0.22560513414605831706 -0.42136003851556724786 -0.67542140509379011704 -0.36459424095375492225 1.0399944316676823508 -0.32769608263679250726;0.52871865721483224387 0.74433320966174132405 1.3620334016340682748 0.54655158075102316939 7.6983896532645479382 -3.2746906844683283389 -0.33641117700591344208];

% Layer 2
b2 = [1.2390766293314359192;-0.63685984909809656429;1.2393523618408306408;3.2842247619531175218;-1.0147310683764316774;-5.8718857464898812637;0.83508085218258498728;3.1336065537158845906;1.6264205952766725982;2.9150388365897343945];
LW2_1 = [-0.055713611393093359636 -0.017162084153468204484 -0.18583625952527466074 0.10537033214380754631 0.3599666862947895063 -0.09102154366990615475 -0.028702391168314314585 0.206007030511519168 0.16812528060066062041 -0.046261889772814861199 -0.8877798995690421302 0.27622542543895589606 -0.1651594799763341781 -0.05560332660863158416 0.048157922665335577139 -0.068014855649281613648 -0.062390223241766143425 -0.052919026557614198825 -0.17760204952513169996 -1.0115825995237428536 -0.11848333678517178336 -0.11137561813996815774 -0.039579864987840933377 0.062176382372677349575 0.045116992870921517056 -0.23369666854690385183 0.17206112087769120933 0.57689041032849941448 -1.6274134149511976233 -0.3207224778314502478;-0.72386829887180359488 0.39777825241686914914 -0.31863922440648057011 -0.96670398040592131483 0.99107423624283175201 0.092341397052784587873 -0.12658046357408209159 -0.68596340943236389087 0.89192526545427919249 0.49583615643781064897 0.86222120829857828994 0.6106192607096143643 1.0197972753848916216 -0.048444216392947311856 -2.0119748344624639458 -0.47376662238389105619 1.4940305783744194379 0.28952005507047573474 -0.1554753298957836094 -1.5529900365007442975 0.13042848055296873966 0.84597871976274674477 0.18230727572309987639 0.030105289107238319274 -0.42008694449585953778 0.032150859142865723106 -0.23267315726324860892 -0.66664019915792138704 2.3747869929499079156 0.84945744824005531282;-0.040412359700246078265 -0.072791766705450483554 -0.18569366925265315404 0.083073147781253728339 -0.083191771031231667721 0.02128512412669631565 -0.037552972829537567545 0.25911064534602396003 0.05039224712990138938 -0.0019248482856147081533 -0.29772148156675060093 0.27390562740805790565 -0.22454477092786287451 -0.04663361461707125899 0.15629575346626109478 -0.037775231895033997698 -0.35321967111360741409 -0.021963837384042627504 -0.14014468133815996542 -0.5771982175330084841 -0.055232620217271238827 -0.096431840124389114899 0.0017883277827175057557 0.060041260915041444468 0.033305475294295949773 -0.24000855895058720302 0.076674590312995061225 -0.12321942565319916885 -0.62802078786292903079 -0.39447627952599456647;-0.65680893088546521419 -1.6895656696717904488 0.21371111663877792597 -0.23463859657162802752 -7.517941526771303451 -3.4673703057152516216 -0.51117051865694351775 4.3951680230816618788 -1.4113328945755494459 0.68921745541500512022 0.77189165437771856126 -1.3676881984456359387 -2.0169374083773545792 -1.4679583470188521943 4.1473146033443351044 0.52549902206710152885 2.1189488588966240989 -1.0567220127104597349 -0.78807069867090862036 -0.10077961625359042885 1.357460320832851286 -0.42919031875891333616 0.36203378219014797912 -2.5493168568363926418 0.065271783277486145058 -0.14496862350778877415 2.1599516492708716875 -6.597570065919070359 -1.3686109139744182528 -1.5527923985722322797;-0.31679005064067933262 -3.9362662680912814395 0.08529890115068443357 0.5513309600627214202 -5.8888201898146252944 -0.59448696503544218306 -0.34157026459319383971 6.3374648090902097053 -1.8197546474093155844 0.21346967170092545629 4.4887898305060058846 1.1082070974317648204 3.9317100877329922426 -0.045354138438227845076 -2.8051973391923943346 1.7009630309974292928 5.645706550646047539 0.3658231267743370374 -0.32267185972127326865 -0.084880885667429073482 0.96968298019113086106 0.90447801728807064592 0.972679030638058717 -2.3925893929117343362 -1.2105283689256745028 0.18443858471971663615 1.3963580067472987079 -7.3767255594353322579 7.1197345822177782182 -1.36657069332303438;-0.73573867395892733612 -3.418843034648373358 -0.080377148952034377372 0.75744821189449806909 -5.827362291942667305 1.0763924908960975646 -0.16727946393732834318 4.9319864648661990714 -0.28041667175821777258 2.7508857681967469055 1.5833430704521442856 0.039171151615388664913 -1.8547430108627553924 0.90347725359356545471 1.0495179790070050529 1.0536537260322198506 0.67913734165132166876 2.0920873701681497181 -0.76170900142251918297 -3.2299719199321192953 2.6872652179293976538 -0.11176656647577379311 1.269012385828142353 5.2334368483764324154 -0.68089939164875445954 -2.4116166465421580156 0.42127329914994426918 -6.7053566029932580861 4.5161406900569902589 0.85499366879656768514;-0.63927997594547281146 0.67814477154032826167 0.65059961912509955972 -0.46014055569506695509 -0.25897815989719347174 0.2228927068051660132 -0.16155066275667950837 -1.6197526810578506407 -0.72971690169203073939 -1.2674692476838393951 1.1233823293963951517 -1.5736209890290553393 0.26860356193759693522 -0.52026940739859883767 0.19417404117875006198 -0.6947618521436371708 -4.0223220138930146916 0.08273041481455196966 0.46070961923934100612 0.17159927454145723624 -0.19461982042394324055 0.68490906957814934319 0.89330183538029750423 -0.57950390754247860237 -0.037354557922939422843 -0.86911333137773849611 -0.88473125483714332162 0.57583773868118637296 -0.05885660968030861917 -0.41564023659271415179;0.48839156787225923573 -4.1037012512081965099 -0.14749271235258618051 -1.4104690608468442026 -5.4039442565574828947 0.17429923236541855491 -0.42723912522922902202 -2.284611988103685043 -4.2276958733360840981 1.5028558065649577635 9.3286745448087557975 -5.314905836069117484 -3.6393243619667519084 1.5382473327382881756 -3.6287927774500965405 -5.6148001317779394626 -1.2611989005143589004 3.1241418696379530395 1.2618611641274459778 -0.74340551638251917144 1.5271583895767339989 0.78968050638193232338 -1.3392037506362122201 -0.28302996108933586861 -1.6904932996376997867 -3.487202282809586773 -0.60684357594550353276 -9.6584114067719308849 5.8958247755472781293 2.8980667132864570412;0.50488711879137460059 0.082617260735422443085 0.27545594303621329102 0.46627909415575641283 -0.18515371409204847697 -0.4779327546938004212 0.075552344512381755526 0.64379438698646451744 0.11202128448536904926 -0.2591804734555244738 -1.1189918573367656496 -0.95342818305750132168 -0.66060783412232459977 0.14630320139226227205 1.8041085390699542756 0.49790796627842520694 -0.4641915709370124099 -0.55311266191428143379 0.16693305343417419451 1.1315063321362281989 0.033310226963958466939 -0.49035627597583614223 -0.46560633632150388861 -0.01290851820537024415 0.37288825194368813154 -0.07263370166885672885 0.32801803043297228513 0.56057577790164792031 -0.74851826961278744577 -0.2382528682707832357;-0.96544677846975801572 -1.0081100626464885028 -0.35253278526350934063 -1.4505513012125095251 3.9478552720136215193 0.41087806367602325297 -0.69237155597108390737 -3.4446385074961152206 -0.03022735055718876046 -0.28816198708307483312 4.7172964804629700097 1.6970398605059877628 -1.9237427024633797501 1.0521965498387888527 -1.6969145959521376721 -2.7259895317492111033 -4.6319540389019637772 -2.3049020143232925584 0.39026940866643267114 1.3188720490339871372 -0.094375684871624426764 0.14134047357232423781 1.0726149158761368874 -1.8035704035121411515 -0.22454274100285900873 0.61475274234812360419 -1.2616934560088814976 1.8649599592505534673 2.4223645691970019378 -3.0482933822509550303];

% Layer 3
b3 = 0.40517337788316576397;
LW3_2 = [-7.351467999445663537 0.32622719679246636737 7.2433168082698538015 -0.094931000138801568955 0.06411966303476097917 -0.042835273152704529676 0.12525350033538085182 0.042216364891449191521 0.54029175680114971403 -0.048067114230349865245];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
