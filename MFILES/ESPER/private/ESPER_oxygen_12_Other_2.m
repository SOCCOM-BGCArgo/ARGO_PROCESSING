function [Y,Xf,Af] = ESPER_oxygen_12_Other_2(X,~,~)
%ESPER_OXYGEN_12_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.2831119074952126446;3.5464834072384947561;2.5209618960130435461;-5.074251788951170461;-2.6738133216388995095;3.066378278865578455;-1.451713321682355895;5.8501238802965973562;-0.28832243235348592458;-0.16049264759171866235;-0.38065950069195425565;-0.058480875828653300363;1.5048381526635710159;-0.96413266076815618;-1.3748065046631987585;5.111281561449096067;-0.46849233500491999083;0.90987507261324951369;-5.111494007409442375;-4.773794424408742465];
IW1_1 = [-1.9627773733777160725 -1.7467151939468796851 -0.42446000128961142162 1.2642694312443183424 -1.3733447897183641562 -0.35438274668793567912;-2.1224720170737025882 1.6008658281364138709 0.30237443431276672667 1.8158356471396903675 1.3920197150165247724 -0.30408135675015790511;-1.4240201588778318431 2.067614771472943147 -1.9074371646559671323 -0.093849493608852349591 -0.53065290349825566807 1.65946859795823487;0.19136859960190399921 0.061685450762559448923 -1.740499233912363497 -3.5451629646198212775 0.53995719803362296485 -1.9377574196423783537;0.5803339279245813831 -0.73235649508552969067 -2.8095205505449563077 0.57690329916842120195 0.42866008221595969241 1.2939192867540774134;-0.022787599821332150257 0.066583526452882541014 -2.0106042581154217608 -0.33876299950415977857 2.2123894772952454879 2.7738782956490743992;2.7007156376684031684 -0.11634050134872425675 -1.1000873913616309174 0.67710129121612971925 1.1686631000329119612 -0.79018635932190095517;0.17565495573516573535 -1.0559819992611041428 10.808216779340432012 -3.098918338025531849 -3.4463076810040687015 -2.6069381938758238171;-0.012527625430389580444 -0.064336081996592922594 -0.59366421136882308041 0.6819776658521625734 -5.7335670408365153605 0.73696814808057820034;-0.80141520257648812819 0.76237185608329327557 -1.5996456631901603274 0.45875553495525833725 -2.9897278821703441309 -1.4081831670110274146;-1.9149054499375828264 0.12038194648673647413 -1.2309855183738021012 0.014089093469644745418 0.51122377019404852128 -0.28139213674822388667;-0.0011534623433471385447 0.13114306232381001127 0.458734770480668963 -0.73720484620472537252 -3.5556706015412244959 -0.91945910248249307362;0.84913433187914255651 0.15257366914184228301 0.25528818851915069388 0.016963065216343740926 0.1018792442317014435 1.3471584013579174233;-0.75490430214614345772 -0.093878631693502453959 -2.1685103219302623856 0.68552788948840082117 1.1876639784367011288 -0.017511005475317260871;-0.4935625684130722779 -0.12840450354318413972 1.0950710415963935684 -0.77244192847696513393 -4.4085345695060205173 0.32583972929452303946;0.59871906625664239598 1.4653580101044181294 -0.68761704128602596509 3.192875112437027596 -0.049348337394752160578 -0.81133168923351350887;-0.058588990074547306341 0.4574782769521793524 -0.21646875323914824274 -0.061158957094130106391 0.14806351793516139836 -1.0413137605498130611;0.059383723583700684379 -0.47011106261646834481 0.73411977322997079565 0.016862881063213777666 -0.3283886152722597096 0.98206557536290761679;0.1948421996491961905 -0.0022720991584563080511 -1.7535010408811855243 -3.3508646823471872622 0.54595042682071504014 -2.4095689330637495296;-0.58347548317288255859 0.1208490021479310117 1.6182496901957736934 -2.4728076814877728573 -0.99396239900301053272 -1.7906328577301002802];

% Layer 2
b2 = [-25.371546433298469481;-3.4814177573417661726;6.0314014859657492096;-4.2153456705350853539;2.3481289577621953235;0.27488158272651125325;-18.85662514605209239;1.7265447227049199874;1.969942781588730929;-0.45132096641714286589;-1.4141901275878039357;0.47700854210301218972;-1.4091405299373542803;0.77376208122113898646;10.026907514037668889;9.6669725080411836871;5.3560144615429150505;2.0076618711802391992;9.1972988469534122657;9.7608571433933999373];
LW2_1 = [-3.9291165544669506282 -9.4501744216172411939 -0.066667007168509540005 -4.3531092139518952067 -1.4847625835691946605 5.3928496061078057267 -12.124792795505836551 6.7055187164343115214 -4.4219752947630537321 -1.5653775608418896148 3.7247674233709875402 1.6144128830444957057 -1.3746767720709611726 0.041142009251879496645 -1.5789153899207106768 2.6415383711276194667 2.0748273685286697798 1.9503089331306457943 2.6852096934104565662 -2.6745963685444733571;0.8610221437428171587 0.81944494626886743571 0.34316031864716900479 -2.4610388319141454083 -0.41288282023936750953 -0.52773095701356287357 -0.13690844880404109962 0.35256456454811235801 -0.16992357870563942757 0.33015338106911262805 -0.22317238876599812536 0.26560632735688466388 -0.043557685928000716702 -0.41412957665477106994 -0.45878793321076655198 1.5309362990269297367 -1.7748153740981216231 -1.061107235669452642 2.4788733695077302954 -0.48209390336311441771;-0.61716640792214405575 -0.12543889727541004953 -0.66645478000700819621 -0.22764693746268674368 -1.7195144621871019108 3.8178246418597159284 0.16414711246570956593 0.73744262959149120551 1.3342389783699648564 -0.024150511879013691202 0.23917171747437468432 -0.04476948398482697572 1.7200142129147177883 0.69546561274770923866 1.9879929047742708192 -4.8363926845840516933 -1.815084439539949912 -1.8893913372756085955 -0.29678359767499312705 4.1178915537314511042;-0.78431986273163167844 -0.97564846004833671866 0.83969563471954444811 11.394076901228107346 1.3178545699693049453 2.7002012145450469127 -0.24665023928381138441 0.094915937685164902815 -1.7208170123052535239 1.20350381200685419 0.32081468226770926133 2.3339379357709990614 1.5351343138406807753 0.35992276961138636171 -1.4915881400032666715 0.23722120832235574217 1.86343344484410256 4.4032908755095405695 -10.660017293465655186 3.0446841713550103492;0.37041278156945173228 0.61978126499759089718 -0.13311802532238092844 -1.3344572326035548659 0.0015944099509482825491 -1.9519898563825464066 -0.36661028899932612823 0.66221966352189032268 1.2367435684557588349 0.16783712248894183672 -0.8670517752466581074 1.2050526433258359482 0.023588087636862535568 0.19102926444933154837 -0.065462726684921992981 0.51963402028948835198 -0.51803329518712171176 -0.56142929486827586327 1.5740061974505150655 1.5557044540861812987;0.57953847837081451377 0.81600881117250700925 0.47110892689894801055 -5.2151778153766787938 -0.18687678675854565991 0.39393614575416818768 0.31767700313389496403 -0.047047203389579635158 -0.54934263732346966247 0.20765258270164316245 0.65902487975992174452 -0.018601769552058125545 -1.0328915721127216454 -1.2775639577101900457 0.12919880240347073053 -0.35024455315805136379 -2.7535925472393762981 -2.23446389478766827 4.6131869855597997798 0.96383318895107938928;1.1859956119513899164 1.9370705919360504677 -0.21469413306426063381 -1.5845674235805526919 2.758182591675049089 -3.5567100267160491889 0.80036684982786410192 0.47538047950814510401 1.7533592068809145115 0.56912438756894645486 -0.5454427118411654396 2.1310548475301422933 -1.1365726985535131721 0.074777802128543735538 -2.0110911349905142842 18.670432983264671378 -1.2712333750983266789 -0.627378243182737938 1.0816645665913637853 -3.2006379742501618324;-0.21702412192699710447 0.058711872679262082364 0.65916469962637236346 -2.0633891097080345745 -1.3651855611250520717 -1.4364368226148300778 -0.002704048759561692751 0.51019792080387083022 0.042768947573688445574 0.69425954328049399589 0.78749573021150676144 0.069092887664735008757 -1.4749978604607145716 -2.5869587917652996367 -1.4806053599208657268 -3.4629178648693526021 -1.1499076153027314451 -0.39995146029691935885 1.2986284500035563116 0.50067704206757113194;-0.48386570945461265802 -0.74717452464143796487 -0.35153611488051123013 3.1315997134123629841 -1.150036245548167857 1.1334063455838911949 -0.13715969413375392327 0.270138629091003446 0.19027942496979796672 -0.22304139864971361806 -0.037962644489621284738 -0.023730758159488638676 0.71429336745487415072 1.1807629044719134548 1.23881747136751863 -2.1004935070566799205 1.2008196248538187678 0.64460311053569541162 -2.9520359282895460851 1.2637670023649119067;0.37206776120222462279 0.47537244060544880941 -0.019313322739754869295 -0.17485559093376040751 1.7023878547115747217 -0.94958230623034245443 -0.0062781207038422283048 -0.38154272549590662056 -0.39312958351957610903 -0.043661959836832228699 -0.19335474501130786584 -0.423300385725529138 -0.35330280794978763392 0.10679522695130268251 -0.52555476315487148486 2.1665725659611685394 -0.01145634048841676772 0.27588409072952974066 0.17118141745332460246 -0.92470968906289996436;0.7057727730768422747 0.68324552742966260244 -0.52667355533085713493 -0.93290072491122033593 2.1676494832301136384 0.68051135059353062839 0.20009344728800759761 -0.4396750500675877249 -0.080589216836873561745 -0.046566298722253568476 0.013014378301617859218 -0.3526860884921926842 -0.70263142818020762892 0.2555219787060892811 -0.73206110089242459882 3.1517845607092938032 0.093699397947944129683 0.62506533061981650601 0.87870945869836747377 0.15857439087507935183;-0.36338109276858227004 -1.3138541364348552687 1.0654862907630806568 8.0049327280098285797 -5.2315109139492168566 -0.52281003107059198509 -1.5223156205462360369 -2.0607848390411702688 -0.26372668669000098873 -0.78199325806122588212 -1.9378658620784185995 2.1458551574844051402 -0.37315552221933728783 0.55420523204962823804 2.2118689821641051019 -3.0490805577224948664 -5.1555404930604940006 -4.1810362734765735837 -4.2436249695541654603 2.1390608304481197877;0.45379233762213089243 0.52161209123162410872 0.19753938498135095725 -0.46887145066961277706 -0.82740311993605553109 -0.79325390263703676741 -0.14995495793467183976 0.45696747071295795717 -0.66755656269068031072 0.15350696785082879048 -0.33366065216483409284 -0.63261854513469062411 0.58852208591416332872 0.28952310599333103136 0.24653618135624050245 0.21707824250721530213 -1.5162362070546531179 -0.97523787493487479328 0.38426474893112760878 -0.48057905295321490247;-4.3075394025274489351 -1.869781102828114383 5.9025722587234019656 5.3935171158494723542 -1.7227288980015547093 -4.397553432339551982 2.1234223069144175788 0.65773789127437443103 0.29277727863087188442 -2.8720284946177612184 4.6944113897407051539 2.2111823733301019246 3.377198971265796601 3.5777555776560250322 1.511768414649232728 2.0196620921687817862 -8.2153271543962329559 -8.5626658901053840367 -4.4992236651455037588 2.7013514179490396572;3.7458724332133179757 -1.5682008650413814532 1.2995448800096442987 -8.3728824164622484005 -9.165577296554699771 0.24675301924341852544 1.1410062209986850945 -18.622325144887362569 -0.95692274997097226397 -0.6673331865274474417 -4.1326493179607819428 -0.9387119554878040617 -6.7618317079205096931 -3.8571854250151837995 2.8378437325401355551 7.0717056427541136188 -17.823547180412933955 -17.848014728382146643 -5.2034438193240211135 -11.068595513753374249;1.3247896007877624225 1.0241358399959439307 -0.84729158664823056579 -3.2472639559187821412 0.32203174116310329111 2.8264396898138337555 0.35106985727444267598 0.50700730939860305657 -1.1603036969672932965 0.29245766738219780567 0.14195524110628424119 -1.1396453030047606347 -0.1957753605422401233 -0.46066629780877205169 1.3924008743583433656 -9.8544954477258830394 -1.1511812158661323124 -1.5409793027567533219 3.2741352940508408054 2.3253613831982393734;1.8022177649676991429 2.2333516302043729951 1.9384773322087700542 4.7645723329355886833 -1.0868440838814961147 1.7952830503455114997 1.0190393871107130686 -0.73712390650923420576 -1.2726509000367873803 -0.51007878187916622093 2.5772696451714334209 2.6635193509384942345 4.1488095974323453419 0.14366647036613072741 -2.3696855161863452643 -4.9927113825677986725 -5.632228189416606412 -3.2720994211019855946 0.93186774506047509448 5.5138228216276399252;0.88795724914650087101 1.3816102428542120784 -0.91726335261905245222 -10.77498239187834983 4.137571201992034986 0.24174265727740235077 -0.096878437775255468734 0.014947314450414108528 1.0737039933622649635 0.028740822246538420826 0.97532398114443585868 -4.4910244599189654835 -0.39107078933926214814 -2.2596642810326699191 -1.3931644436219527972 4.731739705477285618 0.82056465801354516731 -0.65074343711373372479 8.8966571282535156229 -1.0786215548867195135;-2.3603660933799046617 -0.99839507496886292781 -0.73184037412350178009 -4.8891325972637647013 -0.18711471468758195114 -0.69216101807550067804 -0.99955635090637973139 -1.0624962129809192302 -0.82759034047419854918 -1.9757952875002813276 -0.2236080510412789546 2.1503426168665802365 3.1816961060532467087 3.0135209235526549953 2.4340922327714462625 -3.6512274817198084875 -7.8504349678691323078 -10.418221629989242061 6.9116416876308699457 3.2402687803242034015;1.3561424769411791758 0.018120391783490008564 0.63259982720985874494 -8.2810163986830307437 3.6175152674717576673 -2.2454008917504402199 1.1113969653163782159 -10.399693363760412979 0.10598650146652305315 -0.76953199427380492015 -1.4718516038745463881 -0.8944329080733965931 -3.4176523357575896434 -1.9079541389243992455 1.1619700430487207576 9.9283647093055797939 -9.7451767148729793178 -9.7737542291380830051 1.7883345111526842697 -6.5917163712526622987];

% Layer 3
b3 = 0.66893644583108669011;
LW3_2 = [-0.23225005493683797964 2.4923376742691978336 0.61554344016435302844 -0.22868228319915065438 -0.80074252323402483889 -1.1084448478132851168 0.25336725190901043803 0.52260879184091157956 2.1665352012094665213 3.5060117973500046773 -1.3208528974344420082 -0.55687825412550451265 -2.2309915823981452121 -0.45832571839014030202 0.29032592757651903836 0.56887408526524363417 0.12611679308721998605 -1.0620267139129655476 0.70967005521886750152 -0.52953127344249062425];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
