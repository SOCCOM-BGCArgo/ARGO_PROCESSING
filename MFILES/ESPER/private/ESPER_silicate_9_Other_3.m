function [Y,Xf,Af] = ESPER_silicate_9_Other_3(X,~,~)
%ESPER_SILICATE_9_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_9_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.2790916757630181877;8.3501630429124027444;-3.4689244458564894025;3.2377138890461263365;1.0474875525744760107;0.21093485387048355184;0.070788847563215767655;-0.23679219807088308647;3.9161780116664437479;0.15576215450033156773;3.0905777893103105747;0.31067619919045680321;1.2845137263733334976;0.1306839415173547958;-1.4793690343888459271;0.9168677700649032758;1.030464529271873042;-0.43241007145364046549;-2.1583175491133355095;1.6668461289829217264;-6.2949173234687192391;0.48815845184508288579;3.763697502876070633;2.3253554993815437335;0.32756170864057360115];
IW1_1 = [-0.53547738147519330365 1.015360377599035635 4.1746890645959027211 -0.23473241323283861037 3.118833207605097968 -0.63617134902226635251 -0.57828454149388441863 3.3162545892517210078;-0.31283136319698784389 -0.040259142616749468702 10.386943373179230221 -0.92919395598411747006 1.6562777716514207604 -0.69087507702610739813 0.67519389114608674429 -0.0051768886357105720064;0.27176357021096325672 0.1275480725794553849 -4.8142928531766226996 -0.45235511063060385162 1.6138090185249842623 0.19447241220244160242 0.16654268901897401056 -0.23671636928450762172;-0.73394401302431733214 1.69385463714325879 -0.57242654064607134679 -0.9108647307464483589 2.0865834915740690825 -1.5232917015076505862 -1.9321876336231453841 -3.4145643495136117629;-0.40941350496107303814 -0.11548091834104133591 0.093131474210243078704 0.35574653750411311393 -1.3482553980006470873 0.2367602503084321186 -0.72736298333681037587 -0.28780628050449363897;-0.24727579027254670274 0.28122034641336274285 1.0298343013500841359 -2.2040260453487672265 -7.0703657488216204996 -0.14832736562659354362 0.091506581072274051358 0.011450106524583733916;-0.1591173113227733471 -0.043586304736422110118 -0.082727780560373387342 -0.5407083429705923372 -0.8534502146316790272 0.1611347226009063327 -0.082194520737597295823 0.14642475533306795188;0.4440990424059094166 -0.29809274673251989762 -1.0063777189723515093 0.77510111401752412874 -0.49197398376615231186 -0.2607458825700859073 0.051086249387874961558 0.06806378708867351357;-0.03085544274647025742 -0.13613176797620638037 -3.0560180623980386372 3.1866339493880708744 3.3093263547307931738 0.68254470099504638281 0.034735171469914963294 -0.31469149527518308629;-0.43951577263680013941 0.36699394631422638247 1.197665201501172616 -0.73955674221964950998 0.72759094510174249226 0.35825070849315487909 -0.18747038446972502657 0.021942079326280655022;-0.045760071274882754833 0.16988603448206343605 1.5468904893140027479 0.11270917642496419697 25.970652610343318401 -0.38838430267094020687 -4.8170811986240646974 1.6363195222819737484;0.068592734003808109033 -0.032701879066609748636 -0.21912707592223504283 1.2633629715939256322 2.2594429156888207189 -0.0023153555873128756938 0.35078657146344260909 -0.13104229391954666517;-0.047827431575512169282 -0.23260639741510380496 -0.46480804779776752067 0.82239392460942395413 -1.6419105293265627843 -0.067554040833652823084 0.032939193131984831342 -0.48708951754778462284;-0.048689261292978472384 -0.13986495489122874325 0.60706320660025214764 1.2890243747754224213 2.3687382217770132087 0.39195775833008844602 1.0912035998703399908 -0.25533408832000442645;0.5835276799423616545 -1.8498017682121952188 1.1648425838655744879 0.19498280533365969225 -8.600599400978090614 -1.1537021362990333984 -1.0690305489262672545 4.085121172983450677;0.24078953529547372781 -1.3219733870219980698 -0.05671665860955005245 -0.7171525119235387935 4.0052528619170013613 -0.14439256893255661418 -0.79537952579494441974 0.67639738243660341155;-0.25338079415002451311 -0.039698632060422664458 1.9121999226776120739 -1.1609678016361653086 -2.8632813525528626464 0.41477980163350602894 -1.6871893644381867894 0.57722875219551261772;-0.4001328939305190957 0.43885493875377751261 1.4076736578026065594 -1.5976558203742670106 -0.11826234229057955294 0.41148387526517909984 -0.38577781985752040983 -0.031922925127809642643;-1.6296650438087714186 -0.60939866160453581845 0.15327675087811545862 -0.20151473953413520657 2.5700463610766450806 0.52197120198898028232 -1.1517929138584626081 0.89532731458084779952;0.23209583115100584916 0.089920929214273567776 -0.86851848052728042315 0.43591127455711775607 -4.5847524796979222117 -0.3033738261741305009 -1.2039553051054676658 -0.074886117650735814499;-2.5475788954659592811 -5.1190535186192009931 -1.0381508717305245604 0.61853155511186264093 -2.5368000862140260843 0.83743272437130400476 -1.8410395358659967791 1.7404615293997358627;0.12692139282274902956 -0.052109154809968076527 -0.61236080156009664588 1.5635127014299436965 1.9197825804960111373 -0.040923781138178329242 0.11505827598577172965 -0.1660220853963955967;4.0181838940135961025 0.97349759960567050499 -0.12238147586796471744 -1.482443120063748454 -5.2306965984346209808 -2.1939292717828227097 0.21598555700306407146 -0.24792577056807824087;-0.043428087442883227254 -0.29461357736288429354 -0.74244043131724701823 1.6770844582552166813 -1.3066581316445371463 -0.047179041043368459551 0.044802110505099371207 -0.62147971893906839291;-0.41563268816876353107 -0.24618966549013249212 -0.30547406654903119794 -0.0042125956369918190689 -1.8675188923125598528 0.25790134413455156892 -0.43872528744895344932 -0.29617581726149422305];

% Layer 2
b2 = [-5.7235268898544635618;0.067262033170332247156;-1.8680318079355562322;2.298598683727377967;-0.076489485454484598681;1.8308399558454209188;-3.4122865235348625035;-9.6029329010281969659;-2.4817276880581649046;-9.0697492120549281225;6.126456988607101195;-3.4995982603254214283;-2.4716804199112711871;1.5292696014458557752;-0.54534905989247217661];
LW2_1 = [-4.0153250352962679415 -1.397074618564561721 5.6841960672389619802 0.03539674577664841254 1.2609432426037008312 3.4079239888522390167 -3.0276657484019176003 0.29368995736624531334 -3.3358804632485234976 0.56473245344914568822 0.037809909193113895587 -9.2859280194181224033 -4.6210183367290662559 7.9664248924934222273 -0.87341829239733748125 -2.7549497596937468913 -1.3669546750428018811 -0.63943872057758377458 2.8867742478464419875 -2.8892406791962703672 1.5086646276874575712 2.2004370991761899035 8.1925938105196660644 4.7007441653291168748 0.046356579315116164253;-1.5303022315076693083 1.7885651900368810807 0.83837598620506248448 -2.6034277482587695474 -2.9384646981394424436 -0.21099124269155727918 -8.0090546122346086833 15.544102510627018532 0.63495249701108047446 9.4172023373366098298 1.1998556478270530068 -6.7622323271987889726 -12.128287564982565883 0.58931096600472432367 0.48679831004951668039 2.3842528739027528673 4.0244471426097812028 6.3211394084892935652 -14.509904446783012943 1.3387672903798621959 -2.6075888163393829977 9.6374758585616522311 -1.4132805750611694418 -5.4414489750300250037 12.405330823486755421;-1.0041651674601639321 2.0060486979415630415 1.1068395049077719428 0.52959806298053613283 1.1048868749944333878 2.7894161761701208313 -6.0024530497604970947 -3.0194274969834786759 0.88589224212857720087 -5.8959910339842105387 -0.43954319850393691604 -3.3386463329937940969 -6.1122329370654089331 1.3992805405257304763 0.62462428983402551452 -0.83237569588648552266 -3.8466026007282589916 2.9710462044421062089 1.4804491920721587483 7.0466744739559770139 1.2845706024630025865 0.92103468844392810677 0.18566888426787275801 2.7504631730510498144 0.43570995355524438919;0.92113701890055266208 -6.7413625325446240311 2.10877382470725383 0.40454873417537706715 1.1559599925613244231 -0.054050059884912834973 10.563144076808500316 0.24046429813922909347 -3.8297823000401520765 -1.910766637300560955 0.86227890120519001815 -8.3018184356885669217 -5.2351577724580460327 -0.71632676127848327052 -3.8157787993229845824 0.22131238339275122184 -1.7752743337696783588 1.4117497310010502787 -1.5449945156737201479 -0.14272330508671729477 -1.0311389103891566155 12.64994164711161595 0.6151445229701312245 8.656393900660471985 -5.9282781879238761746;-0.32377415763803957249 6.4169694860307071593 3.263300263995123629 0.12475628179756798053 -3.2860266552503731852 6.745332862779995331 -1.4290487345155162835 9.9444102944282857237 -0.6930322342257320134 0.88680230947533855712 0.75151311227417727512 10.70105575841643919 3.723926605054532768 5.8563009945757746877 0.42440691394074825382 -1.7078636640732169916 4.2254213794314781083 7.2569901542176751263 3.460623109747099857 5.270172963974316005 -0.029197907007719871991 -1.1155244801005961275 -0.25859406777420385071 -5.3074748892293515112 3.1684172020230421118;1.2524896169601948959 0.94551362764606039502 2.8741071485426181731 -0.26843645851446235051 0.087686382876949436893 3.3351927209210354697 -7.2482279725750897725 -0.19497254411309186684 3.1164228579959094567 -2.1720569191641843076 -0.71438028025219546535 -0.053573216043563867683 11.418476775212836216 3.7595034508974873866 -1.5833604717247495852 0.86494387966095664932 -1.0147168685377743191 4.0038389174889275068 0.18027841936170629911 6.0896645432840834644 1.641660524959219547 -1.3796312585691594688 -0.44779620447710144493 -14.198153462858366325 0.046304023493297437331;0.44231339480629566774 0.28136324992763367403 0.73708458435946311305 -0.0023155037197338228933 2.5251858931553008425 0.36021322494159346839 5.8766768759201237771 2.6333260305505565846 0.018808038613216410823 2.8217629882065966562 0.070172834198150207952 0.89009498195704594981 3.3593520106472869458 1.2995233128033898407 0.12789229869944343521 0.17622587897787761468 -0.74845537561598352028 -0.60437066701805186586 -0.098796054934674054637 0.99057286308847358747 -0.076454316462747584637 -0.38178196173237644029 -0.023372451026339519792 -1.2850468890034063563 -3.5840957465425176132;1.2566924370963219459 -2.7728172127684120873 1.6502822654211566356 -0.96472267885167839463 14.071097043987473185 0.26743819544396535415 -6.8693386845998842816 -7.7049304797715842952 4.3416900473855797316 -4.6294964698558773719 -1.2931484706102882587 -20.931548621425704937 0.32944877470803179964 7.667660677621013221 -0.16409104499283089229 2.987223858297000767 -2.6538457669082373691 0.73051080143871160999 -5.6593670644499258771 9.5115773657690905196 -1.3747246417624690018 10.056398271495227803 -2.0391512073013147166 -8.0485230805770715534 -5.9492774100395164893;-0.84049122440794388211 3.9115500323091145773 -1.1366007250983585219 -0.47528291801741906486 2.2136738379609983696 -2.0177997625067560783 -3.0102719167061144923 5.7317260680094612724 0.10774869903391319503 13.581760097478031923 -0.86072648174823540579 -9.2301179489098359454 2.2067512124352854919 3.9120057854215315452 -0.34726080675224807459 1.6559018685076785093 -3.1928282889660399846 -5.9103101200569989615 -5.2916313646977144458 -2.815895546772350766 0.62539585691206567297 -2.7515028898091267173 -1.1440939470230959696 -1.7063551316112062217 -0.52843797869484243623;-2.4514329586707175324 1.7418683802845116304 2.0179217925868071504 0.66443557319505353043 1.3797723027109565219 0.0066959661429750617218 6.3967496645553616474 -8.3589062498188351213 -6.3824858142490246138 -9.1773981080449704706 -0.44112028805383440844 -0.99876585210782364843 1.9103979765108767275 8.0840055880507684094 0.016746248987798854901 -0.63624997961598250829 6.2684542638202174203 7.0003228565374069348 1.2773502690011069305 2.9833559777079514674 0.64064221592843073605 8.4610134994368539907 2.2128333177924366382 11.817586403159923591 -9.5940622558763468675;-10.833114396800150203 6.4131830173383157501 -0.064918660293625113367 -6.0849296211225913922 -17.92418761553114237 0.18426063005448395371 0.94178178141362467457 -7.2670708258055780604 3.4506591702513884634 6.4322871601184798962 -1.8605420204520457528 -1.0460333944243860316 3.2182515210045181675 2.5524431113603101018 0.92197335695205862027 2.1938435690739721551 -5.8940175880529865893 -4.6790556928140043524 8.913040617965338086 5.819719579157019318 -1.3700316836290808986 1.5837967093294196275 -8.7315504690335909999 -0.73351505807288486238 11.336622236796859653;-0.40077372435118679972 2.3092442474579772949 -0.34788898094091236235 -0.27905324539813897156 3.2045627034678090261 0.017697072462453382335 -2.3904324118860089676 -1.087262142248495822 1.5355169162036328423 3.4993672840867042773 0.17668346306040469407 -3.1132534829602827031 16.830241294894324966 -2.1212567376375339734 0.091767684078168182404 0.72494980420102483887 -4.6530518780247467348 -1.6300334522707802254 -1.7977064282631483039 -3.1678581241684673486 1.6670102926237431173 -1.8598478384365924043 -0.24743167383791100922 -10.36288280155715924 -4.8824052477731312294;0.77934218693819279355 -0.38709929145739235823 1.2175313548838408995 0.099725493758519537235 0.93928556943664720524 0.34754874552450559788 5.1677474331915442818 1.7230297516768542376 -0.22817765762025088438 0.89082256836182061033 0.022293031293275936133 -5.1653662980620849154 1.260913345014614162 3.0593232889062407232 0.28152714029795605777 -0.063005012654100439606 -0.21051496519363338544 0.89403299144695114187 0.48667558340621458468 2.3112337001706437789 -0.34016837661860294117 4.9521596942302554822 0.083741803160150493635 0.88106655308069270482 -2.3580405653061817794;6.2309001601078239929 -0.19517731012441086325 -8.2600758322215934726 -0.79892960143063840306 -5.8089872898866747875 1.8577545161520661043 -6.4617237268714813325 -4.9886811493934777317 -2.3951782264857497395 -3.1185025292703638655 -0.92232440442819729753 6.3229381361902055048 1.0564096340204376379 -2.4871838864858526463 -4.9562749737410545237 4.2840212520244564942 2.6802052567625387347 -11.592336361289945046 1.5944888405252966024 5.3278579160369741174 4.4088398785181652784 -10.722461210208575011 -8.2295277151736190291 14.761319999654514135 -5.6393758899687114194;0.47869347691799257749 -1.6414911639791323061 1.0646361497804350815 -1.5435780403689465246 -4.3485359494544182368 -2.667736233695819692 7.3909839482753980633 -1.0468565191069787446 -1.7908160599299951521 -2.6083554503614325704 0.45402621906099749349 22.596709518665154093 1.0714910905288828058 -8.3192408525418723997 -1.82072667811494604 0.90199395418625316623 5.8420855328261769301 1.3292723795280343424 -3.7627853132079684961 -2.9745403350690557964 -2.556522923829652072 -9.7796279821429674683 -2.0222482659428453466 -3.4783218795511121613 4.6651195182684528362];

% Layer 3
b3 = -0.0057499633706981252701;
LW3_2 = [0.15023127499993027545 0.025939570220888320123 0.11014728702904406921 -0.036095219301525316435 0.085878843839489515943 0.049707755997844431384 1.0262323816619705052 -0.049416273742885437337 -0.10925477124292022613 0.046360476349718508782 0.0070394349383873407178 -0.19927735183836833843 -0.55254776848886011376 -0.0096734931342632619888 0.088192475039725187758];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
