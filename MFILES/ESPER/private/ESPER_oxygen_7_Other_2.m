function [Y,Xf,Af] = ESPER_oxygen_7_Other_2(X,~,~)
%ESPER_OXYGEN_7_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_7_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.9850471670517206846;1.2993615389486945499;-1.2243571722232255983;2.5541533953151178693;0.97567883880842720679;-0.5142156058736653268;0.24378046135769310121;-1.0713883030702049393;-4.5156795206906839013;0.64107664917811346683;1.1355068352169574997;-0.50200254226218388176;1.4436898015731556288;-0.35426751220947400034;0.29119929102658115294;-1.8586113052634858356;-0.67460733228444624832;-1.7475061640070084223;-2.2341310380914194411;2.5036607100501329093];
IW1_1 = [6.8381606487033321784 0.11442648604965810488 -2.6533666404095579416 0.51306754197274984097 -0.039539991428943960239 -2.9988430812992699082 -1.3722365207847477819;-1.2150435080213961569 -0.1771996566305612808 -0.9232082768696653341 0.096958480099693211685 -2.3450926716129938399 1.4011960183567777616 0.23766064310332399301;1.3619051148007685903 -0.09195458438629326714 -0.42779511127097941126 0.49171660454757837311 -0.062451859162807571435 -0.4425186642684914573 0.15408149118594768878;0.13101643127098033803 0.3446087613738560429 -0.18620961402072516711 0.78812119877238828725 1.2420831342287375065 1.7966099291403003768 0.21805115462221696943;-0.43775615031366887919 -0.40735855092938566546 0.71116872058181346272 0.60494960905554440167 0.98683832839809371151 1.4378631782472863776 0.13611891938625639287;0.0057969568042751254758 -0.24746232728670219947 -0.58322393849218390205 -0.04144673608127971004 -0.37788491470080270984 0.64852259716757421071 -0.52650620864992803138;0.0070157601061959585023 -0.32042231733414172634 -1.8106864528510622225 -0.49243899438664628931 -0.023381338395652172257 -0.86711766201211371019 -0.82386194967230652608;0.16111761302825156061 -1.1122455899527436962 -0.31712303467971153514 -0.32781540952553389623 2.0756266670027581078 0.039393370701524252353 0.4679706961360006745;-0.74634475773389297171 -0.12901143346894095032 -0.78573631186511350144 -3.8829500116660229381 -3.5667683904765565828 1.2942959274434244765 0.87810847234809319417;-0.005224534760647582543 0.32341112466722865548 2.3805657484477276142 0.43506686848427333913 0.016021458295389860715 1.1430636387001529286 0.24952482465012132407;0.082665766195895787338 0.0019915904336044593093 0.33606081569870066561 0.10245220264267726473 0.84975820345084884799 0.68149934724620619964 0.23112463277077563428;-0.36011885729050746585 0.68162400674968126602 0.53930297023211493102 0.084366152738598099159 1.1938309622367651031 -1.281400289993800623 -0.4675697191595918345;-0.13153908042665549138 0.011525996686457564561 -0.0021761622127506874413 -0.037429025156980537392 -3.376095796524662962 1.4933869353480435649 0.096101294791862731937;0.22178949907896028382 0.24747849128841289956 1.1827766509368879966 0.066847933646761989457 0.4892521277010507541 -0.68556444070985445016 -0.62598621508370566602;-0.048700482314135755402 0.018658179911735829626 -0.023774735827392576293 -0.33833420702829142268 1.2407316728219792701 0.12711024469370083012 0.99601730461652271398;-0.043477241040819181173 -0.076710351921723721191 -0.18488529708163617404 -1.1374174716260243567 -2.1208189326142794506 -0.53782586681723532074 -1.3958920853475018653;0.15806368371939577555 0.41038295048291656419 2.3795777010150547248 0.39611551646680376315 0.27045868951129092839 0.036692734540438164126 0.047171412440898986829;-0.12640164073533549649 -0.31685969794577090175 0.08175341589352277949 0.05971398563525916886 -1.390226212220794233 -2.1280365385002109058 0.022124711764269062997;-0.17391522691323210714 -0.23416367012174765794 0.012340064305766819397 -0.38378746792983303715 -2.2478321942078824947 -1.6766766910830948056 -0.14687619322532419197;0.046812729753922671661 0.40189185170921348789 -0.84193558163727011401 1.2258945400892584665 3.1561836764278075051 0.77441955855222133209 0.76171929991594011788];

% Layer 2
b2 = [-0.44937894128858901777;8.2601239485837503196;-32.604766536458392068;-0.6050148321939051721;0.63053407397374872101;-2.9028135634968030843;13.043966230656376837;-0.32962713745496258211;-1.7678355558558047633;-3.0632125612004639237;-3.7945766537920588846;4.9457126548197889448;0.70428969357261583806;-0.063308767608313026853;7.4965555439286095663;-2.930542211129732344;4.7739078625929751709;-5.2453965662658275093;-4.9948409385180321252;3.132229287157596076];
LW2_1 = [0.071346241640878341195 0.95273774590798276929 0.50213776816992594654 2.9372491813412175965 0.42700500990684825409 0.16899826780360782674 -2.0643392974479297663 -0.62534725201708440956 0.22514108708519467439 -0.51562002830357633876 -6.7398110602800205271 -0.80228484355404794393 -1.1331040643310390514 3.7025491404763801739 5.7805608928699658833 3.2665837775163493184 -2.3421416310345217759 3.7173398103210764098 -4.8908979179708405027 -1.9351627861520774854;0.7994176142293960563 -22.760034257499150101 -8.2183309564926041446 1.0584956121612085767 0.33819556963633001789 -0.69535514000446307925 -1.3497039634288345855 0.48312210034364411193 0.30263549738782657972 -0.77424985329231754694 9.6775623133082113725 0.99783445885773924822 6.5330176753095052788 2.3412486087770858489 -5.3713913438401954537 -2.2995547820430037866 -7.7457016013262007803 0.88993934248756312311 3.4580802091672846466 2.1961617586805863844;0.83868092310706854331 -2.0757606011732314677 -5.2584496903327577755 -3.252396709460871449 0.64122568100358079413 4.9478472224779981303 3.2425671372245088442 -0.73732924093453355852 0.4051425151028358318 0.2962591453777362327 -5.1192802796981560221 0.64876819481965986025 12.021712817100269177 6.6936983820537179213 16.030124839218100163 3.5160456979710259517 -2.6025626720568699746 13.243163844905526005 -26.968745216771999651 8.0158746171698176397;-0.10000913495133086084 -2.2225456289340925764 -0.13129657065200120436 -7.7255868492867429964 -0.14176991039519895588 -2.6898704819848187064 1.4496549922603687577 0.14695295854689116588 0.74420452378166235263 -1.2367975235670218837 1.0716356413966512395 1.1546563950586412606 4.3108511804303475401 -3.2715963159684879891 -6.9879140756576374471 -4.174063561554633317 2.1163019392166289023 -0.66937836502352887624 -4.4661177635272828468 0.40375594401357506325;0.18445190219663049058 2.1378579409098548147 -0.67709637949241352484 4.5050879229297260409 0.24047589861990523175 -1.0486853926630410605 -1.1575908100567902093 -1.4064801943318672173 -0.67282583684279384517 2.1287492621178398799 -5.491517772725605262 -2.608025788062534378 -4.9329407132340570286 1.2556266781954010803 7.6149167965744872788 5.8410464871830800604 0.0047295341436597625531 3.146881658228130707 -2.2747424056943281734 -1.4229732090595468286;-0.84246152154848241711 1.3265655346820202087 -0.51657307670588314963 -2.5460203288570406599 -3.0885148350674893614 -2.1351239309438896363 -4.9528149096518436778 -1.6359399926268713976 -0.62407187672847586057 -1.4303560706956155446 9.1329636290478735106 -0.55642361810919405141 -2.4955732175128932937 -0.26108168960490674149 -2.5915027444132578971 0.60939424959073618115 -1.2970741909541640968 1.9409613591683090306 -3.2120195067538417355 0.77867963245272375783;0.25328746208841124155 1.1084324937467029404 1.8210079477028930928 11.116685987931981927 0.99889421141165501972 -9.1448097729776609555 2.0975081759888336563 -0.46108955758011155313 -1.5148839796876614194 1.4618900870479352161 -7.8593751203117836468 -1.1375902877292953796 -12.99757568856068346 -7.4615049651592828539 -13.398268790471810519 -5.9309287758334754415 1.854071401052902246 9.1528076103976534483 -1.2839407435524350376 0.39036490529745360156;0.064561299573247049599 1.3786652231379532552 0.17600697264788783825 1.7149270401611220738 0.58069889911483796308 -0.45870872944936225135 -4.1177876356165796778 -1.0800724968746306942 -1.3345786716862768628 1.7919358096606670117 -2.5268242195537253814 -1.2157633726732237633 -2.3679841608166434241 2.3137873977523253366 3.0138479127941066871 4.6411237269415606121 -5.4663215583579409795 0.00096130224080910597895 1.1353217589506665597 0.52595679470137846057;0.17008306875730636043 -0.26746251518801456015 -0.99126994755577546581 -3.4434330410527138611 -0.47082211142708618734 -3.4617093639873242061 2.1208638750391650696 -1.0312559176190192467 -0.17529085326960919256 0.42044325192868187147 3.1806336747624563976 -0.49543083913756347236 -3.1990115230129281265 -4.2031972974166809109 -5.1323317268382666612 -1.459729168312088543 3.061820543760219504 -0.32104717877609484367 -0.79934780871453137152 1.92650952255136243;-0.14831997012730582797 1.3451125776661174704 0.44163890283537110548 2.2381886919868509978 -0.35559624853921911747 0.69730730344094038475 0.70182233663001292179 -1.0360792533330800413 -0.28208679890662413658 0.87394984579606260766 -2.5990703197343121289 -2.2167433878505762301 1.4370581985914530065 3.1404820709818888069 4.5273830199820306319 2.1876325068593427403 -0.58990638658113303538 1.0200546096224671899 -1.153446135380172155 0.78129992220787602974;-0.753079991782600211 -0.65506848980405441019 -0.23072426791358935372 -4.1836549555856219484 -2.8918654020664371629 -2.4172022923463485355 2.2220335397895825125 -1.2608016724503587902 0.055236700536746820289 -1.1257804543313709722 0.34225954392040219831 -2.897560821944308973 2.2214759883029806531 -0.15144243392072798127 -1.9765865334598231584 0.97902259161766058693 4.4363988810457746226 3.0248903519338647961 -7.2945980165072592527 0.7956433452545528251;0.07269911835494353991 -0.89496633674682113391 0.18090733363789140986 5.7503198585298536116 0.3717775620840527151 0.60472456753771297588 0.82057146390662893953 1.4878391468343121762 0.12411918365257168517 1.4469928288615372391 3.263112786182617242 1.8121712348697107675 -4.4783237574396688174 -2.6783252278636422439 -2.2306977022630056773 -1.2792837106003478453 0.90163147241281693667 -5.7896747680622926424 12.807855882759085375 0.28123260259067717204;-0.56791749882218811596 0.99414304320923607694 1.5650151514256247509 9.6332007278337492551 -0.89669374349435193583 -2.7754263673933570189 -3.1511801875872413881 0.15606493077701288907 -0.97298065931214183788 -1.0499276048917784987 0.57090814330102446217 -2.8789853044061026743 -0.69930907512736129039 1.6710379703135491702 0.55489295124994053587 2.770782509938564786 -0.86588455891583970825 -2.9999542085177326456 11.817420360609609986 -0.20393413173930100002;0.22189682364778734458 -0.088942295648914510009 -0.25818330295497071702 -3.9420125170918236535 0.61438550276494519053 2.7284038614900749664 0.91635640383955463406 0.41535151032575889918 0.90239470600634097419 0.80100695175495018052 -2.1007047086799319757 1.8374475514018713262 -0.034034470921521071951 0.68166816833459198399 1.4263566267860001702 -1.2939089582459362138 -0.88295605419628087063 2.747291562095770967 -7.9510630815842313623 0.50608582387298506333;-0.36411603540967224513 0.10701521384913351143 -0.79207894159668956746 3.0331817890744314781 0.85624666821057182631 -1.9601990025928239803 1.6485347303724260382 -0.056402226614967646001 -0.7273950184331919866 -1.5531411671419754761 2.0428805752700567311 -1.2331290744353353706 -9.549495568486797481 -3.4070091188694417994 -1.3326538155780609518 0.042434911287112873912 2.5038270332552583497 -5.0821085092588953458 8.5504824874388596356 -0.48188817957052343388;-0.0076064398057829234537 1.0616532523812782784 -0.045539486207768480053 -0.51021309189055419342 0.52985176044783832694 -4.1717165984806197088 -0.15374345054850008241 -1.0021406081488926088 -0.048606160308457609098 -1.9004794423998903063 -1.2388248028644823773 -1.5964523908374272931 0.52649870550897293064 1.2756384145680121911 -0.38128147514735083456 1.8084640753385232692 0.085407842035236505862 1.4510338733599394967 -2.0011318746906194832 0.7293325212363339638;0.048173621730325764945 -1.2773722563236620253 -0.032756692840117486443 6.0933931058888859411 1.1811836864158240523 -2.535748640346952687 -1.9788833985321085951 1.3137910031995418958 0.17363384823201860607 -0.18991785923473111786 0.39339252906966376555 1.0753273713990230132 -4.4129085040671149898 -1.9969816463542700014 -2.3560206457241794631 -0.37571355748286167087 -1.5121321717620967995 -6.3237992929518780372 11.824538866914929613 -1.066289150747481651;1.7833593247781178714 -6.1775837920170308948 -6.6766062503132674877 5.4130001135700647197 -4.5105894708319924646 -7.277937666018370777 10.177207233488717364 0.68306306689057560977 -0.48083205091375308404 5.3952167456014068492 21.332776840136400409 3.0863373423887696667 -2.138173972121260924 -22.756064154579114245 -14.297807399824941754 0.59014546236781018074 14.983561809017746924 -0.057027174527797291903 9.2599684518562082047 0.11641556393693783256;1.7499092587085871564 -6.1843241798012869026 -6.5636363203846137537 5.4019334042419906439 -4.4475717127681946295 -7.1252257468422488529 10.079503979056074314 0.71109660083433134936 -0.43381274379188067281 5.3102388758014598125 21.279195745067529089 3.113738692163365851 -2.1554308265335890837 -22.576716081195176145 -14.14416805621000961 0.555915814841843825 14.837217890639266216 -0.076177070185080866804 9.2982671875264308881 0.04468146358998462131;0.15857740783173526755 0.34510729213521956771 0.26292418337195205824 -0.16217210922678085283 0.35293488905638775721 0.22543100209872593553 -0.4669946854112082546 0.014991441593394459753 0.12470497373012419395 0.43620237408697482007 -4.3585815441570492368 0.35720021776928734258 -0.58620976951985737102 0.93778651454607475646 -0.52974852805714189863 -0.60219246260118863834 -1.2284069576457261608 0.16111072379546684252 -1.2785793457331171563 0.096226116241022896514];

% Layer 3
b3 = -1.3453800676748739473;
LW3_2 = [0.57323183020218515527 0.33698717163242897232 -0.11383180506338715088 -0.28913457608164661039 -0.12856045283261904877 0.094624418375312185914 -0.20457728229980287615 -0.17782468837359532987 -0.36859121078391321458 -0.39659807754700376892 0.1027402853027461066 0.38013922777384778762 -0.19237120316052463975 -0.49557499106703239988 0.29002928112203790745 0.2824619551479002344 -0.32479270886217376235 -6.4119695779814991354 6.9276070904518718407 0.85793953128255495688];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
