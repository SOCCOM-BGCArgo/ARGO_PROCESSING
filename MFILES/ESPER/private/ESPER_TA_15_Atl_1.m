function [Y,Xf,Af] = ESPER_TA_15_Atl_1(X,~,~)
%ESPER_TA_15_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_15_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-143.241523403244];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.00458552991639557];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3163269245846542788;0.4631861592988863463;1.8689346437218707919;-5.7633472448862059778;-0.84532474731456852535;4.9151778187603474279;0.89540149011068292939;-1.2216251309145422788;1.9319241740898678295;-1.1055327172260762669;3.4848862612400086647;0.93396137961846414921;-1.4046574218713072657;-1.4060961202514554724;-1.4398679332069848069;0.059356915412889302286;0.43187822001670733707;1.4015950717957121885;0.43099072607008909186;-0.64886024554308885381;-0.25976303172903580929;2.1018487444042626144;0.2959742610111102401;0.7143346015877082289;0.29643462799411046671;1.6207644033317358812;1.3739667500003953649;0.15313844413800212219;-1.5963192359085129901;1.9365910487943327478;1.6336360091778803216;-0.68674171620511426095;-1.9095437817685758652;0.38864061499096069774;-3.2540412088692098891;-0.9225339734299631278;0.87519480664040560924;-0.97454570021195285889;1.9792269554901957829;-3.5455000281019564135];
IW1_1 = [-0.58370276045526414688 0.94184744222727390106 -1.0116241306629609742 0.36455339244696766121 -0.55717940345493977006 -0.28434805161693121889;0.11217244444968266226 -4.8697601183588101748 -1.3578507184631671834 -0.043441437355047261837 -0.80535873250054690331 -0.70149212870559196631;2.1180530355003419629 1.3725669344980435671 -0.25613783649898885786 -0.37315505298404627599 2.5342395729592159803 0.24679445801104352154;2.5728020873935419921 -0.056984338969750823745 0.67166267494286036044 0.15161309417227450402 2.3152683819979436031 -0.2060826994471617879;-0.46554636925446263307 -1.5277061292354654487 -0.78735100841804828153 -0.14550724295349712345 0.85053212310438353061 0.14344815187113563182;-2.4363261955824913052 -2.1650885552174066184 -2.7982160140626679556 2.4819557208837963458 -2.8465064861845692512 1.9664667966247018072;-1.7377947861693534559 -2.5997073879855596701 -2.7924949405486270138 -0.87189911389825647259 -0.21034448929238858117 -1.8850941923723789628;-0.50820024330480828567 -0.19697321725924610281 4.7230739199051594568 0.56498764425491487806 0.9102367267140778484 1.5140559969892499748;-0.028105093747559980327 0.94391368040321799171 -0.81629053380091265435 0.37543948368178492458 -0.44994778984576905279 -0.46591579808352628911;0.99246857585135028756 -1.3657324299708297755 0.84515604711114089564 -2.2997868004205996861 -1.8910509159250430411 -0.57947205281715330472;-0.43528250388583900055 2.1140142321068391418 -4.0698112128357957218 -0.54891139110520303923 -1.2616439398990615395 -1.4904874495939897106;-2.3123657023878330108 -2.405756164357934157 0.95087977574745585763 -0.90512282121142151325 -0.47706526808780336246 -1.4999649137051820347;0.99695022060322069368 -0.52670723748517811469 0.95631963630390437459 -0.62341516337481150956 2.5960350552409736657 -0.68896611045665034911;1.0672353842750275099 -1.0611351733167693201 0.49394099660716161981 -0.081682142043509431417 -0.37674166370048622898 -0.057005677955834735404;0.12301392154122808842 -0.77042554431559950867 -2.428398069489432487 -0.10201042175003911805 3.2931892615037612337 -0.23762572628779943251;-1.1385275826478495897 1.2626597218571040671 -1.9419293195886877523 0.0019478517578749930238 2.8490476291437771827 -0.13329488474834119693;-1.4014728259610000904 0.89028733190020070687 -1.1365258872202526064 -0.11625858266624514159 -1.8817943871603202144 -0.38571980106078629369;0.28681005519112034996 -0.34731009696008330323 1.9494128374882169208 0.27209701076285469634 1.1090988512699100355 -1.0275807259779274894;-1.441935312138665104 1.2417561907934382415 -0.60304896340349056771 -0.081472586483931450085 1.4781210752586333435 0.50628997922008101007;0.83101432637778716028 -0.094619132467528108132 0.60373544221903696627 -0.30436040677244730057 1.2493835138681879116 0.12104819140109893127;1.3569580340669056273 -0.066215794134620573064 0.89588577906424304853 -0.06256515233875639681 -0.66764872725659707431 -1.0454604671240939062;-0.67293976068526140111 1.177156001005501329 0.23863530382939163177 -0.024034702973427007205 -2.8536385302376476858 -0.12453360265103667615;1.7898474744338095377 2.3562882450451505534 3.5063237066835295508 1.143376398258992177 -1.970217870742563937 2.5316706597584945904;1.0135661804635422989 0.3971597935040826477 -1.3082276714968257281 0.37834355752189879896 -2.9230071809270672389 0.99466664977088015132;2.0037955326636551767 2.010242896060852491 -0.79647364099793316328 0.8228746789400134265 -1.2538892736524918092 1.4144865383052096508;3.4699479071213708004 1.2488666614314165582 1.2012337235308261363 -0.42697116854533584407 2.6244533130811729116 -0.091643094891963330917;-0.16443481651624583528 0.92939260928373523818 1.5819969989142199651 0.089641202617709719869 -2.4630773334833757637 0.051155355699005804204;-0.76868488177532667827 -1.6545107091895607798 -1.2492051580757979057 -0.30893982634786609776 -0.62121917424653549933 0.055355231052520291468;-1.5259758367192064465 0.62672142790706031334 -1.0136961331982237144 1.2004126467013531698 1.7232838477600904703 2.149436004105523601;-2.0670538249429606381 2.6339821072016942338 -1.0185445172878466735 -0.16779331073439249233 2.4096205030231216959 0.076881409606611397778;2.3185538107542038588 -2.2302509886181698384 -2.1591461076946614206 -0.67603656607813367163 -0.17376187487652922092 -2.4994698433059392428;0.61091129286796352904 -1.3039530367275555811 -1.4445167587373752838 -0.049308165055788083508 1.6299869798221908734 -0.067268230196978126556;1.002008019149736695 -1.176804964001643361 -1.7818472461929426576 -0.23968648011156895583 -0.52970139213753719698 -0.51101410239342992536;1.3575231190516541258 -0.95122944721667324064 1.5865800223158161852 -0.044182727378688231579 2.6055959998216882134 -0.023763697689564169946;1.6691784537073424133 -2.5892121691297314001 -1.9708388489676431643 -0.24745325427655803785 -1.1016877829632363284 -0.44984333670226800406;-0.92749751850890715943 -1.0344879003418958607 -0.45111335931995966142 -0.15671767700362296272 -2.3615097898515213792 -0.11274753025409760265;1.160734601052286763 -1.5248874405329755355 1.1340636660043657002 0.33435472148970829531 1.7392970358908084183 -0.2808334472713990837;-1.2538578321125590787 -1.0688163360404181468 -0.94538926463476202766 -0.064820991025452606715 -0.97989141952374725353 0.6348893015513744631;-0.48560411717076523708 0.74312937524448585691 1.7479401880366065569 0.91295044643247347249 0.03415126978743172198 -1.8520104637387406754;0.42663415814124538983 -0.11435597553919223113 -0.45470328572389023813 1.8711144900598044583 -0.10530227222668936404 0.50075374660345228772];

% Layer 2
b2 = 0.92505559247407564971;
LW2_1 = [-1.6253257554342073199 -0.030754899556712195913 -1.8235926301352405332 1.4271958865467069266 1.3208673157522343722 0.006007651755348704728 -0.10994020790805923704 -0.11647448590723619155 1.094847668204865565 -0.019574375653428229688 -0.113960452195428108 0.10864657097006728825 -0.52910356521595813817 -1.9361263350610733447 1.0632509584314895346 0.27329872744559524644 0.81355736219721219715 0.24580459852567487777 -0.53200967861029557771 1.3831491170623164688 -0.18033663797734730827 0.56879746410931053546 -0.074555036439606633958 -0.11570376704865441286 0.15475205117762766416 0.73920827280041079277 2.2319878497933358652 -0.48332422097674515582 -0.074164781986278877079 -0.28430023144441191052 0.025911517045628787437 1.1806685696257894769 0.28118969400105275902 -1.5712532778739676242 -0.21190862772513766044 -1.8385324785671026682 1.4566680900384052499 0.36490757078146823789 0.043090999958587880569 -0.16804332103578101254];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
