function [Y,Xf,Af] = ESPER_tco2_5_Other_2(X,~,~)
%ESPER_TCO2_5_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:54.
% 
% [Y] = ESPER_tco2_5_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.54516837761517423;-2.1981192072939408;-1.9249923488201297;1.1626504764766692;-1.2226115127339852;-1.3094116871883008;-0.52497384713510853;-0.29640641097707576;0.72519323751820886;-0.69823276544576651;-0.19834448249393805;0.50823685028850285;0.1267091163910796;-0.22537852740758221;-0.025255356220579627;0.59192069072430364;-0.06962923010448506;1.8285961075770412;-3.2311170968124867;-1.0101440043266185];
IW1_1 = [0.12519361774863585 0.3451881211634768 0.022656008351020527 -0.22192492669239133 0.86662588567015797 1.0025678516754968 1.0660513066302579 -0.90156771342566322;0.95133306692698638 -1.7900251876401396 1.7877034497820041 0.1116537074525257 -0.31871687692154999 -0.28266227275189887 0.54497697330022676 -1.243130302460431;0.071648230711263791 -0.30400948268569117 -1.5404075444990173 0.25021583902133032 1.0433341713616855 0.5370997213336357 -0.069067040515716965 -1.875156791862379;-0.14754489286940264 -0.1969364458203163 -0.3533352874229011 -0.40037804230436969 -1.1249764777856821 1.2443515158360341 -0.10004146678250908 0.0033560879953692105;0.15968526843755412 -0.413810968683889 0.47291219818258878 -0.80681606780225668 -0.11803673121267301 0.72553692402814374 0.037094999840032269 -0.46314172640880874;0.011383922568369013 0.16405576563249616 1.4166209617526342 -0.16338258551334986 1.2399582436847159 1.2817382143012905 -0.079721452270204385 0.17941793867363642;0.11913323077936631 0.14742389964148142 0.030588276533558851 0.14055344876826703 0.3304877904541712 -0.47373426157886972 0.090166220802050917 -0.26593867802823384;0.15292732910861653 0.144768814128233 -0.46152776227015924 0.098333681768147843 0.13392771628392475 -1.3856170498814719 -0.73276608128267662 0.15306340800100346;-0.17410752599803778 -0.219475175361807 0.73200203685634369 0.78049387606993315 1.3702721771224298 -0.90250569298323036 -0.6141403926033342 0.11594288937799825;0.099662432804807022 0.03673150559549835 -0.155668638190122 -0.15835666531408349 0.80598345673233562 -1.2537160399493972 -0.35287168600244262 -0.20719712248682098;0.9240394129842715 -0.56674837142215162 3.7070767626101211 -1.0047916096393938 0.22325613990272392 0.19956229229883102 0.1334160403477842 -0.45402438286120678;-0.061784605606621953 -0.050403496346299891 0.61492185731980686 -0.11679663705034059 -0.33611630845723678 1.4189462056514683 1.3777284866907675 -0.50300090854077006;0.010347944225202839 -0.0092124484003353654 0.087233462043263474 0.084500505330812783 -0.22970237549601127 0.91420979792086532 0.73779148244793025 0.45096684110187601;-0.034794579983395281 -0.23127392067152094 1.3164183583762357 -0.20642116966277113 -0.77176439477598491 -0.069175318722496021 0.37626645835472095 -0.26526446691506789;0.082556772948333107 0.12590791368400617 -0.13585039779866961 0.056621869211657773 -0.064955029591173885 0.43381563689477448 0.12587948726906384 -0.65358879269613779;0.41104499194818506 0.36567594479768195 0.3137441267604183 0.027502905682140401 0.64349368527323514 0.2407572103441061 0.17238823703423128 -0.79892791033837429;-0.18646881113408809 -0.21988377575525936 0.77485393496230903 0.12634991809226967 -0.0019838850521635898 -1.3028276132475016 -0.15584643101876239 0.18036216799957247;0.020183568196087288 0.24607238017616842 0.22893494583431709 -0.28066101300600971 -0.2499047050447453 1.626655719140643 1.2703261901813347 -1.7785598229865687;-0.68990020402014907 0.94348968236835673 0.86788243453318981 -0.63142907905587986 0.067296826906494495 -0.98452485123932498 -0.9540629639692525 -0.030901291944358582;-0.011997121560384244 -0.060921439828762906 0.25695778837067984 -0.54594424612510772 0.14424448294066913 0.5248994726925662 0.30870538893807298 -1.0141809969222648];

% Layer 2
b2 = [2.8626892483368485;-0.85489346046783732;0.57722621041578281;-3.474551758857952;-3.44024153599953;-0.062415593601955789;-1.0128044065691035;2.7260931761787273;-3.8722672048404689;-1.5926209839819196;-2.0718051755166473;0.1066384501893454;2.9018030723492996;-0.050285796507521387;1.6803035464800959;7.984080355594771;2.180115536920987;5.6542797261983564;4.1188594562324798;2.7153584160772004];
LW2_1 = [-1.5471346724556381 0.99758997675746774 0.12737215272098062 -0.2049536562487366 0.78476727384887024 -0.34974068557956595 4.4055798511227557 -4.7233318367181774 -1.055401614166841 1.5133266422230511 0.59827876367641386 1.6537416660766024 -3.8791860283680837 -2.4365779311458158 -0.64815302585422641 -0.90433139070965185 -1.2216301020475049 0.48801537223227542 2.0894764055274613 -4.6680514497214967;1.0456891946849518 2.6594914738834592 2.5336159872168493 -1.9899043150548192 -2.89175634795575 1.0116015788879922 -4.2628221198478577 -0.40074056760797117 -4.5520092251421582 -4.1306257458254168 0.65926124043619816 0.53592021754720409 -6.3809309532294405 -0.79815491348819412 -1.2422551265537543 1.6773758092391604 1.9213007810279481 -0.96657194622981057 -2.8606646472015984 -1.0204203526469882;0.25106691624843497 0.175415817301872 -0.0037905019043909111 2.696475180075852 0.055479852694097213 0.47432943329021104 4.0945552436090384 2.1227828303656704 -0.26063523982903869 -0.97504836468230027 -0.62179272506783079 0.30008350234449876 0.45540885532289227 2.0541569163584894 -1.834288207609964 -0.18883293774783044 -1.4823841045005817 0.1111737827657359 -1.1037717435536751 0.48114910207258021;-1.2319137602489763 0.19311537076172422 -4.1378518142736871 -0.22082927674213054 0.9143795984130908 0.52909206405384079 2.1583808274522016 2.7710234542999967 0.8525975313224643 -0.65895419461516869 2.9900194539082388 4.7969587515668133 -3.4200401450849394 -2.2135992747837032 -0.41895949539543309 -3.1860207528436804 -0.87418834152319758 -0.1096267008433397 1.3272300912787462 3.1295655716996174;0.8691146176123562 -0.64923154961924967 -0.21186385538130686 -0.70367161868316808 0.77271420519090961 -0.63868602079987657 -5.6149592051439594 4.401643577413866 1.2809438060057621 -0.16753384173945154 -0.31369096506191613 1.4110055436430637 1.1075669845042004 1.5596998210439006 0.56722397632445531 0.4497675928192757 -0.84171932851543707 0.35476920745548801 -0.68719867118974098 1.0205487634209098;0.39336066125056818 0.13881688307169693 -0.23911246171083239 -0.65636817740549658 -0.07716714268510956 0.042527189931570446 -1.0621403348520324 0.91604688407394341 0.084797451233751403 -0.16350061863945239 0.16435144462144277 0.42907560421040492 -0.24814770001749256 -0.05595029721634627 -1.5263629627166679 -0.34238132427506984 -1.0035307049562274 0.22143787059427844 -0.3517077941335639 1.1930696097535411;-0.003142461269104945 -0.85624093681484181 -1.3941936330891234 1.7760813999692653 0.03961366381507693 0.21589361408270566 -0.63477215015636279 -0.48393507921851192 -0.22737089948777822 1.623593232537301 0.19051444418355115 0.64177783729744686 0.84114107993942189 -0.51935395344401702 1.3842741082566965 0.17640310259799258 0.48573737801998806 -1.4443150207650379 0.22470115488231734 1.9501091586727408;-2.3509984019652772 0.13770226130968649 1.8255521783308049 0.84091058480072522 0.88479647240602821 -2.493446683859283 -2.0827472412055781 1.3619250386011326 4.6991153553861169 2.9707376088366355 -0.28090319377116341 -1.0452254348495393 4.8671059253925737 2.4895089606357117 7.2388533501111301 0.17401210541474313 -5.8751244335131361 1.9062337947351193 0.10079244053007411 -1.915732472387113;-3.6350100759482653 -1.6602738930227117 -0.58615675621692875 3.1239972410283494 -0.5885469505908606 -0.012471451318371298 3.3732512509893242 -1.0720713903873571 0.6378282159299109 1.30372158239548 0.23721292744356803 4.0589117406619177 -1.4312581542862455 -1.933413413758321 -3.6318642959004634 3.5944681219739909 0.057163017675791447 0.2361790927186467 0.42244726257217113 -2.0090753157481807;3.1076621739940382 -0.13778207282528682 -0.54335309406587362 -3.1488416610660108 -0.16482631985019386 0.18151085127736638 -7.5352363906348012 1.8127374871252044 -0.33550731987219795 1.3316311777719814 0.22660926472984688 -0.27581966266846264 -0.4114612525332631 2.3796677597652005 1.1430993592721364 -1.6913393012406628 -0.8241819276336283 -1.7019599436582025 -0.73740257212098614 -2.203899961750738;0.05063732160865865 -2.655605273729452 -0.95984746924195341 1.1234275511076921 -1.7423637599902735 4.5319069282089472 0.72626540737947343 0.90682376338262827 -2.4005988956982955 -3.4956287454247876 -0.48309803946802543 -0.41955171579364176 -1.1856252673810024 -1.3922901090809547 -0.97758886967533243 1.4684334894482487 1.9345053084050718 -0.28599323219568196 0.4079553692726185 -2.1496327991919406;3.8626290296787422 2.9038144690960008 2.0839876601758771 0.67568946087330073 2.128354536630698 1.0162478264480557 -3.4729110824197771 2.9326655909569439 -1.6993405305506966 -1.734596606958672 -0.47637780649770983 -0.7613528954636013 -1.3212442839972622 0.90810578225468686 -4.0017537127981795 2.1744242382532839 1.3257215082610101 -2.5485260726782482 -1.974730155634181 -2.8316551538457184;-2.4244701175786716 6.0405515474587848 -0.57902106600845482 5.4417261955031817 -4.4932155990730891 -0.11707432441311336 1.869488431862844 0.48813207374660267 -1.0389026494583746 -0.78245765159554193 -2.665218659204124 3.6722131623285477 -2.139918841691141 5.2568133771530823 0.045232221302735041 2.8148798930456249 -0.52643366908304157 -3.1688046121062983 2.9893229594423008 -5.4012694540468837;-0.23562288511270296 0.26543772402361282 -0.12478762518604479 1.0821923414454613 -0.57401333627861939 0.62025621288287025 0.89465111896891791 1.002090352348465 -0.34464590611424056 -0.38941694362366291 -0.26168464114819534 -0.69027156717878646 0.92178231930685428 0.62087315358015571 -1.1619705070126662 0.23701010755641724 -0.57348119010427334 0.74224641360747967 -1.0972712076882603 1.4748095113872686;0.69891331379434529 1.6133072369671353 3.4210723011303892 -1.1354229486663392 1.6660436347893415 -0.14911597113595737 1.5705321143406721 -4.7590401441891492 -2.969718829571264 0.36766722821736464 -0.22456130291135101 0.42831350200163165 -6.6315795745324744 -1.4335217093352743 -5.7568355969600438 -1.6027809984867756 -2.1506862810449716 2.6130232415045858 0.76327870531524056 -7.9193491260255131;-0.66813576055023038 -4.928898332359708 -0.66326972790710637 2.5087695572309689 2.1773311174569807 2.1698992453353219 -0.067271209762337303 -0.33842739007146805 -0.1938845851041284 3.8928806967207357 1.1816414097200134 0.43668602383507721 5.0170053123973837 3.156198691695363 1.5160331689952351 2.0424924196082617 0.47769727324514988 -4.5110520653136614 2.3848184615515589 -1.3758471646745289;-3.9917707648721734 -3.503510922437552 5.4500792668258082 -4.8902563739551486 3.9602281643722392 -3.9956014357065244 1.0708079075331731 -7.6960028728280836 -5.6374782584515692 1.5399491564255425 -0.95331959010031719 1.550867050003442 -3.8618073673517244 -3.8059027065891557 -8.4056627907581696 1.4722537044770629 3.4469020747165171 0.44296974691061131 0.58069363197570401 -1.0994321275566692;3.2293108593266719 0.89052245098378424 5.4120404607853256 -0.34971953378158355 0.96201692352983859 0.8733268700972846 -3.1606952388959662 -2.2904249107167747 -5.6038920709012441 -2.5267930812595756 0.070920779487501168 -4.0635379226331407 -2.4747473221432705 3.4055348445576614 -0.75127794702961825 1.9492749565937444 0.63753755248436461 -3.2999223008818506 0.76487230534295969 -9.1686505536815979;-2.5635982734319942 -1.9768334318954506 -0.94084012145643958 4.107912810811257 5.3553450756080085 0.077664101064737256 2.7599739241956023 5.1184041950898269 0.66925055414378087 3.9472111518835282 -1.2049313941985957 1.2813441797601064 5.6361513064751092 2.4659699080863433 1.3090679953127435 0.92932921635338395 -2.4567027683165792 -2.5813126209611137 0.32210979865096823 -0.2962683207509979;-4.3010173563802176 0.011013918186581956 3.6566929170769402 3.6236499168254874 2.0255883584802836 0.060825631642341477 1.7878744822396373 -0.88527524728343931 -3.0700393277223537 -0.38031333560707531 -2.0737011027944079 -3.0044496804747629 3.4143970675522288 2.7367252774328708 2.9537861252544237 2.894757875312282 3.7746502160748858 4.0963483266855443 0.76032343882753528 -2.8314820059455434];

% Layer 3
b3 = -0.075616449687858828;
LW3_2 = [-0.36002965342096954 -0.063768808834833476 0.44726099949399667 -0.17988078272022728 -0.52837644414460827 1.2231984958598663 -0.27535069190923717 0.10713871708699579 0.23429462106193596 -0.22344954326179167 0.051613682751312728 0.10861321444333315 0.01627851129632972 -1.1267321631781351 0.074922645259549364 -0.14581086373015539 0.025965009712531011 -0.049382746893052935 0.052722597726305873 0.031531422932111787];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
