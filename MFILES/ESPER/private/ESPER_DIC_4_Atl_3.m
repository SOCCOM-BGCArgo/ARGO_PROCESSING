function [Y,Xf,Af] = ESPER_DIC_4_Atl_3(X,~,~)
%ESPER_DIC_4_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_4_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.1297297965961008437;-2.1353748377725638719;-1.2839295902156606655;1.4015449942079789558;1.1542747862444682205;1.8248980154492591144;-3.692928024205220261;1.4114783831001704861;-0.92283549627748551192;-2.8459973810754068957;0.53615750320279642605;-1.3261157554595066621;-0.76687089367151672903;0.29116506949327419784;0.22704836027341329663;-3.5084342776048029755;-1.3692568037808034997;0.12829986485933653206;1.2673533605126801049;-1.3732643242298205877;0.7750933259156040922;1.6365524898621985894;-3.943124600268218316;0.57102112980986741153;-2.844973296898308579];
IW1_1 = [0.50268683633101485242 0.14028194804475085933 -1.3051713866831731181 -0.71907522295876136198 -1.2451847614925464214 -1.6783623792860209445 0.23322793072054082142;0.62185382807817346507 -0.34322551237660314793 0.88068769843014860221 0.2833875916071455503 -0.77195822853302653588 1.1018395363906563489 1.3813410478958338956;0.42273933303856592314 1.6771053846326811065 0.63171274050278758416 0.86194611571007673234 -0.7340473219527759996 1.4576512873937021997 -0.4946437554234093259;-0.54074961621306449899 -1.2616396100107027944 -2.7446681676487818535 0.7263029028158866085 1.0325968019645410667 0.2675737773006657827 -0.29244973793083511859;0.17192109530389579342 -0.37939658804700687744 -0.48100428774308279234 -0.81989359631725211575 -2.4210171084050262635 0.25848008997482713189 0.11425739281315856755;-0.80596221823562652631 -0.62938480859301992876 0.15160132036180007375 -0.88940040933781594479 1.1647781307976254883 -0.88930450130774407747 -0.91195930121203716556;0.69054828156665826189 -0.40509388896775599953 -0.35922909883974701861 -2.3132368899723201316 -0.48119294281241975497 0.41229030348235951031 -1.570288935021535659;0.43951732712062835384 -0.54371802813284297873 4.1145633453454975026 1.6206649799366266151 0.40294698632244235759 -0.0097484266732508449704 -0.36026550211522312406;0.84009639326826746064 -1.7008480883793115623 -0.34110888379716680641 -1.3528726825150798607 -0.18815298846703562563 0.027087128282808327351 -1.7134708503555229342;1.2712642459910177273 -0.12063715213810341509 2.8883157709277460512 -0.22052984279324719386 2.5624943746417496726 0.92452036818343530378 1.0893282278940497054;-0.37614111599750821302 0.26780233993630703226 -0.54439019173190594802 -0.066732082066662562481 1.3366653846906362268 2.3556099269296457699 0.14471380783320764163;1.7563805288973197705 -2.7759312914916769444 1.2574744358667861999 -1.2794385876374152478 0.39296936408416438535 0.62012642900343872832 -0.86084503628635500316;-0.23641180889562643519 0.39728737264167335308 -1.6573444762944098407 -1.2260032273994883045 2.618865100405207702 -0.23051580865538695564 2.1292729673616408448;1.7049900775231328076 0.74162786963561322384 0.87830914620862610143 -0.31165352938728685395 -3.0032792637671086311 0.057545588612848287691 0.44405152962364624614;-0.44228546660466516727 0.45127524543268754398 0.83322523444049445551 -0.39963891899915077177 1.6939270316125456528 -1.1789040120169842485 0.8180788757119589194;-0.033585354744675520455 -0.63012077986054393364 -0.40100972568269177554 -0.090421583533267707589 3.6377277582560494373 -2.0684011729155873383 0.36491086937232591891;0.39425288257208973564 -0.59671314855613211137 -0.23477285809019576845 0.19762203635409858471 -1.0484526272275824788 -2.3987423872625917021 -0.11757871597193539359;-1.2487131381710390166 -1.2321361638489225498 -0.72883743383630561485 0.4653465509934386346 2.0334975863600841528 -0.47492533751789578478 -0.13704640200362105951;-0.18809157305549420447 0.69774602371097615983 2.1850572233087044438 -0.72622993318824535791 -0.9913080084313155016 0.99692773194894024336 1.5031476609120404397;-1.2472322646133058299 1.0782427704122379275 -0.90933831356342453844 -2.3840842846164411739 -1.0596188933187848935 -0.21767482769787763197 2.2251066682558491294;-0.48454338977589211934 0.73781014246532172773 2.3928685111570953126 -0.86647137590146527941 1.2045287567844389365 0.67395845621471817122 0.22483400069629527751;-0.85466871474248540252 -1.6241019491899169047 -1.7178067351572021693 -1.6388582506261137883 -2.1883924894045221343 -2.2862021734252677696 -0.56135482944133074934;-1.0159970381733596234 -0.37777676838618567956 0.013338583904570279134 0.29604539021964404455 2.3079131591490478215 -0.86750989114291354731 -0.94062390222138758666;-0.82282828571964361508 -0.72770680191985759322 0.74253946051717556465 -1.4508402326834519691 -2.6496707969498181079 1.1256046178468046559 1.5219748653565037255;-0.31135286052397070922 0.53026910692364170874 -0.3283022064951225949 0.078238548219062190037 -1.7703805453009473503 1.0010259448774507796 0.66988101100477437377];

% Layer 2
b2 = [-1.5417337793710623739;1.5517442319746903578;-1.6700547832076841903;1.1323622251370446534;-0.83323636167370906946;0.093980902548757322412;0.083531148971913257717;-0.060996319140073328169;-0.099057757224616474478;0.7894261793410082273;-0.89472645165122832722;-0.93923362257805498299;-1.3361316641590827992;1.4563080674813368987;1.5457972555584482688];
LW2_1 = [1.0243555680976985656 0.015991982883629969614 0.26161267905656632182 -1.6577719429233122028 -2.3260745912324343188 0.57518318244923927196 -0.77521096983251180923 -0.020086933713002758789 0.053149190515450306371 -1.6325472492881405451 -0.56403758759695721281 -0.070787251533057593544 1.2449368774657403325 0.127928568370478557 -1.8504704009002845844 0.81983842462580014399 0.16762537916735203991 -0.21497031805061028731 1.4665609834226491781 -0.18863311147254038791 0.62646934569868750753 -1.1716563503366166366 0.61454812579925099936 0.030955496290389180464 0.20209105425929041466;-0.37264893748187416511 -0.095646008798774870274 0.2882220101593290229 -0.17239559195729095564 -0.38241683081666982824 -0.83827380183534028202 -1.1218606086302023161 0.10089232520457119824 -0.47819522384708462726 -1.2673107108766976658 -0.43990600909950539066 -1.4650302211926367058 -1.1852831012990190374 -0.23001832578402200968 1.4346828526743553578 0.43831823532730618265 0.73743806212652052157 0.42012977289001618431 -1.2775806154727245012 0.27209803003521898512 -0.5186824265116257715 0.34565469885407268391 0.13205996075209994189 -1.7112750407106396278 0.49519007274373583183;-0.7149550211772468522 0.71080213619269549952 0.81023558195809275428 -0.32300472005879260484 -1.1958166180437572734 -0.77699506092027093018 2.5282486378368900226 -0.23232687283163383496 1.4431997545874528655 -1.5598964294572994493 0.37665161191688961706 0.25914727678920312925 -0.4262339931373144708 -1.5846830044149724515 1.4121249081895679289 0.035863981712750438169 0.76311354793251662265 -1.5599615483927289361 1.4402987080762661432 1.5635055699277762287 -0.62836021756061954946 1.2997541944574368955 -0.44347686882392817198 0.18155587569564571315 0.24315298303865789942;-0.40651971933142938553 -0.39445456905477710441 -1.122891564457377811 1.004868042550516094 -0.90792875231295722127 -0.5217354336101276413 0.11837613141175955256 -0.37445152800870146192 -0.72229703155267255266 0.99863373074633265958 -2.2826195871709562546 -0.13227551254129449321 0.41199709060328770782 -0.072334023083300072465 -0.69755512612735048883 -1.1416850389374051389 -0.52308170833224665319 -0.3871207564288761116 -0.82087815066394542729 -1.1438389911115303121 -1.6181337117498304501 0.49134557096997377723 0.21890415356638101563 0.036995097466453422119 -0.30723785210253573563;-0.51487456973693923601 0.2968781628285416252 0.15558081206896082205 -0.88751244828922004615 -1.5481137904759381119 -0.38598991516101216481 0.12958395361573038507 -2.3219511823201957057 -0.51934228509295543574 -0.004517362795147535949 -0.12020141997965955172 1.4791313060883082287 1.4347018861916249755 0.040687966996015428878 2.0324131655808082009 -0.16694215003283086052 -1.7015754110950194189 0.44379164208037724659 0.13373251462057603178 0.57889667826809276807 0.71158398279998980041 -0.48369403697029728084 -0.47061367534538817159 0.13893708990605418974 0.5687704044017438676;0.31428042420899748866 0.10562076330678051017 0.65403829088846532347 0.57105258131112945907 -0.43788384357275189629 -0.40829480288299285773 0.81399789028790248135 0.6364671232741709872 -0.78430643953528622614 -0.77881051395726674791 -1.1623498027966689961 0.58325797620245611874 -0.11092800271965892744 -0.38091889161168590583 -1.0663128332091653672 1.2563955730298412838 -1.5904930352842996388 -0.16629730760748914764 0.43853141627294223159 -1.3283272316200880336 0.29161904965688223434 0.68160404883830194578 0.20404068165590913408 0.76283452256317452189 -0.19142765396328889627;-0.015188609410555664603 -0.58258576902423486743 -0.5646132285531524353 1.2108631331747123916 -1.3776618079671523187 -0.21847245434648018825 -0.39019170263810476484 -0.25698644417327981548 0.28253845203293975752 1.3481547689882740215 -0.92018828809525632373 -0.26738375284301951762 -1.2947880064758727769 0.93692149844744132547 -2.3815149089839686702 -1.0832837575703968547 0.46979200888102434774 1.3238083696379130405 0.025938217764749180172 -1.2860247331747178823 -1.0890305399000699271 -1.2264656093541985715 -0.49803188202478021473 0.94743809539916190587 -0.028171934107851563656;0.89053082113512738172 -0.10378262604416589598 -0.089325602035773499221 -0.97360348452690437249 0.34982509649637671956 0.22275019393444731031 0.060858659341735933668 -0.85110375980562280596 -0.40619989325431132832 -0.80401939669936761668 1.3285504579294540317 0.2357175125997170162 1.0770379405827834596 0.90764582450594133434 0.56594003647143087399 -0.50738041491973018271 1.3320642116332517269 1.0842594306503927637 -0.462168751767453867 -0.53600047400742534265 1.3674203736402745779 -0.25506098168682533878 0.038457609230207037698 -0.67812160295194834347 0.42333851781727077634;0.24778013186802169687 -0.57171581152508466062 -0.6101441296129316294 1.9451895505792842211 0.70206612433337478585 0.065161185425873596744 0.39211030148099496051 1.0424063753029260138 -0.39665209149610325401 -0.094349867686504440556 0.37319840221500771849 -0.11430106695802727534 0.67089818058104944143 2.1285205934523672155 0.98615140681585089499 0.80543593378812561312 -0.28959259182769891972 0.87685507694069420026 0.28034766315498799161 -1.0797801844523546855 -1.0150509165256471622 0.10838589410480713171 0.97132240641779976631 0.87158844394873091765 -0.23170660428531555941;-0.33414740115011437593 -0.049111911980373797182 -0.75816072975313730797 -0.019158183169768333576 -0.93816593531283354324 0.083782405743579993485 -0.36030533513220980302 -0.22183296974365113163 0.62033907354674888701 0.65219169305868274211 -0.46069870478087082688 -0.32604703881988905678 -0.67027882804480842793 -0.69388665128621085376 -0.61874339236953612708 0.1646286243269744487 -0.59731889203976562541 0.4893511613045594677 -0.36574445324160281823 -1.9165184223250044671 -0.33542054193449127864 -0.77712499553917446793 1.1168026650579157 2.7268842988793355886 -0.58420049272559282372;-0.45450556807069969478 0.31854907528378823001 -0.04095016475996390154 -0.30994723240001065268 -0.77769990174457237497 -0.2933990983660647589 -0.11509611969374820839 -0.72279306513804952861 1.4240791514505433124 -1.333804054780636239 -0.5841773494340820605 -0.56378018731857670875 -0.91145631973715979246 0.17821755478853992805 1.09985580782762149 1.7220250310138514038 -1.9667826544123212518 1.2708879182058923085 -1.2281591983281487934 0.82773231068657249221 0.85913792862634086323 -1.3639677903917422075 -0.97788035622119739987 1.2569557746470991777 -0.12931651936245117107;0.32937206069485813753 0.2476586678291126109 -0.004249501694199145363 -0.82387649681646024646 0.3866044316562065597 0.13801895339312983402 -0.71541662668595107366 -0.63860193034225409825 0.40766633873938845634 1.2000547606368388021 2.0836606436932441078 -0.61211033532828096337 -0.66409633352715935484 0.43609683096725798679 1.7147885359512491377 0.99962191117886634029 -0.52251739361671978301 -0.26106540297995173283 -0.89250510539490168771 0.51393089163307947853 -1.2534773686007587568 -0.51515150892832195506 -1.3134732307928018713 -0.8998192301002697624 -0.3165566108808715029;-0.35508417268154301993 0.50085889625321178276 0.13100421066756218202 -0.48496552079307209127 0.43739597556882331419 -0.28995797506193077275 -0.33018027696187718378 0.46404750481732853773 1.1561540930916021086 -0.067530164812146784015 1.3697328338997469821 -0.90166397497655148552 -0.75679975000384447359 0.070661564816651659116 0.20080392374043920523 1.2095589005750506661 -1.8770058561923634866 -0.71962468954740965721 -0.28747406203888309362 0.17340001341577726546 -0.57592809070850670139 0.76882423228781493485 0.14399674030049530726 1.0804326532666441718 -0.0473937582310392444;0.0087408635198061388621 0.046951133291806106118 -0.13108256414967831005 0.34767471353531476108 1.0074024320275329902 -0.11864093501268734021 -0.17762239349041400449 -0.17434560829721884589 0.68673829477593639758 -0.26091833229504363123 -0.047492220760401555879 -0.45342897867152498481 0.23787899391640868196 -0.89422578339302682959 0.40503311912992689958 -0.16411867419775735821 0.031612419714616257771 0.15460105776095484087 -0.22622823081362777864 -0.11367534710971026468 0.54036896298918302151 0.21608961181147570696 -0.58930963602799757428 -0.47451929710342632962 -0.56354676100915268577;0.52769211251842740307 0.33496276581839590225 -0.43728098915172652905 1.8234668040215236129 0.53338292889000193941 -0.2307508745855477994 0.69589983657458054367 0.71208075821763006097 -0.28609724907211253608 -0.47021337604626228801 -0.6291770192782497606 0.078700575106569942152 -0.81449723695502629361 0.62511321934393060396 -0.54277326215219567906 0.79755803917459699992 -0.65411329622508829207 -0.58149936646721467337 0.71292813111239228263 0.57610111320803980561 -0.52297311329398010749 0.45493479850685714094 0.10963358727307162543 0.27466154779305496092 0.10559105712570920899];

% Layer 3
b3 = 0.32756327730974532653;
LW3_2 = [-0.080889104970070083156 -0.039449356599445435656 -1.520172879858147752 -0.41519373868248976578 -0.054323972720442460782 0.19541563366313008387 0.022370498360572546592 -0.10059097475082560968 0.11528407141163478367 -0.20110435336073367862 0.049429363658132968729 0.11652237243802761324 -0.32794302758735566217 -1.0547163550150673306 -0.2378492964854544145];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
