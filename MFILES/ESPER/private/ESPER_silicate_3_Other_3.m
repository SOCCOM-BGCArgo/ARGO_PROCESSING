function [Y,Xf,Af] = ESPER_silicate_3_Other_3(X,~,~)
%ESPER_SILICATE_3_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_3_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.088307788020380431626;-0.90548161105096447443;-1.3016847980973023091;8.4188304157089515201;0.61194979463167131772;-1.6869177064346980721;0.31673483977477584483;-0.39222342548476596402;1.4510431273633641602;-3.7642234926312121424;-1.538863713129468902;1.3665879896752566314;-0.3822469293144662994;-1.1389347925000092854;-0.85548026370363894344;2.7382478624682016211;0.71789833720533446915;1.9861665274860238473;-4.3417479557441813753;-0.31801006354634447915;0.18552596732431830828;1.3403766395882348306;5.0275914988210921308;-1.8664083512551206123;-7.3453327107237873506];
IW1_1 = [0.24590858444109015002 -0.76663906047696028789 -1.7229095574486539277 0.27556663021342797659 -0.3222152414332792314 -0.42082549364190480201 -0.13636045394712054124 -0.41569995436955275991;0.84057788207999972752 0.43208602953222541299 1.2646803089145204346 0.029046649983992967742 3.4805988225363728716 -1.1484470080042255002 0.95477386258096075267 -0.69391652889821264782;0.17363050464442453258 0.062116669362433714341 0.32371362582538809605 -0.27931570703500757658 1.0424906950900385549 -1.8616600582143232323 -0.020979231258090553364 0.15635487586569538077;-6.4431996050613022931 -4.8187360490910773336 -1.0970579765265093819 -0.049805314002249599648 3.4662140224241988484 -0.36396882304137007091 1.7953579318603591908 0.6036005371896308036;0.02422147106674247749 -0.32864920477155107337 -0.35530674290287367345 -0.17512082415937560431 0.53113474462997123382 0.48835694586743610968 0.16051214674685865269 -0.3464336175646807181;-0.1973160436446153021 0.49857013445897957471 0.32946372947152974264 -0.089775174971617605069 0.32097254511067224714 -1.9603167442875686355 -0.28664205936837305888 0.67024708783947672952;-0.16301696370492177457 0.53296606412886904369 1.9036780361711802545 -0.25370954371282300466 -0.93451686584409821013 0.70058306973479356206 -0.11593357622540223506 0.48217131099183913046;-0.24702504136055059014 0.13231255919684906108 -0.68938173671643854235 0.29169523679013115158 0.45823730839693110894 -0.52381735599222789546 0.27868360209087361667 -0.85620316794866668797;0.084092240479127236541 0.095226759432418053852 1.1589151612018118165 -0.039628466680864012084 -1.1870985096031079209 1.6685513621020480191 -0.43732324034177061378 0.16113951426755768193;0.029898883993355503119 1.6166408019373488258 -0.71944778888479388179 0.30294605583790168435 -3.9347705702384687676 -0.99731769763433542053 -0.93161333371796695157 1.3184965503595278413;0.65224544269224504767 0.59861526350175664479 -1.8359495197963489055 -0.68201268733753028783 -1.4047711786745165075 -1.2874894558052447646 -1.1556257033083947583 0.16823512334880774688;-0.33421139235681596169 -0.098254252664336627632 -0.15593597758505192696 0.21065760964591678794 -1.6618944379139788392 2.1506741921499319403 0.45752341099165511062 1.3296398170006302752;-0.22226729212188986451 -0.07029235945451191292 0.98111031249279123667 -0.46714610522996630193 -9.3769461415010546546 1.1657742149084440175 0.12775592501044472082 -0.20923157600612363183;-0.014502017450659330025 -0.038584016577934032721 0.47075818154773690916 -0.66054954161853474126 1.0261266891726035233 0.65463000332851017937 1.1802415385786988455 -0.98769613010364709638;0.7366384415767426308 0.40713336367224783885 0.56871464605502830558 -0.99016721068962043617 3.6512746860692026907 -2.3327744882456795672 -0.23957801443675078024 -0.22896197895595243876;0.17287837275003309356 0.11399836971489114845 -0.29304345574976392585 -1.2592254989540550003 -8.7007633978656500062 3.4343709716879673444 -2.401441657762000137 0.33064124544171002995;1.5411052459352874155 -0.10294903652663617288 -1.2787243741836700206 -0.39729200584215157432 5.9569505991364577469 -2.6341934841680973989 -0.095542168738861454891 1.1641216841358230649;-7.7553869647853783675 -2.6741779117656880871 3.0736422823533011695 1.6198070654019205428 -0.23131250440451611716 1.2379976443787608087 -1.8029345037983834921 2.684255904875775478;-1.8451354179435246472 0.62456437465038261436 2.0851228458470552063 0.89178228722878716273 0.4163109104933466198 -0.065507919037730705236 1.9673544907950706317 -1.1791812171457864977;-0.34133232151465242588 -0.12385313775700439176 -0.93258755405304549768 0.50376738018049571632 0.55573641320389299825 -0.16154452806373695295 0.87726704665165144981 -0.92790198375624699523;-0.62024794854887610462 0.77658698903785317036 -1.7151983336550638004 -0.44609386302898895726 -2.2214402840992608645 2.4238286265348727433 -1.7686648130362430109 0.49761805693250071858;1.0419442924342672274 -0.27090799888574862431 0.05661782369421591854 -0.28247977867997348111 9.4588741701618737068 -0.97650097955713499598 -0.85726862864582475954 1.4659237392078743323;0.35373526484477707532 0.15461056973919554136 -0.033143806019388336037 -0.24368818124931879154 -3.9287217478237947965 5.2633442701061587954 -0.60246564279234138262 0.57139031593247990859;0.15766820083599011881 0.10832961736440446798 0.31807745785605434641 -1.4417337527041780287 1.4850241103985135638 0.30288924095425956429 1.0995195062203322323 -1.2079581166150301641;0.53829346355268981039 -0.11245496362470973339 -2.122974473810213869 -3.8771298737505794918 -2.1201093217450637241 -1.3854765357544007731 -0.24645997161700525235 -0.095292538189872835752];

% Layer 2
b2 = [-13.242423853388405774;3.9100636199433713713;-2.3478672710299144377;-1.4903610729552361214;2.3750354756320981586;6.1077922828114310505;11.657686047112099104;1.4011934869700579664;-0.47953652272240548937;-1.2417839283180107657;9.7901033331759901301;2.8360222588589021342;6.125070035263298962;-6.4028022291412600708;-3.4536171062614160476];
LW2_1 = [4.094655995539211446 -3.0693783783848682667 15.964829505002445131 -3.8986869246303128556 -1.2783829457194690882 -1.8967496528980145598 5.5825857355290642303 9.7166438103677332805 5.6983428969513409967 -0.31898530066144803463 2.3030429743566172007 4.6970886148332491317 -16.643693690118979589 2.0400580866499282706 -0.10410014622672092433 0.32747452790328535066 5.8315736193181546554 0.065325590952612713758 2.7373918573845394953 0.82932922271388420654 -2.1747916084400764625 -5.1823137025405801026 4.464049689386591524 3.3709545664453637315 -0.85658607178381995784;-1.5090099492537500936 -0.26750147605632063064 -0.90606194299121090019 -4.2251140184551436718 -1.0203310904650126911 -0.35554282369823508869 -2.4128949273127600073 2.1742122900459026624 0.85207518542944571394 -0.41148162838300378352 0.0031427149643537813026 -0.031552017786332819949 0.3468255052164407326 0.26501736992260305215 -0.23484400435398927742 -0.35849520533309936487 -2.0313155666190447768 -0.14289561767034647533 -1.8152818523737546119 -2.0565153312979655986 -0.29596924714746214446 1.2131969216754410201 1.7014709212519276704 0.58803656054026254285 0.63505669131040431985;-0.70374067035636544976 0.7507440062643185863 2.8598828736284653829 -1.0918514897414892673 2.3962062514476647479 -1.0144537012406731336 -0.7518694911733807551 7.6825578955785589486 2.0364833807258393428 0.20951830510861535473 0.67101621510772369028 3.1823809832587763857 0.71760777456344482239 3.4749029987413706522 0.52015916723783828246 -0.080086286986700755408 0.84652774587747725565 0.082884791853073611079 -0.77789793306063770295 -3.2469759810192546645 -2.9560727284507524182 -0.47945874898126811248 -0.65958251188834571277 -3.4683149274113773686 1.4811992949923238339;-1.3152169511763041054 -8.6750887018882885116 -12.589675187338345452 1.6072705530000392926 -16.064298476017626172 -2.0294554179316914855 1.6710807717977775866 -2.5955516715671791417 -1.567920420267303161 2.5295142400297421226 6.7460012304841834307 -8.1026848651835834403 -4.3407553514457823951 13.032914730056551988 -3.8112173424304116587 0.38894925105353217454 10.23371301452429627 2.7736245579811744655 1.8195349745772553263 -6.4687072997764456517 -6.1978488367818176386 -0.28007026695980619113 2.572962826791809654 -4.116844271453278914 0.552762402114048923;3.4367703071685058447 -0.1783190309351777858 1.5482961539267943163 1.4117765550317795675 -5.9166783519268824065 -3.1370586661232904291 5.4840441406432152149 -2.8178188227056137904 -5.229659412747751368 -0.50358476133727647639 -0.58631614520288188874 -0.33335421287112104727 0.27126551593510639382 -2.5220011379443287858 0.3111136913508981694 1.182388503553792436 1.756239521033354789 0.092009725189922300648 2.4674809192564959304 1.3334303170096912794 0.99562728783088805251 -0.76285141189934324579 -3.2760490365544177038 2.6040487503928932966 0.13862365130836909466;-8.3711820697699490523 2.2353721546931164532 10.876636305426343299 -2.7920855239884967425 7.8430631342178829257 -1.5802496004918173966 -10.101215383122381652 3.585006937469283006 10.242405498757051419 3.2621288116773796695 -2.0342163781430735447 2.7253024139746364618 -2.0047399559701806204 0.47096120420134679474 -3.542846089952978339 3.2533980966239157695 1.2247062695093813289 -4.1197868652423226266 3.9974290532869356518 0.57536314373135100109 -1.6697412911555975512 -1.0021421753629047302 -0.83558026943865126857 -5.0737431784789128741 3.7706266210560737129;-2.7956692433137608766 3.6404136467204089023 4.4496855925652099017 0.62739368592499444865 0.73685471161866944456 -3.7030695572910015123 -2.9234736740359474894 -0.16621696959885018385 -0.1375325734489897811 1.6566159174999153247 -3.2577442552097513051 2.7300094294059094047 1.805667999661171752 1.0821563738854407255 1.852814075794541715 2.2983393054459546612 -2.098274709922171688 -2.1256433129472052102 -5.8362485248159483575 1.1565146321234074378 -0.38514588577507352651 -0.1653052937869892991 -17.068331905666926929 -2.6652123108571261767 1.1107769392896937877;-4.5219457779950973375 -1.0255035872624322923 0.4462981957753556217 -0.33087358004971845205 -0.68167073933556099341 -2.1485036721209591626 -4.6088845320538593953 2.4834338874087396043 1.0062913239369648544 0.77991667463599589905 0.49495524247347605362 -0.53200751976362992135 1.1106391762373084564 0.89948830986417382949 -1.0464538688569569036 -0.7135532881361990043 -0.17550092981821777127 0.19794258437863376798 -3.045500562315309967 -3.7719876131389931118 -0.66153551331895932286 -0.20206842788359805074 -2.9130807889114054277 1.0855432532551672065 -1.9172872198644774766;2.607530492411511247 -6.9018918285752404174 1.5845591519913355683 -0.49006190252069670166 -4.0962619525350110194 -2.9961426395765000663 2.029041610289980202 -3.2672244019228782186 6.186041803295958097 -4.7259275714388939704 1.1534554882804868292 -3.806285378156922139 -1.8540821586559848022 3.7491761770868983206 2.1356723183624906071 0.24328842856419541363 1.308975563977415657 -0.31270607631704150364 -1.6521205191578571814 3.5674021156232802454 0.80856435093767631272 1.0258336547765989355 -2.943037105169989065 -0.73279090395157220339 2.4782932321329260716;-2.3740528067273571899 -1.5342225399028117661 1.2836655655439135337 -2.5298788039501323155 2.9420604473873446238 0.56275830821517613956 -4.1196422319319312422 7.5099204447465135459 5.2555152541584870818 0.12380144262780948261 0.45062665829018361263 1.4362719894236226637 -0.24898569529697936464 1.4156867202779768178 -0.98442634495669711914 -0.59934881389132077523 -1.0483124078261301104 0.15531605800582753973 -0.19700495412899199366 -4.7768481262733519799 -1.42016845616201981 1.1095642114280364066 4.4453198673946605624 0.72784483112933717752 -0.81152314892119647993;4.146455805166089803 -0.57489677802944083584 0.51587526085895141215 1.0386310203976454325 -2.8749305981451587222 -0.37147936166583928053 2.2724657113331474534 3.6417354076376895478 -0.67379852639834780792 1.7066070566712756573 0.097167615342373697684 -1.5435237163944519612 -1.4484126469431810591 2.7885881859427041896 -2.1319228152147711164 1.2402741160229051598 1.2192128195733231699 2.0493715826453313689 1.6832299674148505364 -4.2843750154899824523 0.58361062112051853568 0.20191446610630661707 -7.0540332132647316499 -0.75310084453044900954 0.87458984575600340339;1.4997028121040432147 -0.14399172201141841043 0.32332524726409606064 -0.75755023092943629681 0.086629174846119691433 -0.11719490339415924995 0.65241722768752441475 0.38760128876186084046 0.94937327857680342547 0.35942614292755969974 -0.33327960805226641838 -0.74034079677196895641 -1.0584902877437569746 4.6511262555655763506 0.072834234330062710971 0.013229809253189967616 0.36564567684647925061 0.21173728886618647937 -1.3685042757057330753 -1.0382726950612224393 0.39789070882826438336 -0.6575274000858286616 0.20985682733513510989 -2.7785360497967648286 0.94039688179946978597;-1.6473533737060763738 -0.47392384350961752615 -5.6813059429350252216 0.92573407472854718492 1.3216439622387807784 3.5092599891497555653 0.26251773463346939064 -4.1801248688361178907 -1.1823507493913936184 0.85751517590626225029 -0.71599960585836663896 0.24537586153989743298 0.50950260470450081662 -5.393395437215835031 0.97344885612313902801 0.12856872895345902719 -0.45012474589750556264 0.0091495833079476337341 4.6581359469288932118 4.2415095972530929558 -0.83758500955175085867 0.04550492443495719741 -0.93246747103564897596 3.3059381666733305138 3.6429722838758720194;3.4341146858889457505 -0.96291276125108571371 0.87933071674259832839 0.26861819806380060616 0.34566668985873955089 -0.64096435828173292659 6.0182600914106645362 -0.92657309772427476346 1.880463476511606169 2.6238281385056008155 2.2412229658585838266 0.54454514567921696866 0.62262495598578582179 -1.5703998776477661181 1.8049231027915653147 -2.410314289272677879 0.29348444963483732995 0.030293455744043511213 5.2476827169660218431 3.1456474824811926361 -1.1505485905095489407 1.2098424592486136664 12.222216111895534141 1.8395572313699579681 -1.3986069382865076172;1.8366833349213136373 0.65732441854192913411 -0.11374704154446793614 4.0544039643812865847 1.4534162305940190318 0.81031755562951290894 2.8605411539124561138 -2.7084736730690037732 -1.1828224040691928121 0.43875133183702791362 -0.0030804428611132641039 0.049157540943975550074 -0.19979131370920685806 -0.71431911729065311611 0.48531816299967295292 0.41798372826827667748 1.833347781225245221 0.070318147895260363356 2.1329150886148227073 2.5979755402923774277 0.29410943460500521551 -1.1358933337840761979 -1.9055824652978796685 -0.77987760415668161418 -0.57863890975051890386];

% Layer 3
b3 = 0.70344390611730500673;
LW3_2 = [0.14835468726461478739 -3.2834434007269845957 0.2579444944177818333 -0.014078553568294020076 -0.77805675232787085971 0.032111793530993443246 0.028588545001123542161 -0.22703860681943852096 -0.033976946322479759099 -0.49108388002711278464 0.047870754401412196621 -0.73619715085491521656 0.115923750766401365 0.043755754437837079962 -2.8642102371781912318];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
