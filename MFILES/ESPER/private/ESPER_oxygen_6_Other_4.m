function [Y,Xf,Af] = ESPER_oxygen_6_Other_4(X,~,~)
%ESPER_OXYGEN_6_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_6_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.68665410208278643278;9.2267774266747490941;-2.1152941500111470674;0.64083212462475536153;7.5580600283320551469;3.1521460144686366256;1.9848048070362105388;0.49783164627386994328;-14.060430180474860151;0.13186588984025379712;1.3035304778905101308;0.010637926179657787584;0.44527879259146885271;0.25861623488850571384;1.9162474996042184738;0.59553351902833118192;-0.31890880978701885429;6.0159215080510097806;-6.5415467694010764887;-1.3375351540652931082;-1.6389329296618262433;0.84640803849680956716;-0.1436336971055197087;-1.0528699117896476167;5.197200037358135738;0.20238920135334648176;0.47446145917723436813;-2.2066558519501873192;-24.639668668641345306;0.96912701685064617241];
IW1_1 = [-0.088166533738396099529 -0.1308290814849301098 -0.44402073274432063421 0.068743133589630092684 -0.51473080486033817582 1.4154312862809346196 -0.10197714658288993539;-5.3448715980209193788 -0.35560581732733032023 -9.4645205492226800459 1.6422990573481748289 0.8468484155304099037 3.5596343895561433079 4.333998289969036577;-0.17752858148582353892 -0.065147726294332075625 -1.0719461597209942738 -0.011850996140974068283 -2.9880848751448256806 -1.0584272897081441478 -0.39673244096367576983;0.33972218101193435436 0.03684490709507973194 0.61004126815387904603 1.2746989582921728346 1.0570569848853350603 -0.28920797424967392697 1.4610930105635469012;-1.1208501617663872985 -1.2494913523783113263 -1.4388373173416342254 0.77406007407132881859 -6.9088718717284045567 3.0382272158601142387 -5.806994386104102901;0.69392150563349530579 -0.33046813167149297064 -1.6041913055130871957 -0.43687338890639354494 -2.6844310001174167546 3.2538925228177713045 0.43352500429582596642;0.29218639256612916055 -0.22111761801544058126 1.4966417223656891533 -0.10683495109021831637 6.0052317786114546294 -0.25725555562989255165 -0.99405364649101601859;0.53684627561554654207 -0.14423425244791804323 0.8359657335252023147 1.6067107292820561604 -0.69888681052383783143 -0.50099764866051643697 1.80125207466336823;-0.070612717227336765924 -0.29962721166033540188 -0.12664689526135880504 -13.554741078039130642 -0.16366649324765708551 1.2290372308040367066 -0.9538877331805465376;0.17551147299840622051 0.045627754545795456975 0.51972904994438162696 0.18849029729593125282 -2.515726361619530671 1.555606066374930041 0.66796815235101036912;-0.0025899809491996311946 0.063280971510024375259 0.11614715508821218948 0.076312117900313364283 -0.53191544048642180886 0.50569117656322382093 -0.73277404054985495474;0.21475288009587345517 0.5857810917843651044 -0.6744598621541542105 -1.1067836672656670149 3.695906446822916358 -1.4302093635465371602 0.1651036773372460964;-0.12019911464345911511 -0.74263474045178290428 1.1160785197798108737 0.37176618727697668954 0.96978419619077671499 1.1068119828831179952 0.91638813654132211806;-0.0056828307518712872781 -0.016558114872684378399 0.75679334222069216676 0.38080793488595748864 0.41915276911262666637 -0.38136311746834494762 0.22565205958987677448;-0.59777085268549379204 -0.15370794906918244793 -0.186371763907927257 -0.24551291917689480049 -8.6084742717976325821 3.2044918229056551517 -0.86855057032160032371;0.21549918987075281085 -0.32746738562232952097 -0.12364745431765394867 -0.029603486681182830664 2.0082811862688245697 1.1250422494827512221 0.16556797251077129407;-0.031432272390536850071 -0.074847889475700382644 -0.15017991104218419984 -0.16351851652672946824 -0.01426553068770580919 -0.041774119890310996983 0.1495360330823214956;0.050773489846921794622 0.19985445790651884534 -0.027487242258737294015 4.8800621626334663716 -1.0133168335341891098 -0.48724358907444731415 0.8804408997948227622;0.33212364050367060297 -0.057070937046671169068 -2.0630941213497191455 -0.79236224793326204274 -3.6948099125515194707 -4.5586841293205457859 1.1836256324895921832;-0.91706840982948190089 0.27522054846860360966 1.2202326517458403909 -0.048783201336674589244 -4.9647462042047179054 0.26471386330072949056 -0.87822966653034850726;-1.2799896618020305539 0.55104803432817350828 1.5378939912204403484 0.10608131510334176117 4.1836875004981548543 -1.3233513174986208938 -0.72491788378177457464;0.50081155256697018618 -0.65726604058621218574 1.235896403677553268 0.04420707753347229152 -2.7604857759507801518 0.38341665034317579108 0.49489252651048615261;0.095940095920825890774 0.21488048174818308311 0.15400145296244271975 0.2918190467702247437 -0.40176693449438238837 0.29050327865101505109 -0.28014409029773890136;-0.32147519787623635157 -0.25564840231326835251 -0.76580886313148077704 -1.24040534956271431 -1.7826149508982946923 0.20829463799453240558 -1.2657326214764261785;-0.28728810103798640974 0.010040760145696950301 2.1635451627666792973 0.43005998629801511779 0.90482503816524251228 3.4750141203921711686 -0.74825226330098559835;0.18406979886960489479 -0.44648231929242065963 -1.4040309721948338595 -0.40345068167672759607 -3.248179900155245825 0.98565607709127811553 0.20114368620640046825;-0.351012992730753981 -0.065051956427461032906 0.26052168836372313621 -0.83157611228579519924 -0.99308306682474589699 1.6645360395106454376 -0.64410644094190683262;-1.7300419864412008852 0.083971893737799924162 1.9851766032333451051 -1.4772239525612225197 -3.707955377194542379 -0.10972817668268859681 -0.03392277076132359237;-0.53568494310972480932 0.26636135527457205363 2.6548112570609716521 -23.514348989491264064 0.80488474161749401503 0.92224039931373191781 -0.36673854546880479965;-0.0077153156624169784081 0.069609029285461532233 -0.18894424308928189915 0.041883973201055073321 -1.3219212062544760666 0.093420785552188190248 -1.113416102242409611];

% Layer 2
b2 = [-1.0257468359501578092;-5.5050574233666145219;-0.85668166905885767548;-0.33272559243062743706;-4.3351856423915933192;8.0317241485669423895;1.368920456760519766;-3.3882424665958117416;-7.7469684205005062694;-2.5212301889953603329];
LW2_1 = [-1.3168690453086209224 -0.0087498506338184612457 2.2362908867527342416 0.67435783069218491192 -0.17051491267442026034 -0.11322591774766976869 0.96880375944933883048 -0.29524826574590734563 3.5178460984545401047 -3.4287765549953532762 4.0820411576144204346 -0.099444739539734955391 1.4962696663041805678 -1.7794127906845693676 1.8866728978997791 1.8205151762542648441 -5.1336356825911648727 6.6576161299674270211 -5.4897851837982223344 -0.053469364890572364246 -0.61332409208783700283 0.0037280896347418636394 2.6601253745163608855 0.83652503110541898135 -6.2853320675242416726 -1.8281393037202451346 -0.14275513531686850888 0.90744028157568512594 -1.36241661841326267 -7.0801960447144880462;-6.1154541701223026351 -1.1394333339523747828 4.9415577470173142061 11.657265223772238727 -1.4206639292837415223 0.98499764758205621273 2.1620448256602791126 -2.4760972160665528641 1.299611577922636485 2.2180561116213759476 7.4191926402320502731 -0.36396069926282997864 -0.066224681921989894673 -5.7259855459929438481 0.00026697288250037071785 0.93554115119343728146 -11.370516508753802043 1.8958782789140724567 6.3100939088639274033 1.509175847530308312 1.5349070304806495812 -1.0081817645406494499 -7.887627149666196047 5.2468136574564203656 8.1680077501814061236 1.1779724456269284882 2.3206902252215195759 -1.4568796722809076449 -0.33980349620134359112 -0.62040142492059635604;0.84759844589271005066 0.034721246914771249081 1.3263484638701361629 0.83977465008616092312 0.32231766142452089596 -0.40224685596271858579 0.51605480935688452515 -0.61006373304156003012 -0.15211852319245799947 0.88898143668679729945 -12.852776703669984926 0.83294182130949934173 0.38605973212500027669 -2.2841089930127598251 -0.5850492506391328229 -0.79495589337277139386 -17.209639743309885773 -0.3503680328174514913 0.88857246467405293089 0.3179968810982025107 -0.54654676503147114897 0.4213710879655612751 -6.1459671399970678962 0.30851031023488523219 1.4695128323160351336 -0.68781600477797300019 1.4235469442503154713 -0.13753386171932741044 -0.074447123765917583293 5.9344398682975860737;-2.3413013730022353975 -0.58403019941930212067 -3.4644253379635618906 4.9096206527413466247 -1.2359623342481056429 -0.51220477148690335412 -2.0452621181739272238 -1.4635172130785818467 -0.29886696469433909895 -0.19879044758581043695 -6.8303048914648565315 -0.58334640138392090947 -1.6243809498716692552 1.7831562964847804675 0.89338577253921236387 1.5854722147353565997 -2.2245082820970103477 -0.076820766703742063286 -0.52417718402562507585 -0.31806080136661046831 0.35317585645368015923 -0.16351509002878442112 0.46788613490253849747 2.1666200954161829451 -0.50068316759220321543 1.3110591761770624686 1.7195087403548572347 0.073035622188975440894 0.64924586444026055609 7.4011645093319380351;6.7542310452071179228 0.082897941616777173768 -4.8370711656360771968 -4.5295662417014375123 -0.78070618470919961318 -4.1917018588990044847 0.009705313863659656079 3.1345870591031390617 3.5909060735770990114 -2.1089696659369385756 -8.8572571208834638412 0.33412971278042186141 0.7402067141144291762 -4.1446201410640117757 -3.3407966596277445248 -1.304600872927107913 1.800004484584372122 6.4271442847194428794 -2.7025544666011187545 -1.1287080168314509443 -2.5469049433794994641 0.23911630188798407848 -0.7465823263241825325 -0.68607321777049889988 -2.0327316950841503029 -2.7941335061049521471 -0.41956722963092979439 0.73488359677952286297 -0.86019501349067817308 3.9753995526470884414;2.9276487727055942045 -0.26019550787890333154 2.0372157994457635866 -3.1042915989862445159 1.1363689321101009266 -0.30200214677213915726 0.33219350459336233206 0.55153993064743600527 -0.75098534344474388025 0.86424977971329075555 -6.2537013213275676193 -0.73790691778466088735 -1.6383729174898660208 2.5121235842769009672 -1.0288514863955522394 -0.27429756676753835887 -7.8416669838702430795 -3.2115247472382915106 0.71376414740880700371 0.34022642762321692045 0.95251668378019660466 -0.0066248521927432177381 -1.8787037578336760468 -1.423401013248987379 1.4896852028272329349 0.49426204724862232709 0.57502347334820813618 0.015117097575572942952 -1.5334194584253546534 -3.7090416303577833368;-3.7856760687217052563 1.131557055118766808 3.679752137390800204 -2.4490182845803878386 0.91292364237303191832 2.0848884506591587318 -0.87122747435384995107 2.3450698868032744393 -0.072194111786484035931 -0.26393043767281271217 0.011769153276807893527 -1.9060949170137404529 0.51994416076214822198 -1.381911684605131363 -1.110812035823545818 0.18423438884938092563 -6.3956323209062242441 0.26047081947791711487 7.1065032078818894945 -1.4592800018796108219 1.7482893320298849016 -1.0822936438514529911 0.25734678404900429571 -0.67349675868071601226 7.5242218848189219571 1.5389772807694748202 1.3337120955094121655 0.44402038093658419138 0.19568835378523416479 0.7478767680247170313;-0.091193868176582648655 -3.5892788648863214185 1.8786374799908371891 7.2929634404743062248 -0.58711460452674157917 2.2996033620071756332 -2.0093997758620285587 -4.2442234101955982339 0.0074690522284735346922 0.75039006982216149844 2.1365527694603594355 0.56730380701030402868 4.0494625581028200756 -4.8453360373313856257 -3.4824544313734584478 -2.1209869266750867034 -4.6410454402973559951 -1.1903815799896710903 4.209331624346632772 -1.1038584060017921917 2.2373234483938042594 2.357194822909150389 -5.8074117382968566403 2.2999374338127895889 8.0608623092564020141 0.71110563051960717917 0.12635864885298503379 -0.091277101212567782196 -0.24873539587933451989 6.5874044185808653395;-4.0149038161315271367 -1.4602024845428092092 -9.2090971041599996028 5.1702334298509367017 -1.9229728971643518243 -0.038382914220310204723 -3.4252730801803612515 -0.44323882133538211603 4.327208965912180183 3.3579675419899754907 -13.775868820167312734 -1.4155661031634367841 -1.088199377319976513 1.6144306080416896965 1.4983899137214955477 3.3844375741357426435 -1.3125238307724500508 10.224762104805758867 -0.47613362303176393064 -3.4249296455541680118 1.430031837978237963 -2.0578728270254567079 -9.0379781152761236029 4.0013055341086536387 -2.024847863029967332 0.95525212658886948791 2.5330368764572757101 -0.12149172177012794449 0.99689784083833132833 17.507405428486713106;-5.8456263395496161905 -0.73957353362875599689 4.8439064428893159331 6.1667000092108432696 -0.33121296967919977572 0.77903373856507740491 1.9720864474498105423 0.18910382298681979729 2.1323144145139143468 -1.6466234393975842654 2.8013521017307745353 0.5668054395017489977 2.4206923358213017217 -4.5641854900489615687 -0.11226864739474720634 2.0670744609599025488 -0.064975115992991563929 7.4597880311572160039 -3.6232520468010100956 -0.31704352935881408015 0.33533996683260230975 0.15926317010812143793 7.1221045635929893791 3.6619090380853904776 -2.3719644294319759403 -0.067554690533369488037 5.0078428158501298029 0.039528204739817537905 1.0661238443604088566 -0.038451459343965335713];

% Layer 3
b3 = 0.75671181898542350108;
LW3_2 = [0.11046494627113213893 0.11259274683303981124 0.78286143589362633399 0.3246693654480407587 0.12601539515843609984 -0.48637737252407781119 0.26803472870474331913 0.042805743602904067213 0.064889556452671609543 -0.093740198509525182735];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
