function [Y,Xf,Af] = ESPER_DIC_4_Other_2(X,~,~)
%ESPER_DIC_4_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_4_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.5192313854928674033;-7.4680872356675402912;-6.5188157844072236458;-0.36750429674825668691;-2.1467618359151607876;6.7386338957888156642;0.33225436377791517373;0.65078272936081393851;6.035812819530609552;-0.078224529230932329793;-0.34744029414749788565;-3.0987668634318938921;0.026832701559695967125;-1.9216477808596539312;0.58918144880941125674;-0.33466091139475129257;4.1597901389131850536;-0.50390461783079476543;2.0327761955944154693;-0.4479237200017981424];
IW1_1 = [-1.5602954001912878734 0.14188799457118989045 2.3865476993224055136 -2.3612359336190942294 0.66685243537038307871 -2.5813363111087972435 -2.7253751409308346609;-0.15428045827653982802 0.054208464664079886175 0.20982829442884509685 -4.2970959094025715785 -0.5791968943337929554 0.61253477023310498595 -3.5343468476372974507;0.57003458133364137694 -0.45324822887809307348 1.696625318925291781 -6.3586149805874354612 0.45996369769064193722 -0.22780997409728892533 0.8107287228742262597;0.038368033204364541955 0.00028164499163132788919 -0.021154691335193171603 0.026151378367477402104 -0.53886805183040009659 0.40667036034598907923 -0.51535415522860317239;-0.010752262341970823464 -0.6764703106114930975 0.084298978191669274307 -0.75627640831119324893 1.6216374084483213824 -0.18779274269918772022 0.11898751346448223354;-0.16242949174391674294 0.084745623946199957754 -0.45637704568171949537 -0.22136033932463822227 -11.807697843001882632 3.8700261255198387111 -0.43953715184301433982;-0.39690252539793985376 0.25544851092255532743 1.4049362069873765346 0.10011721692689373731 0.7789832999409385117 0.77765208483370207304 1.1362348714274124184;0.091145726816146882543 -0.13835675329671839884 0.48288287417606789997 0.22743291567894563521 0.93371144387169313639 1.4904573932227833666 1.1805438628241864407;-0.15978589893582495485 0.089014511827457898363 -0.82192997742681217499 5.9275534414921695614 -0.20588371546533790202 0.089936138320091230103 -0.7733920798100295535;0.50130873100442319146 -0.19024736487024127007 -0.69640062909404942815 -0.11986848157898259692 -1.4480402254929320982 -0.6928968890537173797 -0.80583415212297826447;-0.17559968080934257317 -0.11674515622493902844 1.06729807377995356 0.32252593695536418972 0.85586860755111049404 0.32949508726973586459 -0.34600228775964997352;-1.2708766747629696159 0.68297385174450742085 9.7640917232882973309 -0.63060941112863311275 0.5219410223123518433 -1.2892943176072095834 1.1891790520469633918;0.042189719696696714735 0.53496822962024981329 -6.1208531343010337267 1.8319091060342918009 -1.4121325738516239401 1.5072014020345387841 -1.1789930427059291951;0.46393663426017761608 0.25368606450007474828 0.015544844394984803915 0.0049156000009230619782 4.5231335930392342348 -2.4312444225334810533 0.1717548851566222945;0.22278662825951214832 0.63536043302856459736 -1.218448543579569554 0.5131868620054031993 0.068871683201010502895 -1.4372829921678862419 0.061220611603759134134;-0.0015458991305486015442 -0.16875895263336046503 2.4354749058900653225 -0.14029833468694952181 -0.51513522511146780936 -1.0167675691058934984 0.50361228516799239063;0.14942082789232763451 -0.21291587132798897586 2.0802369974863319513 -1.5346459307642019709 6.5872232109777435483 5.4225872622228541431 -0.19895689197077062738;-0.019071146335946538575 0.017349812094333991186 -0.17616231121927358738 0.043500055208374514837 -0.46949685406150348799 -1.1189580262503289187 0.82110466103790269443;0.8569251309056071797 0.71801471927937132733 -2.2165428789756016492 0.49239822909316149913 0.10884555771651689693 -1.2375247215363680553 0.51889588579704593041;-0.16697675717619414604 -0.69492105910386103851 0.88227921743958526157 -0.89275694559167495523 -0.38664215741354257538 1.4306539861975020589 0.70232037312152550967];

% Layer 2
b2 = [-7.7740089178097431244;0.82727332755760574212;-1.3947163640485267244;6.1505997886645742412;2.4946172329592473105;2.4999903905032105911;3.893676582889712634;1.068132405548073427;1.9159380523954827602;5.0389353684119253529;-3.3922147733663763347;2.6319577281286421488;-0.32694857471790034209;6.3082102838677842627;-0.59602547264453387132;-1.8771588858697227931;-3.2054167162825137893;7.887075951705246446;-2.9859177312372948698;-0.4807178372116936993];
LW2_1 = [-5.9681767524407449699 0.3142987845098486055 -2.872680260177534084 -4.9980662204183463615 -9.5187644457546962684 -0.035227564336815703205 -0.81091627519912390376 -0.22157109069276409441 -5.108408699809348974 2.1030534758278554008 2.5093596378789970736 0.56459538476375592531 -5.85904732629928926 0.31992525667638893605 -4.3342161772416041288 -1.3053001707640350393 -0.14066944095836270145 0.67831199213309334439 1.3331106627257018893 -0.66576962230813163668;-0.10981996730245287275 1.9561202682786740237 -5.7495170678809364162 -3.1673604840809290728 2.0289030455695060695 -0.77867524717363301168 1.8437241109318596166 2.6823976965611824319 -3.057281097155172489 0.37339186059168122389 -6.3921166918273817359 0.93943832385528269757 -0.30018405189426788926 -1.279510797509068265 4.9339410580419578167 -1.3659468153210370112 -1.1861382630374581737 -3.7355938512047974775 -1.8067487473564840528 3.6773240764944552517;2.2585081792647589971 0.063736275196833697132 2.4540173848442243809 -0.64416954551772209747 1.3339681468833841649 -0.99521827529887063601 -0.49502889498729857332 -0.31531085326244107092 3.7043231873716839786 -0.78913315316926002652 -2.2345343987924732865 0.7490424306265286436 -0.36605226296246756723 -0.14440774956638896542 -1.9440892936901255084 0.090711780323233223711 -0.69538012345912569856 -1.5164889326525801128 0.2946055794486995838 -1.3582012393582898468;1.9498280698761594198 -0.70085230992118408011 -6.9062011858437637457 11.05871639226875125 1.7903893532841546055 1.6814170070450173977 -2.055955550851481739 -2.1873563405904343782 -7.6775166648453581075 -1.2014988647853843684 2.5674556236922989605 0.3144670451098606212 0.17036690716873387208 0.30732766934102384582 -3.5730384345883376973 2.6043143757574882535 -0.13639237031865975025 6.6020906037980777725 -0.36063120555709576864 -4.1993729817169818119;-0.91191782397148346551 0.35912676971548213034 -1.7580269483165098521 2.4870132684595294137 0.52341076732568003749 0.93931265463140622973 1.5857873110398532646 0.1255929788175020323 -2.2140301985403523233 1.600280867131373963 0.36112195596532808972 -0.189660822775980481 0.15005184270363322585 0.10685504134669070175 -1.3820353427117095801 0.020195677345643512496 -0.20460374473978837351 1.0955434373538857074 -0.58012995819145962706 -2.2365971601528706891;-1.7579088405054477118 0.22251733780910423754 3.0742370982473681273 -0.60020338271465312197 1.5062818024640041159 -0.6716612697268080634 -0.70807243773509642715 -0.096379085944171355438 4.4281584553137687266 -0.91163763967734956495 -2.3708823547293835787 0.79706216293695986153 -0.37467352517550128743 -0.1382325722438890736 -1.9556986213028992871 0.21749541693182677937 -0.72575432528528971421 -1.5542021071413361089 0.20234919232146547641 -1.6806055984180594542;1.4273112436105979128 1.0596535344961643954 2.3957530069808647966 11.075888754164997962 -1.1640013641734809902 -1.9669048227358820746 -5.6973855871491734248 0.5636825406611932765 3.0972935800804326512 -7.4459738260811709765 -2.519862949645027772 1.1886121682453389958 -0.37350279864843188848 0.63378986986696594919 8.3439253207433772275 0.30914341812741763516 0.10864021969392823053 -1.4091750955324060524 -1.8529520513628789935 4.6137021531248958439;2.8899244288216618948 -1.983375618972077703 0.065709675156103181104 3.4779455909017187309 -2.1626740969411017979 -1.177710696659348466 -7.522759430386006585 -2.2347795384411832664 1.5696080894116222204 -7.42176581278278924 1.9826572056489617513 0.94224242329865182111 -0.084358954892350970778 -0.99586702298392504318 1.3679312204250457796 -0.15325287222850386692 0.62263797812972376811 4.2911383488401311226 -0.98038272224065037275 5.8211999502787623584;-1.2263059125237520952 1.0561080086546685841 2.5855031839762663282 -3.796014237429255811 -0.79949984499726500786 -2.005336798919611585 -0.78288153973190266477 0.8363743274478991907 3.2781164756341265587 0.095685765302536640586 -0.98940100412865972235 0.16494246255304129134 -0.93062154872502800274 -0.4198337872253084524 2.9879165563548921725 -0.929120587171837653 -0.55558216829092044176 -2.8820946958726390008 -0.38174916535355041258 3.1360222484438708968;-1.0179888914220520668 3.2859617454156517802 1.1070070148236395013 0.64967047405933076032 5.8465517483521836084 3.1207367544029360751 3.5428267559186084057 6.6651528117438711973 3.9766000740107072531 -0.57645603526071687028 -8.1213399225701792261 -1.5599123577482898462 4.7022520469226734008 -1.4111060119521126044 -6.2112011301175868994 4.8478880084525179939 -1.3121716421943607767 -5.5089847836309751017 4.2705077992334103953 -4.0389042978239881876;0.39873738568071975807 0.32671225292039701715 -0.66804898892688757694 -3.1726405181874883787 -0.83433701827163697651 -0.46191497585449114993 -1.0468267535650581657 -1.9608383445326029726 -1.5538679998896527401 -1.9395154848690108196 2.4910011986696765085 -0.3869426167882151768 0.87789505625804953315 1.742250356533336042 -0.28937708900094183395 1.0429484228169914051 0.41778048360321051735 -0.66484235981304695695 2.7489643241908403581 2.7261749858954082981;0.67271524866435006285 0.43244879637555172502 0.33793024968226198501 2.6133248825303847518 1.2677576377365562532 -0.29838807854897664296 1.4079560580904355582 1.2476081132582057531 0.2474475388171386292 0.23123621903445110148 -3.1000268774142938355 -0.25180136080115911312 -0.16350677649858558205 1.270893468579352259 3.8768732505528742394 0.60162676909818946225 -1.2093464849356301283 -1.3969344569030577308 0.42406698485382254837 3.9445781789663794115;0.25879020138749309066 -0.49911957767155706867 0.40905855585472927771 4.4978362152254085515 0.21923833961524552549 1.5404544785351208525 -1.7764104023980176184 0.61206195939090124458 0.33271229436984001149 -2.1469058513859922144 -0.98011962881131642344 0.084838528276078378765 0.21396631070645066863 0.12361684283297771914 1.2257939449848356261 0.90269225702278133028 0.50005646475757814517 1.2316927225146294678 -1.1488323400613120739 -1.1002286654422646084;0.65123867970527204996 4.2030963381614814267 -5.0111856760561668267 -2.917281066085986474 2.8425521523043091321 -0.31122418042639310443 -4.2964736427942460395 1.8128684935726104843 -9.6371722556609586974 -4.0790893518193653833 -4.1728296595349654297 2.9645690350739619667 1.8005534375791509838 1.4902044728019872011 -1.6884148928546656165 -0.44646328269542001621 -0.59450394420842578302 0.65406914522393078126 0.87889484858234101505 0.32466713928285340085;0.20658284730461545786 6.554403946382164392 1.2707681926263734162 -4.000348498328184732 2.3484538154078311578 -9.7855831270607414041 -4.8268131438027861435 -2.1121208569724863047 12.627259016828435989 -3.6585855125278494704 3.4531690756762483119 -1.0368170123085094225 -0.94511101036824507471 0.46845036184816457592 0.87785051065629304823 -1.4216018604841031969 0.38828815432782143313 -2.4470412911529346722 -1.7654620558156703947 -2.0698018913490341397;-0.36070432629938975477 1.4985732543409440165 4.6988176657253921675 -12.319555742707423818 -2.34826117343347196 -6.4259732444286372655 1.9966649548686092874 2.124325778451318314 10.225270222499887041 -0.49972935854397176891 -9.2499061328176033214 -1.6378348868941889904 -1.3696433567941019849 -0.94893041068120898007 -0.68843896482459843167 2.8973775824450465066 -0.99379715244424460252 -5.5471237495433163289 -0.62363236748748085425 -0.27623844486589549385;-5.0632148183341234571 1.3523548227169241986 0.16097957617842179046 -2.0178995554352709974 -0.35298318299119924024 -1.1563118554602018762 5.1899272806397798163 -0.20137584501357991273 -0.72669966525135643032 7.518337666154539356 5.4516937920506354232 -0.25618475586125610821 0.12095523852830421252 -1.0947458124809843483 1.953463270682498587 -3.3572402476952252215 4.8106422214070265753 -1.6925010202353556465 -0.28532089200252030992 0.27667332571478037151;2.3009620966621904259 -1.1115800187167665936 -0.26485153867764077429 3.3467441297759532581 8.9731931547127921078 -0.94632744982894589914 0.68105051708269814803 -2.7887695540093595525 0.84463024182703672071 0.79054181703425430161 4.3846337595324502701 0.86368674285482205377 0.54241657289276778986 -1.2827429100806211348 1.2684782409403596581 -3.1665629890687529979 1.4713780041868069759 6.6726957523158567653 0.63648248819080277539 1.4563794937464966672;-2.4717219985971059515 -1.196270012512740788 -6.7518286089117793836 -11.803790447154250742 0.32367250864956292888 -0.38239605193449743847 7.2854442564466843635 -0.19277050653269592329 -6.6209004470862558023 5.3379281791627111176 -0.71885850000374396096 -0.06371455666378179894 -0.25430763372549630708 0.37824731255389892892 -1.4940181452596967837 -2.7803021552692563922 -1.1547419360359203466 -5.9960674667301052665 0.61424357229490000876 1.172476559593369938;0.60099287579877380683 -1.936014189522631046 -0.38573606449833375276 -4.9419946058336439165 -2.416535657211839272 -0.33620332667555152817 6.0302986222083116985 -1.0404243695059620656 -1.8883494782750782637 4.0255510428067493578 1.2415621245394115046 1.5787835243084931136 0.59974103619749941085 -2.4760603994728596078 -1.4355194927177221675 -1.1941048191091609976 -0.59060050367628824652 0.74956410975708354094 0.12376626690340911119 -1.8417954470260984312];

% Layer 3
b3 = 0.088896725087579064883;
LW3_2 = [0.13081953698280859855 0.055146130991263052346 -2.0417685164282257659 0.11027607784889464915 -0.4816048302939084369 1.7912082194266765178 0.046342167854972325658 -0.089452923942147044567 -0.28665090574973872695 -0.021407058044924074519 -0.17162860211304781233 0.10002284439585305831 -0.31370875518574414809 -0.046256375857354772863 -0.029877952981442138652 0.17846176517123851779 -0.1930985307252915395 0.085137243347110785896 0.067810572351299960858 0.078017745088373682827];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
