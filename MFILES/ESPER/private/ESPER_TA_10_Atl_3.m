function [Y,Xf,Af] = ESPER_TA_10_Atl_3(X,~,~)
%ESPER_TA_10_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_10_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0479365703301392;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9109249564169883406;-2.8015880663815315721;2.5222317910597955581;-1.7154754380564172234;1.1405481174521105991;1.9720300464214000069;1.5864135411845492474;-0.7492287556215819766;1.7382408164565699149;-0.43246708250819815289;0.64142535390201405043;1.439284697026233184;1.0216721132238029135;0.22785420040660797625;0.554190133515272354;0.4131438018145234814;-1.1507234201951155317;1.3370861639369564511;-1.7056325297998371493;0.9621020908335954358;0.60917538930542958209;-1.0348284587260312417;-1.6218964816640983884;-0.96957869149261566299;2.3757449088139526161];
IW1_1 = [-1.7197849150626647319 1.6020097044657479746 -4.2551049628962642757 -0.041074007605122225817 -1.2583655043153036956 -0.42341377253307810324 -1.3839134008209197368;1.5411371677234642075 0.9398317115659801102 2.3788108167437913565 -0.070608541555036513637 0.16696281985921493374 0.94033613395769743981 0.39448335404409212712;-0.62803550172036481936 -0.76542340182571333429 -0.69127819026569758964 -0.84955707605379049419 1.1134815470634322754 -0.028946986234148167072 -0.3234236456267440829;0.005415420264416591703 1.8303934586712184984 -0.77373892579496539312 -0.77264069473314422876 -1.3679441649869978903 -0.23944984631267882125 -0.155991818271345839;1.1287490872285126375 -0.88582747102962999808 0.47480383534911879684 0.019131486367315344438 -3.1244367020089738318 -0.13963629662344581583 -0.1794683635891956841;0.75018633781826526974 0.69375795477164992064 -0.28417587684242279211 -0.14786043201207352271 -3.0188765827361163652 -0.19889429079671547274 -0.1658238041196219148;0.38936719333252700626 1.4136714850901457297 1.4918092767464277149 0.044240111722854261189 0.14048921616910206578 -0.098352370257855287194 -0.052281360901100804028;0.40155999997606778296 -1.6088994524797732844 0.91357126971272639704 0.048043752122219757217 0.52675326229126373523 0.38515383809404202253 -0.40856647264917422824;-1.1616154479640898867 -0.96870682029538102142 -2.6930327571041812185 0.047159140661460589861 -0.12624457239221659188 -0.032468247398795030412 -0.75848713171978543457;2.124330887457956063 -0.23781494244797307669 1.1586907994967805546 -0.65672991072106678967 -1.4296522179522073159 -0.38886777330362326532 -0.7428574413221316064;-1.3067254548041298268 0.35686047596791153902 -1.4414450080378222729 -0.049220552915099906321 -0.60003498637194152554 -0.22476403224825283744 0.30616382898779076482;-1.9021635363221118808 -2.6232850132048621816 -1.7663365952502092515 0.21787609542440758426 1.172288643930637031 0.13424181722969755204 -0.46772659005386191255;-0.81670405471435347788 -1.8996047257773975847 -0.73760694843501239948 -0.12701306271875933973 -2.3813089676963143937 -0.29935145563615267461 0.053126661652264282887;-1.6533524468168021571 0.33693060559117532504 -2.1900680769900899847 -0.054717648456903945908 -0.28754109277138251155 -0.1726405663228694487 0.15357640289432991643;-0.57614697296342809452 0.0065753192815178702554 -2.2159069118553462729 -0.093844420444104847956 -2.0687066332652221945 -1.149667251574339577 0.99573854923409543805;0.063462485277231972525 -0.57960940064683053041 -0.78141819649483235111 -0.13702308107024802064 -1.7660428225148150361 -0.54567459240778537488 0.47297172010338833781;0.43647475114451234068 -0.62140723978129508431 1.1202555886893081905 0.065146794574588495763 -1.1346954828043569474 -0.45368965734708294191 0.22896958779853798793;0.85092374152494765216 -0.032103800474577753876 -0.1093378433028899116 -0.21049177620141409917 -0.77975284806772338086 0.70318559228582089293 0.44047636998056771684;-1.7987333728832719526 1.0803243894490224264 2.2082563583919210259 0.19125821581529861559 -1.4307276522995202583 0.076528944265159104532 1.2625792215612805514;-0.72067501939821931867 -0.98587023771789428217 1.5006514788206544164 -0.32603195784017707792 1.3315431875723737765 1.0709795478326864515 0.54684656634943318299;-0.47894182637832155569 -0.67497354554217314782 -2.556175202891385112 0.034845783533165468338 -0.10836838602989157243 0.20126178669945304911 -0.62147919591502376324;-2.110147112529687341 1.4507573920329719375 -2.2348158567233893379 -0.36082422035760869372 0.076270856299710199089 0.10216903320970514846 0.16399272209756585172;-1.5276083293614923786 -1.111213392661410948 -1.7718390807210255833 -0.087872362222649408325 1.1074720467178158501 -0.45495350052196809054 0.9647094102743245525;-1.1388294131228053896 0.22010263403367777424 -1.5180655861739125179 0.58069854688089417305 -2.9281987075829598588 0.55647505600523750058 -0.53020506962358082692;2.1912433065673271315 -1.3972321866521417721 0.87185028178972689972 -0.73824029751873454508 1.9023450166918478565 0.24540544667691860381 2.4854175203552237861];

% Layer 2
b2 = [1.5508020496753598394;-0.83266459647197110794;1.3167559088115301513;0.53232268226685774959;-0.87696564462173542953;-0.058528485065562872725;-0.78786741776160318373;0.061489338852922327538;-0.13757988145934496593;-0.055897128992747249776;-0.70940646794143114029;0.34534877615418690944;-1.2977043984141383159;1.2192246960349981677;0.010471414334374318234];
LW2_1 = [0.54438506862295599209 -0.75170620470375693056 0.59210400773031623967 0.49184349854412073855 -1.0735638189922389607 0.34039406057667892513 -0.42877875330384446206 0.054916203620566275689 -0.08317522834728170722 0.75527253904543123486 -0.51228633103327592124 0.3274575016019817264 0.91618394007762982145 0.17020641307510891993 0.65302113311108311855 0.52379975739300754789 -0.94485120465550886948 -0.10439717076114130023 -0.24102585185149830171 -0.030941990584823816923 -0.96883063054679907644 -0.15498793592626991522 0.61757447232597517672 0.59299768037629807527 0.57141087836194937033;-0.081986322157245647424 -0.074315060685725853329 0.034384815029236695527 -0.40234380151186188712 0.48205989519401792887 0.12402763431599778121 -0.038662943338304403551 -0.53977812591096741013 0.47906653245051794565 0.19523617584231062194 0.99102040540747571296 1.2731131004362596926 -0.16615789251005153027 -1.0721725340349359534 -1.9898990276393919707 1.0967878195217375392 0.44951511748864880769 0.69486687816181857968 -0.58008554754179797452 -1.4522941241065294715 -0.45794314178233019863 0.73101014209008874367 1.4840465444667636508 -0.23342491874367721216 0.12439017338886561304;0.09537388862928050659 0.91117440141129812936 -0.61604962934289919652 0.99312942483119526216 -0.51619552640523291842 -0.028646725902933285052 0.32841566885625006478 0.65652224997481756219 -1.0406738516016198481 -0.024075833110545653837 0.46761769510943279604 -0.046705317777937203905 -0.05416170090853955621 0.80927474201859217473 1.8025282442399437333 -1.1340985706534538746 2.356949280444780026 -0.17281432569836494006 -0.85215215214209882877 1.5616545097913099305 0.85188207005754990053 -1.3531582739644336666 -1.3098756838384486567 -0.37073358575854514774 -0.01096429532814762603;-1.3786566011755518879 0.11403338118032572968 -0.06213747188461082871 -0.82762826949820667011 -0.46673408197912952255 -0.29066308815233715679 -0.78406911063585449373 -1.5556805520133090148 2.1270548027011511039 0.17209809697831815467 -1.6517451511978500367 -0.70243242241163417194 0.26576498807856990814 0.73330888310737274427 -0.043790542276575250558 -0.48291759453076427144 0.21771711335251503483 -0.63213511802815791629 1.0489109713302058324 0.38109464886936161854 0.20745080855136185938 -0.55051051181708710036 -0.13024472187534633094 -1.0940943764009722905 1.0765610252187958196;0.40540383183447908921 -0.82890082779068408048 -0.8564802807968519005 0.096748376519923587336 1.0838419199723234865 -0.59360292580749085545 0.17050338353891186793 0.18836735231962764558 -0.66290664164188450869 0.17879087065238571941 0.66006505564633533023 -1.4931953859581865718 0.31954010135163130046 0.2518035884227401433 -0.51763939056153951412 -0.67961738771891566646 -1.4304847411636087973 -0.27487886323636218089 -1.8281662416777397784 -0.97538153708171260181 0.068306877894368886461 -0.57612496350333330941 0.44278740442684860756 -0.12279336031927322315 -0.31032783943273078986;1.9137359590829656764 -0.34532219056945684388 0.21509774781171436819 0.75358157701556771624 1.6256386751258857792 -2.6094708078606081436 0.8092491263411198954 -0.10991261987960124213 -0.27975847415194693424 0.49092228999842724146 0.95589817927967102307 -1.6502549186024646488 -1.4775694329133446381 1.3155947583355593888 0.4720605909024034319 1.2422071537219603332 0.13267714698915236693 1.7403432866605619278 0.10975097729499078136 1.0367590833341431278 0.56374720069811534717 -0.15135526654930578361 -0.66824062770803016598 2.0141464659357857236 0.56059635820283182372;0.44071286738441700637 -0.45137102351902674835 -0.51721536239988519235 1.9342158213771118991 -0.1032545853392240337 -1.8326348069994820023 0.33864039237904469681 -0.14109454024388851101 -0.26816730298156843393 -0.3795732359864446015 0.8845505739258708866 1.5934269935140215058 -0.079169047294655542357 0.16509585861106446103 0.16549967429156467458 -0.67708263086184006241 0.33090467387437699776 -0.58060546753536446118 -0.32803429316340260158 1.107252210813046478 1.1752386121868207969 1.1045413947442461744 -0.53263638057735918085 -0.0067094968490152197965 0.69407115270744279556;-0.72279850745279794477 0.58768691460549005168 -0.51889108672822814583 0.92677217348452656243 0.93081161948137491891 -1.0025240157738675162 0.68360959185536329663 -0.60858678012710609728 0.84132486563418185099 0.24982010868349699417 0.29749565667726157736 1.3115620878310305653 1.3012332532715051858 -0.067454028734406479284 -0.90448695090701636268 -1.2626580386014805146 1.5438608965878857227 1.5866139305317079611 0.025361146684503791532 -0.54760632896341665532 0.5339102538337699988 -0.67482177397198128688 0.28854230376878181596 -0.032616935900620473709 -0.11736631075010534042;-0.27450276499209796954 0.12682021955239050626 -0.025156303721770308102 0.075971913893268683271 -0.13124886014695119618 0.181806573939033711 -0.32421187264614276247 0.5451913609899848856 0.043835135553250713369 0.085513043971984670222 0.22563231315433410207 -1.1685806520795178898 0.46283136801896829216 -0.51776228277520075505 -0.58665959503611020409 0.21849676959139546772 -0.2283927509946137302 -0.15077825081192020029 -0.58614652559819058197 0.65170344461702611749 -1.518032100508195148 0.81998002680882986493 -0.3111365696124998026 -0.18580779877421740864 -0.31056859626808308583;-0.32520656504794420716 0.53914848234882861711 -0.42264821594920476411 0.40638165885388316534 -0.4045350060814411064 1.2067946399100271115 0.13880991818424365247 -0.4163599314788050676 0.43028492501401349735 -0.34873984503698240989 -0.81885643995537860107 0.1420180673409831007 0.39060233951623091198 -0.33274746466432447711 -0.18522804674030046712 -1.4406739283582332689 -2.0307173194879677425 0.45171845027657075988 -1.3830840645195809913 -0.5057179274324064 -1.2314739068230291519 0.32484037796175718738 1.3481214240159915541 0.84002183941073738094 -0.041706916104939789625;0.27912216581276511063 -1.1702585474757243311 0.10185069645725658427 -1.1736911154323237394 0.29182464673631008933 1.8838873997140748173 -0.55628352873484965269 0.51093769396516386383 -0.39136886478140647805 -0.55787388121946468456 -0.24162111105997433058 -0.0014551494281648167349 0.28674614328306108346 -0.51191382636949789298 -0.14591197931249533237 -0.170442123223963099 -0.26839055404639988733 0.087073219099981419289 -0.14814407609421714751 -0.95193946750944480328 0.19101922520767167235 0.86989680314382533677 -0.18754106879036422373 0.48240483759000035713 -0.053410054018593194902;0.19258639610344788218 -0.85497239553281179081 -0.096168946190008763875 -0.16599813820327949387 -0.86349968927853948397 1.2919155295952648999 0.094818444797575202054 0.90070188935326001012 0.14987865561184884888 0.29568270688694314741 -0.60458880778852308602 0.054753589960595247521 -1.1594526513574878734 0.14677171480268580428 0.98401246626559724096 0.6547049947986576246 1.6946140488092862331 0.78658842771469406063 0.44409728911112911209 0.374330129743065676 1.4096189895312998264 -1.444193430959902269 0.23633060659415952576 0.43560032109401591871 0.94462275463478184712;-0.48414684637542854118 0.015443975158367857434 0.10160628156862837324 -0.13645928214363153841 0.24450696311538516747 -0.15885374923894649002 -0.44618595546483208469 -0.77518296194154756584 -1.4886063568153635739 1.0425106185021459915 -0.38837673468695255163 0.12211397696924938816 -0.072332337716625727531 -0.4165573766128509714 0.18419148901066850765 -0.1805977718474756355 0.10292897101940257087 -0.6588179440928403352 0.013421124589878555278 -0.51489657853696801926 -0.16995281814344606608 0.062838812532593685267 0.45915747514746119151 0.19537228437749681875 0.58469692029264330735;0.19987306250921277329 0.0131779121643907874 0.1202288103762236271 0.098029213199645276466 0.029199856759069834494 -0.24768181654414916926 0.03855241146118448814 0.72007455100891182287 -1.0331484025801549453 0.091058710231378070521 0.39582369656274168923 -0.30924454572454546097 0.23483634042182557899 0.22777083561999764139 -0.44283968198302375852 0.40768171248047851973 0.6924322785980516759 -0.77226109548528976134 -0.42014982724192451169 -0.56159848562187753007 0.73150095926640534838 -0.83609195804467184576 -0.19419732058723934709 0.32237419452727333891 -0.22067212155927856676;0.14094603547768491669 -0.042160842841592056918 -1.4474807971068406331 0.1907342200955753353 1.021732478266978994 -0.490898599502783195 1.5670929241319195846 1.0834810970645700756 -0.65984202309338668702 -0.034209036498637844514 0.77914046525422242517 -1.6670958082636591069 -0.13195020984894942351 0.8284690878174320039 -0.52410742263084475479 0.66974892563592358652 -0.13192436314849428913 -0.093039337566086302567 -2.0307588910092309042 1.2902279728631478317 -0.72299077430451075266 -0.08731739199727373002 -0.1414844814020874697 0.99287892299160673826 -0.53295560630699900795];

% Layer 3
b3 = -1.0737383700561773381;
LW3_2 = [0.20464362982847028594 -0.45741434243760042966 -0.58254999601364021444 1.1983261512140337413 -0.37478545524061473992 0.21850530607519808024 -0.04757468189780054979 -0.066896858726804925288 -0.27346632788324892749 0.25317165936519386849 -0.12435713483399211954 0.26517474725721434936 -0.22070626778397925416 0.54062247488722592337 0.51210896708308351055];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
