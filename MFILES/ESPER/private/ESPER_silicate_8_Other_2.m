function [Y,Xf,Af] = ESPER_silicate_8_Other_2(X,~,~)
%ESPER_SILICATE_8_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_8_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1246340195739341628;3.572746790019219354;-6.4913291288136845125;3.5435660552075511909;3.098676420509645979;-1.7638702970996469332;3.2773714650234406776;0.22211895706851320087;-1.2552728184825592272;-0.4645169718486542032;-0.8739273626427398467;2.935627856279013681;-1.1873195889335983466;-1.1341424448181807172;0.73198467599853389576;-2.3626939694948374537;3.132216911724410302;-2.2739936993160996259;-1.6118639282210334152;-0.66238453573813149688];
IW1_1 = [0.20951606764181457399 -0.15472443267002694567 1.5453712641068388933 0.55845722062074931724 -1.1770246350739168584 -0.93353727924284168882;-0.4293571281796346728 0.067903746348188728787 1.8335000609931246807 0.023345497040658923921 -1.4813301567925469815 2.3356069979789535473;1.4483985015045532929 0.93198344709840708067 2.9494869195697073216 -4.254652352818521166 -0.80107833680744067184 -0.85044544983765302248;1.0932629178604142961 -0.30169478187342546605 -2.4408255590529126522 0.14082528995984974762 -2.0708372921414142098 1.2078701753093814553;-2.7715157550330373759 -1.8520149386199982189 -1.4405772514134767004 2.2145991693134194911 -1.3011337558300823947 0.46813350828631883349;-0.6937126468976891891 0.26440317415501940479 -2.9139722952408702028 -0.66743450906795065425 0.76583958254219108852 -1.6566077179733862401;0.2745763827007336455 0.24183497964674149916 -0.77393293992381817503 -0.53776700990144954417 -6.9280939105838594827 2.834876540230182318;0.18535503710543943523 0.041702323776341990169 -1.68628603731191129 -0.20552211268229148011 0.82174747356699595624 0.590269178783464743;1.4264849361087563739 -0.42104200003786684814 -2.1087362430410894198 -0.12120454722079396226 -1.1154138107974245209 0.68388526915840752718;0.073376104645605927379 -1.5337040384381102065 1.1292123169971710617 -0.093543410410511493303 -0.62256638947027254094 -0.091529882011076313386;0.98079862348831026164 -0.53219862652750682397 -0.37438615398359453845 0.47600459674618228467 1.0495612369500559868 -0.88793005665376301128;0.16341384770799335935 0.025669368888781018967 -0.09279210751706951088 -0.10094839063789820544 -0.92218688113581104293 3.1645320453372951519;0.1241548837112275705 -0.15390543611626214537 0.88996280689075824011 0.16315829616442939498 3.4532779936682675981 -2.1033870256677333899;0.021346556756668359084 0.21052525173605191045 -0.61976049886344108941 0.59102901492671311434 5.2809339796782541754 -3.846198128742615463;-0.81994779710772047743 0.41757867065875792223 -0.17997183700845850729 -0.32473837116098058786 -0.59415979988692446678 1.224709327479810872;1.1645201032345113834 1.5171961660954766948 0.52330707718743785239 0.67606513997778194813 3.4967753708123012757 -3.9708223935722273268;0.037429661501549693625 -0.36782891186233185321 1.8156695648748548688 -0.22516015397692507038 -3.2610327428978327369 2.3411212762566124823;-0.5776191741245503275 0.01506161873208751098 -1.0551861958045039014 0.44278275398975880384 1.845592514352243807 -0.91162027664459588383;-0.40104212232734487431 0.24338005502735363117 -0.67009438842830870708 -0.21709885012146998284 2.2695815652928414963 -1.8922645828612505436;-0.22049488560629962319 -1.0569318602877508795 0.35278039868177180072 0.049894817914973840778 -0.60161255896416410138 0.13677890070200368622];

% Layer 2
b2 = [-4.3887738297640952467;-3.5421059112286070736;5.2131301000489429498;-10.812328297171672986;-3.0797718220223391228;3.2942010093474740628;-0.97196866130862236144;-2.9082188775948525361;-1.7598614649505681662;-0.55097381413728396815;1.1005632745460975919;-1.0103325569497711989;-0.42877277366030713823;1.5940053978286843339;2.2169928778866427876;1.7153825549794048388;0.36853937583287732505;1.9077230982564825634;-1.1804159088153065582;-0.24647151713560916386];
LW2_1 = [-6.4593631574024348296 5.9755428428731178769 -2.1376410987212279835 1.8154770658407117789 1.9735567504170037356 2.7924575511921552184 7.8399814483621250716 -0.41507523092551762423 1.3458739803957333603 -2.0772890537079300444 -1.2024179489584503333 -7.3105826516414840199 3.5516855229849677578 -1.6671489933484304746 -2.3540628041182314334 0.91175418176473055354 -1.8441105685303265105 -0.98791174115560487223 -9.6150440470160951634 -0.64671752674860150112;1.0610096595493287985 0.68856626764962325371 -0.68803110095418551495 0.29798380004652419428 -0.14862590929891164593 -1.6298134687804723963 5.9457330684259837028 -0.29260488996194167211 -1.0966218377313998733 -0.35519919907749475385 1.7866409066536197425 -2.2115333229643838742 -0.61978770007623917859 -3.7570756047846263215 -0.31412251064939439305 0.42951220322865785173 0.25887303755019802631 4.1352242914733396972 3.8269133400230757047 0.31616002204614990223;-0.19196639915291638379 -0.13396648055658821885 -0.73226409046732721109 -0.30231774044583115124 0.13638297786440650716 0.19054871380769836109 -2.743125932517247012 -0.94963584782544430141 0.18307108299172689114 1.4770136741657335921 -0.30841421413404790375 -0.22601946624086086124 -0.50680460289749573732 -1.2573570533739426569 -0.76369691138569384403 0.22013634892801056675 0.82380885090846789343 2.5066345654639183849 -0.24126738270914724338 -2.3071161546492233718;0.96272516242555705723 -1.310069879826351924 -2.4390239668923281435 -1.5148516433690830674 0.75320878052609541164 0.12531014018573699564 6.6888815994470975923 -0.49428094027453473025 0.3301300836856672638 -3.8028518799334203315 1.0396779736625343382 -0.77208699448705242485 -0.21815422583582150251 1.5313887268234671613 1.0346749497500955517 -0.92429579714988863159 1.1168822750666149712 -4.0020656619163315071 -4.4018020645288080672 5.0310751869567083006;3.3072945827867217261 -2.6641294462322671066 7.3531785035101702164 0.34920526078413233195 -0.10815338026282150796 2.5497505474792792057 -2.5067909233888263643 11.561128739315897462 5.3227652482262763911 10.758825924689734421 -3.7178676709688760482 -1.9295132975741569048 11.635093088859873589 5.694873884591799218 9.963262872474153653 -1.4442898524081086986 1.5876515256741254856 6.8598351747410823975 -10.721166459616847888 -22.100494465990575321;0.62949809591601213477 3.7625532894785385096 2.2056851443898981557 -1.3735336242304516663 -1.9903623493261668465 2.2924929201251957878 -5.0035776612665934238 4.3899230861625611055 0.10221984466504720201 2.7559423428050013882 4.4976415085560788043 6.0642525678185492666 4.8090300591553303278 3.4824361385594047036 3.8858764022754792578 -1.3181511470652953477 -3.8039239219455112107 -0.034908701429222178947 -5.4592735893251695956 -4.2937829620349727833;1.8012525314708403013 -1.618873296678263296 -1.4203310067435213071 0.60813894158652670452 0.23921587104446839778 -1.0632091805771193282 0.8575807353537252542 3.5026850818251213937 0.20836827223457118907 -0.52526672115234418481 -2.7604269916641226423 2.232381452328406457 2.910695322936838636 -0.85287717440349297693 -0.73232084282224629845 -0.50795795416263900268 -0.017787818942938082162 3.605203900751011048 -1.790641875013119888 -0.63511147235009457468;0.28237727951755881017 0.74536483737754610779 -0.37129329379049114124 1.3610885717504974668 -0.14449997283389878766 0.080603379619807749568 0.74870388508491358959 0.15483497789284067503 0.32478864780421251579 1.7654497657776628827 0.57138339649310299073 3.9771009847633536083 1.5500565191215276428 0.13337989025667770782 1.3455736778441131918 0.079772626945250474373 0.046787721987352461073 2.981237399528350096 0.99909966156611140775 -2.0143761311264287706;0.29344153422797852881 0.12150525301888456808 -1.4538153073151169892 -0.24208422922816622003 -0.15967425523458339542 -0.1932940798387753345 -1.2258431122299429106 -0.2280987682734978983 0.19007304151115769764 -0.36536948427122034611 -0.44402235319818145198 0.25194287430603223843 -0.72093466097100544765 -0.17499674565392142611 -0.46648599773953336456 -0.36842636849052368131 -0.83052745406514139059 -2.7401070504974995856 2.0964720964881733423 0.86591317965301561888;-0.041733727792121748379 -1.049994402645949787 -0.31661779463500328013 -0.69872728271376471909 -0.011795365880337652098 -0.025917206372199155101 1.3663747455549095644 0.033768121566512494802 -0.62283781167107843402 0.48293460912248492578 -1.0427984384807909013 -2.9754174674705540227 -2.1536066010858534447 -0.062756023977565425498 -1.4480522232517711867 -0.33499344141438436306 0.21079438496606650588 -1.5701643254133670347 0.25703877634251048878 -0.565762024962683574;2.1885543950213954822 -3.1682132287459596753 -0.95590541994641908818 1.5051403895427002411 0.072728492738103348025 -1.1827248407768284899 -3.2509124689855459778 1.7682281796982231015 0.70347650159654395718 -0.41862792087871825153 -0.32798989976364800736 5.2303502348044732528 3.8739543540404270949 -1.1475379121944249139 1.4240424128552853222 -0.10596828864757296129 1.6839817353884098949 3.4773724535127863433 3.2628614910226643175 0.23786348117343164565;1.9202303438506151956 -1.4711401212084438406 -1.4293043327718319979 0.48386238326380237584 0.24235438970392686464 -1.039785471408710027 0.8127451616946299584 3.5323069696184776767 0.20869190929643913202 -0.52914965831228455428 -2.8601636460644472848 2.2371556257628943953 2.9038278585005263821 -0.70302228406761768653 -0.73128769724491349269 -0.53983601563222327613 -0.34403641737469647932 3.524362247952060212 -2.0170991750351832117 -0.64187214401306014189;0.13677066451858443941 0.93614516906763600712 1.0747720531547617639 -2.8269503941167557493 -0.54845991954328832119 -0.2957112029205658521 -0.67581142543074268492 1.3435940617229860106 -0.6639973730053815304 -1.5020943515937250634 1.8749444779870432232 0.16698123359091701645 -1.2689224413805635372 1.9483711849061042809 1.9698894275103442375 -0.29869455996231381034 -0.5726102499158722825 -2.5508128486547354541 0.089586866596160177889 2.7378910374196632205;-0.41963917893121266411 0.89938775747132515548 -0.32754315925035243362 -0.89904920744074345862 -0.26482361710205765126 -0.021263069077213075236 -0.47907949345956685194 0.14826609205717039552 -0.35410635530122952508 0.35796474149896351236 0.96318315471742066425 -1.0470150610129873581 -1.5735370849148819783 -1.2443778723768474936 0.2533131987830405385 -0.007032813758641025606 -0.12568896913236740631 -1.2086355621615683109 0.0087804563235559188877 -0.28446360236103918062;-3.285938382045389794 3.2599318796193559322 2.6172559909406456491 0.93723188163891513192 -0.023943279865537285545 1.6468197220191893582 -2.4511509806570348502 -2.5913503762010745568 -0.61146179751608109587 -0.82266312940710495383 3.6232078117138177831 -0.98467306658084352566 -0.8372385946710331206 1.8365954348964792509 2.0521545989116365405 0.56770924697827251926 -1.8709854783295205571 -5.3193097697491378284 -3.9473222127501670364 1.8309088041376040401;-0.2652345918360856647 0.46749952591247234679 -0.44190403093293717518 -0.71394800419630188859 -0.20615705032098446958 -0.11702963932599143304 -0.48607384928763569532 0.18498194746187718307 -0.33144004559358680728 0.54099726671648362686 0.87922583782327279334 -0.70133635610077860179 -1.352055817172508112 -1.3038033063397636013 0.31211186281881320159 0.020608374538767314232 0.24693867241505154664 -0.28622646784638111628 0.070223560376710222886 -0.56312752204761440389;0.61826351578495020167 -0.41315636054566895474 0.5564370052032362457 0.66894862238168517621 -0.17012529796075762101 0.18742522535336555989 -0.98503787739604931062 -0.35471063789059531501 0.40966584847001741299 -0.60652048837034955309 0.23903417062533827142 3.7682606431508696154 2.7164451718083544307 0.40700678904813647474 0.87745493390234707842 0.20713408343306960457 0.090197405328851856798 2.4096105081343850429 -0.16543418413513946708 -0.23331847032724922775;-0.33506764299462055146 1.1982178646718713022 0.67406379266422078445 -0.72894868664170664463 0.11218837838615174085 0.24646748913210880794 0.90548743680644516729 0.23231727951767347506 -0.029349287896993349334 -0.20612584172405332139 -0.1382476764694078597 -1.7036995379307873222 -0.53182230300722921346 0.83015952316253027732 -0.024139604669285923827 0.037220074895925901737 -1.0528960119436820975 0.70390274169940147964 -2.0475785813311135897 0.058040429935506857029;2.3187668313032880896 1.8293128032114109871 -1.1473004479419290913 1.2623137172557612473 0.19082248788650002513 -3.8644399576846502065 -0.65491934504229987191 10.021991039853544336 -5.2251313485459842667 -0.79123300930344409032 3.1004311539644118234 -3.9270853296677605826 0.52703366722413569345 -1.2696295179877572501 3.1349800246771626355 -1.0506399336080687323 -5.5813471414969413331 -5.4648938516300100687 -2.2789599017209378751 -1.5762350940669711541;0.2040433924077836858 1.8118791963964253622 -0.16035164048333072628 0.99775345933135484167 -0.0089447935895624972741 0.049839030559943611753 -1.4188871432995420196 0.31794262892901242745 0.84924956979853050143 0.078500404129824424837 1.2282184258190949055 3.1508463916515001557 2.5310710848144406526 0.55597279096342278049 2.2048007243025211643 -0.011999368651333053304 -1.0132371117231127045 1.5319294245348853423 0.15552409078392870345 0.11965332620096646998];

% Layer 3
b3 = 3.5967982999130390098;
LW3_2 = [0.2361829068569441803 -0.6351662616961123442 -2.5726675284930098364 -0.1616297564591121505 0.045317117460458092304 0.093633016423122938932 -6.9528115679733124566 -1.012231746448347014 -1.1670809843366054537 1.460101483356208929 -1.1124221813786263624 6.7930619814496537856 -1.0745312237489441642 -7.9732133707529584399 -0.3562127990549401324 8.2140939911309462929 0.76824868248223721068 -2.8066150459709366949 -2.6519814417071447821 1.6167447032439394849];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
