function [Y,Xf,Af] = ESPER_oxygen_11_Atl_1(X,~,~)
%ESPER_OXYGEN_11_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_11_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.4128072710122046018;4.8577586875449281223;3.4792565767243579522;-1.6911871883300422237;-1.1001618835279456388;2.1014105305496761922;-11.991627875117863766;-2.0392381003347863633;1.5890646311479204034;0.10332944508143372675;-0.18755361118359051287;-1.3005018257335012599;1.6152492803507878527;2.3954255059274971451;1.0386137445667862345;-3.7107172914536774577;1.771381369757340174;5.1675857122326975812;1.2699918610919760376;0.25737571302656542249;-4.1776576845264079552;-1.9528191768454803423;10.21395713009494699;0.71480816958776161041;2.0750419766890528805;-1.5847819669990190761;-2.2043720011554164273;-4.4653768218099694209;-3.9720219048561542508;0.59370794405414295536;1.8320555095384645217;0.39029553909435416026;-3.2608543535601115515;2.0829541602867238659;1.4015207942623468806;-6.2262765143889744479;2.1142975526598584146;2.5769705420739237312;-3.0395113050896127582;4.9314127355352406212];
IW1_1 = [-2.7968704639940944467 -0.53403644588297505269 6.7131785267516503879 1.2813943047639759776 -6.2515024676163513107 0.022279014818527984737 0.53133996289183249573;-0.24015125872930045969 0.20632043483163020614 -0.67671358286539196047 2.9767117305078052425 -0.26132232924914511329 2.8392700343936443375 -1.2131006690962475858;-0.83287900953949134397 -0.15488231232907537227 -0.29227856016175429721 -0.30611766945345347812 -1.9283560333499931705 0.52786861515397820455 -1.205177076369211342;0.50830558263155845022 0.37697411684609766214 1.1056178179965026054 1.002457114030719687 0.089002717996331692785 -0.17128106664690298522 -0.25782873317369597865;0.73094833675695969344 0.53568653880652650212 1.2372434559412592847 1.3970632017561757099 -1.9229045270685927171 0.22693430879425008362 -1.2697728471988793952;-0.39265312987634898301 1.8720781974484295151 -2.6046585289071453317 -0.75699730408358201217 -0.66842053122723299463 1.4849340230073260205 -3.4396352608868827616;5.3254548716094562977 -1.1611105253398021908 3.8816926196703285257 0.56602607822965866902 6.762722394284861771 1.9240989859536958839 -1.9584185117358665629;0.038545927295040534333 0.12133101640976609592 1.0582173464704716093 1.0659532265033873077 2.1524573596197611458 -0.58176618619521980325 1.2390094367114234952;-1.5689067936405147741 1.469254393725695218 0.92210435689711789387 -0.91189110992228572528 1.7167895477743788657 -0.46952723186454820015 0.038149245237149277676;6.4445030157878155919 0.6289942790554667873 -1.6092591367211328546 3.9746512436670147217 -3.8109227848343758538 -3.6717498119745028973 1.0021615890623121192;0.58524325022168122157 -1.1954066564245575677 -0.17235199890526758937 0.67849142223499636639 0.026355330072989444079 0.4998980939799930745 0.42481592155850977921;0.55886264396572915558 -0.038254445420183608162 0.070396741382998159753 -1.0550455291148117531 0.19244905079654522906 0.0037712814314030335475 -0.90309612953267914826;-1.0244242402291554583 -1.4228817461994149873 0.66025527598568978238 0.71488752113187425952 0.54044717994435320652 0.75195080847484940811 -0.87840417311496099551;-1.3505462846762392726 -0.77955178111191414381 1.5665990554164981319 0.12306192637537795298 -0.84737998803665681713 3.220197892836190956 -0.73754806012941043214;1.2806360369351907913 -1.0903319960704216385 1.8853071881940188792 -0.34452625142094384092 -3.7403542806850134106 -0.54590512948543401528 0.14382928162982708264;1.0242770648034189573 1.2234087808865889979 -1.6703056140898453474 -0.14594408588391322157 5.9130704782658520813 0.37866659996655815945 -1.1989781146968794268;-2.6387884356354165405 -3.2712191925320306396 0.44004131915778776918 0.081723178796607801044 1.5481543434238289603 0.94148414818630044021 2.5487556172764933571;-3.4296980315998011335 0.8747169880672407416 2.3903868559650991443 1.7643340397712097278 -7.8516205576642930097 -7.3682363413988882783 -2.893621847729690888;-1.4212217187408078267 -2.1180594535918428889 -5.4262036713400512156 -0.48754311867815874892 1.5011941858124351334 -0.0081564202083236440888 0.96599077200570371282;2.1179180817013545379 5.2960627693940383054 -4.538202345378395286 -0.68095035902833667141 1.4396130690379167483 0.37099363135878582476 -2.6563557127148782477;-5.0609181936658735879 -3.4739555716289474141 -0.020302616119442364745 0.4860470732013958961 2.5175520006782496907 -4.4336617974015979371 -0.5669343932989140411;-0.50022497124221820819 -0.48925477359809527167 0.66383611922122398585 0.045178708694239677612 2.1525236768995053005 2.3821440317373459017 -0.76766800677271840314;-1.5933206675937867658 1.847971490880688572 0.056294532961596803478 -1.6275674553829124758 -11.442852890887094119 -2.8366660543672401751 1.8175367300760527645;1.8372903759344232366 -0.080398369184628282191 -1.146309028820799325 -1.0315058052622059215 0.73612900392619262657 -0.55289720803164843499 -1.5477956367267342586;0.8506808207887701645 -2.5959773496100062573 4.2708604971709149822 1.2591109908909521309 -7.8300891976850373055 0.45723459211382366796 -0.43542922805203410075;-0.90577612852239841601 1.2228794731890342273 0.76967418767230044718 -1.3725474144279565802 -0.5996959366988648954 -1.4015956793957689008 -2.8116676765079531286;-0.071290692808401764924 -0.39863777083585028027 3.6703142789743594676 0.18677296496627893152 -0.21636900581948670386 0.24819353463912074975 1.0715060518207739637;-0.98140399495198538116 1.2220987304750170477 1.8897880881227568928 -0.872965146428709593 5.8054088444768519039 1.9611551689200243942 -0.39130673276624988732;0.91145995335140161941 1.1889129781617757686 -2.0675356698332536531 -0.025140796544720629691 6.182738949898639369 1.2654718877815507305 -2.4904810298944402014;0.96426624337003707943 -0.37496165425766359025 -2.8323173050690870767 1.5659043616618053552 2.7256940308077894919 2.4987011871462336821 1.6876459205178322431;-0.6374228768522021138 -1.213894017723681662 0.6175973023294277775 0.69079869418539752157 -0.25072996360093430246 0.93096233853737098141 -1.1607499625551345179;-0.58787868289529288113 -0.15060321118778971505 -0.2573823567299725612 -1.0173781311080125622 2.8394003131388414474 -2.1078584629127345984 2.4395002088419404096;-1.2109281749163112174 0.19017849811473275246 -2.1346499309578321757 -4.2722689818202663758 -0.23014058832089445694 0.11820190087932289091 -0.039063665543264111668;1.3230514494207417098 -0.17627939033573505889 -1.5302340562385225997 -0.64140883331372944287 -0.89349654450018767271 0.75406792992751892069 0.39392467860782026667;2.0793108463770058059 -0.43987076298538391184 2.3177179808812100603 0.35785515540131968004 1.1048481180512956801 -0.73247540961375434687 1.1473043039675994148;-0.82226776167128745598 -0.88520763692174153636 4.3651988256405722666 2.5354843877014250353 4.2228323370995566322 0.28072101237262958584 -3.1934583956135531579;0.63268376326020825395 0.30584910653344932197 0.21917571516082232086 0.85859405496638119271 -2.196466558791265733 -1.8308127811588186251 0.11925186873605578275;-0.49251375699501703798 -0.027720773527896626354 -0.20664675379234961894 -0.92180916169148396921 -0.6560455612038293971 -2.0473476098762146691 1.995981938216085938;-1.2399716449528552786 -0.62625594634871184496 2.9686131202938059737 -0.68333979063067984416 -0.011505503738061188812 -0.34458401364427643232 1.728178277191895873;0.96661214077719048721 -1.2700848098889174764 -1.4246752778736806455 2.5936359841308451735 -1.6788873356764717482 2.5551633878311266201 1.4392022277916036721];

% Layer 2
b2 = 3.9889194241148508979;
LW2_1 = [-0.11198054228090839612 -0.34129175534781153178 -2.9872176289590490761 4.1462436252403493953 -1.9010995550275300303 -0.30859156695111089608 0.12519234944105656071 -1.4365895870226332853 -0.29330156028335924168 -0.017552951408414695089 1.3033808480286428466 0.70766798602005775987 -2.5764822603768675613 0.15309938338939446667 -0.34131847572429940829 -0.7228921272708169754 -0.089525804532662511814 0.059114439648139623096 0.10704417145511339882 0.045648599009345633415 -0.03578330255870759008 0.36274349023117496982 0.23433022171666026412 -0.53081748856382726665 0.1706862118259461214 0.24718775323258984633 -0.74580662337403813567 0.11496089132648816544 0.49356416186245299915 0.14871343533082215238 3.0185931767508860091 -1.648422824098070727 -0.15932842064133062587 -0.60669843557908875731 -0.24017568705118788608 -0.18143819599273269816 0.56116618909786142311 2.2732244008263449153 0.61907693023792220721 -0.19139736319086847471];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
