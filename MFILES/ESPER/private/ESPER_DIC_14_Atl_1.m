function [Y,Xf,Af] = ESPER_DIC_14_Atl_1(X,~,~)
%ESPER_DIC_14_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_14_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908];
x1_step1.ymin = -1;

% Layer 1
b1 = [21.095199715632109161;13.869177179934101929;15.878552367264267886;13.299784785084616701;-10.872766202237949429;-4.0740438407176098323;-1.778941277893058448;13.815155083247026013;380.87114619275274663;-0.39025357296493728976;5.8548739019514854931;66.940113131159506565;-345.71128491077524814;9.7691392548919502303;-29.310631181378013821;-51.888189955177850265;1.5867655958108957126;-6.4937148105569972856;-125.47823001291878597;5.1558050538013739938;18.959773820764610264;2.2417946564606436866;-4.769456278493546364;-3.0501919863225825935;-2.1813574682122855997;9.7058063204096978183;0.92411406748041868831;4.9266869037795046893;-11.414603294654167343;-21.387867348161751835;6.5399147155669563602;64.228359416819259309;-12.462420418666056321;-4.3644162831672348446;-0.055743509495249858599;7.9119880963294528797;17.806204312027343661;-30.245390009549723231;0.55830353582902958465;-4.328007469318036371];
IW1_1 = [-9.9907089559860988714 1.8065486561777326369 3.6126178765092045175 1.7815642384929759601 -22.754184804195926262 3.4519710063897317553;-0.013140724005491538975 -0.079765031080000090014 0.055912453052301733236 10.342355677687431026 1.2838055541371904411 2.510922753105916172;5.2042341332682422461 2.10375248262262593 1.4928579751272403886 3.8721867053194158892 -21.467092347995212265 8.8320081616150307724;-0.18401592710461336933 -2.4047104393714486825 1.0679844319457034718 -0.94438618298011756114 -14.01798468883390747 1.1088927186590036289;-6.2192095526464212796 -1.1303281675449856625 0.52452718615996651863 3.0939613342505558613 31.544997482896832253 -1.1279161540608928505;0.058625855953071730198 0.90913863927422666755 0.79561911012481967287 1.098309128111297106 7.5840374507793431036 -1.0305800829173745736;2.7889258741900531113 -3.2319650200436358389 0.3405071969952390698 -1.7422224226496128008 0.15967665873531811105 -2.1646227284582635342;13.758282941138997302 -7.1553990140066092707 1.3912558224882909386 -1.7790261048241715613 -43.293568510470819888 -0.91283598747226191161;58.627139539602858065 -15.980653069760499818 24.516196825837209161 -8.827961118419720421 -598.64941649555635195 51.823005314555516065;0.10073401057789370394 0.47952110028514965956 -1.594361948264680251 -1.2332182670164737459 -0.59194829314899266581 -0.29990452086803648379;1.6990691905614212498 4.5681213595961116525 4.4797499053064102625 1.5328001899814849285 -20.069650726169076194 1.2736587494227327166;-1.1289863766904593145 -2.5549547691323071241 6.3319507830886267996 6.0980610170858380314 -96.937350414218883543 2.1158268019555301898;117.98262868395889313 -199.11932158625089073 -84.507672452390821149 79.987700270971743066 252.66850448908144244 -105.62074006195088316;-1.0728994462069851856 -0.41581295113807209551 0.30901163585931273881 0.87317619409813229669 -15.225782319347919369 -0.31858771801757745923;0.74096757091269183082 10.659180685296204771 1.3605542861240425001 5.9285579544439279687 68.671430135493139346 9.1294216747497163311;-3.7836833442000656902 -16.010765360213554231 -0.19930834919276965711 -79.896127963973810893 -59.854797923212871069 4.6175907489645222626;-2.1163358084536119108 -3.0656255211556877605 -8.1569639575445673785 -6.8413763608581250608 -8.6774616236957715643 -0.87128957825331143638;-1.7824763473935816283 1.1457642010705948454 -2.2461102324461950097 1.0693471633538087495 11.000087743509695315 1.3837948360519665147;22.69312731120814064 -60.905977717655510162 51.379637569555370646 49.638566420973837978 237.18595428487108734 -122.58582307872623574;-4.6324845928799200934 1.2645465701677534032 1.0468928180590193477 4.3155041562025902024 -9.4038333853454201261 0.41415269232715540282;-1.7159797687130315946 15.352689867191502415 -0.4150535603687735553 9.0501224448969832537 -16.399234569312241661 0.50390955729043118705;-0.63610940479349897814 -3.4372594617827041397 2.047569667950812633 0.91316594290672703504 -8.1643262718888216511 0.32841661535237737235;6.0572793357367906708 21.042718131448310714 -16.612354993687809213 -0.02426596153231702982 33.470680901712285049 0.53384224011629333173;2.8385881841351152666 -9.3973500737752111434 0.41205460404556881748 17.581042055234576083 11.468113340463974126 -15.675992131142875152;-0.17327126243275434159 0.31247334137486809658 -1.0403973305967835206 -0.49320363848542325691 2.7071979858966579435 0.2198557864071017387;-0.88719286949289599686 -0.27903047477429887557 -2.0384918567794030331 -0.91848744659970671389 -14.578424171539229093 -1.7924075590566015403;0.80091879291154088882 -0.26427902899298549855 2.3192392971689330672 1.6533241187621945389 0.028009086918791614718 0.45197746847425729344;-4.6836038065133189789 1.2715064384068814896 1.0942092611870504193 4.4023933952230134281 -9.1437396601122973294 0.32258129588974532309;1.2593903201163174632 -3.8189270834412654132 7.1734123797803395206 4.8868118709039336522 11.035795255314083008 -4.732055813848441872;1.013710241711054616 -2.6427879174558217557 1.8872732335665971526 0.77270821728041061416 26.989520351460324576 4.7915703687994621873;-0.84259967192699791738 1.708505161481514989 2.0882463956396373206 1.3335764366555045157 -6.1835080157220296826 -0.22900108013764541859;44.079095775953682335 -7.6198679205429051819 -5.8288516573683182287 -10.769123813205958129 -21.674845802037424392 37.946740906075902444;1.0445142638165805238 1.2965935645264670129 4.7196682917829333448 -0.80588493112627812565 17.277601084254023078 -3.5877182662861133444;4.5967090747776380155 5.5039838421306450655 -19.820613169120971264 -16.778872412385076984 28.254316254841604916 -12.278904196043702868;-0.52503216002243691118 0.10637422577136229629 -1.6904004164528609877 -1.1748548437900061536 -1.0114867347729723512 -0.46484120140671986166;1.1059523311567913684 0.15322714838632997547 1.8416718260106004212 -1.4792711394231896627 -11.585857609930739542 -1.4316082939276300046;27.079569972114505561 -175.03567020317004221 15.003064874771599335 -125.55676285467775699 75.041649376233536373 -116.68958132389275306;-5.8915525996848261414 9.0379287088404431927 18.066650869220271858 0.14333493745157649402 8.247586104236386717 0.81566156719932081387;0.66432072962237587177 -0.20809241475759990281 2.0799509940598084334 1.476176475340196026 0.46604784626337353304 0.48482653783740975451;1.0321652936110574661 -1.8261988877827071143 1.4901170050318881533 -0.51287744904509735555 0.47844203816683594788 -3.9921747567208734075];

% Layer 2
b2 = -0.97816623934201762935;
LW2_1 = [0.0072607097421498413212 1.6646499583339593453 -0.0043783519734777011714 0.05458197061961114066 0.02350058614559270842 -0.09782812474777685674 0.031582456534351051325 -0.012310480909132762509 -0.0010781336176375227228 -0.20868165572604313596 0.022052918671782675841 -0.0087931406887217719581 -0.00021470437757364609164 0.041243332277690739063 0.0055597193516301801272 -0.0090187209932694849257 -0.011669742859380554875 -0.060224085960150532115 -0.00080664242326316756317 1.2973063547726653155 -0.003155316150000384099 -0.05025987317451601627 0.0026573830293531615354 0.0032077412559707299197 0.44305961006558491899 0.05387551822651753114 2.2833731926163460813 -1.2647510309494007785 -0.0098206806772960387325 0.019882477577492976145 0.094685012454294559259 0.0019085410366237380402 0.013462381767219856049 -0.0039151756008242505 -2.1362782883282802615 -0.043227995515863440468 0.0002801906379075076183 -0.0076728616430978488494 -4.2118737869459126344 0.025456428178330218343];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
