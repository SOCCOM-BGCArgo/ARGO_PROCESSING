function [Y,Xf,Af] = ESPER_DIC_13_Atl_1(X,~,~)
%ESPER_DIC_13_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_13_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.9519185907780531863;-7.2209127247363520397;-5.8353603985441591107;5.0107628448266670063;-21.952756045975814203;2.2109468875971876045;2.2057697818344119689;39.384376522337525728;-8.0976013963337294399;-0.35077674436363348587;3.4958130143394803291;47.546370244070224942;-4.8962999736096159964;-22.279032658324375404;-15.773926152472023787;0.49432484987469416104;-61.989574477376457651;-1.311987844800521108;6.2763198156101198677;3.8443747117667061985;-6.5721535076337813663;1.6683482345460669549;1.6494704069254095824;0.45630406885298324671;-60.458515324737035712;1.3627287972032389174;-1.0395028541414563783;13.233665367291107984;0.6746810294500338312;5.1970711131035001173;1.4431941679544013635;34.673727880529717993;2.0548075557256106904;27.888469704659975434;-0.31453577439418883843;-10.279389379958828954;4.9229912210892150526;-1.6270900540764494657;0.082681626019729934085;-11.598070920709448117];
IW1_1 = [0.35970047635541457787 -0.042514258237754162795 0.86000005921927458186 -0.062452921275832670722 9.0578656916532178656 2.1764408779676114314 -3.7913783986339097964;10.725308335469817322 22.588082944120170481 -27.241276602018416497 17.870981864694535091 30.806952046720120109 1.395668675194092323 -110.35589333961296177;-0.028259343551473827677 1.7952753743373275341 0.12002239924284321959 1.3571055948535415414 10.645895211912458578 -2.1377078149304478139 1.1037696946107227181;-2.3890936235004742727 0.82570663787976350534 -1.5414580531483350612 -2.966252708781942804 -6.7538576338395248655 5.5102649975725297438 -9.844567151981308939;5.1815347241448534987 -3.5736023388938531475 -3.7789218393407142393 3.496974739026668999 23.695771306217810803 9.1461994491733022983 -4.6989892426272152903;-1.78228902687551094 1.3700838349072244071 -0.094352415100354899979 -0.94069800966241690077 -0.82146962596480499474 -0.78594307837759669333 -1.9999040598682735759;-3.7605468767338328107 -0.20321002146317962422 -2.47282453162265492 0.54080632631315306291 -1.7827142247165310707 0.84996545043010007792 -2.8653972116007677684;-3.8730516231082674494 9.8813684205294176621 8.0287899855473856547 0.2796579650086700175 -39.528106361422047144 -2.8900467955136930343 3.9728182811637822169;-4.7005474826452502413 -0.12163071288923830993 -7.5225179876723169414 6.569942230607353828 21.794269981905983968 -8.4952663324583959081 4.6286640094338658002;0.18452934993355366022 -0.18516634947167104341 -0.18443777975880981668 0.1457055699549960337 -1.01185039078588912 -0.41933689025622439273 0.15302227770590973166;-2.2863986543727299328 1.4596902416265384872 2.8291400949422733646 1.3545940950021684301 -1.8400707663799544811 0.55084843447674436412 -0.069053779791018302103;3.9658877963412049183 15.810660070969426272 26.925948762168307127 -27.800451306488959347 -60.326326865475479622 13.472137711887224754 -11.716145210108972918;4.23382482798254145 1.1460950719655509378 -0.92771361406470698174 1.5308955464742532993 -0.91743292854312419315 -2.7717467660887242786 7.3228727976705760838;10.872587795806312627 4.0914446856629300697 -32.110956728710611685 -25.456689182478040578 -7.4364362291364214386 5.6331189445058713616 14.072613717931311328;-14.716429295974817748 9.0869448537791459586 7.3181912730642375564 11.37149303814776502 45.796444025612785822 29.666631010734970886 5.5069935469882889123;0.78499673460599761476 3.6082507029494776951 2.6052119385234786542 -0.75858160528398099753 4.7494076947567949176 1.5113410502830832982 -0.55690218665903434836;-1.7975776934426157538 -28.974782574612987673 47.749224035654400211 16.952903825959523942 59.414729662954307798 5.1171519183791680518 82.374374031422320286;-0.32881406537722490668 -5.8636398885533385084 -10.066991767262477353 0.25067684929054989684 -0.96434631230280465353 20.349179024955734718 -41.188452998653040993;1.5576034244500684967 -0.29661234573257888592 2.9775908077103654392 0.79166982947389419323 -8.3236982891039907884 -5.0988284724619417076 0.4010733956903181352;-1.0821876567941917102 -1.2959273217554869717 8.4234718841553029023 -4.6060348559843102834 -5.8336673732905115486 15.870221644280595896 11.593848631749333222;-3.8189685976721854388 -4.5050670000611443555 -1.1419119069175993619 2.3013243531476157422 7.4377067598839676776 -2.6547551445422308269 5.8756474925714838875;2.1857542084906920188 -3.2796048472175094446 1.2759310459202406474 0.18768811673982582766 -2.7981828434128650507 3.3182349270932185448 -2.3614240134978619068;-4.5876930068097054871 -1.8799159147469963749 2.8294055164015099457 -1.6663649995990048591 -5.9410200789250193765 -2.0979587508608132929 18.454286917006484714;-1.5010462950621223932 0.020475533150745392486 -2.2046556364547438278 -0.44392323083907736514 -0.044190498867430906549 -5.1698966081758248592 7.615052647465209823;-20.306020966677955641 7.1288845414554184998 6.262792203547670411 22.975421114919900134 41.015071272487134024 -45.484070715112551397 -4.7442994739341113331;-0.93319568783388684441 1.4773761704979813114 0.77205897504360831984 0.41520796355921768539 0.60544139106808381179 -0.11672825685041868238 1.2776515544764308618;2.5017417181658028191 -3.9840277057188391296 1.4099234227088519589 0.18138478792437565112 1.957189638712130364 5.3700138832668811162 -3.1734442895202041868;-2.3769795944841853874 -0.6446401760911124601 4.0110416164891118385 -1.9592860012264363689 -20.643548712044108129 10.755198389152518246 -6.461896739403005796;-1.2251886138790462066 1.6431128507547894113 0.34907590049262643417 -0.49686692746050886704 1.8914782379237853327 2.0373061013792255203 -2.9238945180595878881;-0.35735400996457233891 14.6038242659902604 -8.9649190374863501063 3.3596731539680559919 9.1906312099639713153 -2.0564882188898856441 16.901176889166421802;-3.0095244663398785789 -5.7131294251015516394 3.9333846743549329972 -2.0904675892948558769 -7.9797458433285433088 -1.9710554328676652691 4.4580545603940677779;-3.5655466862291866903 -4.5667874495938676205 7.85433365684942153 -0.20677450688955864577 -48.861343332956103325 16.781111971131398519 -19.510475917770502718;2.1280562431991776329 -2.4570348991546557826 4.4029433163600719681 -0.41761451982321057264 -2.4119473526275272413 2.2355286480999141396 -3.265446341731493618;6.8669549146952189034 -10.586206334169917298 5.0928264344421787513 -0.95048081710115595033 -52.825693121587804058 -7.5701234861499280271 8.9596578684428394013;1.1370677057005726951 -3.0865119427428124865 -0.21239178813480036334 4.2649291221116847339 0.21906119305116655838 -5.1299535470856394426 0.1845691192618455212;-2.1023447405550101941 0.72043936040680311983 -0.29484519053906399488 -7.8821278161589498623 14.820162454409377517 15.092285996793764369 -17.632939004281308115;1.8358676541347545008 -0.92302483694636194844 4.1210712945017871078 3.0645990577275834532 -1.840681020836771653 2.3080035228691779814 -0.82832201130780336307;-0.58449070822947402082 0.74994565088264930619 0.54205971335286051715 -0.21471644188262445363 1.666125233923544835 0.60820465422492575591 -0.035758225188632343505;0.28435670839074927985 -0.32121956613371538403 -0.17224865056283941711 0.11563128557337501445 -0.5546670397986771528 -0.27634307768483989953 0.1125375958717036301;-8.8946236621246015375 -7.5688950776853660685 4.3440038442449058209 -1.2169555679244477009 15.933169631135122302 18.245155420757424025 -8.0009422229363984513];

% Layer 2
b2 = -0.33658142500321364121;
LW2_1 = [-0.047016835554701895405 -0.0018299679108590267106 -0.02872840329074745 0.014972432257283544224 0.0001049034228688886769 0.034359138301319938624 -0.02089493437608412954 -0.016401970570739568545 0.0068268950245352595999 -1.9945097326886425115 -0.02438690122954120798 -0.0022473553749466730275 -0.020439592814027508078 0.00066504471218962850354 0.00059186230412645402053 -0.024428583491580804082 -0.00015676679989727336007 -0.0039150937850409173874 0.0052641355277924187922 -0.0015897518841597629066 -0.0069088910916998000009 -0.11665580932838208461 0.0017208268475781705788 0.018033677759159084247 0.0052396701183484804126 0.24219149311361945487 0.069696807100809846092 0.0060865050997988981787 0.098338644764606353288 0.0052373093929014864073 0.003533934817907515881 0.004599022016768032628 -0.028673987005766496394 0.0081318244610110654302 0.0061013000169305277656 0.0033444903435620931473 0.041661287355560731871 0.48687978793977276792 2.0820722012228523035 0.00070418352610454278736];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
