function [Y,Xf,Af] = ESPER_TA_7_Other_1(X,~,~)
%ESPER_TA_7_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5206452748353269655;-3.5146828561177123618;8.7439391721942882896;0.62797949881657810778;-4.4284894698396195523;-0.29899405962788888624;6.8766961711077758679;8.3703639106155289795;16.513526470970056437;16.029213146689066605;-2.1345207084863426772;2.9156657459503896312;7.3284886506009501161;1.9864484063414351578;2.6885270729386503419;0.9150706718761661973;-0.52207673480877336836;1.2213277924011043396;0.52282399081494501658;3.6971598567892165477;-0.2716112278520323442;3.3189371423186964094;-11.154363800257680595;2.6552266866985654303;-1.582027040251360761;12.700712776938914317;-0.51197417107881371123;0.61365531962085939632;-0.81544993414253841291;-0.011537065820316220327;-5.9629529763224313754;1.0242799956487311785;3.032458519889670967;0.74722739209369526403;1.0909981406705533402;0.010936880305078548747;0.64626795791229207921;-2.3143914773080154212;-11.078009529780596054;1.1632764729949445215];
IW1_1 = [0.022762914998321028687 -0.14832174439019060741 -0.40448194562129818896 0.28987366951981752283 -3.5838470525048404802 3.3900870453353304512 -1.2560088199739301018;0.60829870456142653978 -0.39575510519391909892 0.84176285599843236884 -1.6155859340506699695 -6.7734237366000433767 -1.3263159645717963464 2.1632685340843091915;-0.56317632065927913931 4.8147666096944607972 5.1850387504755639512 -2.9956056493744140923 -4.2533865660345266946 8.7111679971159254876 6.4811697154715330882;0.95080509724108042136 0.31661104266540407437 0.42823577375091759212 1.8799184067447762825 3.7790720488909927965 -1.2054443312184819348 -2.3900433259632953842;-1.0556381341791605255 5.9814093066255811237 3.7347010198194392494 2.7213565365682881314 -5.8131923093663724345 -2.4669721521859035995 0.36200150030695704695;-0.015712844048566630001 0.0068509714021483284971 -0.024947795037563027382 0.071842116937710115421 -0.025290766972965544185 -0.65099599062327051513 -0.16273906603160714912;0.24411026266978735899 -1.1733535319722372403 -2.9756614330224087084 0.3864130515732121518 -16.874345063502154574 6.960558161628573437 -0.79456586225855241334;2.6882220130176324169 7.0445878822859544499 -2.0445026458469386377 2.9733517229484012212 -24.759052903770644605 16.445993277963765422 20.494723453261013191;9.9798331414887151425 -2.9834756625606271285 0.53403563282380006605 5.5719423874551816667 -4.8016789872436822506 3.3755049631661093734 -1.8818350429849441952;-4.8479008930897551366 1.0868556157778599403 -11.918937014178546008 19.764121155343101321 -8.0204014711299613793 6.0315514954434403805 -1.0941865643057753221;-0.038588607275159364507 0.075208276277427266177 1.288762240121076541 -0.58782927805333096138 3.1434315402837884612 -0.64444334078294418511 1.2071430913968883569;-2.3534179177752729828 -1.5859905208135023358 -0.94314521160371511677 -0.21147714839294293188 -3.133354670966576272 3.3768288167906321817 4.6816652631900712578;-0.16986154961529767449 0.093248161043094288103 11.494408815834377791 2.1738848261903749304 0.46480901587311335144 4.2062163102783589608 21.549227673094819124;-0.22544473817207963395 -0.053128190846599414321 -0.52332409829720294425 1.6863381564663875167 2.8340213915336014416 0.13380461449736674728 0.94192909415641301596;3.9231738529056863207 -12.100270201346511101 -5.5905558948913514072 -4.3595118201596863017 -13.334820531236385222 -6.4893528477023467715 5.7216153236762776757;1.9482404727313316073 0.55419875242162075502 1.3438631311959707837 0.15506865276948014754 -2.6462274172387987292 -2.2105962649577617363 -0.20413142114165466756;-5.4232477785424677563 4.6411288804553763043 10.155244635230191719 -1.6882978195821423117 -1.2810880025786059999 -1.7567350341979419692 8.2227632686886646951;0.10195456181474596424 0.3826589410477717057 0.40608272595100020075 -1.1985444820377719743 -3.5765433824221126713 -0.39333080052756136391 -0.87495376009905712067;-4.9300364929239943734 -2.6417412548186507415 -0.070646396793898016964 0.50771211636014623725 -5.0024687764839814719 0.49243345481978095801 0.58378099106630521042;0.007513697006356011808 -0.14463306040253617879 -0.4201625022431913492 0.45561032826124597817 -3.4856190589763982324 3.4458441437476259317 -1.2806861050826383597;0.085733188830990236795 0.14700077548925022386 0.43015966186937509841 -0.24060362254650866087 -1.9676733608407486198 -0.21303241622856897153 -0.51032808925306605285;12.035867195550402187 -11.212786269487986957 -14.44568733195251653 6.9139065858400812203 12.324324861928996455 6.259677815083140473 -7.7569794134073886127;1.1878854402597305295 0.94520927283521116724 1.1267748755301378871 -3.093003965284980783 15.556084808500632022 -4.9349424166443380813 -4.5016605502787747639;-0.48021344984846148218 -0.70599452087248459886 1.839959608162551552 0.3263029608222137723 1.9729502835594472376 2.9150645969069342023 -1.073006340433639183;0.06135034367862016863 0.22467892989594009934 -1.2621230691526308387 0.29913223659940851862 -0.90138116114586008809 -0.41982247167478847771 -1.8133249470386445523;2.8069543436390946844 1.6400804475935542026 4.4580576740584101358 9.1258473804359994119 3.3508912144435147873 3.9041683014297987597 -3.4781806098596899091;0.20929628405485506404 0.010467342797055285628 -0.46895966866963872954 -1.0553496766364609538 -0.37594402246136932044 -1.4373171102368555996 -2.1703849891165476471;-0.027651026704618844598 0.04137934555805737602 0.056762655569715436688 -0.050741747299257372594 0.096748017685591353176 -1.4635562945884945663 -0.43483715550236340386;-0.34964616900536987787 0.032779961344861108241 -3.314033694332144897 -6.327715970754068664 -10.245831026164008648 6.7305312549145508427 3.0061140039298441806;1.7998474885370541188 0.58600301731450299414 0.58799420555919068576 -0.19954733162215662623 2.3797964286489161623 -0.68004528225170579603 -1.2263452386484186007;-3.8351350801539387803 -0.64450213569857450757 -16.960486356998551116 -1.3284210062815522413 -7.4196779786266224832 6.8694348693180637966 9.5898744584375581468;2.0564748947979603066 0.72033802371622734917 1.6289276311504514716 0.55456596750223519088 -2.2116903538632644022 -2.5749448727860824171 -0.074977892156262840317;-2.4248531263107944156 -1.6359718477100186895 -1.0013700720265201749 -0.1901804078130992226 -3.2802720578341344471 3.50888332669778924 4.7817526876590612517;0.88048864257075942774 2.1723373311436726674 2.0588777966370663819 -0.76553924433663367299 1.7537218106449965482 -1.9294666590557676411 2.3272792703425992933;0.35081661428932081614 0.17306654323796347161 -0.24458437652680858898 0.52853365693931919633 -0.49109875737637959103 -1.5555650635480995359 -2.5685681400059925394;-2.3914991584089575483 -4.728755021066850972 -16.481245431469133678 2.3576994219225890781 -4.4455271037705870185 6.370307407261379673 0.91477407908281993532;0.045313224273861668623 -0.016434863367376015969 -0.055560282891410406325 -0.20074296391536394779 -0.046653872372516488887 1.2143857952289536239 0.24529273804036422213;0.80086147629964909989 -0.74365660384903298219 -4.1745119161645725114 -1.7864689794541146473 1.8396302477225341399 1.8127858958546989587 1.7804512745794773831;3.9519043839556173836 -8.8801094535556899245 -2.5327634461635284424 -8.2523863690481551458 27.243906824322657201 -7.051381856014802274 -1.7393754269495256271;-0.16381749230448564014 -0.10520367542829922591 -0.0038570216343915561877 1.251228767806948472 0.7817981367798247927 2.1225594152495137479 0.77635507138337112032];

% Layer 2
b2 = -0.76928907066751028854;
LW2_1 = [3.0842994825456728769 -0.09084979816278536402 -0.011145864012298757617 -0.076778384140009231507 0.019567455444495941014 -9.0584753082403093316 -0.022469617765200539106 -0.0048698697549053515318 -0.013242139089561707002 -0.0036504322915273420928 -0.22159708189438023784 -1.2604660327664780617 -0.0096057082887404075799 -0.43088124696961588311 0.0058760095889225085961 -0.18519994130355246775 0.0085551384782220352143 -0.30580835240468684511 0.027331454770463815829 -3.0953520314910853983 -1.0906858557761343054 0.0039296831659325782288 -0.028390509235962965717 -0.10144682418568409799 0.3851801295971642447 0.015392620220070729956 -0.43485234983211629167 1.8619531530385029505 -0.027372939611488039668 0.11757491003237524607 0.0092900142879696594872 0.15672465244679747998 1.2128255219585288849 -0.040887935575856959591 0.33627352834735502185 -0.0084424628718257187926 -4.4338804330491345951 -0.034505684245028228618 0.0077300495488032711783 -0.44293611275754929402];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
