function [Y,Xf,Af] = ESPER_TA_7_Other_3(X,~,~)
%ESPER_TA_7_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_7_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.7866977563659700579;2.2587217696664958488;3.8900325981600425429;-2.4813328282617810316;-1.1861072971582851121;1.2306148897285682509;-2.5831855935365730659;0.27806904288581529849;7.3366301351105027706;-3.2964893392075538259;0.36695738903780339424;-1.2829794733440416099;2.1839259670741246744;2.3325228267468904875;-1.5458493384234774926;0.69608378361612188723;0.084585974500337668402;0.066993574833213984099;-0.67180702264266889401;1.5612901852834435434;-3.7818301457419090106;-0.49271365673289219123;4.7763764691003043339;0.70187951506314927297;-0.21622922822295329026];
IW1_1 = [-0.50770547578629954266 -0.44473333490034050453 2.8089109837677121995 -2.0879654481602347715 -3.5455657974555827572 0.33850128140579849312 1.0684270603634267172;-0.092218170695238410595 0.18739221197666613983 0.12083178864423391174 -0.74924319375460712855 -2.4736331856858853051 2.6211812356941139868 -0.12915801087019770921;-0.058241546093747965929 -1.8888177115602622358 2.0025217554316014912 -1.5697249682018248329 -4.4274199744257121125 0.0032243495493209013182 -0.18136416881898739795;-0.021373192797321825809 -0.096139652956670845763 -4.2979220984355244184 -0.16141690348800449839 -2.6679772282425284757 1.5655804595533877599 -0.3424801579084182368;-0.36337971554101305971 5.9508825945573811111 2.3342584251774174398 2.8583611383840428211 7.4409681359952495328 -0.20584522904805771515 -9.389670969778119769;0.32289782491054019875 0.14575471510927198726 -2.1853199831061478342 0.67288938689940602789 -0.30613223609484846444 -1.0883845523810635747 0.19351010104999943895;0.12428593534213225325 0.28510491624789935372 0.6930700278250554458 -3.0632561415125199034 -3.0068095740042584119 -1.4839054533275410908 -1.5297283650094624097;-0.1656341786660504023 0.16308767646711475052 0.03742570264384055545 -0.16036663619308513806 0.68828751648276254027 1.3208740817007520452 3.3279576706337059555;-0.35498783092502583791 -0.79430833356800090161 -2.5787827324602519141 3.7572356046866786095 -4.3018162321239383772 6.9052930688008320459 3.3030733513867871487;0.74230243941454843171 0.81917933578720114607 1.8085595707668320475 -0.29998615025490393826 1.9868097755247997593 -6.2862722894757219194 -4.0845462038213815603;-0.36720111815071743155 0.52736200689519618923 -0.90748210287717745448 1.1055253697586375772 0.84559645616146694724 0.22169582579525956567 0.61220653998265173179;0.60378991705346996 0.077945114729170705825 -0.9873876780786107199 -1.0428722440509399227 5.514496565758022939 -1.4107938102507595612 1.6151542153666329504;-0.041120164610168104258 -0.42528966584401839413 2.1110934906155902624 -1.2753694767909802277 -4.8856169315551420951 4.8067950201412470435 -1.2756480527158691185;-0.061503366601561276772 0.044263798503585721766 0.049975102144961029704 -1.0559837306093033948 -2.9594023287632866825 3.0358169521202111873 -0.1946976350173597603;0.13513910094891057323 -0.089021338198651933649 -0.13546481412543129319 -1.6996776730298224223 -0.86890172848401647787 1.2971091465741819704 0.39531176717904703555;-0.25749580298791496791 0.22129252174067745584 0.044723789191459965842 0.21491750905108325531 0.84438959372057498243 1.5663946932486856323 3.7950396913245474373;0.33663077691985704432 0.67306189673139704688 -0.4825144812203913669 0.65194754098783347374 -0.79931046177514097906 -1.0145303454017804423 -0.69209743262104450601;-0.13322894194109469179 0.0088018467284928288835 0.97033795971528746804 -0.17444920122939869267 -1.5178180498070226179 0.68214355671654458568 -0.13365728140595908857;-0.19454196431373302345 -0.11144057276379130961 -0.85099526843686268407 -1.4060401540542930565 -4.1891146844800255522 -0.70019046597995449055 0.89924472628744223091;0.022108755479184886983 -0.063365353549535471944 -0.087627075130497084077 -1.134866768049873631 -1.4652174911363387011 1.1913892146619839973 -1.8723241165297572763;0.79913452989757927103 0.89165859457101881436 -0.16369302670790714105 -1.5143915319900906891 3.7499747640077663036 -2.4825107767708338713 -1.6883084782876818242;-0.18542699373528628848 -0.52019866171264339538 0.35058704075892843655 0.80777971932464920357 1.6443324386976974072 0.63324343013998052321 -0.4593685209430880545;1.3356840454377050253 0.64727598038292555316 0.22957842734338337887 0.24900954374062672647 -1.5012409759699756329 5.0609368407421930769 -0.11033184301555502838;-0.0077356793085009310437 -0.0071107247381800688449 0.59569145753615015959 0.84262426870915918542 0.44102053309528949088 -1.1739430611872068155 -1.022688652766664541;0.12125103492491126622 0.058378032650666086822 0.54108831477613661409 -0.86029913156512605177 1.8782963459657435745 0.0069875585829607860314 -0.069291900448021900849];

% Layer 2
b2 = [140.8956867771070165;42.471715757340398056;-68.295855434862190236;-53.570295582706371817;-139.36873992893643504;-365.46661389217126725;-1.4055391585685326206;230.65274723622999886;155.2867144676015414;-501.24008985843738628;30.201918072671752213;-147.3039782254688248;9.8582729676403975105;-50.239177028994625118;-924.89616625871929045];
LW2_1 = [239.24437256227912485 21.028326435951949946 -19.697890389023779534 -3.852056530254401423 -19.605599729819072508 0.0086049050395501751332 -15.35547165954033666 -83.713176112932870865 -24.140795024954059045 6.2691905345296339291 -44.580641705398200259 26.197468572696323008 -11.352515285946724433 68.690616595095491448 -16.289080558744448268 15.88735040128080378 23.761751533616262577 66.247458218630541182 -13.090650541699082154 74.451957154251758197 -47.38807204930452599 11.291982642182450292 -5.5651785452548656608 5.2151467123073267373 24.448851601653892374;-0.54832398503665080725 12.197980562634345603 6.5115275432439778669 10.522483283416336874 -1.0898818919730364208 -22.712879639233158002 2.4323985448802094567 -17.969539809807898223 0.20640938138588407758 14.78574686758166834 -26.924454269363945258 -13.209966384387620053 -4.512425033853197931 10.985758786598504244 39.910788736676984456 8.5631329283311909961 -95.45684993104400462 -83.376957596116852756 20.994814151809229941 -1.1763920347458676208 30.999393249978357545 38.777148415891133482 -13.691904513857927839 17.970408122621755354 -51.328741719262438892;39.686746994115168263 -13.435021871456658715 -16.245137160017826261 9.4955740954614515914 2.8357658663531415399 -46.16261864508755508 32.792164518748656121 -55.427997413876688881 13.903092672738901925 61.430723227817622956 102.99989745549386555 -61.742103125536559105 -73.512533589354404739 22.302098758364895303 19.447678078523090051 34.848988834879975229 -226.10433675577388613 -154.62058016519245029 -46.617976308617620873 44.116534815887362697 9.8425865415486963883 -19.289575314478224044 10.007868647548981755 -51.085929476392742288 167.70490038172832215;31.27157364256358818 -24.533222647360119595 -25.145082816533264491 -54.72415000694409315 -29.215958105334070893 -38.934888813126249829 -5.7107004282278461815 -186.21749327891205894 -24.546684123618636164 -91.989019608798912486 -43.538884151871258155 112.6122533371179486 169.34732234421912267 69.669798485084342587 -86.953114307334018918 -3.0722382287731995198 10.45150572514626397 26.763275448797614331 47.303972025093635523 49.511056492918960714 -50.821340323570865394 9.1823658406603652082 -35.458472444174780946 -86.975894570648137005 13.397794204951098962;-255.60266625897926929 83.338321762881648169 -134.98126585857761484 154.30549735255402766 64.07147008012407241 99.617156064904676782 25.56582422961160006 111.0002162165199735 27.779015552628791852 -15.704331079517212189 60.636938290130117934 70.097584751757338495 228.15430233873749444 -129.64270425433844025 9.6496508819243107524 -123.0543148776220761 298.39481236602995295 -194.55316759489215883 -222.03814656031354957 -151.7922466594258708 -247.15886973128237969 219.9988906819250758 -7.1151536976737812523 44.083038168462330475 194.24781083394199754;118.13149911700629957 13.791618353838032363 369.25366810243036753 145.00225617719939919 95.41468559623487522 39.805464018123075221 88.166641578048228212 163.23070740370371823 -56.428149431285419269 27.426114931762921145 192.7881499369275673 -22.84667480567044251 7.638058625007778879 137.52154502684823001 -66.873623050513415933 -21.711914325688226768 -26.497879134451363115 124.45329002999223178 -184.35136982908400682 -79.676904139552419792 -31.029718720981477986 -110.69623703886951205 76.363626591292387502 -84.569117674333583068 105.66816322428557839;-0.023613082279048760309 -0.21895716702325626613 -0.020930767325929119926 0.027281583740262894261 -0.0017736485760639418389 -0.045363075686626661009 -0.033992668577530818497 0.15635304399937893782 -0.016639144276127115774 -0.0069297246102274631316 0.052999865639632159908 -0.018874288141694478549 0.020436220542934067229 0.1987871162933851632 0.14171041356117503041 -0.11832120190167523532 0.034868332177078097123 -0.15255436204957603663 0.030823402217290209876 -0.084896156418132334709 -0.01709250016171108208 0.039983706640567211188 -0.012635642686472292953 0.19272059610459363332 0.19009850661281521567;197.44442113562078589 -46.877585391139852788 73.529478649349428565 -30.317812839072697528 39.302825039686211994 61.287945351721070608 51.621203569099620267 190.5104415277300518 -26.933605776645862306 -2.3612146555161586114 222.2344571453035087 -53.688538134815928515 -57.233462686020970978 -145.1762851462681283 40.721345785892609115 45.089756646239138149 187.09251201283603905 281.8814540934634465 51.662577223120457859 0.28802023448609626044 115.07025376218194879 -17.248975788631423001 15.629754786763804475 -26.225127287406419185 62.35309498705878184;4.029341169407751444 -67.804497028999762165 11.496962935534879691 28.01110591689263174 14.313065132960051784 51.428338270145772526 -12.154437679969850805 -45.238468102090635625 16.25347559155964916 -25.750766424533701127 -101.52736984373935059 -45.607569522840137211 29.616164088808666577 -128.84605807895698604 8.2935741580131452366 12.747257476638718998 49.167696832190770806 83.838927051128166568 95.833096441084904882 5.1154726979417874944 13.085313698833086704 -81.204809319850980387 27.576392209263346444 -155.0059468028466938 -11.995921757507330696;-70.636117010593537202 -21.815673371004081105 51.854089826575389566 157.3666416892041866 2.320240809447317254 -36.265915137413834657 1.7033171386771954747 -65.140214783454453595 -29.765658401105199005 -45.529613304044197264 171.56429247239805136 -1.2288643118708832969 -36.750219870246681353 213.4699387020611141 -58.558153949951460504 98.278139056733365919 134.04829084521514915 47.235838501034557169 -114.85825692284331012 34.852350575715199454 64.219696814692966313 -26.130980248435442093 -124.53322888411180713 416.87458757568839474 63.307783226524904308;123.27012810550235145 54.630066432933759302 -44.23252623163554631 17.278436669120523561 -32.812934229299152378 87.73428635734086356 -10.702131458933386909 104.90373517186763763 23.947039227211906365 51.693830482925015701 -62.486348131276635343 -21.838159897068994297 63.372650579709407737 -60.523320848612179645 -26.203732478207335532 9.8274541584062458099 58.446842471545110698 94.073704529841208455 36.51850251748479792 42.078137096361359681 2.5207151483340948239 -100.1810495841788935 58.61428943935161584 -212.97974102871813784 125.73318400677273132;-88.576568214943961266 -1.9473964633404563518 -16.539463836706250532 -35.811376357615955612 1.120215025174236434 -8.9247916510899543141 1.4801114812786206887 226.34899605696691083 -11.227649840376557222 19.56637737398802912 78.952818597401616785 -4.4064652686733758458 -28.907737923232318167 -3.5383138105276961127 -29.267069176164277167 32.783206743130421046 103.37323099064926168 -10.401184668093257812 13.098611578021731816 116.20609787693749126 9.3749765695970879165 20.625264727681816623 25.360481911089660656 76.355858789556094735 41.709321711389478082;343.40645367516839315 103.30168672675885944 15.32284933193515819 67.531834087066840766 -104.9853011991977354 16.584908862225042014 48.824482274585271568 788.48319249329142622 242.09391064846030872 140.96029179186365354 295.4226789838158993 -94.264279956566142005 -81.369373251348946496 -10.677943666537013101 -216.92554211853638435 213.60080633564621166 -293.12633015080183441 76.503871852654327768 77.881592108764237992 -335.03525526987817784 216.41053118351081253 -182.56503237210864654 88.746994284397757724 310.56983164330989666 200.3912383488661817;-11.568919411694068344 -0.87157996337822352118 -4.4820476752378546337 -0.65015514637292981526 -10.991177824777000893 -7.2968019182486898444 -11.396694104818793747 -129.10810920329063833 -6.5466350514726423526 4.966881196690296818 -44.004428725221096386 9.1004988827275123953 11.622048709553130408 11.671467379686976784 52.361476892868104471 14.066127026859851057 -161.45519270620758334 -136.32472879859574277 60.920825117723850894 58.837950104269992835 11.143112320001154814 -14.352822447457345589 -7.3469704121757164472 67.190023395885447144 -85.646801133731003119;-389.05122042065630694 152.87042314052720826 76.647244742045444355 -2.6204269827558284156 55.687212469628498468 -58.501447497741921211 27.026380742666489709 -192.11983912998704227 55.635113880247885731 -63.317347614794776689 -0.89693729254189635824 -66.610910194858846012 4.363882879486662425 -186.10251878334901221 -12.520632213671422761 112.94333012190922716 354.56760557581793591 288.87941811671618098 285.35909812803112118 144.34775867317890174 71.321094155113371471 70.454761306320037306 210.67131544486426264 37.942556168814391526 447.92666747281515427];

% Layer 3
b3 = 16.952425513186462069;
LW3_2 = [0.00097695367679216204952 -0.0074862918138553502523 -0.0040781726321698899204 0.0038075290348015258454 -0.00026354445733808601771 -0.0018868940178936933257 18.872469640737548957 0.001675992090734093479 -0.0042438291796818208151 -0.0049274512528376182563 -0.0030700583450502089665 0.0013793194156524310381 0.00095243174350165043986 -0.0042772218181910083221 -0.0019778438447705030782];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
