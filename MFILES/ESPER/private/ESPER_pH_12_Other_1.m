function [Y,Xf,Af] = ESPER_pH_12_Other_1(X,~,~)
%ESPER_PH_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-6.1524105649194789081;-2.0134392360341903938;-3.3370382166361833853;7.906461883370239363;-5.8551207653736021541;-2.1947247047324891511;-0.70142610730466270486;-3.9179574517933013489;1.1284239207041977249;-18.156030573856988042;0.60806607600794460033;-1.0736257317819279944;-1.1605844096884951888;3.9456523079201333282;2.5364911021264942015;-0.21102243422761335356;0.013346170265626870408;-0.040559025292108155658;0.083143491948401648806;0.10001008868114873163;-1.8406343398012259271;1.7038401554292279538;2.9317753913484754236;2.6090551890862729856;-1.0776051473041283746;-0.2242086212659288591;1.7235699971158497945;1.2192388513238638925;-0.741890956254395606;3.417713210679794944;-6.1828625294924952627;0.34122639148889660765;-4.1630953546049225267;0.70612734932287724021;3.9987756736193729168;7.1161306311268566205;-4.4248672573856966395;-3.0751693778889190867;-1.374211502753282188;2.6852662238811428885];
IW1_1 = [-0.41863384356521904373 -4.261088785475591223 0.7090380191342253724 -0.1302306951481121966 1.3657063409047554003 0.79972242861289632998;0.23917759889087000791 -1.8644017952435101293 -0.09977006277678808488 0.013406876773593662949 -0.89726679910088114056 -0.24278052429756558084;-0.039495399637015891903 0.04815333341186237015 -1.5203395417257745681 -1.125836608861612298 4.0063953352539387609 1.4237577791190991761;0.83174256843098748337 0.35751285120938358641 -1.8257385762154574316 3.2066795192055694841 -1.3346437355779678935 4.6165030007283984759;1.4331155096136101168 -0.12887187156272311706 -6.1156242614981781713 -0.6337313598521857605 -4.75213351050079158 2.8471385525419568019;0.70671272708036902976 -0.97322907101433031585 0.99320877165216747695 1.5705049666578658751 4.7922024787313688421 -0.74263450948621179126;0.69963903761904588929 0.052063165796295864107 -0.71184372311476784567 0.65605637505584690761 -1.2187179384354631662 -1.7310044635912065214;0.87991309413404461548 0.76013526907048478698 0.74424234351703866253 -3.1126204729975071039 1.2747651685127867616 -2.2482997375013837882;0.29626021080935188712 0.64670133043972510833 -2.3366529990108069192 1.2403707371582237684 -0.20257104542664189362 0.25795421985630873074;-0.079470932641763664117 -0.49003462059267044459 1.8843307150040315978 -8.4289280585165009541 0.92539275823745803518 -9.7314211774281993428;-0.21517829708433239277 -0.010474074162182257092 -0.89265600036876935341 1.3018199298123296348 1.4889150646024249536 -0.47929854006584576842;0.52254414115197544977 0.073369294674493365505 -0.21406053215175313564 -0.32737290324865570001 -0.58054907463154969971 0.26260160508596497309;1.6388056477464210126 -0.84111816517773840829 -0.98883021231275791685 -0.2728471719928899919 -1.0215526047583725067 0.15467734521663820124;-0.89872017018383765219 -0.80476248873359546021 -0.64603687774905893537 3.0779992940939409074 -1.2058470115106472154 2.2124782323876108769;-4.4482576796103829864 -4.2112470977148692697 -1.7204620869555984353 0.6173442271523463809 0.56703842671117576923 1.1199145957708411814;-0.058560697545794695995 -0.17808548631071569046 0.70576448607384001388 -0.76969888314629042458 -0.77074121036927134565 -0.29447614742759703477;-0.037448076919689848863 -0.10277909695615670971 -0.57297280699187358444 -0.36882491437973907722 -1.8966189933869113116 1.6521312467347137876;1.4232225275530829833 0.39442290764857257379 0.023481947859366313763 -0.14113889545638977352 2.0632373727011845688 1.063905546802359714;-0.021538333236458317987 0.10791316720634606952 0.5007802303806924149 0.44978532083431421729 0.7067667146900523667 -0.75979441819662874025;0.51283315854043076687 -0.10580655198362003133 -0.19558863222398378823 0.24994041940225564247 -0.02414506221753993237 -0.99348596160063995519;-1.7125007874619240233 0.53880510627454980543 -0.050885139400523193842 -0.56758295917760070992 0.79081782521152366172 -0.72817467959107295972;-0.29071618793019815552 -1.8479837624910357974 2.1940003124804161594 2.8989921769634636739 -6.7186392500484162227 -0.022248857684831944981;2.8463371981567098246 4.842538197308176251 10.021005421414116654 -6.6577790690441380761 -1.2326038716686316121 3.5670510230918637262;-0.57688476271475719326 -0.2985798379616487197 -4.0159996562495212657 0.14130893462911900404 0.053000915095114585485 -0.79373351033183325853;0.086462742062452982439 0.15567931963843370524 -0.5944277410182361443 0.40252807044086347243 3.5578549623528901158 1.3467077044151887222;-0.024085675334188878793 0.040396906177832168916 0.61001273667318323124 0.13902957482669550671 2.6345313591725170177 -1.9711526284436071688;0.45508612845514007095 -0.61138960342814430149 -4.3749863401140993702 1.639665887379793574 -2.8307497255672076086 -2.0389386308630896849;1.116743423009362024 0.67109992113733052399 1.834448536380707484 2.371544322385277237 -1.9793758863843564644 -2.7161526591031397437;0.23290755319307474003 -1.1683515055072790645 -0.11507182502996624041 0.42112909437695134063 1.5149563093218634258 0.18944410959012400464;-0.17866735624287308215 0.1349246700932001386 1.1008321190495711228 2.0258180852982090592 -0.97434082996502868745 2.1632324262979958363;-3.8004983719599048086 2.3524781994824097708 -6.005622093441261633 2.8156363903984167329 6.7006456070885240806 -2.11636201538805091;0.6153574215783905732 -0.059506093236609089447 -1.4847000509687806602 -1.7228937252770413213 2.5801727418971256434 0.42430783370860153392;-2.3647965789542100268 -3.6327861841287938383 -0.57650055470054428763 -0.1807063296928767826 0.024365941679645466977 -1.3776191964427504377;0.74295251363810588252 -0.036519231113740766026 -0.21512628955007156994 0.61894392719484558896 -1.2857502280080812529 -1.6933779942561348886;2.1876202990176421004 -0.7955890885152318015 1.4858894172864316463 0.91508722801949593517 -0.15345683289343689526 2.1870156979945472031;0.088990664666156196749 -0.88189710387098496636 -10.221266084117401007 0.42037093738303077384 -3.3498243930980047267 2.7461370814470686952;-2.5896029342853741362 -3.8671931879234633378 -0.60261527869209230435 -0.1314898174582926349 0.1514683696678015834 -1.3995134348679725278;-1.8408428661549731675 0.7520900238138190641 -1.0438999608614216719 -0.54086502137102243637 -2.0897238786708580704 -2.4514905635643944315;-0.32612092263133973802 0.013308256697495480722 -0.90418995555088244043 -0.18906825576246172327 0.1810556084819913425 -0.024787653838330491601;0.84633729851433314728 0.18607228364001748844 2.6063562456246320842 -1.4745555442158111425 2.6031689084914972909 1.639095929297501586];

% Layer 2
b2 = 5.7763380646621076409;
LW2_1 = [-3.5547214315715960353 1.5272575389825941983 -0.84098066634616563952 -0.25161692242171374012 -0.22589131320263319824 -0.23388492645228992073 1.1555909882636652419 -1.7474299647698070537 0.24827304368650299216 0.1529067374621570774 0.8835704051078711041 7.715961974254375022 -0.40533263896546511962 -1.7557395305641159133 -0.040530011109916323775 1.9920093331304120632 4.8861681705327191239 0.63878570738093531922 5.112674345494001571 -4.9062348781515501273 0.67899123223392776616 0.08139988623149638225 0.037550343508592869124 0.33731789587263544261 1.146086283892959079 3.3744882155380908628 0.16376584389649548323 0.10515284294558020772 1.099796041276676517 0.27303329851595692368 -0.034119166664298934688 0.32773054784284127994 1.4759867199494576262 1.7321183914008428939 0.38097720064852297339 -0.10046668891306105575 -1.2983852630062810984 0.38691027287285811864 3.8885922943808615138 0.43075376171926743618];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
