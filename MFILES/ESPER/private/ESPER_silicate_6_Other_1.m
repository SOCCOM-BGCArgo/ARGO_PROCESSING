function [Y,Xf,Af] = ESPER_silicate_6_Other_1(X,~,~)
%ESPER_SILICATE_6_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_6_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.6756391614763437303;-0.6200935767584759839;3.1654138459371918835;-12.593288327456335196;-1.7355153150151030328;0.64687643445177633872;-16.883995749068883896;-3.8721515153725936109;0.99165013299022197746;8.860155718748583098;0.72006094176479085167;0.60461791003309461878;1.1077555302109043378;-8.066005640091901796;-9.1277657760625121597;2.3709826220263527929;0.66489529850605999517;-3.3210562819677398316;-0.66875405332257009672;-3.5882137457853988671;3.805117643009617634;1.2080912895229867221;6.8847566611017709803;9.4661230135532896668;10.742043501404253902;59.828148932156651085;25.370669534944418899;27.075191223852307587;2.7890871838141757522;-0.66969548510020748822;-31.410993797848888676;7.9739151094003899445;-3.7127955499025442343;-0.96665399030985210693;-3.5276343444310152009;-19.201657510928505701;-5.9140479484678465383;-5.9784335290576224864;-2.425869762182631284;-2.7448621946808247074];
IW1_1 = [-3.0394144799774243104 0.38649659158622562405 -2.0032723217658134907 -1.7028367984758707721 0.18956092449310935066 0.60160907913068129016 0.31244368305375869177;-1.3268906535768185684 1.2047158523220711235 -0.16048767166891036995 0.84634277601566942906 -0.69338314097492315113 0.15189408843456350673 0.19141505416070336842;0.16081883182799605603 0.24029264001005457008 -1.40617733117269883 -0.79677409429576773192 -9.4305861647780435675 6.9178139124062481002 0.8344380046816507468;2.5492900937994833477 -1.8631932004185254304 -12.304626241355069993 -11.032720728959670708 -17.577181959565411518 -5.7640041787487845681 -3.8483032226429916278;1.0073092994056818128 -0.41543146778331085933 -6.4845913480545291918 5.4143610934817489877 3.753360088296848307 -3.9768313377223099003 9.4315875394026580381;0.098246733682586989689 -0.026450392036238761645 -0.37498324098697166651 0.25465386596708083911 3.3477672334915791197 1.0452628226033926495 0.84033073044424688725;0.41157696734468252053 4.5784868624492753852 -25.639782473937781759 -41.440997315076060659 52.862845920284605938 49.17255790687891448 50.015661482852046049;-1.5964121288227888229 -11.16396678447465618 -30.599156300019608068 -2.0004644749625684064 -8.1589132013864986703 14.686134570527579868 33.031245410661114192;-0.03923203283706759581 -0.034855744980937672373 -0.02585871667234079796 -0.64650511904981444733 -0.75009458041867704825 1.1943041685173518829 -0.14824305809223695118;0.021326594943072995497 -0.33940161802346263675 -2.7591492756371995831 4.6112822255965006946 18.327082731884967615 7.1876615749910612863 -0.88492841988088322136;0.23052488824642397569 -0.090585615379136133485 -0.93710154844639959038 0.26894928339916540638 3.2845189788118762664 1.2667056450852878235 0.85552800630811220994;1.2840849489411858553 -1.2279811785158538662 0.13600168161658096611 -0.78397623516528980314 0.74492848284752111176 -0.1274195652216748853 -0.20089466213055182098;-0.052456988314069738499 -0.022998377362393854911 0.024551832947475166896 -0.64631394073229231356 -1.0257608670881239732 1.4165080558161067259 -0.031273748502804392391;-0.044741525468107654073 -0.02282053027339911791 0.083065580922929538321 -0.44178607840775774296 4.2425331482330372879 -9.0582047398391232207 0.18612908379581077911;-0.091321059499465104259 -0.026474376010077644433 0.29971869675024592761 0.25245857611596950187 6.0526134791588948048 -11.433618792616472959 0.55186034076246759383;0.49299153265631318055 0.97232821241189226757 7.7087548309758036069 1.0197649466066069923 12.390206591877161557 2.2197510821201604791 2.8320057024654334832;-0.13126037667758222449 -0.14080746516160186355 -0.81908568668805747937 -2.3038192588505022051 -8.4287980051231770062 3.2775907090775695529 -1.8837610610878368078;0.56291343687266792717 -0.93663424916894288952 -2.2760173950634410289 0.73932720092484083274 -2.9007628754866754406 -2.4005115205628237973 3.8901612622561847488;-0.16608812247467874545 0.055795683058460943116 0.70203490235727283864 -0.24489400358001067737 -3.2739031698256129133 -1.1546591982651679409 -0.84222051009472420624;-15.176428278260289062 -3.3434920175219029481 -20.864745665123006546 4.0555566730827630195 20.61706900963226019 8.998428085773502616 7.5521409824369944985;-0.72842620322431650415 -0.36493721961837977119 0.0090890549564096936863 -0.044369217711673833437 8.5935455663678137483 8.9762844225448059632 3.0456618251482598936;-0.10899562038969068389 0.11272677300718132731 1.7420101404492953634 -0.17716242149410132978 1.5347388368274230697 0.087655556093615111246 1.6636403748599402075;5.1440167530984979294 -0.67934222360714258127 9.6097657419841926441 -0.17487930787247879527 24.402964497216864004 -1.9053277474657257518 -0.52742780073257256035;2.5668631129503731714 1.5493150986799424373 -2.3716257782498346707 9.7208989716912768131 -11.802034710514801574 1.7827441953051770263 -4.7800846262781728768;-0.046159424307790686282 -0.025358023387895108763 0.793555390912350056 1.0764521974815735028 -7.2719308915686191597 15.405382090263934458 3.8784470072930341544;-26.471825359926739907 -11.072840369042959097 -38.415628781124937063 68.15112949421080657 23.476835071651365183 -46.838007409056793051 -58.728704123260634162;24.35616944375509263 -30.459170545408237984 4.7593398474054406933 -0.16112390165567053169 26.023245500178518341 -14.283720515966880527 6.1106999401625179402;-8.312996499335996603 -24.563370748233975149 -43.484200113330409465 8.706270951261412705 -8.8159523286262277963 41.982399441694241204 5.2567611810857419741;0.52110696109768717132 -0.34756492682703576946 -1.5729874794820180028 -0.50020203453081835132 -4.1907972668300317309 1.4708875196258217599 -1.2517124539787587434;0.010482695217609735994 0.036239311175369708085 -0.43902316307026328923 -0.43367927303918729631 -3.8585501543442073391 -1.1110750172050265494 -0.87532742806427732418;26.739793425169690266 -11.315758330092046791 0.89574416371529141934 36.929440692349629671 -68.229497083911056166 19.974750829777399019 -36.303499031117397067;-0.27705729616184038289 -14.375194810561573888 3.2416270974052316944 -9.7159793377429668482 1.8350241256886543617 1.8678532680551003242 3.7387165441599470306;0.10019561531620997663 -0.042799163795921628395 -0.60816405228715286757 -0.43438770324300129966 2.1709851318287416433 -3.6629251913458880097 -0.17012788557856159399;-0.3030963951304137538 -0.93391893548212190357 1.826787030170978543 -1.3522939273231702195 2.14574320620529857 1.5660400485143208815 1.5911757777456831953;-14.45895873458692904 5.2914154850858619028 2.6788828951932397437 0.58375896664060522578 -3.0003445618256741056 -0.6243386212412157521 0.09710655245704774563;-4.6915524931119767515 2.0650827054947757944 -9.2228277223460572998 -13.976814477988423135 51.575574862226773121 -14.33900644661067858 13.294851138816992986;0.86672689179643103152 6.6367073634191759979 -0.023699354353170228038 -1.0268934005489382955 -1.7690452742441900025 0.53834362943185432027 1.0922887844271509383;2.4699117025205694631 2.1716926450035591856 -3.4026695739471137792 -4.3441256048138150447 42.414414818895302517 -15.798132117379987349 -16.109402067335143016;-0.077810830301892411343 0.42502047514821789109 -3.2214330284560572792 -3.1266761375102309906 6.1280392549096838195 2.3064698245025336831 0.20041551209743724282;0.58067540277076190591 4.0520383673352151632 0.17432455436032118223 3.2299201296473558642 13.630467459750647663 -7.0653772180507061762 -5.2911405170897003458];

% Layer 2
b2 = -0.6307777835638070929;
LW2_1 = [-0.033472089806279858859 -1.1899460065503486561 -0.20980080754597599246 -0.016847385080859995227 0.031720011858752027167 9.340602240201301143 0.0037055845575963202929 -0.004245196666651109875 -6.7622659933055357939 0.026468941305235048345 6.9165594210302385747 -1.186941492280562116 7.0725899681694874843 -1.3714154929650461678 0.73397729782874399085 0.035282418185486962015 -0.12144868800928904085 -0.063787926216974807914 14.91939917193349352 -0.006027264791873118352 -0.041587170009490297129 -0.12334645820168135821 -0.019389317796998810361 0.017129979430225098641 0.11061584015526941538 -0.0062315062994341280378 0.0032975774319376881943 0.0065036894824723355188 0.36397539661693578683 1.3393402983855811073 0.014255905033930996173 0.015512550442504815726 1.5532841875527496622 0.07754284566957152236 0.018969891516179983315 -0.0080692666654794669573 -0.0282295758320823785 -0.014693623444676921427 0.044034623098219836945 -0.02546742402646483272];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
