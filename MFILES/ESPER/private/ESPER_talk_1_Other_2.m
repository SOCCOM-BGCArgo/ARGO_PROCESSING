function [Y,Xf,Af] = ESPER_talk_1_Other_2(X,~,~)
%ESPER_TALK_1_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:43.
% 
% [Y] = ESPER_talk_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9211180601327267;-0.069923837183868173;2.941525110990729;1.4212654319596325;0.070136214531825822;-0.24992684940528317;2.5933092043394832;0.18615327271862339;0.33856106563427163;0.77258271141977675;0.53330689020244437;-1.112659819498117;0.39713814863604191;-0.70250920628908708;0.10070658109308242;0.14738382332725747;-0.35768768315144456;-0.83077791680767654;-2.0424772411137573;0.4342079169314258];
IW1_1 = [0.57936717689201001 0.25350736049186362 0.59031608108868994 0.69139281582890411 0.64242405510954192 0.11256573398035961 -0.52381166053531669 0.3086843433517068 -3.2038864511344816;-0.77889961398325058 0.14723114993453612 0.13108163912597326 -0.82124896533724501 2.039366792897066 -2.1288242581279833 0.0054547539406692921 -0.85526981294598703 -1.1886269085078196;0.12737116940176954 -1.3625022500255966 -1.8514181629465221 0.18964202513278922 0.79821796203626438 0.082740386591090634 1.0592196039614219 -1.1826392109154449 -0.38463326342898047;-1.3794201180569938 -0.81007682878753784 -1.2497880121827802 -0.28428532070253537 -1.3895198402714073 1.3070464953512038 0.49113041184028272 0.10504496338341718 -0.27775965994562074;-0.4972653185264731 -0.23751352381224508 -0.36452453076813662 -0.64606352658397548 2.5372282032496845 -0.81097699370736165 -0.13842327374927299 -1.8631974792862505 -0.89628629766763213;1.1428768235674571 -0.33203430957876673 0.47227246845013765 -0.48187748170143291 0.5888645448073262 -0.79405052358497075 0.55618091750364496 -1.5156465487721287 0.074630339541248578;-1.0911049317514341 0.31620852574163244 -1.1512209035864829 -1.4913155414571839 -3.5967513804134081 0.70619918093241496 -1.3022104529001364 1.1211112923368729 0.70094620361868187;0.9416280062653305 -0.99082090124018729 1.7547737704942272 1.4615177960438803 -1.4256568306135258 1.046002543565544 -2.0082333116967641 1.8471345071312582 1.2698772490734522;-0.32584170218397707 -0.003035582085332022 -0.099294678950503618 0.057747196351239191 -1.2716734519665245 0.10604503403550426 0.12876698545920223 0.14898265451377612 0.74369738214415604;-0.20954681798113353 -0.036509187634205076 -0.0096940067441765778 0.20904946781469608 -1.2959747144922644 -0.25896956699191542 -0.033437322835052539 0.014397585244109598 0.52905994618395902;-0.32728125381748846 0.17508799581330267 0.057965851917532563 0.074812208294029459 -0.49899433263274018 -0.60735474125098154 -0.14564335206893309 0.045562515247111621 0.55788986989266998;0.72432027347002992 0.35189513505319769 0.15063118211914914 -0.029605595690802733 1.4278602602829413 0.35255150918325501 -0.17262194587701038 0.1368823992246751 -1.0275889812274746;0.60340262474545181 -0.15874095909111169 0.56673823827619307 0.36481227901296365 -0.85018057672396574 -0.40470332681833521 -0.13604078522977764 -0.31548875452561564 -0.37183729599944843;0.005670997420889879 0.02662368513987946 -0.26477843260848088 0.01624888284486985 0.10273793447264255 -1.2266286566361924 -0.49592858865945127 -1.0630299709731765 -0.37550994804919713;0.17833772147068835 0.0060078474642343178 -0.12563391992028428 -0.0089215620119109523 -1.0595673005473178 0.98872487316238378 0.20107089610121623 0.8506419549917027 -0.21850971724843088;-0.18253741400028362 -0.482672845936579 0.31851356624412297 0.18836896616767368 0.012875850881982832 -1.075762286329788 -0.41635307528966675 -0.91491822719543114 -0.2195223900148838;0.42965263701157691 -0.10169136761417466 0.150101644716118 0.19429580314068429 2.9236120226074633 0.33118267341074398 -0.18410762446551238 0.74270895155624805 -0.81272391737872196;0.18549877749977603 0.12893102930613834 0.24389677183216546 0.26730708854329077 -0.092593571641302858 -0.38842441466145089 -0.15682529478430129 -0.33634549076902881 -0.97191331767989186;-0.7219244250741671 -0.54694804812328102 -0.32634465605254731 -0.44381366933553845 1.309659118437984 -0.13923955301746435 -0.30101973546388527 0.59222238974284203 0.22493967533095321;-0.5863391850071431 0.093997261804957183 -0.27400166714113477 0.22808830485274742 -1.5521991203648586 0.18524035260374078 0.2040669223447312 0.083855909734607867 1.0138569771996835];

% Layer 2
b2 = [-23.437499332163291;-12.968871359433926;11.417417990440578;9.2914540251767104;-3.7656438317041561;1.126516940383103;1.4285933908903827;-3.0603696754908309;6.0816851529791531;0.51247259866377015;38.02589351306343;18.287556045474091;-5.2608195581600352;-0.12896052553207671;-5.9422180630220645;-6.4380745249783766;-17.826012204603792;-6.1624984440402049;6.0638224730361401;16.986835462310477];
LW2_1 = [-10.219673844022392 5.1838344358864292 7.3850516532286985 1.5110727834374362 6.698627127052653 30.077768022256677 -34.619949110278434 -17.502065046610927 -17.64569562211236 14.177631137755832 -20.044270452568579 -24.948675999903433 -9.8113356737445621 -16.221573152571931 50.565842717962028 36.169140860173059 36.824306637463614 5.8694398934602994 -7.0320342041309356 21.851997229130447;3.1066806998986194 16.300364469707102 1.1133228994347506 -0.21684604877065811 1.978065413462093 -3.7007530279690393 -1.9569521674192862 -1.2915850202168617 9.871113792673686 1.6555060477816381 -1.3056875151927438 -1.9068882469971633 2.0114899136184246 8.630508610309608 2.5484655360760233 -4.8565836353559666 0.67929120350568961 -4.0586325505611667 2.4690863504389671 -6.4470454088228184;11.2221650558278 -9.3835595939482292 5.0152032852180675 3.9903799708948116 1.5410872550398744 5.7053500548326577 -0.56191281553944694 0.86010174532123584 0.54900616936613977 3.0531105459325185 8.09890465969956 -2.1867859108330201 -0.3163326208353 4.8596994155514031 5.7908383258752538 -0.15210759951772718 3.5885174463694507 -0.67231375586328279 2.7904983420648914 -1.5340107215811774;-0.24180317569429927 2.7920367280219329 3.5942626635077191 -6.2911908849576443 8.3153205132593637 -0.87874908796549633 -3.842693420077488 2.7207307414956952 0.32786791452089953 3.8553227314769436 -0.82625525651358933 0.58173329397888229 -5.9753032942751902 -6.6604063643115765 -0.026207550166044417 -3.3283976414414944 -3.1849463973695951 12.915934277369438 4.7261756806251869 6.0442443128276437;2.1813596692299466 1.4650905160204351 3.2252384295654069 -0.80008408242894624 -3.4219739083832459 -0.14886776622384895 -2.6941864901295691 -2.5742083924765788 -2.6209213301145593 6.2239345242383779 -1.2348909486665778 3.8057511638816361 -3.0754112714927033 -2.2587761213065201 -1.4440540387267806 2.0157987615413013 -2.6383617592418025 -7.7735612587251692 -0.30796330364819763 -6.4024171042771192;-1.5955349783130355 7.7003521038517597 0.68109015792849414 4.2564173315731892 -3.3035557848262487 6.2379383137922471 -2.2352525138786472 -3.4833847649065777 6.9648353318613703 -6.5204085987616986 1.3074430699668227 -2.5810182162813393 0.18942537887809094 -1.978834006015701 1.4723580824992526 3.2155647019348703 2.6078084489176563 8.0090014695876555 6.0421928942679273 3.1403452294544865;3.939494904580636 4.3408505841958371 0.17966046849831985 0.048908129561752257 -0.62342800911650897 -2.3450237518232644 -0.017322138174165475 0.33865094998884182 4.490722616686357 2.4903557716414948 -3.2939794060573053 1.0120647777759895 2.0937786214057801 -0.15928074976497927 -3.475740843921924 -2.187587573896749 -1.1562285399191361 -0.48569458853363895 0.14549291391222685 -4.370002297591272;-1.5510843812425947 -0.51525967832928243 0.19335275744249084 -0.65412161517680556 0.17835280278451418 -1.1414171787021608 0.96298998170455852 1.1565143649108369 -11.837093586579963 -0.95816226936550308 1.2510294249605605 -0.46926471025170891 2.3336538893994883 -1.5492414683739675 -1.5646514805879672 -0.43958913675006062 -2.9495255956936499 -0.94949332316898316 0.33120558507103903 4.8590641827192877;0.4762898845739974 1.0799657434216889 -1.7490546186931297 0.95319984090801824 0.31178732488103039 1.6749153940276897 -1.16651612287893 0.71488633970412474 -5.7983620238810172 8.4937401895825939 -1.5626261755923596 0.33336581339849047 -3.7167693238487982 -0.66107841721645721 2.0236698902813992 -0.44376580526183013 -5.62832783300765 5.5190064740936542 0.39831309755041416 -2.4159474187798686;2.8350300842493752 -4.7696466585672974 1.3459994883058899 -1.801620563398773 2.1857971383047645 -0.87174400045890044 -1.4439687723739192 -2.0451434539593802 5.5328897851928112 3.3865662390469158 -1.5541455500878645 1.4430549898632787 -2.3893972276938924 1.4851919812860617 -0.10969385019707495 1.637512611784729 0.52006009277258913 -3.2023864651590368 -3.2359389034885986 -6.2854702286355719;25.518487431609181 23.752758540731605 -21.796127301374884 -10.995176340877823 51.834845917181482 7.4010930019957772 -8.4353585389173684 -3.8280338015318613 33.552970106059384 2.0833899807193097 -69.806429839961538 -39.187327995212286 -32.288177459739693 19.342815249458535 28.890230913310134 -28.779758804046494 -13.021056821295895 -27.374575849776043 41.085174636921792 -6.3833656938733565;4.000989900276263 -0.56833771602798988 -1.3128480121862849 -6.7367896285643063 -2.9771077111423545 1.886595395200567 2.0607912905376473 -2.4231841629261948 14.217477107142972 -6.6120871256196745 -0.052554033092710478 -4.8140617173240177 -4.1298673868356017 -9.851913269221761 -5.0760403219761532 -0.33883467461387601 -1.8335147271251957 17.331342230440658 2.0770578373085957 -6.7780438011546416;5.98664251654297 -1.3198694144613281 0.2226853501203751 13.721624748704444 0.5054907224192966 -4.8547506199740313 -3.593649951518596 -2.026127144601348 9.981321694725354 -7.9009887163996178 -1.1268290099112308 0.25258768063273596 4.7220656920975257 -11.898446518424018 4.4454693775769858 9.4873079425178553 9.1461798659280937 13.710541542984684 4.8465243712998936 14.213652956644374;0.41628330959596532 -0.13267374183787231 -0.10338690973877607 0.069543753759833071 -0.048997414000488244 0.27212676814486836 -0.0710937761543423 0.017983723024558071 -0.80372970405812361 1.3696289027702619 -0.29085264410920669 0.27965774364226925 -0.6083311993243582 -0.052107581505744613 -0.28865093302562295 0.069734714530277422 0.34344224773628906 -0.4674985862029345 -0.15383545726876463 0.17154691137122949;0.22824272351011665 3.2704111553697786 -1.5761493431553215 0.76434554877062433 -6.8746087789492201 0.49302324477351206 2.7498518382695929 -3.42299233061757 -3.421697929571315 0.33295625932624484 3.0833200766728206 3.4679845806262226 -5.1660270432904163 -6.081394744210475 1.371958388948586 7.9660144845060374 -0.69523785887118572 2.5642777101207583 -5.451456281773428 -0.45677642127752971;9.4508309484481305 27.348269459630774 -28.864227493193123 -1.2559813985168722 43.685391082415492 1.7380171521987919 -8.0854976234727314 -10.521076191078897 32.623160860441544 1.3154564346444932 -51.125553830268359 -27.54653374983921 -5.8822689637343428 28.991290274343331 2.7546826410099876 0.38400940833356889 38.452955436962384 14.529623343373558 -11.678330978856003 56.652135272852931;3.0287549843869552 14.164105364484339 0.75303768549195693 -1.0612942861492072 5.5886105950645382 -2.3510326893738611 -0.26783387614551701 -0.085012834022451328 -1.9334389856848442 -6.7482402562431449 3.7663673697404185 -2.5468260669039173 4.9592552448237646 6.205570474340055 5.1379760931888425 -0.5325115766744154 -1.8213757395056647 -5.8754264682119741 0.67259454531872609 0.53884054388761793;-0.30331415565554642 23.757211025389289 0.91541033520629356 0.22613188091616249 12.35430263023296 -0.73552965415946514 4.1865888727131431 2.8262598299895494 2.9856209031259588 33.393082275721063 -1.428634121392931 10.701218315815931 -0.58600963701707309 9.8175733282072493 12.120158116748197 1.8526216546962899 1.6873219691282899 21.070524570277676 22.888015758345791 2.0121895326710377;-4.2331120562362257 -4.1401892002171792 -11.235765050591645 0.8387959851330492 -4.237336517005148 -2.6421708157683019 7.6592202925921535 4.3024755542224344 2.0105141569212481 -0.4718769264143719 10.106444391831356 -4.2087808823796644 -2.160547102596972 -1.2128675543509144 7.4524361256837652 7.4789807688646786 0.76493068016544297 10.225905460831408 -4.1786717965765332 -9.3566411210450848;6.4375471077884665 6.2427725007284085 5.64283361570733 2.0066852506384083 -4.7534691327309551 -1.3058822977670663 -3.1626077718872141 -0.2856405234531007 10.473488630552342 -1.7748107044482755 2.9457473901924676 5.2003230323537535 6.942895317485263 12.534962335524121 8.3176360206370585 15.655495451498853 -0.73324774556891514 -7.8651621667031124 1.65968384912067 -3.6964821498744014];

% Layer 3
b3 = 0.4186328628177523;
LW3_2 = [0.0025428022780115082 -0.019492361663563273 -0.020272913475136736 0.0092259662564575934 0.046507848089880462 0.018965995763976101 0.19994454957680263 0.12860619547007496 -0.051938071482814346 -0.11445509281264239 -0.002784628292584761 0.02143927554107064 0.0074325493074973523 1.5251698333063062 0.05102398552898707 0.0045841031125121124 0.035939900122293193 0.0052133022368010314 -0.011805868766707386 -0.033026470481652311];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
