function [Y,Xf,Af] = ESPER_pH_9_Other_2(X,~,~)
%ESPER_PH_9_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_9_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7885015421482011178;-7.7751345326481873244;-2.3616154258070558569;-1.6058795159813956666;-1.3707249187846233252;-12.549217206890107335;0.38770761775794443382;-1.8950957397279333261;-1.1578036773867927955;-0.57586514840941682714;-0.2325073466824062185;0.33041998891076174161;-2.2642252700793763509;8.3181742057346301777;0.10288464625836649113;0.2777230435825415733;0.89898375844733058315;3.0568446661010248988;-1.8613716991950477464;2.1905303160972766641];
IW1_1 = [0.16479525600371963678 -1.247944021538351711 1.5609980801079390567 0.11079759244498320336 1.9787105552111958762 -0.15034230952453619956 0.25761003659127168497 -0.32773924228842588047;-0.0078195128718603380824 0.2063115054731442799 -0.37307000142390145392 7.8184625210645997129 -0.075931487848656650796 -0.86939668771150968585 -31.543781657431864573 -1.0483366099121180781;0.30008688632915914152 -1.2710893645151151166 -0.70261392016817825201 0.09734311540553647335 -0.66757971111072822445 -0.3151216520552728162 -0.29098615210041534063 0.11648442223900074;-0.058180814193246901955 -1.2592205392487005877 1.1885719379760690817 0.17859627036189026916 1.2646207521081092029 -0.32952481563611329962 0.31950431092354736329 -0.37121203143920361578;0.12605811626595883612 -0.031172279120344540543 -0.50022984115083357626 -0.32210807993400591975 -0.24909683306655899804 -0.26908522156557801441 -0.32722633318412835957 -0.64585254275580961103;0.0031213857423022972788 0.21326252202715093031 -0.38387870247026906201 3.335277653268321707 0.021654070871015323324 -0.86610358763111283675 -29.906189218126574048 -2.1894346085686944292;-2.2254125183541724198 -0.87974906890447346353 -1.1094973549451427886 0.068285032906694895227 0.51370616098026633534 -0.69773673816566683659 -0.25674233177693456254 -0.43364072378155887888;0.10267172560017175098 0.73086195860735947427 1.7089499465963662317 0.33579144416632533687 0.61393799801131143656 -0.6951740765170337788 -0.11313049935494794151 -0.24318635654928255629;0.2845037298958416061 -0.071841926226776861575 0.49855607183837802321 -0.42602147037647314365 0.86280900220787204447 -0.16768358238960448525 -1.1863008246485564623 -0.47662766819576241062;0.040323821580945329313 -0.12208236268943731262 0.42133828465322659129 0.04002161221890488535 -0.78495356245468106415 -0.11261071960837595873 -1.1648886582770621168 -0.35392758428910153778;-0.56784102428102922744 0.47820988686793425293 0.9544589791356808961 0.0254510190583830051 -0.44927527436821335094 -0.42353291822663752253 0.64480859283952662864 -0.23649317241012068891;-0.39290097180159450074 -0.23206523844055110262 -1.7919369183037034965 0.37226827272400303537 1.5419172352957273286 -1.0816660625373728521 1.1998602847803143678 -0.14076465970890045254;-0.8740614012201922689 0.42548073188943452694 2.6233114116856715015 0.27320647705537315364 0.58400733840631957605 0.036018411265932984144 -1.0082756428357211309 -0.55703228621119826869;-0.87725486695984333796 1.0728276739122470929 0.899369356012436727 11.095581225787235269 3.4883624950954645882 2.3338665994236653667 -2.7321956374777025545 -2.8773178940516732638;0.01009538361042457838 0.01760277027043101114 0.045505998853514049995 -0.09355700168951404383 0.35470697495120517839 -0.26577006841696526607 -0.38945449358736594636 0.082759829175241036991;0.20352767816723921213 -0.34712567764576190976 -0.28263545786998267584 -1.0207966707851210408 1.0689547754525821066 0.65201793911586880537 -2.017912555169643074 0.01000212237060369401;0.050950940460804859666 -0.29710710626316516603 -1.5620900864084938942 0.13174863834237729443 -0.071595435993864656177 -0.68316658986187772662 -0.018197402935557081133 0.56759142757641312116;1.3162676323242636922 -0.83250381461989464427 -0.66778627000779566814 -0.27241810975111374615 -2.6546668172284539899 -1.6771808682147575364 -0.18066987020029637301 -0.42942175718738506696;-0.52735062298276125237 0.20249145545229418897 -0.26487991961064238922 0.29709128587674210609 0.65369777226435377138 -1.1700564132772206527 1.4200047563283895169 -1.0974857334887617721;-0.36795096028588991643 -2.8585013474916194376 1.686017976578749078 0.010939548718637571653 0.41352488481922689001 0.85378822374704343989 1.6647769139412356143 -1.645561778773224848];

% Layer 2
b2 = [-7.2400475424169190575;6.2046376496441197901;-3.9052661256836076475;0.91084815029187615743;0.59796853144767414534;1.2430663155511549878;0.28493773802478400414;1.9560387009915769507;-5.8441532672539313609;-0.51902851158866669667;0.10303399147118134926;-1.9478121577661078323;-0.2748907486984170645;-4.4517776622139368925;-0.31514563121978034221;-3.8436893954607831425;0.048441760262049451957;-3.0006774912002684985;1.2597855921561713632;2.6137314045141377683];
LW2_1 = [5.9441854706527292862 -0.77377224357746632322 -0.83016176572632982555 -6.1270733590395183299 -1.2538907950467301777 1.1048415298663281092 0.0058643146425073917199 0.58921872152526189037 -3.490438523063290166 2.0765912802108972279 0.72622554716060061519 0.2484023647513586841 0.49654327609115495035 -0.13141000644275402376 1.2385272318488165233 -0.19935779578606102613 1.2941256766859878802 0.27515214366632972931 -2.433732483580010264 0.09285057671249309641;-4.3384002670387644685 -6.0288356208596693975 -4.2069997688888882692 -2.2427944767631813328 -8.9298281098023277735 5.7828954457974255376 -0.78333567112704971525 -1.0109757386967155313 4.2047384662274671641 3.0569755462725285433 -10.817613682838947753 10.233062271384913089 -0.79081739317108945553 -6.4538551172308586956 15.017770047741469952 -1.5777209911251890428 -17.589933012880575092 -3.9096593057139799043 0.3393510542389358009 7.2286570340017775038;0.45740019090892725107 0.25561521104082318701 0.12662831816207389957 -0.76474246801718470667 0.014868644291434583368 -0.22735360689506614595 0.16751109253420151668 -1.0175860540132657395 0.51439483508282346502 -0.2237869411112645146 0.63900841711286682223 0.83340608850375841321 -1.5590931276112782733 0.48719031738936885434 0.50265783915275474847 -0.15269879807652261827 -0.55301549826267915044 1.0980676484536351367 -0.2397345496739863302 -0.12788706610193398272;1.9598267966410187757 -2.4360418652991575605 -2.5915547550470634519 -2.1386828754909297245 1.3548987984255296269 2.5148370702934745857 -0.35329473043205678051 0.71455957338420794667 -0.71237624689653300525 1.2900515276691593147 -1.7931428755906579919 0.80476927397874631342 -0.60572664561530209504 0.45464926665347044077 0.12212324489628992308 -2.4992426942267433887 -0.68716694669155797826 1.1194421209463603084 0.53328730346387942518 0.90904677051531135312;0.26821501331764086018 1.4121662978797153709 1.0091113617165059502 -0.15323366111813607748 1.131502730298208137 -1.4471649545416160887 -0.1980772899803985021 0.21746893181152895935 -0.070454031660346902455 -0.82789688496256153005 0.9443190484065848711 0.33124650232745050937 0.2238423126591971013 -0.039945056693474347009 -0.31615861767856345832 -0.024387099050003201856 0.29711528973909295814 0.52648082463653034235 -0.43979451179829248675 0.10056297899202921997;-0.10375161967504113736 0.10230353827676637313 -0.21050165869022180454 0.40000237610901839824 0.56074867749611900791 -0.14008710570071142287 -0.18020171144303967492 0.63096731945027406674 0.46365729148903234158 -0.067940121598741340381 0.66639845200144964821 0.13335224094555725438 0.70517150694029706592 0.13335982072788216124 -0.26945377402145026524 -0.62615051339312899348 0.38335225976886888599 0.37886102140310812247 -0.70333494029319976182 0.16957123015833469593;-0.36933793353504912327 0.50459454459590014075 -2.8111705539792515296 1.2264806168018145272 5.3199851947422081011 -0.60647684900380771644 0.27416785665537485306 1.6664516721817572709 -2.3035948414807903006 -1.096298056591358705 -0.14061507808215800708 0.67834795142622161812 -0.11630055565262804873 0.1171290429672440514 -0.9985537530848594967 1.0526390706514530127 0.35669186712811939977 -0.084352917907876842629 -1.2595304839831829025 0.26249141468042630487;-3.9407387926821031421 0.7400943716196485278 -1.4868125431566814321 3.4036093925744772548 -1.8265283110821881607 -0.90288419817793363897 0.022271583519126132017 -0.74816241780872394518 0.25311584454658841992 1.8712557708215202812 -1.9088010511260899982 0.98093294254363039286 -1.4994498536362852459 0.31697443042783685074 -0.94374725845973639338 0.86804763171041054992 -3.5013992720514544033 -1.1240473558542642962 4.0350103141334336954 -0.12387703982035744299;-4.5171702359107062108 2.5373974928566567222 -8.6161736221216571607 4.9190797860188979485 0.17088520712096036402 -3.0284625924969938993 1.8472930160147003065 0.082091395486766138845 0.61315724418484263136 -0.87774133864146874906 -3.9674939861458717871 -0.14118459462431151574 -1.982855726893244741 -0.13502039220762582228 3.5515643586677270171 -0.31773157352192266112 -2.1580638415512538586 0.35199298968337772164 2.3758982196596831749 -0.3455720507369245964;0.58423478230704339875 -0.59808673521178701282 0.53309433181302301463 -0.68106817297962718438 1.4025880287661935952 0.63468281319735031509 -0.21377541818222092762 -0.13037216468145051973 -0.37500895781200160872 -1.037189083823721214 0.19676772642334661167 0.19771271957860087065 -0.87969255920974909202 0.17898305218308746545 0.02412015554329906275 -0.11129275555992042268 0.37184474457529709257 0.58132191266911859007 -0.16843054464410392446 -0.14885789584327160928;0.38031162624471470668 2.2399755051845438025 -0.10766503948518545142 -0.38846792712691047278 0.42331889467661748538 -2.3375266914085539582 0.063006307325813679099 0.72564908142483552922 -0.10091179225466986868 -0.33423606055622157029 0.36162194439069589302 0.23714832570498572961 -0.15948783001193056474 -0.044498020581414013397 -1.2749645783763026152 0.058832092373262111218 0.21191479535971616266 -0.26218522915672043405 -0.14328343593174902582 0.00032880755344799649561;0.60694303044242992051 1.1480648675488660526 1.0453788670678023642 -1.027007132432178782 1.5204807664892989738 -1.2913551596595598259 0.32556432809582674937 -0.73426449830222972892 1.105738087537583958 -1.3262145507037677028 2.1956082404183172585 0.92794296641674600679 -0.4827301109300419224 0.44816791856435056474 -0.95403171237563577645 0.23554940014242919943 0.75268513302072270754 0.85531233459957911602 -0.76608257025018400288 -0.084528603959701367754;-0.44520657360949711379 -1.6104231950706826559 -1.0761855577280932117 0.33135108056096279627 -0.87169855166059928564 1.6819097165945204875 0.22553473071214449885 -0.11410213933320893787 -0.22616413214237296447 0.86471189893417144123 -1.0312312738999369621 -0.34347317233520530122 -0.19874890083092791593 -0.0080014927775900954177 0.67720431500493816213 0.019171711504445146379 -0.51509496957272193907 -0.42958120103846819671 0.53774581278664723705 -0.049736930449453063685;-0.013642172645696080957 -1.1212054617082820585 -5.4271909572164318547 0.087051706551287091895 2.0581714554440737608 1.2135283662229336965 0.93317875834395858092 -0.036065424233050751013 -1.3258134812969162297 0.11448813296249309157 -1.1796654157131003515 0.49984182670690674444 -0.97464200214046670112 0.18710307474097270797 0.37298948510717655491 0.41753615143662115017 -0.71612365381142684129 0.40991051940052608549 0.54349692511615854684 -0.082587474652187797819;1.275591259725289639 1.234940874025033164 1.8894944900262382603 -1.3042297368825319648 0.93767478484590904841 -1.3163963494732779935 -0.3594393439450735972 -0.9140536661372203886 0.44139776057587254421 -1.4557939695652444279 1.2774212952541879051 0.49171126063239284365 0.66128282886512435024 0.095219848810182916576 0.044845590759315018259 -0.16217183012418576182 0.69401601173157534408 0.63177851139233676125 -0.76014788378220266019 -0.1932263625507914806;0.83061477613466794256 7.5558620795732585051 -8.300428690514340957 -0.93752183226788265991 -1.2699485649991546499 -7.8304923826666907871 1.1773403966111897212 0.13605649629754607011 -3.6239099951129709609 1.8183938543448328051 -7.2725822446770527208 1.121591985822636417 0.89161971489941982405 0.21147141580194891985 8.4462385544339060317 -3.2834247202360629103 -5.1006075658859328925 -1.7424520921865411793 1.4508773453985992496 -0.92061117679716342188;-2.4632048633697074536 2.9993750983279880984 -2.7469138509897219613 3.1578121793296216602 2.0795222887489619445 -3.1196068448513085691 0.84869205917312540155 2.1214220413436533086 -0.94861104711543431378 -0.16731538646426863393 -1.2082888592692326846 -1.1154738968757953455 0.11750197750110338846 0.14996935847446321577 -2.2840299462601056923 0.38594371540985195068 -0.024782847713719899363 -0.66175764793651703499 0.74617315733879474582 0.042794386708369269723;-2.0305426441840079832 -1.4609155110750700057 -1.8405977947440281817 1.5003906333062031475 1.3018959568787469294 1.5436098195439442726 0.99821378292047069358 0.47970775508798102482 -0.48239430730275001391 -0.13996428006812242084 -1.7113140141309117759 -1.4335617850672710549 -0.073390085245043368278 0.15152816120423934221 -0.7232477548587027405 0.43186518484389374573 -0.66521243226466875154 -0.35629935879745738836 1.0145705571457721561 -0.11535214464685283886;0.40809335584505235239 -0.44868403583700722237 0.44722599267062979056 -0.45035689486121827096 1.573520319073482332 0.5057565221907488473 -0.086930685977877328319 0.19299135768865627316 -0.45369662995794007854 -0.65808541367187844973 0.38031725054902304484 0.22314788502725005359 0.2669001779131914831 -0.071600875355494503216 0.013824515496634520728 -0.69193745498472780664 -0.092027642022085215379 0.43756726455115968477 -0.27227663816481834091 -0.0052563251073445057399;-0.18483748439625882765 1.5545143824416924883 1.1340696306822493078 1.2415149224177803866 -1.9835337811761850624 -1.5426122650702949191 -0.40178717711660316692 -0.8490527555306044416 -1.371789267266138701 2.051723857903299475 -3.0816924816068551607 -0.9525338133297258647 0.32152820194181758184 -0.19467800172055463315 0.83435834808247821837 -0.22995850400743381159 -1.2664507655537204922 -0.4417656747796654404 1.0998174653680410362 -0.04448523971697011109];

% Layer 3
b3 = 0.16379134412668311382;
LW3_2 = [-4.4244917103992529306 0.68333561892889460587 -0.5743140598734082225 0.39247435552481324539 6.8602948525626654686 1.7276765444835737728 0.56834229550952264365 -0.37507723265263381851 0.20998732717022711158 1.0335746738092006503 2.3280645661729284512 0.45811913270249515762 10.726837343217836107 -0.62918695377506761446 2.5172956903762524483 -0.075316803544235491619 -0.62375983336404705604 7.0773972248758196812 -2.0320729677490172449 0.21249082221654275182];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
