function [Y,Xf,Af] = ESPER_silicate_16_Other_1(X,~,~)
%ESPER_SILICATE_16_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:43.
% 
% [Y] = ESPER_silicate_16_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 5xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.8824335706671007085;9.5096942379209394858;7.2664725339059996756;13.769274567065226123;0.83845043747388814381;-5.0079969390723677591;-5.6414052222578101592;11.222377176313115044;-1.038505669071431825;-1.9972002827068955355;-0.32737454806607729774;0.4013617957350926746;15.664828788686644856;-1.6757098245542303427;-0.56565254759584882027;0.84763528944662147602;-0.39825854552100398154;6.5658192140907321033;3.2863651168153933391;7.3287261395809810693;3.2740045578661791659;-2.9078508724078018233;1.6977023533648962772;-0.61112790440820508042;7.4253405270690677753;9.5591668381109595742;6.8152068530236808996;0.35811349606905690246;-0.73510149355054554832;6.9052502656831133976;-1.0583283940933763123;4.6001545754060488846;-2.4333311819372926976;0.30112526460258337568;-1.1519694834469835776;-23.488444129683610839;1.0357380461979590613;-3.8479839809418514562;-3.7418495107172389247;-8.3893201472188536627];
IW1_1 = [0.31754464346439603695 -0.56036108150604135858 0.93884493542434421798 -0.80435603697204671736 1.8336199626554245956;-9.0398839502512480237 5.8552811287395938322 2.4805917086788129566 -4.3293184511790752111 -3.5463712733909149577;1.2072538350033987786 -0.78865001951641089395 2.9332504862570210058 10.892821237343268237 -9.2420143545842172728;-1.0598814460207206523 5.4293796521779755793 -3.7413800499100964281 9.3655224169758941599 -3.7283591978218817431;0.18071365573156164541 0.02019983093681045408 2.2986616913996145151 0.51648636751376264531 1.7105895382316120834;3.1646253126021015589 -1.1782032050186945771 2.5784905467808929558 -6.8386424166782271428 5.2292222318909367118;4.3268624038427567768 -4.4207673474611874909 -5.0277360806068740473 -2.0360907450335052893 -2.7997983651022808615;14.358968673512404024 8.4895495004297263364 6.0862578301767511491 0.38309017924004923339 4.5069117177417981068;1.5725433240295709769 0.44110498293686500881 -0.48720652128206171083 0.38161568544405238823 1.7107642584056885759;-0.045401449381049854837 0.017906064394633332271 -0.22002477842169129718 -1.2577690514631065799 -11.965694931427357517;0.27208452710219044324 -2.4852506978307555841 -0.94110362081912868337 0.02653111020730490599 0.25614451056961357045;-0.0043729738572654110532 0.012259569076845496655 0.68289623338417149156 0.96585896013535521565 0.83268076955346126411;-9.7884596213493093586 9.7924513573985194625 -12.841182530770513637 27.459511436153619002 9.1069621715167894394;0.44306840122082397082 3.4263118678459822952 0.13034103171560801337 0.0038317584099478185257 1.4433712533449867266;0.15480815119931695678 -0.25305602108542607498 0.0097244966443375928378 0.13328148336197526147 1.348534313989502964;-1.8909648719540337325 2.2399510705138099276 3.0483120672797374695 0.50888559201053473746 -1.4145884929998353563;0.02781258529606465274 -0.0392995901483716506 -0.59262652524952841304 -1.0929409536105509915 -1.0479910838725281508;-0.72210308447294480061 -0.62150611402788669135 10.170729407974645753 -0.21530504651838014429 -1.4208053124861432792;-0.92856605188933993844 2.8829477341813474212 -1.792630951306950271 3.9565438401441817007 4.4618305551483485871;1.2194255535343871966 -0.79898930446828930751 2.9330592866874698466 11.010206312189419364 -9.2887530562418536562;-0.95176103895977237634 2.8080305156226534891 -1.8231259081447050985 3.9826856594820205792 4.3546283273392436541;0.20546607935454944127 -0.006750580005846790882 -4.1846510024932355165 -2.4529483599531238802 -0.53445434499834498787;1.3401117994646840614 -0.012305999485902271301 -9.490764049076803488 -0.7826374991324233088 1.2248543710603905232;3.6036332025843886839 1.8999061637268650493 2.973591996766770329 1.0459430194421976967 5.640749044455425576;-8.2278234077733589658 2.9415747225588826375 -7.9434551200601140053 17.842871440514052495 3.0018912542494771145;-9.1102964904093237664 5.8894116292340230601 2.5673352755795213476 -4.4161101720392066383 -5.036815300262236228;1.7230757737741650981 -1.1005867746112045769 20.09096214868085184 -9.7205571274222162259 10.593071605785311817;-0.024546045157807352965 0.46082236534702286646 0.21716153798580972722 -0.29260525100853729263 -1.1632491484935651993;-0.17091346908661311788 0.046094557947479186666 -1.867460382941184438 -0.47216912449365933124 -1.3893670215636448884;3.4444852312956100171 -2.8053144482541383375 -22.034190927724171871 -13.439804021068434636 2.4744454540876952287;0.2374368466291880142 -3.0078700495668262427 0.1405801343949899529 -6.4694787408618497082 21.104560270965343705;-16.774558792786958605 -1.4635973436737079734 1.8023617185218694381 1.6103172792258595436 -2.9119485419684596472;-1.9972741575659709312 0.88607650927601300239 -4.5787454474801876358 -1.1825603300840492604 7.0990870669214851674;0.0043403367375790917471 -0.0062861632654553079025 0.20814726831080010427 -0.57860011009331613341 12.159296737497932384;-1.261088133614950646 -0.67386247995517833953 -0.78183115890578347429 -0.24962627681084667564 -0.079303316383845912085;9.8442548180463749219 15.616351706498731389 22.886449905341734734 1.8636611639097031556 -9.3991230642920093885;-0.069674926268471798485 0.019852351866814114262 0.35502491786722972789 -0.22019543607110339534 9.5112073504392533607;-1.8667522398627569569 3.9471417585505390591 0.090049981953234728427 0.49950610132396133789 2.0547315157224015358;-0.094620883708723679817 0.098555536818070235694 -11.557694149705247 -12.335720383296106206 2.4145746758027222256;0.48459960965800102928 -7.6033245125134625297 -1.6953960667004475127 0.76861080396978687101 2.9990957745202742046];

% Layer 2
b2 = -0.40272108012536211863;
LW2_1 = [-4.0696934072137853633 3.8791928555678949486 6.2355222766840441295 -0.26820013247328622352 4.7137546737766253813 0.19868961937930371131 0.091209180458459451768 -0.013552735533285793779 -1.0633343624479114631 -0.94691204277115081922 0.38423585480252753221 17.907159674524166348 0.062602827582689951624 0.37166804135535447262 13.723249656294393972 -0.20410272877326665619 15.01240581900410298 -0.26671408683447472843 2.3602837252237676147 -6.128033207507892044 -2.4932661733602072829 -0.42064696842015131262 -0.096099218311335263265 -0.15958889207590346015 -0.018867067972461439018 -3.8544398602563751943 -0.044956205820212168101 8.1157875467164988237 8.2035005047575246806 -0.060303392460639447525 -0.045349699501695504844 0.055211288081475358436 -0.13588821526973585141 -1.0256532506462270327 0.68975012735438967493 -0.15327549206565746487 0.43188506714808760911 -0.58593768630382936369 -0.084704115187393722031 -0.3007678561452872823];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
