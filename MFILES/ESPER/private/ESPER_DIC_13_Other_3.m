function [Y,Xf,Af] = ESPER_DIC_13_Other_3(X,~,~)
%ESPER_DIC_13_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_13_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7936158811476374808;-2.4641825676033919379;4.1336372294241945369;-1.4274767243341754952;-0.18292917837290098571;3.4969125067857396161;-2.3217501619671176982;2.4228403413816970158;-2.5404212633324716464;-0.79740825251741687119;-0.14006014752533618717;1.5102320240578872568;0.7920649891401878584;-0.68835283956616133416;-0.7307522740224505764;-1.6840293844959743907;-0.091405596150083395779;-1.9734252929976681123;2.5889801132769512115;-0.85918324265488732472;-2.1020401646488475755;-3.1370327870456744535;2.3363516791649647786;-2.6175839826393429988;-2.8769234888247083859];
IW1_1 = [0.11447528391661085378 -0.75846038492167489053 -0.62536583080784691191 -2.4681379753480463535 -0.22791322073075762078 -0.065800897230947161254 -0.57444792312726078443;0.25840854702312232583 0.51224899873191598321 -1.9790565895650373829 -0.96811190808261315954 -0.48728755107533977542 -1.1372499280932573118 0.50258518972219734522;0.045752207908036052197 -1.5067550725849556681 2.9377659503771500482 1.0755886935499738843 -0.75562890582041530863 0.17368330851695995554 -0.8421558301600633456;0.57724647101363579793 -0.35403225439656466067 0.24599703945902445801 -0.11907570723075011632 1.0235858225419360856 -1.3022346900698431593 2.0724937146384041498;0.7150017710512061031 0.29221589728685104514 -0.64164340235453998229 0.19386166053218251148 1.4569896742338943607 -0.031954789962837570894 -0.4331158554327149135;-1.7427827280904282237 2.0688098054610590815 -0.81643421458104237232 1.0232374818774190306 0.35493691473644550793 1.5714326497461006404 0.12826597033793665781;-0.62283114932484473503 0.061650679674132104202 -0.024269234396383281005 -2.3003088839585452696 0.64930548285930833607 -0.66146417272822199962 -0.30119761847648618414;-0.17697011309399340862 0.50175028557600009904 3.4773418633163055702 -0.012820893358484887481 -0.43321184255940570207 0.40641583203493297782 0.070162338225813775106;0.78421180494720610366 0.12221312105325671249 3.1485178322765290382 0.92088282232544482753 0.56572418683192671196 -1.7010778687274288323 0.70859988368735127295;0.11905034918494784846 -0.19055159242897132255 1.4494798371152599614 -2.857562297391629702 -3.5232605951268385347 -0.1702893627637226126 -1.4050394933344283466;-0.91015376208598164354 -1.462084271377257938 2.8826363549242337569 -0.13015545188046048763 1.06747965181395843 -0.34494409306300588547 -1.5087781354755129826;-0.16894338510429673939 0.22048433130563682703 -0.55378663912646253209 2.222583549715563489 2.7193369168804406577 -0.71517599968561029744 1.2760712793363835349;0.51033362859324427063 -1.5492855619213248275 -1.1625304857157101601 -0.70881064595035725429 4.2498604061716251934 2.349445024379744229 -0.34087342655088737065;-0.77106150611952117835 -0.26570287277297283124 0.231441563822458507 -0.35902050138908053745 1.3820780812647441849 0.5345451422948558351 0.059579669552381184228;0.68952081673303644571 -0.24082175837261018958 1.5939969531428392902 0.44660581187031705985 -0.16792347579975319682 -0.54479159270390631331 -0.85224610423542557225;0.094700521342646809542 0.39590718253934581439 0.055627922471747102973 0.11842116376980105219 1.9038948661589272238 -0.69381848922522970646 -0.22235575332418441863;0.052221418477258932378 -0.17048027835730947266 -1.4185865455143980007 -0.31645853762001158183 0.25548585254986777571 0.46800830243443075629 -2.5557250323380897861;-0.25811032094797214942 0.60289530078842268335 -1.8813216942241743901 -0.42529773486006416938 -0.61098727016959641922 -1.3520291335085921069 0.30712614601230142641;0.72528458757354463682 0.20939732203043825987 1.0180883680978685124 2.6227234093881528487 1.6506250831743887186 1.2374366939035892354 -1.4680657498190896604;-0.36333551424544030528 0.20724960570753572786 -0.33657006992766935749 -0.15844270361056439489 0.23183570935338293495 0.04693551030500997534 -1.331369317736976976;0.44799800604870082532 -0.32323024860853416529 0.61604952653335731672 -0.36050156915563968951 0.82219529497310639421 -1.1724477664874690674 0.36345228230733139796;-0.91926278946375572509 0.96083814496340158584 -2.2389525610537770461 -1.4325294528857650533 0.71648395208029036496 0.060979936171203646955 1.3135260643053083829;0.028842879777901935662 -1.0079092090077230726 -4.0583837192288072515 2.0530524667014935503 2.8542448787940939425 1.5489483892868620707 0.63923522454737158327;0.509097314737047002 0.014554957828835989736 2.6623150550173919626 -1.9583345143888999385 -0.313894307593263866 -0.94804886103869823177 0.35170383314943842734;-0.72725912089114086445 0.1495513048788569832 0.97027561720821453584 -2.0594083274470884604 1.1629038075420277121 -0.15047997768597765056 -0.26858935110445308903];

% Layer 2
b2 = [6.4757756992454158507;1.0838156809919607948;1.5405747521688115675;0.20779058998157151628;1.845884721528920025;1.4734634004483002645;-1.1774008869676699796;-1.0361224555275716508;-0.22156346460395703879;-4.2450661905364341919;0.6238762562495197006;1.3402237871934021829;-8.2441954338776817224;-1.7664290014300150222;-2.66706614815796339];
LW2_1 = [-4.4328607058527644824 0.34041847822415477465 -2.7129566218329683736 3.9519125348146375565 5.1721040165384897236 -3.0394156776733658454 -1.3085797890480437289 2.55877539814122823 -1.9892327303466450505 1.8429149685589938379 -0.57918658974096981495 -0.74499106571376050301 -1.6000129872812689502 6.057241591063947439 -2.7352998196146494081 -3.6044785253489135535 2.961163388254663964 -4.0849898650812139778 -7.9803583555720845055 4.685681190357674275 4.3731143740893330119 -3.3099222820281037905 -0.0013298552087617522555 -5.2357374695282272725 1.0262503806941056794;-0.012750772829700532732 -0.94946790557473836891 -0.051873486945547615801 -0.40209066960431671944 0.51640403500374287837 0.34251508810219000178 -0.56211829311625183259 0.011372870385401866872 0.46372198349850435317 -0.034278393044751380436 0.14039197025676811159 -0.20399459489278834456 -0.075257754350126743192 -0.098503327871992923948 -0.46331103340257517864 0.31108110531031968327 0.12319437934853331995 1.3179879748847931342 -0.11390855978918247582 -0.40866716554803295125 -0.29951026464363095236 0.053345180826772739535 0.76914572277994075478 1.0013209636660143076 1.1744312613455478722;-1.1612695362626486162 2.8303234280059741401 0.76839749808605195547 0.2681865532060401236 0.33934892474211525437 1.2422893764436115926 0.41557381444874935683 -1.0221021737842184152 2.0446117884444259261 -0.032714729465470923642 -0.33563183881009028831 -0.86952043447231941453 -0.49295167494654884566 1.5562578507054982691 1.9723536055009234236 1.3850781854577989272 0.41249729856181810428 -2.1194502491147613199 0.059405546677051820903 -1.4017302356706780042 -2.3377337625756093864 -0.99729427072214049677 0.62470274006777304354 0.44546397703242768262 1.5190452658621165227;-1.4828422878167513144 -0.50186288501967946107 0.68321516978450902435 2.280115735810110511 -0.80699787924797961036 1.2087432225047209933 -0.095995954422363263814 1.2412425525712333929 -1.2703533074674144832 -1.0011858637033708153 -0.9231120884605418242 -2.6849045332173337997 -0.40144862293710764645 0.56325013768928033908 0.11685635844257755145 1.1757629110715650533 2.16662332964659754 2.4486046861602552838 0.13776742271834510611 -1.2583023762321392525 1.2183568855754964844 -0.17101003873219733364 -0.35556366157013830076 0.59641944721566553245 -0.90650044407255825352;0.29003825348802680928 -1.5238519947215434236 0.038741476981229899801 -0.53119179754760470491 1.3322398315545966874 0.16796900446358864478 -0.98003326148815195218 0.68809687155377641243 0.25339136345388313387 -0.24457957300599397765 0.35078502555019752673 -0.24111955810504551168 -0.11655727302361122699 0.076381944542030066891 -1.9859057764381375932 0.043251218739653339573 -0.62907745589956320931 1.4132359506200620203 -0.2029193844851736872 0.90927072305050138379 1.6149447238262029103 0.89810274964310532475 0.78693450622551031071 1.5111750612983230191 0.63938147097258923868;-0.18954794791003767851 -0.80776741846605382147 -0.93190973875350224809 0.91194813538981012169 -0.23486307527120595107 -0.0011473776864782559565 1.2937446172743347628 -0.58967536833201861235 -0.35977599759516853961 0.2852835004829505916 -0.27170589444210685448 -0.68453164984204895038 -0.1166939420687697071 0.31876735833265251729 1.0625486955245495579 0.50528221434364362086 0.78459447627209932818 -0.10755725673730326397 0.4588631387165139075 -1.3946951025574829686 -1.2049944204572728967 -0.34603949026629238217 0.13444904315609132461 -0.87833006136860825031 -0.31870385500033054926;0.25036465568703769602 0.78181289495035577453 0.048710298976658204795 -0.33707295320494773394 0.18715710046804701072 0.15693221897726961078 0.3328140676592801217 0.63770445215101878578 1.1465723384394048701 -0.66141716946055240101 -0.0037854565643470382622 0.083438856764280172618 0.15818505134441424032 0.24475718137859203694 -0.78373876083597093789 -1.8987708708172976735 0.38756194634053686698 0.038149639655331454846 0.35371192088345076998 -0.51465583925651881003 0.38123870465811626751 0.20626307559697498739 0.14019744709918657843 1.1916370040511081729 -0.36815225960986974751;0.38924554031072733373 1.0490417705870820342 0.74638225914973344022 -0.70442856324482794328 -0.03490384955348799223 -0.43471061176579972596 -1.0252816896934771052 0.5236939027579660122 0.020455280170687605706 -0.38013178948374271027 0.21179515508458440776 0.50783645326676485343 0.18725749898498639245 -0.35995397530679734688 -0.61359612326834844787 -0.22782880660083246194 -0.61338032459980207367 -0.2802140147452689134 -0.28657145238264181142 1.3857485756855056902 0.4318798976370025744 0.26887594612061627153 -0.14052731393683845496 0.89371182442826713199 0.26580917100566109346;-0.022090367779316472108 -1.4884659387778069739 0.09773792435274246404 -0.14268169157108454015 0.62301534337758790461 -1.2996802799262563433 -1.2003818341876186793 -0.42494224253700818572 -1.6095199635002583882 0.2284435376105939941 0.64332464623781360213 0.66317443648129204004 -0.46546143332780637314 0.76252652363881068265 -1.5415920718487547969 2.1734164883629487619 0.89687409399254891529 1.481028637377050039 -0.15131826872100309633 -0.88691435197781864908 -0.093532085346081428323 -0.39823178474017340012 -1.0223907368949656238 -0.98426451584843632769 0.82022310869256331856;-0.75336596436319536174 -1.3294152223013389058 0.40859532413501536974 0.46534605622829511296 0.14418750499048596514 0.13891047370845313602 0.51126136162057189694 -0.36714032741526153591 -0.62352866662812667098 0.82504007032366943886 -0.20365038048700023765 -0.15126421371139903149 0.41571808737932097744 -0.027530141159853319111 2.5828389250465417781 1.0039218234960085585 0.067509188335571457262 1.9679223023987371111 0.12865640888139698306 -1.5698992488286012126 -4.2590438279314728476 -0.23247328608632591984 0.87525419894150280342 -0.9349251076224284196 0.15278441560091837736;1.1287307372918218284 -0.63166023345603661276 -1.818260590861460857 0.018565771427919555703 -0.38445782440620440701 0.86642351460961997134 -0.95892760956982070475 -0.59132573350774519927 -0.35533790611661963954 -0.68057640704273958399 -0.20589797242069649008 -0.22482557239372999436 0.45943440252961864623 -0.32088163220153709254 -2.4021623317032996248 -0.048384162818657303062 -0.71049614705622898825 -1.2975367811658118367 -0.29519337934367378962 0.7780602254711131982 2.5502035789446098057 -0.1102140292868865612 -0.4515142422432898428 -0.9550492712499327741 1.342064797524049391;-0.089596829812995631981 -0.10205067802468509308 0.30535953285150069236 -0.39451083250100427158 1.443020313532266341 0.20074619586401309945 1.0882083132790327795 0.46122927272244768071 2.1839254495214883711 0.38241805238256082466 0.11881769716683979188 0.23496894101750007144 -0.21043924557891194316 1.0109554878236737263 -1.1607443500078247212 -1.0339737327571782988 0.51113587307257735137 2.1586612863340901569 -0.21631119913280669187 -0.72252539810936911024 -0.31480111076135391945 0.16370429624848090167 -0.18704311925440908482 -0.39365675772180119818 -1.4711841164034464846;2.2094761402560969543 5.9181611136706617771 1.8862720052348358468 0.34926516751824704388 1.9707402112712326669 2.8290349790313316092 -2.021052839206688656 10.002354494441863864 -2.6206502330285927904 0.58867027729059684393 -0.39385584113988791888 -0.18556644597512150785 -1.1419136723642555609 1.6659709783580420872 2.8650569500051594751 -3.060023156983273207 -1.786759816041214366 -1.2408064756124481676 0.42046131380390544541 1.8323429540381663827 1.9323283190178741631 0.10594881396590798139 1.3820933448714871616 -1.0169904565327239077 4.0705713507983789512;0.57599641044732019513 0.23000865043510229646 -0.62829043705569331824 0.59706989899302953528 -0.7415580951129021603 -0.85226525770941907734 0.3373508453718613298 0.53156651248702579959 -1.6080688817469437346 0.44600008526557660682 -0.9944491674250254265 -0.47689029670591587262 -0.9549522295189063481 0.10671441863575528708 -0.43517765538241626189 0.64575855767030310162 0.89851560495744486889 -1.5509356572050703171 -0.33299864233003889646 1.2354621962879357433 -1.6459792445431840058 -1.0450746901011680468 0.51633679564839773946 1.3240837420776536693 -1.1623694794508645511;0.42919702708767382138 2.2711585982331881084 0.54302497489187362412 0.78492992699184382932 0.081318686587190186499 -1.7631461353613193666 -3.2606372406321062485 -0.32113733907316116545 2.6694492049213929263 -1.1806658299165599946 -2.9515469171873536247 -0.82158861073569267042 1.1099716973299313949 0.050618227213180752577 -5.3939970232860598998 2.3023417027595209916 0.40164725451346305896 -2.2123426433439576932 -1.536785667300053726 5.3625650647913225555 -6.1186590532437161727 -0.59528903906345420616 -3.3769007509207402684 -2.0843666553334934122 3.4832082727702022851];

% Layer 3
b3 = -0.18608787427595196995;
LW3_2 = [-0.09002777487805567469 -0.72087631908544691495 0.21033021472563886989 -0.10716261619634773194 0.42897017764460954048 -4.6150592855165939454 0.47382757161113692179 -6.2945197189177743979 0.12646708188654756655 0.34340853213036992564 0.17549259045196538565 -0.63276100354081787902 -0.10019489032980870291 0.10205676706205051019 0.061051196026820082896];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
