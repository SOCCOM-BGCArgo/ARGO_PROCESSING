function [Y,Xf,Af] = ESPER_tco2_9_Other_2(X,~,~)
%ESPER_TCO2_9_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:56.
% 
% [Y] = ESPER_tco2_9_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5753658560928088;1.4263300927357143;1.7047664862468204;7.6779499717501336;0.67594981828315681;-4.4048789603224163;1.0783307298140405;-0.33379918325330549;-0.23814005695167281;-5.5916432990215732;-0.50063645756281738;1.1765743963930866;0.85336208497533173;2.799133267605153;-0.16861255079382137;-4.3715204482216246;1.359205112125244;4.3827515317506798;-0.1286017421101272;7.1614167060708631];
IW1_1 = [0.48055245296349719 0.30548877861263624 0.54870634205212909 1.0612582165385438 -0.38247736648124636 -0.93158698338425106 1.0027596787154878 -0.27712103404982869;-0.039283123916630726 0.15922435556036005 -0.093785313427588321 0.19189353416423136 -0.076552690611626173 0.68289427343890774 2.0235271145232998 -1.9084902115936864;0.41605876973977013 0.3008481776062365 1.5928364911349346 0.17110462355078082 0.47197034119595688 0.73436864622017062 0.043214837022997263 0.50978561686556334;-0.20058451512483458 -0.19987253881224232 1.4040781136343687 1.5523948868064719 -2.5738057163957784 1.0345336588640357 0.34724817050062246 3.2875023407981834;-0.13322249314111143 -0.75268570802193124 0.37349945249014538 0.068808114309459475 -0.60261540621515131 -2.1555791903622108 1.4500623442698195 1.1955859391805796;-0.24185236722658746 0.60232309784636273 -0.64957012605095144 -2.9685587080344087 -0.36498926932868903 -0.88079986441366132 0.44155525699975806 -1.0554908108169789;-2.0096730161044762 -1.1983593694810684 -3.2246528955369742 0.68394177608307416 -0.82116453179126259 0.50856102925061675 -1.1283852587725818 -0.95417637985677495;0.41314506938832363 0.45638026530870279 1.4402343928168935 0.15021709998869884 -0.77495958139207211 -1.005347384768202 1.1976735999743844 -0.29491552421165768;0.1370276370635195 0.56652179427179628 -0.18277853680079165 -0.044590917837496309 0.13786679471078217 1.6191323368075372 -1.348820352327796 -1.0511978753742002;-0.37530027980210329 0.18571423429027467 -0.69979090069792271 -3.9438938312952865 0.69813017568136126 -2.515095338301367 1.2892678744534578 0.91238070234396496;0.15091387762392042 0.30836063155481036 0.4252063889919781 -0.4889662282446175 -0.78438232263434893 0.61355926772127056 0.27621015312450564 0.090024507649223304;-0.57952275561551025 0.15657265954303412 1.5660622019359873 0.058526654282058471 -2.3163324430137462 -0.26988994865066551 2.1556872642943814 -0.47114322281069249;-0.1229769014211541 -0.60152714491113735 -0.90672020741305859 -0.23767524571619514 -1.4104040273668896 0.10597601964359231 -0.14828991196894989 -0.13838327957851124;-0.21252204459791901 0.34252859894657883 -3.5001051699226666 0.52147536182239196 0.018351641534569276 -0.87787986049773337 1.8167494478014883 1.1862040595084602;0.039909812786128915 0.050225652815214461 0.1062330998321354 0.043537448439982813 0.028068914193037489 -0.0038819980085854329 0.17611881751825587 0.092606565822718645;-0.66163601802854444 0.73082829511389813 -1.6939344170957202 -1.5172433619408279 -0.20580757345568323 -1.04504899550244 -0.096010262825093506 -1.6397762056585896;0.81759742183356932 0.45393959273231393 -0.056341281107314657 1.0842211966286013 -1.0847970872889592 -0.15210707197566548 0.74188267087632576 0.16579061644566573;0.13991388185849379 0.033358066132193678 1.0715512289254983 1.2033799590269638 -0.96183509110990928 0.67018137238135045 -0.29248231511292111 1.275124888640381;0.25352227098648833 0.1838381743325021 -0.75165949529742115 -0.07981173838117013 -1.8478791045661669 1.0572256839122427 -0.52563405208758007 -0.43622781635517677;0.26556465342337954 0.079548367732925659 0.36839967904054366 4.8715953400778549 -1.6223733700488083 1.2447218797976574 -0.44719124181196812 0.39992012165031959];

% Layer 2
b2 = [2.4509410886398637;-5.0539952499218259;-5.0907501797823453;3.4091226461774808;2.9022379201264088;3.5579066015813581;-2.8461551065511603;4.4314035163372649;-2.4515181817543592;1.3684750693071672;6.0169188081143421;-2.2048999711681603;2.0885514409676627;12.429457046335358;-1.8734006096850682;2.9740546392269258;-3.3378320922807898;-2.1196892755959484;-3.1532794768862429;-6.931626321293785];
LW2_1 = [-1.8728756294655597 1.1140089905418231 -2.0019534539890249 0.6675551311640463 2.8659787298439783 0.66880887645767551 0.013170994435550781 -0.36653051654229135 2.626592945189147 1.505300790157188 1.3393146427097149 0.10176968149958089 1.1839938517356769 -2.0540397773285184 -1.5602132209210242 -0.23459085845053998 1.5368016937540514 0.75751705962278737 -0.44842965215695163 -0.35835214908660962;0.18748274154086639 0.99151326397485273 2.6168563354831318 -1.7067685745160168 2.2541507008750119 0.4665545535409592 -1.4808489310444346 -1.0082058810991967 3.6340073580671848 2.3852717690133804 -0.25087250488593316 -0.2707727312732639 0.8871486790815839 -1.2311512456971923 -1.6521159277476503 0.12298932001404302 3.5520512377745947 -1.2208341644416487 -2.00824439670903 4.8074421181589591;-1.1941423371817212 3.9940191532915188 -1.876898787432044 0.88054997893638509 1.4698166412964546 0.087854341662486859 -0.15474368009974729 -0.93407007179442625 3.0902284311053196 2.4320821229796916 -0.29290199010853396 0.018241636028809557 1.6090041150520393 0.41898411170718941 2.5627044836342554 -0.60466748610877208 1.6826933467532799 -0.0093302025953156814 -0.85235452558653968 0.12302843766000439;-2.7914322742661239 -1.9712873326099454 -3.2014587659831797 -7.8489633300983597 6.3951628613489087 -5.971446333055936 -5.1849410532244775 7.7083682521174284 -3.26514344436695 -5.3800191835846638 -0.25900072301061289 -5.0210857968066165 4.1536687213575467 2.5759190053750856 -9.0036438655098809 -5.1604760777175542 -3.6090539238995265 -1.1034922518986436 7.1647410884338543 2.3217217016773315;1.1056179173497871 2.451842950087225 0.75579095314587363 -3.6684739916542211 -2.245018822013753 2.3626556872914484 0.27752618028732357 -0.062600283429394665 -4.9347882901859199 3.4550705975128495 -2.0180692894468977 -1.6350532055623925 -2.1494845578167965 0.82329101553073591 7.3801833199027467 -1.7706049386247136 -1.84187342793549 -1.8725657425669131 2.883632710775319 7.0517317316631525;-5.0828288044370815 6.3230488394552475 6.5127085901816724 -3.4293138905388458 -0.87602618499727714 -1.4126664659085537 -0.66020800664393475 4.6148882582465953 -0.61474502683323884 -2.3209040793531974 -2.7115820470419534 -0.81367587051212242 4.2877176243214921 -6.7458660215765587 6.4972092129327237 0.0766285484799515 0.5987701828516 -0.37435795136253031 1.8631852092928365 -5.0066488206909634;-0.48096569480115542 3.8616716785571334 1.0795026302971025 -1.6175493903185547 -0.42180639936518421 -1.4402657925815505 -0.155874073751187 1.0518593785790213 -0.023760240603066928 2.4837525408586689 0.0065250641882202195 0.57982182732576293 0.80261489346230486 -1.033438659933037 0.32522919322730365 0.52836970356991664 0.17774354275144252 0.24252365853896704 -0.23314351685903437 1.970492804558589;-0.57505086794026594 -0.48806350053060837 2.1941329195337187 1.5343773285891449 0.28595895880193306 -4.8412032760877715 -0.7734037242177414 2.026010390158596 0.82488479520243596 -1.3449280225726377 -1.6414054177124768 -1.7631177132757028 -0.38921473541159024 -0.8458130730057174 0.84866931778836041 4.4328744425436479 -0.26854307886154477 -3.8070380843032687 0.87176372890877396 0.054748859912989653;1.101894177235917 -5.7568827696977642 1.8674186672560074 0.59820668435438007 -0.40568589605098454 1.4620144541130835 -0.63615430944867424 -0.13952603209768435 0.56931826213035508 4.2611375834953833 -0.83915228054338276 -1.0357741991170752 0.70993746723159468 1.8116856011382019 -0.6888229188907532 0.36538307905661649 -2.4279123568361776 9.624760023691449 0.20513883214164061 1.6216332348074187;-3.1971067591338396 -3.0060532592597449 -0.88892157575697783 -4.3103703140390275 1.5804515041467453 -0.23219154290592275 0.67991331305285663 2.0948256176298679 0.58973989876076283 0.36097776043702662 -0.074576458434880144 1.1495018948960347 0.34898257163578678 -2.877709917274879 -4.0661275653054201 -1.8000630456398186 3.663546357157935 4.1638137474323056 0.2376792540021947 3.3038368281660304;0.20418894119435702 -3.6757812369107468 0.91793894873231607 1.6486628010237603 -0.15471657546331036 -0.54614738880975511 -0.11811410927650949 0.70229482997616122 0.22144180454740495 2.6153873973987598 -1.6819774666773717 -0.40780511317989532 -0.30133122545339613 -0.65312177357508772 1.3782615116549095 0.046639285862099075 -0.39896627615818564 -4.5175049142780335 1.0576817425650249 2.4976052061065608;0.22710679842494125 0.31766621982801518 -0.60472103853791859 -0.27337968882797836 0.18646592953486901 0.69730828623071628 0.080782437717137098 0.37457207069387716 0.11934755412429818 -0.44233039427790238 0.38031883330966898 -0.096765517084948766 0.34448008520205425 0.41550015118634415 -1.3341877125337414 -0.50285740562608661 -0.087503322440551562 1.9514320583713474 0.12630284568879468 -1.1315325513500898;2.0492319809567676 -0.73151882195114659 0.4983015768557314 1.2097658702238769 -2.6737110290035537 1.4293797948022342 -0.073381199907670391 -1.8639384339130436 -5.3527318372472701 -3.2175146636581267 -0.4027630667072406 -0.63055683727001632 -4.0036121773621334 6.5902653323080687 -7.3367731360607156 -0.66217386039784742 -1.4949758885402458 -16.230100248699351 2.8197144270567902 4.5040093804311656;2.2506183760972904 1.5018460976603036 -2.318164280982427 0.96831691675752141 2.3796799601782985 2.702678752262357 -0.99363633402345286 -0.821462796474834 4.2206607304391381 4.2941606215873565 1.9343805086041643 0.4107588353560479 0.58313438845279164 0.29679187442639221 1.7151669096630657 -1.4344223530485054 -1.3858688899264719 -10.119936387579719 -0.23799511560261866 -0.91054071230798295;-0.52895352940081564 1.7110531233238024 -0.97636576971670241 -0.69449052379528387 -0.52632426379532415 -0.024274958734674175 0.15782591236293139 -0.98384015613472986 -0.33438741718076165 0.34505203560123299 1.3825979364318308 0.45570000374106656 -0.24879959718842115 -1.384258006698557 -4.4338421955454423 0.59086621398038131 1.5038523495208802 1.5850562558628123 -1.8031869733550563 1.1795021583206502;1.2174951740346656 -6.4336478714836893 2.6179218743174562 1.916892152527234 -1.7627186346924872 -2.028594088497691 0.5115850960960191 1.0516306295627431 -7.6330233024734735 0.57000230256601825 -0.89545392907712784 0.30711538002865268 0.23819498352600504 2.0699358135598462 -1.8365188990442294 1.5132565304876904 -2.3114624496366778 5.8432953790967126 1.6782043599474707 -2.0546913016313342;-1.2499023335605859 -1.179977949462653 -2.0844760834710985 0.3982695059019527 -0.49573273247311694 1.3072392167472311 0.27816332382434511 -0.15601209143202349 0.080556464257256918 0.062033790477041661 0.96367756113213487 0.090922277375868263 1.194718457669439 -0.10359491341347746 0.78356620738176852 -0.18727786835264781 2.158046076151618 9.381355387391153 -2.1386914490779501 -2.7748968154189666;0.12232722701118645 1.6337279684571648 0.33672182722221555 -2.6193357206193313 0.4689930052520625 -2.1791571862975103 0.28388907722260481 -1.6618320533261275 0.10498941531524118 -2.2116016068049413 1.3423586313318685 -1.1399763768835653 -0.43154630615505302 -2.8231479603002865 -1.2283428517392829 2.7018585870010305 0.32233422007984208 3.9017628354135332 -0.71517015249809179 0.48676263899715128;1.1750948236629768 -2.0372053021054923 -1.2132315635568636 0.26718776281189816 -0.38237639055578926 0.33947482253715439 -0.35819061864823326 4.0897637095908452 -2.481059214145918 -5.7777244048374792 0.38885787842555591 -0.021523797299232386 0.93301869017473615 0.080651406081689803 -3.4399804480564562 3.0907010728842792 0.58407545968573538 -2.364374479560384 -3.1198125017061074 -4.5651987830581886;0.91780504439118116 -6.3191931579051692 4.9459726841380043 0.14764852338633261 -1.5844813948929761 1.300504982526735 0.016387175234699417 1.0774519808155221 -0.16258593797907608 -6.3328922199080351 -2.3532107116788326 0.12890101306446011 2.2579858298457345 2.0664023787992569 1.7031583800521288 -1.6595228853968578 -3.3820643946329594 -2.2950763767412998 1.0741975235598449 1.7273831619673135];

% Layer 3
b3 = -1.8063164006080452;
LW3_2 = [0.064835001522907831 -0.0299245040166684 0.15896830148228855 -0.0044679830477675495 0.066199057218533058 -0.028645507181014218 0.37352708830873371 -0.072538295703166569 -0.1211658607743642 -0.068008504497149583 -0.277348841433538 -1.0610930528179014 0.13297350421252319 0.052576113451734775 -0.48263873769749105 -0.060892021205513756 0.30807134080410709 0.067651527665102296 -1.8425146351283461 0.025137267420811991];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
