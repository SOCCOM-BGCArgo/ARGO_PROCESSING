function [Y,Xf,Af] = ESPER_DIC_11_Other_3(X,~,~)
%ESPER_DIC_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.9664739343890755841;8.4132754931130975251;15.844526499019147892;0.39632115683289564911;1.7388121135332319511;-3.8122741890961169275;-0.40112634977503236478;0.15151973583218478203;-0.36881002212770791493;-0.94628288032527463347;-11.550787701816458863;-0.69556328796731947683;1.0037850707592952393;0.60286609417823511237;0.076846675076687631645;1.5460459822002317054;0.53576969381708650086;-0.0096670929355071478356;-1.0152980509677405063;1.9256262248723496899;-8.1704666052166690093;-4.0283615805245336361;1.4266491709327469017;6.5936581820950292965;2.5027723905850915997];
IW1_1 = [0.41205170676254837536 0.58558312024063696732 1.0968869271017527289 0.33392967805419093708 0.87669520166043723997 0.64180347147380645279 -0.41044095560114857157;3.1590142201349542539 -1.210068802672382926 -1.0731365803066361675 4.8178587945427233663 -1.4949557090241776258 0.47483934977716368842 -1.1158357961090987764;-0.18000747170235062433 0.16511802725284971394 -0.83745278574239345737 5.4333233682379811214 -1.1380107326483530628 -1.0361494615225375071 10.015497449612428937;-0.18231527996622287624 -0.24515080422625032397 -0.75756413783495635261 0.13139874331009779307 -0.84545236104919085918 0.81663401409767266692 0.39790185973716285517;0.70219634072944603354 -1.0235438401878786951 0.7608283714887538185 -0.22247481311807781879 -6.0028235231748219292 -0.13510284267595462637 0.44129006681270693813;3.2211257522567837697 -0.8994474495081802301 -3.8138600183100312968 0.26719776196639377641 -1.4833037250701477383 0.83345559007160507914 -0.90457827518307254433;-0.53251366546797074264 -0.015360337704884586413 1.0311642730945580482 -0.12485819196197722736 2.3907206529285929264 -0.23785398127268897461 -0.57676375714597571953;-0.19802357708131690384 -0.1168646265062225631 1.4333096484278224914 -0.011713441361343657904 3.2940594491448123016 -0.58166542218818839682 -0.90716534729752873467;-0.42754605749258234315 0.092589008987149640229 0.41668993894646699783 -0.21621902315423494056 1.4470371090744489351 -0.0046727947790587455457 0.91353635218379436456;0.32643096331085375006 0.084186670205406030632 0.77549081138402642388 0.49918042606862733646 0.64071384078941739926 1.4874910651578183707 -0.52522247806495192535;0.31407351529636579057 -0.15876087765167015697 6.3937398640766875957 -14.779758335671370872 -0.34936649134243336068 -2.5165650934916548032 1.3069491523840905955;0.65154478045681429865 0.012368126019657275927 4.4660333588047889108 -0.17083607795366403947 1.1354348346011546855 -1.7887845427900330719 -0.70653416580722694373;-0.29679658557954752274 0.57653232210144778058 -0.42622962283762683144 -0.12467834295993775184 -0.62510255141587844907 -0.0025503736665139979493 -0.06850480280956705581;-0.48932557839909252007 0.15539209523150745995 -0.77420237944516490103 -0.088997024878563743555 -1.9351590423965396859 0.65471847874816757606 0.86913762030559016392;0.31543132847290777931 -0.45454522993556362165 0.33014734516258265051 0.43378970179409126473 -3.6298640108408792848 -0.62231750514682493414 0.21753639813106637191;1.6200544695685747953 0.28780263353878704491 -6.995732809509600969 -0.17310189424652455692 0.38047881048827691952 0.017737285054800940032 -2.5508460030916935146;-0.015696448126696540409 -0.42866791791767744346 -0.9727889443130345315 0.41747095432658481995 -0.75130298997417876983 1.1553368940026038647 0.30894171496924344167;1.3244075071090231077 -1.9463044454980060749 -2.9861479094527196843 0.91079292970902314686 0.1294475858584449024 0.21047329136679682193 -1.8649504768588507364;-0.57105294237943315938 0.092631491873066101883 0.42460645090628396092 0.13473254242261281655 1.5455182740283519571 0.95504568162538705511 -0.41492062141292318511;0.7019328030787864714 0.60826179448440786945 0.77244435784178433479 -0.01868052725750993584 1.0122891442277057727 0.42350568059966292589 0.60859677050691318723;6.2598328828095297638 5.4888726634585172093 16.149944090220916593 3.4278813707560464863 3.7885998480061600091 2.3144976149013873901 0.71779936280975409346;1.5077029027085699919 1.4722690110110963069 2.5687171437837683641 0.11158107277434275995 -0.82558611956180194547 -0.41710413434701382185 -0.6375864199421639178;1.0156243352130951418 1.1750550768525467316 0.62249273553055184394 0.56062766479398906672 0.17924352654240563454 0.96071461653489265142 -0.44042216750734713981;-0.046311055040550698492 -0.71289373817191470373 -4.6107477509067997801 5.9578684337548351024 -0.5483746094562614859 1.6137850567188083417 0.73312143412947605725;0.94650526239459820133 0.066706415020805570615 0.24161909471943557315 -0.39649932982166874451 -3.2617530434005850282 0.42559786899783075276 1.3430433898819424954];

% Layer 2
b2 = [-1.7613236281953623674;8.3136857424806027694;-1.2424860864275479866;-3.8582929113640944685;1.0787989034467364569;6.7295619294525401699;-5.7580623287746277583;1.074702926733506203;1.8326277731387421444;2.1135084414573013234;-0.72282508603665163172;6.5522314366621756676;1.2841375368139635871;-5.7656589927358306014;3.8278733073198694115];
LW2_1 = [-0.63102880079114342937 -1.1027062260244537839 -0.70758934483294022577 -6.2405714371294376264 -0.055893491573196271704 0.067108135454819445309 -0.91017593802956331395 0.53369111598427976251 -4.2433358454072687138 -0.98920377178044249789 0.4311346248901749556 -0.33905584803180471853 1.9940407076907005202 1.1819513249642716879 -0.24609327249288173722 0.091812922927122980754 3.6183552082434222719 0.021300877546597592888 2.2902741696557078477 0.75635014650006626713 -0.088842020702216084604 0.83720387652607153317 -1.3179023878528997038 -0.7182508522542110363 -0.17313296454045468131;4.4751589613534701328 2.8707658960913189361 1.2740699964578638959 -3.6501988446751507666 3.625964298704288602 -0.26271185603397456676 -7.3499202182041729614 6.2494004329773567008 0.2454095897331947107 -0.15278674203659003972 -2.9356922778816891828 5.1067425060556566052 4.8384235991129180832 5.1756152233393502016 -8.4579088412707417177 -14.513046874210532522 -1.5354680000209113278 1.6434244501673656025 7.396335023248829188 -0.37166521754304415737 0.70361272875141200878 7.9363559155685665658 0.44695659140106813734 2.7355250044134868936 -3.6739393027888214149;0.42259340162914910133 0.58832306459151595401 -0.28405438929802184767 1.4046265732465952336 0.01313084147504816647 -0.10734214643663207711 0.18661321839005240442 -0.23818483728718134462 0.19160694115375864754 0.38216837610339882136 -0.19854787519251437811 -0.11954844726355963458 0.13520516910741420258 -0.60856167393743965111 -0.14878074004044836154 0.059285962497528155168 -1.0245165074409934292 -0.087046962921016282633 -0.21451540471709509839 0.22292999125294007956 -0.13576591099045701161 -0.81219118314627203326 -0.22004867641387512722 -0.57657818450855313763 -0.43323668461729369916;-8.0649643018074890222 5.7970660430014060438 3.4157553614826090538 -8.7697044541842537058 0.01239962951913798142 -0.82511008268239283137 2.2985886435476987621 -0.17545382194221351146 -1.4149594247990120444 2.6087428029055717005 -0.4569288037731347174 -2.185048584966787999 -3.1086524329582925219 -0.054071108178927983212 -0.023143425760706177324 -1.9484756080051797156 6.0049931978909096841 1.557636571090158073 -4.0112200907457289389 3.8256210974173203709 0.99523871561494103855 -0.37951413516876619791 -0.98404726303566625312 -3.0848113977956002074 0.0097083282697975684106;-0.11597762105410799882 0.069576392297559824796 0.20028422642877963256 -1.2646395344645855463 0.055040818053834567047 -0.018824128067459030417 0.16244485037263645122 -0.10669394629595838064 -0.099337205674584289072 -0.10352923260869890953 0.054168786972598879925 -0.03629856434993911779 -0.061947828359260194431 0.40994407292458989733 0.0064591099994086740785 -0.064568470852742226862 0.66684078353843889708 0.031683838316999030082 0.15608187240851387201 -0.42364222576155152744 0.026283835578516500514 0.57986802445229168601 0.10284104857203243966 0.10383922160059951001 0.037018353143447375875;0.43666131427987120439 -1.2111254155764930029 -2.0261857148765707315 -0.39511621359601245551 -2.0610487053780657263 0.4626457299749452412 -7.8851768636254426781 6.7915503680678606102 1.1775662627927807602 -4.9980814648933860056 0.76338325348390800862 1.6307110931035098123 -0.11974059690835080205 -0.28982174168539870385 1.0366981715569838496 0.8229713042791285682 4.3543021929553651361 -0.33909628962092774884 1.0682763797978838127 3.5850078197167167815 0.68235143607476078653 10.565999301907693209 -1.484223396647777804 -2.2417279312142310843 1.4295692166789077948;1.7386444346775986602 -4.0341672191127431191 -10.905277909722650875 -15.60694796765748471 2.3659331278359991835 -1.9039742276297220158 -0.62757068958088912947 12.041169521992959091 8.6712968865155595211 3.9921420972211878464 -0.48090898954226529716 -1.9838064558540593474 11.898581846628628611 7.6150688516915536752 4.6474923172741657851 -0.045285053309198158855 7.4836017429647068155 6.1136726991613006277 -6.4271724396483973507 -3.6181162198002039254 0.32022099057443764725 0.78386120140519266464 4.7464271728040863252 2.7278995477140606241 -2.5032675003377322653;-0.46526403513255115696 -0.20844121964029957428 0.15735749912915386606 -1.7947566283560654199 0.05175734902470868759 -0.043458505736545770259 0.1263058949269259823 0.011216896720554755257 -0.11431679701594747722 -0.27432230872607127337 0.19261929128456156679 -0.012787411599767872783 0.10254111691169227882 0.62840262694676674027 0.15317162473577752846 -0.13918366720974706396 1.1621214708912721569 0.069474313092066058983 0.16706978289750754052 -0.26138651597907563984 0.12948780444872312612 0.90540864252194319661 0.17613901914428062301 0.46924126302243612807 0.21932712059027498208;4.2000895579331301022 -2.3119386676372766232 -0.93620156703737600346 -4.736514287129678813 -0.42381975345349925943 -0.90314433345235334283 2.0962206598999184592 -6.0129433059714516574 -0.61318245946645277833 -3.1424826316334391052 0.034248059485212832553 -3.7461719251767453542 -9.2517951701469822723 -0.12229231267082674162 0.20777278837216578422 2.6255106449391005796 -0.22402446842626780321 -1.2959140832255897635 0.75525924467296523535 -4.3244252963354368191 -0.42436720721898846254 -3.6363229988990926067 -0.86521236736930873246 -2.3340582378217047399 0.78880428478537445436;7.2426004456001153997 -1.0756056963831501783 2.3513203323906304298 9.9683654510944919025 -1.4954580365193805847 1.7997589767223522994 -4.4884105131436964342 1.0499097019936611819 0.67298983587251448579 -0.58737162323324065838 0.26592411842517438281 0.21099925324721130471 -0.11728757443594493848 -4.6393958674632189698 1.079593479502469755 -0.41802022514551490096 -5.9272615019185126428 -0.95733377352845705488 2.9784433900114404281 -1.3213703202408897397 0.24374960429738337653 4.5913686559613493543 -2.3994057124226451094 0.71809921140707844156 2.1099632970934267817;-2.4202304968766421567 -2.3211621620585431991 -3.8037598619595014426 0.98892202432934817047 0.052394420468936615809 -1.1144855919675191736 1.9539007437966346981 -1.1999369376789232877 -1.8026186003913293732 1.008506229903933793 0.0059310196320386671109 0.4187611526200480383 0.73495173424815107843 1.3897245368270405574 1.8634095727143058507 -0.25005263589995518902 -0.3484704606909444502 -0.67373873400848105497 -2.9060934342987039258 6.0996665936344243164 0.12009001096543596432 -6.3148230800450155797 -0.79594156317873909767 0.26637717225705453972 -2.5286248916302178635;7.4213511720278706463 -0.46698470851320866837 -0.32974700029166270632 -5.6700924943298902647 -0.27198262286367480556 0.50035165129137748607 -4.61578859256076246 -0.17022928242800497434 -2.3071787722444834223 -2.549746832880622982 0.046633585210196497328 -0.063133164372927236263 -6.2929345206813085412 1.7082090714219309024 -3.0586302689874265148 1.4842001032540723671 1.1579692958772431766 -1.0384858767679026048 4.4841719227671550385 -5.311466088210195835 0.13272924374130773417 4.5735395444112585395 0.76695777396323538966 0.96157368085350747311 2.6647733970767286671;-2.8944675792562044592 5.4516569876310700948 7.3242261455542365667 3.8798612176415905317 -3.1448202870224601924 0.98186758729385270605 -9.4358452625267563718 5.6171056107662362678 -1.7294895577922495544 -9.3110168426929842411 -0.50492581010737203062 3.0828986935457667329 -13.975502465317644507 1.2871346920517638956 4.64138528664909078 -1.5144141950311553746 -3.5539791829033706705 -1.3446659040652941819 15.5582449713774853 4.2202623706665356451 -0.63568419566414546829 2.073198769830928434 -1.5593289199741711126 -2.2188057641549754351 2.8824043265814549564;-2.613915296832621582 -3.0934337584289699485 -0.87989121444470308475 -12.082462912464436045 0.042574873524490394749 -2.3313105820490238607 1.9185453625045965076 -0.17850058098049173538 -5.2114868982400723851 -0.99949041155792650581 -7.5436614686622132098 -11.586924800862817619 1.0299198046241933024 7.8275862604363712904 2.566020278765024365 -0.13086833904675726492 4.947245768077380923 0.48007706336402589109 -0.59732833459984646662 2.0160259320865621113 -4.2068414101420943396 4.4153690957681677176 -1.776294705407627017 -14.941132010851779555 2.0403462204669486901;2.1996352065118438546 -0.13564492988441165244 1.3283865351133974375 -0.83484392821549258112 -0.14159236657819979088 0.54391276052606030156 -1.338699279562789668 0.075119062370219535918 -0.38085318259999761947 0.17595353655647186231 -0.30899438182957889021 0.25315390089987477307 -2.4918089881027594146 0.83850393324838290443 -1.0292595133683466457 0.25171275940136056404 -0.41121149553547997613 -0.15217942786967730839 1.1446298861369177402 -2.5360208515251141392 -0.26124132933607324691 2.9144967406408768262 -0.16141458027463745362 -0.50198928941145060101 0.41401226763233206496];

% Layer 3
b3 = 2.0307935084576640428;
LW3_2 = [-0.40091138029705636336 0.020114639693256657071 1.8375414648768002568 0.052052147320452060719 -5.1892346650104048678 -0.06043088742192039009 -0.061657928467833737762 3.9874864441335682308 -0.11204345934451415134 -0.093395372472484777804 -0.089618300562680247578 -0.074298616379622511863 0.029800908075477829801 -0.044022469492732523022 0.51103565180053012185];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
