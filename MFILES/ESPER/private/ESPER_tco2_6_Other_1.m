function [Y,Xf,Af] = ESPER_tco2_6_Other_1(X,~,~)
%ESPER_TCO2_6_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:54.
% 
% [Y] = ESPER_tco2_6_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7384075827800425;-3.417880431718153;-32.767791466457965;17.102467461765251;0.49741669918617315;-0.65893776381332669;-3.8763276216224813;1.4282428630405593;2.1862151087611399;-3.4191976623178624;0.265483739837237;1.3366528984935926;-8.4465705012323617;-0.29248546324874697;-0.97672542144750296;2.8896079822024889;-0.26659802904953428;8.7206867257870417;19.88572597189615;0.39246201894066762;-3.3146966426426969;-25.764894995257812;0.79373666092165573;0.47986270087069072;-0.84378186596187721;3.1394944882320144;0.81379159081790553;-0.15016593215131668;0.41668057606686515;-1.7314060406039475;14.635911456060226;-3.4068408506311858;3.0793555658468281;-3.6934831923582259;1.9453422104575828;3.5483504450340568;48.054988947498643;-11.859985334997848;24.672020430256687;-2.4894773180410898];
IW1_1 = [-0.0097738382346004484 -0.027933558893958869 -0.43918880238820124 0.38473787687713024 1.3956419552382726 -2.0095237852887213 -0.44171763350452065;2.3584339084822412 -3.5425159982414187 -4.3598585316554503 -1.2270801958784237 5.8772430640716538 -4.0974545478311075 1.7725759322028583;-9.4759645617228738 11.154192309226898 -10.067723487335712 -19.636563725180146 58.201820033545147 -12.592991343197994 -1.4299497215333414;-4.9617241515756785 2.0354909070132328 -25.796248341320744 5.4312089599523707 -26.382406006400764 34.059641997724995 3.5896174538271666;-0.18319762006369986 -0.2204366619056099 1.4244235388258368 0.34620981510299553 2.4419838308815689 2.2083869643949909 1.9360321149852551;0.032193789149281463 0.18285858382326164 0.29174466931348159 -0.29805864067492505 -2.1484030336018036 -0.39119994674090869 0.22693018995566011;-5.2614431532167831 -4.6325042193314694 15.365343699691836 -20.598087295360695 5.895969159504264 21.538670901867352 28.742511677400138;-0.33854744515986052 0.82586396733042367 0.48194294866702836 -0.21488083646618897 -0.27549193648845094 -0.51058383057096246 1.1074619833046755;1.5239328589948873 0.35206605524505824 -2.5195475804559044 -1.0901022918840402 -2.9282241439228072 -5.0448781375168368 -3.7518643388164135;1.5498098228008572 -0.60520877841989851 0.5993675606110962 1.5152607939455742 -1.9970762041303765 -6.2363346681401897 -1.1143139951581851;-0.31169270935314153 -1.4490409306045566 0.40701304283295292 0.12973995958908341 -0.63050365653307527 -0.46106962656977962 -0.43515537505571095;0.28612034668799902 2.4436339701492407 -0.78443668508825071 0.0938369127807549 -0.53829181862060538 0.042314394209040249 0.33318932186939265;2.327210013641015 1.2362933721716509 -3.6518109670918597 0.33262560145808839 0.62038401417898981 -6.2462069564420544 8.0073397233183083;-1.018728172454491 0.61127263558772704 1.8258191605658474 0.35858597099273948 0.47639769560796996 -1.7275369996591534 -1.0406272354161219;-0.10410383105376857 0.18655832911688081 0.94237449130382833 -0.28612999206602546 -2.2665948325868794 -0.16299403636980397 0.054707551521632085;3.0741026797980311 -0.39860711408690236 -1.4292600444259638 -1.187697758648228 -4.8747071441156935 -2.3509487205699511 -3.0069277436587751;-0.278034336766048 0.093317784165155543 0.40344121786634035 0.028122254008803443 -0.44175931695870452 -0.0029295708622832537 -0.18892553925268366;-3.7239095454278699 -5.5744168856752356 0.32820802199273891 3.7354863658214081 -9.1794415255946706 3.3151861478153006 7.6746330255023745;-2.5786513939742775 9.3477698315171978 -16.542388661986902 27.748595702705529 -22.6470380651329 15.10650280796354 11.345763699590128;0.65889442988811453 -0.16143098541064743 5.5503130300124077 0.34760156688945176 -3.8365945086742346 1.0579707867494992 -0.5455966453422002;-6.2801618559931383 4.7989249104545308 -4.1311402379116586 1.3752314721421266 -2.6173952204406685 6.304002128781625 -3.136645067542442;-38.156277516507117 25.070572686581411 -28.425937618418864 -4.6001877890182072 -90.087434173275355 -8.804536394893324 -22.729127362945619;-0.22335848534780781 0.1602339435571456 -8.8586742706318589 -0.71374950138741855 2.7705788768582571 -0.51960936799553503 -2.0636385472006977;0.035362666725909479 -0.51024790085355154 -0.042873758940121715 0.11226856888022813 0.60002273664673456 0.20059733835117893 -0.35166884302361784;-0.82010875145065265 1.7888969345667896 -0.038130654171968925 -0.65127006962909739 6.1395045782382303 4.2866076114942908 0.42780722056744774;-0.43372591757227519 0.0017235084638197052 -1.1827594473664478 -0.03648453792682993 -6.9668009279004979 3.9196374992765586 0.842552599242814;-4.7974733776294114 15.085899730400412 -6.0193385389707048 -17.304447062729249 -62.408267274208868 8.3679418643588122 6.0356444681841239;-0.19480290776399611 -0.62703210695305178 0.12403535118655269 0.15517784990522179 -0.12206290874007089 -0.49191489225362145 -0.433198706705541;0.67380477600758559 -0.16234544720181826 5.4250088287428246 0.36821209074426992 -3.7829380481590311 1.053419925102631 -0.50163803865257495;-1.5469931812555571 -1.174055014033019 -0.73429929849064091 0.019962658942022933 -4.1077943222790587 -2.735666009310032 -0.78075356718921507;0.69386559109516988 3.3444604480250355 -6.2000508517562372 7.3715960473619564 -30.861863794583805 7.5414208532039888 -1.2757734691950384;-0.8238305396086758 0.68186219547325311 2.0353497601486512 -0.46737629445121293 11.528545022390434 3.162717238219221 2.3271286784471306;0.24716096707232246 -0.57067354372619716 -4.8352329524674476 4.8273076438154829 11.7270112089095 3.2363548660742469 2.8291032489838095;4.4233930587819241 -1.2957973864661114 4.4259381607402659 2.2583252502251274 21.996734912053896 5.2180438926796953 7.4566619606864579;1.0115315306697672 0.93046939207994039 0.25447764387292865 0.10310128653538986 -7.7203167165458444 -2.2493915904672623 -0.48019702282505111;0.95425464478238697 -0.29189088589128837 1.343169869873863 1.8482266436316859 -11.838078496700263 -1.3239819515994806 -1.9363156844558462;-7.7565922877934694 2.5452086919904104 3.8167856428964066 -5.4982078885617369 -63.684360839068283 17.006790355531418 -36.279027653477108;8.0219000216210024 -5.6720742001289803 4.5438009302139486 -15.305501226184711 3.5755500252829653 -5.7626192952259103 -1.5368127023979996;-2.7411797457795237 4.8073653043175337 -4.8769126380442787 -7.7672273599665713 93.788308822388871 47.274579817497113 -14.402482596665752;-0.087610554249482983 -0.011339096946442246 -0.49411889190681785 0.3714964729603909 1.547112377688064 -3.0736190969543142 -0.393556194046976];

% Layer 2
b2 = -0.16988035898588638;
LW2_1 = [-1.2942847510311595 -0.021913708188705479 -0.0027024768994262701 0.0074421173045678898 0.17579503961083909 -1.0727352373646 0.0061917094793726103 0.35680455707706482 -0.088301367559904489 0.037716933842214639 -0.33601924769210761 0.13440262174167997 0.017206412952577035 0.11241779598925976 0.92361035874685304 -0.06236218836021111 -1.9216955772299047 0.011986112063660147 0.0052963716211561727 2.1979464170270488 0.012838367461903337 0.0041357600860857232 -0.034211326782465579 -1.2669184709370724 -0.059329709243066409 -0.10057468609801452 -0.0037876838581555558 1.6010379685893361 -2.2071918508517743 -0.062249096425145825 0.010039595040778324 -0.044574813070788859 -0.034413561174668879 -0.011475455268631087 -0.057746158314802773 -0.040833196988409481 -0.009002272058415646 -0.0077281069835591866 -0.0037557695711116484 0.67386995062622379];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
