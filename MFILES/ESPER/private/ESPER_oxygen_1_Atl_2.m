function [Y,Xf,Af] = ESPER_oxygen_1_Atl_2(X,~,~)
%ESPER_OXYGEN_1_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_1_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.03;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.604229607250755;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.48806937725078614054;-3.3838580594743037366;-5.9388667300179287523;-4.8582387273737195343;-6.8530722522378066941;-3.6132810758323050671;4.773877928123038572;-0.15522485574901739858;7.5120845621020002625;-0.15925475123345356199;-0.84380258201044755495;0.16096446320536336727;-1.053823911236348998;3.0521475231475792;11.995036890939738683;-2.5105634443965105795;5.3274203609528676395;2.6879065371580681543;-4.7827950653798607661;0.7474752490914366998];
IW1_1 = [-0.15101575462035835007 -0.16377498551353986134 0.64718523379609516066 -0.49350062827226720552 -0.11014707398946917138 0.55206878521885183186 0.64144856646555159507 0.24638646600818756016 -0.25810803489988481951;-0.027881767952584027292 1.0811255057661570689 0.67303054690324737308 -0.95427198745621122367 2.0646522728463891916 0.86785566452706441876 0.33770915978713000882 -1.9190986555034428296 -0.82683906882830671137;-0.45970912502099531283 0.11645704151503327717 1.9549034087755072786 -4.3369954344030690052 -2.9978433024618142966 -2.5291926713928121195 -0.64722942863457999518 0.82139645309309239352 1.6411612667933992427;0.25338124317147542319 -0.83753294069047401482 0.55218075056790227872 -0.21347766893629491203 3.6479123399220458879 -1.4818333809889596697 -0.081827021357394696954 -0.94909693712726150849 0.28249874225728688337;-0.92936345267668951653 0.066688693921072420001 0.27772651201876119575 -1.0827880795972200101 4.5543046173654699871 0.13831525836782349037 -0.6906794692358230181 1.5227067019973232753 -2.9457590923992644782;0.41030180266259669297 -0.0085466997021584230343 0.52045355439582030588 -0.40376697143835671433 2.7065801094822763417 -1.1245268263590608715 -0.14983887370887646884 -0.047800871806050894419 0.20694519651149226314;-0.2206958079038898457 -0.31001593022905782338 0.45158980878302806827 0.14521012849455086635 -5.4112601623110547777 0.47629414883267923164 1.2139094238083241173 0.024264639963690957936 -0.91560222797807222506;0.17467163420026396436 -0.15454760738461109648 0.48118425440883294542 -0.39521459137588088595 0.85850334330166067076 0.71153145325165823021 -0.29563353567602912442 -0.60050591684655452163 0.37286727011660791842;-0.65478457964661263002 0.41188452010061193942 -2.9156142531267321694 -0.1651598424711619717 1.9108129665426920596 5.258671560676252632 -0.80210220072533100488 2.5622481428399273007 0.32697818044100734891;-0.49530582931047739681 -0.36063439606479819055 0.25224057134638722122 -0.94348971800669456655 -1.0945990871404249756 0.0053451478741518678242 0.58057085657857276928 -0.067298911243667602911 -0.25736683835107332374;-0.11323392135133342196 0.26078404340080912904 -0.27677952472435340958 0.51229919655703148873 0.042798976182696249482 -0.90159711203294512494 0.045113743745640519367 0.13464600944807700311 -0.62073287512088770601;-0.98044038995781968016 1.2052567558290960825 -0.0070542006835252746288 0.18834595703048997994 2.178896923511397965 0.16322857242579186243 -1.6892187824102291582 0.64691721179276240328 1.6870990868250592687;-0.064766132314896598943 0.10158754602438625769 0.58845953505123327343 -1.345403475922481995 -0.66280267275835458296 0.87625215509550158366 0.54970745076049865041 0.1243095430311586258 0.147078274834617162;0.31769553182795273738 -0.83936429914960286602 -1.5704426235148205571 0.46300460120330177993 0.016996459450596312218 0.37809450214577378091 -0.82946106009999742703 0.8510980319372661862 1.9612974104672848963;0.25281234907758154407 0.18227959918243508142 -0.39304580964714519453 11.328940212463937343 0.077873173672410006541 -0.0043028420800352018549 0.27188746287258758194 1.1225369118913324229 -1.7065688366443145796;0.40567539395928298163 -0.17679178771399767234 0.9678604132406493088 -1.4924172922455503087 -0.9548326638943357425 1.3582200226598797332 0.088825772326659058198 -0.4256430644789053197 -1.3727083788722329594;-0.16642199368045140773 0.65218473509612395755 -0.81679983209780648856 0.17476411568757516113 -3.9059553582247987791 1.6876496483629235268 -0.017728431558885170138 1.2444832816807713805 -0.49011739381998375986;0.18193443047728211082 -0.24558722155743509252 0.59413095978627017413 -0.70336311537101858793 -2.6831904879814016951 1.0851121549742936967 -0.28455287384954686125 -0.61548848119726562444 0.77523185027954644166;0.28587045703684954567 -0.77654449744746756323 -1.74516465682535582 0.70834475581673317368 6.0669071406071637398 -1.2270424324017314976 -0.66724226722791279975 1.1981605560847434777 -1.0650602415059082784;0.10411271694032446511 -0.22813659100315836215 -0.25737683460717614148 0.0040106198261216658568 -0.34889529094203564075 -0.62697232673832181682 -0.016789216508049847887 0.027968242931827633213 0.37100980764076263441];

% Layer 2
b2 = [1.0562639220952221297;-8.1129816016238116561;-1.9903029921739980868;1.0068300271786156941;-0.11098727016247326993;-9.8657552381221176319;-2.9537730774322592531;8.7006133641929768174;3.9456832438024163068;-3.0432988253266177736;-1.224625031824286836;0.47959428007439719455;5.6303637798365784306;-4.6446351751766652427;2.1087461512118101936;3.5783414399952904184;8.2555685627239974167;7.4694464174255426059;-11.013225794176189964;-3.2484180409401628431];
LW2_1 = [0.22598286100395345577 -0.21314622218110282348 0.57692744203567558614 -2.1159290777385835192 -0.57054173975097044469 0.20043734435108120917 -0.79398099402113953005 -2.8934160016389460779 -0.49489075573679780495 0.42218292280020208729 0.7667817587448690908 -0.331072038112294742 -0.86657651230583732094 0.67049401299607680471 0.50423453525279327003 0.76001965987035358108 -1.513357398915756491 2.3901605306708484378 -0.77744042684947556321 -1.2237380643375930234;4.5528401941622718141 -0.3945247960382620156 -8.1773428034659438879 -6.7173432635094041387 -3.6827406373717486154 -5.6773516804803643154 -8.63689423876231821 8.5413806475316462752 -1.7967999623215722416 0.60502842089841413209 -3.975134803920445048 3.2858695301631026808 7.2074770450370673203 0.78923919070218839789 0.11380609320668559625 -4.8419762977196922904 -5.8749520117774380878 -7.7880851174428054051 -0.27217226011390932561 10.55980334870083226;0.13781704481904288873 0.258289299376716186 0.039480814505548966764 4.1420909906321572436 -0.29192194956717071319 0.94723742567925162117 2.1119156858005165844 3.2741389499433397603 0.011754300734916640209 0.22325382855391961989 -1.405067055338248494 0.93211160036401707885 0.50567964321972258546 -0.78289856673479452098 0.53235473128640709017 -0.25146436952850964586 4.1733358590931484144 -3.2679131858573171598 1.1329394687550788934 1.2729595832107674092;-3.5305547013207179141 1.4846291241717930465 2.6161009042803509139 -4.15810021914313932 0.19724867978307930594 3.8953205116694591403 2.3129174732462334241 3.6449514907332667413 0.81754396641705784354 1.5511385737398333262 -6.2256678563602765308 -0.72548824482633988975 2.9950336151489174163 -0.36307727349302976183 1.6940331638586076934 -1.4975797075436501071 -3.4950458290841335263 -3.0006917449270114062 2.2810912293741338885 1.5497205511981975157;-3.0931791682678126953 -0.26181152737050666923 -4.6058022226731454296 -3.3502114915972236453 -2.694026225844634137 0.69888708432998492004 2.0230182383501813526 -0.98507789952894686536 1.2720553790833901697 -0.64765852195895612375 -3.3246005724769305267 -0.45241145422915435281 7.1358278956219480804 -4.0317714035458847022 2.7473943413320753848 -2.3045079383493121128 -7.7198289920490301697 -0.89021203417681205039 5.2039538921160071183 -7.2463660604351458616;4.7957213506590958829 -0.5502407981965603545 -1.3104878381395759224 1.6597630460901815486 1.6173280819847224432 -6.8627272921156343699 -3.9223309792278668873 -1.0552145100839367409 1.1578810047847933884 -3.854618288139936233 -1.4670309994556507416 -4.1840467371612053427 7.5506648472291848506 -1.8530716324534555195 0.87845826782154334822 -6.2450895589210029257 1.2665870531810285993 1.821296051990150433 -3.5448234996149081688 4.8878737467297144192;-0.22387997421503605389 1.5210083826770397497 -0.85343449124959036567 5.0675714494131547383 -0.66643552663313643247 2.494947076804769015 1.8999263104822401438 2.2559644095481412585 -1.2382484482978648455 2.0217350199306327596 -4.0186891504837944922 1.1266180937991321365 -3.4456289410989549005 -2.2087430649867747512 -1.9232829908144217779 -0.79422943599178041918 5.7344569373009708357 -5.5684138499364124186 2.4947035893578197729 1.0750780311606196182;-0.091566778673275617262 -2.9460146300822405152 4.3948224317114554793 -2.2276172440182158141 -0.079850777031413910922 -3.3675386849021187174 2.171230239025903952 -12.948384652564275399 -3.7789724418564061281 -2.417512576187049067 -0.82255829145952352732 -0.46790166638309971248 2.2569557310663324046 5.6436372687147100535 -0.53539808100139119063 -2.1398003647331704791 -5.2970771650959909138 4.3497260510466961847 -4.2676580286563448041 -12.837881833051815406;2.3104493045589289402 -0.85674056347116500643 -2.6796500047299804947 0.24376148405729020086 2.0695016932922785102 -1.6607639217117775576 0.64804657116584107879 -3.1857008497053027618 -0.81792327073383330749 -4.5508402940296246442 4.1242634488147729144 0.58194871986403862163 3.9616910496396902097 3.3406124975984980985 -7.5123363860548195703 -1.2752856108528018986 -1.6971010736056368895 4.0708407591662663094 -2.1714324871542602935 4.637395424388874865;3.6289099821717529792 -0.91504139183596344687 -2.6181128675343816603 0.62454002386921492196 -0.10705301299957822869 1.6380640124691960846 0.1501214036873358415 -0.10798519328373962223 -0.35527955797735427668 -2.5509312011355884664 -2.6436698273591527908 -0.7948881485549178505 -7.4968019673629111566 -0.01609807879587665802 -8.7907114177598799643 0.9526670147794060739 0.85582821731667857446 -2.6671767470780283205 0.20982962140104161053 2.1460050612500372047;-2.5266404083861773167 0.76424853303887041456 3.3197682484110471179 -4.2249249832445237018 0.9220761819807681281 5.0185339068249410488 3.2939209517816596673 0.8604557480936833036 0.70799808614077142099 1.7189975379666857513 -1.5032877248238156742 -0.32582113579413329862 -0.12304371881482785434 1.5185128137962768946 3.0428144483431518452 1.078926662643376222 -2.361692035017433966 1.0100021048309251182 1.4264902178973675184 1.630341902183136904;4.934189301226978408 -0.16927941154461631501 -3.8727256924139799033 -12.368879618399997611 -5.2219979970256646951 0.68698114047581015917 0.25731063813627896852 -7.0991432304594574987 0.50913574059892741097 -1.2847004229511167495 0.2882329726548845672 3.12606877923384463 5.0537624543652901465 0.42614579625947873742 -4.9753308453769129471 2.0361409176918816577 -12.559457658466520513 9.3826632423288121032 1.0027046052282138078 -2.0432441401892065258;2.5529808667918847398 1.3651642292125050204 -6.2712546423276922525 -5.7436162436674882414 1.4245331418583730976 4.0881003215585245414 -3.5369363301727769766 5.4473290745443199157 -5.1846196883071131722 -2.9317089758827918899 -4.0041526950498491644 -0.60302461839882848249 -0.51973628266773819195 1.1846134158494663335 -1.0622427346144625027 -7.2964907323004224438 -5.210289965230589182 -6.7000624397351034034 -5.8045292695704802099 -2.6756827158198563943;-5.8045680317125381009 1.4083869927311976067 -10.033957453589003705 4.4151508581671707887 -0.53763870014259551589 1.5240842192188970294 -4.6383489855957931169 -3.1226221926350663516 1.0324077786596193018 4.520745700206369122 -3.4459246383523671753 -1.6829741680206722343 2.5014060027182187795 -3.5546342134671080615 2.2516439030462436222 0.74119860456685904282 5.9100746900879803647 0.29467303300358710372 0.60591489806844933685 2.3844787035074510584;-2.1282444259438371148 -0.51974729409365960642 0.81871305122822268796 6.1605159056362728265 -1.7580865707938329034 3.5197190863942595662 3.3944393396215066794 -1.0538518843361497357 -0.38875198883344447287 2.3538829326392072261 -1.9736643098443646949 0.87706082031253318476 -2.7100925561846991307 -1.777686370966697238 -0.1935670212733711093 0.27053605780382267154 6.4684964073407709151 -0.60886598497684052411 2.0664847347339159178 -5.62421435438505668;0.3810190437098699423 -2.9038715490775279804 1.8231087442262816634 4.1289492478199241177 2.4567363387688083698 -1.4337949592756427108 1.587519947380162666 -11.117233150210820369 1.8275566555572864136 -4.5806443792763396061 -3.7890599263458311086 0.57101064710862170504 -2.7193899611294534147 -1.1378040920106982092 -2.2267534333995921969 2.3769964448908402765 0.076597143003932083305 5.5787345600340429996 -0.14329600067303019384 -3.4285188065601270857;-3.110843113502439472 0.39223969190336416268 2.8302503491689532389 2.2730197839866050913 -1.1729639508250353508 7.3546559185227371458 1.4132498413357259537 6.9866010941810809953 -0.73034102258748778702 1.9240763246667582642 -11.455443863563603557 0.015924199700034780136 -0.51804007108115968094 0.94144384009799197965 -4.9715292585481085652 -5.0756222210313790555 4.9998795563678264386 -13.163935715301084528 1.0602983362960296532 -8.1736686611811144587;-0.95215251777117393406 1.0817377932545328978 -1.4914958813278711425 -0.41124668674613606978 -0.68998036408851670664 3.0865996816682859105 -1.5623137127601238738 -2.526618036102001863 0.014745046823763034716 0.36728432615559980512 5.2840540509238289602 -1.1712054550500663463 2.1000957599157241695 -1.6026210071406932212 -1.2340726242270749768 0.25263180354330921906 0.78048876865324812169 3.2909170369810065715 0.33838091375362178148 -0.75491067722206728341;0.5061295910168586154 -4.1604022432430385336 -4.5843808110506509834 4.3641608322426890254 -2.8390116254939661289 -2.3284786293141457314 -1.2582100482300608846 8.6209509470670955267 -2.3696438120840337405 -0.77815746442002720062 -1.2642416074696851691 4.8705281179704202899 3.1619783797351281862 -3.6636463429749417386 3.114117078113049164 3.5980605973995536395 4.5433892962869455445 -0.55787889066827200946 0.18928041562666181319 5.8807987372073551313;0.14002909359652709886 0.36926162962239822418 4.1447789545317927917 -0.19933253559887526007 1.5368985087983326743 -0.13950645966652669427 3.9066747016335021669 7.4935712769474243089 3.0385458319586811093 -1.1025885534140869026 -0.58477181357883267765 1.6419011451519571754 -4.0986708227997459275 -1.4321994855208359798 0.95401646798771899682 -1.3840874199611474804 -1.7607503887614543991 -6.7280522966339342261 3.6250927276475080063 -3.756494759941210404];

% Layer 3
b3 = -0.13879152773776681773;
LW3_2 = [-0.550451791722570416 -0.034953415004354150553 -0.57112843989040606996 -0.15807446168134769993 -0.056803170870304162121 -0.053148470063417517506 0.17012734009065616503 -0.026578648878012284262 0.067466210675513116346 0.060253178855322532537 0.16637175715097685114 0.027328470341403222205 0.048023174211290847735 0.03938698398820367208 0.34383489249152809908 -0.089626663930643016287 -0.093293629861537857861 0.092879855007541214929 0.052374625908777588945 -0.041174341097777719667];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
