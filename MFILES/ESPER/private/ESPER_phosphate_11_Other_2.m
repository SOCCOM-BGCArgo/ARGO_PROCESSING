function [Y,Xf,Af] = ESPER_phosphate_11_Other_2(X,~,~)
%ESPER_PHOSPHATE_11_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:30.
% 
% [Y] = ESPER_phosphate_11_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9121273760708188405;-5.4334355438926520421;3.7954579559919707776;2.1434247780787072379;1.4891452800261231193;-2.6541347040830771675;-3.1036240389637939074;-0.31218763677412592061;1.3276840990960458999;-1.7511124272926128498;0.19958330748811212163;-0.80773665348834033928;-0.91743928425071596955;2.4505719897860700485;-2.6554597358354463665;3.3879550511450551298;0.6257833320332116811;3.3778648482955362375;-2.3950276515299924185;-3.3815389627910521497];
IW1_1 = [-0.96946020111984521073 -0.98309008807374931305 -0.81735119645617004824 2.3507575553355111175 1.7107909597289232551 -0.8484804576992636127 0.14286898375734485844;0.0009636320691284653954 -0.10859578113030543545 -0.14512518443782657096 -1.4192232570948688508 0.027759705966502495195 -0.84485092472208722647 -3.3410083221930166886;-0.87481810151500394301 -1.9130093445903766369 -1.6996108544553152342 0.70243005009806924743 0.011753999630753169531 -0.91256661024153173933 1.0426593910083221672;-0.0357132874981937673 0.081135038838025558272 1.7577371145284985676 -0.23510487421764933447 -2.7360195234161621691 0.37299156399183602817 1.2481010418602405121;-0.21149935675818506975 -0.39124140322880085474 0.29274542722069435419 0.31055229170398851446 0.58760116013714347449 -0.13678436452431672055 1.8850502675141957987;0.1187321224745232634 -0.083970367065159937092 -2.9144544712248321439 0.34041551991301588487 -1.6428869131858077068 -1.0652843601029027276 0.42877928026096173708;1.9561456689890295291 0.54229796808343755377 2.8708558975788540657 -1.104311772344886311 -5.0317616928879864702 0.69990442041073219759 -0.33079432862107815971;-0.039142872106010355437 0.40641620153692320505 0.040738161040212834962 -0.17255517893499580651 -3.291952157756939723 0.48185751601463483462 -0.59382841402768149486;-0.015597241897967663304 -0.22431767527777002336 0.27236899643082451705 0.48488307958301651857 -0.63281927116542646683 0.48392995644993591631 1.7375659634721571933;-0.81763118339642282262 -0.29789693939569539261 -1.2635311793674834924 -0.36690138696174290356 -2.3219868601707394085 -1.0678861954391245526 -0.18818428231132602879;0.69779120436615016398 -0.92416237831985303952 -1.1870432566784336892 1.9062699927264441513 -4.1289393185460410152 0.57242356808028815873 0.90580589094513330739;-1.1323943064499943922 -1.0029613002928183807 1.2097338771842387484 -0.080539183796167132523 1.5616580012271783495 -0.19706671653233612251 -1.3124112401659107086;-0.750296732952153822 -1.1758671442296591003 0.86407405213662635823 0.30681786685489398359 0.21037029303661033963 0.42444492910533215824 0.012607827829379992038;-0.56585004347425449378 -1.4473321570562263094 0.11343681199414015759 1.6236862080193903424 0.32282112719585892568 0.3154835632214407215 0.93100403029476619388;-0.46715504290152226607 -0.18862319340651600985 3.0450427627616956094 -3.9543651830733659303 1.3782073387368416473 -0.9200220503417504414 0.38479451358021593554;-0.079659587230835146587 0.32991385123765987197 0.1089830830966164732 2.0809326051303189686 0.12314086161341153414 1.1207945763944038298 0.43457079204710014064;-0.07858896691870874418 0.37204086940474478951 0.096472103001799383581 -0.17843704769426182999 -1.4044390344805022242 -0.70485367045523850127 -0.34017828872824285025;-0.64007972593697048946 0.61278826988955281685 -6.4680315032578405976 3.3297470004262748056 1.5067769881332337967 0.31087502237828484875 -0.12455645516252573934;-0.62048171836599641527 -0.22879376604733242528 0.65388144913313295259 0.27919354570453303044 -4.3220040295537733854 1.2973635529862643789 -0.60217528686549581796;-1.3488789894739485753 -0.5240004220109171218 -1.3004837849956507601 -0.19025536353495339781 -0.77568747614133493062 -1.1676868612625193045 -0.076493577034981177776];

% Layer 2
b2 = [-1.7914380775106752974;-2.7396679803720078716;3.8233881688802311416;2.7581512819472377984;0.21826214674438293439;3.1900466341179836149;1.223212092782284488;4.1482034142247528052;-2.2007235702003273836;-0.68608296617907749138;0.0091160877497930559166;2.6161230721286208301;1.809223448100108822;0.89949743695329986704;-0.39692559981986025308;2.1310043436949834827;2.5836708960911742849;10.289289439695121331;5.3575295472841348854;1.6656058341331561046];
LW2_1 = [-3.3018524552350343448 1.9459590049951449586 2.6803081623377651432 0.022447676127352635123 1.2617151459492721433 3.0624677508434898776 -0.97956182953747561459 0.34748000309899795823 -4.0848218887252745191 0.062226160929126667076 -1.782335704975568591 -0.90977215478809403404 2.9787238226275984943 -1.4751664454560160511 2.135935675925268562 3.3443772558183124666 -0.36491449126040548245 0.16960546893702760363 -1.9285956303143954038 2.3604316785950980595;0.10210614181987576199 3.2063272504835893528 0.014123207719826431569 -0.5367766475116589886 -0.91943997718162129296 -2.3746108837288635307 0.62366190772920282459 -2.2591555656276947062 0.6093161440025877118 0.44016374134676539143 -1.4025636306005522247 -0.4070523121656632326 -0.4195314147647073999 -0.0052452268280304432252 1.4714227387487222032 2.5404277649573825393 -2.9760268619999283857 0.91200815681056213169 -1.6911322406600715063 -2.5987908099233836268;-2.2527231227226631738 2.8133449647699118046 0.8755789619686927816 0.20340050696310899014 2.244140481165769252 0.37083977540762985692 -0.97059904666372698312 1.3938955427101895612 -2.732283371427554286 0.30271381615336356852 0.55441773785913173178 -0.12191319787855679768 -0.21062203432340237397 0.076826096510506189374 0.21575900984412973993 0.87000058812094516192 -0.79739190795522596478 -0.48545056407333531112 1.249758106100435695 0.037271031913255966983;-2.0109032052182733707 0.16766020804482337225 2.3537080930353013741 -0.21311083167978731034 1.7755779747827231674 -1.1474522345023627778 0.2339268647586791039 1.54597644811723689 -2.791548122614285532 -0.27670415836210665583 -0.35491229133158752607 -1.1415302899165173933 0.95756884051368984512 0.8623910512751163937 1.2018543645385646457 -0.99493865006275938878 -1.8319316704647634619 0.5560492662481956172 1.3764901343589648341 -0.42651962656388098249;-1.1219047478615118418 0.75929991496347470914 0.60854110355943613619 0.4178701087268536507 2.3914610745416000626 -0.091387561086832533319 0.13166652768640982329 -0.17507419597756285201 -2.8092616358137965094 -0.17052010528512309695 -0.027851791398480488932 -0.65993274028518067453 0.64943687952753159642 0.32282359638594793072 -0.053457712595794043553 2.0017755476088465727 0.56029792282010792981 -0.061868273102985094081 1.668714737713590468 0.43477397280301943727;-1.6638274692866410476 1.7802985560434361201 1.0124265270976882114 -2.9195918120292665421 1.1089787587796922086 -0.79486048960964683641 -0.72221756424326488677 0.72135122763168846305 -1.4963910110207243598 0.383023744107884756 0.84094358996606244361 -0.3880545972717032166 0.31283216417407971877 0.055179633362536825714 -0.93710198829790702924 2.3310769965143078863 1.3179615278344676277 -0.26270094532963161882 1.5953185018029114595 0.40685034292410671153;1.8310434430570090569 2.1887433135506055848 -2.2122778529601498931 -2.3019203486182315821 -0.18295492167188109889 1.8035528582226818539 -0.73993105924353896885 0.28388570705518306747 1.9928326979685504483 -0.48566531601522860973 0.0078058656922999902772 -0.99966574829656940082 1.3189973859133294898 -0.65932423526888861431 0.43083318320221325459 1.8977810760887214858 -0.79119591934897526286 -0.40005246663115479056 -2.8752719298474684884 0.9889430770389430192;-1.0788172286375372622 -1.0108131336824286439 0.84554826515696490663 1.1882343309274778775 -0.86548306792587592629 3.2554860155430529467 -0.56173664890481533885 0.14930815093276114669 1.4530764754849483378 -0.089429809108149321828 -0.16288065178332600258 -0.30499017709708226009 0.20564706453723100021 -0.25016420407120548708 1.7396151739657861324 -0.92630637787602132516 -1.3306339421429931313 0.99158734393374237115 -0.43071363071216983709 1.0255309016166231917;-3.1300903954612464553 0.69114188730941739092 0.21431367331713244151 -1.6987552830464545117 2.103259699486465184 -1.4593501584673564953 -0.74397984537238093239 0.59117491634042784732 -3.598445508685079286 0.80502903056644570245 0.44089221317707116832 0.76499715115961064438 -1.1010584495495681079 1.0576039295672996499 -0.76874584403398071863 5.3498063522357792721 -0.57509099623082582387 0.26043596505040250699 3.4809220562610354577 -2.9024931812295120537;0.97509422192768058224 0.11746663954056398016 -0.2877813926479455553 0.41150533345854767298 -0.89899707110074278393 0.9790974669951469922 0.47788761866554330116 -0.89501881785727788188 0.75846412467379686895 1.0524129583231471852 -0.29008223485484435633 -0.31856297702325764298 0.28328318313001593642 -0.0035092549257679673397 -0.45975169843549734683 -0.69216443095825896936 0.98429566450757710605 0.34076715466016821443 -0.25455974880865844812 -3.0460685238215363668;0.43091438784903868253 0.73679545118393607872 -0.27371366484662806862 0.15415351124171508546 -0.81094669610143743643 1.3844923034203662215 0.24885006834096023987 -0.74967697355427809214 0.63781237905679111222 0.76031234165703043271 -0.24159807214210818338 -0.30510383484794367792 0.20479217559128326531 0.20124317638969399513 -0.42836683584361934241 0.11727268687282310644 0.91412771332068443186 0.22024534947381982364 -0.20031243113160646097 -2.7097094631481550842;-1.8314661139700936232 0.71733061967309130758 2.1057086160591138579 -0.7848247166571560296 0.57672196865560276802 -1.3612555612994621246 -0.22968130284000790042 1.8643626809027054048 -1.4723770884058464681 -0.09447385657070284104 -0.33968321891275982116 -1.166617731858604623 0.98142961404391693137 0.88430956680482741827 1.6522257836745593007 -0.47627349022292325698 -2.2494824884562070189 0.81220319823000186599 0.91947768483904424031 -0.53968812679792943499;1.9275759753367911475 0.22322498316642419569 -0.63471060321897110335 0.53211780537438391203 0.55676841159243062318 1.1718366045135530928 0.70454667317855879105 -1.3797806847046825141 1.1662273993590923649 -0.31484507218399621076 -0.79329463837414948557 -0.57492967162890995514 -0.61182682573301694351 0.39101241971724642887 -1.2136348864393595726 1.7597650817290990677 -0.92662818375543287708 -0.24149803895960983424 -0.012450582233681671204 -0.5157181729711252105;0.30490980312743876102 -1.6145314884737780314 0.50687068799384726869 -0.22523237724809783145 0.44184206872759562712 -1.7461870377048820391 0.052586721231936292553 0.66504452221868959327 -0.11572350095827267646 0.040061198341106413201 0.56774085873000679214 0.043706693867772303252 -0.023751963511557831754 -0.6822635123998795903 1.0073250509216977733 -2.6733284244879618186 -0.97701054770790130011 0.50392974141563739998 0.62696869087262085962 1.7904951519722247522;0.3072855114767519269 -0.60026647361575780071 -0.030265675398108763533 0.23373522553664091705 0.80608331518046560937 0.68732626234922233888 0.45156081665439912198 -0.7672909851450251395 -0.69239523305563266398 -0.3668328539946242306 -0.1767286001924214256 -0.27250684639713795843 0.39333015920846470248 -0.0035131140358076067866 0.25226285459846692349 0.5847069261903802273 1.0701028657148821122 0.048287375941524053602 0.039906769082675382088 0.42225036997488007984;4.5750858708033472766 1.4870427156486691889 -3.9560549308500738697 1.9750956365956298111 -3.1694056304947357816 -2.0851124081657363973 -0.47639356451787928659 -0.99696484438974830589 3.3323194372196138779 0.3676960777546385839 -0.25205895291471019926 0.93641104459883417466 -1.0657199614736432292 -0.67132799894547245945 1.4548602537538353197 -3.0890782221988062339 -1.7679318412787887738 1.1796996064093789869 -1.037565832546619049 -0.27285390076843624163;8.5963632744788203155 0.69260310711742589795 -2.2373948122851765596 9.5736468351920382958 -0.83987060647171929428 5.5467450977737566831 2.8778235464862027548 -2.2554226705496023264 2.2698917683895993846 2.5158719384677525888 3.6521282786643163298 -2.7107265858790334789 1.9728966688688205355 1.5573134205487952908 -1.0733252034937619257 -1.5727759190688488378 5.3370782884630809662 -2.3899351417833116784 -3.3761372559909985647 5.3376287055611246757;2.5996543821081115055 -15.063647596931234673 -0.57290943929105853094 -1.7093775182393986523 7.9280040586949684922 9.8501451272723397068 0.24771307410982359998 0.33745478642209914 -6.5050500023956310258 0.048701104665903209578 0.078618391612377311328 -1.1039382017645229528 -0.21219774465243698702 -1.8880197872309947282 1.1004935438149663351 -6.1613224761021223586 -0.94781965533911038957 0.61665489762800917983 1.0340322830893540207 5.3437194854786094211;3.9201347245863260582 -1.8152117138827386089 -2.5286924903013638932 0.053055791824872924889 1.8083917622634277933 1.3976728830972267037 1.231013406992291781 0.27511822215669906599 -0.12118880651265669102 -0.028023692385272119115 3.0310101704716534421 0.068161441559116048294 -1.556636380785768381 0.62818196972795681265 -1.7635838151972809129 -1.3228996760739748506 -0.15398637291526434678 -0.16808264152128399305 1.4891902195439765677 -2.1969325832660104858;-0.10656717809491803028 -1.3434160540573902853 0.95343532379845452596 -0.059804835042708837101 -0.88656784026850499192 -1.3563727210935720979 -0.14315654100834576679 0.1622636025787691505 0.86046360646172548314 0.25159688341740049644 0.59653682522833451074 -0.16584165537135722723 0.085954013378549853908 -0.58172105420385766816 1.100773687267077916 -2.9871891546908004855 -1.1191377552632724157 0.66048160340386363742 0.60188038096311624603 1.6752047153362208398];

% Layer 3
b3 = 0.088127474748122797132;
LW3_2 = [-0.40433086862337325185 -0.11489825839083646353 -0.52520640189387524099 0.78812052824899603287 0.63037868604026225938 -0.39040460797780124347 0.15820462807795310223 0.35100481957505091923 -0.11317528983792983499 -2.5684889459960782432 3.1724940654618349889 -0.79838196155511675922 1.055568168433096643 1.7636786664406101099 -1.4620072261261654045 -0.17056890036044344838 0.019409728602816148785 0.086393546434315585114 -0.96376686092186614196 -1.3437675798125832127];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
