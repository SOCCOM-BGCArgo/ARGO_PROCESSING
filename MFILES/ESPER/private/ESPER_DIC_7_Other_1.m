function [Y,Xf,Af] = ESPER_DIC_7_Other_1(X,~,~)
%ESPER_DIC_7_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.25255120789812340876;-10.434974580405418365;0.57597869958130099022;-0.58725212148818373148;-3.4795432132337671405;-1.282628699189925392;3.4958294912664489296;1.2166098907455507039;-0.21542535990248903865;2.3561973754838656525;2.4944915816815593779;-2.8871537057588718689;1.1775585526410716763;-1.3043436616432393382;-0.78273609094710672185;-2.0482287126103972952;-1.5301165819630155873;0.23904772749886521455;8.3913407419278396304;-0.307564454633889095;0.44578313355825277542;0.80315222907399885788;-2.33905024270247619;-0.70014209448314623785;-0.58745263853435936152;-1.482224255985363337;1.8809912357428972829;4.3377085044736256592;-0.60933402069881048568;5.4338294261329771473;-6.6486083369942763355;-0.64401401769094446248;1.890914179235384962;-3.766592078161942414;-3.1131538987295552801;4.4630619093565666589;1.6244985953612407492;1.3751091984242596045;6.4274465121744448481;0.97011286710666666533];
IW1_1 = [-0.28480398305080806276 0.015555004261163419763 -0.77305121534754606127 0.4028678299276516328 -0.4658528872489751671 -0.48893862070226690175 -2.6283757279428012765;4.6764936387118085648 5.3317528732084094045 0.2549966061161039188 0.35000158416261162309 10.325766086238679975 -0.98380708409796624458 -11.144238408113906758;-0.22329039725210639289 -0.046355802808541610172 -0.43131987779600267086 -0.59913637761404003879 1.560442586247329233 0.15394483971495945274 -1.0751427497433136971;0.25088390235549606899 -0.021988677642213197427 0.5947753342409606292 0.4192117021167772184 -1.1997295360806330411 -0.19662210576561653386 0.57962754688399331648;-0.63196858288696933226 1.6313938584119187514 -8.4014005276170209413 -0.25253865063596259155 -17.646421029072165254 12.97945976684448155 -8.1816804670519651665;-0.9638025913076780915 -1.6914328796074229455 -0.66785208981911425852 -0.34723707920453339426 0.56381717404137088323 -0.65639475714090311786 0.2329041376858271839;0.12174835718447743482 3.8954288975680886331 -2.4266674653741246992 5.1755654873990231124 4.170741023223293098 4.3707739709603981026 2.1453073407671023887;-1.0049217181894354312 -2.2846037246500312534 -3.2743883249384748702 -1.4153758546580172961 -5.9420375087625405541 -0.052914508006280246144 1.0638359048184962141;0.064219317233131734124 0.24725182951141466692 0.020008495825639342758 0.20542033897661410302 -1.2083294961198045581 1.0913392536853017134 -0.53207238189754657576;1.4550169269690205187 -1.3117378520809395148 -3.8460149661653542097 1.4959951426026985022 -3.378846703364755566 -3.1842074242726434719 1.9248369849416819832;-9.7206901353880681427 -0.2418635094377855066 -5.2782878381363342868 2.1340888029218425537 -0.45265753296163319108 11.302059106095411423 1.7196384876506434214;1.4818257018791844981 0.017521571369145290398 1.5099543769785273017 -1.3370413895834740714 4.2503016939721218748 -5.4422933914550224443 -2.9338065876285508438;3.0497883452144067817 -5.1575371625646457829 2.3812192764082373841 0.46703809594802242477 0.33092135473706879578 1.650144919471163929 -1.9071224824416845856;-7.1792006299058748198 4.4403146654446308261 4.143268116013929081 1.7977410696645912402 17.224637415266602858 -11.380132509803024377 -12.498436882902247191;-0.31068582963235019667 -0.22752524709730925778 -0.2444348739069336085 0.47304025022177559334 -0.26541248989979665529 -1.0478525508760030416 -1.9886192077652911081;0.080301649737353722469 -0.86760816858500366955 -1.5357837897663839666 -0.47374204008887199624 -9.7911541069927068293 -1.6097618856716184865 2.5584163595999749319;2.3888134281709740847 -0.75503098524130884961 1.2970594411666689361 0.84303595757438787306 3.4782287967541947182 -4.0103042968955344705 -5.1457973934786718218;-3.0866940260753659153 0.78684526994337455896 -7.3184669284845629278 -0.0046920680153408386021 1.4603316288438052961 -1.4900633055944203509 1.9970730966076308821;-11.924815819302052589 -1.7432303142799638884 9.6554690598040515681 -7.7434124872608220969 -0.72642898314921922065 3.7570498154221443343 -5.8558329574741767587;-0.18344349308883617367 -0.03019289308102968139 3.3519609089283122216 1.2557562831979569573 4.1529393868544257629 -2.9443891866535714108 1.6663913398772614016;0.30614982261787299089 0.10266028863946138894 -0.89348394259543029161 0.91035506423200518444 2.9918512707374684823 0.50954458633324639649 0.25684705981321603874;-0.21979518830719946276 2.0692440477929907594 -2.7830858906587594426 -0.19944033756913093214 -3.892325124049364149 -1.9120466599999292878 0.57523323810289606062;0.48775287113582954657 0.016963595352493629487 -0.70145279964859319488 -0.74002823499643977101 4.8232120668523510432 -2.4948318792963415369 -3.387960820874913459;-0.32265712624549641729 -0.22962775677347854741 -0.27774732662186679688 0.46070640009402841208 -0.50484780311937527131 -0.97217608916722608736 -2.045754222624244445;1.370640266316498046 -0.0081766379812803213767 5.3117156447155062793 -2.1680409126264250652 1.5108067228266053306 -2.2902759827446756979 -0.76576657464931019437;-1.5678076623881336271 1.7281237183009938718 -1.9143290870687228455 -1.5668907788444181861 -1.117314520804868927 1.5913321382306009344 0.81548251621438161418;2.1447314065203428868 0.19527273976296796731 2.7819523087840969389 0.96604619513136180675 4.3146993461365079625 0.48648283948109416475 -1.8651058377522762299;-2.8851051565422030087 -2.7268680275577938943 -4.7057380830523785065 -0.77012387799902370933 2.0836632467819344861 -0.75923909144284729145 -1.9344112410098288635;1.3815517282840126256 -0.011790093874436215898 5.4024622476933110704 -2.1828741921575787188 1.8027143781884402696 -2.2789003737757380641 -0.79049953071527856441;-1.8930352360610231965 -1.404550508995282776 -1.122335034195705683 -2.4986008468244960135 -8.8071814879160950085 -4.9176920361734017817 -1.0749045932022447403;-0.66877802936306884884 -1.2246447533095765614 2.5693667158675874695 -1.7409937223889595526 7.8631782174328685997 1.8797805151909732224 -2.5778403754674545922;0.17779504279182009596 -0.11414672500329660354 0.51595839516480268561 0.20501438730107610087 -0.63023666080937523759 -0.11128640877702820899 0.26281809673954681372;0.32100807062299269168 -0.58018205557401980599 1.1573261262546215011 0.47653532534749265537 0.85692046048638570444 2.1923909027470891431 -0.15341395254329898146;-0.25966049856367212634 -0.43198541429420611593 0.66443233989851135934 0.78614407530862329132 5.0613733317692197744 -4.413626922344795922 -0.027217501862733497336;-3.7616527433866884245 -2.1009854047021323531 -0.89230200163142825431 -0.86595633839043317792 7.6211907603214807949 3.9939267850065158783 2.7315506880014766011;1.3290812311978397187 -1.222095288503956434 -0.93453616948412687737 -0.20865018744091726188 -5.462849794393156877 4.8513803070626577707 1.1310132799176029206;-2.8638967200273932612 -3.6101629152454806082 -2.3840016353665034465 -0.40142125903702469136 -2.1656888737628632313 0.55865894100380775189 1.0570884012200387758;0.93229669008965287968 1.6111606208493836068 0.66240616798767248952 0.35783455011991938122 -0.82625456960094467718 0.73283950315003154596 -0.18505193917672174697;-0.023531639147584885313 0.16893963343241527597 2.3375164093726517045 0.16388756296621448394 4.4318737011608542176 7.1568896041449843182 -0.6677711351521132821;0.77304068846650153546 1.7683723983838679494 -0.48142027209844440172 -1.3999456059745591929 5.1066386998972053135 -0.033345022277871436134 1.0592230287908541708];

% Layer 2
b2 = 1.2352533188043999246;
LW2_1 = [-0.091500583061225659876 0.0069454364284090288825 -1.5663019203914030353 -3.6875801200087798826 0.020509835523283458797 -0.81777639080773201208 0.005843974597172419197 -0.024371291397612002139 -0.50324941832112690676 -0.028251798835882305921 0.0060309699967492011452 0.048058006560871627255 -0.011294167962888802467 0.0062884600740550893744 -1.3488341856932259955 -0.050692244077085370224 0.019417002530401950705 0.033785544475767884109 -0.0017504702513723713331 -0.044199314097772668397 0.15529797145301560413 0.047699941879891967489 -0.057631917362620244116 1.2751071274249632381 -0.70040676178045013778 0.034702581376295435489 -0.034549636805041916698 -0.022779760915479913691 0.68704949348737043291 -0.046566758133944056997 0.031951223394891370422 3.9319837003325495139 -0.16175582012824288314 0.053434185538425243989 0.016512566622817879958 -0.027543350390722580456 -0.016954669321263656639 -0.84476238310714735213 -0.045624012685045914339 0.060413731170945367266];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
