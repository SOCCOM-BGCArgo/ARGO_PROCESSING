function [Y,Xf,Af] = ESPER_TA_14_Other_2(X,~,~)
%ESPER_TA_14_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_14_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3354558505778788557;0.9130126375509778347;-6.7206469594229885089;1.7185315815399517803;-0.16628514225389603998;0.46683115462661367578;-1.15422242938944275;-0.17230546956354045318;-0.044304396056057633591;1.2611611942258773578;0.44177929423207840109;-0.080437173902293407357;1.1721838527773729144;-2.6197400826783119321;0.047965469222141635108;0.046044339053317187571;0.0088233076918313134429;0.18509747264786485799;-2.1057555245420789269;0.71533916118983176258];
IW1_1 = [-0.099492674125056926315 -0.17613920366130783601 0.99112521132464470597 0.49523331386698593581 4.0765211071931757303 -2.9111186291453163832;-0.026072696727163700153 -0.14987541560578343525 0.44856288883719325211 0.44219857784419935864 -1.3179281891454741604 -0.56525902229361157936;2.8147524288638261503 -6.4617991357207511527 2.128052618441815369 -2.032631263599215643 0.074697565229487727922 -0.55204206837531966112;-0.82144084933040306673 0.030065272726922640661 -0.9900653666406277198 0.66360907146049163963 0.27653881248609557542 0.43507233002479955841;-0.017187571233717058306 -0.12741360843923110746 0.23527274446876561553 0.22046787340660237153 -0.94901920001014750117 0.051723759779172921724;-0.84148433656689958227 0.39028319971805619515 -1.502284421134444381 0.069810590362236663031 0.50497704426906719899 0.33510577312193551291;0.20311856182523038705 -0.12808782740276816736 1.87406592989201215 -1.6974784822714694688 -2.1693419075703093135 0.82087643510430285954;-0.3029646809109239336 -0.29568580386270371108 0.73403432506821664205 -0.54514730405364919541 0.75038859115840816916 0.11379653606968224977;0.22846543771207575291 0.14103657779858166932 -1.0226987337978366011 0.70110535312771182781 -1.4648353459741771943 -0.54408946613015618521;-0.79847251581156641898 0.41309125517162315067 -0.67657273524457905989 -0.65896042309830871186 -1.0604067920757762611 -0.80899114165746355276;0.40840610329595178341 -0.8999054867774685107 0.44078493080345249044 0.023125586737173020602 -1.6346882467635184266 -0.35542205912551882996;0.12463794310183042013 0.0043456231425964154252 0.23863657170219765291 0.83416217812033066625 0.16553323281106091525 0.9259898286016520208;0.29215420753356702299 -0.062983410119824070894 -1.221429215034983029 0.879674266828177287 -0.86670688845101917508 0.12574429581535129241;0.084626030219342951444 -0.12606039782492939327 -2.611158352984899178 -0.26451972669696510732 -2.4799975322896230523 -0.32014226330551454058;-0.17310671864191345959 0.51998789221292462948 -0.13070398330759416816 -0.32097022683918979835 0.66833992994807700505 0.11414767401825882953;-0.099521285925865676791 0.13447566456274356872 -1.3120962933836939346 0.48869353007071603123 1.2090721112967197648 0.41381539968546587893;-0.15400759485941303839 0.043443746149998428707 0.63904060067005452606 -0.12621498838131273157 -0.60664967543253622839 -0.0093858230426158723719;-0.10899231665138123248 0.082383710502036994194 -1.1395744417615993882 -0.59664330514017649421 3.3243993350804994513 -1.1042284000644273512;0.098074080185457851444 -0.019531365193791571516 0.44204598440687631333 0.92028313819190299405 4.1131959105795186105 1.4758002989887473166;-0.27743886355730951188 0.83301247176064574518 -1.0729374769627777475 -0.02314247868734763125 0.78266198024458144555 0.3933260789116319045];

% Layer 2
b2 = [-6.4339089810981304751;-3.7545463655648996237;9.5225879763440204329;-1.396622671603164223;5.1856071527598732729;-3.9692029058999152014;2.4235376189858053309;1.1290461940225897663;12.688451145951626486;-0.3930246111496769057;-3.6452353491627649262;4.8663440405641189557;-1.5593750968802269075;4.3374733414312292012;-11.109857455165521145;-5.9224410789698840318;4.1508287017864669011;0.76245056069134076182;3.1328533103357725231;-1.1541185234379935931];
LW2_1 = [-0.89603033224075412377 1.1705887344015244445 0.2027580812420237133 1.925343142083788095 -5.5223198972475318058 -2.9931539182160511459 0.16592060303771366536 0.66823977378146670603 3.1448682514881296512 1.2807483670938928366 0.60463019221215219545 -0.46999255860545402497 0.074280963478186384785 -4.3912771016201421759 -2.5132501554173112268 4.0682845675834649057 6.514617119673586032 -0.084286261502608691987 -1.0759513331123826685 1.554105348415274479;-0.58316478917937042414 -1.6965378332555824947 -0.82753064172660639741 4.3309270713879861603 -12.913023681769885798 -4.5601697402390541924 3.674541830588129443 2.6882335592059511953 3.802241028567554082 2.7893183441559803448 0.9900170449646219506 -2.584462713073694129 3.5599647321640670583 -1.2037092824978803396 -2.8913501465175759364 1.2380550253356474855 11.591197013448722331 4.1816987714331315118 7.3770735174139989709 1.2293233878314528962;0.69249726259236432657 -0.84370306069237899216 0.13458181440432445686 -6.5070151043288841919 12.203148501111689583 5.5320780805892191268 -0.59725517015345097604 -0.83532083659136324716 -2.450559884390852261 -0.99633176957858393674 1.3323875745749129695 0.14417642316479639675 -2.3206563081104363278 3.4082316044646066011 6.5313482733402326019 0.3299808961810268837 -4.011020214335142775 2.0250616889006649579 0.6131613105015546461 -3.2687796961915456251;-1.2215415357183081468 12.069856080671037546 -0.78505770477833280996 -4.2017899841452299725 -4.4346072953813866491 0.16273778086969903356 3.5369257947248042839 0.43181529242802363378 -4.4807381679582096723 2.3095936511420855908 -1.5008583856580675064 -1.2194127226259656727 -4.2377875117582650688 4.8974146102658249191 -0.45514624618620069807 4.3359295281798413413 -10.671610270970669276 -0.31181162481387580954 -0.90217483820765920211 3.3229126776943846977;-0.2045573211866941743 -2.358450456009481222 0.10606983061010064051 -2.7461325551575632709 -2.3543978394969369283 1.6225659609519036408 -0.29512010116463055498 -0.1669647816725344236 0.30408459462417680719 2.5547411162789250838 -0.32807653172068174108 0.98457708421633305385 -0.32202365412046146664 0.17474670935853850451 -2.8261572262338456873 0.077923156006986182831 4.3685677910686830927 -1.3935365574072986483 2.0103379277113608836 -0.052768048090927693883;2.0857672924342787191 -0.06579034205759223819 -0.024530472851330187983 1.0316596209601864853 1.524517088855869007 -0.80710821316818359694 -0.26730902330463895966 2.039665482989974965 0.28782280021862877151 1.3846544649845886621 -0.79357498936879755647 2.1819196175135995297 -0.036286735930465503774 -0.39348676041439295537 1.2784136801138183959 -1.319750328694783148 -3.7871508141450016538 0.74857900497424945119 -0.023053089184069341933 -1.4493147114273190468;0.68932559803956772182 -5.3692562913685346615 0.095255003271744881355 2.1530136856513553134 9.8992024181390920745 -2.0684828581006846626 -2.0344206502896868827 -0.418758546175872437 1.4766770808358535838 1.4313272554345588539 0.25601714125298913327 0.71619451868902161973 -1.6358888525548385129 -0.158003875635090274 1.6986942759637120304 -4.998962014299061174 -4.1150428465805086731 1.9986601562292494183 1.1693200658717548546 0.78831619529945240465;-0.24385760740797973734 -0.85344953722415417552 -0.016970863274621109801 -2.7747284441501203212 0.077927550864625466653 2.5452210122780929424 -0.12319576170490903477 -1.6196362559263726144 -0.54749967405078314719 0.34442030923800187603 1.430543567600432775 -0.17913045668084190409 -2.2924300084829511981 -0.75849160712271146423 0.2549196659270056009 2.4472987538392940721 3.1641467311078850244 1.0391743543667530947 0.39155931601070748105 -0.91954686020408382685;-2.435025223848975795 2.4901854813466890448 -1.4264499854017163027 -11.602115770232664715 -13.357233211551621466 12.872180733208361758 -2.3737583665005463907 -7.074235562269293176 -2.3494157742976229386 -0.65562284430499218058 -2.5935190397677101437 2.4159975395438415546 0.81740468077969474781 7.7526322546922301626 -11.698323750752701145 -1.9984161071965582668 15.395051669156917029 -2.3417334882304214894 -3.7443923673045858003 -6.1214138398244806183;-1.6788901582186468442 3.9027892275645275078 -0.91539564088968383704 -0.067860040367004520467 4.3492532680585362925 -0.29882935016888245716 -0.50706555873474812302 -0.82125283590270281575 -2.6925508376835622926 0.053683688382526337235 -0.57520012379175233797 -1.2572328907816756605 -1.689532769962345915 -1.2818374971063715151 0.031949067842831108122 -1.3211334586578509231 -1.0619460058321479323 4.4034044590327807711 0.43342765572496733117 0.03078121022009251001;0.0098730795164756468552 1.5894159653945627575 -0.2533451355331081678 2.5918886596567851655 7.4673266167195526677 -0.81533003899182099339 3.095719077807663755 0.79330741003105587072 2.430851673722689732 8.200110365694817105 1.9192493419070726368 -2.8202004353624965383 -2.1377921704653108925 0.88015458046392913705 11.632919649874647661 3.4149418814222962659 -5.7213268693139918142 -2.0722334175962990876 5.3432565488431551515 0.43449786136860024666;1.7646709793358017482 0.094789649459063041181 0.65107194297045900555 1.9587633285033132502 4.4548046538181349518 -1.2620253151799694091 0.48770215586949933195 6.1416107657656509033 0.87196386274297643659 -6.8279413884405659729 -2.4507577221997078887 0.98107649338138702699 3.9268480711601139177 1.4630073623518518033 3.8825672025999526937 -4.3725532948943754974 -9.0114259913923042689 1.2328140515512324704 -0.80453598748428789555 -2.0255328546213022811;-0.30899035017465498187 0.5148181095147857933 0.17925801727125770246 1.7293738544455523609 1.3979460586208101169 -1.6063247655646102352 -0.77030004860405743017 -1.873810410531407511 -0.35101507110077678764 1.1805539450980855332 -0.66685897179063036155 0.13820862997452432186 -2.2950013595573142133 -1.6873376356673599474 -5.7383509319447387753 2.4081406021523661387 4.0770835562554355036 0.69504116458042408677 -0.51044047358496269506 2.6657527238837679384;-0.28762042977929486165 0.87598613531619606842 0.013447101098497987043 -2.1550532759937341964 1.7251896292790005472 -0.20108325202877569415 -1.2728031786909244083 2.1475026811921948955 1.6750559861991405342 3.0427444251152344634 1.2358472205219739326 2.8191526272475053716 2.9666027951438884713 2.9514603788800117812 4.5780497420469519199 -0.8536443037688954405 2.0355691837755136575 -0.31629253692051961799 2.3629909048441590791 -0.32787384864859481226;2.6234896872591750849 4.8261159651828764439 -1.2958876374207690674 9.4688067731493692492 2.5943805012621936612 -8.2135340120901929595 -0.43089734902156945351 -4.6670102512091222735 -8.2274426273602436765 7.3872570248559572548 -4.4880404365327208893 -4.0469055901805965902 0.036574371861209806212 -4.8908608351818543269 -11.497356701308024896 4.0190047921934777264 -2.0164813957150062862 -5.1856582033603650927 2.7380529595528004805 -0.46138895574260196941;5.4639373593425819564 -9.0959248105435985821 -3.5871523000981824225 -5.1438890155943637339 20.814367236528926952 8.1163052320379733828 -1.5839689983974003518 0.46491234174594392448 -5.8455882851091480745 -0.76042086260112018437 -8.2257217604633083852 -1.7208890194272736807 6.1930525980585100498 -8.7197393929801343404 4.9111648802136125269 -10.704586207866556791 -7.7204723866887592365 -0.25633615856956126766 3.9202690867934841812 -13.702758651437676463;-0.13683117632538011055 6.9492038246700325033 -10.969048867143577297 -3.0152337095748138474 -7.0762206085613374995 12.85676004277359219 3.5898044421136221516 -3.0011735787619682192 1.5840207029190931376 -1.8066694243953667076 -0.83176452640236930858 5.8128837052591055823 1.2993542906365920242 12.754954516920154362 8.7174708746303277707 -8.1841358243580799581 -4.5925017683425393145 6.1858050620586553237 -0.12976205187915923478 -16.613443278474971265;0.066784396496251230424 -0.67141739928157972983 -0.023534434550450754331 -0.91877875058869573621 -2.0736214040060731989 0.18969685344348252709 0.16833637590870043077 1.7296442158236433606 0.49721009642784896876 -0.95216865718656729101 0.12987962598630661826 -0.049854512898192877846 2.2330860092832995889 1.6777332483247040518 4.0649300211307002328 -1.8561280084295439519 -2.2437375601202682596 -0.85739012927598057257 -0.35155920670408047357 -1.7210605603414614873;0.33213570710599960023 0.54212680060636642132 -0.46674458927305151335 -0.30739602230025386831 3.3153873782351213073 -0.66322782783793643446 -0.25843253776058439097 0.046554883087530904429 -1.2379837700183193849 -0.32145559415068525322 -2.4436602129703191011 0.0079376286062033864915 -0.55557384596228420737 -0.45790959837325762027 -3.3582121759911012226 -1.9382075605184736489 -2.9089478874740875014 2.4079248950959173392 0.33505520762233809151 -0.79551251297847991317;0.40991285507402752675 4.7506168591795416845 0.40246900174615041212 -2.2455868485185641603 4.309069107324932979 5.081787104702512714 -2.6982395073954927867 -5.0504406322941459706 -8.7930363622285181435 -4.6845002335203300703 -0.21029620978689361754 2.6663868027206709677 -1.1585098235726252192 6.6053230416603492259 5.8745597501745159263 -0.23894564588206726463 -8.7241056176532829625 -3.4428960443995224594 -11.670605486678562457 -6.0405793457511283151];

% Layer 3
b3 = 0.64789515218172355482;
LW3_2 = [-0.41187684080344150184 -0.087083271609727411211 -0.26907392323888673635 -0.041250934981272406599 -0.37888679707441569322 0.48854038320695736264 -0.23589442158382631365 0.48666469222168340369 -0.043765530688813579496 -0.22474171671542500506 -0.026769371841566438203 -0.1134009252823567071 0.61421028600702953781 0.15240001316526913255 0.041365859452942910224 -0.054129322560510124973 -0.018088636406228743303 0.79825045656394244542 0.34069677031787365395 -0.11603870838907240359];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
