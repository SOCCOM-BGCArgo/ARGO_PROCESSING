function [Y,Xf,Af] = ESPER_DIC_5_Other_1(X,~,~)
%ESPER_DIC_5_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7725448004854222894;1.1244818371552141034;1.0099471049786625798;4.9662136929275311203;-3.066194892155709617;4.2067382697608923792;-6.0812677294955799212;0.57454136445595260785;3.3061127779387251557;-1.2991025032212708545;-1.245716751912562259;0.41453313114264661587;2.7774776613002636338;-0.69779240989260105099;1.1678086363655928448;0.29244739533032343415;-2.3218303210948554316;-1.3230862047262434977;0.7861355591772413165;0.6642660723667517253;-0.67493588273851967685;-1.0629878201119329351;2.8699984356750554149;0.38209466387984380997;-0.053094588780916524007;-1.2334150733019346724;1.163852541735004742;-1.9669215122118175465;3.2395967214024241621;-2.0408202281958738311;-0.33470921810431841781;-2.9735611525405643008;-0.25009201980049966529;2.7345357454628027583;-0.37920075181597073799;-0.13763501014311163573;-2.0641207750436119106;-0.40582234148138374152;-0.023851403199409558498;-1.338440907657082013];
IW1_1 = [0.026119823296590131273 -0.28750567448182251518 -0.17053891397841247635 0.76701661589347613912 0.070704009181925098204 -1.7998196673116435562 0.15171828088188077377 -3.361505541783532891;0.50049248234685672632 0.9255313389195394258 0.71567376328944354302 -0.43080685155966680355 0.59107381870163477888 -0.1473889997895740378 1.1691141593505252061 -2.7603883117850460671;-0.82923760791032596895 0.7671015362617573663 0.62252310719025261143 -0.077968318595485294753 -0.13578177287605078249 -0.21774768331998425874 0.32014379385575814085 -0.29588820903586326994;1.0181743030577179443 -2.1371223073298808437 -1.2227495510171884074 0.19241657571601630816 -0.091612256671698741317 2.0909870033468216377 1.1132970444808336641 -0.2738163436843595866;0.18997212204363222998 0.090627457414250392476 -0.82352045436337362183 -1.3759642313075888254 -0.28267957350813915918 1.6637390406650893748 -0.37318497086508406468 0.089295978164961611889;-2.0107534665582567079 0.010822207286011364252 0.24208108844265310844 0.1731440991473588431 -2.480150412457068132 0.58780034574203787745 -0.1484369041909510134 0.29930548060466533045;1.6734901078262451879 -1.1268663894673800474 7.0414262368967968087 -2.0655340547927916184 -0.26498045928668512161 1.6370750464277443736 -0.14402621532624454437 -2.6322716548566962302;3.5331359338991679131 -1.6361595529339727495 -5.9697116933963307872 0.021581505522940663822 3.4917050026777949334 1.8600398069303827331 0.1818878910085458267 -0.63709447132544716474;-0.85597481865467206497 -1.800859375679580765 0.015383469659190074363 1.4715291399986771825 -0.68582048900624836829 2.0533396407823927277 0.31390301137802367748 -0.16845775409399696421;-0.048187527052076697953 -0.37415423224696159332 -5.6647972272309772279 0.5940806850783844073 0.20656313030848802437 -2.5715519861953497482 -0.70263401832932459445 -6.5849349558938330418;0.014209956497396987463 -0.29213975383568763222 0.01334680140737235475 0.55965666078480924561 0.38758274579289764272 -0.96756441951833360715 0.73147032260192657027 -3.0430050963471795278;-0.060576907027323351196 -0.27764015966011584835 0.16605905719630253969 0.17811646704890157777 0.37331324744485117062 0.25853343097118469673 1.0495382422267989231 -1.8763852672223302331;-0.041077452404557582288 -0.66216127024893112196 -2.7524925969661135916 0.52194145552919257725 -3.4036397622900977922 2.6443393931944734199 0.69007322932850534425 1.8763643180344700134;2.4976012625104697662 1.690792055906815694 -0.056775677482781929106 -1.2157887986614921427 -3.2359859084381059624 0.45090701234921060081 2.3902301796666076683 0.91153692031393196427;0.14574497796676968986 -0.56168316235105841816 -0.93710004879179864545 0.10156236552675604323 0.57478746462188690103 1.0319005081007324165 0.45866174218639227389 -0.41996882700271004341;-0.062532554077831509209 -0.32836800600016319285 -0.33669765675156243523 0.035157900128298461007 -0.86602811896412190684 -0.23680361897106733116 -0.29761723719378668784 0.10140672626335033024;0.98441709281046385627 0.40307707616587251653 -1.2868688256412161852 0.14248048894944972953 1.8851094949816478152 -4.6598260695523538999 -3.9180071257211404046 0.80906938243013371004;1.1385634231748120726 -1.7852594506144097153 5.8269347233905879335 -2.5371609137222215224 -2.365249248290282047 3.513988960251941851 0.73618282444875171588 -0.20866207754035884236;1.1191127071712378971 0.74321982215199466903 -1.4433486060714715293 -0.22202399799370078903 -1.8195360914196065938 0.76995052335869218485 0.44184338136139161834 0.24344921275707781527;0.069614384291233274982 -0.13222623715904135988 -1.7577271933197082809 0.1838404105254160259 -1.1237397257635124426 0.040524926004953457093 -0.066807732123378302247 1.4056862791883428798;-0.0039596704358700624687 0.47759386829726557799 3.3023540349550688511 0.029190906822297125328 -0.74361227696824272471 -4.7407305674759081526 -0.6496682997051131947 -0.15828464988919596634;0.67173104870330124783 -1.6242603584213202161 0.76311373199380427845 -0.2754856369888500911 3.1585475792658574967 -0.56727332217494319533 0.33250216615230154815 1.2363893003416013272;-0.21691845819540273022 -0.29740293750319263255 2.4644150399039306265 1.5349481875641481921 0.33408168301292795466 1.8104135641110177257 0.31949421728139659749 -0.25797789640260732069;1.1621217114753852329 -0.48552796646907220302 -0.29686838658485792397 0.93434742085511057752 -1.0705955053111191333 -2.0523223594693069671 -0.77666112571780232532 1.59816382709158189;-0.040147060369510365052 -0.15841410088030383196 0.21648047501157616224 0.027776135163796743938 0.55532528656197033268 0.20722968567392596739 0.89167185159915163251 -1.469413486087260301;0.036145458500745429598 0.32428092805675279298 -0.70650490961440570725 -0.072705461973974608303 -0.93935568896505872161 -1.6788879167980921281 -0.28155258929057186412 0.24813165041275331291;-0.48544112213286200186 -1.1200190592144749768 0.05405752706619443293 0.11427604239824450116 -0.96225370921480712916 -1.3020912897326322177 -0.40965021252304428812 0.66295299037997346137;-0.22310149964373357512 -0.83654402489929291509 -2.2430827482244954929 -0.43843194464978502145 0.77585215131992368853 -0.68671024367542243816 -0.87028204640534700953 1.1585049205712409925;0.01998720924885176789 1.3323031419521824681 1.4905117563365963829 -0.59221927635393500911 -0.29455237140010287478 3.3905970681901842489 0.53894658799069272703 1.6825625505917158886;-0.94052257420859752823 0.04244512389160853133 2.0362232936667670202 -1.2593519520226907904 -2.073863785228714729 -1.8891065536261968383 -0.67013667687401390349 -2.0242954865877420545;0.72196083948377720585 1.5858865078837849349 -0.24820003516733035731 -1.1885607170397121113 -0.44403696442382084575 1.0864986470371520433 0.68786004718497673061 -1.9842715226242320092;-0.17946060652555956283 -0.81458008523794156464 0.5634891368773359277 0.64447477754856130616 2.299587964016196473 -2.0400276114236000069 -0.41326423779082976928 1.7477423767157689305;-0.093846783419070448073 0.1188402854321436164 0.54200149906351413609 0.052631175001219242249 0.59893959987199507644 0.49390170454651505239 0.70932637416129662444 -0.86706952509506363125;-0.22199290438643556889 -0.30129838059375219084 2.4718258702896114265 1.5036001114962578296 0.35071773771680336829 1.6382534658414498185 0.32521913367409427398 -0.26262102496055966805;0.04451710110079425825 0.48858359806648388179 0.33694517185025907313 -0.11358289681247576985 1.2480944908640307922 0.37085324407326325513 0.056763459199947977063 0.40446281114684851099;-0.31404272585331283185 0.17137055912325019347 0.47012431182150138387 0.95727065681743117587 -1.3672873749086118522 0.57072046819267807649 -0.47442758177125199381 2.9806558460376746389;0.05548422908463405967 0.040036883194417234588 -1.3598279099040719853 -0.6050129172523311949 -0.34160138629765507412 2.0080555930133998643 0.029207520385285307835 0.25168504092338955802;0.23875177126268221084 0.12887206925501337729 -0.10301782135767788284 -0.31097610249783119718 1.0120894087831873165 0.10961747880231217933 0.36126277874366979903 -0.14837303058463097161;-0.23114883272931111002 -0.34941707542558253508 0.66560464975266731003 1.2492671279690430453 1.6544060898208123866 -0.039132951240515599645 -2.0126252186717175086 2.0813466765946797565;0.11084372805003561702 -1.3147871980641416823 -0.32729649669411486901 0.51592937042622211141 -0.046093524702673513427 0.64355096671581979439 0.040702928340055906375 -1.5403119628149835041];

% Layer 2
b2 = -0.23124706987339169184;
LW2_1 = [0.41234856257080204633 -0.11390905539600659768 -0.4116954882599370702 0.3283291855786975022 -1.0648319318887564666 0.49102798210016929126 0.073242997835487114178 -0.014369339758050478362 -0.053486318524147619113 -0.018380351213292962786 -0.82777760220613361142 -1.9722150441581240976 0.1064328095586784817 -0.012447626254522291961 0.32381644779707147164 -4.7570903993010977828 -0.033292661563851320972 0.020487779616029336283 -0.12845635679191930167 -0.3878776639317125241 -0.048114866541249835807 0.055885469622047941052 1.2748401546581662469 -0.045283888557005207154 3.4987959564755923836 0.38036798020098239181 0.23646772577397956461 0.099052630916733483413 -0.051460357922323111957 -0.06993674141122821486 -0.072763485751593443007 0.18310257145148337021 -2.7961720286138520564 -1.2592265439077374722 -1.4644926841584249289 0.12755963270349807148 1.0565827681716930542 -1.4459822224805103374 -0.15549559475207674897 -0.27321903176338818708];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
