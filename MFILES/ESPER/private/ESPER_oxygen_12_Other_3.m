function [Y,Xf,Af] = ESPER_oxygen_12_Other_3(X,~,~)
%ESPER_OXYGEN_12_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_12_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.9599906293360467302;7.6177972203721520117;9.0362501895860436463;-9.5308292891642203415;2.2330459828632895913;-1.2415238408476163556;-1.6489580000260637416;-2.9723413105659224343;0.99938556430660552277;-0.67363712201516035005;2.9385331122476947563;-0.62143575819028773477;-0.86071007788151232543;-2.9723242149818234203;-1.1054134876589980507;-0.60893529532756707212;-1.1470781079842351513;0.57253327124096586864;-1.6706416579883351936;-1.4395235814404898633;-2.2117004429531519349;-1.8185634886531805154;-0.041902344980282515974;-4.4257869978541926059;2.9041790323496132764];
IW1_1 = [1.0469577308804784987 3.0602149385034063123 -3.0229652416379972912 -0.92771721149468300283 2.880112606439669154 -0.73014693330628555046;-1.6773126050904942907 -4.1227128893690183631 0.85390890265319607799 0.87415449233433317744 0.42202773727690168215 3.6064635468277863595;-2.2446132548073696178 -0.28095811139567344883 7.3300825081128655469 4.0313161381682318662 1.7056513088555946833 -4.9070295509682662072;1.0425474743468905459 -8.0792374577334040708 -0.83341836537281377417 0.017085102742196899006 1.3869474314963918804 -0.28036914630706261109;-0.19147881095542504393 0.42584496089390139195 -0.50832659417871262075 -0.47748510697044377338 3.3661353982208725988 1.0734342830190550799;0.29218476505597201776 -0.30068667571950552508 -1.3033217134323562547 -0.010369030371267670687 2.3302652189784280878 0.62813088588717314042;-0.14535969576029980632 -0.041756846494076196863 -1.5691716982537513569 0.12899599872007205814 -7.6301760465610284356 1.4729123550674909637;-0.20746538952700993574 0.82672200764949343998 1.3991403597082479049 -2.5777796547381592873 1.1489924332513214988 1.8134711625577120131;-0.12521613120759989002 -0.19773882654503652234 0.93250582786111557709 -0.19840854606584060194 -3.8866695589382040943 -1.3970441732469158769;-0.38917388203676905878 -0.71373523848053721519 -1.455986947564937628 -1.0132430157769833912 0.54732918052938694942 -0.13338250139374477343;-2.5712848882881536028 -2.849336593833192488 -0.9638904403661131548 -0.30530599186074347529 1.3570678140376188914 0.14047065693796864649;0.15482811146573122185 0.094447009924656905033 -0.59169053425251161293 -0.9407728582349355051 -0.18333359931419568323 0.2810859124570103118;0.053934568119070047665 -0.11006967175984723462 -0.41404070837568451857 -1.1959614097313377989 0.051113540406886960599 -0.34332709420219276186;0.37492801125633762327 0.34568503460645927383 2.62522460618373632 -1.2753364210236308729 -0.7430094667213218429 -2.3192963966312021284;-1.3449614729321430762 -1.6703882525766509115 0.1078007788654977428 0.56448918764815636528 -3.6579461660254186661 -1.5349099259011016461;-0.2494436742920384531 0.0075517072363954279232 -0.57266610561046593642 0.4585490326021933738 -1.5343847679798610084 1.2443851388832756211;-0.37398835128751289902 -0.66417557983402275568 -0.34485943031711985274 -0.45218378138464765392 1.0409182022882712548 -0.31207695649621053358;-0.56894113595959261431 -0.50836475786123469511 1.4717711165208069435 -0.06922277790744833792 0.48317920368760719496 0.077747936197701872363;-0.86880485451353028914 -0.037758240845980131639 -2.7342207640368201282 1.2709296579730822163 -1.3175977039444246586 -1.0355325867521583127;-0.36887233968002114404 -0.82116587835643006787 -0.088301796054787690116 -0.15230610494446153447 0.28791846054798769794 -1.0554495470529885459;-0.56601534146689558291 -0.17506993202797993536 0.19769013845003663432 -2.9198325327479075497 3.9896334634151195964 0.027413626249776640309;-0.52973328748537418242 0.86535262675226909401 -1.3242797071546141829 0.16505003877145832392 2.7327061154706662194 0.55105607563343117494;0.096949656808573661526 -0.10160621260649180253 -0.18101783460411391413 -0.25726789542873101935 -3.6249309251961712164 0.62527341911496581162;-0.16121865689512021591 0.45172530083726936123 -1.7484034380857498281 -1.4979892765973030766 4.5556902047247707088 -3.3451391768383835768;-0.08031308218148107414 -0.17016508114798656326 -0.42260023937196661281 0.38169212158319076877 1.4344230426999535766 2.0479791987945281662];

% Layer 2
b2 = [0.70900085834244308547;3.0543073861499050459;16.803225926093482201;2.8360311367071431299;-0.48615574865751232103;-3.0919195379126036549;25.064694447373355501;-0.85547020419479735676;0.58738028173596168457;15.83033207940299647;-3.4236939440998055417;1.4373223049953653963;1.3691288140249275873;-11.177809190318100718;7.0908420800987252974];
LW2_1 = [-0.038312697955922597748 -0.072061464415276985096 -0.97324521871655111926 3.9365287686482366425 -1.4975819751752523779 -2.659942059866459374 -1.4534604096443834997 -0.46245951719400096858 0.83838351050979142975 0.20280218281212150644 0.05336720075979339839 0.99821918852912816522 -0.94703352002945606625 0.78822795746520135651 -0.074219286275173712575 1.8240940292330349859 0.39140542571019931728 -0.71964442787578009053 0.24521704260106180762 -0.9086818262624093423 0.72866548426856248 -0.49622770553412615113 0.41470099273336497037 0.044672367586801160766 -0.28647150987006481104;-0.13672723386675414425 0.31107404178863862221 -0.0030531893182504932227 0.34041030628693691451 -2.2703904498505620424 0.92866302191272609434 -0.42497747456138357247 0.13673545799482383911 1.7903336475728028887 -0.72496570062076681751 -0.4557707719387045775 -2.9852144691229947071 1.9831755874683900664 0.22357926159981184044 -0.082739698502137970504 3.1885770625162019876 2.4618325238750693451 -1.885424996278358245 -0.52971986938017756597 -1.9212057661073789205 -0.3208997302485617209 1.07649181077882794 0.18635257369486293855 0.69565380286291778056 2.8362013143392421632;-3.677715129229249591 -7.2464820388323527567 -0.41153547970314430238 -6.8670892845479984956 -12.393335961248896027 8.7350023586958727151 0.91022814478677027683 -3.6269828807866488773 1.4592840328257332683 -0.20511193075402914254 -1.1445266243739906642 10.773130353938189074 -9.1801866220285468501 0.058051608547160370166 1.301915687928822063 4.2022570785959052486 -12.700088211242425373 2.4472338385893532831 5.1258939674300547651 5.8876469269730158373 2.7786828406676602476 -3.5746836314411933877 -4.6511257804476171529 1.4633976477608370281 4.130146972709242803;0.9545442858595738489 0.85596091440446275822 -0.23781047659396292726 2.0900277157455229293 -0.33120842725580251775 -1.4016718115032191783 0.11074295985525756114 0.3187283159296952495 4.3814010195364021527 0.53083665424442560976 0.66534688129690533476 3.101815500203254139 -3.9364024815318283679 0.66713780005592182576 0.043833531221414714918 0.28507289844608518781 1.2374424499556362367 1.3777461418766836498 -2.0337318357045144346 0.90290842569306428711 0.32292626069268198785 4.5014918705628037543 2.6060468236442169143 1.7038380162619373159 -1.8691018300460886525;-0.47043077715923065085 -0.28777586723903303412 -0.88940298799162886834 0.29186332745682069811 1.402863191106747065 -0.99812704992004530613 -0.20739431913430822485 -0.77716445666323785701 4.9664400393967680358 0.38003637943561280332 -0.52207353271415424256 3.9921717198229469403 -3.7338674669595044442 -0.29075124468167967695 0.081079799773976640731 1.0527027222564604436 -1.9752293490722387936 0.46323874113682722564 -0.68959961982195527863 2.713112661818091631 1.0263065918334113302 2.5625251480512565294 0.89022376023996496741 0.28576483741807984229 -3.0213047070291692009;-0.17913062586351813366 -0.29088694979968943155 5.0153516059814196026 0.071880931893931784837 -2.2476932548554544589 -0.0041872702939069837008 -2.2055379091329916363 0.11326218606557258983 0.89221110193905794894 0.10075881568727675097 0.045969999108131057164 2.0187726113478285939 -1.9000489114907073152 0.16800797546918419534 -0.094197902323281360037 1.3241047050069512103 2.3709577688915306481 0.61931129299577702962 -0.026353980579137910312 -1.4391220824728789829 0.058306905057907365553 0.47056113026195633964 -0.72097028912990424043 0.15054973405079802307 -1.1936701497012958129;0.077549603393103488935 0.61544094971040208542 0.42876390951535592322 -6.1005329665320529031 2.6749816034506141982 3.454323084218698714 2.255666765638359994 8.8010065992973078863 -10.141532991256367424 4.3692472962790880331 0.6344320074961461442 23.192943388696779294 -33.921943985781467745 1.2410492474097429838 0.84799590764188359504 -7.167101183376291651 -13.659753263972502779 1.347836116925181571 1.5589248794000010179 15.619950777583566648 -5.4506685841241884205 0.25542098899258958156 -8.8957456402856980304 -1.6186696997794922659 -0.98021112142268895795;3.0466798790133657882 -1.2840592911439652202 -1.8050588622230849811 4.1675947898138812064 -0.99870668481678315231 3.913086309351758274 -1.0437447418839280733 -3.4617064727947770564 14.748261417245839056 -2.265536633311204362 -0.97377124590292862827 17.223380105086423697 -9.0336715580407194182 0.12166180707027027252 0.66599312030706958598 -0.14742533931775778089 -2.591872155420594126 9.0423292726655599694 -0.33789644354432363249 5.9748051935773078824 0.22855391756109777468 5.0887856955983803431 -0.96715803879138151355 -1.2769322142309831314 0.09934628375529444555;-0.40626634658561361357 0.25029516846539479058 0.42247165045290402396 1.7414539487675000373 2.2137222654955057699 4.5758914703969875148 1.6700047996138132067 0.23790850624285578285 3.0460301074069047189 -1.0793498110186872108 -0.64601331726327992921 -2.7302550628226911478 1.9629522811646629155 0.35952132439093942295 0.23654697068041641295 -2.4125717929648482496 -4.8261747881488403777 -0.069311305306592393971 -0.71963323928961442366 4.0923302236161118728 0.54269581795965637916 4.0284219919880683847 1.2602134289666224731 1.3276558770319519809 2.7083374638367629927;-2.7890324491417706199 -0.53893818087489975266 1.5457034294501121874 9.7617188774992698086 -9.7944970196296097242 -9.5960196986562529275 -0.84716095671371294262 1.7897457571901316253 -12.233585288578913364 -0.53991384793422392274 1.9283592718518514086 -1.9695208391930991709 3.0550935137845276479 -1.809376257933428267 0.47969148655707255502 -0.31267132092909022401 10.103506937555325251 -7.909490922722127948 -1.8804355238187331345 -8.9231430123321491266 -0.18753029423150024968 -7.9167243752054323735 -2.9831819054674793001 -2.1688798921495262562 -2.855322874517235654;-0.13543576720493064047 -0.022050665961451106772 0.11122671173686923818 -0.35370469560564987699 -0.3711813307018487218 -0.27757881961706454277 -1.4142643900961755499 0.035861804272187026987 2.8860122103922662973 0.23087014580039919021 -0.03990635917967230023 2.760591612214936319 -1.6421437206431350742 0.66856534694433500388 -0.20449217266839286866 2.4977999446703869069 -0.90154608269334812753 0.52352475199370729353 -0.16450622247984056368 1.3215851283083503986 0.34706383801721618632 -0.061096297726842087317 -0.45635749889506554977 0.16739128168936528995 1.8359412491052167216;-0.52266018189100260649 -0.75830283577668278205 2.8290552385776188693 1.4621176611564039582 -2.4501117228379767354 -0.83082656789580000556 -0.65559147295872810535 -0.29944467627462173498 -0.25914593357499693393 0.35916080724896776166 0.11542432332185599553 -0.77197842381189274441 -0.62571536127996352228 -0.40977103377967993847 0.34531687584962189597 -2.3518178792355661777 4.0031050228874347496 0.97026084307805804396 -0.03095960207778345602 -3.0860104998963704404 -0.4262609560848477086 0.56003159419487380521 0.90033304469189956443 0.30505198932215560337 -3.7912107550971141379;0.69317964805409459927 0.20325149701814951286 0.2872284509824656884 -1.4111576537205061666 -5.0586216808747286322 -2.7594272946989955031 -2.2588921275489441953 1.1031130464188709794 -2.0437480457865322414 1.493357692675711057 0.58455904440391837085 -0.91037848422338329968 -1.3238049353641627714 1.7041857545281671182 -0.34893644304698984149 3.4579365902978413949 3.7529672737445278763 -1.5963172911020184763 0.91363727377596648527 -3.4021301011880349385 -0.10168485783261946298 -4.4917824290412715627 0.35155827805416511866 -0.74151315751094137863 1.9359439929551216508;-0.46744435574358178531 -0.76864253217447175981 0.44877632492293167976 -11.601071555269987456 -0.89586350133330083789 -0.69040596362516259976 -1.2982591396828149222 -0.12411475844575745042 -3.8691280781225256824 0.99266224106925970982 -0.00080164889090655238116 1.3570578463649558554 -3.6805812135208491043 0.21997583595576591931 -0.16476837290143717119 -3.8161691007817619692 1.2471036380862898785 0.75480401219666870549 0.68089472862738076309 -1.1220694880025605666 0.93357178657804140709 -0.0042162531321480777383 0.040600237784572230926 -0.39010586432578087113 -2.0551840269526686633;0.68289996529728624886 -0.041194055768985715638 0.55381580845976230432 -7.6791101727600263871 0.62089917314838982687 -8.6278587380355755698 0.18168133358291652102 10.190613266017104266 -15.559914303894903043 8.2248312132038083888 -0.47380196612062674966 -16.89569744064611001 -1.1518484498582750586 -3.8131016817961924659 1.698268063149583007 -5.5058206344238547203 7.6566451547969478497 -5.8645327151267778731 4.1051492091670782614 -13.914967834970415339 4.5492837292175671848 -12.437069891736367566 -3.9726198303899860065 -5.1398156350667170145 -15.831355497714573843];

% Layer 3
b3 = -7.9998496308920952202;
LW3_2 = [-8.3623050669415057712 -0.47087257747098981708 -0.17380405983227611988 -0.4118128113269089452 0.71431114334401857313 1.9277621104065953972 -0.37900417292796706459 -0.53471430751012583027 0.65472275240708399657 -0.5653832326030865385 -1.4617629764867099418 -0.34756438481172696742 0.7265202889929959218 -1.1833275696398364296 -0.17192679605155292144];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
