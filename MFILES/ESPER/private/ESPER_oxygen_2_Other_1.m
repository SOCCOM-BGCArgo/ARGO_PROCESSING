function [Y,Xf,Af] = ESPER_oxygen_2_Other_1(X,~,~)
%ESPER_OXYGEN_2_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_2_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.3991527415858406869;18.764708965291440279;4.044809281149962743;2.155073506778515835;-9.658067454864827539;4.355563113512427087;-0.91174452923353654921;4.5320289474675439223;-3.2423557758686940566;11.162037199439375001;-0.082003096676939196685;-4.7600719039119443465;0.44084703736097180515;4.2585819214736648775;0.028739417302984793245;4.2774222562077639509;-3.746685194089303117;-3.5057000466522802995;-0.92017517124378978011;-0.40101907442836765005;-2.2138502582705683608;3.6867696254689898971;2.2782957244331112356;-2.2868495485334117134;4.0547947907199795026;1.9530239219404446072;12.860273265057871939;-1.8857795304142772608;2.9917942456381818594;2.0606165568371936914;14.756271108098992784;-2.3055190528327673682;4.6439881362359800576;-2.1859174241380521231;-0.81983718512534087264;0.12785456689786175999;26.430377384677054664;1.8753438650657576758;-4.6500372196779791167;2.3804080219373418004];
IW1_1 = [-0.084195256175858851355 0.52131609613563556493 -2.3366164052550528751 -2.2272602563936674258 20.232915708003591959 -10.631953062266713772 0.99981985929602179564 -2.4130211149865794518;0.18852867796733555061 -0.036864479224492908982 0.30535472580483441485 -0.26497869463184869909 -9.6103976271862308067 19.200948272836399155 -4.1894462067853117659 -2.259180755434385901;-0.08678613364191735402 0.031384459505051108541 -0.040116639612251744906 1.0589960211037823257 -1.7141338414595683748 0.91053838331456593558 0.88716960435781744287 2.776751576211839545;0.010973158990587563583 0.0029601688558566871708 0.097378604266150678437 0.075594685548048656809 -1.1001105900435774743 1.7801781885373952896 -0.2471526770076407642 -0.21143952933819654127;3.4536952658718829134 3.4903530610620774333 0.29999789772419266365 2.8916157832825897245 4.1256859680307300664 4.6701954260065292601 -2.3035398823842894167 -3.928922192722996698;0.021315620285753688473 -0.044842249910750885122 0.49712184812883003504 -0.46432756232248012518 -6.9129784726327505595 4.9923062047100685845 -0.86737021119400359304 -0.57512412956739955572;-0.056694574311947229517 0.21795053498697042338 -0.061461173145604071355 -0.12149939915852665806 3.4184851702684793118 -4.4509126310370445978 -1.7487683476195683419 0.47434331985859218284;0.020984584539618156285 0.016660074199944700096 0.084442796287734531169 2.869976157428333785 -0.44402246022403552006 0.17041918436436426232 0.13970159204658053054 0.41551525535490352325;-0.010692101586775278402 -0.048044513755336214211 0.77499459207730392318 -2.430814566700429058 -5.9507149293028938075 -1.5821975835184953763 -2.3890637769455289607 0.22575655688128914989;2.0866105643733900976 -1.786623845709973013 6.6296357626816639907 7.5747505652512892027 0.92255622332597753132 -10.940366388066035341 -9.3463482637636037254 -3.3092635541972357238;0.85312493415243351169 1.1437894682580338479 1.0484092996107887696 0.0044376086560716718199 -0.52781133579801620126 1.7087106197579315925 2.5079014261708714173 -0.75114409629142486757;-2.0552724021938293397 3.2919248322790477523 4.7815911025982238414 2.0742294826713663092 -5.0327587626064431703 2.1336283746160087382 -0.12478977778794281273 -0.70677103056465850894;-4.2686520355160775253 3.8489333111057826287 -5.3156329788938023739 -1.0382049311006886771 -17.469971361213442407 6.3350631540097355199 -0.0091406924345328755682 4.5644668762655129512;-0.66165008386110102379 4.3788805054787331983 -5.2594732213393449172 -1.0986319612183590433 8.4573454192343024971 2.936726757520589981 -0.56980823837087757333 2.4084186099800093395;0.46364505264879390944 -2.2274105269064241597 0.87877670847953681665 1.9731703024328108853 -5.3148720299475886719 -2.5506666513429467891 -3.4947112256452395052 -0.81123007705981431403;-0.49850435010526855661 -0.95980421875605625992 0.33856506286531223848 -1.8083852557712363218 -1.3066962479064117009 8.3378206632229563411 0.57382644356424317156 3.1565029700344959807;0.0033018751744919080243 0.47718911064377905751 -2.5194193062335976663 -1.3092779287760094586 6.4011609780115330537 -0.95361573152401979403 -1.0587873723519156677 -1.6595754780871203593;-0.05356864804639583505 -0.097533936551233629819 -0.8652171069832091943 -1.5089047808161712982 -4.4519518858011908335 -1.0583235378496536061 -0.1256083538282451173 -0.68359425923437089345;-0.32590454815958525003 0.18743621175524852185 0.74757637409324528832 -0.36328561051828556216 1.6989813059865024325 -0.47235863952000345378 0.30238986005621215636 -0.53298957679414438182;-0.089125645473482784098 0.019448018395981748335 1.0237227991376365299 0.28021301872451725989 -4.1300888297635616198 -1.624871976008085861 -2.158032260979668493 -0.91070758006045093857;-0.20465343323772661188 0.30320708489221703807 1.9264954997648546797 -0.99067686939217702857 -5.0510741624614752254 -2.4430221664627245204 0.41761701388210442643 -4.2646189580874631631;-0.10816433973679159819 -0.012481335222764693496 -0.12050325154151964036 2.1408302350143997295 0.77923854697702144012 0.28597761415858824474 0.87207248232453471459 1.1879368432907877473;-0.038343682699801547031 0.010603234197774523764 -0.88097964903623526833 -0.26663485053698604554 4.5617897977737200677 1.1602200642278244214 1.8213342348843342133 0.80470404626681280025;-0.8581408381597499524 -1.1829227102833936858 0.83850046289390323118 0.21682055313151482601 -3.925992097631977984 -1.2269738751348013839 -0.49064993879279189537 -0.15933886277008987853;7.5862756516386884442 -2.295043771291119139 3.4183593523385096269 7.0224357651358593202 5.8500843408059362005 -5.0396752255677998988 -5.5464023102918673658 0.17587608370897209187;1.3149112731801615439 1.8733106501993306292 1.2751429030208620841 -0.017439924309375257061 4.8868065771968591804 3.5183806945443527603 3.8046044923860620202 -1.6348517151935499925;0.11652139400085431697 -0.13936631106359390064 0.68211084372644026352 12.462701567217797205 6.1416098878449787435 0.72204451337335295857 2.6651755737741202879 0.52479343155465196791;-0.0040124799910707508593 -0.067701082340247520364 0.73779612670330119162 -1.2580489481446637257 -3.5623581272349618132 -0.61653766435821355518 -1.1396321481358249184 0.032507971816772979201;0.17627580047004720587 0.91790594933199209926 3.3218425082225460088 1.3838890317666134866 4.168027104247892467 0.59880749977011515917 -3.0234360540393891981 -0.44987560253010144828;0.90327743840389851382 0.99364213207333684785 -0.001283210770743419514 -0.47007767276005535395 4.4185151873873333983 0.74171618008799966582 0.6592915772595872026 -0.14437794378924856398;-0.97209149450761023203 1.7790020764421790034 -4.641316879881632218 -11.954468480656409213 -4.4276433595456641257 -2.4889702730119571683 -0.68671612697662554048 26.90748099810636873;-0.024953771541107359899 -0.010540505970380090878 -0.13309007063552358296 -0.20126281915240470943 1.350793713960120046 -2.364470454530054333 0.28719655558998891109 0.2798815713828887719;0.60184205509618959873 -1.9431068997424743028 0.53702577315681943038 0.49919005465398436083 1.5194979146733167408 4.1994518734156152107 2.9506024214633734815 -0.63017625196032478474;0.01164806608086262768 0.39107668949550405957 0.64516556124644397485 -1.2023596998425181148 -0.65900176585551839548 -0.92919637708480151694 0.44140116266461232319 -0.11229092467007650846;0.39749314365279497796 0.46007640154069134875 1.1963531972015675198 1.6434695513490580332 -12.557896714286755468 5.3324896564552721756 5.2891716690179126914 1.7486571967198956123;-0.85601372973119826959 -1.1792029703403381635 -1.0472790461912500071 0.0067484780705861285507 0.42330613490063245807 -1.7347420235771651154 -2.541049343812576744 0.7769960651626430792;-0.077862910758143777379 0.30275144479357879446 0.16931533100053511309 25.644523274035108784 0.69077079307679167819 -0.80341426254900194515 1.2806437921198048357 0.36671157362879513997;1.8019369678314205441 -0.64055780899635916814 -12.580980815422913466 -2.5317418631854002875 -8.763711735397357927 -2.1598401973941006027 0.95859382702212858618 -0.94689029655147105569;0.041760522086744578107 0.00014090422685094017774 0.064606888759316707938 -3.636503039829483086 -0.57740136002013842109 -0.25164719616764574806 -0.88850077459687060166 -0.85739770977854268263;-0.13478398031765961851 -0.80374425583255315608 -0.74641640850479085145 1.5032722098643771513 1.5554765556705116847 0.29429556748574620118 -1.105858985902842262 -0.21132541890606612589];

% Layer 2
b2 = -11.327362547094489642;
LW2_1 = [0.04458477537994590123 -0.23288978891551315176 -0.58782896591106659212 13.551903357012486495 0.048666823572358824945 -0.94979928894124143746 0.1353588640988040992 6.6636985145902629668 0.48060391134021868131 -0.37170714311290314891 -2.197034561391833396 0.038573474510002835058 0.01490980529717330326 0.023434858344547879194 0.024899003765810348576 -0.041880871034405325881 -0.097609976231587083917 0.33450150193944555577 -0.40787386408403220051 0.3192710306561345468 0.075262166044823941569 2.8495613830659802801 -0.56385655935717537979 0.37644040156991970258 0.008262905683551232186 0.056067723865582085041 0.067271441139251528241 -1.2917753515404630793 -0.029064317131136770817 0.44360289286996501534 -0.047500400968383413303 6.3171306350001454888 0.075781848751262398389 0.98078165666254812916 -0.075448202375440420742 -2.1637157638635997614 -0.22914075470222652897 -0.017454312042155247647 2.6284084617456295874 0.41580524748665642631];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
