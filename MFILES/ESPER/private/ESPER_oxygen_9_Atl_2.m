function [Y,Xf,Af] = ESPER_oxygen_9_Atl_2(X,~,~)
%ESPER_OXYGEN_9_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_9_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7117853530852307209;-4.6121629305575018165;0.60404136501461036524;0.37903747940192961119;1.2568775132065650446;-2.6192337019033389289;0.36145381262852538384;4.626994938309453298e-06;4.1918796831369915523;0.51246824733938867169;-1.3601270971312737768;-0.44517554893437605301;-0.95804787759253196011;1.148345854709492242;4.0819085125796856772;-3.0281452059094031704;7.484354489754857731;-3.5003425296564998348;2.2616901615453133267;-1.2162666382949143262];
IW1_1 = [0.76423584836372626672 -0.70359468043545170257 0.84051214628893866632 0.40500908422853337809 2.4507933684853293599 0.23801446984772609006 0.32022873907558158102 -1.0052695530596491569;0.81321039302603004284 -1.1739545804907483006 4.159223157174882779 0.44407047618451900295 0.53849152763151353351 0.82756102244682816504 1.0044773095901318172 -1.8554112330198564429;-1.6417789141562888489 -1.417455954221159331 0.48509777706369267003 -0.068618578024761373024 1.2159172207997834825 -0.45473225785473120331 0.44163882993493674967 1.4940511770693334359;-0.70110290211248182946 -0.291749868339375662 1.9522023513626360902 0.56802504780485285618 1.6898773125053299093 0.86263913948155823697 -0.020852351025443631449 0.28130238465212931143;0.15499763817121517406 -0.35175563789077196608 0.018382050752371731361 -0.54297110111401103438 -2.8496844361604138918 -0.3139264408466766465 0.15812196223925303884 -0.41603761569746855464;-0.29107201903123086639 0.49448345881915728439 0.52706362853759647358 0.0095746916622124946666 2.7581044856513527996 0.047203115858294356078 -0.48620781709540894511 0.25968729894925157708;0.35299766057122200502 0.51291110408162365886 -1.0027090323331855348 -0.05483682637753831135 0.28255027139901767175 0.20170151792092919085 0.69695570822323738014 -0.76712066505009657291;0.32728624997439703659 1.1202579776805370315 -2.9029551738001138084 0.7291859351066707351 3.6337236454355656967 -1.4854090044332060039 0.45222062737416490741 -0.20032728098018839913;0.72060161353824359054 -0.8101832458277061777 -0.12199261792522325676 0.15976823261200165383 -5.189288354966837602 0.13912464991503309397 1.2406973450837588402 -0.6754009369222451209;1.415307467610422254 -0.12413916863989835071 2.601801056336191742 -1.6232795537490238846 -3.8601525882991398753 1.2215301270233873687 -1.4605345831869260831 1.8124040674333665724;-0.43341588229432304047 -0.026505308380898501969 -0.3687715358084734385 -0.28170553052146823925 1.6438748157593365828 0.14457007283958372978 0.48387430374856515991 -0.03945498648257945995;-0.060709704591845409238 0.5707008498721359846 0.8465551353006234292 0.24452915495713042904 3.7532164961302547646 0.33484932122951172051 -0.65373993015501430381 0.27589067791217686265;-0.73161185674295303727 -0.33491562957891640728 -0.56614301278935663664 0.43472236453913210008 2.1216262914668928552 -0.01502768623498015356 -0.052088440253945024472 0.79677915053969816661;-1.2881429700583719722 -2.0683487138650318293 -1.7613804873675436014 0.35416094514394202974 -3.9689480920008328724 -0.74869070846396024166 1.1993774148314375605 0.96944689855825039171;-0.27244728307395882361 0.23368646154567632167 0.19122382894661124619 0.60633368492812922401 -5.4120544698181021204 0.68683784291300997715 0.687745967063322583 -0.57308834520759543985;-0.29795615415872322984 0.064355334089144636267 1.2549269127290501036 0.01019082764857943274 2.7457844094230052789 -1.3229761130453729923 -1.5438628857822993545 0.26891725451916892453;2.5829025346972298571 -3.2512114369397124847 -11.559852385821113074 0.16590664268741397991 -1.9003528498717858763 -1.8607138084560042035 2.6536887233086319249 -0.91432205875676164641;0.068258701105892188865 -1.6939462147495587541 7.1410504021265417407 -1.9607244725187611412 -2.8678678526915750702 -0.32191854315340795445 1.6476617219016447269 3.8594808923720185234;-1.9629855213167446415 -0.049261871833459328074 -4.8144774291378773512 2.7029593636227917663 2.496832801098559429 -1.4208963958975484587 1.7351431321434529487 -2.839357999022068757;-0.70523201229456278227 -1.3874612375962260824 1.2179803183875277384 -0.26540573968057801224 -1.8986396602912407605 1.3982811861938049258 -0.47213366861633937477 -0.48479101694860310401];

% Layer 2
b2 = [-1.6766585519970895746;0.71348992290760737678;0.14387213809544752152;-5.1620201092599371506;3.58373470834031016;-5.2753124793968231288;-6.9318520390103328666;0.81923987331580139237;-8.1816110474886230008;0.16932004442462988969;3.2191417948461586995;-0.35465806447409636837;0.25168939391648620374;-4.1272585430817327889;3.8242473483037606741;3.9776798880726205176;-5.6305062216971917266;1.4973864570771233673;-1.3829201093595402394;0.84446691263934536842];
LW2_1 = [3.5007743850406027875 -0.57500076936651844939 0.42813088972082197214 -1.8534216290237364166 -0.16068545702576417233 -6.5183597328059743603 -3.8457804636846693036 0.65870326029342851637 -4.8053617219242950043 0.71927939384672401335 0.14421496908750758292 2.9216108973339123267 -1.0764081665964306822 3.9694291886423211935 0.018892737053887602439 -3.8048297332768665768 -2.7994239984751945194 -1.9560711731086528609 1.8234407235992304841 -1.5869351733865084686;-3.5606095519047493703 -0.81724202767758669097 -0.2694976675857725934 2.4057819948740353233 -2.832308006118481547 5.7310047929257343924 -1.7972296303632016023 -2.7288338613942402233 3.4977387065646281528 -7.6558096800320143416 -2.2830914506253918717 -0.086939934134488139339 -3.9659189834060271096 1.1165895850091644981 1.3811968262140068564 -0.11171793352834785695 1.7551888123133261299 0.81765141604798696751 -2.7575460801417230883 0.023327267078837053693;1.3233062904866483844 0.072603925334118732393 0.23720450736202755571 -0.6431100828101432576 -0.036387172041654786137 3.9418547956304119673 -0.46944156694371197425 0.58798295287087753991 1.6338592755856931049 2.203179713212807922 0.79787236732936861472 1.5599309563825471958 0.0068941631668784295051 0.030443530062968977151 0.8119038998693143272 -1.2353668018972885356 0.040316935494144008623 -0.7590554769259016954 0.93687897525956720379 0.71276580285686053085;0.93083898796307096291 0.45141495521125346579 0.88062838272124832617 3.8704273138167799573 0.052439578323271590632 3.3252791346089392022 0.80061015128393020479 -2.6570201708495573278 0.42378745822661612053 -1.5501366946252284063 -1.5143719145409797466 4.7215726480625388461 -2.834438920710917742 1.241979848101124162 -1.187124886864940887 -0.24745352773250764433 2.2711017222430864848 -0.13757076675964399759 0.77235590317185631726 2.5876902559999428455;2.2205346550865128208 -0.86077755114102771916 1.2501821128932220084 -4.7869447576351049634 0.94411599409072766154 1.1581774391606194374 3.6927909455336518363 -0.35395628338521545331 0.033613685390207238834 -1.231874075346605979 1.5614609610055760758 13.05216230128664634 1.1175728500331638671 11.455970256684564035 2.5876098907094564616 3.2315393156766347715 0.70770429306588389373 0.45964702027438109067 -0.54649619959145678827 0.69424033410425789459;2.5231125060400509952 -1.3119213437281294077 -2.2298443598834429835 -1.1245887514030192822 -0.22200799130907516998 -10.373670707577060668 0.40659475937893452269 -1.0143698851101945468 -3.566070122651611829 -1.9521333985244124776 -3.4383006263892559318 2.8765154278916424957 -0.57332570067964394589 1.9728137684247739614 0.25679933472958771379 -1.013279233325053541 -4.0764625174841988553 1.3675399698657404457 -1.4563562654714183875 -1.7206858244081297826;-1.7448012750902039958 0.7853779300741687841 0.1554038306687702542 1.201249353522988228 -1.3767573488417004235 -1.2236639823714936526 2.9390670281351627402 3.109580345315301031 0.5164358964978825739 -0.42005516094646949687 1.2324144948645401332 -2.1590322721561054919 -0.51659220581126308325 0.10833603221841256459 -1.9347535886825797391 0.2151928414309740023 5.0728923719064979991 -3.9441760867199326945 0.14955286566211609123 5.4727220208995142059;3.4516450539397460773 1.634024654862073378 0.144684255083753599 -2.8689707300211968466 -0.45434515661335095338 1.881901246920079096 -5.0961307502159831628 2.5500710168397047184 0.12630191604707546871 0.31562262256166623287 6.3495315169860129245 3.0271351695962462891 -0.99546149220983759509 0.75465150638892697366 -0.76079256088060442931 -1.2537848236684174807 0.77754035318104108843 -0.60328623251278823414 -0.7055998260324132243 0.090954998194555977675;1.7473051268036579042 1.4932507002099069116 1.4575712479988089942 -2.5523289105674709099 3.141820589831269217 -0.23511971181226426486 3.0456786557516881686 3.6284924677891994271 -7.5944148092167491626 10.013131952634070743 -3.2114281981059003002 4.6299536955675053562 1.4218489657579953533 -0.48340800414062767842 1.1968713466197520301 -1.8642742173268616046 1.5230842763865632961 -8.248200476416931437 6.5099891501683595507 2.0177477768415972292;-4.979554049331102128 -3.5937422231667821571 2.8047674435867575582 1.5777649115663652246 1.8436519513171529816 -0.56863682997898601368 -0.86121758111687296555 -7.2236634457150667998 -0.69700487131180577371 -9.3660843199426171424 -3.381149993350538896 -10.1462438620597446 -6.534358256434532386 -2.3975411718495540647 -0.8606918090403261612 -0.026880473346533644008 -3.5225393109411053949 -0.79743642755900956409 -3.1455830332083931644 -1.527051580774855255;4.0803888565358148455 0.38349105895780116748 -0.88488645030803148028 0.44145422126470273971 -2.3855961090247839174 -0.045180464142571589992 -0.61080814911551217783 3.4751590893939980909 2.6665663319209529369 -0.49115799061969245276 0.45951440132874982192 -3.7678061082917824187 1.3497910308233949106 -0.21016360766755631806 -2.6445766082849355705 2.4002504273516236388 0.810461445979426931 -0.020804275581201077394 -1.5111274950096968972 2.9362071778610330242;0.93290894960763581789 0.60877937098917267456 0.4803211871354541862 -1.5697298380814903584 1.1701183555250691537 1.3936326027653775927 -0.62537555145780210353 2.9061392755854940084 -1.5424300055895052708 1.9711755387032912079 0.12441365657912543952 2.9119587813349867567 -0.3666412049064884382 -0.39273533856784803575 0.59210406053194830633 -1.1506957135962481154 0.27577844922951499917 0.74862275044016368675 0.31346105424160519703 0.3845749808898425437;1.1385336042216778196 0.052934826609065142866 -0.31510677776858059262 -0.52736796101079252974 0.35015842328707352804 -6.4917660716682785704 0.19221636132382793893 -1.2749066280187304478 -5.4247432352151419011 3.9763747987309461251 -0.056421728747965464723 0.97779370909809348866 0.33235125875565546538 -1.6484814028374119577 -0.071578289521629923087 -1.738087294172740993 -1.9646460753654499953 0.60817800985696057747 0.60584043922284225303 -2.3524274172362762414;-5.3309829648334723373 0.49991706792721468666 2.3282547698638653699 0.87671436861832363618 -4.7179164405208968702 0.82445691626703754284 -0.43623375284925669515 -3.3230383879135647618 4.6818710156712981529 -3.7615346901623474274 1.4910362604283056154 -2.0007389790342826608 -4.9822025376584218037 -0.58004820712721305576 -1.8947519518745927769 2.3154916480724145877 2.9482495350166546544 1.942504407130280164 -0.82400677706922609289 -1.2773164995843475644;0.97599072347705040364 -0.42754169615712905861 -0.73591199749197866442 0.54574304640068416195 0.23873995130529956921 4.5726913231521333358 0.30345206748913838846 0.6882686854627780848 5.2787782110999970087 4.8485605818401840139 1.8039372064033996068 -0.25549389905288338865 1.4932159512366180998 -0.96969910964008043663 -0.98604161849105309567 2.5577653398422661724 -0.48922093107628883413 0.76784366955790217535 1.1555760266271459802 -1.0142831758742418824;2.2549387983954840564 0.24139428149164354753 -1.1949721130708199635 -1.6040064275083711909 1.3713202205540986345 7.6909942717866597306 -4.1300799470984443929 -4.2624471985651508632 3.5542490825675634447 -3.0894106507418199747 -5.0813758305989296105 -5.4338808890876268975 3.428848662164976524 -1.0457172190701260472 0.22780234848422711846 0.017718688049909944032 2.8382172456389693771 3.278913817411698961 -1.1732412066743280743 -8.1455066418990931254;-2.8045622257825604251 0.8507490535154135225 0.19366080236501048706 0.36373601901545227211 0.52006388748315923731 -1.663166652865061268 0.72146861395672268191 -0.61421439148575007749 -0.50285235962389607245 0.65862331097725290707 -4.5237361445021164741 2.6697253577143760239 0.31941848422897439752 0.3708838116671057672 1.7366002025070623738 -0.92426027535947774538 0.62459847779626742614 0.0019744400161971487062 1.1691297240047835437 -0.22997876380011361697;1.1587574355258838388 1.0866563308366867791 0.25019958182679408187 -1.2276641670005845608 0.030878977772948908165 0.7913256389424171422 -0.45545049547292060232 1.9594186043124071084 -0.67660981239164441625 0.027508615058622672839 0.58468597994247162308 2.117651155189646861 -0.19206194028560050202 0.90005864697176318767 0.69400225915742996818 -1.4354207745202431923 0.35599726396335640288 0.091986846495110421995 -0.5806692902973371595 0.9375135929376530175;-0.32925948235525198671 -2.1055810118131357278 -0.74967614556019912531 0.72011847975301890301 0.0061284350725669747839 -0.56462127700181863332 -0.89852949460815945137 -4.7804917570543787875 0.63044433140230315971 -1.8406269741424836628 -4.6424784051158596299 0.36553621102860245351 2.7458979887557757316 0.55521201741825920717 2.5336796560229162267 0.73448902185561859568 0.58022197183316803759 1.7936406710662573527 -0.3803783913948015627 -5.6724691901778498959;1.3032151978420074556 -0.069962867752920612774 -0.11684645675051126557 -0.98039409593870296966 2.1861995310228659051 4.0155131071192817771 -0.3799550196422884496 1.2579845096298885032 1.4056514166598423898 -1.2556622350903798857 0.69896330567556042013 0.72732306587827300071 0.7166522151120193751 -0.52309718172041774764 0.23435921749444402207 0.057321436507775117009 -0.15608414900995234986 -0.78319057773958888902 -0.991871405947720719 1.1076807164006319262];

% Layer 3
b3 = -0.41067033837792354944;
LW3_2 = [-0.091886629242204045931 -0.060785963086586937421 -0.3619356961464235134 0.04151930827239603411 -0.25557256449137516485 -0.038345510580930636246 -0.26106250447856771402 -0.16047995919142266086 0.072196863760718391068 0.067506582520602070874 0.11458292778037733328 -0.30374481696869787273 0.1060328699366464289 -0.067930649315904811925 -0.18770681615882250926 -0.085214927148178992722 0.17282695027714564673 0.28071507779386611903 0.17184509326607047552 0.39217648581065250868];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
