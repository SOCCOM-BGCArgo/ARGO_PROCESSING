function [Y,Xf,Af] = ESPER_oxygen_5_Other_3(X,~,~)
%ESPER_OXYGEN_5_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_5_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [19.226266362662808973;-25.995355240479653958;15.775658372701082399;-3.7179285382320879094;-1.1147781485396253132;-6.148461047380101796;-1.0675122893376725042;1.4904105946006240835;3.3617481609359303185;-0.66832849314224418436;0.66681886595063410983;0.14343282204153973147;2.8462446525050784096;0.58757839982783011124;0.58914767614263674478;0.93450876284687889317;-0.45748756431705139835;0.99813660538759296781;-1.7311882516259970988;1.818364890418605162;0.83294805056654319664;7.8563367483336890018;3.468090554108894441;0.4209320178769621057;0.17481004107041622775];
IW1_1 = [0.15788628374289920275 0.16498915610057135472 0.45746733014634921588 17.518957202381876925 -0.10565081301317510998 -1.3987986635756688436 0.85169261167217780173 0.014473540124151361083;-0.63620168712702973579 -1.2912284077161850782 2.9778484689777475758 -24.44714803589247154 5.3686722331565563948 2.9793935466187186911 0.52846325101919955358 -0.45580941037944067151;-0.45935957526537302131 0.24331970067138661284 -0.57711356348257702997 15.22684851106905235 0.70009574566122001471 -1.1816391951039304509 0.77196494753254396581 0.29297745941442265849;-0.22549980210183276363 0.59960224264166339658 0.57243054233536661002 -2.1789615823448156284 0.952434485192491187 -1.9113143108131733783 -0.76629234204553120513 -1.0392888364014669644;0.035272893702564436791 -0.087989900439472482074 -0.039793821513505966969 -0.033631882538418131356 -5.7731460309876059256 -0.67453789941757935633 0.062781062244156748964 -0.079979718421094095349;-0.66891680878915549258 -1.0727264835937830867 0.88884767846275225534 -2.4921790971268649173 5.2946555242712181055 -3.596261624103027188 0.17847887075218391018 -0.68533835114482766215;0.098866386134337486125 -0.23004824244760749274 0.081842409989331579845 0.50951847993132182157 -1.2197570093896326071 0.16452155680529545467 1.9786178493655113275 -1.8404856890652958601;-0.14560878773062393976 0.092223640586870783697 -0.86904575679165241286 0.36491095024796971202 -0.33807782321658857994 2.1434844091079066075 -0.084750989474246807287 -0.012313991781330349204;-0.084242615220820715738 -0.11487830090263974336 0.9082084586993719455 0.27233010686050701521 -1.0665755751494720993 1.4307196025719033372 -0.44413713446544889063 -0.82820217235135051848;0.077528248932884791245 0.0830156000663273691 0.49161361527230590385 -0.26977631352833492118 -0.30571075759757193602 0.57830026713792859194 0.17613096045752268948 0.80558892704303031174;0.22615536728779753184 -0.243302482733975034 -3.2086009132562800517 0.46517177061184739051 4.029478731631028765 0.15750589026108977042 -0.0013479757970899044518 0.54492586691000899357;0.14029703213065999878 0.53808041041628207335 -1.720816082332763175 -1.7306810079518319956 -1.7886505011557292111 2.5199072458280360465 0.27409834731869181512 0.30489661681002599991;-0.16956811066919408315 -0.77051187510317342699 1.1459111363451739418 4.5864400031842356142 4.2046547765174953071 -2.0579704205867268563 0.13283711228661601589 -0.18712580322336916372;0.052984918825567932366 -0.064669470306486745437 -0.34488884279460563231 -1.2206565605597312629 -0.05173599120843194038 -1.1130091857375823405 0.68272556612501567042 0.35731109537789096375;-0.061068042082051174346 0.096659803793003776229 0.081187906129758763418 0.16658381256128801384 0.64819879789912082657 0.70731377537388739896 0.10420806985385495935 -0.051572413332022837285;0.25588405546391412848 -0.25239882376574135359 -3.7423589921761823973 0.8341678506842623575 1.8508211892104953211 1.1907647367205160815 -0.38233941899258405694 0.90598869162794970489;-0.061097895555491874009 -0.0079378438228363476514 0.70245675374523353085 0.61035775423157612174 -0.2213069881086378865 1.4420568741739416829 -1.0100127960105180769 0.29137938762340492849;0.14281771296005807415 -0.1280063139590264798 -2.0565914055068867938 0.75041542151727402832 4.4341570262863916341 -1.4351388131418338912 0.036499985533324529052 -0.12111982188785015702;-0.062690249084238203192 -0.36024138849343595448 -0.41185957633763958796 -1.2441277268420833924 -1.0558103661910127613 1.0097728482619861001 -0.87766149758740108489 0.35140934536005657973;0.13226144109393159209 -0.017940730639599982571 -0.59514603242199703992 0.2390299307651812255 7.335324471492051579 0.77982508945197182015 -0.10829230265426267876 0.075815387945762952038;0.43288907542819970997 -0.02974684968636842966 0.19457078052522572276 0.71680392556627425815 1.2657215470735803109 1.0867037805878492218 0.80133403094413035994 -1.0547049254806335483;1.3876796446796229034 -0.99569690268762200969 -2.0228057197531308375 2.431751727888946224 1.0669416534583782141 2.5888277620999220474 1.106193407451022015 1.0780692276282037856;0.0847754693653786362 -0.38966463337260048849 -0.63697941874454078182 1.504580504425988341 -0.49504925550040640436 1.8046980471142766156 0.44904221225828050423 0.91488550194269147031;-0.054201387899096779843 -0.00063755578731039313969 -0.26086587836157687503 0.16509238634516112953 0.063592824920829613133 -0.21369849862264123086 -0.16321139257738370709 -0.47629149350317145917;-0.12140407279996952294 0.29080050824212516636 0.17264202794523586526 0.70650277853187937183 1.3443569116209512782 -0.82784594446892900699 0.49847367141111653677 0.58214338687749001];

% Layer 2
b2 = [-3.1021925479360281663;-6.8576220233930413883;-1.6166047612871368155;16.011012559081869711;0.84375295744914269314;9.9444475240371428271;-0.20666476164159192086;12.026478255236288106;2.205545888962952894;-1.5050661682705244182;-3.4138386154936757322;15.80136594874142375;5.9397720171137953216;2.6607549376312094047;-2.8628699984160008718];
LW2_1 = [2.4745471982938691546 0.20768152961402266965 -0.30980935340050019811 -1.5271056656831276666 0.97623074900224759975 1.3217374932075105498 -1.456269358959864979 -0.41185050379541515708 0.59128614641438259625 2.7079209034373956655 -0.24127507517706733853 -0.24378998510355956442 0.17032275724983464427 0.7971388297566802672 1.4715465224401227395 0.24948648267212900076 1.6070754157131375006 0.51219206787706594852 -1.8232731557839632064 0.020076595005065124566 -0.21218915349954656224 1.7709493029238985162 -3.9562063429215594823 3.5939246424425213 -0.56163619704386635867;2.6395777087641012493 -0.18207934460875338512 -1.3426276350171790774 2.3290912944721364752 4.7889306257071311279 -0.18188472802722016608 -0.28313512642651278428 -2.3178263934527567613 -1.6008513502770500558 0.7627397193714764434 -0.076785418994966478379 0.0026168993322931016765 0.30176464627483495784 -0.38102983513459814935 3.5719533106596257355 -0.69807230562949063035 -2.0521752356493654368 -1.5354247692950868664 2.2471777345062777798 4.9950920500756232911 -1.0207179471649645564 -0.81245620825256181785 4.2483584444292299409 3.3152271127849348709 1.8496714345061393558;-0.59922762959293496277 0.39762546819876232185 -0.79702238014107917863 5.733130520279836162 4.3918270892555817397 -8.7897387439097887096 -4.939398118551397765 1.6910717444127894016 -5.3758531973253091962 -9.7582369575175889054 -0.97212385107207255341 -1.4401000087473565525 -0.13162945633687964109 -9.6794153549318409091 3.929239045362341809 -1.5105068678121487125 -10.703875028169512973 -0.74250903327804751441 6.1362066721542420922 5.5140102757408380185 1.1448726332431842234 -1.3157053368935587301 6.6589938515528679375 -25.025508548113737817 -1.0008849380406406038;3.7397657369361065882 0.17139444767931957814 0.036314693706487280456 -0.32259265501339040583 -1.3004647249339968962 3.3190431357804435208 5.4652107775094780351 -0.43396777706732264646 -8.5075498809446230553 2.8987555915444009891 -4.7965043985049993225 -1.4598327697241024747 0.10940235841221335189 -1.3807296341356976033 0.020351960966281355814 2.968915673039929537 -2.462143283020457929 1.0122630236273149062 5.1120807739923384005 1.8818692701689305746 -1.1594163670154311596 1.9082225882307244369 -4.7612985280481101569 2.4922046074625785472 1.6734713202803974674;-1.5063551799977796808 -0.18537022708209452415 1.9013091217501476571 -1.0916132301778747049 -1.2858591514502026865 0.95801027550256179222 1.7523871335267564575 0.081601176831351096563 -5.0377655610985243584 -2.0254739096632508044 -1.0807870382751851857 -1.0027466090710981383 -0.32966009146382807549 -0.20553486532671083609 0.56183886482851852495 1.3174955965433490235 1.3408366163363827361 0.3084336171214596134 -0.76591017667948924075 -0.13051005528581571813 -0.8459966798683764555 4.9298631809834878581 0.093439094381755558039 -2.7489099117477064915 -0.12380449457389877677;3.2381122374143846976 -0.24143426988850028025 0.5093502679196465488 -0.6162909480720505373 -1.6065696221953962297 -3.9427789321513433407 1.6426009509054870783 3.4927095431125434466 -11.628162296025360334 -4.0162326439934608047 -1.3467915366171954172 0.52246643400347358988 0.91242543971645506673 -5.2270974712498583514 -3.1692444884760679891 1.0036446183573404234 -2.7170802015214685632 -0.05614221289755769867 0.038332297352527730516 -0.65336684716537996032 0.76832685059567396024 0.6363779554978553632 -2.8773260207456594628 -7.1687050346690703861 0.29548326082611298116;-1.343121883667621308 -0.30514429124147113281 -0.23567199022044460488 0.39548247206966802292 0.035022741903259137219 -2.5771721071844182482 0.88440239179262603031 -0.87960161476182074924 -0.90325056330860575837 5.0578437120559716078 -0.23372197643559011748 -0.60951667229901074219 -0.040207752338755058108 -0.57186775065023021103 1.2456285342033110997 0.35027944087769802284 -0.53029180304188028305 -0.078951878923447224579 0.12054884603035584401 0.3683114090002035379 -0.44541467912086890601 0.25610988822631641781 1.3168230001074461288 6.8247208249635020749 -0.83666096744738138735;2.6794240749280033853 1.1424733727590985488 -0.37812239676303693869 -2.8334061111670219013 5.2646714389003514967 9.5771916184811551886 -2.825310475449640979 -0.089863417759277683383 2.2976285964634364234 -7.7187111367349174884 0.20872802934135861741 -0.50779642838708716202 -1.0288565132752320874 -8.5907217097688146623 5.8518927206780322336 -0.27545779310615442492 -3.5155538103376695602 3.7781530777385246012 -1.3140379570966054246 0.54205343851738407857 -0.8195499487547942552 5.0565554379176820277 -11.616637333177786573 -16.079182948037882284 -1.7771510508738956879;-3.7588122224025415363 0.70397212799835606756 0.81146353988811814606 -0.46140899476381047606 -1.6552972759347261977 7.7210013779094426312 3.2557302840625093054 -2.7469768860975549707 11.090167572538813801 -2.1815445051941488863 -1.0094044131522095231 2.9476510196061500579 0.16394765832966617936 4.3761964075269972341 2.8380817280468901842 0.63619697639561145763 3.8771492247202239412 1.1655654592417099558 0.1426111135335687008 -1.2548262643435768027 -1.8903670885387329204 0.48080805107560942169 -3.424711201306098296 -2.4411896724813004766 -1.2649821924513753313;-1.6003512699421122978 0.87154810196443033288 0.46948765463284380939 0.46106956729902653924 0.097779146021205687322 -1.2391791283177877592 0.79993976650644404991 -0.6728561184126440331 0.90102311538781543199 0.18508526871682740023 0.82651444398138362857 -0.20456171768023428958 -0.021991110141641231207 5.4533872939712786376 3.2379906123958792641 -0.11856191932442615433 2.1115969760733843685 -1.094910828572193795 1.3790885160067543058 0.0844064337817959226 -0.36834934067872726615 1.0359851960411838867 -0.27287198690424041558 -1.1059548953454545472 -0.48772482944336453814;1.9935819031752270991 -0.050942518408057406443 -0.28817844392330521641 -0.9537621861998409889 -0.18667666723580195187 -4.316789397394849459 1.9858333638111118624 0.21041381429938560421 3.3439420693034640486 2.7641537076887439106 0.0050313538898975971453 0.55563774319872782925 1.1847182942698053498 -0.32258275431467053895 -3.0250295523899786154 -0.47236506548428852659 1.7958457251931478904 0.99098634441555455421 -1.3816566461152848255 0.1423173985099999983 -0.25805446365247153295 -2.4022621241128052638 -0.25364483621138517178 5.6866086577072332275 0.62436252370474820683;3.2927840658753315672 0.091613428038913424789 0.67388978519834519254 -0.19569545635424301366 1.3473846639307507367 5.7561482970471766762 7.1271818308562817634 -2.6072867625226212596 -1.8305197436329996297 9.1705756927700790015 -1.3237024254262474976 0.60289110348280305907 0.93093368556850142337 0.29872311639361354141 4.6430307119010398864 1.3937377373058672525 2.5166339267578008432 1.1800032809454474858 -1.5385986507920317301 1.2557245311279050526 -2.0341734146352012935 -5.0766521356466673964 0.54018029960791080768 10.924244074933529447 -1.8441439200165812284;-1.8886406556705397364 0.3222905088020078801 -0.070325117906812756319 0.92003417551558985821 0.90166057927600884447 2.6663841353216892749 0.18445436373313756073 -0.92404529765375742478 -2.2333934031407332022 0.28797073321354677011 0.34376759973923287639 -0.055980038660855421795 0.11073910115246531072 1.1005848241996616377 1.252111497203090007 0.34803004375013335547 -0.11486147132943752558 -0.71887981080749774332 0.33754983240625197061 0.21458750922360653179 -0.092310963119780015118 -1.1706631188845824099 1.9616824612049479359 1.9070298147191735438 -0.015603175303169453461;-0.55048989914097012921 -0.093873070471512803925 1.216725364716353619 0.070637447319614535268 0.33747594283889620348 -2.9552299776451254054 -0.74341796756461131501 2.0125684987830672057 -4.582788353280809801 -7.4478131966702187938 -0.82928500292490925361 -0.92557240117377792554 -0.033856815405000940944 -0.45160787288815124052 -0.60391492389880319092 0.76421064282280581903 0.016248972103287254165 0.38661392704197028447 1.0550005259728589824 0.62822465177416542126 0.32730379956932142971 0.99442917857800716686 -2.4648887031853856655 -12.074483013224226013 0.26309751201866343751;2.3897537350773756515 0.20287876311313915445 -0.29038422473876662755 -1.4835949270691788371 1.072725790923790834 1.0260938025029291421 -1.3942974556306186873 -0.38236558195997977228 0.2911644553808774849 3.5156904170134350984 -0.4079669979575687444 -0.36434776848421573936 0.22156609452627501478 0.9093422023096928708 1.4062275694394341663 0.38243942460245422543 1.8554930675089393866 0.69414680430670139266 -1.957121802452921111 0.066370918278662094369 -0.20443248540081082609 1.8590399183041173004 -4.0509211237678339756 4.4362358448985705905 -0.6388793011207533068];

% Layer 3
b3 = 7.9705492943360622959;
LW3_2 = [5.0103436767668094731 8.2539739581495208398 0.049243047288115023019 -0.066731611546611863117 -0.23159421579068117936 0.15081458389387136787 0.68813315526154650303 -0.038216385038579735178 0.21404472888970055289 -0.55615590514604895667 0.34395417483627110933 -0.12969582399879911461 0.51455432633933606557 0.34217078006999329665 -4.6166564651552857157];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
