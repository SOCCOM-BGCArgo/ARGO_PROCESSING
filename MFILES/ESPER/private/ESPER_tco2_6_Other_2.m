function [Y,Xf,Af] = ESPER_tco2_6_Other_2(X,~,~)
%ESPER_TCO2_6_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:55.
% 
% [Y] = ESPER_tco2_6_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.18225417544834;3.6421273347114087;-0.37482075372595336;1.6110586893494034;0.52349321194474885;-4.1950084510714065;2.9841564193568426;0.038890817458141706;0.40704940938137646;1.8341720822117136;0.56931764146524644;0.43289671178363714;-1.0517785928341259;0.027973071782597725;2.426929232585703;1.1302951018829872;-1.5594506041269498;-1.1277970680551632;3.6260431629466034;2.7885405170982822];
IW1_1 = [-0.14210694047771069 0.19260836406749765 1.5948376658847414 -0.26817376267874182 1.3182049599778416 1.5323640615311247 1.2617670146361755;-0.88438780078206358 -1.2638858641101667 -2.3004772361997459 -0.0098376828947926483 0.58646856985505125 1.1197689321340203 0.75082908237396639;0.27459899938193233 0.61368840489562226 -1.8343639996255281 0.67630318164916836 0.00097548078339009057 0.27633897464770141 0.0606420944697834;-0.27637820972408328 -0.20753623758316916 1.7671475846137497 0.26493428970305605 0.27945465118421353 -0.80137158453651824 0.67991326877607483;-0.14871791668845022 -0.15764779433978288 1.4322707464868027 0.51559803826647888 0.84565063916408822 0.22525142015376534 -0.081918761602436427;0.39727674049620598 -0.72498577856495128 2.5487862410813342 -2.3071242990626226 1.8889967033889437 2.4625796638563888 0.45079172046699839;-0.55621194065729596 0.62436836229631709 -3.1308333646158641 1.1280514320880144 -1.6478914327122107 -0.87266201623346529 0.79312568480448775;0.079045503127142272 -0.036081296601784288 -1.0735718934000742 0.14011200500860985 1.5546124566658832 -0.48117284565021445 -0.037398158103357122;0.76418816296360992 0.68649322632596088 -1.1990924511288801 0.38494746853245576 -0.68378517584455312 -0.07830298623390497 -0.16320923898339607;0.0086185255814289173 -0.055945313002855941 0.84088240939731673 -0.37838546432903503 -3.840998992609288 3.105433190202894 -0.25858990393610293;0.11725299900566089 -1.2123880593545093 -1.5418207050006723 -0.68008885504536676 0.45968770467214415 -1.1318047102082334 -0.63753334752519786;0.2587777592090158 0.17600601463072646 -1.9014206306875792 -0.64963140448333789 -0.55265761953041936 0.7535726697390791 -0.18223625793471945;-0.15075930608798965 0.018149169345388246 0.81490122385709218 -0.13279384335587827 0.55791763369863423 0.0073900488706878029 -1.1585793494257921;0.19788401280843126 -0.17842282093955111 -1.8296038706727125 -0.37663709404426776 1.5675526598730103 2.2581147267235147 0.18264817900994676;0.21015302329260138 -0.56870015466437251 -0.18400757130423939 0.85782639453161091 1.1301175695976799 -0.7407025195821999 1.5018313827683476;0.036748436874209769 0.32259557608838679 -0.3731533093358379 0.12035931122529329 1.6052273591019648 1.1883324605425833 0.090871265142085211;-0.010784067462252462 0.34526410931355905 -0.035618577350942482 0.19292416712484525 1.0794054577030612 -0.9440396029983833 0.5286690644963653;0.0091570580056228174 -0.75878427890249145 1.0991069610204172 -0.3606073833890433 -0.31879434962828834 -1.4860138800581273 -0.14385631544800723;1.1459098034801292 1.3404149881096856 -1.9668035824927026 -0.1874033533597757 -1.7865425137791462 0.99424156561260979 -0.63040697223130848;1.0437357315140643 1.3517480890334899 -1.0358312958043288 0.28752972389768355 0.19574945858237669 0.5857769842632532 -0.14529100031059511];

% Layer 2
b2 = [2.0232735844359704;2.2611534473104982;-2.5301875807172167;-4.5316594904377698;0.31961588003615715;0.1186007918408553;0.55669324484888549;2.4479800305240103;1.0136945523952297;-2.0256667206170662;3.9946315258672715;0.22515590282246539;-0.69173161076974332;1.5888535011756528;-0.32848808050542666;-3.441253081922619;0.46811230034429224;4.2524295003008241;-2.2980047211989154;1.4638370462718115];
LW2_1 = [-0.38452394216785085 -0.090280318225620632 1.4185808423935573 0.34843458350100837 1.2163038558489172 -0.1383827246156098 -0.71007800726558801 -0.13359901673078725 -0.29657891601781516 0.17326516397395814 -0.31136980573999778 1.5874149199075664 0.02091108684955708 -0.076488334389259421 0.21423706347644628 -0.86244841701014463 1.4013354964622389 0.48723231650752463 -0.18032804549134143 0.24819014576921805;-0.17902740537666451 1.1291729745062598 -1.0631291107929732 -2.5157314949239722 -2.7144144795806993 -0.23409587348446909 -0.9535256648917948 -2.1014711804854089 0.25090075007682905 -1.7044500036053847 -1.2439808249956175 -2.2314657544314387 2.1366220084809777 0.50584722955624239 0.46578291970160218 0.38690502792573256 -0.25933199129045326 -0.30479388384294087 0.060787304064227908 -2.00981430138039;4.8327477571819628 -1.1414570763820504 4.1889776917661417 4.8802900728267318 -6.3748292309985235 -0.52874553772015243 -1.4461063927663826 0.35878007482503566 -1.8077951116438398 1.0658568729717766 0.47608288584203712 1.720189852318275 3.0788152300463012 1.3649419932295421 -1.390766609492343 -2.4626906609533434 -1.9152635205390933 0.96830177642004145 -5.8405723846862605 2.1791618261745382;5.4364918435122478 2.6651050332856938 0.36561706318328524 2.6732731809509316 -2.5802216588542737 1.5876047162146179 -0.14381498164721832 0.2262910468738345 0.33598954829405137 2.7571508460025509 0.63357056490199304 -3.9069910786008641 1.3452568879975935 -0.47164499268545307 -0.044666666505220678 -2.4523124732731514 1.8530573337260474 -0.58638131711295938 -0.15851309860080148 0.35334526264644239;3.1892366145686495 0.39701176041928388 -1.2561868829167679 -0.056850125497354236 -0.014127169239365857 -0.10663672267924114 1.6824039990353399 4.9673927201544146 1.3471672141185793 -0.016828436739399922 1.2069292171236585 -2.4543957912104779 -0.87167979753308333 0.22288822675744474 -3.0579679717051356 2.5709371672559009 0.74615811231846885 0.31023114889150283 3.5555308457873909 -5.50897729387205;-0.44977776784847678 -0.16144573641378063 1.7136426549528059 0.96429479046684563 2.8381174531189362 -0.57594753110249741 -0.019356829010931081 0.47781955420259148 -0.72500609942277638 0.1642761217304427 0.11677126944335636 2.0642680250954726 -0.79313037806417508 -0.084166107690351474 -1.0108294246028189 -0.54655481397677919 1.0948712734319099 0.75012143411521737 0.28132100612533567 0.0010800334182233511;0.89337617025296268 -2.0044828990800454 -0.55563139057481714 0.091139418064332622 4.2813834992220556 -1.5681959091044555 -1.3688477284278242 3.6219694198526322 -0.42452254149147733 0.1376284604702879 0.10436351391555192 1.6379340696585956 -3.0040578050749751 1.7990970399346564 -1.4198463009259796 -5.1432761904605844 2.6703742984084227 -0.79926658088447733 -1.0138959470455713 1.5946022987733792;-1.144254360088758 4.0820134787759885 0.72084027441198606 0.22799014293632841 -0.17006263868854687 -0.80421433740771386 -2.8950178040588384 -3.827956015034085 0.021472241949475519 -1.021659169916852 0.1570820489639019 -0.94496128334619212 1.6501831939679992 0.56965632925072729 1.4867152900239442 -3.8651090281700617 -1.6694076538700677 -1.7943391351405724 0.89104934268356328 -0.52609530653721404;0.3558676411666663 0.37360668317712553 0.24871057822617049 -0.11834594865110436 -0.93131918096240185 -1.4183649442270849 -2.4075382627948834 -0.95087638270364372 -0.089667683696287234 -0.004251696474257439 0.12728578427598367 -1.172859409516011 1.715084304529555 -0.45828469982862058 0.30220290460074761 0.2266590975218985 -2.8396049260395859 -0.82265060061367001 0.60919765673344584 0.31856324458958635;1.5930103150194379 -2.0016307445255395 0.7778231325410111 0.79709645383129935 -0.11108827704034564 -0.59404132885500449 1.2637621733338213 -0.68194805998137153 -1.3817817369020937 -0.90082711621730815 -1.2252570299262791 0.065262512298055284 1.5869443927767786 0.0021942907000693547 0.66565308337648299 -0.10068728343710487 -2.849483225432774 1.9399425768399454 -1.4491414608356943 4.5205588786866571;0.2296081348173766 -0.93391784467176087 -1.3523415426420342 -2.6528330023561808 -1.0217603220011149 0.031185717523153762 -0.53091959347109063 -2.4327242178396449 0.99483323539690083 -0.0042880020866885747 0.26509092715953836 -0.38324196881930489 0.81378753763494005 0.79908170958883307 0.97727188583571634 -1.2036511712586324 1.8906810194821388 -0.35207003623485661 0.033543833527126588 1.2284280907182907;0.25157753760533258 1.9676957165938687 -0.28860458800799121 -0.91169590269375522 -0.11648781959057758 1.8422205792453914 0.50368701487973466 -3.1987700235421652 0.3092942789970381 -0.90994176187683995 0.60018385137740438 -0.79990855495990476 0.6785013547825075 0.0041231388980674513 0.46402825745391713 -1.4661644873012019 -2.5310383698726429 -2.0429309261826907 1.0042460509962698 0.073465089268680533;0.52761499471871331 -0.051060691219644752 -1.0371730580070135 -0.60582739246411665 -0.33412503090829654 -0.20378956005285298 0.30643348427640127 0.34299399562281546 0.023719992440763751 0.13560979448468488 0.088978332337299154 -0.23217597425435782 -0.31845838538540377 0.028394568641589929 -0.2641928011190206 1.3210487561728432 0.70269569570945156 0.31071866387338121 -0.1205799833393057 -0.13291865547872173;-0.38248707718833264 -2.4535177013857274 0.97632848907059411 1.3619457348300883 0.87190470663662412 -0.03266077092824695 0.1180263108772354 -0.31321661221444885 -0.41318495018650331 -1.4676257615474484 -0.076888682284142182 2.0147898383934146 -1.5195294833308854 1.2411719837594848 0.38071807673532698 -0.47395593548359671 -1.9664090701088373 0.57672971093965542 0.37174249803048132 -0.4828275464105134;2.0095046445688407 1.188212463343703 -1.6765417003390488 0.98884765679543429 -5.4461515713148909 1.7869644328927907 0.56534772085231533 -1.3348902634013404 2.8195998020616417 -2.5061021375828387 -0.39002200862749054 -3.7909030614224064 1.7703117170132072 0.4924819112375835 1.0070340408609078 2.2273146067598479 -5.0781221564645191 -1.617240867137361 1.739543794578899 -3.0692062910575451;-0.73040842155388308 4.1541592232043767 0.85105181330193658 0.64025603542879761 0.0025403309716210188 0.57737801186932758 0.49464043011063885 -0.47897455685439666 0.37874416664654498 -0.70261920308995784 0.2525517933467889 -0.64925437777625128 0.140318384348532 0.35356242866132936 -0.58581219163270493 -1.407905334827382 -1.3670446855439906 -0.21910958216052812 0.15957652869100397 0.027291835627823585;-0.27812389852965774 -1.2816238514070952 -0.10149471634736688 0.46880175213494624 0.65458139445022778 -0.21368338946697368 1.0365100508998792 2.2676499082986896 -0.072236533767584002 0.52998433092286446 -0.34794072205810378 1.0370829117827338 -0.96306775367534181 0.27620747548914654 -1.1074565079201042 0.56621754146346037 2.832993560452727 1.4192508940363089 -0.7613951840976777 -0.29053493388677798;-0.062724774066215211 -4.3051244510797844 -1.3460066605506922 0.25299435165775802 0.064244398681321049 -0.049177472670165541 0.10558118197529903 1.5219711983630533 0.26442469871570812 0.16036232012094231 0.061462470341170354 -1.1671944308813198 -0.37746569970921723 0.04054368664580988 -0.31827234473313581 2.1979355484720253 0.083177489895834233 0.24307808964200975 -0.29702958894222931 -0.6408202035550512;1.5234801648205702 -1.0660987909151476 -0.48250555431583225 -2.1504354115981852 -1.7504288605814795 0.14379798766567761 -0.24659509094830578 -2.0551738667215251 -0.50460673216547225 -0.20212995397011008 -0.16517514581604897 0.45626623239846043 1.0617970913110528 0.94339203620766354 1.1460680962783472 2.9433691388222982 0.56090673631493615 1.9841632570372438 1.6351675985462755 0.45444118691376745;0.84965527230653548 0.14779438973454609 -1.3955562434428523 -2.5079145544884178 -1.0573540080676203 -0.14673841220282433 -0.87025062361481054 -0.78059965566599654 0.63508898748307008 -0.078499986729821655 -0.35558035853981712 0.75114209726818604 0.38955374239728296 0.14569356749257065 0.89916225228524982 -0.19843455383382611 1.1098622295606211 0.2219726293626228 -0.69897586628341069 1.2132366955918161];

% Layer 3
b3 = -1.6505169502888335;
LW3_2 = [1.0027746886270341 -0.14892713899698978 -1.8831243484880398 0.093002102933189779 -0.11623804833481638 -0.5049874710250013 0.19632444737517818 -0.49758789595577396 -3.4087963847186362 0.14436705134337671 0.25891162482333602 -3.4307405294047619 1.2204996035661269 0.21799045669041195 0.27182959422488512 0.50912279287736839 -6.6551155308992689 0.4746897201447382 -0.21208549869630933 -0.50456983411941114];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
