function [Y,Xf,Af] = ESPER_DIC_6_Other_4(X,~,~)
%ESPER_DIC_6_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_6_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.3158596129567701194;1.3403079347422544032;2.4824530978632051159;1.6301833119773414538;2.3033337865231051644;-0.67706903312884969548;0.90621982015677859934;-2.103390752238869954;2.1338176736136316158;-0.65982975699929169444;1.1538618625398813222;0.23160812951260492665;3.3863827621987900862;-0.79272155162935398209;-0.48894166288900253736;2.1900809378918797421;-4.7514998751660524334;0.52137172237855389234;-0.40450539893260378799;0.88074588348518145775;-0.18886140418262564733;1.2554297439549837456;-3.8507254903680410152;-0.61916501100484122588;0.52483446106008235787;0.67798618661124721019;-1.4678993488544187507;-5.2085447317742854523;-2.0189077844026837028;5.4529458994048836118];
IW1_1 = [-0.69150823344882439425 -0.056335774127999678484 -1.0628402809127381889 -0.31219707235638216591 -1.7811616496897879625 0.11196201759075852245 0.28895491846593307494;-0.19143952713395878673 -0.36056512336654789053 0.68896866227119701875 -0.1450850448214802968 -0.30197485138168222996 -0.78598872365121674743 0.57289502852840745728;-0.49557920114499903752 -1.0378554891924272052 -0.84679287172902784064 1.5614935781752494748 1.3854220853062961805 -1.3447437277662654953 -0.39682733531211833444;-0.042407765668678057414 -0.088870913047525784689 1.8882460758444521431 0.66708646337158739037 0.85012691973487908292 0.52044255601109878917 1.1456055961417570543;-0.82362639224251943393 0.052284290019492626889 -2.0821442824424765128 0.31479374829593187446 -1.3241865161752994773 0.47255913375191876957 -0.1955083914745361362;-0.03133133320481380768 0.25869245102054361229 -0.51636375659714128794 0.18712284456084160578 -0.6992653614671282547 -0.38966088933135556438 -0.86051520445376061819;-0.066883507266981265249 -0.10643269631479922166 0.50933495089240421461 0.038311807105684360375 0.51337964634654198459 0.52950886642793415504 0.5728860195222510443;-0.90939430681624189301 0.31004593096471583236 0.98899841353849604619 -0.43864928219900839457 2.0390782580845860927 1.0831761364589422847 0.24397447999293750409;-0.43901103718800704723 0.36226188010083093527 1.1420900643856697343 -0.18351265010074943596 1.8779910093055633968 1.8195689930889500374 1.6650218870722308662;0.064872694281994935928 0.011047070053224812558 0.013669017419816034686 -0.64207334773404622918 -1.1242319920452297222 0.93925634317824935327 -0.0027092542201543035572;-0.65601813936932684701 -0.072652764887860488141 -1.5041194553921426458 0.94374014320511456777 2.2590880540119147035 0.31555695791287291518 -0.38792332147200359049;-0.12376342010305445285 0.20583033909380288318 2.3560646867485601774 -0.015591959652761014365 0.02525712572689832805 -0.39435540600003277101 -0.68412935316600531621;-1.5603861470448019411 0.11166584255298871164 -0.39068933229503322035 -0.64795640100288109942 -0.60111549876482639476 2.8878780698761676859 -0.41354072693761134705;0.85895851072997764231 -1.0269090200867252438 0.90927592813560909057 0.19186458519379359644 1.2192594815790043228 -1.49344696129248522 0.82781927979543157292;0.5263108824965991861 -0.11371180951084024213 0.047930316975586667594 0.65616892916973057481 1.7706183599850593424 0.1459620739226105135 -0.52267515585957324831;0.083073444594330983493 0.067980657780187025985 -0.23106298232830507766 -0.97764074914349496925 -2.0815843741309745241 2.4416075333911377854 -0.35926437860793425383;-1.1508032182760994377 0.33649801909083104645 3.4904717411397445659 -0.81310282447818904572 -0.25599667934995795626 2.4252084339921564649 -0.98128704679513956144;0.22181648291605818302 -0.23100540599480481885 -0.30985269897437628384 0.58974757278253087112 -0.19243552377653255769 1.5937410360101160745 -0.52934659333046085727;-0.42316863880847077617 0.66403342515092045328 -0.49646827476475424712 0.016126458644908286261 -0.50988983419154243482 0.021560206755069300649 -0.14892344608863553046;0.21698174358236729797 0.3783627559908634419 0.98711184070128887846 -0.35496716831219554678 -2.7225908999971237812 -0.015598099466590978346 -0.37535509711379372311;-0.26322740447094672422 -0.19517200720293992333 -0.6143690893697228983 -0.51043400624774437624 0.46233655805761431079 -1.5133094917103224741 -1.8462112387656113288;-0.060440882546723175006 -0.42023262121548782266 -1.3144934888453871924 -0.36377136460849068822 -0.59837606661712472444 0.68564833914717460139 -0.56496928403867363588;-0.20804711025246674927 -0.4061530386011310001 0.45215495371373481959 -4.3583998981722960053 -0.19914302665801753012 2.9674567760113519377 0.73098056858325788365;-0.040887313604997255201 -0.13186632412138313275 -0.74934791191915273156 -1.0002899553806783306 1.7595570858386562207 1.5205574239878534293 1.0577203247908846251;0.097875800364648032903 -0.72753915553671932859 -1.1177998348590141298 -0.87725582769507892689 -1.5127640577269989564 1.4036090151682385496 0.042496961625807336271;0.092367018137138573453 0.45232361720412650463 0.85113073679582418318 0.34129297970348165814 0.53476870055530190129 -0.57836232634707696043 0.06611511305647141401;-0.059422658396427796568 0.39121529537391480646 -0.7324922850150284992 0.37137740351073372791 1.161673239783294731 -1.2664806753285058338 0.11489036661626188252;-1.1034919009422550218 0.51193208575223025925 3.5200689754718630375 0.32391092079216571298 -2.3343653225686393782 -0.48719421639346299768 0.25384602829549557379;-0.17882536568613902062 0.67876991444391066022 -0.13252781957434531246 -1.1874444339286922556 -1.1762235819168569417 1.5199014494987650448 0.49584921963624301045;-0.087985994802674244442 -1.2523039510988855927 -0.048249821441438744962 2.687556380296750369 -0.35384617311692267982 -2.0976095263054408413 -0.78107087085810023019];

% Layer 2
b2 = [1.8160487646463030487;2.6402928328748500597;3.481723597380120605;-1.5334582665747980013;-1.9778292103211088104;-0.28116869850642972617;1.2119418626695184216;1.7487700634291165613;0.85226149078007484849;1.9865113731929602281];
LW2_1 = [-3.9074510845176888552 0.25540558879624591926 1.0778265735250609492 0.65549612534581735979 3.2426811506317143596 2.2977613258639046911 -1.4255222792418198452 0.12552448071627259063 -0.92094853368981777209 0.15525250697651871157 -1.1401116392573766856 -1.8832393704601058104 0.56263587460074593327 -0.56816723038367478171 -1.4426175790686097677 -0.70707482663310672333 0.010488074423879643199 0.57815836307385404247 -0.90435945271181950034 -0.40305030570420929958 0.54218628997424278548 -1.8491921309464121048 0.070488420622779990321 0.89791100189126149544 0.064741456210217540601 1.8434964784775886848 -1.4080274829206023135 -2.7504303165289263333 0.47904590985692180327 -2.0354745268488914078;0.54326147293906712488 0.60683872607283884104 0.93498486564696414725 0.16299833430496835085 -1.223031738948954894 -4.3987880525038001167 -6.7939303515018822921 0.0045055168839414185336 0.33336157691129714165 2.1873439314136509104 0.85013100354384019131 -0.035153046095217618805 -1.1284088351105436843 -0.21494615359653207465 -0.24247527867166474014 -0.24807379573375890058 -0.51807531094505454572 0.83569145127792343608 0.13193019677822617752 -1.5063506179626084958 -0.42886344040483892481 0.39008132739556494739 -0.21407094107511454029 -0.65638454720514416429 -0.27876083304843068955 2.5961037148878580716 -0.76472239948981735047 -0.29774018837247423486 1.591436837474831778 0.98396863297790804204;-2.0870076200435456748 0.99661476334081722239 1.8318776494125244003 -1.1421059483269464518 0.19819022019883794639 3.4210493772941772406 0.59615215178515201799 0.81866487972251078542 0.56522536735912454198 -1.4066188195159667895 -0.76697068232170739766 -1.493421799518248605 0.48338291152497292469 -1.3738136231804305432 -0.74762968495669723801 -1.1307417203738174827 0.30147975033963742009 0.57387434323507136025 -3.6653776498653525273 0.85145741777133732153 0.30001571438877644438 -0.1851731161660082059 -0.88597249723375803843 0.63179636150594098432 1.256556377400815272 3.7863670704310918858 0.50534608742550657379 -0.87871018315578641733 3.1438757506657610818 -3.447326620063309921;3.024501612973687692 -0.72068062408193012125 -0.89474880024501868281 -0.31449379598176108175 -2.6932087332914629307 -2.2010931639338178201 1.0523462674017491914 -0.15990743608412658072 0.58965304838883225713 -0.034164172931023251145 1.1043443560468459985 1.7854138854899819222 -0.51749021782292881078 0.58322144780811524534 0.89530597141637946468 0.69410214214576115843 -0.11733813750150558219 -0.5118718458908277924 0.92757750996493504303 0.15901953882613506508 -0.50768454023630404937 1.662902414933226769 0.023220982600809632335 -0.79810708349561632069 -0.13694127695282640178 -1.7219979193887566815 1.2878148718363300329 2.6527892721503456563 -0.40044059491027950148 2.4788023261125071706;2.2811221717324206004 0.36175190113128519176 1.7943000689007571058 1.9641079765842697213 -0.93929300039315311022 1.2225280976774901553 -4.2371441765176696137 -0.060026734805445361443 -0.090832714069959075154 0.012336443229804403693 -0.23582341896261449499 0.80018345862377660005 0.7342036900891221185 0.22794172215886820965 -0.20085733843547770583 0.0088399141336172638861 -0.92788031493294709229 0.78316779202452679876 -1.00747651622144474 -0.77386543129443008393 -0.17297328714749901635 -0.61784969760796026872 0.11221881315423735959 0.86877813082956900637 0.92989817648775818792 1.9057598792513270602 0.73307548720883408677 -2.1883254411776755788 3.3056069688660238981 1.3940299436814824752;-1.6540332611089532122 0.33809663514461973932 -1.4733427245403190042 -1.6338986524324485838 0.68587936846490604736 1.4647729105780844527 6.1900480128290702453 1.934395160442728745 -0.79257502425269354962 4.1838465234461468256 1.0957222113225593141 -2.0438121550463126397 1.7431594006150936682 0.71693664547984481406 1.0300525833869151882 0.55160049741090078079 -1.0424208526252696227 -1.2693809496468895226 0.018003087376782841988 0.24310869460686682086 -0.046596372525693312283 -1.8001513235148498548 -0.96847467949812993115 -2.355734160650601261 1.9482872663833787907 1.9693864946842554176 0.11903873938242631736 0.27322990886111364617 -3.683440272147990413 -0.66050170910190897366;0.68041228498478545372 0.89675668364954830292 0.89442284914812542063 0.61477049676903428033 -0.53027639686613603498 -0.018038348424707570383 -2.5483813195716695787 -0.90524377175637027459 0.81075773873450740492 -0.90925612717244475025 -0.15894593897997938425 0.74284756350392411317 -0.053370260871538635628 0.12459954429352107508 -0.0077654689678388040888 -0.51316770303177228207 0.79242500171536067732 0.37051465109017051036 -0.1495963217892275765 -0.24018126841681780581 -0.18900837375837006848 0.10246811035791782152 0.40736263433644237519 0.93168222501191477747 -0.8120720367614203683 -0.38491227889248286198 -0.47372433563879579044 0.41927910404458151872 1.3026244001747744328 -0.56735967838841749877;-1.263646044503936805 1.0322652505462071026 0.25080327735730817418 0.79870574573452113309 -0.96388632189272971384 -0.1088199232070965472 -4.0058163889607003583 -0.70675563394257490124 0.33062106920070793992 2.681016499818547949 0.44064093695574124698 0.026869193853936171323 0.2111798045554873493 0.0033375955679301148871 -0.61640393423603767609 0.58744297983166327004 0.65165438628956195988 0.056120832577608387171 -1.0478007521110594968 -1.5309690207185440158 0.24890377222113910238 -1.8555257154922337737 0.081174215183368425564 0.31976330506362510286 -0.84283375752531708436 0.98672344963599400991 -0.46711404609389661768 -2.005981986490118274 0.36799107351615889527 0.051048631582954653862;-0.84682828147211330894 -3.4420289129210086543 -0.0948643502666454419 0.4969746718411934272 -0.41554135471256903323 2.2096368797016885388 2.4549634953390002678 -0.23509666585696523122 -2.6464129763039858645 1.2072759298838238173 0.46273704408768057128 0.044346335708415174359 0.21089806567866536957 0.2412800260991170842 -2.0264680510852475237 1.127763417993187911 -0.39524549851389156885 -0.3811659890540397555 -1.1387975449201663825 -0.53773391962532224309 -0.94244307319869158324 -0.1186047512953440769 -0.59006534669500432244 0.53654758154697701489 0.40486873429124425883 1.4561582403211035253 0.74497680027289803206 -1.2198822917261982202 -1.4861697547550378751 1.2972931976577837254;0.38364474999934750077 -2.0506681278272851365 -0.39330339845348055716 -1.2799609353743688356 1.8820151572552221708 -2.7594697555711493742 -1.1377203568770819508 -0.32640934765211893076 0.52602713300509473804 -3.1446168450926164084 -0.43408266735814410309 -0.04264750390560564236 -0.86449153980808035591 0.11558204523861281832 -0.74473408515229910787 -0.37187328216257981017 0.68891586033442353543 0.97233851533990633964 2.2132376958943051903 1.2343366161992737062 -1.169000700820470362 2.569430976292383928 0.16494496678424497293 -0.55651236690667482687 -0.72930530539909321774 -1.6959130161980482399 -2.4038001191511968457 3.4880768766850729357 -2.2890199691173500618 -2.7957055920704698693];

% Layer 3
b3 = -1.2443420699419815989;
LW3_2 = [-2.195882908976372061 1.2103264294112048294 -0.30737600313643848038 -2.629544224998589641 -0.30789970327883237067 0.33006933319466202903 1.0335623482580793553 -0.63280641118832781089 0.48741512749762122558 -0.35980028514900708192];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
