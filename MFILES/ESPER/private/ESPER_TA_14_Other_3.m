function [Y,Xf,Af] = ESPER_TA_14_Other_3(X,~,~)
%ESPER_TA_14_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_14_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.8868917015103887636;3.0724943927061372229;-3.0370416697250348648;1.7417401242356826963;3.0852004045437984026;-1.6001178752322993137;-2.5859094474103767602;-3.2404001242727362708;1.580282792369983591;1.1402142726849255894;-0.16765709184994767589;0.21378714687143263173;-0.10350353891014614505;0.96304053939926648198;-0.2887841389140012871;0.24676990144416752204;0.19707444966134440856;-0.11874855286462741855;1.5351467139994434685;0.35774963374882406963;0.71890597844515902182;-0.88261246568714768479;-4.3882011984133511007;0.17413241972173484906;0.86917067455618146621];
IW1_1 = [2.1038390398484994037 -2.3891940000907765373 -2.7555909218536092098 0.2985548807534228466 -0.79681258232016405341 -0.069016514691283281646;-1.121324849105923116 -0.89848929286689649398 4.3045765286805330874 -0.89412033579507266268 -1.8001777460493226801 1.9022729047220454657;-0.18385231749299535409 0.030243576526767221302 -0.014318024666596934277 -1.8767710543395363931 3.8360480845504141278 0.18763079110667701954;-0.75232950766458650538 0.94145644738600642309 -2.1452543408104141065 -1.6868189003133402526 -0.072196358694083362373 0.086882863973149690451;-0.07419552988621454237 0.30872221539773908594 2.4109638955280980888 0.87905853503082098666 -3.3127728510189622391 -0.12735491880062377312;1.1675309989868936089 0.59238109018801576866 -0.067470590714397635224 -0.066747759000901157878 -1.0787166794349904997 -0.29827996205474172076;0.08302480642254717047 0.49251416607318504459 0.96121892598770131144 -2.430536426476436862 0.54739127917250118838 -1.3098545269153838433;-0.27803275864437732023 0.029701372766553345295 0.28831287678383271667 -2.0880842092921203523 4.5650001259746426641 0.42835969061558043514;-0.25158015110173920226 0.66563313878973173754 0.37444231502504132791 0.7329364562279885309 -1.052349367877250419 0.10156823379300494725;-1.0093258822783643947 0.26510544667738361602 -0.4005755025300898331 1.6926402903948001288 -5.1730410324168820679 0.67500066248698842308;-0.50091751523634719945 -0.17830371300382494293 0.15237440722086473266 1.2927517525156673184 -1.1640989262471941323 -0.76936642656564402376;0.023904993208496341101 -0.34257551124270479992 1.2055271621204188826 -0.73173503883844381868 -1.0659810460016490019 0.2450496859073486855;-0.12724292350341911972 -0.23283060845087155677 1.2705543266550505255 -0.87962470225552280567 -0.41601443006022581494 0.71594337043508748941;0.65226106948474926739 -0.070396934075478659332 0.33769924674254048202 0.23150563529175882671 -0.0077442287725856696207 0.95296783391971029431;-0.54991483247132422196 0.35132222124663042839 0.13939346972030763894 -0.38699808105673028091 -0.72086130067562281809 -0.072754934903465115492;0.50786881519451121392 -1.1297239121575146648 -1.9155056087537798426 -0.74271597405832467942 1.7690852379499359959 -0.41692696922042538077;0.093363466659172944517 -0.46773761101544586438 -1.6007598540228957784 -0.83981547855145799453 0.44120486370289885292 -0.49667593297515133521;-0.16778992322341590437 -0.20626334902660825588 -0.10363455335460178275 0.87952372249813826066 -2.3030612565833243899 0.97278489772896803434;1.0563635729500353566 -0.45791680989186489548 -0.049676504807888356707 0.16634723305074705646 0.3027133682160385586 -1.370577804199493821;0.25179644181423471716 0.1119928764364788859 -0.25536227456549304149 -0.93686628753483092158 1.0572593548662820861 -0.64093946979715976653;0.024867694878436784334 0.084380449961594924946 -0.66799011804589769614 -1.2761627768976113728 0.43776161713251315888 1.6010675341843736419;-0.24501417558117902229 -0.17703532352888801116 -0.33958703853868016376 0.4821846254458893033 0.7033943426495016249 -0.41440124341986511736;-0.80603316342028041852 -0.21536099272735759191 2.6801533749969999043 -0.84219670498221532728 2.6980216751824559474 -0.84970885888700309341;-0.32111194073741400334 1.0754157659409617764 -0.39223376890519529026 -1.3091633039171544084 -1.4244770233816104188 1.1183527388984020323;0.33130078417390718126 -0.54157888162536715893 1.2989124567600436322 -0.14922251057977620192 2.3934152304831037839 -0.94416511526872981541];

% Layer 2
b2 = [10.984777191774222516;-9.1747864724749028653;-14.632498871656999029;16.303142306302348175;1.7997503877824883034;2.0620378768593718988;-8.3316593827412894768;0.89271213955301398357;-5.9869285574226172031;-6.8895565209100073645;0.92217929414321420101;-10.480350205126670815;-9.867621898976258521;-7.0363559203796430808;-7.9369631078761102572];
LW2_1 = [0.058332998402438655805 -0.67270076911084497606 1.5667589809566868642 -3.6843246099396993465 1.0663179119852030929 3.4023261500729633511 -0.17089493035639410912 -1.7581420800212621547 -4.3363156221351015773 0.45123289864962601303 -0.9869299850679161823 -4.2804241517758745417 2.2531696138190722145 -1.9523687628264465577 3.5212378032138627049 2.186018561237986102 -3.8583065857798364284 1.1138517420689368898 1.1830113047555499417 -2.4513066938400172035 -0.070548047793624571455 -3.5231426920843627038 -0.15802515472973971411 -0.47473142974086840473 1.159064535365917914;-0.96986662017527025537 0.0046641588100763018906 -3.95082534657590001 0.93548658966621767163 -0.50481650673902722648 -5.1495106321064811894 1.3272270436069777411 2.8374236689623604235 1.8121460091200727316 -0.77111712388658026907 -1.9998830669521221459 -3.0808951340328802893 3.180167841202567125 -0.83244939878636581287 -4.9222560446447101157 -0.29956754420051107113 1.5791205459518153909 -6.2764956093028994033 -1.2802808541792329855 -9.1575790872670630449 -0.33991354055660810696 -3.8303925338097180031 -0.59349369039761190603 -0.63064604113068245539 -0.50930432857339569264;-0.46834962464272067439 -1.7142184247527627594 -14.279458531952702316 12.20619645300287992 1.7710056229690482876 -1.5665612664949257749 3.8138325924242195697 10.848596441813617375 -7.0583381912779277201 0.96189059333208881686 -2.054687482464106818 -14.135492373973324476 11.786456097156092326 1.0190629438146687757 7.3837711299221897576 15.263861823710186627 -14.946488417438848373 -1.8638861743195584975 6.7834811891110007309 -7.0574175194412225309 -3.892093220905508133 -19.556804781950670957 1.7427492073714896392 -4.629398757079096427 -3.8849242900374796328;17.862671151031726424 2.288103093102834773 -6.9750254885087672463 6.1812176224675248193 -1.0481763607090077706 14.148891235302825109 2.0868539162172319301 -0.83119555262496602754 -7.6468033433651108055 -4.625533850927556756 0.20396394570126136214 -12.169407857427341213 6.836126589416043231 -10.08966044097496173 5.3310936365880401411 0.88706024002096428571 -0.5156403129953496256 0.66876608659136071999 -2.4767905770814784283 -15.575858677819176989 4.6803050258211751355 -39.964264582974465156 3.2498935326159705816 -8.0277416053697088216 -4.2230738200022948092;3.6755350678955496235 -0.13587755492265024548 0.56572975822621596187 3.4976816548538876006 -0.20316709132100355117 -1.2807452503382785736 0.1480960591853578423 0.79864881064362325258 3.9003581456751694745 -1.0539319904001562822 -1.6699256170190217574 2.2628561006789751353 -0.1333457995448950606 0.83098472506584419861 -1.8076335592985153244 -0.232074015312159182 1.663675617264988027 -2.804941337907636445 2.4067045814401537562 -7.2953754829115045055 -1.0990998994371923292 3.8195123158600865487 -0.48435622558773905322 0.016998753351130751338 -3.8681002610824384291;-0.20116135860095507581 0.59627344495623590959 -5.913615771988462555 -2.6331884352837553465 1.0525496731896495373 3.059297048216470305 0.92281057146118727896 3.6215543335750779441 -5.7862530504533973286 0.71822366525544811822 -1.2961991180294456516 -6.4651110620923608607 5.4407864021249343622 -1.3903270396206828252 2.3463127149401410421 1.1200837047315139738 -1.8934197365415648129 1.1525816045114503083 1.245136457248253059 1.578156142844382881 -1.4425815541205375681 -4.1590166669489194717 0.45205842951700381249 0.54634474378067965361 1.6112380541963238212;1.3192940630904099741 1.2254475665269743967 -12.727012765040436548 2.8437721530960260452 -4.3844015734488452907 3.131598866212230714 0.18601704880086677996 11.768791942184940069 7.7981445199077512598 -0.88218563877591538169 0.54976169114310169395 2.4793073756126804419 -2.1122623605174957184 1.1971250751209723262 3.675158309375923249 0.14947499596152030721 5.9750316212032439367 -1.2400269692620096151 3.6984101750856481772 -9.6054509997005457222 3.2531489390079162405 -3.4231041355039453222 -3.4317191457828037926 -4.3804418375700500121 -1.672437494731720653;-0.064553337969798202378 -0.018498205423819826659 -0.38783774551624189408 -0.13039186403631672362 -0.17743255591771070478 -0.087939759185388502449 0.1334926024888489493 0.19826645110118087945 0.12287846215618498935 -0.0032326963732475771235 -0.14700848601375465785 -0.30375616781190367677 0.36753877727919453955 -0.087275767905522994017 -0.21975978069955309779 0.0085939407843794758668 -0.0010405922114317550393 -0.12127738347931181495 -0.1786117717833386187 -0.15621721471426891492 0.012403846216436890601 0.10959436939984523729 0.12043545958371405791 -0.048025876682478325919 0.036310643372655861116;-1.2866375212612446433 -0.34112122173223730082 6.4715406956728971366 -1.7615348086439088782 0.30299272871980792443 -2.2901296610168122569 -1.058374120080002978 -3.5534387546456649432 1.8115354572214110718 0.1160384557348136253 3.262308353123310134 5.4478829398959662811 -5.8646838936991736446 -2.4399120086622185788 -3.6195744893148011911 -2.1423118188144618657 2.2117736898217583708 4.6471308650617491054 -2.7095900230132645703 7.204249688929354356 2.9129252488602692672 -8.9795185116939180148 1.8870973288449159888 0.050183209266173325891 0.47270348471407058755;6.3551672504618306192 1.1288708107831442184 3.7915853067858273917 2.645102787617973128 2.6731871858673752484 -0.42854763802039913534 -1.5650654211771826141 -1.9196402963544656473 -3.0039527661277030113 6.7499843000199080123 -0.60271374934926902345 -7.6726114682903459041 8.012745758713341715 -13.105909955545937962 -5.9602180960157946643 2.8369273072353844434 -7.4841613481890645332 -0.97735697147715838717 3.888174739510820821 1.6362904085638776408 2.7771581774339590964 -14.190000024901408437 1.0623129248588374374 -0.14918490160615230367 3.9227591760335198678;-0.21504941999491417048 -0.57073646585954174171 -1.6632665247036864109 2.4416256609835977898 -1.6177735396369672394 -2.0183475240264669992 0.52461784245975640051 1.2392830393946518974 2.2301821139616770928 -0.48528666093431949147 2.9257943961053851645 1.4924756599654693812 -0.2446487295223392644 3.8001150268941548127 1.3431766332966115218 0.66011669263382022343 -0.33542570255772902188 -3.077062763307103932 -0.90730818201116980593 -1.7854760716836930445 -0.29884234096891199028 6.3393889529337519306 -1.3520382892177518208 -0.34632154100860457202 -1.0792552877376251352;-5.8498094880358886272 -2.8498315612035507449 -12.262636474163745248 -1.7916196684652143656 1.4673014196322520242 -13.101334437373651554 1.6650272613766534668 11.670950971801890006 6.4248389412191224679 -0.58043679072120568652 -7.3516500080692983587 6.1832241681499446884 -5.3598936007203628051 2.0853781768559676024 -12.256538008978880683 -4.1267860911386451406 7.1381188354826425879 -15.525281113904215502 -1.0487819249423240286 -14.305079872434950161 -14.671538563422057422 17.629046709102119905 -6.6845548484664210065 7.7481138777272819951 -1.9449604288960042897;9.8444420543772821475 -1.0105310740788029378 -4.9543163303544526244 -8.2448520841357346711 -1.1529491126562230185 7.2366554703845267227 -2.684030368639048536 5.9288460949152197443 2.1645370604750104881 -0.098342397783222956775 3.4859781333407231507 -1.7360617298711968903 1.2205281061106452167 -6.8087920094825546968 -4.0982317615064660643 -7.0826537083472418388 3.9710523862715700893 -1.5994942078467988544 -0.64611500078612438269 -1.4119381795182954775 21.684138467744446643 -3.1700887042256424841 -17.470684468398573586 -0.14640997419613507868 -4.0874181497622723569;-1.04343627217294177 1.4273873414919742153 -2.6594406575099465151 11.111161014030882299 -4.0127329466877865727 6.057433516646004712 -6.6815334763950389174 5.0873387381914092487 1.5642610291955703072 2.7886996843104197019 1.5823296723693955901 1.025329883976784151 3.6941152219899371367 2.1253334103495964413 0.16216981696762791665 -6.808743629866819802 2.163878066983106585 -10.554920888890023889 8.439168705262948933 -5.9949039880250030166 0.28875046783084046265 3.5694011929451496812 1.6463769714838094593 -1.540524020464141719 -8.8358209629689241638;3.3164016289414814942 2.0663360362302682915 5.9716141058807723496 -4.905601549645482784 6.7759019753216920279 -3.0332529120428453062 -16.196848217277864279 -4.1203235078365851862 10.978488356976297879 -6.8410775735070092907 6.1504821378640368579 -18.170991690220379411 -1.6990256463351749439 -23.495528194247164322 -28.60057117472312882 -9.1866574281468516006 14.989762999107599128 7.6318549219865579047 -16.179355025745937979 22.281668843824476767 -11.284915292337322157 10.648144130566993937 1.1792833409124698907 13.049079342506232138 20.222784736941875394];

% Layer 3
b3 = -1.2747590311756487047;
LW3_2 = [0.20331104788890402846 0.13349295753961673561 -0.02993207336670105842 -0.021490420430252420159 0.12456651357673598213 -0.21798641253202041823 -0.048242635633351203805 2.2680291339623273039 -0.11734488039962226447 0.014139588338519446659 -0.13827929545753103735 0.020845649437438527191 0.029921207255601798419 0.024081117046248150249 -0.0094204918211866234962];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
