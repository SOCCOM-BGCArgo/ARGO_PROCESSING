function [Y,Xf,Af] = ESPER_tco2_1_Other_2(X,~,~)
%ESPER_TCO2_1_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:52.
% 
% [Y] = ESPER_tco2_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.5500386312186205;3.668903449889628;-1.4225955901083198;1.1189754203812654;0.32858571340164677;-3.3737663940338476;-0.34138071635494949;2.1840122934939004;-1.2436193742235928;0.4964932078810661;-3.6990941949680689;-1.4002793485875988;-0.21287079504853773;-1.1075395290749985;0.4712527221959803;1.0822055718097678;-1.6659918629032995;0.84839116028391326;0.056075882447454588;-3.6261658402744024];
IW1_1 = [0.54127182758463066 0.081093013977394809 -1.3705867866279102 0.28089408514039177 1.4968084560835868 1.3364758058699444 -0.38142735523537991 0.35397157679414604 0.13888599845168198;0.1377496575011154 -0.023867436901950381 2.2803569865960065 -0.86160060423528084 -0.26575263268550081 -0.16764317045032032 1.1852677636942859 0.072031477313933903 2.0738890501422178;0.044516428207902803 0.15932045363013109 0.054897097218406125 -0.077293068925620934 1.8674604714618028 -1.0098098812736913 0.3631954995303443 1.4282935093938798 -0.62072737650408971;-0.10570909276548518 0.11730814616551921 0.34569345167930954 0.25562844742163893 -0.33302097050496882 -0.22347793622883125 -0.0014484568104506242 -0.35062266628752825 0.37066115415779688;0.30511032574160779 0.32826594472057702 -0.8580049271982082 -0.37392098417895209 -0.066256809642387157 1.8873171100753423 2.1425785020954389 0.36913074859024059 -0.55674393886502849;0.30812459879724807 0.55470426444848964 -0.18122933408925765 0.10691062992195867 -2.4784360661894365 -3.0616053285572375 -2.5978192227584338 2.7620247190671834 0.61191689785790382;0.25011710514728114 0.031360856730842879 0.11644049036986719 0.24687247146270583 -0.65805386532135601 -0.1943978364340955 -0.94671999880570346 2.1658714574294873 0.55743137781716878;0.2943383558347793 -0.14029550642802485 -0.15283721021928681 0.88497016970892173 2.8806937424842558 0.87340013679960216 0.3182771035239334 -1.8384611719047015 0.47649126847000933;0.067530653015833927 -0.054988741285350556 0.75347729736354452 -0.10384220612849082 -0.44944668299880841 0.8909920227953263 0.02756866361361919 0.16039685124485281 -0.095810768786540726;-0.1933749384213504 -0.018828089989964724 0.33666392255760569 0.39106272073597848 0.43778377264405011 0.13876813842041133 0.53482608142402588 0.90358136305938319 -0.23863210855695677;-0.3098115489752537 -0.40030226779693995 2.6438880563719773 -1.630622647700416 0.58118795834225268 0.80722514054382344 0.5841678889138513 -1.6712001720555578 -0.69014779664756087;0.079804145939805241 -0.1142703357403126 -0.52847603597889681 -0.24328757178587279 0.39854966230532757 0.62173818985729967 -0.33103015267473207 -0.3150110706744787 -0.20675949312468372;0.94443689214474924 0.29571084909829076 3.2919382093971357 0.76783682474428427 2.523385351125929 0.37009910363752718 -0.41926509043996202 -0.63620661577043192 0.23182194062855646;0.071975935970812005 0.037614468780526641 -0.031827825311096715 -0.078636747317231068 -0.34256134540772082 -0.56458232871985237 -0.60314586348103227 -0.33761469023300905 0.18659334851832249;-0.21868326900790336 0.0094621731134224649 -0.64527615624061152 -0.22294523745591732 0.18261478455980332 0.60020183109788472 1.1117578185870445 -1.894064542361074 -0.27764234974684543;-0.02499968283921733 -0.099911475090964152 0.25758503398843735 0.052901209193237014 0.072909167988594828 1.0271042836471318 0.33726464112814397 -0.44415667053827046 -0.3961456488932259;-0.2467456082274232 -0.20841358922962769 0.13494713786582216 -0.19618400453638665 -0.55989360584499115 -0.66929253996811777 -0.67429309952406413 -0.68531597525427967 0.12656803602079195;0.51427583553464029 0.81110392953643251 -2.5617894409451583 -0.15635444557284867 0.24642211872616385 -0.49877949926055665 0.034478241875699041 0.66896259209979037 -1.0915440317671528;-0.007287841862547384 0.090144672446680785 0.16757861752863396 0.16219058392069907 0.14003182743822612 -0.36876328663388597 -0.29016316787580926 -0.3827342615360354 0.55100737417942625;-1.1129005407303019 0.19441124684051747 1.8889773628430808 -1.0849276911294268 -0.23909831711590085 1.52908582096917 0.41844573609850849 -1.2381292132699993 -1.2069355216265789];

% Layer 2
b2 = [-11.068695085353873;-2.8326341866614539;-9.8387997363851873;6.3523508819356671;2.2397202207065594;-9.6313128812344715;-0.50905128476642136;1.0954149770638277;0.19968500874020564;3.4474124448476196;2.3217164765552063;4.2795283068046084;-0.86817571458373455;-7.7001207600969428;0.59887646354236457;-0.11003918246346765;13.555822844368439;-0.48468650791365681;-0.61118210187587518;-1.5599709527103753];
LW2_1 = [0.60699108095673193 -2.5178691462736462 2.7955594468180975 3.2314008300855921 -1.615100097708728 -1.3833047424613543 -0.93988743302430955 1.1402005634203194 2.8637735486462761 -5.0293792737822978 3.1117486993588965 -1.2491770413215222 -0.96564038276748243 -6.6946026898451345 -0.17111238105725482 0.67310601123045888 -3.3745548782614248 2.8811774528516274 -7.3907277495934762 -0.58596999730063848;1.9670869994670461 -6.5201977611331303 1.4031918863071902 -3.3267936078907288 1.873044347658956 2.069439530067914 -2.6985236396922998 -1.4777273120798466 -0.80371497109629997 -1.2574723276988211 0.34016279017513823 -6.4225684539260364 2.0440444454921045 1.5037276064139335 -1.3177508076684636 -2.9962983958655287 1.0107432976700317 8.9009538696859387 2.347436459941235 -1.7788177228245019;1.7242490893381552 -3.9467449644958252 2.5428046121740757 5.2672627223603632 -0.17926077457192982 6.3213101904329401 -2.6117584359491612 -0.51525831641857389 -11.356542930916021 -5.6438930025508061 0.72779353087763055 -3.3234018156227192 0.95126795801529251 -5.8984117529692446 -2.8961052109173449 2.9974817217727803 -1.5548365401083102 -0.23718862300577712 -2.2539355700505248 1.4002256110406934;-6.2738622527610017 -1.6407356476241199 1.8086064798794268 1.2492551138683587 -3.4384978274099494 6.8121669122088075 -0.88670952143948567 0.63130920051852912 8.6307353953481147 -0.52819165120220901 0.29813152626342337 7.8201910705285433 -0.94285790468694741 -3.9468245436090159 -1.0440871362280377 6.6406356539724944 -5.24468481755033 1.2820826464642219 0.8676953875129727 1.0028639316482126;3.0490386883272476 -0.93290305530349427 -0.99521657379060124 1.4509429905032378 1.0057614536756398 0.0053438194385878827 0.12476618737121958 0.015199279156987771 -0.69960456577948638 -1.5259200037249698 -0.035806547989574763 -1.9853986136792281 0.42986835034088255 2.9131725185418231 0.59909023248950133 -2.5590358038665557 -4.449881594406385 -0.51506358195715674 -1.8713463265430814 -0.40607018189543109;1.7605806997305888 0.172264415518883 -0.56980708615268016 3.4510540129297076 -0.55028037412891539 0.58526185002790809 7.6984788545307401 2.2341765252816939 2.0999764275956272 -0.90414530720576092 1.0945260109712736 -10.745533499895737 0.43970152455729078 4.7041801086957067 6.4573941293374419 5.3195054322117663 -2.19164708509651 0.080118663787915587 -2.6324844073163587 -2.3133725592594718;0.91212457464532593 1.1978738626938745 1.0032311392366271 3.6707762885869535 0.27358618068529611 2.7581007772411938 -0.92894448751714531 0.0026061404384102437 2.349115471113735 -1.388263793853268 1.841183318362474 0.9486748214013343 -0.14972149161022075 3.7179326595481457 -0.14018821317072716 2.9854693186449164 -2.2114292168162364 1.2998049257969411 0.037400353222643297 -1.9656980909216737;1.0704612800459692 2.1804887815160878 2.3175969239223466 -2.4066807206853902 -2.1752542899072136 4.9559579013836341 0.21459486395243921 0.58989406770908448 -1.5311431310250119 -4.7182316032010414 -0.42882668992069384 -3.5927156624752676 -0.60768690511126044 3.2283695480482395 -1.0237013729660533 4.0466852739615113 -5.1288640957107186 0.98073491299095406 1.1535442033696202 0.42697641428213878;-0.11273925437383284 -0.78432023824244379 -0.07299102551152245 1.8002274863623278 0.56261026451595719 2.4184123337091892 0.34143487631185104 -0.33851772123650531 -3.786821377859483 0.085010247092398489 -0.76103660232360926 0.010688744171579161 0.67557620399495755 -3.8650852096251054 -0.026496206315020882 -0.62670083489356676 1.5055596989480218 -1.6786317339131729 0.38742115806766492 1.3375261787975059;1.8700119355389462 -2.8100098743523385 -0.067079466910739488 2.2885728913511194 0.10271605363390145 -0.81698704828221436 -0.36086738835591753 0.045195955594823707 -0.43853522999953193 0.3791935547564908 0.50476402699118106 -1.6652023736624471 0.12891513132851565 4.0001925231060396 0.32393836394683179 -0.60132244557904446 -0.74778369856220783 0.11328824656305758 -2.0090260246241338 -0.40124797073406115;0.64146390702765477 -1.3567486202733694 0.27346512355925451 -4.2504924324477384 -0.021166923656448667 -3.1373937970807506 1.8529497240931172 -0.80807040849941214 0.63701581721595935 0.96325017451404138 -2.2992978966095752 -1.2043210012160366 -0.0030399784619850609 2.3001173880629682 2.7176381785859007 1.1151780355369276 -1.197840690725245 -0.051566078155486278 4.3121707671131224 2.0733931919192647;-0.47123112839666631 -0.93557216921012809 -1.1254689441198873 -1.8082287892196056 0.81454133957371977 -1.1071632466723054 -0.45176041536815359 -0.11410317648058203 -0.87583126775523523 -0.86501580069219508 1.972441487617596 -2.9983207807602121 0.21787672280352618 4.6785643216198798 -0.52523179583746793 -0.39588316881326718 -0.87786568156029277 -0.0074036224021246742 2.0221137660870165 -0.78195061968386337;-1.842127273144446 0.261665913189843 -0.13630662598153243 -4.1732010004590414 -0.52674441750592949 -0.83816641723972252 -0.54168214686236038 -0.4211740368296662 -3.3859737373066126 -0.094955666576022418 -1.5810556607886845 1.4882130849561597 -0.1149709658620328 1.7527924835489324 -0.22376623056628792 -0.87863387963414441 -1.5179064640074884 -0.0090932537410222409 -0.31764612083141136 1.2751560723474342;-1.6518701485380209 0.52306184872456496 -3.2145967228247381 -0.78555069012768286 0.43454659723291067 -0.58166602618232732 -4.1223726040079889 -1.5913989950577174 -0.058498745813705073 -2.8860908112340171 -1.8853755925856042 -2.8507941604031348 0.16062790349570838 -4.8337932658822007 -5.0346876514295991 -2.9164226347922231 -1.8375853127960571 0.32816956696456323 -1.7025359723442577 1.1895118596306331;-1.7022428740751701 1.5364514451475331 -0.50066110703049072 -0.4260559531549713 0.37548681310805587 -1.1167075189401676 -0.74178559528724308 -0.064470426593390084 -1.6243522372360184 1.18594627823399 -1.7057715724133149 4.374871397112166 0.14085994320861314 -1.3430780650521665 -1.6233031425536533 -2.3735041421387737 2.6674815020346161 -0.20788483339111932 -0.43824110743088096 0.72038147406536368;1.0226513760459226 0.062008928565405498 0.78202844452792708 0.063298285299377893 -0.10211205760995928 3.2938405479810222 0.10471708385929802 0.72526027346455479 -0.80189917841539859 -2.0621402372874402 0.49401345056948981 -2.8136007671367951 0.0073163808869289798 -3.2870555100603109 -0.59504151132115291 2.0858756762266188 -0.1003829505193649 0.26257784257893574 1.1323651842868012 -0.21964224856225123;3.9298543468165508 -6.6895407321939233 -0.0052278350648316367 -5.7250554122967472 -0.32829332716325593 2.1683909863399324 -4.4885894792343315 1.479060887474803 8.7206968094669328 -1.6737378600654942 -1.8144336690737524 -10.563087728932166 -1.4285539357236849 0.26687440228375797 -0.85033742868155127 -1.2015531901416971 0.8650832295018327 0.13858944040128318 3.7768775033207054 1.7306991698698717;1.6318225909093891 -1.4734015263758033 0.36500390247667069 1.3451506961112276 -0.28869611640980453 1.1877517034672078 0.69893469356991544 0.13744707647729804 1.3353944230090222 -1.0037511692470751 1.6423096504043491 -3.6141009846275303 -0.028980891117052179 1.43173011920507 1.4165784720301189 1.9685073380233151 -2.2360847331555411 0.21919766963431386 -0.32523250762048878 -0.7742640133017028;0.14561433516848321 -0.85009248787348279 -0.38940467276393109 1.0080570845597097 -0.1352646869428353 0.17456793174802482 -1.264107066784639 0.16080446053562469 -0.53609214182779841 -0.49082644285393218 0.90983118400414587 -0.49788891645859057 -0.014567408459789627 -2.2159092164376575 -1.317079710434542 -1.6528407581940383 0.89581648547810877 0.1863092789800454 -2.0405013282425282 -0.81159049916831771;1.3916024961133631 4.9023261176438631 -4.1609436779579898 -2.4501595034472254 -1.548599052233395 -6.9147105676734091 -1.435749732238637 -1.367545943908856 -5.6854303695489472 3.874627224634831 -4.3526535149907541 -0.45679488185722406 -1.8507696525889583 -2.2300595171810502 -2.2077040557884104 -0.91374673898253922 2.4939545606719613 -10.108533526679292 -2.1947552182814865 2.6406335356632535];

% Layer 3
b3 = -0.21955904173203722;
LW3_2 = [-0.10777694264132764 -0.16874686861899157 0.071115648049351526 -0.018763962593793777 0.19748686465177243 0.037760433934494367 0.20498912992899665 -0.088097461150035902 0.17648238984541387 -0.37963474602134606 0.25534252708117217 -0.32615623794369264 -0.19620481469885895 -0.051065511258414027 -1.9340923348735031 0.68677274131850019 -0.037983187724671165 -2.3555800604792929 0.79023549872494847 -0.09956414636485228];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
