function [Y,Xf,Af] = ESPER_silicate_1_Other_4(X,~,~)
%ESPER_SILICATE_1_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_1_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.9621045269154313573;-0.14865709016090805639;2.0330322523991859462;8.3911205866134288556;-0.9739292368249247156;0.37989862060946721911;-0.098133457510702251647;4.3411238712768724923;2.1966972627376857297;2.2852839616657680821;-0.8059369383643811835;0.35496105288555968027;0.3799620113549458944;-4.0719975672782657838;-9.2311070397753969274;4.1515349575798952131;6.7206817397567011341;1.073581487866475781;-0.1786237902419411383;2.6845232664013227719;1.8501792892731323548;-4.6696984869936164486;2.0784078352087971275;-0.54717965703727355908;3.2462439592070539973;14.793848919420593546;-0.39479829666362598051;0.21178009442524017847;-0.062435878222741429677;-6.4487970431765813117];
IW1_1 = [-1.1246212749776864914 0.14716558609890026399 1.5304094302086546087 -1.0649359468992245503 -10.392282509142797053 0.64892308849575131013 0.047837846138061010381 -3.5320814829176616634 -0.24421170057118263275;0.1426977970644627558 -0.056611122555290639691 1.1748783710924843859 0.66962511418529857554 5.7282744177460012125 -0.95808239365195213555 -0.085289959822876557083 1.3255247596315995473 -0.0071752576045117366643;0.033198653664440566646 0.029882363852921471625 -0.066700291809811282362 0.88116821631321495811 -2.8747103033025411811 0.059560038214048503791 0.22725141660407105482 -1.2946619824401770504 0.023796694993717122657;-5.7786799637507311189 3.6944071126576343289 4.0187807964188690946 0.13124560059178369542 -0.17705937832558035772 1.1567764236778126374 -0.27389368351274978597 -0.17933471055105335012 2.3106711244970092878;0.32770374660731405037 0.079997647877526834037 -1.8505436632617549009 -3.4862313947605496622 -4.5999551310439983354 5.388756873988102214 0.34914299430981948769 -2.5387533321202226944 1.6772332830607501464;-0.58161749987844468812 -0.48970688805673684429 -0.54837708060924328368 -0.55084677666555126319 -4.1353856523251728561 1.684466848774429204 -0.61159995999958549628 -1.1283737351901645951 -0.21065851311400213275;-2.3672748794782179083 -0.79716631285761707648 3.0021427573209593653 0.21581584701379116775 -2.9390064390456398513 0.17531443695003501304 1.6339638583129731941 -1.3864551594519511912 -0.67969196347793536805;-2.2227638647659535565 -1.1114986098940249359 1.6658476685881324908 2.5607025147920987607 4.5609471959317735568 1.030417009288925545 2.7135285789029830461 1.5463248434844039103 -0.052168313833748189423;0.13522599440917321134 0.0089473486199246211187 -0.29047969067152479283 0.67512160575923640948 -0.9030400710650386964 0.10716143262519821355 0.046592622437300230953 -1.6287307344663972675 0.07274745989628868259;-0.074498291033328056798 -0.32060372302533379774 -1.6231238015838564959 1.4449246537899649301 2.4662438166912385995 1.0344943830983635014 -0.34940347399529314565 1.3240055426280026296 0.50038906014626571839;0.11879406204360778987 -0.035095343302404713448 0.87906670579433376922 -0.77372040597817981489 3.9513992341836869926 -2.4927734108592618512 0.43123019699654907555 2.1571027917321901057 -1.0688839617173340191;-0.93023725440028692812 -0.40496366773238012815 0.17141344561841762029 0.083077618748257753278 -2.4197987605332591521 0.21865297072428907521 0.55231826348947210548 -0.83867517177503658754 0.64104569303007075121;-1.8649106284590317717 1.1023986082061079106 1.4866398134999629921 -0.91295051618588896059 -2.4790272073814003662 3.423588104555658429 -0.21754003638694030531 1.0352956095351035781 1.9787231988871261112;0.55799698379963214023 -0.35302789921037325271 -0.67892715272119341652 -2.1791156594519613954 1.2099045717589573812 -1.8895043594144120824 -0.91495223981333506647 0.33240050349653327277 -0.24346697586731255725;-2.1184211742474436946 4.4988078543787741737 -3.9648764171334591744 -1.8744505826643662605 -6.1842915393841222382 0.80175019458005969408 -1.9703714266026233215 3.344730142853519439 2.1119564640881671735;1.2781824522009730405 -1.6879931852726111075 -0.98360728787850870702 3.9503082839888152833 8.3264884754193939642 -3.2970393531533690457 -0.56520846114523437542 2.1956498987350534513 -1.8536714944340104694;-0.072084617286485769272 -0.07577199219300473354 0.51069625144652230908 0.25145595832266592895 -10.828700178145655997 6.4472024146441953008 0.26838762808251809266 -1.0643363943927646176 -0.21680742028214342043;-0.17711896226986145741 0.25496163459366838477 0.19680582008307728747 0.19414083855343297613 -7.9983910637960518031 0.79022940314098133463 0.22833117317639092803 -1.1563772675235735043 -0.36849241780265595825;-0.50866279915301004788 0.21188393078665038183 -0.34501958601826343553 0.18577715244000103656 -1.5199498431972853218 -0.38494932432115064325 0.35787029885183962996 -0.11966048537623627523 -0.22918551271452561324;-0.096104804549597744323 0.070518065705249294295 0.15423071956637277036 -0.10012998507448381269 -2.0432739168257718632 2.3118117953109664775 -0.018088680652376128155 -0.72626370387226590886 -0.19875697367002342908;0.16164222613751316748 0.01450339758333280861 -0.31860074683908906623 0.23611065821520524355 -0.28887913997481129424 0.31795236351735911562 -0.1086049543108811577 -1.401691519006013964 0.074224123863718460825;-1.3608951226277321567 1.1697625361590433535 3.2666584292044902327 -0.091742846537388816897 3.2989882366809237801 -0.82340362341418393832 0.40748538884441415364 0.43901034799231114514 -1.0867636135876113102;0.0071627387925389494894 -2.233335266116547313 -0.059156817728372286525 1.0929415595423412899 5.272313719277427424 2.3064017003702419473 -0.3202902053837602403 1.124259212466089064 0.94315368821210465722;-0.47576163207937938182 -0.010772502184602445949 -1.5884829378205151951 -0.39134780053070561401 2.206102846256135841 -0.094909457060529792138 -0.42527790109127178164 0.10671447436283484911 -0.43968105917451444364;-0.1948585840514770462 -0.26248319344501536143 -0.92995019133111611609 0.60023521818094582869 -1.4814342539054214942 2.1777879116785312519 0.65255012026804681824 -0.42307393933668907549 0.50825958741892629522;-0.87779419372746181338 0.25530274613300818487 12.16038008300153983 1.6334161539124036899 0.35298233773635051547 3.1851709758643669268 0.11833858710951651594 1.4515660149339710827 0.018604806583030382428;-0.099017950265317400405 0.66816412120452961521 -1.0156349432056492876 0.38204245137809178523 4.1368451400913661686 -0.92684190848590319867 0.44053325571051493714 0.54005140353715586077 -0.51778646908640679758;0.62612984753698530671 -0.26261117126481742234 0.93498519570576543725 -0.42274621605989093354 0.88436166595195653262 0.57945595984765874142 -0.177082790316144989 -0.045395426212955995726 0.32693545684647357108;-0.010027908401498574278 0.167212708330451848 -0.20085129305033330716 -0.091814603514501991199 1.7110142007623991844 -0.62318831573164579218 0.11720551966384140652 0.35187017000532350153 0.014464825735263604073;-0.68378987276356151259 0.12109942905928386403 -1.5444584405907895164 0.1941956902743760538 1.5634040268196374157 -5.4142435040071514862 -0.11742534061962214831 -1.5620450138508008564 -0.15955022627991277684];

% Layer 2
b2 = [-2.0066753340045431209;-0.3186256318418282385;-6.3138124121786010079;16.843384048701331324;0.93304119568215360125;-5.1966897094696884452;-7.3265397528729270249;-8.310988341154244452;-1.300666201656082599;-3.5345735726908769081];
LW2_1 = [-0.24115582317825884351 -0.43020412505017424643 6.2275978622459096101 -0.56356118553071221644 -0.064942540240299759247 -0.087072529245959554012 -0.12911201663338961465 0.018316317843031681284 -3.5141618730437409468 0.10831151337707312088 0.84601746975058733646 0.35190274036998631102 -0.089281402779658528002 2.2510438458736246048 -0.71218626016832720094 -0.28811644942314712514 -2.4351713036406836821 -1.7678713755555874876 -3.3641870277533576505 3.4925035494013147996 -1.5905764669741284667 -0.98232920072967266911 0.017978610080486779471 1.5201914794981747914 4.2983537759475600737 0.87764781469070429765 2.0804928998619289793 -1.1900526397637258835 -4.2259744567823362971 -0.60572263850755636572;1.0314857002504145278 2.6948293026446865639 4.0281981158314534852 0.24379710526790451808 -0.14386283241512395903 -0.73804126700180494591 -0.050064707788659339183 0.3933550398401045034 -11.18494556166527687 -1.5174924290392850512 0.45667932567677643751 -0.55234487356920280998 -0.043551247775633787629 0.33275388502814795544 0.36648521276179907291 -1.0465919412262840726 3.4908643961294467672 0.46456514171052687434 0.3948199763467689638 -0.53322619679814553528 10.050071029561678415 -2.149846075652789068 0.64577793674389283307 1.5358532570949956497 -3.2679246996504742739 2.3378271499787781629 2.1507737861761833109 1.2892458381385598631 -3.5255848174264530215 1.3369495603718930532;-0.71407883275533901024 0.37497378834650263446 5.6027282555979143197 -0.017629791561264391425 -0.37394213759794792118 0.64368860683088091612 -0.044377497282505264098 -0.12630095817485031962 -4.728562185772616111 0.038898299959273317794 -0.28745378261890641713 0.36306972376865881413 0.091072998113133948883 0.10757147998211040452 -0.17599535388313380935 0.29716249521127274802 0.7136980343462927534 -0.73782517053656238026 3.2351106425450337767 2.7734923490147944669 3.6027539452321457603 -0.33629434206717928602 0.031273322338708768597 -0.0005403731689247437929 -2.5963930084920479047 -0.1581171865282335609 -0.18760709666075175983 2.0626634487005719443 3.1408842459031016681 -1.4406010087718157386;0.65861452104869977475 -1.7409719249473858405 -12.935913903649584711 -0.17385703634149360375 0.12247530740861660437 -0.026180959464597506475 -0.79299074797902324718 0.18296579499466955609 11.574106158176869386 1.8915869435518120056 0.98749840624466511674 -1.5893563337053542295 -0.065360933539745397214 -0.78236402719675657291 -0.75091131359894380815 -1.039517479143342582 0.61909080831834906178 0.37494696946970851315 4.5258399199644472333 -5.2565821737207780728 -9.0609527580849302808 -0.55238649085646684966 -0.17752432838804119153 -1.2554806748957334506 -2.8809634667762025195 -0.85439096302771866398 0.73157275867280768811 1.0936178548538286748 -12.786628562303921086 0.39547695709881702797;-1.1212430843076968134 -1.8738398554960382647 2.5943865534045746912 -0.85742144446151213888 -0.61655557846584274628 -0.20784392392783973547 0.31244970598263438477 0.21380006369410070599 -1.2614280937276212136 -0.038512453148554094684 -0.40352975066717905461 -0.010691751923076590197 -0.08930031243499042537 -1.4780692727900512917 -0.18925872091733464408 -0.19028478496361117545 -1.9520875382025890676 -1.1791113617143407222 0.013573118470094118482 0.63461949055747934878 -1.4192488687355515609 -0.44349791520436016024 0.25594738089775048717 -0.73969687412652196379 0.250926653869258387 -2.7182242446010609349 -0.51046147773561356686 0.15174634629237795935 2.8083999730135280615 -2.3873358163892506312;-1.3966901918664067495 0.98431893876175680091 2.9329856014911190876 1.9011794367943861683 -0.28618001190159730873 -0.56957492070398596518 1.9661611367914715309 0.65806407116393117462 -3.4794554913059925205 0.31257996457235087684 0.79767952420947974002 2.1907247262012954359 -0.38391052068545955533 -0.62698952085416126412 -0.33574309410549874055 0.76156505609506863763 1.6981295449434983258 0.64179494470311271304 1.578404268505816832 3.4349227356571145897 3.92729663716788302 -2.8072319406061865266 -0.93232746685521994401 3.660475477625904972 -4.9984304018527847546 0.67829771768359958806 -0.85166095258287466407 3.107829052841534434 -1.8299453916469297088 0.76872924662363673054;-1.4011334328255533599 1.2105964259337751443 3.5275731980556050971 1.8878478293935536669 -0.32028460291706539742 -0.20438373090589243009 1.9171545166383126002 0.61604020920285196272 0.21381929866124199657 0.46126026568431943709 1.1089378265754448183 2.1990757237424323201 -0.38514270275473333482 -0.56527194518111645305 -0.28879424917261875549 0.68986473256755631578 -0.73737405134157441022 0.85385240192398215164 1.6391630137024857383 4.9843631841482523015 -1.7968002738850941125 -3.5757976399660393874 -0.79883031998372133753 3.4751563836963335064 -1.1065033449997743187 -0.60879418587789480011 -0.4069551447720141657 3.277651198276044564 -2.0832626019433901909 -0.54365371747053048423;-0.11406743078790371193 0.61720645705604981757 -3.1964089572365765868 0.098972354761464195749 0.40960189861136259148 -0.07893017977373537053 -0.31238087972730482766 -0.46520858934594444545 9.6261551822573458992 0.47426424309278542024 0.26094597238727451627 1.1730593923712715476 0.16719762515442576634 -0.012921174843059025916 -0.97107399512274805709 0.0044658019340765480257 -0.77553663355131841062 1.1820801973977963506 2.2636236679336283473 -1.1346259538128364852 -6.069314134492751478 -1.7131383586657900064 -0.29327231497079425671 -0.31564888715168232247 2.4436395232470453642 0.08728380335293664527 -0.7713457950853013223 2.6023693151086337849 2.9795910819531132852 -2.6859608336560421016;-0.40507819246416287839 0.21417227919447309747 5.8789827996509123054 0.54986458467857324273 -0.4540208061463371636 -0.27100244411986318394 -0.37993152889652243021 0.069706422492421912795 -9.1952370299210794968 0.76861938540004970388 -0.32138219040488175127 -1.18828550189377391 0.41200674510519530447 0.92488864474144194538 0.99378796113221146147 0.55983870852880368574 0.69372775330331704069 0.37932655914060470215 7.7194832922123266528 -2.9209444649386542281 9.6231312830366952937 0.86589698016824501181 0.029927750628650526959 1.0658952576687352742 0.18251362571281831704 -3.1707125347257081316 -1.3184241330480257481 4.5933325975333874069 2.4205288283596053667 -1.4024780640872664961;-0.80201414010879579219 0.46759649205005088257 3.3556856941904098512 -0.1279511420254917653 -0.39630360981413464971 0.80434331051112029076 -0.065541843752112263766 -0.1029548699640488868 -0.76720354865156836777 -0.10964740390877901477 -0.42740141239015322361 0.54414732919949748702 0.0164162788623180185 -0.09700964801396877446 -0.27069417598137424097 0.32973351016825774851 -0.3099818417403896742 -0.28708144448991890219 3.0510265557176947659 2.3238062421636627164 0.334961605500435744 -0.60485294733515182486 0.0098562818361160112191 0.042915924178021369606 -3.2664553598536545387 -0.2524691271319053909 -0.12187988692457402129 2.0566038519700176046 3.361133370994714209 -1.4888730719730813856];

% Layer 3
b3 = -0.63951636473651229942;
LW3_2 = [-0.14164243304998785922 0.10188225623834691602 -1.5183798723485788518 -0.18190093092932535512 0.11055811563756155758 -0.31992290689875285681 0.31658539415127723293 0.11290891059784741168 0.18247471158345851538 1.242196296837124958];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
