function [Y,Xf,Af] = ESPER_tco2_10_Other_2(X,~,~)
%ESPER_TCO2_10_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:57.
% 
% [Y] = ESPER_tco2_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.1319987415828381;1.5564405126376177;-1.7201362147227606;0.091743970003494574;-0.19665353831691143;-0.016168193616822386;0.0087260321533757616;-0.068999231786982571;-0.4077104983578414;-0.84066139539068496;-0.29477654306849288;0.43304924999307104;0.27473346544591404;0.94909351449150847;2.6551660458718347;-0.65936857165408302;-0.67897151780486364;4.8807505493313954;-1.1908492040885594;3.7852302064255521];
IW1_1 = [1.0123160842271539 1.920319629854192 -0.97062665345373056 -1.0760655672699297 0.29646517391969962 -1.3638857324774791 -2.1991811125860874;-0.7261530509912002 -0.59906339510580864 0.41847199281184411 -0.19944089986519811 -1.272675118896279 0.61080821036664634 0.30072618248103461;1.0227174772366014 0.85748102012097094 1.7919182355892822 -0.73142987423715189 0.53740786133060781 1.5452550600445623 -0.87641434677547003;-0.20521026994002434 0.091116018193379708 0.21318213961568094 0.097684720707967632 1.5756446907612323 0.28525752260712284 0.29326344721548325;-0.16050651365680954 -0.63838799917907596 -0.8502537071826064 0.15162673387736708 1.6413778824342014 0.84892998951713505 0.29089949950589483;0.37536762136544954 0.13655029504650562 0.12548311578578195 -0.067318697104695346 -2.8994214428985976 -0.068251228761489494 -0.27529264890113214;1.4217805026941934 0.66084042180051983 0.96149877772859815 0.14340119425860684 -0.54462079522236939 0.1556114927198714 0.99249219684647383;-0.47059412362372788 -0.23596247909137322 1.6586233365347323 -1.4900910962419722 1.3950684890752405 -1.9106461025570078 4.1932243652371533;-0.10597512719837976 0.15257343076277824 0.93341359608053609 0.34438107333258355 1.9461610363726869 -0.87180172291435809 -0.4407065726441724;-0.20800025914441014 -0.20190652447467844 3.9719025971541568 0.42895183363239181 -0.52138567121950496 0.11835391309198531 1.0800402389155699;-0.1683498494033594 -0.28043418600300796 1.7832896708075219 0.41222160017836978 0.67525947826142707 -0.074652402852592101 -0.27649751884285123;-0.64523623194123436 0.26825753082232412 0.977678094652353 -0.29411079196010792 -1.2284624953746341 0.31001246599275706 -0.62445833937541573;1.4094349378042399 0.69419298023642984 0.86388581789502683 0.06411097749581661 -1.0629060002703496 -0.064103228212586794 0.80748785011518454;1.4732385522004672 1.7685053873489236 -0.25723375679231997 -0.5187524851891685 1.6174563920454146 -0.52763823192928005 0.4751979512518113;0.92633408931214289 -0.0071985231680164333 2.364537970508624 -0.54025069360006495 -1.896965200562273 -0.67919242134099389 -0.65015883566228261;-0.1075939049401388 -0.87539263471504303 -0.033564228185010078 -0.095568863907653304 -1.6530150296502544 -0.47494305536797632 0.052605346800146398;-0.30538203306728795 -0.20457661295377477 2.469804805261635 0.17419290087242317 -0.7999808536137476 0.25494547942968543 1.6407899780297621;0.35962347338587503 0.18236923454361723 -0.8622954608045944 2.9633545309450429 -0.57581635191683411 1.4643066509590121 -0.16817884273521747;-0.37366575419658588 0.3282248824719593 -1.535659352023617 0.13045681334718651 1.3182520133360385 -0.55331460099575913 -0.053179597568862591;0.31367611005530477 0.88571182033580542 -2.0195704166188837 3.0227640930328143 -0.63115431701862734 0.82488508585822418 0.79759047810175632];

% Layer 2
b2 = [4.6261264492363727;0.61105944780349197;1.2983825295618878;-1.3734029116716384;-0.81587681123020372;-0.014010327680726055;1.3555728368850877;-0.93167523295443766;0.27714302731820672;-0.56664497808398839;-0.98147129492109397;-0.62094365512694327;-1.8629987650764579;-0.16200972188915344;0.55063471391493513;0.14504031094123024;1.3340048584801185;-0.12848531171457159;0.079514904747986545;-3.1791838910771641];
LW2_1 = [-2.209333791144827 -2.1903195778295337 1.9686401107319109 -4.8895718623952051 1.1116678825532271 -3.0032047609425701 5.4399444818337646 1.1103450817630853 1.6020786669434002 -0.58090612782527196 7.8389125291547757 2.7965877479090295 -1.9314904419856072 3.1504107376113129 -2.5105422750369057 2.9130762805397992 -2.3768430446223587 5.3141554321057596 1.5976921717854018 5.0822870452363365;-1.0806734219567975 -0.58578960489129694 -0.045615333238954663 -2.1514280238158605 -0.33832076194013216 0.16711857451552478 2.4270393375674315 -0.80541328658991163 -0.54485368722085303 -0.90292697882206208 0.513920767663541 -1.3700310066688761 -2.0975710800717287 -0.23540629608197455 0.47538403126586204 -0.95532586701714906 1.4325582154210459 0.48329716328069633 0.68121873788321485 0.15465282541802158;-1.3802379764890957 -1.7758796037238247 -0.03670643656078864 0.48923359909724434 -0.52813418081204933 0.067116679875814239 3.1303951959746636 0.4455001196835377 -0.97070071086986676 0.011337306279459929 -1.0726301899468511 0.39360886964531316 -3.2921412453645411 -0.32082190556792539 0.85972206399940942 -1.2926889264557928 -0.57213966189600129 -0.84450697630738591 0.8196082042970293 -1.0223648440316593;-0.39967921977546922 -4.8610701348290331 -0.28547783125077553 -8.7213845884125014 3.906477746235872 -2.4552066310424698 -0.98836693226640371 -4.3010950599779223 -1.452828386819137 -6.3640281325932362 3.5302361067354058 2.4423274270603472 -1.4261321061789021 1.3624282248256956 3.5818287243783273 -1.7255551150439303 7.2649795512294881 -7.9680465880210667 -0.19567137368596357 -1.3880994571320588;0.1310171681941327 -0.31061950795873616 -0.047792633800464696 0.81126367744685934 0.22469579769180961 0.8713058973534118 0.5857145997358949 -0.35982419494164691 0.22479214019234606 -0.79287005681095002 -0.037285835686030139 0.066396622340827299 -0.4887796725233497 0.054478523138105209 0.40052553160567267 0.30972591935343319 1.2382728652242949 0.53214244754474083 0.00099185553003345098 0.55909748839309614;0.097034807181046998 0.51993600787874594 -0.031478324549082552 -0.2629876232050451 0.22848217376636107 -0.56730057285004787 -0.19990798225090664 0.038772108709896738 0.42939701960892729 -0.92135109180918617 -0.65251434680204701 0.15102262764243288 0.44968171860641976 -0.082694041133482526 -0.38518888112923033 -0.080254683942697913 1.0419917328596295 -0.049676514432208461 -0.24615222518968691 -0.30901646541361089;-0.48743164282098489 -0.61241041893514625 -0.17066784242303432 -1.0618315080146612 0.34191921973158218 0.808621199606542 2.5781159820271866 -0.72370110441530133 -0.4030677011905674 -0.49381645006304625 0.32701829983711894 -1.1773934330020746 -2.2088967126454646 0.073770019805910678 0.22261666828451135 -0.19611066145052203 0.93643678310564571 -0.10839593578897892 0.053096701417310023 0.44212937331252555;0.45508544765107561 2.4496268647292214 -0.98152276830222907 -0.0535648305292541 -0.33035235572376459 0.016303982386754259 -2.3933564541149677 -0.5505521414317528 -0.78671314194677733 -2.4823622249998567 2.2510122530609173 -0.2362868557599235 2.1690707487333403 0.047251982540217723 -0.8388421136598998 0.87121762003920344 2.4794271325709514 0.23968674836392528 0.91192291155837912 -0.7997333508713701;-1.5002793919266919 -1.5782957078493367 -0.45131322058049106 -1.0013770187563891 0.3517968645349272 0.30169578932309599 2.9030678221585244 -0.24316120602445554 -0.17581249469440516 -0.89523181055975387 -0.74321445403318032 1.3093477765207147 -2.9097093075828693 0.50255758720800436 -1.0552441442810472 0.83448304896563041 1.3593281360459577 1.7364148891403386 0.57098269924347245 -0.28746372046122043;0.49642597457245363 1.869285686707294 0.18335366415019771 -0.2554874088598037 -0.65013675769394808 -0.22242295063687909 1.3238123750269688 -0.17710462699228369 0.37316041305445569 -1.3109474038145468 -0.90153871719517753 0.11276071045986058 -1.1510651968113217 -0.67867896112147819 0.38856568981746281 0.091547089191796382 2.0644550590383184 0.17901374786588298 1.0881916492118084 0.53636664272793499;-1.7471561475672845 -1.9956040400318702 -0.07211193072592105 1.0810961469019054 0.28005352039123682 -0.44770406707682453 0.31169870873103084 0.97662032378191177 -1.6100657210632965 2.6586791875829023 -1.4543253995791485 1.8242424774083208 0.42291439679317228 0.043444665322704169 -3.5212192032644389 0.096627187939910653 -4.4582873546960782 6.2455587245736837 0.30992034007775027 -3.2578833430521099;-0.99219807260530746 -1.3095165628176406 -0.81500194000559456 2.3741158124790229 2.2201395208065122 2.6941665363222853 -1.2617563215858345 0.29003034167933195 1.2315717336339917 0.60699543667096412 -1.3673097162699894 -0.070387582612242372 2.2468898048121417 0.60436964074322796 0.75526358700749419 0.91396627517311824 -1.0263046996495673 -0.095655347293800763 0.19941739872162853 0.14692690965879684;-1.5014495377626798 1.6940067615876271 0.27325568013598017 -1.1525046749926975 -0.60615403722357508 1.624144827491524 -1.2096471960486161 -0.35517168980980118 -0.21285817025701362 -0.70870968114223221 1.3665186557549482 -1.3835796456686273 1.2580898305791255 -0.44407056122594463 0.95931484553279511 0.79200493240166303 0.34426218217769289 1.8403864660664619 3.1235751742398357 1.3902749189009596;0.58794021550623388 0.42723447355099642 -0.038589890531029895 1.4244679813948735 0.47097234775778157 1.0488734694478001 -0.97903606701110124 -0.34149690639492514 0.57605154119207269 -0.86336198400593811 -0.024118722630002285 -0.55796316469198559 1.3086787340777239 0.23117794803975672 0.17806031319483975 0.593405623021801 1.2750569453791045 -0.036947425181042791 -0.41181095779243571 0.19353325473397059;-0.66175588844325373 -1.5047654226251612 -0.51049436767533185 -3.8774889311146166 -0.17393756407241834 -2.1779772542865015 0.96279492636775554 -0.27809023288809576 -0.81065238672090056 -0.30451033598588351 -2.1636727483624019 0.68000569772443109 -4.1706125923666866 1.4204224166573218 -0.11713300244765955 -3.0511681662127486 1.8213142076025499 -2.4498091664098296 -2.8352576201705233 0.67314375756663092;0.094707399499292161 1.8964574278256039 0.59191382083404631 0.53259685232140774 -0.75337341172716277 0.57876690856142399 -0.94386885336462201 0.10804036318223975 -2.5792322570592656 1.3425918585069525 2.4224465977482064 -1.6246329679545528 0.56979845401529494 0.18160847015972506 1.4394899404454635 0.63365238337151431 -1.2466830945254537 -0.99602594812408174 2.302731405047953 0.020150882310741011;1.094595227127211 1.4733915454870918 0.79825684362491411 -2.5139030387183614 0.064478115194140567 -2.1573450146021362 -2.1376604648382185 -0.33431559832498581 1.0008414987729359 -0.56339550756009615 -0.53422382171213068 0.92684054002846672 1.1288831278918003 -0.00061083554885839981 0.26394657620446893 -0.27158590227072832 1.5313905993918919 -3.7418314094704055 -0.97941474581654231 0.86324770929485772;-0.07046623207096088 -2.0473489716239919 -1.5586379606374179 -1.1120344552794597 -0.96176513199566183 -1.8716102661737699 -1.6188804484950579 -0.96738078801729266 0.044950057208744142 0.47150233719244566 -3.1127538721325005 2.4669835613674072 1.4764802059644819 -0.076901478592153794 -1.4435224687905683 -3.9783872350052478 0.76862211443627282 -7.5787372238327411 -6.0571935125213585 -1.5385725945720574;0.058787808924667749 0.63106266546976597 -0.18664018637926283 0.83340123942987088 -0.96831508776444086 0.41182339842577326 -0.63437000575901403 -0.15915076631718336 -1.6726444650863099 1.643791644593505 0.8671481989333143 -1.2118759250483582 0.28378620276915534 0.23670394807481501 0.050050199631734751 1.1628505980656458 -1.3650980480196628 1.2590104003848188 0.28850713731169614 0.13535482303103172;-0.67968312051853996 -1.0520149526006843 -0.28346271949605428 -0.55062262295372455 -0.60165565998624126 -0.089245050250513366 1.9036860548210803 -0.18591620782265181 -0.42736551913383186 -0.41440064955780082 0.49326386139891171 1.3087531233592566 0.030281826273345958 -0.27377752715280695 -0.76916403443227621 1.2104470870362263 0.3288664622402877 4.7261089715075446 0.84611912897955865 -1.1776379292293504];

% Layer 3
b3 = 0.16363715972678927;
LW3_2 = [-0.081701025594073801 0.46165064743740514 -0.22232400861761159 -0.17666064120736341 1.2950029619294103 1.2572296615017193 -0.4761209319798177 -0.17568575726260813 -0.18807204833841037 -0.43139723025966176 0.063141469590670754 -0.19837227270309804 -0.12391412718184623 -0.8670493782431592 -0.3235143253375482 0.17872311259717116 -0.24324644074806961 -0.12336493217621675 0.3291053400849091 -0.25744392457448495];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
