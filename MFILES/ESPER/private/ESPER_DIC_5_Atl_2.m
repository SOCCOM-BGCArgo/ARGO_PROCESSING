function [Y,Xf,Af] = ESPER_DIC_5_Atl_2(X,~,~)
%ESPER_DIC_5_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8384134715338373844;0.35738267963389314108;-1.9960623516140083566;1.5720369636146223069;2.058225335441010273;0.30195950361855772304;0.75605524506604837587;1.8453279179274311161;-1.8979489528922592889;-0.0760118301554042336;-0.35508299287520089793;-0.6266783262376079966;1.3318065126272307097;-0.13995589736756086641;-0.26621937579657783957;-1.9137594144474099345;-1.3126085317788631635;-3.0484257435979515982;1.5209247160815491107;0.0093590381709064626725];
IW1_1 = [0.71494018645050305683 0.48253966616483473517 0.92487668787871379905 0.20143221028055927069 2.322567085207261961 -0.40579899323256102273 -0.33871420925214629216 1.8800850366984351858;0.74969272974561873557 -1.1511169176690529969 0.028964275022999193959 0.26349198778595983583 1.1167006731599569136 -1.8452693147519547701 0.72002914597928224794 0.61018609586074190609;1.1411317415899497885 -0.43567015783923546124 1.8665840026960496267 -0.081287860626177405043 -2.3350429416268734251 0.50940034378417320404 -1.7601156393346562012 -0.7985977003777515737;-0.98644618838390552007 -0.90557030246811542895 1.3419100154309913098 1.0788227944526469493 0.14182533047908379986 0.37071492123110089123 -0.014662538439082602876 0.88295549537668671647;0.039382872950503702847 0.28751819828960295533 1.3701414916499443652 -0.88506370574041348664 -0.73315133632373796768 0.63546870210302619508 -0.16062526213874855907 -0.40090376393388749143;-0.79501344293109366124 0.7566985362422862238 0.87410611901858614736 0.5383650863081683724 2.4126716127039560256 0.51591334801896981954 0.85095248955041191685 0.71212404251215921658;-0.25530644602182323011 0.71294238413898336493 0.069548874505276719882 -0.057697693174098264868 -1.9219086498800721508 -0.44566336792902899733 0.62995124445654038237 -0.83639665054946588096;-1.0222309431816265501 0.09708686756176579391 -0.33601757913346713691 0.97363699398290448617 -0.82368995614290452245 0.29465655859343498069 1.0001257348937202529 0.006208858418252069522;1.6617386991303810806 1.6013918539617146841 0.79547686902846992396 -0.54927503402086408357 2.1256504961511741847 0.72597305841650083824 0.2533797165446995403 -2.0881760628372165733;1.1436833952376177503 -0.81242659705920761137 -0.45270384319470313716 0.55940059032961686469 -1.6393377595396143587 0.45966659246026803087 -0.084499793022445118806 -0.052707178083428216087;0.79896352135444770326 -1.1055692437109421178 1.704321157101942763 0.12233745731521152023 0.092994041321356843421 -0.66440732326830886922 0.34811364784268283845 -1.3876081745873531936;-1.0478993930551134817 -2.1684905477787923544 -0.66060906197840385534 -1.4447978204337084129 -1.4807262131724230336 -0.28186493454376715384 1.0520150382655226728 0.41911230369523261308;1.1818936599093818884 1.1696440596902133446 0.3094157594010528145 -0.39812303118926989365 -2.5742391146834346927 0.52360875344806057097 -0.11721823466727115948 -0.24662048806731384776;-0.72048357236102233969 -1.0003091472617369195 -0.62662808773581613053 0.015293470682859047066 1.1121006656393970236 -0.25410607109627880718 0.10797960673713261071 -0.69309260622430823862;-0.16133674044425300176 -0.00012233338082060212643 -0.85374430136142986925 -0.25909095745678822897 2.0385717352579404427 -0.51675713463974093376 0.63158898984111355723 0.24631738784873155601;-1.5332784384607418549 -0.86057720310288710053 -0.87065420292669071234 -0.54177482718110492321 -0.7232183917727857958 -0.082225599813442282193 -0.63601706240662669867 1.0851089204024706447;0.075514386996970439547 -0.4651024783456466638 0.10959023118667698959 -0.00098906028348959978969 -2.5252851867785697237 -2.0148145913950497032 -0.42652093517248595989 1.1293733018083185193;-1.0870809686672837646 0.027683058131760387294 0.59049509473567662887 0.94329262246698486472 2.7782487260980772703 -1.3103022072071446313 -0.73486504278210817986 -1.1387700777194307289;0.11122368341902032218 -0.050216987427058816518 0.74046846882426842207 0.81971260833003289914 -0.5347115446724113319 0.2570875797393338269 0.40257806208378482671 0.69289620724815137454;1.3544566436984819546 1.0068881088960854875 -0.083507069978997164328 0.70603559422177730731 2.6140874776143232516 -0.9823795809860663697 0.16083133406047156466 -0.92903847760664204358];

% Layer 2
b2 = [2.7419579310026565011;2.3789019175826258135;2.1842678373709611961;1.0200862751922448179;2.1035717967490805691;-2.0934553283063350726;0.23919975009819524625;-0.44545776935721281831;-0.77768879408956914645;-1.2729860262252432612;1.6914203069681543745;-1.1917806173143359327;-0.89126126390523841003;0.61086046479407563048;-0.38721157252140381289;-1.2721622966113923514;-1.8431774874335546954;1.6402515172883382899;-1.6199370861270876443;1.1439668701875795875];
LW2_1 = [0.33661947189725754948 0.94004996680286656563 0.81369769420314663755 0.96292411320771131855 -0.4961169939440970289 1.0513376109021279614 0.92330161842197411293 -0.60005739752697739853 -0.12165282962645922182 -0.082787975406802064016 -0.085820733423832271103 -0.17076453376349620683 0.5209265738683724889 2.790489661292540724 0.94797047725894967307 -0.14804431241862575641 0.49600109927726460102 2.7024887732911815341 -0.46522644606990526395 -0.92806371590827552165;0.4182729541449581312 -0.78700971196401536822 -1.875509003229318461 -1.3849793029355048635 -0.25521027912790938963 -1.6487438981275372996 -1.5741534722341639085 0.99420277223839081948 -0.153618135523723498 -1.1913719214360607435 0.25574547474220432619 -0.62735351113098303255 0.17112520856109400547 -0.12257363762082498782 -0.57069327211142484302 0.69994078497225575841 -1.1711415717974986705 0.041729258487958609258 0.16898769259827053912 0.00096707690170337763658;-0.099049015697638409517 1.2290549440681426407 0.61250025467273161439 -0.7023016332754242752 0.41349275194392204336 -0.53297567639865006672 -2.3120914235324696584 -1.5866543548525524621 0.99463384409976940415 0.004245995405788592636 0.80678027907847704725 -1.219927141306428986 0.95931342500301430842 1.097557373570966277 0.60063121186002910168 -2.2587721811556038531 -0.1663231436301038646 -0.74887075823960025378 3.6096061606987381865 -0.7593416142941508129;-1.0464500107579786103 1.0801522738217768094 -2.0032100307072204792 -0.19109269031783840398 -0.14322255382079371322 0.25860584630017335872 0.047308661156105505374 -0.049890245315598442943 -0.61251239397229528816 0.11333624670186083494 0.308881317882658879 -0.025585654146117894903 -0.63267078530693743321 -1.409184895263293269 -2.0229668586209568204 1.5053278027070708944 0.18572363521488616245 0.37327755036275223066 1.6853186897924945509 -0.93441254758827574367;-0.90057960486415167267 2.1384816390258856167 -0.50135360105539683584 1.7127583604045955035 -0.29090587729671296691 -1.5868547884601442721 0.14377692200777539289 -0.89518267432671716488 0.97968620508657289214 -0.14845241907952361204 -0.84360611808617880225 0.92690094862427407918 0.13485911230444697084 -0.39425893274935552846 -0.91189473076640392701 0.053866427403392626305 1.2942522274041687869 0.292921350791769175 0.71207818104104547707 -1.6523132559483142412;-1.0299872906544871309 -0.9991616221256757191 -0.61669583407462658098 1.2176514610085729107 -0.69215423293500855095 0.68684114335119184069 0.58241635831692473158 -0.61009466435940828966 -0.78480787786205397083 -0.88342251635173241198 -0.09723461215343957853 0.26342951782359314006 0.65821538451091621269 -0.24938042805740648356 -0.34482463781660693813 0.29449006145011025204 -0.74772330798385733264 0.042256615061038338421 -0.44054572592898644245 -0.077438801601975582045;-0.9968789560508248826 -0.29149537830339439237 -0.47985969534872174869 0.16584778906376815288 -0.0598572584264553606 -0.19764157461391998472 -0.32214346835032814376 -0.13163726929921923392 -0.36028089000593477298 -0.16532405265266880701 0.51449551328259024441 -0.19255696133844979467 -0.089135047045643317487 -1.2793369070352711425 -1.0058154500416687238 0.61706877053330755345 -0.52161257831688379039 0.33594801084837749849 0.02726101393808277179 0.22946942083024698955;-1.4428286230420983571 0.081068128704492634085 -0.018039960860840455192 0.66862263555289980221 0.66243257370119279503 0.61296949617837903634 0.22712785270553179084 -0.9117860127332294562 -1.4619310099726861019 1.1142771111447808963 -1.3432648569130838379 0.13945476255780628327 0.77193086368270269482 -1.0660003963949986616 -2.1833314536912347137 -0.5497521705407201198 0.70516498072088551474 -0.66919759400276324079 0.78264571031399354784 1.4035454740326787082;-0.64712235751713975684 0.98928996295364235447 1.6455952806046418857 0.137607892000885218 -0.15635333219254299308 -0.74069324486654275486 0.38872847956504852363 -0.47304740739505779512 1.103966750199103064 0.45755831897617715853 -0.58939575052033732483 -0.32672098716688557918 -0.67929719198845428529 -1.1036174288568665336 0.66308872177990563213 -0.17081132016717126554 -0.51842411064650983921 -0.17653300780588501717 -0.14617367118704130413 1.1801825316164917812;-0.46522175998323622714 0.18582284665265369483 -0.42757334491331966397 1.3221858943368764994 0.64405894671484931191 -0.61969044154190655593 1.0063698915295387071 -0.86578199801601740671 1.359956578225529622 1.1593590646275937495 -0.92213383714017149728 -0.12448655754235422866 1.0312073516594739697 0.29170703651149054725 -0.17904310950159182947 -1.2841001042589630377 -1.4687067940202485072 -0.53341439929985245971 0.91613629810671992626 0.73962253240506803387;-0.7570088187567308724 0.32101650301584627734 0.8146456430167342555 -1.5004817405976953459 -0.0010082483054619229002 0.23921303981720309917 -1.0023103268411839295 -0.15446431265751503492 -0.13839963637944713293 -1.1128267280506736192 -0.38123175673943898722 -0.28851727435345603245 -0.2757609317624158396 -0.36695583054952596314 -1.9305898815686848291 -0.91471033150638014764 -0.71019177064818306278 -0.39165180623927742243 1.9137777169674414779 0.23082809918796839965;0.57184351738845995428 0.71337427200934278027 -1.5915689098839318483 -0.2788015015856201706 -0.23822339379321294528 -0.39363664584209234754 -1.1122593775954103812 0.25202168642251232544 0.23067906681772931687 -1.5275137899457924551 -0.57691820033301643988 0.33233753569625479329 0.72783040930535258806 1.928111447881858842 -1.9939239311970937685 -0.52292943877547426457 -0.55613242117666550346 -0.15806377457674436471 0.9810353499838737612 1.0540361055561131565;-0.2408833101329465598 -1.9425572568467894818 0.66542926682956737849 1.0505572634345059502 0.77131203725461139342 -0.62875478643576232507 0.99686895613513271108 0.58499303207127684168 0.70411962824319118681 -0.013831296307001098023 0.34618267492242105199 -0.42519381608970241437 0.041718755026379776563 2.0926769951630284083 -0.31942835590343049423 -1.0843129651435021721 -1.5317444589790139009 0.54299730519401934181 0.60782945101563778945 0.11204460446151849606;1.0542447708307460807 -1.9254607862759076653 0.21690010173829596396 -0.70869418588780008772 -2.2848187107410091734 0.38014519101596344619 -1.6832600179785246475 -0.76486385925019917398 0.73903330245807807852 0.55643103533932358751 -0.064280819259623769857 1.3394953773750402082 1.0164910650122234159 -1.0898208305980301436 0.15598287027015139694 -0.80511711390603912797 -1.2490455330255274546 -0.054750123714176215928 -1.1934059180436875636 0.51506418067835990637;-0.81358479711147524416 -0.85575180298384168065 -0.64996823903578460069 0.18115488781900729309 -0.49100572926418639685 0.42696733918387480555 -0.47995428128343903262 0.078934726778566166594 0.21837711474714274762 0.80918611251249827898 0.24180579130342072514 0.12723065925714277524 0.12131491375077076145 -0.59760619912859336278 0.18932743667686802169 -0.092217730345983628393 -1.3045866071632148397 1.0303891662187827372 -1.1604049435444054872 -0.84296995166766230945;-0.46577088365065599795 -0.18045940336488713873 1.8433858920633774403 0.18478212693681725365 0.39043823865184851263 0.82668075014878650286 1.4039557676100213879 -1.1642353019009048509 -0.10686325495979567823 1.0870844493171929468 -0.024605606401323833893 0.44846632406954839434 -0.18222734170307181012 -0.48222564908985732224 1.3487607278235302921 -0.35590781532973631007 0.93712224310143399375 0.56458791464954138917 1.3871584649849644233 -0.40509006688423349063;-0.54930313099531802301 -0.26906316762963111699 0.58325916189923276978 -0.23134027595657813414 0.51917451933476477244 0.77743447599132331494 1.0371105906507320782 -0.38782637465100699981 1.283796131603237578 0.77296083262643933143 -0.11599094485112362851 0.19951201700015885887 -0.10894637989529878941 1.4512764545026877183 0.2043160724514647697 -0.26990385757619822504 -1.4042959566593247178 1.869910821202056761 -0.43104125665264347855 -0.79128101525123695215;0.40057583388888806653 0.67736155965232314191 0.1985538334604126931 0.59663850042914179372 0.36675607200178389489 0.52008403180729467774 0.7533034055309376642 0.17784080964322818152 -0.39353580958047029714 0.28158051591879068587 -0.67694266818967108179 0.060089110059124622998 0.99240844526728333452 1.2103606119618841586 -0.37778730557487072428 -1.0251290839162563451 1.0493700338388922688 -0.45588541122007797401 -0.8579790198608530094 -0.12564518459920812066;-0.35714077567756430387 -0.72512379984055641557 0.88350294044926291903 -0.2512547394674298773 -0.30075625145827455942 -0.3615539436909646076 0.22407118282214538718 0.66081776313852014226 -0.5062923637498478735 1.1036555267395049551 0.24121895117842226397 0.31412054479090945058 0.12236379885834447467 0.33550625736522521336 -1.2130019750234029008 -0.58262974077827656139 0.19138799928648045356 0.65852618167191911969 1.3294847582332693925 0.87364709174440291495;0.056556632358092967516 -1.3257007541433427633 -1.1315902149295686829 0.43051010927457217248 -0.33859011863323645875 0.48977362968768228813 -0.0012102852851502525489 0.35222549672270919707 -0.23618034773399568249 -0.10792271182103546634 0.32385211616908288201 -0.19464781074983150688 0.34523229389894816155 -0.96938267563396618431 0.18505010989677189714 -0.740795585074955798 0.51584621348086479031 -0.095449542756506938757 -2.1217430494610924896 -0.66434049954441487529];

% Layer 3
b3 = 1.3801879299813861746;
LW3_2 = [0.0664582203222824075 1.0657043021314400733 1.5201468121411467749 -0.042754555418936530942 -0.02379152871431449226 0.14242359144968241846 -0.23682279758007251935 0.082890856460347175916 -0.032174049747092106633 -0.042935380676281081902 -0.95933372648458881127 0.8901514789711516551 0.037894307986115163822 0.020789305766177747226 -0.27340591711366374339 1.4150443633336424742 0.14405763236657381787 -1.5360461252314350222 0.26284130740083311295 0.11096341185420234565];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
