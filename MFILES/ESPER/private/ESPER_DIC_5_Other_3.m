function [Y,Xf,Af] = ESPER_DIC_5_Other_3(X,~,~)
%ESPER_DIC_5_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9543541200243859102;-1.4201048007744017099;2.3631598611653701347;1.2230042710974868836;3.7859469995252847951;1.312774341553102353;-0.47573110971755050436;-1.7613395085330896261;-2.094591296373531808;0.18139091481813515716;-0.60024254832028012263;-0.18405629966684045051;-0.97336276003234267762;-0.41986916384880401676;0.59224960863286046919;0.44350134058480666921;-0.47824118022296713271;-0.20278694352690246339;-1.4636638499596228424;2.5205408078038140651;-1.1321004936748260139;1.2287681962817675885;1.1210403894236669053;2.0718015082128453663;-1.5596790192705758393];
IW1_1 = [0.20889381185287170251 -0.25476886082584948578 2.6635970837447846549 0.94453425664873402745 -0.81203666436091404002 -1.0774995531750339861 0.47683240197327420029 0.28156052021573485522;0.88403906805561371929 0.86418545765451570961 0.58411736630960986449 -0.6092421562663690171 -1.3781311288095123846 -0.85496364819846204508 -0.58354958217099706097 0.26144139697459617411;-0.76125889746019226312 -0.62714139481933472986 -1.1972266274571867761 0.32410119410493543057 0.018148592910281577395 -0.35783179507885343185 0.44202618419970068908 2.3852943975723088776;-0.1410558972520475074 0.12799615882235754194 0.45980697870777742509 0.30681414396165251901 -0.52776605062567782944 0.39775730266407338664 0.28103954240816425569 -0.88547228977416403417;0.065441189616281175701 0.95290821848178397513 1.5125005658095418415 0.11839299654326640443 1.0683671669004142224 -0.25814752380237904195 1.9239284537173808598 1.505183756183470889;-0.57341753305732390267 1.2361435191836800396 -0.15721594179607417674 0.24682428588975932615 0.59278732975756220913 0.52132247214690863313 0.30300892407198287692 -0.39998061777831300789;-0.21708403720627686417 -0.085645432912169916495 0.62238198776089193043 -0.82220058940400497782 1.5903500918665405273 -0.86425691660005188321 -0.11721840685025648743 -1.4703491416007945514;-0.2078382641309632628 -0.092613188854751157808 0.80735842813565728004 -0.20567603118872049284 0.17587163590539447999 0.54132126603694541433 -1.2324163535093608512 0.49458587108504853402;0.25135750013067392761 0.027379995590309756659 0.60110750267363943777 -0.065129074710303908047 4.8313674515128903764 -0.70774234644897293656 0.53556721875766810648 -1.3510538773384046518;-0.007319990005362458918 0.081112908379140202797 -0.19194835948135691162 0.51275378034060314913 -0.58381132699396742769 0.88768507136427432513 -0.47793801998741169967 -0.052723106405319519752;0.11843691065536206264 0.033675977650548243048 -0.29121578238627893187 0.27175610582491377398 -0.39893645547901590565 -1.112553947053426695 -0.43609293521823055961 0.7455749202411683374;-0.0069164399603490692853 0.17118455523207110058 -0.34236840518457561933 0.23194034185371983914 0.5874469381855162986 0.60468796008385339302 -0.058610581339924312794 0.36647660525017017319;-0.070226161988547627923 0.017227816899120833305 0.11570212004640420544 -0.32533171731607629651 1.343028987934764773 -0.085412566991556804208 0.17637049535436546965 -0.04500167468584200664;-0.33729768282785560496 -0.13494357090091607665 -0.3946711822389789015 -0.27194358648724825667 0.070040413314274727052 0.761705886411525257 0.23907667851219385757 -0.52392629575584770407;0.75445553523224784254 0.011518512336026156401 0.099825589462929173457 -0.20469779966301793195 1.2448264473918007056 -0.44549398268445750126 -0.032875754834684633998 -0.32878084496491399857;-0.068711084851094728077 0.20921176667122426407 -0.14230747314810068826 0.39314230062652899544 -0.28446989414096057747 1.4115984177401355026 0.11966205255497312787 0.27516026126337389535;-0.16459444270885500994 -0.019351785390528557229 0.56486133436586494216 0.34391593248626806112 -0.24730786116656930385 0.61890174689793930884 0.24893711841794391448 0.87524131178193620428;0.0205249596830729443 -0.20719465280582752276 0.10771820195046814816 -0.31516658070249892187 -0.079121924654256076126 -1.1960631365607121701 -0.13047868015344193937 -0.28902623695875251375;-0.51723940508612442635 -0.12372130103732148498 -0.42735230731515483349 -0.078437085559406663493 -1.0321311124196361764 -2.5262996854351849052 -0.75492320571406879015 1.6895740971704795719;1.3084648016888078548 -1.1461778583211650329 0.2885311119264113433 0.13156389745691907112 0.28284387716443959437 0.74099605264600443277 0.53007921292013682191 -0.31867662369603683148;-0.31017550703744312113 -0.010178864495091401177 -1.0813461606454533026 -0.12016918035199225523 0.29891579314209570928 0.10217678808748600905 0.0080574605545733375689 -0.35090485578054980698;0.439900162895159208 0.30119453171839072336 -1.0175110977637236154 0.2346785950895858841 -0.45866645384564752597 -0.32942755123207112522 0.080002152850591243261 -0.49846751277427836513;-0.028415081529310364655 0.055458864570798460658 -0.12617662589313577426 -0.13028453700839909279 -0.40526739192013966351 0.71300571093058351391 0.19854890230655522498 -0.89368333100330787921;0.57932950264614435643 0.2040035408450187604 -0.84122223420325392684 0.23473025443432427029 -0.94079546729589247356 0.46023090992216553197 0.55331262108512380138 -1.052589939761576332;-0.0074836728864550788529 -0.12947915803653695099 -0.72296481631027120773 -0.36005198542080296686 -0.35044768285745159231 -1.1855593765925209748 -0.32954327250652304393 0.46528942157521135936];

% Layer 2
b2 = [-10.942456271214995311;5.0241764716254353473;0.81389797494437721159;2.0871022035797888172;2.5625035973355556607;2.0343199704565861907;-0.32459778077847933897;-3.0917212398353752789;0.57003909071277081289;-0.65726630005168029669;-2.1068285832321707041;1.8762212707304815051;-0.41688939978791395014;-6.5619392821747846156;1.4652525957991997529];
LW2_1 = [3.7248063398269146695 0.57292180946728465951 5.4018645934150351096 4.4264036421579762148 4.7460685771286010848 -1.4647828692655435745 -1.359766115512729856 0.33189435948988249558 -3.4588020839483006874 15.139513573578520678 -8.976893083817738983 6.9987297586813621564 15.817420662537937659 -3.7483095595881530393 0.46882471741736536641 -1.2023485026723315094 7.9075565958756044438 12.816857551803707338 3.1015256532378221443 2.653878363281532593 -3.4552200989423296207 11.052908783926945091 5.7332570486909242291 -4.241080070377490685 5.583267576625739359;-0.13399796657711801617 0.14748238031158880657 0.14359822153397752698 2.5109935454543963473 -2.7582839668696896851 -0.29990170855876180367 0.32040666219593288977 0.073257974140184242695 0.45518666045221217731 0.089348161032388753733 -3.6309646821364562896 6.393398093794350423 -2.9263505238658296115 0.57607663607050108023 -0.93347059913364549555 -0.21651432071038126392 1.8363313298693906273 2.8535301555780128169 -0.16808230964328585433 -0.01916933766637611905 -2.5661828331308211837 1.6536411067343095294 -1.1554453277642531273 -1.2971134168710733992 4.383670894972683918;2.2939674631672586358 0.91082196663673808956 1.2245092393622722948 -3.6363738658909063872 1.5856174112814827026 -2.0690159559584735405 -0.59704920685116946721 -0.22997743340474816054 -0.40142538209908962266 3.6848498458755920559 6.8429921448985595589 3.7403394436699617387 2.7677140212953883491 6.2139649910688374845 0.60998886812199926144 -6.0957358361579929706 6.6621914326170648124 1.5177882472879733466 -0.45644567318143125512 -0.61806580789484300009 -2.0564825524074992202 4.0503614900076865268 12.201253925950046764 -4.5741483748596047931 -5.4854016018082134565;-4.413455645071142186 -0.93853922815301060734 -2.9560138569368108463 6.9319791800755234945 3.0376809303719407573 -9.4814117106115638478 -2.3948918347654837291 4.7601156478471944311 -6.8111535023208791273 -9.7048538307687799431 -0.33508405072134872515 -0.42179113489172626039 2.8128628506883224247 -1.2265556901158092273 -1.9363093651560006059 -0.052337960712421208176 -0.23671059567047900152 -0.63573713657988972781 -4.8253848949066728835 -0.47946642478226814132 -1.067277189564622919 7.0754401327793843279 2.273342939917358585 -1.4846413281154802188 5.7553556053483161392;-1.0468082969038536856 -0.16162632741665861058 -0.78853733147179627672 3.3264440765905334274 -0.29441239511826383657 0.21926513474360648237 -0.72674791314202413783 -0.99966900205431963311 -0.054229512700416780679 0.054477847654852105952 -0.7071310106719363997 0.23429910611866600068 2.9577157917782752605 -1.3607004521185406265 -0.84936912509193751575 6.1411990434150309781 -2.3516328328685309756 6.5005444452363105867 -0.73165425282928031603 -0.37859304975724927811 -0.55021318523304407755 -2.0643025658992582017 -3.8003882151104422249 1.9314728263715770229 3.8564564096882611999;0.61140314396484141124 -0.055204515488503982934 -0.6081337147711673996 -3.5641212440676639517 -1.1027634593799240381 -0.91067091043279346785 -0.44365568851901049374 0.22235336859424700839 -0.89722868129887323185 1.3860583906701124945 7.1056552416842739817 -6.6051160527907368802 4.5165176756383988987 1.5551713585996651545 -0.48570796910449992589 -8.4968600838856271906 0.83526193943516668927 -12.347092898609391298 0.34074131048227412899 0.69579303843194828527 3.233587700515904384 2.9287517843843566823 8.691143743676317257 -3.2377627337285139753 -6.9333468592955442844;-1.0378005702633708029 -0.10724517378579974392 -1.002080151197129787 0.51251436680356166065 0.99129096659998838792 0.56970382373776751184 0.086925140869782702158 0.10951792736344828638 -0.21805648661908746955 -0.81361782722659281575 0.90167305276533182834 -4.2931513476753080383 1.7903237828214337846 -1.8444433660842391998 0.38225873364930479381 4.8566881634279344127 -3.9970426964730467745 1.9126752204893604503 -0.45072434845547809656 -0.084044155044810969768 2.6341137189558851972 -1.1185777683723070464 -2.9464855872083144384 -0.38022166057173950593 -0.77989746301211626545;-0.12687990162967283103 1.4482687648478003162 1.09218351938464453 2.3563339462263446222 0.10039964269191820057 -2.974914727916432966 4.3299542771494943239 3.4356642250209894485 -4.2386689587009493962 -1.500103504234211016 6.8743923247575393631 3.8787208268510067199 9.8905447209491246241 5.5913883385258911218 -6.160825261690543897 -0.91200588320884090621 2.0524486627598874655 -2.0356584421620298464 0.064472571919079513236 3.5633516603191903727 -6.8099135976537006343 6.9746969264738654104 4.4886340441786964917 1.5188552832825394923 -0.22362236122154940943;1.6004671285862117625 0.459152174489175946 -0.0068770993879333055035 -1.8517374643776292054 -0.86407536411175611679 -0.66612469285799247309 0.38401460339104132036 2.9153469350683032246 1.3664199803229042374 -3.9932294654513200705 2.6779062079112065931 0.75709223825217064618 -4.3785584980359226748 6.6790137126036652759 1.7867098963566001579 -0.33048770174804031896 1.421726603138226297 -3.5100444205125103103 1.352775693600722251 -0.15846565437079865313 -3.6010833720128618829 4.0704748238287846718 2.5935937017446559771 -4.8050079026515817304 -2.0585262403568389544;-0.22992737884030828299 0.051521395334081128425 -0.062347959061605923159 0.91849135129196424199 -0.15624624045183888033 0.092489873874941064269 -0.11172793034780170718 -0.16766537438694123496 0.10670386810646199927 -0.054618708259422416029 -0.91898065392259542516 0.30765269649761456394 -0.23657366024591328091 -0.160904570955018561 -0.23574202644100031301 0.60539251096460278134 -0.81992722561995701192 0.547069748742369244 -0.094125790987757695927 -0.22681717352566355128 -0.65040748535485748416 -0.90907794389357832188 -1.6898040472990540906 0.84713933263978324906 1.3774133990361971946;6.8509826914259690511 -0.19470734566451661229 5.5982305770618845386 11.436567390784809106 -12.652567476074146668 1.9134873877130531561 0.24300460003159213285 5.7518999429812227575 -0.90821158313958161301 -16.991880403416701029 -13.310681877944949392 -2.9406434923249298308 11.249428660226380217 2.8822384936325091687 9.4424174291820932581 -0.48462005743086811194 3.5462396836855973881 1.4292667814011141836 -2.4843071560141205545 -1.5218823633500289105 2.9817995962135008803 -4.4757437731978502171 -6.98301340358204925 3.4615258145673708512 15.255532523716984983;-0.79416901015438878808 1.5788266909544179661 -1.2655477725645218889 1.7785849155278214972 -0.45012955801022697111 -0.99222458275935510041 0.77566657394372029444 2.6455868559766049231 -0.1451910200850306254 -6.712445863366071741 -2.074782198714056225 6.6972482368637544781 -6.1646977740046686733 3.791266005535797845 -2.9306194326409511497 -4.5692683606847444011 -4.5024697734271930116 -5.9822930939092255898 -0.15164886986386316714 0.23277818688764731481 -2.9549994552078233667 -0.5365884159888238969 -6.1336965690922369276 1.3397322260074113753 0.075995721648456568409;-0.92810084199501796665 1.7474454461755590806 0.34301315550288385969 3.3971241920787469404 1.2163994880864184012 -0.70595371349438362785 -1.2394235137979372485 -0.69146338369969961857 0.083643738688797555914 -4.4620566406862591791 -11.416721770887271248 6.4034553549691990426 -6.6150284854534353585 0.46743870523098385306 -1.726823242162791594 3.1567632953497173354 -0.56013260220944982581 9.3559707935201270601 -1.2229881780350828624 -1.3077466986327146437 -2.3187484331595507037 3.1486314536126727148 -6.5959957426026036842 -3.3334624933721554996 5.0394272089428353567;2.1899116505342588468 -0.14998107921651096519 -1.316615266051197608 -3.8463922244365602587 -3.7890264049293285176 1.0843282641623557261 -0.50958562292297748808 -0.89137173899719968073 1.7465907900936388231 0.22624209065770350957 -0.20984281542860297454 -2.9217616791336569193 -4.5605858927613427412 3.6603590315463829796 4.4668752171745840229 -1.8988763012670712982 -0.51149746128981865567 -2.1618998301192076106 -0.39242673188797416728 -4.4994582199386385923 -13.724586327037037847 -7.0196451187944512995 0.76389102450846446679 5.6009830378115408323 3.8743051450592891349;-0.27072834644833604356 0.20778582739138559687 -0.42665438658582477416 1.9826294732892786321 -0.43517872021186965181 0.052691770968794508778 0.0072610077326103949699 -0.84561892982424213816 0.14229502296936685779 -0.013876836699375918321 -0.9522068065591994257 0.88630055622308201446 -0.68201847375695956455 0.67040591972693253098 -0.73507148605257432994 1.4089680518942033771 -1.6711959843856094565 1.1933374257202609137 -0.091058128457710926784 -1.0333465110609567628 -1.0482992738277470135 -3.1952849902076274624 -4.362165313849009074 2.5223925371780033799 2.4659893981272444918];

% Layer 3
b3 = -6.0366033389487601113;
LW3_2 = [0.03671849843544545966 -0.34678396466874022996 -0.19272258592530713828 -0.0098148829370463333555 0.51994196771215317465 -0.40359751358874246252 -0.26804910680625060326 -0.030411858946487201061 0.15727147364055171774 -8.8236478183413851184 0.0056453204913986488808 0.13044497050139969296 0.049823357180868416139 0.083629332877822315506 0.75173784858192693736];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
