function [Y,Xf,Af] = ESPER_nitrate_12_Other_1(X,~,~)
%ESPER_NITRATE_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:36.
% 
% [Y] = ESPER_nitrate_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-19.670992694024242553;4.2277215548002153866;1.0776841135844803521;1.5170119887819288884;8.0328096104715047687;-3.9639592254302589147;8.4696527891051598402;0.56896358769485544382;7.4215671471541391213;0.27591956450904786546;-5.3355606176188423717;-0.36069662029897964217;18.203299069254583742;0.50552444156101028483;6.5839692548111932169;-11.194079601346567543;-2.8975357973409878731;-0.41149731056705385335;-3.90465631208600783;11.512311714371559646;3.2296525071269774898;2.7114374375508001336;1.3456772407751038667;-3.8494162460232890233;8.4641135968001002254;-0.91654730174720477898;-0.16042580496160549486;10.27296880112833577;-4.1157589246856369769;-21.041451178058679261;12.577746930770764777;7.5499765380905037304;2.8929076826198669714;-1.0360422683341490302;1.6401973434471082136;-1.7621151684447440289;-3.2614062313091487511;0.8034227181595833267;0.060425159043588902441;7.0133054664280756185];
IW1_1 = [-0.085121615931850622139 -0.054076431514728968974 0.15368107946737191716 -9.8002595027742422928 0.050845507874941929527 -9.9068143931095775656;-0.14949672197667354667 -0.1039018123974502078 2.1340280988070112755 2.9399944921949705545 5.275527950273428246 -1.32968222590228069;2.1952408863047052634 0.85377932208935769509 -4.0199198887620957166 5.2839965369604309231 11.9354820789780387 4.4292887325067775706;-8.9914748674914140025 0.87587487039489186902 1.6961089844940995253 1.0531844501059433039 -3.3057219818274967693 0.17794661219356530668;-0.41594263673255510438 0.035607515992042398922 4.2637634618016617694 5.2863669087724494133 -1.3275577656690018546 -4.3826108747919718667;0.1113964224533261077 0.12113117283194756169 -1.8757698169478997929 -3.1185223890654256707 -4.4672744223239497785 1.2241978862044624599;0.13013574925142856742 -0.25108595606806655143 -1.5804525870453871583 1.6528331497166317554 4.7735453668751466338 6.3471287869485859545;0.1505085258591554731 -0.46264657941806258679 0.48253585911210505888 0.20019734463396238189 3.0108425531715568013 -0.57557953528268446242;-0.24947351762059369329 -0.10382906696448392092 3.6523797352875808642 9.0532818780518837798 -1.1935649609878291599 -0.90568414021450760476;-0.26393300470567482297 0.24483751687156107835 -0.27184494653395357977 0.51251219336612674482 -3.7547370877652932464 -0.90177968574956646197;1.5903278454589548918 1.5557892015975935962 -2.6930377925471038481 -0.047898273281704921434 8.0023563386222509308 -2.8023944915983798332;-0.084384694852847857982 0.29114525799755497371 -0.51561897617523833048 -0.026816573643595281035 -2.074545977836341315 -0.076728493850324139269;0.77099271327333529502 1.1414777741907822239 -3.5264462742569171461 15.118337834203275705 -12.686094722213489661 5.2407708461588464743;0.13339022010510898086 -0.35285712978404648599 0.4827543333201905762 0.1298035561297052054 2.4749107313618416981 -0.27662999001040972091;0.093785482043067899816 -1.8069681968373785264 6.3536822420432148562 7.9044149541532675585 5.460060411252246837 -3.3849493520707598648;2.2914077967773285316 4.9300726360647368907 7.5171213743595650669 -9.6577624019078864848 -9.5832666152648453561 0.92880534074403531264;-6.3675039475697037261 -1.8503605031532932568 -2.9821946538971619844 0.46785785912275107412 -6.0997779284515321052 4.7695925821997278149;0.013644487328695770537 -2.591081823118859262 -4.18746029664173669 3.0636437568601881942 15.611500072099858016 -0.5098872616672821545;-1.5911345729615740119 -0.44580954711655190748 -1.7998621147564646261 7.0629858502248854535 1.7798469216495960143 11.816287723155172174;-3.0832290725998077185 -8.090280606631804261 5.8878923411587020809 -7.5891548520407985379 4.1775588575418263204 9.4328662788766877156;-2.0773091771856280197 0.1632052928206982334 2.1065246080978341503 -0.31828585064716541364 0.36521295931298969339 0.88477064933712912254;0.11403929574441118433 -0.18722518970961682383 0.63195731256057974257 2.5358844889284299917 2.0809291947783608023 0.47868223486606586992;-0.26657298161169751261 0.099624038143808796297 -1.153881563658448961 1.1091062528880037963 -3.5633339515288322552 -0.22826948141465985831;0.059483091500814280761 0.1637278309944878163 -1.5991742839933567044 -3.3210913688075094363 -3.7890985363255458296 1.0067533155590868699;0.15306399214418195398 -0.25222749150702444831 -1.5042830860262736969 1.8641667487617650245 4.3772011072191556735 6.2250137112754471147;-2.4275309608629980218 1.9654183751789819912 -1.6775856638883412941 -5.1414762596653895699 1.239457660599291744 -0.93587570807872944023;-1.3951786120682492243 1.0193882110813921038 -0.32404201218545397589 1.0081055634491096207 -3.7155493887065320635 -0.50137716831460388267;2.808611387108352897 4.4433593520472021154 -2.3592662969335385093 -5.4038616159840042741 -3.0745634149965543891 -10.072413800127904437;0.97266266012430191434 -0.27942433359815199712 2.5202922422491753629 -3.6808942586136073061 -8.1705648439309648268 0.041888387066131231584;-0.080471982726797286478 -0.12646792523035449429 0.3431792297226158861 -10.456457693780700779 0.32553651109233544547 -10.871417245632002846;3.5072015747977243194 5.4632222817905518042 -2.8421279282496199059 11.553683353866485817 -30.191334609337506123 1.5488883019899626348;-0.25594135514219151784 -0.090881259086137033965 3.6651151227352674056 9.3018462198758218307 -1.3388547466692433119 -0.96977820383118706893;6.2949869531405013845 1.80996293308502465 2.9814155129015489365 -0.45573680638733210513 6.3976853844670138471 -4.7525024079432993673;-1.8830360116859761188 -0.24417371778531585247 -3.6978607697613816718 1.9633583827656668763 -2.7601100773117024367 -0.83375488293201205359;-0.10106743926411151935 0.13541131768035699623 -2.0160434013048771362 -0.35075130990850644785 -0.4141412471774327253 2.4634726847533356953;-2.178263797543928959 0.093828064100055091901 2.2540900663601450837 -0.28918533218253500428 6.9076995290236702374 -2.8742370994736186063;-11.424954858197546415 -1.5819017604466629745 -1.6171359166490455461 4.0699893014682926307 15.001129362836460146 -0.25532267700639638131;1.1771411805468938727 -0.015784172593402923113 -0.6798655966379022475 1.3472177569908310169 -2.4066779500658412871 -1.5030429292154530163;-0.10561722188984408455 0.29144409962797213076 -3.4336801456809946664 -0.096124233305306769348 9.5275761898544235606 2.8808220210812249817;4.7753486244396601279 11.552787818386136109 -0.58085218094539570188 24.368355624548286187 -1.0799027056533094804 -8.0902594670919310005];

% Layer 2
b2 = 0.72840620581778148246;
LW2_1 = [3.1770812871368132591 5.2014047596653094629 -0.031346283068042088416 -0.032268432440139924178 -0.49830716509765493605 9.4988903339469121789 -4.5951186809229698227 6.2849095194584183588 4.5970143445923685732 1.5620765278419532773 -0.18468145370024241503 -9.2778706244926674174 0.10151360306939542777 -15.211022634824232114 0.049301488797742043513 -0.022776259005193200124 1.2597542156104630795 -0.058709321661634047973 -0.021354939393035711481 -0.048509992413429965652 -0.25096118208918127834 -0.78172747138471998518 -1.005770924674380451 -5.2883806578844971824 4.82845366261650355 -0.021637811109073232935 -0.19858568530516287898 -0.023637687324690768303 -0.23234123513422988427 -2.8127695438735993427 -0.032285830075098762015 -4.4283599155149655502 1.2832165983615482219 -0.084983897229010799124 0.54666940014709186624 -0.081403911828861863498 -0.010583847123438426541 0.24844441332419978097 0.11562455272725832844 -0.0073393783994558127459];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
