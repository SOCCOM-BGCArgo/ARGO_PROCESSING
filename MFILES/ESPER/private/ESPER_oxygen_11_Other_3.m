function [Y,Xf,Af] = ESPER_oxygen_11_Other_3(X,~,~)
%ESPER_OXYGEN_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.34660529901427278299;0.98205936000267535224;1.1097320521553737382;1.4257515247798595581;-0.049172038233471687674;0.58749242692946590516;-1.2944658316751469496;1.0820125243952882776;-1.4987960593114564301;-3.4167835285617962349;-0.45710263215865809538;-0.36493371893411674645;0.5878024308009002219;-0.45216954579894191868;-0.58690289846295196075;0.6764139330865054367;0.7198302394619144895;1.6372746489822935789;-1.1799447269233063196;2.6129301438401308921;0.59141988621093044554;0.99436139268714340833;-1.1721697040525107525;-0.74621383440212696314;1.8461455077394477442];
IW1_1 = [-0.033932185082619498173 -0.025401783844718126004 1.2230262753040588297 -0.46857596736630102718 -5.2063327653795044014 -0.81049928702517326506 1.6624408521674285399;0.038414822394551330353 -0.059589224431000231696 0.21252838264131521107 -0.32634360503399822973 -1.2367015371821341585 0.55858203289841967809 1.6314632945782052698;-0.12390495192270266356 -0.35226588930501878671 0.40024571808268227802 0.3376607832957472799 -3.5514381995088748489 -1.6640680269506087363 0.10049205185577293753;-0.17578071798012429028 0.54588038488336354526 -1.2532019473329836234 -1.3160907803661001658 4.5523596632742497903 -0.045319722281673580078 2.2353140232942148025;0.36296472182141648055 -0.46846578863047377839 0.77991782190725134072 -0.5867964227432694857 -2.1168718730517652737 -0.86694883804232791835 0.49363674407471175298;-0.20341165938802718838 -0.022923702421299992082 -0.80096666375025238338 -0.95088357698686798436 -2.3724668302961937627 -1.065147210176550896 1.1946213413564348294;0.040860132874934534941 -0.0056692463631175605068 0.34069069215440433984 -0.047298381921226512192 2.114781871572432248 0.80216524343766215654 -0.97847063289179569967;-0.95209835104885698343 -1.0628666993785043093 0.30885921629636936547 0.62638285939672222469 -2.0237557004529587168 0.62246325156755444308 -0.74506799941331969261;0.32237069381571337168 -0.54918086781320052392 -0.54602326968111236649 0.34787215188085551798 11.909426451846742978 2.644694968177840444 0.025851826940692726464;1.8402195051159109251 1.595241349742539505 0.2209099291440212165 -2.2148655039813820444 -1.0428604662640710288 3.3585017570260355946 -2.7221387903916087758;0.37297961940902391031 0.30805641842231551442 0.13010311214236550126 -0.308282182945149974 1.8997251912455916933 0.58393801116561616649 -0.2907200684900373977;-0.0033908024433756452781 -0.087028977133676993505 1.4020668872952057882 -0.39898715897977399258 -4.6418925225963949543 -0.49885524487041144059 1.0743475095639254402;-0.19485465717777294969 0.66217329426494364597 -0.25167425055967129754 0.54355822508944828808 0.38340807281784655691 -0.35875661091563526561 1.3052089967630147171;0.67210408591795345323 0.16900515224355497357 0.62404366552596901574 -0.024495142300593845952 2.9719729028943744353 0.86663043512852655503 -1.403169121126550456;-0.19007852278625750331 0.14970164096060212255 -0.69480534859578479967 -0.37712879225787732107 -2.0400191204117517074 0.83006688268943862319 0.96568742557437092788;-0.45668038309648029127 1.0661147210315979894 -1.1209156803211519637 0.64751946568999640963 -2.5055775391020409515 0.19004349569318265689 -1.2407874137822181293;0.46092304733054884069 -0.48850570235088963678 0.9557736503144240725 -0.40637125408626234568 -2.4766768080670833463 -1.4916117049468997635 0.9387188088314948331;0.5622034784987883782 0.13684293023126120614 -2.2314207377547559119 0.65675182405876886271 -0.25404374349457120585 -1.7452411629407789118 1.0120324644502367573;0.1958685605734770685 0.026480787202279410658 0.74347217301823886881 1.3884150510636128484 -1.2304732746948843225 1.3652950960009835324 -0.90935490612006553146;0.16662068011842226523 1.0283998704751782238 -0.71303498784908514452 0.68824553547761357919 1.1346826281010089499 -0.85218514569138859027 -0.50121939683081795369;0.40125995366745592641 -0.48457000774968395085 0.91450362235188098481 -0.041219085223803311746 1.6025884386909845514 -0.56931790743595100945 -0.70275036302055637893;-0.030655181792635769616 0.076712024928320160511 0.04347777778359793871 -0.61741906065141050064 -1.8324844346672051199 0.50735691558279905067 2.2197791736139991237;0.30499824048197615722 -0.7906755183159779321 -0.737808280938876071 0.85396728218780970643 5.9216022853457586095 0.14098480967168619538 -0.54341959119953486823;0.36957849121004943127 -1.197791868835923923 1.3917791592120731803 -0.53755684003889547817 2.6114008669473487423 -0.3380915258641034038 0.93555490412869568573;-0.3397883963045038036 -0.48695912810897989953 0.95631480221828213395 0.28468144110249665735 -4.1805408967289574562 -2.3048955900221885784 0.20055151912719046403];

% Layer 2
b2 = [11.04467448032091248;9.7871519037980334588;28.257456198741078168;-3.8552351571400329533;21.26311909764379493;-15.14464269975246502;6.5512171430281398443;8.2677752074627495205;0.11084727832188745467;-3.6373264273517991185;19.502792416352974669;-0.18990254667912151443;-4.5974468448457690428;24.196785782060800329;-32.650469048540216477];
LW2_1 = [-7.5484186396857069212 -1.3552700860868673871 -3.0622853113904047184 1.7052432220289253095 3.038279931930285116 9.7708627348919456779 15.584178196306273989 -1.459372626611612267 0.95277179587404403627 -0.42560960752080428948 -4.6074745036463120584 9.0705411227710541766 2.3859647955281690912 0.77880781440259660986 -2.8163162483453607621 1.7614893227684178534 -0.074894477762220343364 0.45948271722179806487 6.7159802452978913934 0.69195277998871984604 -1.7506361356547417429 2.1277296332456239192 0.9903290728719921221 1.2285313957302637089 0.83857130723077977219;3.7914630304503615932 4.1697332875344965686 -9.2828984994718890533 2.0094636254114304208 3.5010156469587920824 9.5108545885018003219 9.4640404995084885797 -4.510668156389218808 4.8509231249296265176 -1.3796679006424534819 -5.4221608594787955582 2.2402343162081459482 -6.2315378242498322692 6.6078933026270050277 -10.628704948488230997 -4.2009595435529281104 -5.4736062817297970184 3.8275635718259590767 0.97771899144563878536 1.5760411096954169974 -12.990056561318215955 -2.4742995580796351973 5.2328864590455692607 -4.8291768663118475047 7.460902117211822393;-7.9976844110056424242 2.9256606742559276846 2.021899882364963652 5.6646441198349029023 10.254026619876485782 -12.627536823384629017 -13.087500747722517147 0.23655273237032836686 2.8726020184520049128 -0.25685645385466504553 -3.1208222735020925143 12.263168913793718318 -0.063379940751199626003 5.9852856727492884659 2.3666435404733876524 11.70373063138002756 -9.0822457594895187327 0.10965489264985937845 -8.640523482083818152 -23.859910201506995264 -9.2850607481270337473 -10.982739539217595492 12.712444513801504087 7.6644799866247925735 0.052869241770807748337;7.474734842031278248 3.5354575462274122621 8.501488654880189344 -0.85700873403975452725 14.555303428942616861 0.60419236960903555111 11.685447672777069528 -3.1976744429592867114 4.1398532471435691704 -6.3967816957868661731 -9.6431139441768234377 -12.865911348165822048 -3.247281520946784017 4.0690373876615053561 11.678522890653754374 -0.57139119427299800424 -11.659624904321249872 -4.0489365037404425607 0.93694534993628220132 3.427889582850202288 3.0181843634463647597 -2.0109354247956279238 -1.8798764699432035652 -2.7056282419639923198 8.3337287511209172663;-0.62766948739154471149 28.237761749183459159 7.4125921543144617232 6.2234870808923190566 3.3239728165224509127 23.283635283030179153 33.83276123370971078 -0.32568809675839510698 1.6079936766911657742 0.20842491431141058067 4.3946806456413627373 1.2199509081108161901 2.7849582645779920043 -6.5100766580987103893 -17.803101554807653883 -8.4639258410715783043 0.53815569942707275342 1.6512013023574279025 22.024527814482134147 -5.2991877848521369287 -7.2784141612011019618 -17.160526869167227915 -4.2525095599999387375 -10.237898431019722523 -7.9909784671956360924;3.7428908073597280115 -7.6060229144548658908 2.9769765297496650902 9.4426175185423577574 2.6530354151210815417 11.352729011560972694 1.3048529355627362936 1.9788403262615010814 11.389401167145061677 9.1438030161586478783 3.861743508900150168 -1.2731815442532519178 -4.7620230137919623559 -14.088642614309318191 -9.375800033247369214 -2.1607209454494746836 -7.0226731779491240459 1.1668187663253093422 -0.17454388355663358334 -7.6859426027963344552 7.3786862958826153758 8.2537338722689543857 -23.687469479979519349 2.2212282495986084285 -7.5437791834756025011;7.8090058501953469872 -8.214042371875629911 38.220071110992151375 -0.99483541515809870148 17.954091627234106454 -32.271501991529589759 -41.301601327087830384 -58.337155892897186504 -6.4686483699898458255 6.8031841009799149944 -28.049707354982210461 -23.403989914954554052 -21.566977728067492137 -19.126549450391081564 64.249819577101462187 23.488508199400584431 1.8290468293527186727 -11.536812726167809728 15.868447062828872518 -15.943947057886145302 15.809182455117923638 5.2592490302870045227 -4.6959983656601274049 -5.5164571415020660083 6.218131209303694007;15.583029241480470972 18.314644812403653162 -7.1603074247762155125 -30.010690685996426197 -22.053028806137181306 -18.464850501859213949 -20.881383678013634153 -5.8962986782018571574 -5.3763071664041968134 4.2932609754089900989 -0.57555579698163017444 -18.260724403761383172 -9.9974870843814862553 -22.06520811311401431 -9.6628391851883215224 15.377535717031491913 3.0495778408750675581 6.3605439575370450456 -7.0121483595260682975 -0.41787937193693258653 -2.3368089484730356631 -6.353343796194482529 -12.603059112253347962 29.623854337691174266 -6.2421247471462253387;-3.1763482429378151473 8.5100205308457290698 -3.6093634570276282858 0.14358983236148742391 -2.2057896062012045668 -0.67278183888684373049 -1.9629397908440375797 0.12211901844468006639 -0.76586980436089313606 0.32955873865389417876 1.2482319500765146625 4.2472185399838151554 -1.731651114210476905 -1.8394422072009288804 -3.1820819793371097894 -3.7295913297319058799 1.5063829822653376223 1.2038152639978352276 -1.1155315389779174584 -2.8975850612072062695 -1.593903950610239928 -7.4178927803420151577 0.48935316334653267134 -3.731069948393946234 1.1367153699324279437;-4.9579202724135411628 0.27151652325193437187 -6.2062668638872677818 -2.5675640549998157702 3.6186157376815932807 2.5707112150582354104 -8.0027669768480365065 0.38272451488725589552 -5.6158081070441143723 -0.11797341567622472713 4.2689516879449405096 6.0261620919349727643 2.138798249363663917 -3.0488708837029827592 -3.1744281175826967178 -1.4394647502516630944 -5.8393772870658136043 1.6351615466244360242 0.34071127543258722392 -5.3241693189850556323 6.1990869719369641189 1.8879035745187631168 5.333825455427504636 -4.0404995299481285542 3.0655025538652531658;-1.7936013672920481099 4.2315555993281570579 -12.087957603035775378 -8.0054708877877516215 3.1556181134653820131 16.96528728974827871 28.272829653192456334 2.7425959334560774394 7.3950088470125070472 -4.3359083845754060604 10.460398085975883831 1.7761279402875054245 4.0435293531987364091 0.18358386042543015093 8.6942593203093814225 25.143714181897326654 -1.8994497307548074971 3.7220871238952053517 11.832949498333610094 -6.9393934403074633011 6.2598403993751077223 -6.5222152783636637707 -8.7298180255976252084 9.441716264302282724 3.3157300315209221608;8.7853078131479946933 -5.5376503381405610682 0.4931430337670948405 9.3772631545414526499 -12.848831380826153392 21.326959551198889642 6.7168469273650783791 -5.8042843650262989641 -17.031059344687285773 4.4457145416754464406 2.2227023916517243407 36.275295597469664699 -20.8621537899878291 8.3345416620268917285 -24.150878876053372579 10.235844244323786256 18.995885763769610577 -5.7901514952522612489 29.390365663827861198 -15.51400399427311072 7.4340488098905410652 7.6054352058148770865 1.603314320600357501 1.4853659606643492275 -4.5083748459726011859;-1.6981404617680517788 -3.6926576857662722908 9.2447733826841105298 -1.0090429573519277273 6.7691996286320952336 -2.2313399290918538576 1.6078417982283006449 -0.23254949292752058465 0.59670907414453999706 0.10142216479490674674 5.7936556118688367079 1.0241736623547912366 0.82671352203177472795 -4.4593517435440546137 1.478047081223641257 -2.3017304604753814345 -4.021249462333320146 0.38306025811627375521 -1.004003069832586803 10.028417608709345288 0.46643922067506587981 2.2052924876227928408 1.707230384231616771 -2.7853935452262512662 -5.4108565372743004929;-18.39987410039557858 11.677333823089082188 8.2460353798781422796 2.5705976393838101401 25.995797595612003761 -13.697071021311101546 28.339532621212338626 -3.5400773628662487447 11.220122516663877832 -3.199357939183907984 18.215206076441802452 14.77053458873837144 6.6154191453583699456 -12.660728027595828493 -13.688849103460356105 1.8968958500435657566 -10.168041345991493785 3.3949516931827377064 -8.2238604717826806478 -6.5597203411730413691 -15.953763977511211891 -1.6774822630796064615 -6.6554429589640866638 -2.2187836775182647742 7.4588592136091493856;9.1902666763421443363 -41.763655575577146806 29.128764340754518258 0.18526440266411833835 0.71149802172387577315 -23.377207686079923832 -54.591425805303323671 16.268788622312598591 23.725838821365631048 -13.186063269330562164 45.839245146072144621 -7.2386312673081691926 -6.0865167486664146779 9.3829574435257860898 -7.6922222055513653771 17.85956537731912519 -8.3671515720085984924 0.99013994109673808541 -20.133981018724174561 -10.65709652070506408 -9.1600900004724952197 37.788215381023690043 -14.327966094330724545 14.51410965816368126 -6.4685025860046216906];

% Layer 3
b3 = -0.10058744317410445168;
LW3_2 = [-0.30376141487563290688 -0.043398961333197913492 -0.037143855684518896354 0.014485631157248091833 -0.1022899615005007784 0.015542383933924226042 0.0055576188659035401229 -0.013070001785322164431 -0.28429837160436427501 0.10205511124656994892 -0.01687657215199535668 -0.014722432160854786662 0.14470908687803726855 -0.025575626978436617059 0.018494054921727651891];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
