function [Y,Xf,Af] = ESPER_DIC_12_Other_3(X,~,~)
%ESPER_DIC_12_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_12_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.1861956506633859476;4.4925750222021960667;2.8238984005627902896;-2.9353162032954767113;4.1941334847168061373;1.7494362545839641232;-2.9566147072419197706;2.8399928347478851087;0.21209366729865328227;0.65716328226877562813;1.1855577659375726718;0.81248286778264011687;-0.88478512179541279892;-1.3895178641575267608;0.11693677234378616059;-1.1708031717660947191;0.26921783888895189918;0.90584462937861531806;-2.1776372053596806388;2.4252893516548272856;-0.63015104413967237829;1.3422403134519913515;1.0646988830192818387;-4.210368246406662962;-17.091627260220260354];
IW1_1 = [1.366569672514150291 2.1625545559760923631 0.33719139421958022051 -0.015583313620285976775 0.45930702952052854249 0.79268039368037845893;-2.0597234714706180725 -3.2693663073705998556 -3.0437696804344946955 0.19759320674304464704 2.4144688686136004385 1.5608817899810578655;0.065890984027210872109 -0.20488835958663845216 -2.318153339793485479 -0.9868867825386284931 -5.6637076981558589495 -0.32860405936163994411;0.7625409112740751949 0.61647447418441769784 -1.2316082592066031065 -2.3121751425477650166 -2.9896537937521565631 -2.0173549102597947424;-0.052572829295225033397 -0.17691656023994609126 -1.5377175824168092255 3.2696591331885938025 0.78181104722188976552 0.96011292153438265728;-1.0897593773130784811 -0.11254220530829987801 2.2626229337655487939 -0.43343465424049093526 -1.3306798461652507015 -0.16064478457006675649;0.52527012292113495207 0.72773642027907214924 0.69272660852490186567 0.61691283129331309087 0.18244882761934821946 -2.2036015962394035483;-0.12712874421998549002 -0.13798398223356930781 0.29589342646839850159 -0.062758918896430496148 -1.3096232954485058642 2.0243843260461460432;0.26368031680753667434 -0.14857045688023845509 -0.008148879613973642258 0.021577641393677127191 1.2798766492283988327 0.81053581501494509354;0.12678258859957255988 -0.30306967182190747145 -0.8170829967263524285 -0.14747561559953978327 -3.9790235448149484654 1.2632017272665008178;-0.71466960450968641805 -0.21179361285499770373 1.2204769567926814222 -1.0335751270048356698 -2.1554924260993479912 2.5028140664542264382;-0.61028297889745641847 0.67665951615158570487 0.63726705574524167286 0.13716733481330831146 1.3571031344318169598 0.46285358251870589719;1.1751567077576321463 0.92072970283497568289 -0.81425305191511387903 0.0074622337440216259669 0.098235462712791807305 1.035871674399650777;-0.12419151818350745997 -0.51803949216068512218 3.4442823405062341635 -1.8670316626728726828 -0.94262344308553303041 0.479502268920028063;-0.36046335141397933821 0.1119338597853002798 -1.6815079969801873805 -0.3632287903569053622 0.80931563452460042463 -0.41217591104755729736;0.01636829228378290646 0.85054568250487294634 -1.8700252788377969004 0.045363554152240130601 1.7366029287542255055 -0.25679059636363316121;-0.27681453619873236383 -0.044502929049126956074 -1.8218052586875728149 1.0187064941394849971 1.2633645277978220456 0.74295822171342773554;0.57109871691036451224 0.73739457821237319735 2.2439576432060994726 0.27501589218427563432 0.90217142996572208258 0.76321712190368451445;-2.1938881235054936703 -0.21144686583714664141 1.377137575502085598 -1.4887124090092915818 1.1089143924698952048 -0.34559524296303800739;0.29363020303669801203 0.71648980056491951007 -4.3285392102961486316 3.0391066305235754363 -1.9087019804874267859 -0.95600292894752536554;0.60109215202116983434 -0.14951288525762038151 0.44051676779504100878 0.052633700924154008804 -1.085198448469571586 0.14364039988287410909;1.0992117767064126799 -0.47580180502051339086 0.62302396808326676592 0.047729844006406389745 1.7675655134870735807 -0.98623195072634162184;0.68825346367894435495 0.46393665423637653333 1.482995356037196899 0.076368125670944864147 -1.5457199610443479454 0.36872607023974185436;-2.3458063978659953186 1.2793511532024215427 2.461498380022431931 -0.77747229164179498806 -0.17061642316801675645 1.2135697567549146303;0.17209772003619877578 0.041802598226208124987 1.1128781951261803584 -11.16338902773475894 0.96467100756781520854 -5.332812226370782227];

% Layer 2
b2 = [-0.95694926063572527397;5.7262310534805305196;-1.9983701242943616716;-0.14555047051517533419;-10.155126924825164991;1.155963584043296688;4.3731208937063756892;2.7079641783564065705;1.0295682811572997029;0.50877208646198013309;2.2610142134939370528;-4.0984808041299238823;-4.4065595586153376573;-1.0548318362452824282;-6.517016504943884847];
LW2_1 = [2.012047883089724376 0.036088472286162021074 -0.036884685140565719175 0.22592348921866586831 -0.46076907371675707159 -0.21142459468632390784 0.92516171026289872881 0.40807229180741477759 -0.43290002862889176427 -0.47761162128323159104 -0.045795936254088308315 -0.44675656865561541586 -0.5224259655750820297 -0.36362868855271235358 -0.066523546725039281458 -0.20616005230364864431 0.28312304428372669918 0.03792560018280768247 -0.59361846081214109105 0.03782688341801821591 -1.1833627187338611186 0.50266107645589463981 0.39599479939921450322 -0.17972506534541352052 -0.88223761346655260596;0.76070754437122178881 0.64018284296398109134 0.69057337268669949371 0.26649430630716208768 0.50718979372797912131 -0.1990295633335561476 2.863388045765208112 -0.72583667939064400176 -1.8666517763153178677 1.5399260778117811466 -0.16006416188256505917 0.94591744306099545536 0.07281294734492228804 -0.54140900203558139925 1.0590179208858965243 -0.0095665607933713425748 -0.57035141454740878597 0.20136045603475924426 -0.41673694206357714265 -0.20095846360752556148 2.8074068419202067304 0.16362603758408472698 -1.0946010031239410409 2.0312549432945599115 1.0987168081888021298;-3.1820149737628331543 -0.59787378331512031071 0.69840615101844549795 -0.54556423479634030826 0.99094977721125332426 0.2252705187588727731 -1.4161924291398764186 1.5175839807360549383 -1.4709516413355356867 1.6685075347625484277 0.11361719961800599565 0.56372507168609875539 1.1554237390319148648 -0.56546362974335817597 -1.3549753773653914202 0.2514969659039659744 -1.3075913400156187194 -0.0407463740358624954 -0.43354398374144742512 -0.052844885411137437758 1.5602232615611983935 -0.58901050516761077613 -1.3914606206110033959 0.35239246326182449565 1.0876739858866733002;-0.023487506350474134098 1.1600074970074896186 0.093386216945573044534 0.33163552137669144448 0.63943108058210318401 -2.2208185999551797174 2.3861283103516983672 -1.1987123568882056546 -2.7573756385749472742 0.52557669812562834988 0.72722895549253652181 1.5175736423517793838 -1.0693961491129109209 -3.0563209793409229498 -0.1917840625829934087 -0.077700568997504812496 0.7205661508604938037 0.23279596198228119652 -0.46484998674548078101 -1.6092955331355791593 3.2580876320712164329 0.65752208646219101329 0.15011718192652159787 0.74549110829269060741 -3.346009031553021984;0.050288948872646982435 -0.52811201192753620681 -1.3865420828450865098 -0.62718031636290483277 -1.4703338802753789238 3.961934723415242221 -5.9170893933852148905 -1.2066650089484827202 2.7838312599868482167 -0.36917536686003543656 -2.1709794828154813651 -1.8116558854921804844 -0.30075985425710782817 1.5352255435655657312 9.8130896241060412422 -0.37013679805347293739 2.3355599446594292878 -4.7161072043007710164 0.32151703020535948863 -1.0463911055350694213 -3.4344598959666776672 -1.9996808410934376887 6.5084758082687521608 -0.51180881825678614661 2.8579801687250201425;-1.3578311167414103267 1.0029011678110020256 -6.7024460152013674019 1.3027722616050338988 1.2518955968025315961 -0.83089843264205875961 -3.6493779126836902726 6.8867120820971692297 -1.8543364122877308287 0.91914442236672333486 -4.8274168873226956933 -1.2427696638307248467 1.8280179928974931158 -2.0674445141463557718 1.1036797600186678547 -7.1195067938905314264 0.30548523926010284768 5.040791978351595759 0.91038167095914579452 7.3117418755117320472 -0.39706886774289756881 5.4104626200905814315 -2.5617333650980560478 0.96642835929275949791 0.8682513469854987731;1.5583017608876383875 0.10606673557938869901 0.77091024291170429095 -0.5986296581319957566 1.1430100499162672012 -1.3428785095441326813 4.0389677382023352337 0.34425376506317617586 -0.89940458314724625044 -0.60059261743041525428 0.41766949950865195351 -2.0956177880489312848 -0.50689115421744601608 -1.2204129838551758258 -2.8469817175069516146 -0.49518615655273262588 1.4996538911442411912 0.10071534430235930258 -0.11079604853180827218 -0.5499890177827440052 -3.9213733709930140847 -1.6789599154731269515 1.0862275714416389505 -1.008315206910549211 -0.56021562605538810509;1.2406205260194582696 -0.19316671250546990635 0.50502594034288073033 0.41663049529887585809 -0.21630551340221379486 0.31760687030248185847 0.75624929331403412114 -1.0601328370764337983 0.57075596563695063512 -0.98821994047776118286 0.72349864469436608871 -1.858479922476370394 0.19579001653179514686 2.748495727537684008 -1.3153102131638665373 0.21341368582762695882 0.47128198962603451427 1.9691131493175768608 0.086497434316292795553 1.1726712435945858548 -2.4808228806898267038 -1.639798488446763125 -1.1399528741119524522 0.71459282443502392113 -3.0848469073625000014;0.6147966287000454777 -1.520126577209774732 0.072139300261172753514 -0.048587554566587726201 0.57500897465130906827 1.5020104339967577101 -1.5350427295402950811 1.0825809843941289756 0.91093649853385338933 -0.36896362261790510706 0.09468130124414242399 -1.6419137578513545161 0.39317345611759435542 -0.091579947081400089881 0.63107273542498465435 -0.284242210692438102 0.27787648520900509741 1.8961692056989098987 0.351691458423845138 -0.56490322609498511142 -0.2874488481232214121 -0.55905988789561555929 -0.88204831333991018383 0.88418403502786357961 1.1003689062700818813;-0.75123070316670625957 0.11445767822754332466 -0.086030803393371671484 0.2994789946882455145 -0.017182809869627155286 -0.3395578530475353296 2.3661953560058277546 0.71870434258725479637 0.23563122614539325217 -0.056614875342760440091 0.013044697447394589321 -0.1548580210624411202 0.39304333490408421836 1.517474214725306636 0.49454823442810652567 -0.06150807404856457189 0.73616813102884581799 0.61733066862001773067 0.096070146294466807202 0.46465341387359759828 -0.064658108031933225757 -0.43871105653487063591 0.26204323834489706702 -0.25510326393344445739 -1.4700994695217828312;0.04078899201390751017 0.29411498779313000052 -0.5286359112625766965 0.20388931218590680694 -0.94019544758650985816 -1.1920785392346706644 2.3231679921894152763 0.64251671526412157398 -1.8868554226469074209 -0.27291496992546937506 0.29813614638345331542 0.27592668541285880757 -0.26950904944034737021 -1.5740365712818040755 1.0348783399000891503 -0.3831589768385685324 0.75529885467859325665 0.7234573234494064975 -0.6159991144507293015 -0.63202978917424534888 2.5352573531354640757 0.20491985698660994397 -0.14456430232379413603 0.37960243169406615582 -1.035356702801845552;-10.831555703186072748 0.97604975822190109813 0.16171045660253272058 1.226235776831382962 -11.350097129939799245 1.3262480638571327862 8.8158012131436613856 -2.5369846064757846094 1.6292969098741816314 -1.9169949779928701084 0.90293717982249777076 -1.6489819794262738917 -3.1368604706393279358 -2.4699484662069246532 5.5982809886244595532 -0.12011762102557503595 -1.5809641521694532962 -1.797364324683288439 0.77670316008234652205 -0.60011887287269238822 7.9818385746336240061 -0.51398418760315556231 -5.9925891896341232368 1.2320821766194876012 -1.2260845198135712497;-1.3227468257626999737 -0.2661312143853963863 -0.8237426050915443998 0.47854024839714942585 -1.0841445953563673132 1.5691604963395568983 -4.5692439929220096673 -0.72058717543900763225 0.83004367641650489418 0.66846263499068792058 -0.52057469541886891573 2.0890148252498965675 0.65153883238376308906 1.4285534170783529273 2.8940052281106858345 0.46386042370418273384 -1.3660411735853801307 -0.2714790681631087943 0.22701931304429973091 0.692342338620498432 3.9707088864792505767 1.5178197643942930029 -0.68395838851044687967 0.81985521684061035685 0.46418601940532105976;-2.2175625843756314737 -0.88105956771815530093 0.12382254501395634216 -0.15035852014527792408 0.20779952700625650697 1.2826534194181415938 -2.0157042879887603348 -1.4269614987764069891 0.19581246447474490169 0.08913556067595132526 -0.75600155530853552222 -1.0657942893361558312 1.0070930975673062502 -0.6664463968086227208 -2.1633860279612013855 -1.0308290830529511783 1.3185010217415082945 -0.31518784885384387717 -1.0059571809440321921 -1.2622901997258473283 -5.6357268303189158587 -4.3017004391613635761 1.5121861386661954452 -0.58469861184851623648 -1.4191933620231840241;0.36997269750509537145 -0.57402665234718142084 1.0950213477551891117 -0.93276537912399859476 0.426377368063082407 0.79946824795624304993 -1.6782191042989260676 -3.9653889711961869402 -1.9956390570457338551 0.93556489867743175548 -0.82937780348480405479 -1.1317033971997987329 1.0650116337972486136 0.73206397775179599119 0.18162009709843518479 -2.7794611722227506867 1.0419590891714829439 0.6046901177365036073 -0.3666553185673691595 0.53894475196207880519 -5.53709497550928198 3.2025078436860177078 2.3651151149094657988 0.1997663729416914169 1.1498407394429901451];

% Layer 3
b3 = 0.72589560890816784422;
LW3_2 = [0.67779457606761228661 -0.27776732557248401401 0.18350418398845355639 0.36363816877443161379 0.083859003678829036055 -0.45609711064096170041 -1.6245928186877285349 -0.2252010391235929887 0.32138659696422905432 0.47092016329106045625 -0.62866757214513524499 -0.3372782499082999097 -1.7480992002205884006 -0.43636619576886109817 -0.33933703190158231999];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
