function [Y,Xf,Af] = ESPER_oxygen_7_Other_3(X,~,~)
%ESPER_OXYGEN_7_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_7_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.368820936555796397;0.05534802636569013945;-2.6638822055819866286;0.0027723191570239776732;2.8627104109590355563;0.74865583318311113015;-3.4867745950415494072;-0.22090771480051513143;-0.98143709207169460562;2.4375546910836765058;4.5258672235099091097;-0.50426151345864866915;0.25338592938322157533;1.2003978200850313751;-2.4058191616113675515;-1.4187582017863287209;0.019296195802844220285;-1.3044518354198779697;-0.54757641338639273521;-1.2417335618066538405;1.014321404346393507;1.637859611288989381;0.473309866738336249;1.6272332417359212098;1.716772296218963767];
IW1_1 = [-0.041532702105299634798 3.0195422806695657592 -0.081172433231864904446 -0.041238140178958410109 -1.1862753054349681747 -0.30987535776564617551 -0.1760674632157926689;-0.35668432573658503948 0.058450045986062716674 0.15585619181220611296 0.75034670810008530228 -1.0267937651761565032 -1.4631463129689989966 -0.16195449287817420547;-1.1058758606911436306 -1.3150771323970831261 0.97357519757148458517 1.4746254643953022878 -0.43725104056571639788 -0.96024624173389039328 0.31449551594559599366;-0.37727439188710010232 0.14470050382356083873 1.2799446722969911594 -0.11044355766311181322 -2.9906590629160056949 -0.49113364512050894373 -0.93487763702471871063;-1.2884262586178054644 -1.0576737336213450913 1.4068301533277662863 0.050377098435228750972 -0.096012458454791199669 -0.64823572231001735933 0.6638140436524021526;-0.55525758836909067107 -0.13979374153050708185 -0.098903090818128744366 -0.70290042623145587708 -3.4142453569905355515 3.3292439589733211491 -0.011802497874453249729;-0.032992367148940479615 -0.16476508777262496852 0.11705676287516635081 -2.2399684386748113241 0.012862892717679361154 -0.99454244066641095401 -1.1065839768745691085;-0.25022414258817049504 -0.40153011608615440942 0.56005470248221012053 -0.1465015345356270593 0.88185398540909598619 -0.55690276820555473236 -1.6349245604739675031;-0.48253018434623817789 -0.024917028607197893447 3.5481876132837775195 -1.031593596186016093 -0.13502020480039769734 0.16895850335482537341 -0.53384910846264976847;-0.0084839836898802940129 -0.048667079511507019274 0.027902953448130145275 0.28614910888455269422 2.2372862530617290133 2.2787396579738654623 0.2042704495607140236;-0.94731877473422843039 0.60806838055980383384 -0.94496449874116161816 3.6198358177730147744 -0.92361690474803659345 -1.0460176239523815145 0.43047112633323070252;0.4613288843497546643 0.74132897704560929419 -0.23549170934355040385 -0.6291990004676246695 0.50649409647469834095 -2.0216902021322056271 -1.9393770675497452594;0.48828320404394970344 0.35580555279526437928 0.26122196239975770116 -0.19981354138053517011 -0.91078383943901475295 0.54326590358042869955 1.0135858801910673233;-0.28773529244022338913 -0.36737903798060578264 1.3959440312766000503 -0.71994994620303820465 3.1338149595902913269 0.76087325376574321822 0.67631318007701135553;-0.39638300582433999564 0.77562743683375479087 0.666711434959232907 -1.1600730176292137763 -3.4702888988200402132 2.2816015328919059257 -0.66195967457289395242;0.19302119211178558889 0.2911024114477191449 0.80138651784102610254 0.04574650520503765333 1.6736418783465878413 -2.3903365716125231089 -0.23900862792613944419;0.57250171620977663434 -0.15363402804225678722 1.4244948366034484444 1.4006572007751065811 2.680158463767903676 -5.9416627456842565635 -1.4343535521879251515;0.078485949671380922377 -1.2967087717499594657 2.9470497384931899632 -0.90729096999537028889 2.2202492461617122643 0.85127255747199725988 0.20172196418131482787;-0.49660324811529499289 -0.03299165602411305992 0.93739203364006695729 0.58184598315896451926 -0.012749786287951907909 -0.0066926651133242705261 -0.71255065466944500496;0.020105167208423882497 0.19708423662495183626 -1.3379057401516172288 0.38759244036020390478 -0.043465851710790169571 2.0109856829047019211 -0.48357302119281997399;0.73185053187713566825 0.24038176673327088517 -1.3376026502297371223 0.84105418165010947806 -2.1093404020063624138 0.30182467144772101575 -2.1200802072118456465;0.58549030109692146162 -0.40091600250798081762 -0.98472949927740549558 -0.17227236544381352434 -3.3625280796400747185 1.4812447382561397813 0.41985669317132223721;0.1735114386369257522 -0.24279022030479005534 0.6647448905656345719 -0.21932508404239101085 -5.4529445989956810692 -0.095829720766477111127 -2.2447076048836258622;0.53981172168827651348 -0.63356542625884992859 -0.97740025848784140017 0.01579589547362524049 -0.34317779901509770646 1.708905425603835404 0.48723790631721408673;0.9759531012340671996 0.7055000112563294401 0.77853887833058921242 0.22977129670435261777 -0.38104052486913470021 -0.84330972510919244289 -0.60566479877785017738];

% Layer 2
b2 = [4.3987001984041924629;1.5125069964031230274;0.64429267232371245644;-1.5437315813675576148;-0.70565327683883738441;-0.79954825387734529407;-0.15314433671257279834;0.44863947994060848767;1.0622510258202202404;0.12526367461873622045;-0.18763186092043437903;-0.87935075336150503311;2.7153881348304631516;-2.5121610305171531152;-1.2017003505494030513];
LW2_1 = [0.76623215037110692371 -0.10817462741809354132 0.93098060382049774297 2.1413998605547188703 0.42910273297182427443 -1.2016454117590082973 -1.9279022851513585302 -1.9051409658537805658 -1.4706664172265604407 0.25734347859667078273 -1.4267566206766213455 1.1183478007657361442 -1.8773753171782017191 -0.23226889979660925167 1.3163608065998471108 -1.2606897636300227195 -0.23125969318260625185 0.070367344462959044438 0.64492739754207106806 3.4950832562126032954 -0.70326965598264068458 0.65120052222231739059 0.05619062875268726609 -0.73591260355674392724 0.45554629395724072216;-0.48337419393047059701 0.32950532674272586808 0.34999879880753087535 -0.76196423081792641341 0.59109244105983715922 -0.36297166365590111115 0.6939281900930722724 0.085729097698520079218 -0.29419570788390148053 0.51863348911132323149 0.25229487221375751504 0.46347807544490582377 0.36881818362032009473 -0.44002214990909688241 0.33721417824372906802 -0.47918795675183933902 -0.235242697748195978 -0.48922143191102368531 0.71943682596849911626 0.030619506602851679494 -0.24049034242903266634 -0.67321578015092831127 -0.037896901835476393128 0.94917192255726434702 -1.1665632954168081437;-0.30979689851770547682 0.43769006233590129762 -0.29092424132158561934 -0.10181366005104368344 -0.5386782436338816149 -0.67561266052288027062 0.82709081475519374838 -0.27444198704624139795 1.0616786820086276943 1.4288389496984599258 0.62294663456735832607 -0.0071434916918633618171 0.17021113929262537967 1.3476670354868740542 -0.21803538263553576271 -0.7729487298734243339 -0.39567179341712527263 0.73963791303109915898 0.97193480727718084555 0.64622506976966120895 -0.35607320823599880599 1.6407457061355772421 0.10039549790066086554 -1.4879231886580601696 -0.15252526544033859213;0.6523585531740698773 -0.083167511415445413703 -0.20810374300723116781 0.61765368598921532861 -0.51327612215704765397 0.29970937552634835388 -0.27837365322315787974 -0.28274540332655262453 0.11348709119300171011 -0.26025301013360097047 -0.53534005757106328804 -0.54220412459468214639 -0.32443880568364091843 0.59387350073842859466 -0.41840320743967851502 0.3636666966915139132 0.26077225148172178404 0.3336471860172224857 -0.45456972606264939296 0.17112324695471228808 0.3499096516536110979 0.8618522441249586441 0.13269388657081263028 -0.90192933060558799774 1.0905664692965955087;-0.92152230103529264582 -1.0302044358947701763 -0.62370357516605567927 1.2377315516956581831 0.20122490847379964629 -0.15587133772940262033 -1.9006796335918465513 1.8104021415655866534 -1.1270139920482327156 -1.325071423105837809 0.57684160917376336997 -0.60650236710802829521 0.95971410437218285239 -0.38998213136081422148 -0.054736995932813475862 0.26092528673099835146 -0.35895109602078006938 0.59325405448258394792 -0.38761068873805359924 0.41108696657573656763 0.41039704348067462814 0.32785354631466762099 -0.72555883713136037905 -0.86916750102031659075 0.075685967006981713645;-0.80547801510463312713 0.18117107762614267918 -0.30566920366083200067 -1.295014885045798092 1.0855026914186227671 -0.19131697368042752117 1.3644583124755473857 -0.46281368718017584785 0.77776129045345065993 0.37436612344823128051 0.76805360650478737838 0.51652385124653577009 0.292236899298092212 0.019423307507227330349 0.84797624460106013622 0.10127172545993406994 -0.35954668248993615354 0.36630687528585564872 0.044029741575333715409 -0.59048141351771843421 -0.59410960245233812582 2.0816083026279947887 0.58289118621614000038 -1.8367570380996234292 -0.2712996053424319709;-0.43895840540531300134 0.15575369382626894077 0.15061517051032344283 -0.83758075555147459834 0.18573145653298567259 -0.22411147563081870726 0.90663109472746616913 -0.7085987783232083892 0.73846473275931134861 -0.090464582647652336256 0.5909482888862934713 0.42441975503649709278 0.024235091320324773922 0.27134168665091240591 0.74954528665318453928 0.11618778485404362977 -0.32358812330979114247 0.14519294057313231194 0.39591162201094864947 -0.54529438344855996057 -0.38140152169883223543 1.5385683944159131986 0.26828737712330497089 -1.1009161787849917058 0.0078559159064578373832;-0.59550938747640902449 -1.1171225170288006101 0.65942582868776677962 -1.0275751651758930905 0.13842694510783520867 -0.32780331094143011494 -1.2584046868691403098 -1.4208698197030258381 1.7934670399765280102 1.9687798725878054018 -0.64301451111334984034 0.6190664705298871695 -1.3268867542543800742 -0.38559371355501748102 0.43418545720153295386 0.85536892579396872627 -0.19956251297367696984 -0.29453284410764069001 -1.8270970847644194546 -1.2789457173097076303 -0.3057851853687246213 0.30735020471883861548 0.2586069028099110545 -1.1594142078386329153 -1.5367789970198466598;0.073558343091511907419 -0.57405081036583494036 -0.18578714272047461287 -1.0095525490234196209 -0.086500360773987663987 0.6398250498859131552 -1.6423288905927071468 0.037665799411334702218 -0.55176161679520030479 0.32036093412628741106 0.5423991808181695129 -0.032941840623029863822 -0.45167993026631148012 -0.8611375474082546555 0.14573977270788154859 0.63565051201330680097 0.062949607170497801079 -0.11795925503812892954 1.5169932389687130758 0.038739683108613851004 0.17450850601894885017 0.55196068834731881747 -0.11604701303796538525 0.28784910234126492856 -0.51518923937068605845;1.0315223592406477238 -0.0028097950260208681 -0.46280825594029917358 -0.8936912530605319871 1.2006542914391100663 -0.98296812289309032362 0.016793285023008888007 0.18293853959457645475 -0.25954536239961772948 1.3837507692992332409 -0.5147401824860374786 1.0249716327144078321 1.6155077003451316919 -0.78253951849706437915 0.33864380010597722181 -2.8614577752188314896 1.1286273863028029041 -0.40341876269132476152 1.8807155035970100077 -0.12279060635561798998 -0.85886118798066946045 1.0807837242716304971 -0.5094066429536658891 -0.98563371148260570109 -0.25950461007918762535;-0.86725471290846667394 -1.4456791026075850315 -0.021405889756321357098 1.0061067431381816029 -0.51029253938695873227 -1.1042400384929513812 0.43212214585653618837 0.52532670192066788228 1.0411423783011408695 0.62973145395877261343 0.61387773964480274458 -0.25349677047260255058 -1.1300551610390972002 -0.6467727551869195679 -0.49550026035419703074 0.011064924123193089697 -0.46620806904645906155 0.51474009197400349969 -2.6578222991367126404 -0.85608781806907852108 -0.57034554608168530621 0.48209414344836348798 -0.28118829303722292501 -1.9188227107330269039 -0.55154961967670901313;-0.13221639865139214742 -0.2817134260445841587 -0.99835629384450863544 -0.51061404986743119672 0.049101428379037921623 0.030394239798167022037 0.6936136275829164477 0.18753381826808873667 0.002727628821052032089 0.36477351719715428446 -0.28587878445802950012 -0.12676587833178229459 0.22872261452977213358 0.089542509047315213544 0.18628738849763948338 0.76037259316670646747 -0.056418516544911097299 -0.042433501074426657751 0.92983124311720832811 0.38882218617113506465 0.0065330228740226219467 2.3314828579294490929 0.41759198316587542443 -1.7167066883509505271 0.050020428880885925427;1.6560937495779217699 0.040233802976012610075 -1.0190972448145474427 -0.64153632095372825628 -0.015498827882348575891 0.014323081854898741735 -0.42482617630170399492 -2.6954714940221204955 -1.1441503346334498392 0.89051978665084585707 -1.3683447999496340941 0.38232037774078225789 -0.33467698345363333656 -0.99983989540501860827 0.45073001735933915235 0.32921657304022300394 -0.40401036674612755828 -0.81248658106145521529 2.0498754286557598903 -1.107027448208019571 -1.2870135851797641635 1.6158909285187963434 0.41850923803096656828 -0.74284881459663021364 -0.2072373885644425151;-0.22353688780089273069 -1.2694818879784897092 0.59784281966125663033 -0.10910110299764519404 0.18232603163676830427 -0.2520117744611830024 0.13759562849187517708 -2.1397534955524180056 0.27119800827039219904 -1.3572388570438647104 -0.26415234984331853463 0.79402771601576271898 -0.66283013996258555167 0.13776415692143134661 1.4953808086378810316 0.72486327961954466481 0.12583655509652680315 -2.7476273519542857571 -0.56123938669250683642 -0.20086162784536829018 0.9849968874973840105 -0.87483201771605667574 0.43227147090642337179 -1.0675026076457014845 0.69425421349524596426;-0.41410330257802085985 -0.20615770678723047138 0.0734706706683845856 -1.3951388250796399326 -0.1564466888395434907 2.1295175283648393183 -1.4160555470517410814 -0.53949776184819231428 0.51087832633005303418 -2.3179713027284525317 1.2933016527534948459 -0.058141836740099199499 -2.1058459938750417884 0.18703013236514387518 -1.6276002261940953897 2.3964673396032973862 -0.047515960187420755445 0.30705345424815694289 0.86026272346155141513 1.5242252280847934376 -0.82861058915157204119 -0.67526409812030063762 -1.0773968114146228459 1.6318154910764244292 1.7447344355514717851];

% Layer 3
b3 = -0.21213058110791810362;
LW3_2 = [0.43546987466807779432 -1.8166562121991751688 -0.36653726529123731304 -1.9890958324390719536 -0.49486402283822567005 1.0548369345601589231 -1.7930527077630500354 -0.27736468781474371559 -0.89140454493238086009 -1.4477428311282780626 -0.3826635228351116802 0.71959671523537016569 1.6884161231361671796 0.25375394884230934034 0.36657619850907496861];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
