function [Y,Xf,Af] = ESPER_TA_8_Other_3(X,~,~)
%ESPER_TA_8_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_8_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.0342618710967101947;-0.86242743814777256262;2.0054575538995127459;1.6412236585065766992;1.6013060342962623928;-2.6327066075292413494;2.663180217900357416;0.04265071198991780832;0.051778115085482336044;-1.6438174318975296018;-0.51781826672893604968;-0.52801026771043979569;-1.6144437430498017605;-1.72726711350171791;-0.30630101774437962225;1.4650587422855390063;-0.77370549507302177616;-0.50635704923514690545;1.5206520777544192402;-0.52320995667268521689;-3.0567869510288292467;-2.3896402378498482477;-2.1203231597446072776;-2.6125512132454402625;0.18870440769004070969];
IW1_1 = [-1.0790231167799262391 -0.29885698109570862924 1.6333043751657536635 0.90109917256271365726 1.7343905921591962205 0.44684086163952629889;0.4215286269983847256 0.24412360222050111247 -0.25041927013388226575 -1.0829010008594179837 0.54641832442860038821 0.40614954917127410461;-1.5668245792074599887 -1.6794045059378459595 2.7514087411247851733 -1.5517370359524884638 -5.186959652158559031 -0.74927995529785373918;0.03856525733685084445 -0.38894123451116791035 1.577923360684214904 1.4808185008078558198 -1.0246103276392695136 -0.25371332138497421083;-1.2351021047293593291 -0.14660858157559156223 -0.46319615578737743933 0.85257561406403581383 1.1143319079527811422 1.5498167109486482573;0.51777540846434721988 -0.95166219340315938435 -1.3864376947931911221 -0.95397373410349828315 -0.52611513863064074403 -1.1331376342647354605;-0.19534118657633223193 -0.54292700556880246765 -2.4995237671645296196 -0.54458254797548621973 -3.1840751689539374958 -0.10621841805728156338;0.011527033149172909166 0.17544603152489549047 0.84273785162725345366 1.6722822580785596802 -1.9380462393494470863 -2.1923919068503425756;-0.26303797244635324093 0.10136181499295286723 2.8641344634997474294 0.3959603051459956724 -0.47655104927917268931 -1.809274655663681175;1.6472376964244843656 1.1743749803352712124 -0.14702343330052364268 -1.3344722042464030043 1.0370479133884087375 0.39343774113120938418;-0.1470040424512875088 0.24688246129227961467 0.53471215629059209995 -0.79556557132338379112 -1.999609737129153908 0.43899503095372438555;-0.15034498042682528651 -0.022817216998982869924 -0.72193149021151137301 -0.31298568291729766955 2.5448895630863765938 -0.86087639062898879683;-0.36982668938991380969 0.0063230042188210820384 0.87706143730289098936 0.63607309221189212156 2.696468150336516878 -1.0068180329371458903;0.1450701568982290246 0.11120855301151894023 0.98691809521013407203 -0.57026584570896543536 -0.19823120964438809 -2.5117548893299841417;-0.46781775492267374528 -0.11742006606120708456 -0.66046945623480746157 0.66837650855385499771 -1.8127519674425385254 0.051809387214131530364;0.0374387573986446065 0.26130132473184364272 2.4960380747837596083 0.28604146959609272338 -1.2153839478789909556 1.5776545130511951953;0.43267856583631547629 0.98353870805242871178 1.149551126959735603 0.90638776379436247765 0.74407218848009704093 1.802044621768973176;-0.48001448338020752393 0.87947238797754656581 -1.0125752175274220779 -1.5547494114352788941 -0.79360784900450331847 -0.4608587916849585242;-0.035099410896002374016 -0.028697628627582086325 0.65335201541964704752 -0.54483962806592378669 -0.084362986301195250216 2.2297376159852055899;1.0152877965629092394 -0.85468616795809360109 -0.78633714492015294173 0.57347067372106574901 -0.50292144415511774724 -0.93437684302383727797;-0.46674571555648713961 0.14395402380945337972 1.9959162557391416648 -1.1474516922804911534 -0.92418402722138359717 -1.8351951934763794938;-1.9540791318506289809 -0.22038479050073347953 -0.49562550620958001346 -1.7881370098228275278 2.5380871034549583598 0.79967142073810126846;-0.016261412194760700017 -0.088582044326407316515 -1.7468798614659339918 -0.83927559712914401313 -4.4878840004093447646 -0.51164697258232461063;-0.37404885602410614664 0.17067095409188434707 1.4259658584188614761 -2.2553491366870885848 -2.2083464290140004671 1.347305555829759971;-0.34107317283963223264 -0.049368903037907502229 -0.21855709577837456603 -0.72149189177581962706 0.18486686573525340505 -0.42437719398500889367];

% Layer 2
b2 = [0.089504706471897316211;-1.2312571719412850335;3.6607976309152308048;-3.3815440397904277248;-0.77958341828989508038;2.6289858336811948725;1.0369873796211999117;-1.5152166666570345832;-0.46257338731865810244;0.20712504307667087278;0.045705902750497587328;1.4708603201425434204;-1.7467138474769428047;-2.9291686268513732472;1.4999314397554897038];
LW2_1 = [0.49083352585416550884 0.87872755160471871516 -0.089745035227156946811 0.0053250681730917966139 -1.3284761918003769043 0.3506120403735558666 -0.44590242368699117836 0.5292219367723262069 -1.1316807907741270878 -0.24160826774874452627 -1.6759927249505452984 -2.0088104143499077026 0.33171670581813766931 -1.6481123788279963271 -0.99569796967655122 -0.28404859409226407285 0.14189673012094633497 -0.17230844536376668796 -1.51678551753813462 -0.29495245672111974899 2.161249792360628863 0.39577553275574556269 0.765921561597801559 -0.67420874614385428725 1.8380370939724206547;-0.16240837008595629398 -0.65666682449380475717 -0.24787389411644814019 -0.21832163260534712124 -0.58424929740039388548 0.46003359495885104424 2.2262836833421810745 0.16353652257708747864 -2.0576792979841243003 -0.013897504867650754823 -1.3135382523053866777 -2.4595952194827974679 1.0965239527048489254 -0.50273836608307376217 -1.6372975432874850021 -1.402608572689258315 0.50469449325998172462 -0.86218335144871927067 -0.54977723697834024463 -0.26496729717548173078 2.7598449948392169695 0.30086651568386774125 1.0142343643253377561 0.05665956600951734673 1.933931905142104668;0.10764272688982617909 -2.4128184115738418036 0.74550944804542340627 1.9655030865640268356 -5.9450140908985025234 -4.0001954306448332943 0.56840128477938733909 -4.3780077024589481027 -3.5410536760608857243 0.82638668427644335068 -1.4905566967371761677 -0.76433208072449931869 1.4970349620829923598 -0.31770670812117307591 0.093405975410708746987 0.56509723458751581759 1.8206702511081178653 -1.6309567840566703278 -4.4386995747584609973 2.8993349994684165516 1.4824892052682663302 1.3345450848544206934 -2.5589859630469047325 0.97878838000861301261 3.2897537745219569416;-0.0020633645738455524965 -0.7625677850809736702 0.3919443091284249836 0.040951772341628125962 0.096474926378673150906 -1.6085704944676342265 -0.17666720533717358843 -1.1523556837997541713 -0.22655071637109625016 0.13904127867014842712 -2.3231300275788835386 -1.3115345489230367804 1.0037308160531666079 2.0361951348891791369 -1.7976029846834007397 -0.91350940330316166005 0.94058633402939806345 0.03820587762793296871 1.19722845212454021 0.64032403725556141794 -0.57497001035272865543 -0.21112620718148369936 -1.0822978311812456731 0.065649956853350385777 0.75031044542052538482;1.9450760535482281011 0.07701104136859576732 0.16595604014678966287 0.29032219409301734947 -1.3143532535922159976 -0.62092171558438058465 0.68765873979360869761 -1.6208367409130732817 0.16858512532357819436 0.69789704994957357798 0.16617556515846845788 0.64229753714324300251 1.3951583292306477535 -0.86111724937287437154 -1.1671906411567780637 0.49497090428630236003 -0.24254623552513712714 0.042003463416614289505 -2.6372157726697853519 -0.17591253878973134306 0.83591367670820904134 -0.14188433893002694308 1.0203371986824993911 0.87932118229066791315 -0.037191416845849430139;-1.0963326054733879555 1.4689623522989474491 1.4043900034161471702 1.7136647048426456585 -1.2707612854751624276 -0.16786499925212206019 -0.6196006335522747932 1.0192721363273598012 -1.7132193750533242227 0.2021515681113363605 -0.52499750549604218275 -0.57594313695389720564 1.7667218669950417453 -0.45232444707714880572 4.9440748833434478016 -1.1031132247136450353 0.15229676951546344821 0.36801580652759346979 3.8828958457395681414 -1.2010759861228932355 0.53311292800622511745 1.7372943247662482325 -0.36047106787477017908 -1.6559888599134247045 0.46244283345684444875;-2.4493936651370220581 -2.6425940157420706456 -0.53028254247468809002 -0.10192597676907573512 2.6407416319058252263 0.41390757712201692309 -1.7132836922665062307 -0.92646931324948156306 2.7400414923328422212 0.68876639054503652204 1.5051801958441852758 4.5803338375072968347 -4.4817837978858481307 1.211867305269588968 2.4381113194344403716 2.7509775998749925741 0.1577701348981573326 -0.039405654068227477516 2.2657282995459628872 0.93602030719700524131 -1.9263301436573641023 0.31977919970305002106 0.052282490382843348209 0.9438536653132189036 0.069830834237519262553;-0.084362125678453442346 0.47842352659171649698 0.05887848000442663654 0.19505489049088381437 0.11303831278331971655 0.022604053428679476284 0.3915355138202423757 0.087384700036621215657 0.093383659773157767781 -0.23328325395881158166 -0.70655102929512536569 0.037275622763445356855 0.81854135774632652556 0.62863460811660087924 -0.25865696662571613373 -0.27428105740596303574 0.35721141953126767099 -0.26374413388678219494 0.11799087997531310101 -0.28297062144738177603 -0.37423294582781457818 -0.075595925321962118004 -1.5090198612640552955 0.18942050496618612065 -0.043779141441950567004;1.9845610502291641808 2.3415714557886659897 -0.56552938417648546121 -1.0679992080189846249 0.76475279006099639023 -1.5323228868560225813 1.5339802330243623718 0.21145827746587092522 1.8261935016555492783 0.38606706315618188885 -0.72613138282466693774 -0.3911856735667151308 2.5875396475423038112 -0.90568657460442336671 -2.1516553023316373761 -1.1396042680206401876 0.17152039458357823398 0.20519767676147745994 -2.269630159296210703 2.4058767666555858078 0.98684176000113565941 -0.43843174540195051225 1.6229272378022481238 0.81682679855501028054 1.7142890852764276488;-0.77118519795362905356 0.68282087684203474076 -0.75615183079741421501 -0.40216173792338166804 1.3116171197076913479 0.26889180513589217014 1.0341906208569584535 1.0176738792333070993 2.1894395565249675784 -0.34191385901812132442 -2.4423347019039303163 -1.7144474681826666895 -1.7384601284456622228 -1.7506421177262105893 -0.0072892008243525957534 0.45393892825073023367 -0.10005944410388420418 -0.73331005915726199529 -0.019003684231930700194 0.7714404642890003716 1.0682138345179141847 0.18973887389525601055 0.93607980407751323337 -1.9248422303675913891 -0.73738283463183973421;0.14600720238478714919 0.60139016228446584567 0.1058617337280868681 0.42207746865772372002 -0.058110590034879748556 -0.37637702897321062556 -0.37905776266683960385 -0.9960895799642569548 -0.13549590053330415329 0.17747051150438797329 -1.2749674703745623727 -0.77884942269050738695 -0.21651339735534488873 -1.9466235094615689238 -0.081919590057577415521 -0.46841182965761191115 0.26759823309186042684 1.2360119854794071603 -1.7778872899510524963 0.48298216963208784325 1.6799328784096656531 0.25747815055259504202 0.34507350933470215537 -0.74275272229011912728 -0.044240382119621467216;-1.4931578503773597077 0.42903299554658885784 -0.52812669203820805652 -1.1026372678143321338 1.8486668376365729127 0.61889705461154576049 -0.84530634693392625589 2.3466233201809729714 0.40812774869979678849 -0.47963172630743405866 -1.172611572975768679 -1.4752502949339283411 -1.8031283695924602561 0.26002674468789649387 2.0880251751496166079 0.2232015704047531357 -0.63042270008401590786 0.032146355885907293426 2.22124132277055919 0.91432112595511183528 -0.84575119087285166586 0.13854925178426705235 -0.60924608782564693144 -0.18735305711791588879 0.53829617118797767894;2.2345175837029547239 -0.68877498028818229248 0.068581960646208833809 -0.54227238436595015525 -1.1940160240524815283 -0.85957954365436273214 0.10515819135742326962 -1.4967612214324614861 0.37422457046938578662 0.73596388083438846195 -0.52696209250236070165 0.19503371341643266357 0.1633344520445937087 -0.87318905958488979291 -1.9883548621646545129 0.97157019598422289519 -0.68123286130936877569 0.26959913761004900001 -2.9019576616541655767 0.20754513780375832832 0.70233919161843427759 -0.16470401512717225412 1.1791474516748978729 1.2631760981906572372 -0.47791155559744347148;-1.7917462942082833521 1.9086221484009666671 0.21734307463996022092 1.9054693009835561579 1.2997258474352439972 -0.068456598079385491684 0.79721784820398444715 -0.99962628860148672327 0.26074331971124803387 -0.66494178270364878713 -1.4743265905392253234 -0.63248133772020032062 0.6693954915942420536 -0.3310206382668567926 -0.59356078813223456248 -0.30827481439240933536 -0.044472362512430745063 -0.14397091058147501452 -0.86254863220493827036 -0.44775890379326344082 0.72091379968826840852 -0.68258271112350943355 -0.017825499073260565874 0.21506007525345030573 -0.37435698380925291895;1.9448410938548441607 1.9331396149398276663 0.56544937648354420823 0.28958664361344005345 -1.2279688068078944418 -1.181949245046202579 -0.6902961913757001966 0.79973301106034311303 -1.0255381240391250319 -0.15567359080818901629 1.8078749810575929224 -0.60335042081589140839 1.7006029407137204235 -1.3743884451314147821 -0.035064164273765158208 -1.8069820322210454755 -0.18615502288485757942 0.86598148775023897628 -1.5201344505443261657 0.066700509037230903964 0.86347665347531832314 0.40933066027992548452 -0.88611730433953994623 0.88286982706925820619 -0.22690061991493343241];

% Layer 3
b3 = 2.9267808152199337179;
LW3_2 = [0.72641312931021739807 -0.60431318445909976145 -0.04441590040853055088 -0.25317991894988589596 -1.7230354429453371701 0.040361685961444591919 0.28930771151154616172 0.82041722060318877929 0.10712054906505114049 -0.1611644734236121479 0.24398272515871893829 -0.58400254645016935751 1.297465885367458327 2.5755547678066257333 -0.15158806063034360734];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
