function [Y,Xf,Af] = ESPER_silicate_14_Other_3(X,~,~)
%ESPER_SILICATE_14_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:43.
% 
% [Y] = ESPER_silicate_14_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [20.076697145065129035;-4.7035917030498719527;2.7302611572961730246;2.5703864487275369655;-0.57211674293719172457;-1.488113824860335388;-6.0059480374337876896;4.5696779360461015074;0.66460038369525153978;-0.11743550447343852061;0.41103496078165746574;0.30479057793152136702;-1.338361228804345382;-0.4908906163048079585;-0.48679131404138231698;-0.68036700335395694506;-0.98638567057502846147;-0.77293730739352339842;0.40864142418868637519;-1.1479210913643362879;-4.2301375851463456357;-2.2171780323911955968;5.5909126425153798934;5.9545943592735337546;0.48323417096610415955];
IW1_1 = [5.2062205733204311997 8.2208768911362675169 13.342829130013337036 0.26841730841228694793 1.129682560859569751 -0.21250902052832465472;-0.45647494573168395648 0.86004641024071371014 2.1347282765675625882 -3.0410148859667875954 1.2777979556831018382 -0.50080679799465666058;0.12874201734101575756 0.042249985273085384485 -0.71896294011917982747 2.5323450898224018069 -1.6986129859796401664 -1.1269287153224147868;0.27629257381011329553 -0.051328250029563565748 -0.21971284808073104911 2.5639577643557736053 -0.95329559972396737955 -1.1696488990236315608;0.3245720382469423626 0.0064273853839830761073 0.77197830039207837594 -0.74864906505980099993 -1.2140469571461667275 0.99304484398096126707;0.96211716296896632183 0.44636261750967465289 -1.7302905098606113921 -0.53193485586583877378 -0.54783678107051247963 -0.1308216693702344835;0.25652283390196212176 0.54962437571927102997 -8.5116468728515908282 1.025761568226744691 0.48655321147137825522 -0.9324976915196359073;0.21532912904811890575 4.0134370029278088055 5.3450651425359172464 -0.064029491693181991852 -1.499401878241910735 -0.28664995480951249718;0.26857181573013227949 -0.99488292014899304405 0.31832817925997614061 -0.48669862359243115657 1.8026069018403751976 0.6785972119275867076;-0.211618096981823961 0.13280298805475160284 -0.12637199531406045905 -1.1364543219341414204 -1.0298099699300600207 -0.21288313503623484957;-0.68690244652357468347 0.82639223213127965817 -0.045190220972114621134 1.1878586800366732756 -1.62508098814335189 -0.27191986357785924433;-0.28742130973623097878 0.13244173206942549958 -0.037028526939014171082 -1.426923316969490374 4.838258516790162389 -0.48030373413552596151;0.081265905806047478155 1.1697211426041527194 0.85614741176937603218 1.7541420686882673863 0.96090211224755484043 1.1098240593138015697;-2.8403724679929971408 0.81465217246700138976 -3.3484979871603179902 -0.60476988085956251417 -0.75048479200488271701 0.61478627451476630661;0.089781194517654233644 0.56712023616381168623 -0.46970397739704472517 -0.17404668208293000431 -0.77922207712475777264 -1.2269277674548284551;0.98659253840196936558 0.025862321242470849569 0.91367623111512019651 -0.38319637985729393392 2.3874521802584127705 -0.86127733122161098667;0.40771578984526146705 -0.96405046909714631198 -0.11904634830401797374 0.54907056355723848906 -0.30972647051814378161 0.64218057838374109636;0.21854926165056395848 -0.081003633316509199291 1.0129011597345682905 -0.32563581400428098789 -0.66444177516884550538 0.58763949037969698264;0.90714354706375299742 0.55547767819582372084 1.109426960649373628 -0.26640793221978442684 -1.9746783591609595732 0.63300387703617655433;8.0388919463291674816 3.6699770161175813143 -4.572353128432878222 -0.19088549640782320749 2.2650684344350984212 0.28606062843725094114;-2.0097295596934130479 -0.74008282401435065978 -2.7652896419949128948 -1.6842144313337066297 -3.1656067561911092056 -0.54628836380026024599;0.40721958279966535832 0.31181918741871583745 -0.76662098294080094352 0.98434925489059099668 14.524006946338230861 3.2555254828455346683;-0.38419106521532397913 0.13426411535903667871 6.5925312636768360619 -0.048123750981493615408 -2.1115267543971394382 -0.10615537653253820372;-0.30210961389191332005 -0.049558674429053137245 7.2109760937940050596 -0.34492344961955756499 0.93059805043303489569 0.29471031842926720401;-0.054051971891916343604 -0.055855796512891291161 0.38253458753250885183 0.56900828256135582706 0.51857543517081594597 -1.4264513405476586527];

% Layer 2
b2 = [6.5878030716617512752;-2.9665242859590406077;-8.6469887137438181668;-5.1417484457184094992;-12.210264104933777674;11.00935061429916928;2.696111587535680254;-2.0136883880724605334;-4.4882218556643973528;10.200355589475266882;-5.3270574457408699232;-9.8919826066603651071;-0.24533601669088986319;4.8672170212175354109;6.3004288634668323965];
LW2_1 = [1.0420664621899986546 0.0048051094082022351509 -2.9713084908155167341 2.2171137237132905184 5.0268452538316914513 0.097796093112960891247 -3.1740207304509855391 -0.17938843744691676529 6.9746866658258435123 -20.441734775425885573 2.1049700850039516631 8.8988418996031821706 3.1420212185658864534 -0.39954319489273792954 14.696585282838174891 -4.2406807088588980292 -0.73460427887495771682 3.2530696521697475276 -4.9890624437636290622 0.6260301925579671023 2.7961380223634417774 -1.2864820075538212496 3.005954929900852779 -9.8932618616243015452 -10.493896333810502242;1.1692261263309622343 -3.5218962612790045696 -1.3497841159125083532 0.53907401272244848123 -3.4626912261155977646 3.3124771115513458319 -0.13229053033662502292 -0.5457330216023438263 2.4018761536718380434 5.5607826468795282793 3.3922313583882339749 -0.89244263205579554832 4.6820579194655156385 -1.6085720121576201347 -1.2224782741396047481 -1.1796790969609809441 3.4693401030553081554 2.9918333673671937412 -1.2014597358584810927 0.63800471111092771359 0.28730231259243149688 -3.2819909962261260006 -1.5037930602064886187 0.42872229437094183657 -1.3238971992337931205;0.54782377015948313659 -0.18205422770307302938 5.7736596409035358946 -6.8965550313584920161 -4.0035080252391868072 -2.4198472074777646057 0.92642807402787363813 -2.4004980920033336389 2.5162527298541621512 -4.9039815633085304114 0.20061098105878266695 -0.2347550542070800661 -2.2739472460660592468 -0.7666662086059516934 4.4824702503034776768 -1.7026569344209387946 -8.8022623991607602534 8.6778648773460478338 2.2315082802532844042 1.5848401279341131076 0.4472209220926833817 0.22820299948136688051 6.2582187096865764531 -4.1166473185146266189 1.3716517301840498444;-2.5900084274949342067 -1.28133808131882998 -2.4948593921569250931 1.8719852802389655988 4.2897512193602009845 -2.8247294385627257363 4.5550115054123212488 -1.7148586270213141969 0.38631809655874538301 -1.0877795823840699097 -2.1849785587587051694 -1.0294568501935201787 -1.2823293999507829888 -0.036722248565362256012 2.5870198789103961978 0.36896094176701227374 0.37825072060564240983 -7.5259918997765966608 1.589324101418736257 -1.8256695647649670011 -1.4374534329055650428 -0.92608055516703169374 -0.92779728495122404386 6.701290420236725609 -1.1220106670647633784;-0.82429570478462199645 -0.98328905719623238557 -1.7832887897286657797 1.8145501866013353798 -5.6091250747497367612 -3.8370468565807449579 -2.6724676653633863133 -3.6965391179726458937 0.38762911376885550441 9.726856007311875274 0.72891881780274325742 -7.8513904350564081014 -1.7099486276313164979 -2.1650663938795267072 -1.5357614986553349556 0.76494443490551411458 -7.2044071387307662135 -4.1077760475629485626 2.7069408204268636808 -1.7397464014666290666 -0.4508054130453699182 3.5062731242911913121 -5.5776215987700803467 8.4967272430316622689 -4.3376352768992756381;-5.8228451683013666695 -1.0195328627272446376 -10.214155910067459487 9.1549438089534920238 8.9332428078811645378 4.8790976986963503492 0.72375287543619959418 0.59831135491034970197 0.33738551817767342689 -11.264861883796147168 0.04842090074791520482 0.87235434651761689651 -5.2429395214989575891 -0.26825261692493590493 -0.47713854092123469952 0.88794441336516261032 -8.1269568548399568897 -11.788093451730844663 -1.6239005712498870704 -1.2470079750584779354 1.245369541076204678 11.441658306062247874 0.58287695893359903199 5.4794612657675445533 -0.6940764811310601301;-1.6900405306717145582 -4.0684830341045117308 -9.5549987449765332315 5.1536855416029165866 9.6839823086803900054 3.6634985508653516995 -3.9199456635701350748 -0.51436396698776165604 -5.9168194696827187684 1.4070210416583290858 1.267182415616842972 0.63948603617948451827 0.63535581436375498932 -1.0256303642936830389 -2.6006562504867525298 2.3025608707890752314 0.72354441185101292522 -7.3816078577514190329 -4.8049736905381266183 -0.53996333126962414717 0.93081526434263106573 2.1871519041449829501 2.4639347607021941933 2.4020775673417751328 6.9658813495628661983;-0.41425590142718765607 1.7317137489240097548 8.5898371204644732302 -7.0251389958584180562 -6.127009784236740586 -0.57259546765741275998 -4.8694165512845728472 0.10671639366876581323 4.3699839300619229832 -1.553391593198451659 0.61020507206950225232 0.13261995997908593292 0.6882624900792420064 0.38861639159778677 3.5542223000178192471 1.2461999508391918834 2.0496910800079604087 7.2549228809787962291 1.3986174972141443007 0.34843028489291716365 -0.77280710797583196392 -0.98531966315972197012 2.0286358244758098124 -4.3816911598288461605 -5.5215630762485803373;-2.2189281443678861017 1.135644885427222528 -3.8989367933223415541 2.9708570832685925467 3.9441190282933171751 0.31992542776323967813 2.4303656227889378627 0.69278877137704997224 -1.186532147667655579 1.9787296023653486721 -1.1189428754320416282 -0.050891230016857247342 0.83261476691675784245 1.0166907207856117346 -2.5260413678656394865 2.9476457304248775415 2.2441485441231576736 -3.9613111997457615132 -0.16540366020407640257 -0.59530806386464674151 1.3272972300252885436 -2.0392299899065440272 4.2277693765039972007 7.290951188096659763 3.1635240287986605701;1.7061180172617875783 -1.7169977732558845407 -0.74843999025215035559 0.1738905768894117021 1.8680930678895193431 -2.9978077964261369281 -0.36417657201180270166 -1.5925018958887675602 -0.43459176112757841315 -3.0306432565483407693 -1.7306453075333878555 -0.58152947387047249084 -1.724807393467484351 0.63448402912633505846 2.7601375786380915045 1.3423430808896508193 -0.67351881515264033773 1.3006333564733760788 0.58147728686426791711 -0.644069729250876577 -0.82844874727454731467 2.3082489289625716111 -4.0519592653607929833 -5.9085113996333777919 -1.3087293037933558359;-0.24969674773057226602 -0.37610186113362126248 0.60902048123639929145 -0.16229153936692117255 -2.7348781242315118867 2.0466139605767268428 -0.44665366797619598938 -0.24131075055529124795 -1.2175861529323852572 -6.433737919148313722 0.33746021005780169055 4.7991406487248475798 0.62857272398138341885 -0.13006086571766420357 -2.7983304722217252625 -0.29964648054667286647 -0.44881856728999314221 1.3463576880656777934 0.92285869589959035331 -0.61450084458646869745 0.33350194741646077556 -4.7725229963503856823 -0.22210756332687178749 1.0869710651806574475 -1.767905048286776637;0.44711244805941879887 3.0761137679148120583 1.0520242435365909639 0.3149190221221006003 -4.7379411697975584161 -1.098517733283766562 -1.7819524746918700142 0.069349395511769135192 -1.6872039971042813722 -0.95053831583039161135 -2.5185629923231549476 -0.94425006147104195708 -1.6478992524028439615 -1.0345458473104187647 0.36296892597975644046 -4.529469918330412348 -5.7266587349767688053 2.2241097440924182393 1.4249168508880223349 0.25007305717654776389 -0.97899447922490356877 -3.2148391356269359065 -6.603697803411930245 5.4923650940431283374 -3.0108079749679346193;0.332144836357694484 0.41033979904542172701 -1.1383177476327064337 -0.47844721232722253745 -1.8316322880138649065 0.83942724874026675153 -0.87105478892784393707 0.11994632780297997954 -2.1291838706478256604 3.6361087720302212034 -0.98624178870755097037 -1.0783380627857066525 -1.0440693238524592079 0.29407197542630669762 -3.0382171023104107555 1.9121231444070700967 0.96803053944069183956 -1.6315275850408677005 1.2528650666802187974 0.025371619628422686921 0.7256727579696199415 -0.99213356097731786321 4.6725820571210805454 -5.1186250845678937793 1.6045016258394957376;3.7005961092473871332 -8.848079891936540875 -4.5013024329695978665 -1.2948706491142591979 -5.9611311904737354084 -0.44084696546717810905 -5.5459890118061183628 -4.0857148654571444624 -6.2348365602560331666 3.0227588823308964017 -3.5219026772858015306 -1.7929133627848177213 3.7542717380040584452 -6.3575294570217923962 -6.787058949792033502 -5.9718314078411678381 -11.902775790496677999 2.8694435448119199883 -5.3435906912910571265 -0.017586520856676300661 -0.95142309546541303789 1.3156765969742945099 -6.7268411583930936004 -14.145872279534765781 -0.26568340650251065505;-0.28036958971529568618 -3.1062925038307738212 -7.2720896405501980198 4.7735415770477187536 0.002325716825084869592 -3.2761032421238067691 0.69955724452938983227 0.70591895966268536355 -0.82218176826471700558 -0.50511371503802415805 -2.0370568732559131142 0.99632207667383010374 0.70645842045036943979 -2.9986303596417132056 1.8853723701213571662 -1.9553508331169038303 -1.5050588471453856254 5.1494413489710604281 -0.060950766533093655997 0.77455053040656962615 0.69740719697453068537 -1.0937642420744266847 -0.91542599973046290263 1.7018166202970073098 -0.19834669797493009735];

% Layer 3
b3 = -0.14435397733723218106;
LW3_2 = [0.080831665460046386862 0.086150503725447316605 -0.084033076221971994557 -0.097693912684138226044 -0.046520418372448239797 0.086113495724711414114 -0.086617431182549997626 0.12670653198491280134 0.10268060875961400324 0.12372496857827845751 0.20627393724450254764 0.10759888572078914193 -0.29702255256212184431 0.021481564326940871812 -0.11272777988222318357];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
