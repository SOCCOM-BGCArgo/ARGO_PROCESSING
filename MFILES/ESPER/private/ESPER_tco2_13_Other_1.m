function [Y,Xf,Af] = ESPER_tco2_13_Other_1(X,~,~)
%ESPER_TCO2_13_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:58.
% 
% [Y] = ESPER_tco2_13_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.4156061349624398;-0.68291743747007905;1.6875769722300684;2.6706674510376041;-0.21772576956084033;1.2972148560440124;-1.4480083486635278;0.025106555887079791;0.011283135092246297;6.1873680973912819;1.951229415596482;0.21590459128253237;-2.1097460653582396;0.094426827802485486;-1.8848954909606632;1.2894293823148639;-4.1569235382683605;-1.4941400296365106;1.2865013617622181;0.31992381919571283;2.1522186794212668;9.613255682711765;-0.25430761615462649;-1.2947959284886503;3.5447992593984567;8.075996891166799;-2.2980154179289172;1.5485549472269389;0.70264497782182822;-1.3739358808726083;-0.10362288759624816;-6.4334374447528511;9.3292842804638614;-1.3341794060366181;0.074896224090341246;2.9233897515144602;0.43188171211769505;3.3485677569401449;-1.748030145759971;3.2736787775053622];
IW1_1 = [1.6564826164097552 -0.26891647363282495 -1.2090635377176582 -6.0374853236607873 -1.1701603279700403 20.832340765117348 -24.615239615503501;-0.13747798167920519 -0.073944059474996576 -1.680613110618133 -0.22845743127199172 0.98837283422221633 -1.0874640341765169 0.35720083461310626;0.22502567142579338 -0.096780226417464713 0.031824785591747576 -2.7054909079223406 -9.5281420200960678 -1.7683108242558843 -0.930999472159451;-25.682531485229429 -28.395901301377513 -8.0243972438269182 -13.823119172952174 27.623318184532181 -1.965134702274659 5.0418152950293535;-0.0143556425447361 0.29103936223811716 -2.775244502329695 0.058437123049498801 -1.2918356212705115 -1.1937770012633022 -0.10959582756693904;-2.3620233752376429 -0.26738018648499245 -3.9292626293791937 -0.096744559988566597 -0.64826352454108849 2.1143112047603667 -1.4844026554685177;1.3599369478656829 -2.9260638639190195 6.1615064536459645 2.0797547249788573 6.689481878562872 -3.7456303821000412 3.2585834729463143;0.12858989673889284 -0.13505125561108058 1.2739158134595341 -0.69880948279604871 -0.51471598740597524 1.3540238898815506 -1.0461666953645312;0.19459058834051093 -0.589488666313843 -0.1403811826477433 0.085756260075696353 -0.12081207322610506 0.91623131344933373 0.84030618434310755;3.937931878767718 -3.4365999261224145 3.6902126754149718 4.2218174343771846 1.3667058083159338 -13.128055977568135 6.1770833746956004;-1.7411405901305863 -0.88570192145945847 0.73661347470453087 -0.25449053423051426 -5.0649352898208253 -3.128753141617989 3.3156573448836286;-0.13753557417624215 0.9229246204297209 -0.18443047549805897 0.0084580261111027698 0.25497930203487978 1.208654520304556 -0.71063579733711635;0.032631964849473734 0.0031129576068776883 -4.0536628422626588 -0.42604604091461784 -0.43430939886664199 -0.39419914828592645 0.90816478655086796;0.13790140205193741 -0.13325496633212749 1.3450519261232006 -0.69044448309948181 -0.54784438158759952 1.3446349579361758 -1.1007003442704206;0.0016379208177391734 0.010110183641323356 -3.6973055440727904 -0.36880563600675043 -0.50170643572193419 -0.50641538261310459 0.91442186351535226;-2.4984965047624801 -0.2572023865519325 -4.0461516746894777 -0.17308615228771757 -0.59962299916244399 2.3548533979607345 -1.7206082768678372;-0.74304103419353229 1.1658121413680251 0.45922033699301934 -1.5473677672439501 0.36777990952841055 -9.9866519132071598 10.93205900309149;-0.10944323955901146 0.03481132267489058 -3.0672034575766043 -0.26930000412821337 -0.64504359947292111 -1.1831824637365702 1.1758540397724242;0.075989484649253286 -0.04643145397543523 -2.6571177250119624 1.7946380036560381 -0.8174663653974954 -0.47044466306380134 0.62410212654448727;-0.89619902728468737 -1.1541429803242682 2.9729081565371591 1.2592238060611962 4.9261470226016062 -2.2127397352216849 -1.0334170137939436;2.4402483150754533 -0.37039333575725275 5.8823119697636512 1.6533399900403101 -9.2238692134806879 0.046005309733025475 -0.68475766296981488;-0.031870155370993802 -0.27272577598434772 0.74173763911035062 6.9580754484034557 2.0260529416788557 3.5713270935333465 1.0020819169799833;0.057898958023350003 0.19128024105056535 -2.2999751071054249 -0.71234981571278166 1.2568343438103737 0.039977877608874668 0.24949030378544221;-0.08785170793884714 0.050822644935441773 2.693553328461721 -1.8434378782316152 0.96462286871877123 0.41028239264309485 -0.6456946860927788;3.7895923412101822 -3.9303602251571146 2.6706893486618313 2.1569214427304262 14.350058952732965 -0.34453973921575282 -2.4508758478371822;1.6318009845434867 -2.3574144539405535 -2.7925188491299808 5.1427156888073817 -5.468755912253763 9.1726050326065476 -9.7084876504625903;4.3117339941511954 6.6893085171160251 -9.9504167419892955 0.69437570919880642 -21.779410971539964 -14.505304472539256 11.759943569495976;2.7844611624348969 1.5363808195209905 -0.59941385801747193 0.32761880315788361 -1.71199745889755 1.2323693386614671 1.1199450630737846;0.14611285068801907 0.13892251189251695 1.8952216318993 0.24382936085312823 -1.0382997296624572 1.1406665375624001 -0.38356963856205806;-0.57282151474386944 2.3271352591823447 -3.0636591824567909 -0.70289816946996031 0.87770458057942291 2.5646649231919558 0.17252421047456667;-0.048417814371202031 0.12290737365125867 -0.97100325436632873 -0.30112883154602427 0.66310395265176192 -0.16312843650277589 0.10487046305315642;-2.8256657325851591 -4.1098332493991583 -2.586262990837179 -1.5521048124246377 15.094013665696318 3.0098720372785679 -7.1590013071885723;-0.022204285825032408 -0.28378415279895469 0.74586018358632222 6.7367988055745132 2.0508459544481177 3.4650714530325097 0.94643321038424721;-0.5472226336844519 -0.094398318542841295 1.5590623089102196 0.51791393466709057 -1.8152389437346959 0.38703608110819576 -0.29572548861578057;0.11492655806680487 -0.32155548587873417 0.79602195409858778 0.5679833126798457 -0.48009118778725213 0.71103441152797908 -0.79248806891374979;1.0071820719474462 0.17656152612416828 -0.52815406508052576 -0.44624778092833289 0.68730012319967515 0.54084304163187369 -0.83382834015985319;0.33352182050324503 -1.6413967879785551 -0.83305893130224073 0.425888247327326 -2.4009795835032257 0.73014357752647574 2.3123987077809223;0.97629980801756366 0.17635472675870992 -0.035748124780548216 3.1611479036696877 4.1873737625716538 1.6255235230045444 -3.1334429723792034;-1.7569766877139616 -1.2932857319677473 0.99995519398022314 0.89976795231217332 0.90531500640866247 2.7143480372481545 -2.7811949535159246;2.6983860286042116 4.5600785418211851 2.9780362156625175 0.75430215981669713 -4.0937387025698122 -1.056921546887071 6.1518113093884699];

% Layer 2
b2 = 2.6938032193830597;
LW2_1 = [-0.036701166031028389 4.9964952137544953 -0.058900353090070641 -0.0077873781573290406 -0.21811675090383759 1.1248869785790629 -0.019466722802074645 6.8481741285146649 0.26458382204910941 0.006174354015593856 -0.039083916718934707 0.29748861581455088 -4.0049119059991334 -6.6409806253782859 6.0069321887102749 -1.0056166636512374 0.018958720574181818 -1.7787541275281058 4.6566922824975139 0.02456462971332225 -0.043937657812700072 -2.008653286611954 0.74990163540986221 4.3896905812188498 -0.01438270983863056 0.016811709761430878 -0.0096216864385291652 0.058755677560207872 3.7178792960237295 -0.040778276966837154 -4.2220636919252739 -0.022891536694839433 2.1491962134844695 -0.98073516422999762 -0.80768241611477576 -2.6604952725113926 -0.080903244627902646 0.067891217651871671 0.055541049452047027 -0.02282103083196239];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
