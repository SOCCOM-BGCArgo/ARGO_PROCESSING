function [Y,Xf,Af] = ESPER_DIC_5_Other_4(X,~,~)
%ESPER_DIC_5_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_5_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.9981830498567982879;-1.0194194687692219592;-2.6182641361369798361;-7.750162801623093678;1.2920371946493529602;-4.0025620905706640329;0.72839105366820677823;2.3526951819717414338;-5.8914001999496452555;-1.4623046573110414226;-1.0186654364157261554;0.95879439678750022491;-0.16725976735861899924;0.041933755597151456396;-0.19595695430569803897;-0.7816204969888255194;-1.0279584626476785392;1.4016956467274876985;-0.18349820129601324137;0.43213140073743733227;-0.83577147881933111506;-0.7510709577370344725;-1.2162553656793935186;0.29516663043545332545;0.058558188430628002608;2.1320287123763219661;-1.8065960665152225317;-3.1881158862881577853;-0.2336596055500659852;3.4827386957831181213];
IW1_1 = [0.21080397664445094108 -0.66782458581478743032 -0.86906283200542078227 -0.18471156624163750926 -0.6627951927788998665 1.0710158040304718075 0.10124751056382802483 -2.4216788799228186058;-0.029593464838689173546 -0.10279910968626554402 0.97016493349982713124 0.22633208389946540828 0.086921598886819162466 -0.80672286821907412957 0.92538799975195840108 -1.1049886622021090066;-0.17150036087891903924 -0.059185585569319951182 -0.18103931379278564995 0.025389547808270868795 -0.32754786689331150118 -2.8344701581367739429 -0.20947572976931297384 0.53078131045801635324;-0.57488333900232080342 0.22586461470579224931 4.0317530032775961146 -3.5620117014250691767 -2.655046372727362769 2.5323382202152937559 -0.3403356743584393107 -1.6006067753991344293;0.15738095950709010684 -0.081976435273273806636 -0.23236106610445594889 -0.7538171418268776458 0.80515158268765740779 0.26518527598081154117 0.11843517921432178408 -2.7740515953429918383;-1.3429392258878920519 3.9696731147542823059 0.057069047147503465522 -0.65681060213939268522 -4.1783175862117278854 1.4112599108487828836 3.4852244093692528182 -0.23597853065826632224;-0.2691166634428688309 -0.36339578604435879283 0.16971342421620469465 0.038297597570331062822 0.21440986276370221919 1.1892282480941425149 1.5287459124032287683 -2.5344413408180952452;-0.15234895858701508198 -0.99076702645084924193 1.7900882765297614352 0.3578897237373996898 -0.54866041381115826514 0.95830815188039253361 -0.0031560844324455398537 0.60341863718828736562;0.98081761886113627558 -0.26640281552168870727 0.64911023278346879906 0.072794748965570532651 7.8711389990736879696 -6.6687708486219872128 -2.8461241582896357194 2.4940028240001477222;1.5119151622838029603 0.3623490581575947167 0.17578902101450630258 -0.52672018713289536773 0.1496435250367477432 1.3342725980942684583 -0.53592677464525451114 0.23589770744314780826;0.56251512489186439314 -0.68065624066478436216 -2.4365307451745032985 0.20387787625310382911 1.5713075995843479582 0.95045376248364221716 -0.73307632176458892292 1.1874828881010623949;-1.2559517693079624845 0.11657605756092037641 -0.23847042393718745346 0.5386765415412196889 1.1158244026141017624 -1.8394302208926869291 1.3218029136786144662 -1.0437417417261167785;-0.066445572985944098554 0.090915218479120082917 -0.61131720999826866247 0.2805893064585939789 0.52434045261891371048 0.28266348493487164495 0.83914902349006403881 -0.43684757902183446454;-0.28021204569861890565 -0.11241133152195650902 0.28436382754967631792 -0.04641496011638477498 -0.58377175760168642515 -0.13434977369172021455 0.11030264533032341223 -0.71817304163653494786;0.98004250856558239313 0.043306416025547508908 -0.68579392679982453807 0.12815882775759146472 -4.2386177622190048808 -1.3592090375343739428 -0.42657735791863909958 -0.22680196824368073494;0.80652290329480780251 1.0413588189969855691 0.63460352633045802317 0.2934495727468911519 -1.4010526061529529063 -0.64425468111813155581 -0.40318034754850878842 1.8259473962168732974;-0.093309106022341214981 -0.11781101636142693456 1.0776630748118904979 0.048735765410079665005 0.6303328125009092231 -0.65224907349017025027 1.076288528873690975 -1.1425366834000088012;-0.78261918870252056291 0.60563984372645207621 -1.2070322635635126751 0.022115783948218319804 0.80984230884910446413 1.9428024700246444567 0.6583299231765774584 -0.93572702077608016502;-0.69882812433920316053 -0.37450847230331818505 0.24965218559772331397 0.096385663261372989119 0.75929795660484011854 0.22148145844549352312 1.1978544587417094824 -0.021769164453129104253;0.64893655743230649335 1.0690140348725871711 0.67919222260015410519 0.2196575045505721191 0.42720608162298517874 1.0647817285091356609 -0.068876811603532275829 0.31628079070314052412;-0.36393910184700284383 0.19459540554190130068 0.044605469927296789723 -0.42700555479518920166 0.49831477188809053525 -0.24760242350050931659 -0.0078069816444453123822 2.0124779711119251679;0.21205377432224492562 -1.250226797278996882 0.55308539383609656159 0.34707565845066851162 2.3956387346388408055 1.7243746885224415788 1.8723453830923915131 -0.62378206243062250813;-1.2338131894990709281 0.44923211438667265405 -3.2888735677085332298 0.12136412403580143504 -1.315431112655606638 3.172198836756101592 -0.29781280135331006376 -0.60999797947702871781;1.0859834687634308814 -3.2565310244222196445 0.95687343539215974353 0.18570380195149871483 1.2907432378970988829 0.28753384332672904389 -0.60909850399584020142 -0.22019290712102035368;-0.053683353498753659527 -0.54795581731002562798 0.74774827472530169814 0.029001988276341497675 0.28604868716234627124 -0.31463277765013430987 -0.02390658596177869244 -0.20302604849845479196;0.29310741281721641727 -0.02251938881710982554 -0.29161508147967324378 -0.027576705587007668136 0.61759166514234220546 -0.39991755293690733897 1.1558937102632149685 -0.00735225448318745263;-1.0971052851125842054 1.4577112100079139267 0.39370225497532962411 -0.9886247473763652982 -5.4662190417193619041 -2.124250701658533913 -1.5651204747121241212 0.41058626145864107748;-0.6619191036511089532 0.27551400915435969585 2.6041139253885265958 0.3770679342233277942 1.1092548676199653901 -1.022661961737750147 -3.200565940177065194 1.1966410451032205575;-0.058119798055828786332 -0.32166572154676809081 1.2274659119785815697 -0.060470968427490126573 0.4767660233028959138 0.31922324686380199044 1.5413813809656735643 -1.2555044139937061587;0.51781164885996644465 -0.21376983915635575095 -2.5038850111874029203 2.0476311490483971589 -1.6935820430148373905 -3.674954912027742715 -2.6000303491893186347 1.542756828954251036];

% Layer 2
b2 = [2.2911986123510850177;-2.8417412667389165826;1.0620647340988580432;0.40934625219335796231;0.76307225117563004524;-0.89849043702359399077;-1.6456435228347126021;0.5360279060683347252;-12.075834285963919612;1.8879697738277616548];
LW2_1 = [1.2025193347514351316 1.6044452550323280438 -0.67326066724056632395 0.51824883025733747832 -0.1048529314137393309 0.58061408860888752415 -1.2907882070407235009 1.5298307130695012468 0.20556151004674308447 1.737287098183835754 0.45940724234179808327 2.0256582354942582747 -0.17651818039221034429 -2.3117794133155293856 0.0682542906346251671 -0.91499521345976486675 -0.91562985058513690628 1.3201207024536012469 0.19010129705339337547 -0.56625712929439975252 -1.3141499712542872302 -0.45782710655291486423 -0.064946680540823559236 -0.24030606940160620377 0.084240878777435107549 -1.0034216950646537292 -0.014040002334009626592 0.39609533811479519239 1.6321511514572584201 0.70948615334027254065;1.5872010670536129684 -0.54520641803216418619 -0.21403570422753812053 -0.54466075531885416172 -0.87128031197322108881 -0.90462675098607958635 0.96557808165000469369 -0.25810512888420061861 -0.13632978657036781689 4.212637682800882466 0.72571234004105900084 2.8652877185884815248 -4.6859280176296094211 0.12491238299662218991 1.1472820231982090444 -2.8777570236542038273 1.2266772454116880997 -0.620201093169140516 0.88282123027968584239 -2.4336474075935314865 1.2646614985701254419 3.1506243934869209156 -0.057638260373587268948 -1.9747290364386056449 -1.5960023949473955973 -3.4152462263448133406 0.25467331600233888977 -6.0149872054274808875 -1.6339072328996389061 -1.4077785082527052296;2.8331602016685928369 0.054612628443957020319 -0.35973748206797234728 1.2995213020304741125 0.50304482344613254963 0.029704427937314495378 0.04511069321088383155 1.8596486148510955605 -0.70307368423949445635 1.3017553096090936915 0.66939226184932532071 1.9813206365569084877 -2.2807608350435604194 -1.5969512766495828071 -0.41142509098185159333 -0.13666402046820885774 2.9814578500662332061 -1.0869664344776035492 2.1833142543870747154 0.18739962344398158889 -1.2711241483993955814 1.0495927843139751801 -0.90999671083155819762 -0.078187431463602213855 -4.5772381725789079709 -0.67283239010564754867 -0.17285511948904741519 -0.88181627980502252928 -1.5455721062253577891 1.0734487821806661945;1.9414467866614495417 -0.30983225290564458954 0.017347685068074384512 1.2431134397796497204 0.43024611473252388771 -0.17757166360550041828 -0.1491735816127389147 -2.9708477639158070716 0.4083828656750998487 -0.7948066713936584593 0.018203709263415801534 -0.95292538412746097265 1.299963267421634594 -1.9454924640104986899 0.019465765910971058461 -0.89072906559114195524 -1.3735697459426408074 -0.95868344037385455625 0.8845416577694564797 2.2492539157578312903 -0.048596938451122222158 -0.96059888348639144162 -0.45524400704606193813 -0.061378127222236261717 3.9024225389351374638 1.85937959046127399 -0.19185694958801088883 -0.92997552061773192111 0.65114184976379274605 -0.44969495896272210222;-0.69467298996868109828 -0.011916379180869868942 -0.71336452499954405848 -0.64337413507867413642 -0.017122204969968649046 -0.0090686083531569556399 -0.9820177078946167315 0.0046981681225288975806 -0.040383599439057872582 0.30636003574293546592 0.17565722784921450339 0.095509525641661707773 1.2347026137396119871 2.2692882058825927238 -0.24692510404196640894 -0.12351714962568817457 -0.41580687540299637872 -0.14177583072469665537 -0.36343146226728512138 0.26950150672422018561 -0.12474093991859974695 0.11163988069249300428 0.0098391089721981805222 -0.045851576928849252512 0.24044875347646710306 -2.2750807624289226538 -0.1003597899610382399 -0.62774464438464783189 0.70872449346447308205 -0.040133437755299782024;2.5857159160054710156 -1.6936367513439867238 -0.59815650814545451297 -3.1662752686397155344 0.20890391736643865173 0.26051131818064304779 0.89607427219295299192 -1.3936223393703381923 2.7223480139933942112 -1.0305276124933471227 -1.561629712976937423 -2.6919373769776515637 1.6357066459492279886 2.1364810672433081074 -1.1820976843144286317 -0.14037633298673243831 -1.768920262415150324 -0.77507516448829150146 0.67158669320886532628 -1.4297072805979840204 -2.6374616841473703666 -3.5466663888055984799 -3.1014277262115172995 -0.95820775854133377614 -5.7829109319487308483 -1.4964157031521727603 -1.8311140635425278145 0.61255934482609464276 4.5390084516258664138 -2.9809528552549307001;2.1408093478022509615 -0.16729835072140727958 -1.0403428100529856781 0.75658543353114460217 -0.85488409265912435053 -0.031306903709077571474 1.2936286532636316338 0.78680387378101412921 0.33776390871419581519 0.50852529830806769695 0.35468292950801455499 0.6952856939641738343 -1.4410224120590851005 -2.7104695476321283287 -0.48974955844099654634 0.45865739631882196381 1.1918366604386558816 -0.49833937108634751567 0.46938428821511557487 -1.1400609387207505385 -0.52492222187843307069 -1.1408183600663601709 -0.4221222209912871004 -0.12740676500612899136 0.094217633980883952471 8.2126174750890523768 0.92152170496772267683 2.7862151596239326246 -1.1977633872998927345 -1.3878431887170084025;-0.65586196221264059236 -0.34135165916064652558 -0.50803305671224474604 -0.51326795217088805323 -0.068739917060028618567 -0.028874569563868530964 -0.71429381071392028524 -0.033533937537971576781 -0.032939123940573897253 0.17545520117282467631 0.12679737754326572685 0.013415861257623926811 1.089268483746193672 1.8950474235183427663 -0.20147959176555713112 -0.023303747777643272349 0.016113538575841846595 -0.12604225661844775663 -0.37801049320216667526 0.17607455513531047875 0.0089838456732566455976 0.1184433381952921388 0.010682761440627410246 -0.035645082416815500326 0.23360494521965180503 -1.590026611500253928 -0.099149761376719894312 -0.4981339665036201847 0.50759446948164455016 -0.042439316524421309695;4.4732295238641928137 0.42821757458595133272 2.6401266407613874776 -3.5831031447929837519 3.310586803729077765 0.84245344331601024201 -0.97960236099672093335 7.0908375359218887013 0.94883650783890693958 -1.1659470791486572505 -4.0267895741426880107 2.7524483773189292179 2.9844450786182408208 -2.2811161251125495752 0.42033149011085496616 0.20231048900036158189 0.74754070337150591019 4.2499474043812179858 -5.9013211793113802273 -3.3868184909641079194 -0.058891167351558790233 -2.3807856837728977872 1.8944260553615090981 0.89739637341129352421 0.56152707374877786073 2.5506716363185066854 0.56281588847842012324 -0.40822052428793220713 0.33812094050128999045 -2.8936821725109425074;1.6970261115733644708 -2.9630071333302150371 0.38427238227119703273 2.8952400798948860761 0.065432516055152406542 -0.55413766462302038729 2.2906920651396522892 1.0901996530149220543 0.26272304800688284221 0.31047262581112572422 0.97258771472902338928 0.95604234894506534559 -1.9171343876855369004 3.3550213972726194989 -1.052235466200875269 1.8470716843467600565 0.91050441251007707688 -1.2625105571153714124 0.15022889403971428912 -1.1928053061391954426 -0.17648703109517796528 0.18791529132217579812 -1.2099264335904365009 0.066212545008803830315 -6.2540643702923004454 1.2117255853531905263 -0.54842966159044126417 0.61359795845192532937 1.7455041551541075062 0.51659809575999326992];

% Layer 3
b3 = -0.20977655671242875779;
LW3_2 = [0.12975431852591587378 -0.0390333365566419635 0.086661434602754813805 0.075449354036001087254 -2.6662721974308123407 -0.015937869207631644858 0.11902109042689747176 3.3643491618477336935 -0.021080444985386272844 -0.10245467365449976993];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
