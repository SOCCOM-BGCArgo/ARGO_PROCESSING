function [Y,Xf,Af] = ESPER_pH_6_Other_2(X,~,~)
%ESPER_PH_6_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_6_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.1014997969375781572;-2.3346239246257596278;1.6267442335968409495;-3.8353503848532026765;1.8080005434444932355;0.73286893098526684209;0.37627897938677995482;0.69233229638837223696;-0.088853859610230581656;-0.020263680814445760026;0.19817424609826866932;-1.2672296106417153538;-0.087520286156835200297;-0.95470751750853000139;0.46290728927217661415;1.8340609111775452167;1.6166037067850451692;-1.4189788685082933561;-1.7754969516961365272;-0.79653047536192778111];
IW1_1 = [-0.81664781378465889361 -0.30254482485274919457 -1.5022635202429936996 1.4846765208907986011 0.97766023698841053591 -0.036123121257413667862 0.51993746212975688881;0.88803656032516986585 -1.4651416819663800606 0.11787890520708699249 -0.15264591250947087686 3.2091014041741892093 -0.99363494914396899294 1.0196716889612322809;-1.6272168239967073067 -0.55150688484050391924 1.559135642904685648 -0.013214829598569519456 0.24184157127081537531 0.89142053437101698155 0.81479545058103874933;0.30134024926255481569 -2.1741335619744841523 2.0526580482280811779 0.008675271843597171309 4.2368487286438103467 -2.3136006098573385081 -0.53729271006338463756;0.14873497708416846819 -0.2218273978148835035 0.10903048503547720094 0.31875190132390573972 1.1283459082694362596 2.333027715657745027 2.0629539540583312629;-0.4675922999156311155 0.55099599736473003908 0.57770469587138528755 -0.072146977296256548096 0.7242038875795371311 0.26443494995975175277 0.63042961444777745328;-0.34992516119116173767 -0.57710038266904617466 -0.9655459731502243903 0.18405191803216849888 -1.062342841648880265 0.11343760682360803926 0.11195074464582854823;0.6639743304125428347 0.31092205331468125706 -0.24835487879096426744 -0.24313744957196128937 -0.013474181303998590195 1.614171294388304867 -0.37378166492557030054;1.3979367920569973904 -0.55461462128580751862 -1.1020998387261025098 -0.099352607384177352157 -1.9163969093052277692 -0.54472665130935460365 -0.80153923514034897124;0.59209590035713799416 0.23627153256720936914 -0.2507625445788873586 -0.50801591697154302452 1.066097966190800328 -0.56086503144156785172 0.87873814970469488195;-0.10845135650859134835 0.04588254461127824757 0.052202214325985527021 -0.17057821268374054324 0.19251079190655800977 0.014401165087514917681 0.87483920802751180545;-1.1490832339866583478 0.20234803833385062166 0.71367717437673072745 0.42539115332005933423 0.52435971097605704738 0.22493085174723417841 0.28699022122984008121;-0.66991366542267494211 -0.0046548512688821333527 -0.020099530090833244572 0.29010080701491541832 -1.2079827899077646425 0.57425206190520305949 0.76393804493112926757;-0.6321288107558213909 0.46083320368357738595 -0.90303106379619291211 0.55249593237618821462 0.24049516524170716503 -0.42855084677360150147 -0.86518200575641823757;-1.2628655010746190346 1.1052889914528416515 -0.30046075274368622132 -1.1843139027125191287 -2.9158900926522108854 3.5125839609448625822 0.13300614706285696087;-0.20107998140410263122 0.59115591880043305562 0.89573016853619469302 0.19796424407882842744 0.86607933669927994469 0.17998210723605254091 1.3982261010368504106;0.34060795774307234263 0.50245716945095308947 -1.9395410581181600218 1.151255390120112132 0.080792753790099466893 -0.28305963312791437847 0.48723177795158567616;-0.86039039487705548659 -0.79505180302413092086 0.16239571553050313746 0.86367838150962472632 -2.1036568838204887655 -1.5541466867163284959 0.61551890731758196473;-0.58967149377328431648 -0.44936119188276146819 0.44752501268367939069 0.078413885277402381457 0.92441261935586493959 -0.37459540220366033259 0.49274019372896837865;-0.25875802955323434773 0.50707053743322638706 1.3669474764119202703 -0.61512910212415539135 -0.95563016712860981983 0.59959229615864928498 0.1073667897245469266];

% Layer 2
b2 = [0.20313413841573674246;-0.82514165630810420993;-2.0859025559641515279;-2.4023759570499843008;-0.38272625909054847071;-2.4312619102206025623;-2.8231219844576767031;0.40802847217780413569;2.0244979563526497301;2.4629682791991811541;-0.10807595189180395356;1.3353096682218470459;-1.1949573213534365745;1.5791420099938318078;-4.0179770503180973762;2.7831748230223296581;-3.4068892311216210089;-4.5158237348613043949;-1.467695060246878791;-0.72128018502891144692];
LW2_1 = [-1.2315594252131003561 -0.18063781720176344536 0.27587473342109097851 0.89243324570380877514 -0.55676784752873442752 -0.4974017998206946567 0.60649981537493269368 0.47154778374212297232 -0.13549641792990291256 -0.32574410453523289233 -0.061689773549684648324 0.2967667392437590701 1.0732225362501768284 -0.7084433787882510325 -0.27774257799303053718 1.6522646907786828763 -0.28955412748951109281 0.0073435078982121045066 -2.6219180674395121677 -0.37664329900616549951;1.7029798827608639833 -0.15247409187265509312 0.54067770890660937777 0.038566880951566261115 0.11996601771264829572 0.96325394614899195744 -0.027227041674147776235 -0.87965654288896577562 0.80254223520020395721 0.62821785148807396393 -1.1662725018405597499 -1.6612612224164446939 -0.29540705450998960835 0.88558186871726940481 0.51452967243137204267 -0.51983196620167892998 -0.19912377065699782275 -0.26773446249117449636 3.0456957255082364178 0.58730607511959886935;0.86459989950650928403 -0.40245048996529975138 1.1764515727105289145 -0.49661626553633908543 -0.16849561829094070187 -0.47282034413896517622 0.37541846798944000785 -0.056171602818066962426 0.54714802998297962233 0.49737711909614745753 0.16795964559602347133 -0.051530951437286316719 -1.1237652323442204327 0.39601843697137079081 -0.060970469253672103516 0.86708069534140064238 0.16680859860182548071 0.66453138990801630115 0.90285880658997041959 -0.20624291485615975361;2.4343047352371374181 -0.64833265091538061498 -0.15797027848076394818 -0.67019095875075407331 0.10760075087820930584 -1.4818551947207370123 -0.71035040430504281517 -1.0239751202145579434 0.67393748497635730388 -0.35006333348132517846 -0.55678067030211086941 -1.8020264563562971016 0.72320114982998273678 0.37569634112678496063 0.17194645968540250847 1.0258537013575241836 -0.42605029665427085472 -0.10871771986064703019 0.97143763023305196302 0.027586381222870454827;-1.1396848919874331685 -0.41978417150936236935 0.86040157537946793109 0.42271485663749081008 -0.27486936941457262851 -0.93548984477663599257 -0.32907610373617190991 -0.36176887920372868823 -0.5477959895998669726 0.067872954538645849376 0.42715814976903049294 -0.36156044700716083451 -0.21301724458457771405 -0.6109301880533244411 -0.7896755829557908779 0.75653775066211681466 -0.6074043037071107376 -0.65426480278847010119 -0.42816527238144802547 -1.1790942626365756851;1.1502393740104097652 1.1854103083644753625 -0.21921106046338081907 0.10733490825536515234 -0.72931619459680174788 1.9113983234567306635 -0.62758012558305409367 -1.2870019542139661262 0.32944425435769297827 0.15093515577670113537 -1.1830783490683476344 0.72681005080760607839 -1.7070263334275035394 -1.7814935917367873408 0.82616403153668505066 0.21169695132579724461 -0.94160404748345072345 1.6875493584194074526 -1.4350703037235892356 0.8116022804603290064;0.10979767035234579142 1.5895295989662570069 -1.8181104575124305001 0.37865204701470100979 -1.06356619423749299 2.5530624740186036448 -0.70894943247816311072 0.97528483841847379843 -1.3224473056997663178 1.2265711591687722404 -2.2389085963445456429 0.018497540800059709271 4.0431529676007578189 -3.9260779709558200068 0.2853490110660218404 0.2487748471656787419 -0.096644891819565481583 1.4022025430022970749 -3.1466153687218159085 0.48421057384459653683;-0.49204133259459575944 0.5994640651718574631 -0.85537577570356138068 -0.012679094329257744461 0.62426202971850619505 1.6890634132310431426 0.84196448528811773659 -0.75312656280122380892 -0.12164967644277431547 0.18635078968322554838 -1.5034373829258762534 0.90681275320498022641 -0.9772231882797748348 0.10732185685750697535 -0.39672713526154174124 -1.3051412934525461473 1.4818634401402612788 0.45210351928129993704 -0.24782917261817438703 1.1543475437156562879;-0.76459747226804841702 -0.67594368275665650536 1.0367673222802693545 -0.77776822220432018096 -0.050712892496395767239 -0.62655602007963229205 -0.025716030163788775043 -0.81581826000422219547 0.7488452391742750347 0.33900136999254870673 -0.041883208003091282334 0.3696677643170123706 -1.2584014660495528304 0.089589750167458223618 -0.18826761236106875907 1.1546620157813389795 -0.26468138690499337651 0.24247388184595883298 2.8332801704182588587 0.39209457036359646187;-0.70913301583374876991 0.62523611559093061896 -0.47931482238860506628 -1.3799017865242553249 0.28652115993928239934 -1.0357633886686192781 -3.2779935291285315913 -0.056796333564569714825 -1.0139207868200421636 -0.61907036612824006827 0.21461956204418267125 -2.498362202606688065 1.1095990555141974632 -0.069729916607214226243 -0.9407759672982175525 -0.25729225629660690267 0.86556385984222405927 -0.3541068848476486286 0.38836689839322813267 -0.41878651775311642735;-1.0229812741241457452 0.14650616591966014735 0.0029684883574644395886 0.19962960137950863659 0.073027443550815585027 1.1772339346195033194 0.71526544651911194705 -0.31742361726403983679 0.092702484665070555847 -0.45512653704782235486 0.02694108445318307149 0.68517389322036037491 -0.40362698287017056975 -0.51365492809651391859 -0.3730660877957280297 -0.70742290444350042211 1.0463249112965029575 -0.06413183392227987667 -0.43152355178488316367 0.78214245805105275799;-1.1989662680495742908 0.61021744825342860707 -0.4406823497217592922 0.39211480513448537799 -0.15752250673347487075 0.88888545121143969219 1.0951322468817630273 0.21858248685040801429 0.22278436042775967563 0.61468884638331389159 -0.36466905679543942798 0.75640203639158620774 -0.4360861453486098438 0.13176495097196122552 0.16101084225089581925 -0.084503098551430524954 -0.076942207094818498847 0.34593255175296944159 -1.4954975208044274382 1.0258642267840689666;0.059865698669360867257 0.64401070478773436712 -0.70859275978246771821 0.7463632449988720774 -0.068984153971750880596 0.39710553040656648704 0.82176743851411071518 0.73005969729601061236 -0.2338400973196685384 -0.10070589753189151949 0.79210520833930320173 -0.12294742324904157915 0.16210486490345438204 0.13847033102870132115 0.31641567063696984796 -0.57226864068675964425 -0.0036877503074548676106 0.17300898341885292964 -2.3718684944081633859 -0.34322336493141242242;-2.4288634571672309548 0.18898401002762169054 -0.80159809939141823953 -0.36710603864507773686 0.26902913975458386808 -0.98218458821549536886 0.026538349261516162164 0.34584391250413043517 -0.73534014878948283922 0.21794697466913123818 0.12995579917180946627 1.2612002742238341835 -0.15066544592733405183 -0.37974823771550464402 -0.65329409979981334367 0.19516717112747683505 1.0678923623249330088 -0.12071976605223300183 -1.5675882978206656659 0.13938922879654686016;2.0723419406880347893 0.11233141865220633293 -0.64804374725359992215 0.79093885499675464779 -0.73708540645455211671 1.6290453241622828706 3.0736614704946174648 0.75445963290816753233 1.1042264849833687279 -0.6269941005969400516 -0.7056303183855721084 2.0566594091633811914 -0.38007312316237118477 -0.80737623323882423687 -1.3842950408636793824 1.21978192266717822 -1.6970903400826928831 0.57214215553649927504 -0.81694346033394416029 0.023064873491726371052;0.79400433934538794389 -0.98101976310692862171 -0.10072162320766406274 0.71756587071401256583 0.37513606147074390895 1.2427703466104684793 -0.20902315902067594711 1.4717565740849638534 1.4667564725039023976 -1.6577553540512790509 1.6341047068768606021 -1.0071049346457296991 -0.40936837326762071099 0.32308950984522594174 0.11776647923133247431 -1.3535957770392175181 3.1530676953765035542 -0.13753319974479999432 1.2348014003364864433 3.1247355425388674277;0.91723924365921583046 0.23544349023237323704 0.42008887064901623276 -0.33117093299161237674 -0.17019335481989603109 2.562493223620251559 1.3800096430438713035 -0.35390705185507370656 0.56045866895528573259 -0.64620379479841416615 -0.81697795845187570762 0.1772664699415932299 -0.23429716664954891581 -1.0928826520807224387 -0.49323743511641943149 -0.25093176202710631983 0.78266917694022064556 0.30378390844115027436 -0.66162513030712710727 0.75184717411345025617;3.1531097286656386558 -0.41064145797402834548 0.75963675141212705366 1.1412761024900430762 -0.34722999841643598096 1.4892910096639089268 -0.22361490896129637695 -0.53718475363571527303 0.60934776849051452974 1.0218166469642113725 -2.6527948357246269317 -1.1030268264844240722 1.9375437187433428576 0.34265481156554034037 -0.39502872590580639933 1.5056407128646573934 -1.4268897920628280662 -0.17334997357871040347 -0.47104040164096727672 0.57095002512904791114;1.7670158617977032023 0.61954478728308726154 -0.11616691834696991903 0.24768647485946662656 1.0313609816000750552 2.6578778142580992139 1.5502128445515930277 -0.39739473294368843348 -0.3033890386584629506 1.8021424514083366208 -3.89663239193007227 -1.4931946380591147872 -0.70562494378333506795 1.494215474895333795 -0.82125733038717807499 -1.8057027935715452838 0.0087964881713344222208 0.077881552792816582942 1.2716309680498880663 2.2972213876760720908;-0.86000406980761201492 0.29075171892351686642 0.75881202341511344578 -0.43443686556724336878 -0.034823505450477944267 0.033385093165541147864 -0.10805206910233500217 -0.049634894664385996454 0.12235472257501098237 -0.38998571564294415293 0.8154007386347374986 0.022882326598062871503 -0.7162457838576644642 -0.67515245203186835532 -0.017165517375159096425 -0.85681056383211096072 0.14772654279415295409 0.42700342718040162904 0.39360548189186234103 0.55105778748071632123];

% Layer 3
b3 = 0.66398858894597623248;
LW3_2 = [-1.4840921561316757771 -1.5485579254050700904 1.1636606530338198251 0.80131008419992899583 0.64651006230631635763 0.39357289071304435435 -0.12732778855331344792 -1.1306963362757556091 -1.5468972774599347719 -2.2669730690273763862 2.906813866527298007 1.8929490184126260832 -1.4776081982740325582 -1.1614697113440441978 -1.1028614243975720655 -0.76841761092717175696 -1.2484864084720010968 -0.87839893697095350333 0.31327462296937746977 -2.6237160097533784864];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
