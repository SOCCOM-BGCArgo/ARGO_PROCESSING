function [Y,Xf,Af] = ESPER_silicate_7_Other_3(X,~,~)
%ESPER_SILICATE_7_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_7_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.644467015058457271;0.4380610152179896799;0.75080029781325385851;-0.37194316904442004112;4.1714330313536178707;-0.95922045564533930939;1.8856411834521513704;-1.3004202124356440962;0.082671537126420571728;-0.76658301811482687516;1.0162397654747759024;2.0062205925994001099;0.69391217055411580361;0.83259086480810917674;1.7024745615553169564;-0.67083158279443144689;-0.96957452166070556832;-1.1960295524584851901;-0.082694878197775392725;-2.6404092659880626925;-2.124087046527000755;0.87661308139720062194;-1.5878289538069345621;2.4666730451897320719;-2.2445353684273565698];
IW1_1 = [-0.44580580651197426745 0.44079552630753782161 6.9501315718718270631 0.61899389831309470367 0.37411392654221697907 0.14135791774430805923 1.5807914015982689193;0.046960902766828342692 0.17489311304986723816 0.28735738212909683886 0.73119525618624803265 -1.3107361207603849262 -1.2242438779740358878 -0.4212444656762160955;-2.1096381795396381698 0.3791825010021294684 -0.62429764224516037796 1.6147008474289241686 0.040532825981438022622 -1.7997947384890415901 0.6195937538577555026;0.38439781948886048157 -1.3925214972520170154 1.4778132770425971287 1.0540324429675680395 0.076525508534875982813 1.4816442393273092648 -0.37952385578423553092;0.1326167323705503831 0.018769283055339376631 0.53625448844215617417 0.036652083106990591965 -6.1096704968585875406 3.8632369630714626929 -0.053869754561272978344;0.3190312490503555698 -0.25275904724933262457 2.5927979211936729165 1.0269129528634186599 -0.79034883415250578587 0.46581064505316005508 -0.2217654761370701777;-0.31227957196471162193 -1.2967329540040055669 0.12977968570900338952 0.27196929064519359542 -1.1747622810891160672 1.2248113030830447556 0.28019991769560581574;0.69070820973039015467 -0.61515542958163449416 -0.14198724850059951663 -0.17383010705204979263 1.0481389592796286347 -0.14005043276565723454 0.53543430043748407865;1.1255025544688379568 0.58957843209578719712 1.1653230166491366226 0.35820749372916244058 3.3426248259449140576 -0.3442735513419832305 -0.13646828981442690742;1.8155718724553282506 1.1702433449043487812 1.2692277700588516787 -0.04900460707809918548 -0.78563945258697553964 2.3115858559085276092 0.6768416666114405178;-0.0093487235167744389686 0.17667092316707477817 0.23405528467493136313 1.1857728959898041765 -0.020453226244856029248 1.3839395596532142463 3.2837955183440659113;0.19165973831205246336 0.33037965672628571978 -0.15736945933112109208 0.91368700930427149132 -0.72159807980008361383 1.7887199924410654983 0.88625394054279049705;-0.011028075911812951562 -0.37398963358369868848 -0.29103159616700141621 0.03491532839433111185 5.9937780495203032416 0.87300181776241037035 0.018589814804737668508;-0.011489860326819898578 -0.067455792587433630048 1.324286012352271058 -0.094240868407447317412 -1.4869606419762106952 1.2123316809551178963 -1.6335672756501804503;0.58277131541649140889 1.364297175433468734 -0.13556211987365227034 0.86627098546002057056 -0.02468036024320234903 3.1305907303362587868 0.92803458063844423975;-0.58454969963075065209 -0.22064626006372595191 0.32538068015859161752 0.47262073477386884468 -0.87576720043835376561 0.23819098285453010888 -1.147260191823486597;-0.53714131764395711688 -0.29539082372333835824 -0.050963699718452382115 0.11307741650936747879 1.148064417623193556 -0.67609178430947758365 0.11324313847861272597;-0.33380254505376133478 -0.443585973534367628 -0.38245653534643359039 0.60841038776906608554 0.70206547934289231794 -1.2689872906440895495 0.66310544475874044767;0.98836266163077279856 0.31687716833051587928 1.3297224875376036923 0.19237995243849431715 0.89659049584060257487 -1.113913155237401531 -0.59371710465969662618;0.48895278654005125407 0.031745417709244702631 -1.0598309216697578972 -0.76843261107405247401 -5.0819272466599105798 -3.0292460333547719387 -2.1616122268158859399;0.75189006241316480583 0.82578167843523775371 -0.57213255954158082073 -1.1578924766996905316 -2.7772689351895092358 1.1016220061539689912 -0.96852665573004559363;-1.1460630136565044257 1.0835874138278900336 -0.48847523604300074895 -1.058424540199199404 1.3214499895310396482 -0.0058023423526110725484 0.017533686011627275247;-1.3458767381639564764 -0.6409590274121255149 0.48692803082299385142 -1.6977011223378377647 1.2585927866496791072 0.66302728094361151889 -0.14235832001284348669;1.4769175481313687737 0.69585865726125240016 -0.15107372982610026146 0.34355848119758153336 1.9802890924804905648 -0.44194569365080893508 1.7005615143865340233;-1.3015702742163288708 2.0489799430107007439 1.3952928655146159542 0.32404694632448421965 -0.79317261885413792299 1.7632140818556472084 1.0582155379338062939];

% Layer 2
b2 = [-1.906396706286582754;0.54984379203446664963;0.65098324517522709876;-4.8094650027789764835;-2.290578782409946168;5.6339330923038515309;-0.019841089698146331666;0.34474062090484569598;0.64775330894469129728;4.1338651897859080009;3.3385329643286221213;3.9864492105642095332;2.3567240515480785135;4.6295637335353045927;11.045858375421479636];
LW2_1 = [-2.3152043441459295714 4.0501586010282153438 0.067370776006990762408 -4.1060634373808753139 3.5372892895063294816 1.7268606406449142909 -2.4067045507699371676 2.7908602713850978461 -1.423393318634292859 0.89659286874626564767 -0.059863302169414073228 0.15978371170856661698 1.8842623891187486596 -1.3150164651082087985 -0.55664184512064729393 1.4600536331580242777 4.492278103426383673 -2.8862172054508712371 1.193586712949423756 -0.50650143080368226212 -1.5750110022725694048 -0.88338809566722698019 -0.12597072148820750992 1.1081477362373985951 0.20992885900358462803;-0.1725945911688243628 0.010090314091179757722 -0.027210893140867463413 0.42324051374589216623 -0.55592958310028606217 -0.41698027494403328008 1.3166573705495101532 0.32250170029899893898 1.3211728526507304782 -1.2805538082904783792 -0.45088135384548927442 0.71109798590462691692 -0.38257219191777641631 0.32528134674991338038 0.8043916453363316732 0.50900173259198000508 0.53256729403957026037 -1.526464717897623613 -1.2160648803597071677 0.082368652398290262417 1.2410652881869881359 -0.029964609437980609802 -0.061897906926680679174 0.65358827914856831853 -0.74433783671874664822;-0.027157385371300003796 0.91980967360828758128 -0.35170588400919322591 -0.17446573295820028138 0.80255109414528846834 0.052153219977077662495 0.52844884108570588932 0.67669372235475999666 0.96452279796669815326 -1.4956071729295339345 -0.54332728143778452612 1.1583338682678196996 0.20412440868498246682 0.49342602647173788855 0.85966594372516424993 -0.66137921807971666865 1.866041159348517553 -1.5803266562663274009 -1.1655482562021262094 -0.0060657834061590698571 1.5207358092943568106 -0.16844885466358439086 -0.2014765602758752383 -0.44262186005010822898 -0.38682824919564479105;0.7626125077853884715 -2.5526602936619999795 0.59188401621618014214 -0.68464937107663959015 -0.75692769771432133474 2.463002247709655812 -0.70248834781283087114 0.35002124425516661921 0.61673606110010936732 2.3071972604127100048 -0.24072228874395948384 0.076744185030020450888 -0.47641628472050168153 -1.2922392501577331103 0.08640005907723795342 -0.25243898360155875293 -0.35722658362078074656 -0.72457782981695106894 0.25158877811346547215 -0.98654575342294614781 0.65144087661151173219 -0.64482182324987458166 -0.533798590121226324 5.9824233796331061086 -3.248313535632079585;-0.90333594453128296387 -7.97735578107434673 5.1503614714018626231 2.764090532485238505 -0.12841172530458566658 -2.5051422229872555292 -2.5531338517513328945 -1.6505807619678400933 0.52940200722042862758 5.4723919856567491138 -2.3046123331895929098 6.7656935649604292848 -5.149811962818528599 1.6777823054868803432 -2.678833796746546092 0.87159289639242054637 1.0538815266347345556 -0.50780807329143673456 2.3690915097712408333 -2.3585634160856292496 -1.8951181146406395062 0.89103875994822168138 1.0078816589605490428 -0.10137553013133963897 1.2248673740715798619;-1.8584794362088825626 0.070015337220419929243 0.05281007111973236301 0.4664265492828416626 -3.4884720014803693999 1.3098553290648622394 0.49927808268481815857 0.069675534520888829371 1.8469747930183555429 -0.92588531803911389151 0.12414765169254737831 -1.9316586132612583171 -1.0762422779656166671 -1.8422315925477894538 0.39796474702129924772 -3.8661521783580896638 1.0821747611425607261 -0.90655666448478977593 -1.0572015998673867099 -0.98458992244329301968 1.539824421860918946 -1.0678918020069483319 -0.32910862830799531009 -2.2507600916746128838 -0.20449269335214045884;3.2117130326770055859 -2.2670419263475780625 0.28486116928260768466 0.095003019524633261494 -2.864813611407306837 -1.6539130849884764451 1.8440449547482966608 -2.8322671840595656789 -1.5774978067682157157 0.34716498716477472986 -0.34216827192443471928 -2.5486854595700774162 -0.1302447264486264189 0.44993457048134527509 0.036818707533955580269 0.16651271645506535157 -2.2056965005352600073 2.3562880255456573053 1.9316049641694310601 0.20353170226367858775 2.1484990266209078591 0.93100738586909914662 -0.96515016034394718325 -0.22569603123388568 0.36745089781813355945;-0.095700232233771442836 0.27466745808731291012 -0.15001797893937773853 0.12547357869781977646 -0.13357505186055604329 -0.21254609912785402126 1.0829104111335139393 0.33180763032215720987 1.263172966794883223 -1.4048398379594260188 -0.51759064854410152812 0.83795474200181985225 -0.18813015448774847438 0.39684940721172462519 0.76148475811961513493 0.030595585816704042731 0.80626048560361762707 -1.5040028064065862345 -1.2696589721384758942 -0.027462266169188016829 1.3622006171622660364 -0.10214628952604183632 -0.15334411949556533972 0.22106870622935731463 -0.65078902399552651659;-2.0303569106791945487 -0.7643607928045390576 1.141857390408904438 -0.55342852713039369927 3.9928389621304809509 1.7309883843550881721 0.23521224818925606792 -0.50036597212397027068 4.0053376944337317767 0.31408167103009321242 -1.8196726745479170351 3.0213680162796090478 -0.079614409995285767563 -0.82679744042327529829 -1.1971542606660712238 0.50460846644127099747 -2.5992518352182756303 0.60084558943650467899 -4.3793886573990290501 2.4746622832746352216 0.50931873831537866071 -2.0635491680542479287 0.53449215663344118443 -0.42135914468796309418 0.032088160476357908968;-0.78912645185408536452 -1.9754053176923640489 0.31059713121668741653 0.013126600437401056767 -0.34216588870614739193 -1.5977464540214243449 -0.64597251203697791944 -0.027869389513147692361 -0.088408064859020085713 -0.03204436333395776354 -0.31181820146887634371 0.41750107810734093938 -0.46777619210460252841 0.63662442446453226808 -0.046660160681368384461 3.0324399627908329435 1.4692074269693193855 -0.52046678649507560621 0.96631678511412755217 0.2532911460806393511 -0.046205370122399537502 -1.4288219685866283548 -0.36215282464216702607 0.81404851113717235922 0.15832469557136724658;0.65522834569955901163 1.7220983778158940325 0.30522028852461341453 0.92821140528408174752 0.19085516243236838596 -0.46456051491367655881 0.057534790961117784902 0.38800523921917157155 -1.1360794275073957671 0.26593729609279648241 -0.16149704384335505924 0.7307852924344094836 1.5402000756837506135 -0.48262645371416279527 -0.17175235501463501087 1.9599118549425997848 -3.0603047611447191656 -0.10316160533236369556 0.83976787953149012456 0.3681498596826833225 1.8103304222515277377 0.62146249443184997663 1.1138257323638782736 -0.99020729969357978995 0.18337177835664406067;-3.9101296951656876466 -2.9179905033369264444 6.2434590573482449116 6.0468334800995942047 -2.7158281257145033827 -2.5807559796017760512 0.12166442935861652985 0.40246579961034556483 -3.1373659751633695691 4.7282539346602430186 0.5260654120922716448 0.10852777506260576079 -3.5395276830450685956 0.83973691500769853668 0.66129354353167080216 3.8083858933469039165 -0.53771394739182343248 2.4090369835796936471 1.0267801429609193509 1.5080550893077020458 -3.5129485616088986788 1.3983727414571121006 0.20563138517266255079 1.9978086977195932405 1.8831826708483665467;4.7119781262508357855 1.0897960705301881212 -0.0017926790048792516641 -0.33343276815641476052 2.1868683864158269259 -2.0043343802473572168 -1.2991668902101476402 1.4892383039805796585 0.10114344544204004195 0.18280628107564281248 1.3619023400577474625 -1.2005950061844459231 -0.46222779723089596482 1.7875557049572903257 -0.80854065766645721869 4.1572405906750669047 -0.52837808401074770615 -1.0698053561024671865 -1.2844771337215226126 1.4457622562426615254 -1.5708100506190172396 -1.5737299790848107151 1.4155811491109193678 -4.1035281579556572851 0.47997535684986913918;0.23134539909554535653 3.0581253002961523713 -0.38265934011714647367 0.13228300267495077258 -3.3104357389234890796 -0.30066380155818717146 -2.2350300842533981083 3.3473365047108263326 -2.1022703130033244534 -0.023207509783474248449 0.96584235927546846501 1.6997887448427413393 0.80738885087090150883 1.8397282415654381271 0.00073206181657972007118 -2.8866188285694880378 3.3496853778303301574 0.37443421996668718732 1.8656232026263128709 0.43105769253061326785 -1.0397800766874654155 0.77520631906018477864 1.3301752393757060311 -2.0995526947091733838 0.62123258614344734063;-2.7200876235732844854 -6.2504404678939060602 -0.32274929994134909927 -1.5740614715573189031 -2.4992728567587159105 0.29688460490246226797 -2.7761440870297322547 0.55630415647222086761 -2.5965556871914001746 1.6801926114646774657 -1.2080517108988169106 -0.34665182759262364032 -3.5680933520877555765 -0.300864452950032224 0.14507617238072104127 -0.78692291707662065381 7.0354251707390815795 2.5830864780163809158 5.4177655412473422203 0.35663379052758154009 -1.8700900133529110292 0.055886015816810317991 -0.79517456461472446616 -1.5652647282824034836 1.363214673173031688];

% Layer 3
b3 = 0.63437664400688764665;
LW3_2 = [0.15223514196221690775 6.590688054631747228 3.8227557973535355451 0.13047257272376586168 0.012055456158530725858 0.37634771404302164166 0.22711276251517845126 -9.8843972890680955601 -0.035386544806244153716 -0.16846829025466056318 -1.8058687584164823114 -0.17131008125815386234 0.13252441038528656181 0.17032336364507028037 -0.15830803013827934866];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
