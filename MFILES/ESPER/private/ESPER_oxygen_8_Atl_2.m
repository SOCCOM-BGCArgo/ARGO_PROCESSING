function [Y,Xf,Af] = ESPER_oxygen_8_Atl_2(X,~,~)
%ESPER_OXYGEN_8_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_8_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3632261950173543141;1.2771125975634969318;-5.6380009385927030152;-4.1819409890593108869;2.1682230031013665084;1.7334388250863894676;0.43569882554941674613;-0.52214414222850613623;-2.385842203034297615;-0.74690621998603456966;2.6451832522635232436;4.341245470822102881;0.84859635116884224448;-0.91571102202025922434;-2.6456792622660008085;2.1870853954128270935;-0.10754673996806428382;-6.6490608617824529247;-3.6370714243246164976;6.4845120635998094727];
IW1_1 = [-1.4588658546228643331 -0.23346339299308271897 -1.5211886504152898336 1.4697213389324390587 0.076682990663967498524 -2.1525988262156716679;-1.1569559306408807586 0.77518486860046698084 -0.47935252765479324788 0.38381658957778258534 -0.82684265606561457851 -0.86755802602020670733;0.3432956502972060453 -0.53762999571080649641 -1.0112194652230859226 -3.8662189612165480668 1.3029438514822591078 -1.5475387209043265369;-0.78406363513712129532 0.49612167277860125258 -0.5194124672148869859 0.72875453067381734673 5.6342593913434262376 -1.7813897729970327166;0.22972441285554534574 0.59704518036120690638 1.5818596360569991965 -0.30926585790081190241 -4.9368931831908069441 -0.35254488522382937399;-1.3771166273169113126 -1.285336139480580453 -1.3830273214487003308 1.0053638213347577679 0.047812690680342592731 1.3137470533418718066;0.51776421833507679793 -0.26609326230929220003 -0.87575251868270498345 0.82716915655405187646 0.8628021451701325395 1.1134409486708098935;1.0974921155024337516 0.25422679267016379256 3.0859000190281498099 -0.18102444432860595458 1.5204702634264284367 0.11869969322698251113;0.34834408079799483726 -0.44080985924839405365 -2.2179511338482353899 -0.076955835143935003018 2.1850013365031339951 -2.3534282305727032281;-0.47524060804080092701 0.86784388373457943544 1.0470679901654409427 -0.19702888130384760279 -4.5886080850760730954 -1.672416083082880478;-0.019820020054315688057 0.44348840194715644092 0.42928527564930446525 3.3462978625325789928 -0.11352243838100115059 -0.4275672839201384301;0.79567411118551900628 0.35565959167349975312 -0.51210938651208770533 -0.2493220250495138679 -4.2481257101014504585 0.23534811222246648788;-2.2328155997450971348 2.9938161486524768051 -1.6740554692347326959 -0.95873252402827824348 2.5361495116427175134 0.32118815390200733395;-1.1037858577894246181 0.17190137156622825598 2.7398076093230412376 0.45555845785216381172 0.34001191522810642054 -1.5536751614817800871;1.0605059173557027652 -2.6261334322802825092 2.3553153092247218758 -0.34303676141392891452 2.319937487450768554 -0.4514847552386633267;1.0634220017529851798 -0.82767081282385168706 -0.75172109665171926718 1.7697367678354387621 -0.50326356071530031766 -1.8542958080250633301;0.48529640856293465578 -1.130702953967078539 -1.6590312913065743405 -0.94081781159832966743 -3.2789880475481578692 1.4845487929610157174;-1.8921002342866497514 1.7136603003087995667 0.31228149937947297099 -3.7069894321511900337 2.2498570850148857936 0.92849858580296407151;-0.31238833423736978023 -0.18002805439963356915 -0.68103086710168370121 -0.79032487508249071873 3.5532369808691885993 -1.3902815969426058906;0.88622799967320098347 -1.1007817885058717167 -2.5314171223814527778 -0.20368517198223137776 -4.6213038603183917985 0.99075872921429419815];

% Layer 2
b2 = [7.3559556411560480527;1.3872571334825511968;3.7100981250262501376;-8.0858256082928043895;-0.25819218599996485164;-1.9410314928830594283;-1.4108573325091517958;-7.4771762748295813594;-2.2971408494088083607;-1.0740883384324007022;1.2256509147874057319;-4.9476327027247313239;2.2089804359055693617;-0.4861183377383085924;2.9110872745101725734;-1.6813824520534568219;-0.47130448344277225958;-2.4714167670734323856;5.8522056609808785765;-8.0680899310719915718];
LW2_1 = [-3.7707190164818791267 4.6712036016253764004 1.3523995464489559915 -4.9370371834464004124 -0.20153453238050891838 3.0999968656244143439 6.0346763694960339208 -0.44722287954846628999 1.1303919987130606195 -1.2760395988406572076 2.6545117216458349318 -5.304185972068153454 -2.4940707752924100582 2.8398701087296052137 -2.8233441200821252082 -5.6964562027390339694 -2.9102807004860498097 -2.5145639779870863073 4.2190494875267692265 2.1905792093618541294;0.39704377434721338513 0.62539927166941677861 1.8606912708773668541 -1.5433289929754694381 1.3678315039411295118 -0.33116518044646686691 0.58295070487337696807 -0.28803619746146813529 -0.18042262498212938149 0.37080484103175093136 1.960988150253466511 1.2507948850560970389 0.53188991163547560959 -0.11648879879204647458 0.085683237975834394828 -0.65955275973108751231 1.0034830460647361505 0.26717253432297011217 0.16744879972637360943 1.251378327091192677;-0.28631167785547151361 0.10815325227904448724 -0.60349734169232471803 -0.49927769259701709759 -1.3275727655984648212 0.65297881174040794949 -3.4138407380441200267 -1.4739240694225248518 0.19850979212720187839 -2.3697216706525758845 0.56640541114644182841 -4.701089191415961821 -0.40653604931937864508 -0.064867427386046686011 -0.80335238699910715976 -0.35101811347701034061 0.78132717886372049509 -0.45914555381729055261 -1.4943640834790019589 -0.85857794700306788727;1.7016539641129773131 1.9754948828997165311 0.89373390724576240451 -2.1479849888521318491 -0.32745569577980837561 -0.46714480817873282881 1.5260482248036701947 2.5942439733844229188 0.81167030373601278814 -0.5535679198687691871 1.9388557555986425385 -0.083469698937425881868 0.15112712842783304623 -1.1237414136860850444 -1.8253270365385441121 0.7842418971045569398 2.2746921724183577496 -4.6562705522418328385 1.5202635400818393929 3.4507170254196370962;-0.68958418725380865588 2.2040503629342351744 0.38216101851960138092 -0.83653237247496414764 0.3959023162695380349 -0.16137438258753084019 0.43356783349185423759 -0.19187710425906340239 -1.013333474204271889 -0.09520559605536062231 0.28195032819088289289 -1.3893671084520100578 -0.078418630877855111105 -0.14284688795384573035 0.30086637535293980772 0.69966520830059497627 -1.2835881869171845704 1.1945717421329116181 0.78487544110995555169 0.68603979213692278805;1.0526834192606673302 0.28942464848755805606 -1.5457558750034867678 -4.5925959686124642189 -1.279874946318524831 -0.37638791508698926647 0.91313317720332087823 -2.9563129688281533092 4.4419997167038500763 -1.7742545147053625509 -3.0756893481154987668 -10.323860787552245455 -0.29401174306868521624 1.8853649814895077075 -0.78901875691290823678 2.5355273294814177909 1.5333923844268559922 -6.0892630250439747641 -3.0619251424652946802 0.081791151074245796448;0.1520694638406648036 1.3098760606318413657 -1.5492663853395038931 -0.68346138925117361218 -4.0399354394575457405 -0.10450638878444548641 -4.7221080808487343461 -1.5435858761480407697 -0.55655893062086569945 0.076928442766637530892 -0.35025957715049993446 -1.3665890833812379679 -0.95766043277195911365 -0.16516930385041425633 -0.55238053664316577596 0.27978569157296068193 0.81240013170166647249 -1.2942622303924282701 -2.0725328528909936487 0.43554723791582228287;1.218448450060258148 1.1595261925691533467 0.72750089353164204553 -0.46950406207684286519 0.21988576943673432407 0.32721288934189102227 -3.9864798842210498186 -0.31636102661166781713 -2.1640843333498205325 0.60595534700279862772 3.3853405236468065986 2.6271896541202282016 -0.12361826540981926681 -5.024132720683311959 -0.61700001021396466694 2.0034180864501589525 3.7299073575923689106 -3.3729090017098877219 0.32222089615439375443 1.0572987716861381724;-0.99105592508364648285 -1.6996183913873956772 -0.97243611079210368064 1.0102258943209387887 1.0691394681326278349 0.13419947318789995916 1.8831291085640389227 -0.2273749141490711001 0.82631277832141836193 1.5757682568356283781 -0.92238599170927482174 2.1393861002497778223 0.098247691345735618795 1.8680339398263765549 -0.079958381395739741571 1.0724357014448506753 -2.1857750478373110248 -0.70923194074613682414 0.50908214619090164099 -0.46200504042506779223;0.20931091108964611225 0.58700184971640056997 0.11738476039750363189 -0.27367611313125062011 0.21940505916336444647 -0.11233549739474260609 2.115193444754947194 0.71738642895423254675 -0.49250220904315339387 0.63466588160461490098 -0.20054092875365644999 2.3970245415384057175 -0.10246653732471827647 1.2902022973531450667 -0.027904594367591226134 -0.48034052436771201844 -1.371290737391868797 -2.829452978168566446 0.8588481190255291553 -3.6562170037151711099;0.76184397921820479205 -3.0202024996573806348 1.6255877407532590695 -0.4830021105832009165 3.1810379445818393052 1.2955395433863055032 4.6218629148533381112 1.1766278583308360517 0.8508118025289359565 1.6356997733906921688 0.21785152705334062673 0.38623798546964510647 0.41613104978632931008 1.6785813060638692384 -0.98197110298323797561 -1.9281815120621645931 -1.116766209845609481 -3.0852391301718120609 2.4109340889567900668 0.37267587958404657655;-0.44605710259849873367 0.35892083450500678055 0.7974208887424915071 2.4723876769500150452 -0.68494427937224167113 -0.66609741830362034776 -3.5561081240672480774 -0.65769778139085965929 0.9156966038137396291 -0.31956448285063798753 -0.20729729329099091939 5.2544602641469646542 -0.22921495640542735583 -0.20784202089375050648 0.35493608483522059993 0.11689623848276813056 1.7497081926352817671 1.1964684221588639534 -2.5500816559529475569 1.4678862547644484504;-0.57567671925924246423 0.80544266413891973944 1.9305945611971762066 -0.65790465276322396271 0.52631957531468986922 -0.21296124170866004288 -0.61140811998677491168 0.70768622835721395337 -0.24047813869536543985 -0.94155546530227496316 1.8329118545084472913 3.1467703992103728261 0.33434254003910357511 -0.27372651635057665409 0.23924589447092003969 -0.57814978371640812771 -0.10542621338916352558 0.16588119028012279776 -0.22398571884240217611 -4.1555209960123988822;-0.17979554076241885396 -0.92509203933837425016 0.40314904039354315657 -0.20547410342879418588 4.0275992139151943761 1.9304383577112591563 4.640489861056539489 -0.98161318413089670987 2.6766954797422517487 0.60694299495465664496 -1.7233794591605235969 1.4295552246685476749 2.0065602211333222193 4.0008904308753159285 0.46168829941545758144 0.48429382765091749663 -1.9251460123172798866 1.2596575818820827664 1.7032086487559490173 -2.481379122865063902;-1.5913143866731496168 -1.53476728195368195 2.3982218351970510106 0.057051606200911056388 -1.3698929253480527368 0.81422293323507322071 -0.89910530871020633015 -1.9955243449266906186 -2.0689518682664638227 -0.8321037098042239899 2.4131714819954339646 2.2170967491231312607 0.3205636798212509464 -0.28833891958338236927 -0.75599982802559895223 -1.0162853319399796082 -0.37574934670753112886 1.2455282884402085752 -0.48626819482861649568 -1.5638322532655895003;-0.41001938045004659994 0.31942964801664341934 1.449537596848735399 -0.35527351694554631933 0.49347393473190448443 0.83879959115037494577 -2.340422725293444195 -0.19488057666057806427 -1.2708815795686747574 -0.70823186448644104285 2.4370277755394189612 0.92022476430124922064 -0.19524802417399933496 -2.5569114861918622594 -0.066636452521855377151 -0.20529699360230410643 0.308137603482300515 1.0191752037920533969 0.028992927996191474732 1.2044614194396268125;-0.10904439610718676124 1.8946751800484937789 0.046239259533046271622 0.85334833772129992102 -0.19260822219670459265 -0.93582500468072526978 -2.2693735048879699612 0.24850487790469924509 -1.1716220909109464898 -0.01027398636808500576 -0.21131261011885546508 -1.7042853073942725306 -0.44937232776453817085 -1.3323679641787513628 0.35571136079887916148 -0.5535886590427351317 1.5681998257447324896 -1.0742778619114572436 -0.32083450437274335654 2.5705232205099357579;0.14831714226848871641 0.95833999656401736011 1.7164226781798888055 -0.5345274021259190933 0.15140696253272264982 0.83162666020496600616 -1.7227928735394113513 0.10505054638381466914 -2.3745658053955942535 -0.66228134729917909063 2.7631350682404045571 2.3022022628428793212 -0.4056589067012604799 -2.4878365391149888097 0.13076259292972683412 -1.1023364692032520118 0.57526611173509445418 0.23427886970714065229 0.50091792092925235824 0.87562529479108330843;1.4967025027072717869 -1.6817422728103061935 0.10170454204878978666 2.131686509175987787 4.6914081939966880697 1.6324616167256362775 2.7463790154568976654 0.58714111682924108315 -2.5249406864016119556 8.8679163435214398703 0.07681014754258902455 9.8943514897112638806 0.10349524066004504863 2.3020948941019674372 0.011464340023127662926 -1.4654021125370249035 -2.5103903034253289839 0.8644408039995102877 2.3205899799290330421 -1.3690151001467567582;-0.64199667489718004187 -3.5158814492614958169 -1.0682519953786937528 -2.705831243945387321 3.0529808692683797489 1.1672156346304289887 -6.4828655906191396951 1.483240035409402191 -1.5749666000733768545 2.0402701309363102666 -7.9679739972822565264 4.6884239681210306827 1.366954588233240564 -3.2944748728924717618 -0.74319771482661323159 1.5591143979916257667 0.86816301703230458475 -0.28091612610455851673 6.590878875359699407 -3.8284074210085718981];

% Layer 3
b3 = 0.03590057980265097537;
LW3_2 = [0.081752135906846226665 -0.62805127992438014584 0.32269516231854550314 -0.18154688990015804828 0.89643500974257284142 0.13706158369908871819 -0.29523663018619955567 0.33014918541459215007 0.47782568580376277856 -1.5506625631713590874 0.40892299933833398118 0.66616094228835220914 0.9227170827901194361 -0.23912722103692640729 -0.26454077848701207376 -2.064589830485705324 -0.70602377839763530432 0.95950483873106195976 0.41659600668062501949 0.34079513451356585607];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
