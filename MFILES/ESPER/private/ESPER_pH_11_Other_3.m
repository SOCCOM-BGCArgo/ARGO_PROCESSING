function [Y,Xf,Af] = ESPER_pH_11_Other_3(X,~,~)
%ESPER_PH_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.1784078803648698752;0.93782254549786248088;2.1946731056947195171;3.4130062188415895008;1.610062581086649125;-1.3697569994680278693;-1.4504039341368739624;-0.043909743769653432344;-0.46072897920574307218;1.4607672241939229085;-0.99817225424624445029;-0.31891485358871407563;-0.66044885004358977465;-0.73859484935960517671;0.060048508839929383429;-1.7146036184934076996;4.7710569634290003194;0.3851216378585459732;-2.2896478809326468173;-3.3321020118379904851;-0.38588086209655414471;2.3304925574141943656;2.7162803090607012813;3.2692484914418606934;-4.2482557761266201979];
IW1_1 = [-0.30705890990042455924 0.079299009542224810354 -0.60033453075613651961 3.3751628924920966668 -0.19830127109318068657 1.7636684525670749402 2.5697207940655304448;-0.55783346055616789272 -0.18708168970694907807 0.80931898158962500833 -0.62565251219717832321 -1.2921261272605686354 0.7238967998809712201 -1.1305037040969851958;-1.1669140291644028995 1.3352346428325707617 1.1810077950253310419 -0.2086555569124939058 -0.72510848959443163775 -0.50587217956655372575 0.0066723487383923965263;-0.1697377301445105735 2.6165928245797074325 -0.91531852820945180937 -0.55448325043710877669 -0.73536292169142858377 -0.73473071445617954556 0.8134589868095887244;-0.1773018500381390028 0.35005362097883774286 1.5083281265937411586 -0.40602560217989847047 -2.5216346068341985998 0.62706475772871661523 0.54480176017837655955;0.39147190550643340412 -1.1715614332724544333 0.10128527098656045502 -0.18559923353890683817 1.7494159705981942032 -0.021576072173831908896 -0.18607666728402758038;0.95596421939094711195 0.32741724375582736961 -1.3275474705658445451 0.059811330820063249303 -4.1986934559058832761 -6.9263871419903733084 3.1964593776796323965;0.14632062044036162063 -0.41631136461487594502 -0.50159288971264615054 0.38597994756888737156 -0.53035494389734438858 -0.21482481147560902879 0.6215845697849764484;0.096199096429731609237 0.32163407834985990874 0.64854595156764749397 -0.23846131671704987043 -1.3739536569363035579 2.1861093965930060712 -0.5701451172216374097;-0.9906425297357610571 -0.48849807529437200282 -1.5620204327007940481 -0.035171536461406353868 -0.97545624204051906148 1.0054855301200369411 1.5661796678496855417;0.8825580026517290122 0.51485290042105125163 -0.47452941387899799652 0.63622502753730680869 -0.44189195403715508803 0.78114702896162102608 -0.41308113790491096662;0.18707011299257605974 0.38448499032503563599 -0.36601821537445694554 -0.40948659252663799357 1.5835614108397846334 0.0029357231023448594753 -0.58775051730882588163;0.041296044882283847177 -0.17150689574011421246 -1.8334083253855635309 0.32275803825319959728 0.44697339402836128164 -1.550197097237863364 0.16169837116460836213;-0.14189138765801698194 -0.19599138497057380648 0.76092501839933879282 0.24382675122857946914 0.98411082861995458071 -1.9125600123571930844 0.35811868785243577973;0.90873182689650988664 -0.22612797988500971114 -0.30700252668243560583 -0.40980307739834903602 -0.97555667476480778522 0.92834350270925747317 -0.32330203060957346528;-1.3236694182621242533 -1.8630985763772311969 2.1150515930747193494 -0.19514415720918132369 0.38075909521664913493 2.861037370985121786 -1.3617174242595797562;0.18501097673736846549 -0.054079228433344055105 0.16584511944712576614 4.1976550517148440989 -1.1193868152984858266 2.0023950290828427256 -1.2363547951044597806;0.43776243479109494539 -0.22814980011245961089 -1.1279088624434570054 0.37648711084606667487 -0.58471856606031169523 0.10857925075887478461 0.12922913500807300946;-0.87998718488751159761 0.52812002087473508549 2.4373058852494340343 0.66098421019077724381 1.856275244040645811 -0.28905345670119075852 -0.32988512094287836263;-1.0793733828745029069 -1.6951271308395661208 -2.8844731632948739097 0.09415028040144604593 0.52929580217846827761 -2.6419241192759765902 1.1104406529874879528;-0.86979372059080228841 0.4411060961334347108 -1.8233195501969174934 0.72126767048014273076 -0.96326553463197195359 0.97923742980987404927 -0.032850244322925652163;0.25080990133127345487 -0.56382721876306807207 0.44198464485869404239 -0.53494090156067264363 -0.90487603620728529474 -0.35354797816660754606 2.711363080273749393;0.19399869867854288574 -0.92463434536151767329 -4.6746712650416082369 -0.87117824702145918447 0.54932218087332451706 0.12197589384099535859 0.26355272288003367409;0.0080414946788899630686 -0.22150169254978610556 -0.85671956755658817961 1.6888318279381502318 2.0316659024066683337 0.52129266515095895596 2.1357652782674043657;-0.9659383149954361425 0.96117072805693481996 2.1164857060016823986 -1.832966445495820107 -0.54983561545731329812 -0.58275861821207064484 -0.25950405647449681368];

% Layer 2
b2 = [0.90675664401285938077;0.74571395257945627399;-2.2113581171861489416;-0.5462471643415283129;0.50926376318962363055;0.80465396290377555477;-1.5231922934816801707;0.48321591112724426864;-1.1975429546612310627;1.8240351961021903371;-1.2018464346885515681;0.041368463415083350787;-0.63337548333393089983;-0.027476271559010487233;-1.1338382738373826708];
LW2_1 = [-1.0356811348367367387 -0.21814400530946867485 -0.29763486653088350176 0.83777795529263421326 -0.82824374310914838926 -1.4815298055503347552 -0.48289262179458408708 1.1776110977403608793 0.75448374235058701665 0.45470707894267581306 -1.1112950579795590755 0.54266252805417147798 -0.28399212430203041313 0.9986962599703164134 0.25939119451587183685 0.091041299668869951622 -0.93878691565155103493 1.2201003842692312862 -0.63808235782319622231 0.077449532196943837725 -0.043268212608175038447 -0.47432202546210849858 0.79639766763871211452 0.38102277130195388866 1.7470321096827718943;0.7259706989928506049 0.73110706452506557529 0.063638083824073349293 -0.035960471733628471269 -0.23462669213665296453 -0.14082866855940190387 0.46155306503701359899 0.71422260849278174089 0.33113855967217603604 0.010697016319378353788 0.16989948669202448173 0.07485711677121935359 0.14873803220878015208 0.58706982065416413175 0.27864167458849059544 -0.087598174310250132013 -0.021577146072666534421 -0.23483391461415836776 0.31030166911000711671 -0.36456040777099218975 0.04901986049962731018 -0.18824936244812937036 -0.058733590614147519748 0.15338404238166855609 -0.10412060271360580599;0.039623684150409975435 -0.90413763287575987793 -0.28900439631498292536 -0.12529476176183390601 1.043319905567966277 -0.21895901959394151182 -0.059156289754514125578 -1.7953630705465004613 -0.47754032926510364687 -0.1502397090064579166 -0.49267473042785070447 -0.74395442261946354012 0.54770165673724591215 -0.73645053036757479603 0.22618458057871002054 0.13908453609307927512 0.68713951220039692913 0.65280900179435630282 -1.1109736048031570999 0.045951238805831878809 -0.38459022706405493475 -0.28004933544073384866 0.0022209960025728787969 0.77943779708721938615 0.94252914010612520723;2.3516454517909597399 0.49592191534564589173 0.4932483873187817891 -0.30803114175825291321 -2.1861718740119404636 -0.68091710308655906125 0.74548259048678122696 -1.3757631984827287663 -1.7509528985529532186 0.74896884868655655421 1.4714795058648757475 0.18611943512328102401 -2.1699889209926821465 -3.0846761169993897056 -0.082620034321161522906 0.22592295893006061891 -1.8467734939665110261 0.044446333361078879665 0.18197831158941063512 1.3697673409447428394 -0.15757879328391952156 0.83129970561583321764 1.0155008828588290015 -2.1389566250347749055 -0.051940291855199396953;-0.4339192339407156318 0.40170346129081385689 -0.50552858664813615786 0.23797523222610489357 -0.23275150888517834313 -0.10869692290347421348 1.2975951733765718199 0.39904641902981352608 0.53195243719625906476 -1.3333635120211837499 -0.51967723294809209378 1.2301151675186923207 0.35675226621266192817 0.38401917398441515195 1.2537856018411730474 -0.36964212730778978067 -0.59943681532671910794 -0.38169827425556068778 0.98323882045758603798 -0.86593305423043398505 0.18480608319441063636 1.5468347209374644358 -1.139697857810993975 0.49286147366362087485 -0.66698762536220446151;1.1915942767753442411 1.141371651712716373 -0.071212679316069268931 -0.46379243532061187327 0.20012112987183311441 0.22550137230253988752 -0.53808571945337535514 1.0283665856214554424 -0.22404082278677717177 0.032689255320013585471 1.8864098916427574082 0.35066619108841562413 0.83745113286980643608 0.6742270588744977422 0.04303341499741246412 -0.10518124910787202131 0.012326091609734720136 -1.6863549616058566283 -1.3940767143966086294 -0.031007531699544746417 -0.033971609757602973245 0.62230662211035714382 -0.52435430355662171475 -0.17650105844189223347 0.30261914225481589824;0.34992594278059130364 0.10745012141993609545 0.42365786932578430868 -0.80274937827349512887 0.37691863278969428563 -0.24206553689916296412 -0.55484718805136379327 1.632101329644365828 0.2197644448953035845 -0.14089666893925117952 -1.2095211721465337629 1.0042647997757638834 -0.53851270698223518973 1.2646459926813893304 0.045537087383272931151 0.034925831568659200521 2.0220152047401955819 0.94241581499010362855 0.74304719537309793509 -0.15558077449574350681 -0.045661892883803720244 -0.88229329265374967228 0.20433730533151076014 0.79467642370197777435 0.12775154436438859729;0.56555969926629123812 0.87078496666916482827 -1.1268351548446788879 -2.2000842556802266969 0.29457901917291312577 -0.4013917374305173702 0.29166289839852249655 -2.6994346729690708031 -1.181544054957843759 -0.21160562928817908124 2.5474443323809974338 -1.5383882175373673196 0.23755572286914880542 -1.6655728450618836334 -0.23828361445548670861 0.040019336055853942102 0.87778721788270186455 -0.031071159514816482083 -1.5021492295159895036 0.17635228455366802613 0.11594647209827835255 0.38745299248429754257 -0.99141551889964685262 -0.37602808377254420824 -0.29272957170621943801;0.32680626002686635756 1.262127395440407307 -0.83750076054481903398 0.064362212716024672088 -0.29299032826981963318 -0.1141209867748578799 0.13394221600815955919 -0.78135544333309581155 1.2146290526058807213 -0.73045564070519797273 0.35200271290953327741 -0.46659624099109137108 2.6191584445459192843 -0.22953427020537237047 1.0822627143059084798 -0.50624969250669649146 -1.0677001284269989068 -2.0241199351552965346 1.5592518037596949654 0.14442166943050957495 0.79140077720920221083 0.64920155217761954525 1.5620835911792525508 -0.2405725689041118831 0.49193988959370155145;-0.66949713367018881538 0.1989420963669994713 -0.25548398670715150027 1.31633094321003008 0.23140866286684591557 0.35194122734916227779 -0.60324436369776768263 -0.29565386415946276477 -0.91094427485316509241 -0.89670352242032969059 0.3741223103799985461 -0.32363383237382881141 -1.0315972595774369758 -2.0737434360859769988 -0.091775882461871613471 0.13891281369522046063 -1.9477062660730506405 0.25186268245273968347 1.3827628680055041865 0.43585989733071434094 1.4382204464613823625 0.32147092871150212412 0.90233672285504129551 1.0430383241895839763 0.11501574871499185837;0.038996521208149177717 -0.86179998529022305842 -0.03685307286964702167 -0.61990185226858174339 -0.41362125522454640247 0.33973058136194289602 0.49767551184352298854 -0.64375893862673816415 0.15644850478436245211 -0.069416716136021308636 0.049530790190934516348 -0.2786896304248812628 -0.96594610954383874901 -0.28210922185141479313 0.46847231787320048335 -0.05384737296448460081 -0.22542976688767465965 -1.2665540345223167407 -0.04790945387447385212 -1.2210001452458760784 0.36875432070810143514 0.29916280883187312822 -0.37439840206433677716 -0.54343705875079861833 -0.23773088751051038581;-1.7470689334939544235 -1.1627828432232834022 0.1492634089580272827 0.10990239696031363359 0.02836057263900606043 0.4002338578385037926 -0.09521220069218333526 -1.0461013405601260473 -0.48314575205955645476 -0.11751804128449323816 -0.60849256329589374026 0.021176448321327236146 -0.68544283001650441189 -1.2924667720989289066 -0.43426599029440293709 0.15679037038794002568 0.27267003057976541003 0.24184517224377943823 0.78956525847066638679 0.58236393503498851132 -0.051401138695102724374 0.28006197603520421868 0.37698721926220735146 -0.41773142419058684194 -0.34260846701092328992;-2.3875161584875108645 -1.3992835046050888792 -0.28753189182132876667 0.12548998961883522929 0.013706318402282799407 0.54893242373806772072 0.0046493622108862431297 -2.6895112517569055299 -1.0164637433366667807 -0.055097838549302349809 -1.3075962313798394909 0.040741888742552336 -1.9586842736919873875 -1.7368939900248705488 -0.41951162078295817226 0.27324749980032975172 -0.26899055614965322603 0.82769143321844884653 1.2803788048770461394 1.1437596262039522177 -0.23986226893009848782 0.4816469808430459687 0.88100090726821100873 -0.68043823173989803621 -0.46361802410771218996;0.70350079322063441278 -0.37988125724142657313 0.12686469596850030728 -1.1096747085820914958 0.012823960360917137022 0.27519814439836259856 -0.70953216909381755517 0.10823069803409507417 -0.27557211575590151442 -0.079757008754713434873 -0.28877039843812257747 0.31459688758806225728 -0.59608976721627648931 0.17807136713045279564 -0.34686653527593863666 -0.10587416297544734178 0.83923872069222160697 0.074471743676063406614 0.24396641162601476194 0.28122994074451101998 0.20628366563192385152 -0.062901512893590777464 -0.56084555473913744184 -0.37857122220326266948 -0.86790005596116648334;-0.61375899096712238645 0.2771912574939602858 1.0553764437415040778 -0.64968272192759124462 -1.2151043308546267685 0.48389451599353489053 0.74831753154929581129 -0.75182541245555434273 0.82302087562014158983 -0.62393210427824208342 -0.15822895021963911955 -0.58170854812944183809 -0.78596708128594261478 0.0048327694066936724426 -0.27909319570596868854 0.17475589693243986922 -1.512267930680666117 0.41701575078736391466 -0.60046540817152871394 -0.63428494527748169318 0.46311070999303105555 0.8313100102721053819 -0.0042687818654188712519 -1.2227788640172376766 0.009477708262527927835];

% Layer 3
b3 = 0.83652427341156210261;
LW3_2 = [0.46792830186037620566 2.9849129805670755466 0.90429405091123249427 0.18737055501435226357 0.17989011101441124141 0.93130622823435404989 -0.57187941212065040997 -0.25279414622885237884 2.5226286147637901891 -0.60962731427259286843 -1.4366331277525872245 2.0803062226694404302 -0.53166636896234054088 1.3445662532071385176 1.0102904543829902551];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
