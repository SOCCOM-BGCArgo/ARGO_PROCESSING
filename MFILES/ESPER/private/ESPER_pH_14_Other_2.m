function [Y,Xf,Af] = ESPER_pH_14_Other_2(X,~,~)
%ESPER_PH_14_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:25.
% 
% [Y] = ESPER_pH_14_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.2165528110976437937;2.8135928303446773313;3.3576582721073666704;-1.8969982071345443675;-2.80113478593036902;0.73054953551092038921;1.2020828837478627626;0.15036256367212799678;1.591284713080256763;-0.95669050749686279644;0.35059000367463022396;-0.46709327207810263927;0.19568222450733821494;-0.71289241992829555095;3.0051160440950002162;-3.6267146384977784201;1.4355660146446722614;1.6218109561891131953;2.4407570467852122142;-1.7258242620116612809];
IW1_1 = [-0.78433304241599721696 -0.63106400753554847682 -1.628599430218824029 -0.49437642826444150312 -0.58672654635590204553 1.8309460615487707091;-1.3926288502168524541 -1.9036370661607111554 1.5726983173848392283 0.67666335450719283795 0.1463057611361996968 -0.21329827406363244258;0.15287765054875762649 0.81071673475091832195 -2.7766262184948939939 1.4673282865005186082 -0.81437684580096181275 2.1234433779617805094;0.62733031433852914915 -0.51642263834019352942 -1.2220646829589310034 1.1628942498928946936 2.2011361331845837874 1.1682130126062382214;2.4677881084273840528 -1.594840189788031104 -1.0681368268621034279 0.37141133551281724223 0.84020577214111480391 0.5332869697014794852;-0.31923323734856012823 0.51166047100250955371 -0.51577351185717112969 -0.66595706914634500428 -2.9457930274467885035 0.09175108944215759621;-1.9284980867293950446 -0.717796501107718532 -2.6426817984559556329 -0.73407220664678385358 -1.2924202289968027557 0.10915021264690978609;-1.4516453280828334194 0.8134741944513962375 0.70370535951856516554 0.57819588440934943652 0.44496332067713245673 0.37272448025616927714;-0.22759037006797119829 -0.073023917163449608703 1.6337831100893747127 0.29221598876691146085 -4.1347853412050987743 -0.65798759937078621363;-0.071971405733866136711 0.32036271032926277869 -0.91030632236745634422 1.7214272387976723433 1.7887500478346944899 2.3221540054960225774;-0.90191950366031126141 0.063105698754881880963 -2.4158310541162029139 -0.93137328210663894446 -0.57941801693975891752 -0.85617958356623935501;-0.0084069996274105471962 -0.76196051532187059063 0.91362201851326918511 0.096492001198407659213 -0.098939306182183495153 -0.47030915946136908623;-0.46417400994478275056 0.38243204456045004624 -1.7177342806417963406 0.44614111985203930288 -0.80515552584482452669 -0.51739364453850589243;-0.30074489390030295644 0.18321117136578543572 1.6939569458442207406 0.20764536495174751307 -0.24601887538348954365 0.49694288242715595194;0.081719605939267817019 0.40737666547899548108 -1.1550570475060819575 3.4875390326491131354 0.55219186773819139979 0.86248619496611123036;-0.49058278022696233389 -0.06152861187535302312 0.17879523228941948676 -2.7626749157956247416 0.40963802051297854012 -0.024852932958943949743;0.67594812675342696995 -1.1329315344392130172 -0.62715029303906133507 -0.60355451599662501838 1.9263753746157279423 -0.34071999269429720236;0.68942858366063597408 -0.27913754009771940545 -1.0558168647732262269 1.2334524662169912279 -2.9268699035046856771 0.71476439359501275916;-1.7273794557719113207 2.6662756145922430484 -3.6202965041291448323 -0.79025697834656960516 0.14520947341034096123 0.4087145449019648491;-0.89172078282295108576 -0.64205800374323818147 -1.3692204099824185626 -0.94242595506513349157 -1.2572571500038491887 -1.2613346130055331784];

% Layer 2
b2 = [-1.1011307922512183488;-2.1189651754521605653;1.4083200721222826068;1.1760603611359563558;2.7235298871460948966;-0.7219824396124032706;0.016402421532223886852;0.54400196006248047187;0.79783175597994793193;-0.49483988293227709754;2.4676119420269340132;0.45821727965145958583;-1.4904242132084781769;0.092313758090511191523;-0.16876951202648107775;-0.16523149588212804328;1.2305393241126125758;1.9528217461733625715;1.2011057927303210313;0.78132226600844478792];
LW2_1 = [0.9346360356781859835 -1.1164316471044113399 -0.2615512583720569495 0.039688793715061919387 0.31228985044090429302 0.36564538018862857705 -0.17178508995914051893 0.95827806848699359499 0.89468669197509853586 0.024038298734619704955 0.80919020214486303555 1.8996965196321247138 -0.69209907791136759947 -0.031889295521397152677 -1.2451922182431829356 -3.5558691671008042512 -0.40651064602025888117 -0.34552182542108073049 0.64646468678606339164 0.30267089121575313504;0.21926343725029542875 -0.01429226577342230381 0.33980142642741534287 -0.3800693466460157155 0.077599971373463541569 -0.67969964190861820175 -0.24762260829528379147 0.64760957212526748528 0.64863058575852150511 0.13371616146042475393 0.067374622548124887822 1.0114345878917416766 -0.18614385293841090308 -0.24086194859116277778 0.94679062343304531968 0.63192607810952283742 0.24343815722345293895 -0.48691789605580276801 0.92348368231152422325 -0.33079723721759873856;-0.54993632809166370645 1.4825170459605112594 0.12314141936920584841 1.0073917046084690519 -0.9481085198544595416 0.88036711604376638451 0.89497051879995592749 -1.1552006003407493395 0.11398760231725792169 0.5276068668044296972 -0.55657827749510202509 0.9290574864960827739 -0.0081407353607594219735 -0.54830332431888162414 1.4340843485413901082 2.5262616314553087982 -0.016294249810466388678 -0.10428325508448051118 0.49884396077340587006 -0.797542441146571357;0.53729867794822827598 -0.15747573901023617648 0.30193111834817598638 0.32458800829268164012 0.40081382157033790259 -0.14251691090165929943 0.15173040632695700136 0.041515521765856835956 0.28684475738558179447 0.37232789723984560659 0.47291616730761570908 0.37378040998483602619 0.3172059150155466245 -0.14645530503838355418 0.16179364125731443558 0.99706892184184325867 -0.1865588373355729912 -0.46465254912659692543 0.37638128569757656194 0.32428953260397308522;-0.41808686378520226734 2.6857493214876426713 0.12548223361972848933 -0.006322334317066214196 -0.25800556333713942081 0.67427584615410007807 0.35644225220449565761 -2.4871205508322473676 -2.555370267093723502 1.1495830250146741314 -0.46877928847253735878 -1.5707005883881464126 0.17442835306733109335 0.879787953939834666 0.98140548319299258928 1.5158016154651374752 1.3458348205896271121 -0.38677558569541881095 0.27740630952458561476 0.37659040157106626889;1.0245595477613391733 -1.0459860241695027039 -0.37512215686191618946 -0.029690986267438480156 0.8042484043966193763 -0.22606723399531711283 -0.57787252968464297709 0.77505256225534291392 0.54590588113401294912 -0.049494751679971610292 -0.096874020622302728367 0.92959656963025416587 -0.10865734762738522845 -0.093525471450788280614 -0.77506056014777235941 -2.1035033291798419519 0.1797938751107039379 -0.57865534674232010914 0.2009059163766620526 0.036590034481350681983;-0.39660335699604015725 0.40798917530331285652 0.019069719651383071346 -0.10758768068339129298 -0.33928183151349300406 1.3699368950886581242 0.33763969166186841298 -0.21139763238025993664 0.21961630824149722119 0.082672394493671710891 -0.65882247932702542315 1.6478616183014351826 -0.56199582995003649621 -0.90003926178093973665 0.72675470175172907084 0.69537844892497657767 -1.0218469862333252607 0.04594408920957707837 0.80999870040688481954 -0.67012503345234486485;-0.26046860558641776739 0.82899552646452445703 0.083007997029485691698 0.76956289333610494729 -0.40738579604916125287 -0.41979874070325889912 -0.63706193664046351088 -0.28492009262743112075 -0.38583847935299830922 -0.062530982325175427095 0.46124935363608821071 0.37965572818766879504 0.065559685195562641957 1.9742642513655008774 -0.34274948299785656936 0.048660017101883015767 1.1718130579216985421 -0.38004512828987913053 -0.034599909136240572516 1.2768410375954968305;0.3236298591877264097 -0.69614659968435055326 -0.0062957112468332862912 -0.69614081587169440724 0.22756704472930394667 0.64513611174166096696 0.7506935262281442256 0.030373975029288666216 0.24179391340824238354 0.1169603897508325191 -0.71554576454521179318 0.0015721754971453512362 0.032024889578589441075 -1.9637060213840555889 0.44742666418487869739 0.32003639603518319046 -1.2292471265995013052 0.22833565202456862497 -1.0457304664776760905 -1.4179923853795164401;-0.21589401399095603518 -1.245312671334980692 -0.057842189621195326532 -1.5471093665627431157 0.54567108114836027077 -1.0068112374084030591 -0.12447577644334895108 0.65167025467591277454 -0.17763502269749426032 -0.45931629388725025986 0.061880617459081153908 -1.4813138634386608938 0.17616831696245469074 -0.1189435061980376046 -1.1614035214328191081 -1.0599989162962273337 -0.55613234907630826331 0.51684278611199474529 -1.2637500059354487281 0.85260401300783028589;-0.44543717937182014666 -0.24514859049388124101 -0.61459411614981906968 -0.56073517894478386303 -0.0080839136650962140768 -1.9216846523036459349 0.29979322445630918192 0.38904969078964446449 -0.96532247584174080135 -0.17502391140381834411 -0.16576837766237345617 -1.7984652337391788812 -0.11964326534318402151 -0.039208818897627041589 -0.96545884734075593236 -0.13732216854724563215 0.84852602887114803032 -0.12107585231025673467 -0.7244450326455210698 0.57163506971297006753;0.099717917244794090914 -0.44346455199759282628 -0.0038754402403934646443 0.0092720690321983420534 -0.14509037084297088382 -0.3554652677433019492 0.055136501545704381944 -0.088659701716199482147 -0.56060655406053783167 -0.016960857888357945555 -0.1708944888400749651 -1.7548472690489216319 -0.55739841838389536655 -1.5868315732693634157 0.70206934236358664592 0.35070803094106672848 -0.15617741380891356218 -0.07949797400356888033 -0.69142606856468746823 1.0217875074379216827;-0.63674218155276496312 -0.36153162507753006105 -2.0680632069124134098 -0.33205041937301410515 0.96197206599373530356 -0.22140666677422216058 -0.66186246495834843984 -0.060025691443522662116 -1.4947339304508888702 0.20753957195011799031 0.89414516729052284649 0.030111135168757744568 1.9067583130291210214 0.52848706799796085765 1.1909241918637687441 -2.2520827747586467105 0.34509597648406398207 0.16203795227136114088 -1.3770066300185612729 0.53627481245181785052;0.48039242476875387844 -0.30670877500304255525 -0.13077412658620524155 0.43988475663093795642 0.48782299279393337432 -0.24290827996649486109 0.10462816966189371348 0.10752497293768067954 0.27219812033228840686 0.21486852511438375712 0.37410118900078132009 0.46291291773744541738 0.49807468158107265355 0.37672128798651211001 -0.11816041104956363783 -0.58378167050090779 0.3515501832712663588 0.10022882660239838815 0.83817669414465822975 0.58824566013172674417;0.15325834864873708052 0.46951747649075797897 -0.35377824766128102008 0.26554472560094050104 -0.04745514804015314031 0.19378963071036872656 0.03291828062751504802 -0.09332900295304932814 0.18228942244640225501 -0.21764251782422169845 0.35273229002945943877 0.65902337309363512308 0.89992704582103821842 2.8020793901502241141 -1.4366606659173404292 -1.7780216517500737616 0.60578757515175007953 0.59700050138891502804 -0.40968339961838190488 -0.65734008325388781913;-0.25991770395265595406 -0.66925103327232837724 0.32925649582389465708 0.25848153594754702533 0.66687143698190087804 -0.11438761664431063014 -0.18403292381257874144 0.20553405706943789211 0.62071178639793689324 0.30162575477280983982 0.39297455862075630906 0.55233040519086618048 0.63983990485349551136 -0.097809445259273986029 0.18394792441371196623 -0.83303779655350562727 -0.19925295732144349126 0.44000812405099348767 -0.044414225515105418274 0.9787087540838663724;-0.045950062832649664346 -0.074012463672243553048 -0.7814807433346673271 -0.22430270012342676256 0.073868083661496428127 -0.73448273236490047022 -0.016575644878145435329 0.22758633608617900856 -0.72056164426973456916 -0.2244570111125401557 -0.083187421844260478476 -1.407853825944863857 -0.31789458011678206617 -0.24868006327904373931 -0.97623737668590937488 0.23604396873615596242 0.52477291285818250532 -0.31337385433477482621 -0.31617198950698427451 0.061155118236541586296;0.17852781855998714478 0.57773221255362305904 -0.1718907912339938393 1.1584892127628376723 0.11009718048131686419 0.35948744916535746441 -0.19171592196707190614 0.071615759361709177555 -0.051710439545672989836 -0.1550016150695483208 -0.9150328125515392319 1.4831164545659949461 0.030793448553217903085 -0.45137229901150638378 0.41382130384332665995 -0.51032698750919724962 -0.31068394484459760374 0.39206846462082156624 1.4700215850892077718 0.58601912120996113575;0.16130176958249398123 -0.08807222849366123929 -0.13571413114680619394 0.36095218453558503002 -0.36065644469164553909 -0.66588569314619838746 -0.069839318888088419701 0.42273248662485007898 -0.064725617644864105737 -0.0075364179140700567408 0.40648495872983519961 -0.54720202596529765593 0.067579692387013626242 0.63955883143732350504 0.32100601299712494541 0.15730186647188859617 -0.026788888685055418926 -0.27754384963513523132 0.17932684032658893769 -0.13593237903180602211;0.026852451182520713224 0.2409156424381804773 0.026036658026220318302 -1.3375568072839358891 -0.074227899848923903359 0.34537402017524021502 0.59533045487234592663 -0.17899747774504290443 -0.098087057467715579873 0.62231855759842336084 -0.29243498911496523807 0.081068728452707822241 -1.6063421059557116966 -1.9170579814771844251 -0.44534761313534088067 1.0732940947899465289 -1.2726928785240410047 -0.59844790712913353836 -1.8116134388746469863 -0.1904360194302103515];

% Layer 3
b3 = 0.23810900992995906456;
LW3_2 = [0.28574563716858847329 -0.91891037238101458406 1.3371315224546522771 1.329975311803158089 -1.0582311221781866006 0.82372010123792038794 -1.0137115948939858789 -1.247573934215817415 -1.4489704242681724633 1.3340064417546917408 1.7468414195648320764 -1.0782321645854693326 0.42790342932973735035 -1.9321356587774440872 -0.9952458103701711245 -1.26242093985045023 -1.7439286199770611674 0.81055597579487714821 -1.5702433735793224212 -0.67325374710512531085];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
