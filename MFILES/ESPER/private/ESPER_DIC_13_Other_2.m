function [Y,Xf,Af] = ESPER_DIC_13_Other_2(X,~,~)
%ESPER_DIC_13_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_13_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.150493491920102862;-1.6978026815823421547;-2.6585788013300830634;3.307586669688967973;-1.1613166227925058038;0.42119669869395010009;0.79291330922115321744;-1.2109796522382592077;1.7478087843109935129;0.44599110099989358602;-0.021142607423079447238;1.1316712575267693364;0.94652769853191720539;-0.61975945436238477626;0.14594208816138617979;-1.3240051307407367798;2.0954280304106367439;1.4938946320372170629;-1.4891756620293601365;-4.4840094582479341767];
IW1_1 = [0.02667981697182742265 -0.35874536745746227195 -0.78433508092576875725 -0.46634753367666392787 -0.99047495587803124906 -0.099010481520928533827 -0.71844643656916851171;0.73948885125320062972 -0.16401092571583264501 0.29131052981790822587 0.65249406507696139368 0.6922092219826366799 -0.72506805487006475985 2.1960798528536722429;0.30899596854965200032 0.35386487016866352562 -2.971204330495198942 -0.33659543686646914429 0.2177895967441428049 0.30066117306565914857 -0.2621521237462127174;-1.4110689601601966725 -1.19405646254615605 2.7777531635850287728 0.33658798557421382158 1.0423612857347217542 -1.5661911871808338326 0.58628002477067986398;1.0691766502855519771 -1.2626685674875859355 4.5074873961435111269 -0.48913682044678058469 1.8023809963539272339 -0.45455118346897432913 1.8966543521687426743;-0.32055640607595792257 0.11937672185529209223 0.63693646533703096591 -0.39317438611380178815 0.40591042640009183939 0.93973391716584608879 -1.4971983938120092539;-0.77202233158586797135 -1.0298419056132430693 1.5406150636685189692 -0.093035045623039408502 0.73563499839469836949 0.98043780850743211808 -0.6891042393113926412;0.51911139313747101109 -0.66634511166322618614 -2.4152407809663789529 -0.13020686387451155253 -1.305351561388380599 -1.4992024364735763164 0.54027828340154426812;-0.14760927921375976979 0.11907076199085946111 -0.19424564154158005524 1.086882784694712889 -0.5774358020738066255 -0.10844288049291007925 -1.0195548002859482484;0.003924066374216785523 0.10031855482227904075 -0.55274455933795396678 -0.18809915851254427333 0.17959828809627062518 -0.19978229873372924108 -0.5464523767692193168;3.4127840234798738628 -0.43255981269597504335 3.0768887892554679375 -0.14828969087312093844 -2.8272395549520674685 1.0789173800615872167 -1.5343012658042138874;0.38415036269607638619 0.26457933074112954808 -0.95446551564052017902 0.29913757430278559157 0.60126065535746442414 0.28617779068934495745 -0.082733105892007274829;0.2375698215546980796 -0.2164469989183071541 -0.9643000852946305157 0.68564189675528197654 -2.1632495517410696984 -0.58207877074429736908 -0.72037410960243608571;-0.46875181031406149001 -0.025255413769342361513 -1.5096338913577012075 -0.96829104032951851533 2.7604222657948995767 1.1983868625888660642 -0.86611998996790273697;-1.0588844445324196997 2.3097953298566773483 -0.86027395253299954181 0.94433481065079571959 -3.0066126913338111493 -0.33721923721721464018 2.4996042808801908208;-0.46021109045733415988 -0.257316432460884148 1.6279881888606158036 -0.68391512202364534989 -1.1254993940554909315 -0.031922493270580713787 -0.63604596427170512207;0.36840097656682518901 0.27834902105525261007 -1.8449201166814692687 0.55198234082253938571 0.4848987133794088189 0.0417234341905612649 -0.11032992205170812083;0.5518923401924213934 0.34653826642705365391 -1.5909709728017271679 -0.44052722800469351627 0.56263446515715398455 -0.26198680333143048449 -0.16316312707866068021;-0.45939678078278567419 -0.73017713149023943942 1.462173454845724363 0.90257609096332092058 1.7002084919522337803 -0.81475154146399064725 -0.46885202168496364905;0.0011165162248530176217 -0.049964976176267245078 0.43298620309983348875 -2.6014633121912011937 0.11436636427849126985 -1.3929607453509968984 0.10933357158804957177];

% Layer 2
b2 = [-1.0273749259944757739;-6.9543070977255112552;6.7617217498487445226;6.5574219822105774824;-2.574162526746361479;-1.8165270175096286387;0.47799566886230193674;3.2322245210800968351;-1.7718988198138081458;-1.6206306871307112338;2.2619908839205553619;-5.359713919861280651;3.2006893046488018584;-1.9654191016764925859;-0.70301431068113628964;-1.0656458542558300273;-4.5784752745746208902;1.6243896388651013485;2.6336765595242903615;1.2825142198141736838];
LW2_1 = [0.32431799223702006962 -0.07492979522969618611 0.21090266557439898976 -0.049028843169742646058 -0.25572793063443333139 -0.097084574794128367103 0.095932360845733560817 0.20816348782867258316 0.66103382374838548508 -0.12832722640040925 0.022893926688024739818 0.61452903405190850705 -0.44181145570278890222 0.20812609827921360606 -0.024389882234599341571 0.26366126268934658716 -0.87583032578442054916 0.22278366513912831182 -0.15739987023222304363 0.4466594629871471489;-4.6337930364653994175 -5.8863713339557195425 2.3997900492595789501 2.7481150079725122914 1.7839599437291362438 1.6270870544819149295 0.50954394646988321327 -1.057505381648676801 -3.4788846576410237255 2.4513037233558310213 1.4980673123705938732 0.83393180350003681678 3.0798638748343614147 -0.68688408750291873872 -0.80064580214711966732 -3.7647656465663081882 -0.071991419546331730794 -2.081978820931390306 1.3248412570932035504 0.79096657309249096546;3.7396625961894143231 -2.179101926917764942 -0.79380047574076029182 -1.3390268207024980107 0.057778576983644781839 -2.6822135136800184796 1.3650571802254005682 -1.1457230423706412648 0.73241866275076827897 2.0787999544754853787 0.076016958651140026371 -0.11425287574724499184 -1.4826785667586732664 -1.3592463523701308059 0.24896634329113975781 -1.6890816642329733455 -1.338787970802322036 -0.66353938708443327421 0.35657241401366557287 5.2043774329504834952;1.2115978443127068953 -0.27308214543620057402 1.7344917468991893905 0.1667099504810155286 -0.34458289355792914854 -0.10374815558667027648 -0.48532985153730490158 -3.0701351788506578977 -2.3652046616387787381 -1.5020871400825948072 1.230573838344711568 3.0513557433863689461 0.8102811037205739364 -1.1377240003233795029 0.34843544168318985044 6.380934490802754766 5.7526325837378475825 0.37037789607342397336 0.32638836073492061285 5.5290434627531359624;-0.89613153772947329312 0.77712410384398744601 -1.4434003413775366997 -0.37956227323104357874 0.11177914163332029751 0.29652126347248708438 0.64974312011622770147 1.7549319821498854388 0.46323842655029384696 1.4133649384415447603 -1.1815372572171414234 -2.7717378295937322719 0.7156263494102143019 1.0088483278338205018 -0.30007868475208526737 -0.42309223518008037823 -1.7853390299512275075 2.0138922341874079258 0.47363189751836648478 -2.9755754830980656322;-4.5158462572692323889 0.29004201837359094851 -0.81475643184929480434 -1.5549988859075618564 0.87876680433500764522 3.7146827360004261998 1.229803038831679185 0.81060780972288382085 -1.070423086836017168 -0.61402313016685639013 -0.40421913483707333503 5.4820276745142750841 0.42703884817321402512 0.28565732333623705674 -0.583683251228483857 4.3064287497626008161 6.7925883927731920409 -4.484502469739194197 -2.0090473874576511015 5.3471198289641765911;-1.6051488525351511605 0.95280061456985742918 -1.2784627034261890621 -0.13766488075901275878 0.2739584023247583211 0.50821382076777443793 -0.37595284153849256592 0.7058443627052560787 -0.88999378578336385548 2.0929107046176205209 -0.55928861690335640589 -0.8250312594013780032 0.89888943726042358495 -1.1396712773206136848 -1.0063191456217353004 -3.9510284595943372388 -1.7293045529162454077 -2.1473589125656400434 -4.1258793608592156943 4.1788642149393959713;-3.2776426215181846402 -4.1172922928112791752 -0.94488336692486307733 0.11601667619171585066 0.89070378913920711383 0.32193317139565452711 0.58273749894513393599 4.4253558911062480519 -4.9657321475120301812 -2.2189206059227934986 5.8549978686626031887 2.6618358594715982868 1.2916221601551676201 -0.58054843817202861356 5.925606095547460761 -0.7746534765501688069 0.44915853419680557002 -3.3341396105920408921 -0.48185150334822146601 -2.1138221494183033755;0.92845361189387376477 1.4865002807447427191 -1.302268703635067304 -1.4994403926205071009 1.0843850881977852296 1.9424214808232618257 -0.072542343593762964593 1.341399489323537475 -0.27353932252249296697 0.88241186447059249964 -0.51583923475625970134 -2.3700047833504900296 -0.61212645938350029873 -1.2092182027441127357 -0.17904651375626878806 -6.3236564413891711567 -4.5479600106328943454 1.8875094034368458118 -0.43477921945511793789 -1.6023796491160380295;-2.538938810181088801 4.5567918311744417537 -2.5780705551422120614 -1.7990022169412094311 1.7717980398588524249 3.2034731426418998623 -2.0039133269850881724 4.0456573285377768201 -0.075369079522282930728 1.2698763354164319672 -1.7393266020086617374 -4.2543208610012905879 -1.0136901120946033572 -2.2562390728445205212 -0.41514346347013658667 -3.1814566642773565164 -1.499380663284544335 3.5418048304272882199 -0.40280946676619311386 -1.9625826227655824852;3.3357980676741370019 -1.0804947579156962689 -1.0607447791733035647 -1.177085083314008962 -0.1482003758319062614 -2.0448854432912151324 1.4224374370066050766 -0.22213366342338530801 1.2268924197823967148 2.1199623298947494199 0.06319404456005257853 -0.27931067396205300213 -2.0753896706633940816 -0.29630243596792388283 0.01626530269056393474 -2.1316837004273647693 -5.4096110791148639407 1.7894178395455977437 -1.1623884187178921135 1.8253984275096089007;-4.3787358729974821259 -1.0822813306917922205 1.36955744719695649 -0.076172489786240180076 0.70217448525285219851 0.88992291317380078919 1.0793188187330629013 0.31297094949388482021 0.12117673759741860728 0.57925091917343241033 -0.06861319916231357896 -2.4337299157938856453 -0.10199647118167040616 0.83255950386510568784 0.044079206799269660122 -3.7329512314776267523 -2.0906840631793675023 2.4569143058042657302 0.78007791970820616889 -0.52808255190557884529;1.2675459534805824102 -2.6214405710015271644 2.5283226392056450393 0.63967277749172501977 -0.55219022985588828156 -3.1868225524390583203 0.94256238162436978278 -1.5913556373891999396 0.64193617866947050299 -1.8245118623681226833 0.58646501029468667276 4.3398380835274092959 -0.44556202673164163608 0.31099216235343724035 -0.11489643033306205788 2.4583572926061281194 -3.3885134498099502842 -0.65103689072713233355 1.3058689734942854344 -0.8461231901434956848;-2.8469177901172160183 -0.10686167361513260188 1.0923453972655237099 0.87970892560512270464 0.18581488433137943739 1.0351869210612649752 0.42105197552987738696 -0.4761904263891883482 -2.5709949309740562917 2.7260736326822549991 0.45000682450209217311 2.0585930241174157374 1.4445822746544534354 -0.17883215694184698141 -0.14826460681209549519 2.5036701293897962728 3.5577565976067355713 -3.0155537575312232335 0.31660076275854481809 -0.14597677758489843725;-0.317060593981283112 1.0167346158131664868 0.80282280382306681066 -0.024667966590295801327 -1.1220667455190076467 -0.1014683878798283978 0.70713787207136236113 0.20290737517223902953 0.31094818997213413692 2.1169486109442350319 0.070504096561083154371 3.6709604597766376521 -0.56086774148651075134 1.4146109736345193753 -0.25372733520668627749 1.7181236918732323282 -0.98304573591519051057 -3.7388100798838030947 -1.2891677805013566083 1.1617269766873903336;-1.6770729271725535181 -1.6492299054742634024 0.60208063606542228108 1.0433089645803301782 0.10315664469508538381 -1.2379670323442926172 -0.74735908154504160361 -0.66717407722177057838 -0.15631198658852477057 1.4217924755242723478 0.59567750585132139829 -6.008056194486156798 -0.74172149704541923132 -0.14134391379775348985 0.59230758219290557953 -5.5038460280962189231 0.024269943168106267173 -0.3972586809963501997 1.3568072233166652563 -1.6287095950657453081;-2.2474408406180002018 0.91669829091101484586 2.8680399456213074849 5.681671600772609132 -3.232828099780472364 9.5138918041958593363 2.1329813056784203695 6.2828313085217386558 -2.3148969456966912439 -1.1092054251796497066 0.62683639703507032515 0.54719040661493723032 -4.0306321025098732491 -1.7332309534148970798 1.2672137988481493309 0.070221678958713312779 -6.1709477674134598502 7.1515054485279030416 7.6565955193291870273 -0.66333862259341536127;0.59300470578094488516 -0.51540099092585089924 0.35832008233136336539 -0.52677781905915621596 -0.043566043859309608322 -4.0222054448776001223 1.4098009050081257154 -0.81525314832977724411 1.1495772760660853962 0.86160472279228950132 -0.21178141117074811284 5.6653384006858420463 -0.01199538109505788458 0.51821657066335036212 -0.0018133049753061569742 1.3733596121654974009 -2.4118544119412925752 -0.76252611466698838605 0.089273521359797394781 -0.71636631932381911181;2.5964539061973215262 -1.9179674038233187616 0.40437803269545141704 -3.0553224765179165523 -0.035371562282636978547 -2.1197932162399317768 1.3586561504299938807 -2.1481052458337459576 -0.84566567423440597295 4.0052117131181743659 0.59090226996577310814 -1.1747560550028171011 0.13115131060696508247 0.29860650714500913683 -0.073512429487640210124 0.54721111599953609073 5.0238387601462015652 -2.5788155432865709216 -0.38953831094167434834 9.4871563120747168796;-0.086463722747621984954 -0.43152672981167905508 1.4068580487718265193 0.036142607722187886088 0.43279036756834221578 -1.8415814041395506262 0.40582783012035011927 -0.78939212544336989641 2.254627711527012135 -1.8677745267677645646 -0.27912148578047940584 9.7157255176133148211 -1.3311317982939709914 0.2492775195889420925 0.17179946721689984268 7.753083882800983595 0.94876834882131544369 -1.9449776588914386988 0.36689752775928957673 0.78975182999937987294];

% Layer 3
b3 = -2.6356145066366050145;
LW3_2 = [-3.3573717119219743665 0.040134597976936504937 -0.2484809030400120522 -0.1183416883008727577 -0.12949540083683447333 0.088717301400161374669 -0.08124017529103688684 0.0066086405883472197284 0.23585913757532875334 -0.07383889865998494173 0.21056039410667831691 -0.10142060049612260098 0.20857641894099840374 -0.25816179053431159707 0.43462873144268610037 0.086592400803402511111 -0.02789580933065810564 0.39596660061128180486 -0.14692658400694319498 0.10589873271238428587];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
