function [Y,Xf,Af] = ESPER_TA_10_Other_3(X,~,~)
%ESPER_TA_10_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_10_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.8569360703099742071;-2.4359187374253354896;0.54018055448852908551;-1.8569575048743016676;-1.8001784670881284534;-0.0010587436840623657905;0.49637695681608035025;-0.32643663674345890779;-0.0014208159208149943181;-0.83393030080741170629;-0.81308733259857768338;-2.5297352935534211937;-0.22356407849746037786;-1.198257749175049458;0.28860483566499683938;-1.3899611585891784582;1.7976013939272972308;1.2005855630738944129;-0.80340643483012785797;1.7749676723784271193;-0.050391902183460145215;-1.1119909644575214358;-2.497762997090304804;0.71066333218900834545;0.42268357100648318303];
IW1_1 = [-0.0051215175848276610349 -0.44407389931541585426 0.86790476646715886133 0.048856462537868308726 1.4671679800276404837 -2.0603216420960550614 -0.73188899849647937046;0.035711719086032871207 0.081325127943580141632 0.033579577759477743926 0.57762810733422864651 -0.4265106822061400238 -0.20375468804645577303 -2.0222422382981255495;0.042608012341231432663 0.32279366798598813082 0.63341293954830524271 0.45641471922775295189 2.1972242944047062352 -1.3798800610821364554 1.3118979131873167443;-0.0021564185527458202586 0.50931904967521213212 -0.96561010062070762316 0.35428426756153508226 -0.99806638086011745248 2.2604482688839548921 0.6832903288961593713;1.2999452846674413031 1.6306320666575218059 -1.0426855982384906074 -0.062192125013356178154 -0.5470620809873729673 -0.013757703706139949931 0.35811493979573211233;0.22172951257946305059 0.15982880200276392002 0.85544794789003419933 -0.059042798426681253332 1.5407888732721499725 -1.0456504757966103014 0.85629437981931211255;1.2566815397469446314 -0.14502097250034032272 -0.1199516685273496891 0.88632225801440889246 1.0284955191582836331 0.46946477216592330528 0.57671960164066349286;-0.26936267728048812753 -0.64918194821871766376 0.21078846265489586953 -0.079639487619268131691 -0.71822894792674873976 0.31516095674998900744 0.28049954809481292273;-0.93131715271262160982 -0.3817439710552986698 -0.18114241696463478926 -0.25444214371569257027 0.038326132023669919058 -0.055346034623740845981 -0.31932527545684435966;0.34163432288481704324 -0.33278220556617071901 1.1498202139393460808 -0.37575786264075639043 0.50350111908525341242 -0.77828707664263230281 -0.0039999975435692693843;-0.46547323614556862514 -1.0953905179279306292 -0.26776302621540976068 -0.2712788910080615179 -0.65989804921210537536 -0.76667851434476319561 -0.67393825387713013342;0.45030596891704266493 -1.2081471247440795924 0.623881128279528685 0.17247407984258980584 0.13355055052732175969 -0.67485396510118889069 -1.0082772028233932815;-1.0163797881651865929 0.69052438334747401338 0.12749613176645760437 -0.58236618802610440326 0.094332537646629591177 0.47892449241153295381 0.06618465262456611764;-1.1936635976636467138 -1.5501612481915394426 0.57548077190882684917 0.098757561955611805615 2.8666471115590135277 0.21723360135495523027 -0.88537677128395209092;-0.34559642661620104676 0.1552409755192655505 0.059849958868417409141 -0.085638799253822533997 -0.52256419519775487714 0.4728370593940528499 0.184872267231796783;-1.6360010871776877739 1.1774966884507067633 -0.60690154891899761314 0.63026812746246907437 -1.2446936770953991314 0.54871730224249515295 -0.1351730336545745037;1.1417828925622963698 -0.93340235568154095169 -0.93071291337895456497 -0.41291691405909591861 0.25615832047076642075 0.19211747913908649998 -0.15911308067745549844;0.065709693764369428437 -0.098639070741091475214 -0.38735112712280045377 0.075429143975956070012 -1.7319480105568421102 0.013213157591687453921 0.61391867131967525761;0.040698168685129314237 0.0073110402133582299417 0.50694529526150855503 0.020658954060995653179 1.3065817341991412537 -0.13409415609648081547 -0.14472711987658820609;0.21249047820919048091 -1.0974177241336904309 1.0015701801280039174 0.93186424529564060304 -0.50672120778010099063 -1.6022774304059173023 -0.87341159862135764325;0.39618697139358427517 -0.28532715040130884887 -1.0629506923773941462 -0.56376400941242943432 2.6107206270333032094 0.40360040857131518344 0.069617444476066575598;0.37951051845987426869 -0.2177684600404248827 1.1049532261609082973 0.16945496441582602598 1.1636672252730124733 -0.58040977499044188459 -0.61899217594535460574;-0.37322244741918486621 0.64713600237616875077 -3.209433830891275985 1.1794232799046329152 1.4123898207651481851 -1.3974200447513260848 -0.43180422340767288247;0.23932272010372215854 -0.33153344214716662375 0.6860937830827721351 -0.47022079061976002068 0.9986640050707160654 0.45828169912917871009 -0.045711416988478532908;-0.083604644447698259202 -0.36911323462136008677 -1.4373951681459580243 0.14387171033310025559 0.54910668899117820452 -0.48782873746789451319 0.62717171939968174854];

% Layer 2
b2 = [6.4485465389243579182;22.558044850869034548;-3.0516086399047592792;14.09206221855203367;-6.4924192887544940334;-55.773651578745614188;-8.3345385657462394136;-7.6507894326459346956;-0.046998340257400135489;14.105669803991141009;-2.0178193383030373909;-3.0508242994656602498;3.2587279297022928581;10.067845417908307226;9.9667351407410684772];
LW2_1 = [2.0788350841473572927 5.0136114543230947405 -0.62729096991944544026 2.9362275233665600105 -0.23316424617946590603 0.98760715569256585233 0.12317550830098468462 0.80100967021736313445 0.44810268106525147358 1.2328892357172862582 -0.96029574151876206933 1.0179078437419626368 -0.98226054222925007764 -0.11764397701468562452 3.4226241618064401351 -0.53428190164592725964 0.93164391432242132929 -3.0314758752431787414 1.328168232707282792 0.11471287293372260663 -0.70476898086254546882 -1.1398599622088170236 -1.2263608370560328265 -1.8986576982753937681 1.2673801045697354883;-4.0459167470143411194 24.254388239088914503 -1.6250060130442167683 -6.84887895096974475 -10.795746287022470966 0.67920697949669783799 7.521195020286583599 0.53606155343956862769 -6.1180779146036865512 1.7215173749082655075 1.0365417497398723423 1.8748879547390773226 4.5080799608450083937 -3.825471781154244244 7.8491311878708698302 -5.6297061065070952424 -9.917061372680146647 3.3669788252852197452 3.5396370755234625172 -0.96193848047867458462 4.2773971643893506922 -0.77144034635352065621 0.30043990474802489965 0.49026185620721113301 2.2969246945593813081;-0.46519055095734562766 1.0462063910573364822 4.0431235467879034218 7.5672679919190013464 -9.3326881708395426074 1.068576193442352551 1.8124006075491563283 8.1680355314576011949 1.0741621459391208493 -4.9342977421930305226 2.0207615849040232447 5.3841362791022300271 -2.643502551993071048 -0.92492729861018196935 0.89104303899555381552 -8.7228570808452552399 -2.3369818704520994856 4.0986166672436930014 -17.015551872757711749 0.71851589734595611159 -1.8800039158481287593 0.10386319667571429493 4.1831779710409557893 0.31813107393304129733 -6.8578580176682777392;-77.065320935178249329 -53.684994745729554211 4.1719465921085729931 -58.088979825795682643 -16.278011511314176119 -34.368456013372401969 21.924563622438739685 -7.4791735836474435573 20.68697341684732649 197.23400336261966004 4.6338569190371829976 -57.223397505379111294 6.413942479644411776 -6.2195972175119154102 54.534014254537069633 -14.570654199694326181 3.5730749981089995337 0.33469831907224606438 -10.090805852659540776 -38.495403931468679559 -43.205176125287721334 -37.39096498388618528 2.5383837605727834763 -30.396403785935401487 77.028381522787228164;-18.082303447882488001 -17.798117400392971632 11.792460321021334124 0.80033702829015296309 2.9959560052408327202 -9.3178133752533991441 -6.1718693760887095578 4.8014360360793926219 2.2350975314818386508 1.6635336614005327149 1.3195356218629274991 7.0044110752083001969 9.7335335001564740054 1.0622690883223986358 -19.104990017336387353 0.19720017977921819319 1.7767108060375274015 -18.817869833629831788 -16.559972046642101873 1.524823983609619571 -7.1316329180302684421 -16.064601394146301061 0.13230646146519223216 5.8471034163529411742 -3.2302572970279683773;5.1645614699731900998 -31.410651489170710704 6.0825193266972643613 -12.329179550466140114 -0.74632588346540629232 4.830639783086677852 0.83825290184866441123 2.2844931499247631557 -1.9318093846561155136 -4.3054147229478418879 27.196115727669742057 6.3397894430939398802 -13.052755716655534357 -3.5778655256197309242 -13.320494404752128759 9.2767114893075746096 3.1861280690115405534 -14.081822346626754694 -30.966287543194724208 -2.3391657158863612409 3.9993311630220391706 -13.048615123673366512 -13.840772653258076375 4.0222965830537331655 -6.9793946517565093046;2.8380073249413175773 -2.2020187851783346034 -3.0846597166197451401 3.6017055182046586737 -0.42567857072464959645 5.1490462649810444518 1.0549957398709486345 -2.0011412633308434117 1.6969284642464976809 -0.72331238766993544154 -0.35140950192698539034 -3.6810151279010328018 -0.11121977726476858783 0.65621387622432136855 -0.060718937918629624362 -0.33500506502306015566 1.854982636454409084 0.20199772209830843539 -7.2822808260623608234 -0.50633413107775548934 -1.9813616150234507618 4.0356035919483366214 1.5912530586353541562 4.1056871403118009312 -0.02503643642829832261;7.086935674963251941 -4.7314024556520903886 -2.8802175408649768329 5.8149880013451875627 1.5310310736069316917 2.0570379215788521243 2.409024553836859539 -0.20537002140963420138 7.7503911022413181087 6.5075191439009518746 -1.0546302558718798625 -9.4170605420366531035 3.757001693627537442 -0.056327767703596945403 -0.26677681792932489424 0.49911056006594661794 5.9309857848111739997 6.4013245058357215456 2.7540250848990921462 -1.0024402045464388955 -3.6697099624131994666 5.7774847451023010336 0.32177708711986763301 -5.3679195935793995176 -1.4184094301422731643;-5.6866221377826997596 -5.9494635992201931884 -2.8621388339555529079 -5.7255201954681984589 1.0519221727539149747 5.6670442189621059725 1.3729332094245627616 1.1582537825313619084 2.164812271433144808 -3.8987735667016187868 0.45986246101006145182 1.4106485954652638881 1.4923292901692415402 0.10721981226971118162 -4.8526100810854213563 5.0611226525114059172 4.865969221733603689 -2.1782914235014536608 -0.57676838918317374638 0.0093753668796161225563 0.76726828004109315362 1.0319905319322928428 1.4520118555384591286 -1.5525721327159403007 -2.4363977732331103532;0.42474378761117775882 12.983090582095842436 -2.1690072589800237779 -3.3502835565072062174 -10.892073123930563483 7.4088448932928505641 1.3828994038129451827 4.473464454281305791 -0.53140171942947289629 -3.5168190220352868458 -0.053534253997686895299 -3.3549896339413898261 -0.33574322417571234034 1.8984281406249641222 0.70127568385157645903 1.1272798627724978093 4.3316350109249048828 -12.799688556074398704 -23.168474285523537048 -6.6286673469520804858 1.8644835046006889012 4.5683539420851442259 0.71982459538683929434 -22.209880779978885101 2.7353297786726504803;-0.15080348077600697065 -0.31291668259872079672 0.18748650133925942596 -0.1529638630440280922 -0.31001747100712406802 -0.3695119176418489304 -0.53872920522481282379 -1.0973523862662402095 -0.26410914122531387038 0.14125961738095918485 -0.3961386374272689026 -0.42936838537346483369 -0.86279413801702520281 0.13662840676402776552 2.9344849044565659568 -0.99989744969218696813 -0.36833064006843652116 -0.54142087157562579502 -1.4616196566403725221 0.18737919595705532227 -0.11929804364151547214 1.0757355605721912184 -0.18580443448784544902 -0.6919304217837781712 0.57143548222944351433;0.13234434242617909572 -0.37606906292271274905 0.13695808454402425003 0.11346903325508556071 -0.36192613226245773372 -0.30806570480056949535 -0.59060224436148811566 -1.4449516976076879349 -0.14936487292091132906 0.05994839868330500976 -0.46840904369947428121 -0.89467523683949778945 -0.97628955334350675521 0.16728686953107535507 3.3487165674006558191 -1.1863592580556883149 -0.4400430821040258178 -0.031797330183896695133 -1.16450694449570058 0.18332983327817992114 -0.090250339165815346432 1.3407022632697587206 -0.15233898659092939831 -0.4530712416333664283 0.68331849686255508036;-2.7126386496106316137 2.9810289633563775702 3.3860560237861885291 0.42390625376566687388 -0.22081086833555613191 -3.883018890555863134 -2.317582220187800246 -3.2936789446686507432 0.13031508423340629199 -11.708761181157031572 0.63055132790305257195 3.1313534278446071291 0.088585082713572418922 0.14545925687526542469 -0.95391762302704075083 0.79832197963018258768 7.4621126245711817404 10.519059739276295673 15.981251483490780174 1.0988074102795803988 -7.9290600798824915074 6.7077132326569568477 -1.5727983999571273355 2.7201900059249286556 2.7702672050041514673;3.1443850603127492249 5.5257432948184250776 4.7385402754647403256 1.874680806686672252 8.9645837480373753436 -10.411197098552340989 1.9476084773586623822 8.8032282062105444709 6.8023787979003094151 3.2764927738708298222 6.7498637044457643341 -7.0969923876269795926 -0.69798306132348897357 -7.2679196026883978732 -4.5467529246602023107 5.0545169539958125782 -1.0884033676003350699 -4.2606307364747486588 11.979692490592313447 -0.17813245681479217275 -4.0759314102968939864 -6.066977313017932083 -4.19798813816266847 2.3880842552201659856 2.9043637640475279404;63.712184301608488113 -7.0386686593906953036 -4.1829291015873195647 -5.8988349431890334529 25.820874478073505998 1.4796255571991347999 -60.841032358958663906 -15.149155167741186645 -12.085940191213703443 21.029838484884226801 -10.891248148195881384 14.423065591327494772 -21.018440229513362993 -19.701218624902718801 6.8037849916496613289 7.1046117246064017792 -17.290783428158338353 19.399558811312846984 -4.3346891441729828998 25.377812076754274528 -36.229986976169634261 11.09549990334289582 15.858622255384057453 7.3910756703241435872 -3.5333204640452815504];

% Layer 3
b3 = 0.18702248966431220256;
LW3_2 = [0.15873383122705153614 -0.015106888310850965368 0.0075783651025080507602 -0.0024345048627577229976 -0.007259454228104223264 -0.0037900161963029446038 -0.12459403157189610778 -0.023618258300121652837 0.048948958936404295128 0.013094506259731908404 -4.5512107522440210516 3.8478402045694299893 0.020635126771801830942 -0.015829217472152431329 0.0024440761074528789473];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
