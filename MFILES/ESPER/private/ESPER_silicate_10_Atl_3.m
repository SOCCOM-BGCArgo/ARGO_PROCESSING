function [Y,Xf,Af] = ESPER_silicate_10_Atl_3(X,~,~)
%ESPER_SILICATE_10_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_10_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.0059300144874245841;5.7211365527329682834;-4.3690492066471593446;1.484855641133426829;-2.0204589305081248618;-1.7627064925974338383;-1.9481733669746941207;1.6793636361208899022;-0.537744857240359031;-0.85820590492269088756;-0.96761127542539360213;-0.17833619402652614583;2.741090271419530211;0.057420216948303730298;0.38002698272277229963;-0.95706688453061883326;-3.8740749576067150528;-1.5578824785385096963;-4.5842567833924547926;2.1118549584241890216;-0.60775841866003221803;-3.2666602143454896989;2.6435314052137415253;-0.044089195421554906729;-0.73954069951226431012];
IW1_1 = [0.47236425535640175211 -0.0480887597507573053 0.41306394757777697979 -0.54817189121465337287 -2.4699814584116466243 -0.82504198372865344968 0.40468712861257760682;0.35208645475666078273 0.12103388110964460878 -4.3384464478747561955 0.52108315548358319358 -2.213476613358051015 -0.24451466119315742875 -0.74854667604235591849;0.24039756209350254812 0.44721075671615290181 1.9024738428778757982 0.45359481337053686456 3.4432649786457569796 -1.3931036956502858004 1.3577438051599886037;1.1535741631962685982 -1.4633287496763229818 0.28844936876402799131 1.0062851784888933171 -5.7887978181603365613 0.88572171448450442988 -0.54708847448569297711;0.58776873909264559792 0.41052938235119940114 1.3172410831211307514 0.64161946852326412483 1.5965437303992797702 -0.61467921929643432044 -0.65259022070860739362;-0.22777238558776691235 -0.26677726996030642903 -0.4787340426705570251 -1.296909514543165054 0.014564227120491150813 -0.18304043542241554832 0.48807286868666244217;0.91927961710803618445 0.87024605224663986736 0.032332276182348157478 -0.47144039592930353511 2.2877472366960751593 -0.54153864999062628627 0.49374124300626553996;-0.53307829618796465088 0.10634021174263465215 -0.90456146478376331377 0.62272735515187271904 -1.3315322215872400502 0.58564701785942607781 -0.065020415438119302798;0.099682535997337728961 1.1220499038787430379 0.11293998569286248235 0.78973560392171449074 -1.3232018174676045685 2.218432765241189486 -0.32348184894026993375;-0.6196107016384603261 1.3543616016287429726 -2.822452243759603796 -0.087699325491773907904 3.3081321560841927543 2.0709781670873885773 0.46081244410020810731;1.105577186684640445 0.55276155163491902389 0.23157642264897757012 -0.075585594268086170322 2.4940609194699150386 -0.34017393725996364351 -0.77052707536039188874;-1.0351285945281385459 -0.58828111347144429466 2.6221485201115157793 0.31073003087801587263 -4.621512452611458599 0.39574646565659188369 0.60276545023096828047;0.43917214914732882747 -0.24105504366966168384 -5.2210669835948380069 -0.63312645398665035046 1.0196023237014550933 -1.2498450617355860714 -0.92069707922403987155;1.3106305704454026539 0.24264601978436556307 -2.7409397151420220595 -1.7774104970259461123 -0.3236188198914280445 0.78002396886795599684 1.369208893647303249;-0.07741912361781569385 -0.14599665113527648952 0.17173084765426746556 1.4585554812477183884 -1.9006104014320999163 -1.1217225341482164325 -0.8251994966587564706;-0.90661586148388029205 2.762992404128423285 -3.4109174428651374278 -1.5414534999246183311 0.018632108019280130967 2.048504014899003689 -2.3991796612024880453;0.43765902147872381978 1.2022668580163444751 2.1156545314296848481 2.0811985281491667266 3.9978624219138092499 0.099408851272318632386 -0.76458523219081742095;-1.0646155439396536302 -1.0891089015492616543 2.3948351313448368316 -0.50669967784964919932 -0.53814663751175906281 2.4024017856649599878 0.69474298845603998931;-0.59553984754416122716 -0.020381668706828785093 0.1428005338973016014 1.1873759533945251743 6.1116591889654223735 0.79982567518441294308 -0.33531976529214396754;-0.93467359982113173977 0.33545618588690001571 -0.681337925724069704 1.2306488649644853339 -1.3875316895677611839 1.1301352769632078132 -0.62872434025251089373;1.2247548064249991207 0.53797614301431151418 1.6307433682141638798 0.4398104771503585364 -2.7156354685150558836 4.297652554509005185 0.5070184991733734936;-0.52107498325069734335 -0.24335885696349066065 -1.0078566723091699764 -0.73138163750886131531 4.3737758497622589715 -0.037486384851390615325 0.78161752245782212256;0.33358791049983588239 0.17482665041171241427 -3.4363174410805146231 -0.077118856370904306785 -0.052176986534292188469 -1.2362555518853022285 -1.0837044841364467107;0.91646240885745933191 -0.74763976191316583453 0.7665373603944264369 2.7825121070911542631 2.7911764076295604298 -2.0770929711215000424 -0.82468044838921961137;-1.1051444096970000075 -0.45335220804428277841 -0.78045698673083574448 -0.8508060733182805091 1.4399161630994801175 -0.45874349820090681851 1.199597124872757048];

% Layer 2
b2 = [-0.3519354515835277919;0.66624571167326829269;-1.0793591917943048397;-3.1113532318062508963;-2.7331227183851494189;-1.9649175656970327974;0.57262306753180258756;-2.0783256684693767191;1.5528662788922171778;2.1120855097630339969;-1.8798226484359268351;-0.8222235052584550008;-1.1469683283454168432;-0.38301778560504318172;-1.1744161462734901136];
LW2_1 = [1.5800159881339854717 2.822528568105121316 -0.96799229752890247891 0.10622377126432641647 0.13876170717407187993 -3.1900461830633823901 0.77605383626298030109 1.617808422286628689 4.0943581434579492395 0.85494383225968328954 0.85426203595586203132 -2.8280535667402171285 3.6805092586111900488 1.9927690192751885689 -0.48932937908098117497 -2.2331362585151310896 0.40560644572018694776 0.58985068376944949087 1.8184037752900557017 0.13166831583739344036 -3.7531168377909027711 3.7132462123061560355 -0.59951034320280804923 1.0139172250157608701 -0.45741545861267363104;-3.6489812523321845106 0.2418326384939953333 1.2069432095308645359 2.325325510001944096 -2.2296772104994246888 -0.073830854371052662133 1.6643041815805355021 -5.1514528714299618883 4.5236122275498029666 1.6182410883582534211 -4.1950220690340227492 5.3982337266580433521 -1.9039172485998996365 -0.19542229874724642569 -4.2035998338002729113 1.3267927456782870888 -4.6670534857502818937 -3.3565180452562306535 3.8584501779296269675 -0.4253585450827253589 -2.3268966153185974832 -3.2065263201649214508 3.8553471834517298866 2.5077405218579356116 2.0326570395117151691;4.4784175875688445601 -0.68525622168889643859 -4.7384798887418551061 -0.86984582663322140839 3.6502012938589301072 1.956791258583515658 -0.99468340730030646579 -2.2085412963379513762 -2.6751198238635391924 0.85246154851488331605 6.3589700180246548911 0.15895127172461204212 -2.7088091327655541285 -2.4623733282457203053 2.8932289640275690168 4.4226744553349668365 3.6204623375998159496 -0.89400102478241549875 -1.7550240893788351393 -1.19515983115133273 -0.098141141347664037631 1.7570298151514818219 -2.0011449389535074239 -1.4715252998577952326 1.3847688571819316561;-2.3565290027611496271 -0.27968039791337129252 0.68818693021299204293 2.1308508481288099823 -0.06406895001098791842 -2.9546733623249110678 3.5176798962696724793 -1.223354777324384024 -0.82473048700217532758 1.7989031196219547049 -0.23076076463016151341 0.82968174325773080824 0.19202723214342026781 -2.885162189984907144 3.7050368304667005148 -2.6012326411533406301 -2.7344010445465145587 -2.0956269110365774999 -1.2257892217787900169 -1.9596079157599421983 -3.0768885829314611691 1.4989308519462551939 -1.8704989963871909708 -0.35334436974456051583 -0.42108771036921244235;-2.7023936000857466944 -4.2323690811839123072 -0.47514533400329228563 -0.12440549379326554247 -2.5316636698159253882 1.8513659444941825694 1.1693669807541993144 -1.7626314725434317765 -0.26306043113581001336 -0.3730349295853366276 1.3602136709241330337 2.4123527622739655563 2.7229335597775361499 -1.1184478250698346447 0.42853773706198089455 -0.069509825315772377774 -1.0758337974622875777 -1.8327857337908681767 0.038750828517799505712 1.3580215157643917845 -2.1617518580260006722 -0.94100082095536530247 0.96457618107279596842 1.3140838282959248495 -1.0327571356676914505;1.3073174364661472868 -4.2587357564626016071 0.4579518071362544962 3.5987060292217751822 -5.4612530025284984347 2.6423687587005071364 0.065087199678319884733 -2.8360479589671419021 -3.5279191859163203659 -2.236574178134198565 1.4317823596998169311 -1.2533477741822549589 -0.74350676308109875379 -1.4084257555971178011 5.3489943164001338971 -3.1653770212008955909 -2.6867225516223722792 -4.1694728630536372904 -1.2122499074096815264 -1.4062393019864749544 0.11923237022370344884 -0.77645401357050503055 -0.90463504362350377619 -2.2491154846367749087 1.3736906738408511952;2.0947020573990786652 -1.0609570236533827359 2.5360421214185699945 -4.902381619187100803 -0.47694523611735417656 -0.091971828395557897462 -4.5145261172214956602 0.59239828795722937471 -0.16203578099579507565 0.6038344378332262119 5.5074940203087621171 -1.124158660323082648 -2.8699134912299180122 -0.82282071186530136853 1.0451998269230067251 0.35972885542407406767 2.3145694094924658124 4.9396723316294419703 1.0425513234961671927 0.79400807860638744629 -4.2458016458871359333 0.55478308020869471218 2.7542358731435525598 -3.3509015256793461823 -1.1313180401680580367;1.0306297064859180068 -5.3361473991941386075 -0.061639285485298171696 -0.014031676259907852056 -0.75402315059107605233 1.2747430749477299816 -0.7543113894854504009 -0.54591944757588806159 -2.2996969904163986342 -1.1224977337507924258 2.1263798221916263564 -2.4203488327718805095 -0.3159858034237899016 -1.0502295313398115617 1.2980515300589046124 0.09532978127303663729 -0.48028958060494431059 -0.90352574263009377553 1.936768697180092591 0.084138020235533350633 -0.85993271625435996341 -1.3922147034307139624 1.1145724165791790483 0.83770061499995440712 1.83539039448640251;1.0468887950835528144 1.5134630591802984423 1.9064015630173802851 -2.2733713468958631765 0.66953735444473838623 -1.0848216123011551471 0.37350436537847009344 -0.094228978035254096213 -3.1566168076369902629 3.1570656892705311058 3.6683657723017013552 0.49263869486964562139 -1.3937934359249388727 -0.50733410156529268331 2.4268454873087770274 1.8806967855052734162 0.49694016464353396589 -0.27560273235968069105 2.8508181005902515359 0.31808840643681468574 -2.5297576926739178127 0.38898989880462658819 1.0164481760669403787 -4.9673448203258043776 1.220596418103857328;1.3130553219864302683 1.5044696942203659162 -0.86163177853748551538 -2.8562417633945713646 1.396996814106671092 -4.3571976787729527203 -2.8951931067605922721 -0.40611670326553717114 1.5257255058840755169 1.0212441196270696242 4.4193119387697175071 2.5888764124414587187 1.6043520504478434585 -1.0247520442330761981 0.73423133772947135611 0.37642946219214157288 1.2272212190390205944 -1.2677359532821468324 -1.499680167013226928 -0.52182173346867677388 5.0717967106948105283 -1.9998806236943498238 -0.35084663246692648908 -1.5455207473941185992 -2.8270238265759779495;-5.8215948174004523707 1.0838150010226796915 1.1106411576635868421 2.6125929322604797278 2.8994021815151600485 -0.27373371287001702079 1.9648616697586227531 4.1411032996559162811 1.6387957104149415422 -0.51719418306787745543 -1.1877986040755321717 -1.7503158097464481813 2.730219372729660865 0.33204557964661679526 -0.49978253467971067714 -0.2102467954777054171 -0.9289770363182401347 -0.37189982624558720614 -2.5717284470991566003 -2.8898891848450203312 -1.0998693208416219225 -3.4402668259438260456 -4.8286723385617609239 0.36216990632654155746 2.8826856407990737452;-2.2894564066436138283 2.1727749135020713034 2.744626370676295668 -1.5846393669998173337 -0.78556205372423382194 0.054682901861222807383 0.79035485269307204081 2.1736284952352193933 -4.1956895177207336189 1.0609834330010068371 2.8751323319761921127 1.7544853009645129394 0.48497969244740990469 -1.728146161810156789 0.88004769862573317685 1.6027969739854464049 2.8157816500343795241 4.4170797575324334261 2.3946631862528682255 -3.9874085187949721565 -8.4831768084292793475 1.1711835263684382547 0.21488924762702316107 -2.5691533586832981939 2.0444076601645333469;-0.46494812258694245832 0.032394610470264192936 1.8125420780246102037 -1.6967030585464029091 -2.1135120611653803735 -2.7412788458640431344 -1.8246475019780286075 -5.1569078857582093534 -0.94276274452166475282 0.14100680253657482677 -3.5653843198827654959 0.69339977957682674692 0.78134296830831784231 1.4283397285737988724 2.1427512108234409993 -1.0387832929703786355 -2.955900176214521835 0.82415896061049032095 -1.4496207101831266595 0.92393536790820773863 1.0823925902051847459 0.3392099704133322291 -0.75661848976116907739 0.96090210641944795444 1.5108279656664083124;-0.67316136518416813672 -3.097945556982905746 -0.3196228822089465238 -0.85337592671934237032 1.0496864845784981135 3.3784148477370425923 -2.6148526668557035002 0.73914956674097453959 -1.4553762761505792955 -3.5585657438752775761 -1.0306004084987228087 2.0672388200286198057 0.4277844407163421403 0.01597397601290711372 -0.0065395323999442728224 2.4046145938143377307 -1.3393810104165944086 -4.0657675290572425908 -1.0670501136169969758 0.25199994987300972094 -1.2733007488416749897 -0.88278248269021930561 1.5790585758264554794 0.0044831410102287565927 -0.57957290245513970461;-0.76185747592104002823 1.6239180710198006796 1.9483329605232193593 -0.27523390669965991373 0.20174364188485349736 4.6222870107377405091 -0.013424045729445969674 -0.17740136100286571508 -8.101334378946399184 -0.29396070071051777495 2.5692528620432373287 1.4929916360844022183 -1.8435865144501135671 -0.12256090746758299681 1.2802367284545297377 -0.078600078751596774707 0.28057798351129925596 0.6494521769968162328 1.5528594994929589834 0.80032034533322105041 0.37027718527160780049 0.42673252759312840787 2.0186304442299483064 0.81409044042707723321 -0.067031937029429944364];

% Layer 3
b3 = 0.072964432967493331184;
LW3_2 = [-0.0082922987180972726473 0.048094894123119250051 -0.0050085984004159672667 -0.017606799576602723267 -0.080402908991384330895 0.013933429961023233862 0.010881059101305996795 0.030026661941143745899 -0.014898240148954675077 0.015133507826396330742 0.7724540755782385304 0.017389420341154274152 0.0097427100753969750335 -0.031912989344833671279 -0.1968432587396201916];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
