function [Y,Xf,Af] = ESPER_DIC_2_Atl_3(X,~,~)
%ESPER_DIC_2_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_2_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.3846495859107790238;-6.5736311661286013219;0.34865605223408580038;8.6136658795050085047;-2.9070607620436681451;-2.4175389098286164113;-1.284428537329243003;2.6433934624539787706;1.9709390031568059243;8.1186126880835622899;-4.5442503073867390739;4.0392684226244268686;9.2986586705758504934;-6.3723460674911445167;2.3711234052047482912;-8.7369028881825183674;-0.97485668907292089003;0.92902213303501157693;-1.9012306474789455457;0.25009308193656515362;-0.20459089913419037376;0.17152855770663119617;0.8417771200797036224;-1.327474484413235345;-1.6977641719660157005];
IW1_1 = [-1.0078375881475738485 2.1703055185763973078 -0.27366043046057603183 -0.52324149829038979487 6.263685027873177269 -2.0945873121524383187 1.2652472421621341336 -0.24012534124302650773;0.54474997343395559213 1.0122239938288435379 -0.16647880148621554963 0.029598928865450513381 6.2980642433543829739 -2.1435544765133385248 0.38593491915217248422 -1.3730441498989189864;0.74978740020014833512 1.2607517776767389606 -0.1757073001010935609 0.06147166528725442336 -7.4353015389129923918 0.79597212953595319895 0.317077897154700028 -6.1090168458599061196;-0.69111129887518185644 0.47874047556553589455 0.22079884444902972418 0.010620951324445324776 -7.9940322881283965017 0.93981818785378101744 -0.6401712594072789253 0.65245992258267049291;-0.24522946074105905767 0.10505271726765615103 -0.39745266775496501666 -0.13878699902669411337 3.20424773995831913 -0.9599916402423531725 -0.63194400938886385877 0.01536602174617277515;0.17660494864119535841 -2.4594974536629417017 0.61562403194724701905 -0.11520982661042293571 -0.5636406766553115899 1.0217369665570403825 0.4200478679780677016 0.41284692488454932668;1.8372879725107711391 -0.058349925830452453734 -0.85756554096053261294 -1.6463286403563937021 0.48908938494620307624 0.5286575618324251824 -0.37685235041564052461 3.3494608907225420502;-1.1146783796522945487 -0.96006690338948297292 -1.2354843590593569402 1.6695534487082235309 -1.5761876275951589577 3.1280914948707034817 1.0022407866409757116 -2.6021809257826564732;-2.1645515065207390215 2.5833350305888922449 0.63566496070149125508 0.17001517157877632513 0.96984228049384180181 1.1942748864794630048 1.7989970485291435498 -0.64579676999925983427;-1.4767232617856682619 1.1202812109892770209 -0.064188418314543652099 -1.4061460008207389283 -6.1666612869646089123 3.3906053327324237046 -0.35374963697770644977 4.194017202328772953;-0.60833501776647902481 0.16378073164333553646 -0.73455193029416543382 0.15083509181621565509 4.1560924192851942394 -1.8960496252850405074 -0.82444947270590995814 -0.69102295069676356043;-1.4194763011062756508 -0.61735490196811915187 -0.80952402972752957044 0.87308517576066035915 -2.4898368487989714914 2.3343900813495381819 1.5785099498093313475 -0.43701844845888937474;0.03496472936627237349 1.3652561444464388352 0.42801584407893922268 -0.9285862309144775617 -9.7390437436285619555 2.2683911928569147065 0.927306299100102982 0.56845114961797105213;-0.27372763805236999257 -1.551644761501048686 -1.4586785302764471162 -0.10820987751247690412 5.9567076737033364253 -2.5712454668019777415 -0.52320653827521412804 -1.2133445631474857329;-0.62136132343425864999 -0.89721965122125113545 0.52193668607450383057 1.0649927167700010688 -2.9172615778670305531 0.29734823443568886292 0.47589509948191183186 -1.7806403988376657832;-11.066989571859979335 2.3733636002171447643 -6.6456829259825669354 1.8300151281320609087 8.5702452525110555115 1.7323518296031330532 6.6191523120587349993 -5.2610362525583331816;-0.073666391770465924904 -0.10700730329095282933 0.040310788134718250619 -0.7652769130226083627 -0.27303225232803984834 -0.13848021181373659783 -0.57893832721062099544 0.34753008023200732124;-0.59751599517368170211 -1.8094985340615044045 -0.9428919563881257293 -0.34790906913213165419 -0.82115256466039132643 0.51679174828754481652 0.18879765419469343724 -0.082536751920247009018;2.6408698022867049815 1.3578004708365152275 -0.95106332219297617936 0.086466687672410044718 2.4448593338044628531 -1.8444659190593657438 -1.343536750204535668 -1.4875067341829546486;1.109527200739960362 0.91251540800920727392 -0.32326761681600413301 -0.46066983520903265203 0.31166557864482891116 -0.373300441752457135 0.089344163668094930819 -0.86644230230839125451;0.26741307375593814655 -0.46688617000652327116 0.42407200320069959876 0.61393198514020785872 -1.4968760983094440142 -0.01738271640407713578 0.81736454468564934128 -2.013250927422460812;-0.50730878547154123481 -0.52546274511658763728 -0.59463235196864105969 -0.038991236712982942081 0.56106784312491109201 -1.1601306429435576106 -0.4940035495321026815 0.83000915523891727332;-0.26728309083793022616 -0.33799997165601686211 0.47642555481449311294 -0.40660504870289099211 -3.0220794268261399473 0.73675708130955486208 -0.28073771209286269013 -0.15511099620750889994;-0.035408749705757018578 0.0065661505620605376335 -0.036480955999082513574 -0.66867075040022228016 -0.20797303429637906125 -0.12683019431413272704 -0.44962594499233410339 0.23405014279731559124;2.9241956490171903127 0.58836842778190112657 -2.6845521181774469888 0.70692726304928521497 10.687984575711199753 2.9053173449474982704 -10.880600462560465758 1.0245996657445630706];

% Layer 2
b2 = [37.716105174916449982;0.80690147169884940404;-10.484812836345120957;-176.5873781928322046;-28.66183294259120018;-348.67504010652265833;-67.974204824215306076;157.55378349227376589;192.47176368539567193;-576.76501484065454406;-306.45812381825481907;46.010515969130196368;36.273206655244734975;-40.768281024825832048;1387.9214756992446382];
LW2_1 = [-48.141859477239222542 -38.587192398913465752 9.3281845535582075257 -83.500124801408034614 -66.217209556835470607 -175.24781013627051607 -10.225016902270471775 -4.1836776998548197426 89.97937288499244346 -18.834906115004041993 9.7991990684804850531 24.322493140967154091 57.822364549178288939 9.0330018443869981581 30.078628600198776155 18.090935009774863573 -25.388069086990039835 -6.0049022055304757117 -87.778098254871252948 -81.686683656375294049 28.878170600570705062 98.47301950016431249 -120.62969437244915127 125.62594280478104736 -45.446899883638387507;0.073506324982205759055 0.097805293620772629226 -0.059813142777406451411 1.4041053123062623431 0.98559619240558782316 0.036628315029412404635 0.12840665064066647538 -0.071871885589979894737 -0.16636477130389085155 -0.087879426087938805612 -0.41800835780545064768 0.054542639310157146892 -0.063237838175434005206 -0.11125967731293004426 0.35747030347689096041 0.0062026807291508867168 -3.9070121024182515868 0.18055896629057091585 -0.098136556546474032481 0.099191786472183213208 0.18935620039052747376 -0.14974737037901705849 0.69335717334703550474 7.1036134855825423529 -0.0045060217994766383481;16.298996015304339835 -31.517871060230913116 2.1600247004895551939 60.282846632866828429 -19.94769174318591709 134.73396047315563351 38.606312698168942177 -18.051846884318635489 66.978032608262196845 33.244094723061998309 -25.220555629425810196 23.003797352419240951 -5.283159356943928131 -4.1435602864696221559 -18.613716407586039736 -15.975950084912488691 -179.05412044286018158 -45.726108944385082111 -60.216475893696888022 168.05021287230761118 16.492846587797096447 75.838549683983785599 8.8619782149773005386 110.08860975691867168 -69.11663715488234061;-63.406861675878182893 142.89456219594543995 12.228433254765217697 -70.838566728856790178 -30.176896895788686948 17.007667666161470521 -35.671653899076787297 27.74717650008370029 -9.0452710568305434435 21.708379808344570705 -23.811075684442094769 -24.299595225385889563 -1.16841480027715372 -13.537102794670516914 -88.135170291626792505 27.903665515957481347 93.386617237110712608 60.138200353622899286 -42.539920744198482794 17.510982022585867668 50.528617698866987951 -50.749611567057861805 -84.979511388020895879 -392.06477913433332105 78.46801145069166239;-465.87553056320018641 652.74189384875296582 713.21243760731533712 190.30960146324076732 1356.9107034073922478 -519.5090519338239119 1141.1434681663647552 481.40407693256628363 544.85907738913977028 1911.9780806954613581 -172.12737106284933475 -99.197823027126545981 -226.93644016756897486 -178.68517812944335788 2356.4515082622256159 -1521.4901157188958223 1287.1789229962009813 -166.39175320976841022 -339.15493568419981329 106.89692204037636714 -382.81335603010961677 864.40732101957382838 -172.27577817134729798 -1124.4367046648774249 -193.07927061342198272;-7.1202584829936075295 21.883424365887158558 57.064149255112234016 -129.29626930677571295 18.318811879410763055 -560.71917497145170728 14.527312768362822482 -27.812805219090737552 -19.996315974283874084 3.4259252200421048684 -17.085209744201172555 -17.926598735280371955 7.1469905222090126529 -25.368902828993267207 16.809539598238711022 404.35847260139240689 -9.4267206178640119418 30.863371142155422433 36.009085857289207411 -121.10344278399097107 -111.08932440255252061 12.088641457768737553 32.265224548037011232 -454.7545344354805934 5.7095920313032877402;8.6606289726666911832 -5.3409068039741871559 -26.284942724387963864 135.76106741697901725 70.895459426280979187 -3.1787803352738408513 31.553339798192105548 -17.000318802615325353 -40.843673665855149579 39.861820061096196355 -37.26827695403523677 30.713897351323538487 -49.121703424009645289 30.019822963561374252 -8.6679767182195295305 -42.627692142075744641 2.5767397991665541568 -159.55946025748346528 1.3188042147817906624 -26.822222749255480778 -83.380460125643566016 -69.768030887043920529 -64.805994741822743777 45.987303788755191647 4.1628850770734384668;-20.109741156371768511 7.7980073867044072955 35.592009153189984261 21.292821473761780027 17.145664033987969788 94.026010492836689991 -1.1984059638628903333 7.1750468968566050165 -37.50870016229601589 -2.7073602257472546562 -10.056968118244432375 -7.8799361284590769827 -0.05395006309955432261 19.017902258907362523 -4.6438442429434791947 -0.68343898723364338021 0.93734886552182428154 -3.9612654471078716512 -13.622775009138548441 6.4370298408117863076 9.5223469678329362154 43.758652109349640114 189.92903565777180575 -86.282530808526871624 -15.015370554792690783;89.003123131380974087 -57.187675624312170441 23.652275977228391923 88.061945673138311008 -52.474739408220841597 -193.12014458013268836 -61.304756548182020026 6.6441473374354123038 8.1847000540211833908 165.70586543413133995 -59.969472838960328431 -27.942437493711075547 -150.68418336287882653 125.91029833409847072 -46.988832550099843388 6.1358591985134909308 52.432046568467740144 -47.579874013756146667 155.87658927332054759 -130.07345556367886275 200.74254442738751436 -213.95515040120207573 124.10389550091747424 114.6042494652764816 -123.90969265671952826;472.38527395130529385 36.961331758351477106 -117.62642620007231642 -9.9158549742928876469 -168.32443169404839978 297.19178141421713235 63.876491103765502544 231.49752934885097488 105.05785130929405113 -44.149726241651336522 -49.245949813034748388 2.8938496649782594616 -48.67785722249866609 -54.165013029145512746 -86.139897382070969911 -227.88873988737546483 155.81872827549443628 -80.087331478995224643 -7.3627138901516913094 32.734944253043522622 -257.73038217652231197 50.543643435679683762 784.00306714253065365 -1689.0323142861884662 173.62720225709949773;32.515658860149450504 -144.7859876364264835 -86.986229980405582296 127.00332381535336879 -48.035828515613438583 -564.93596406357517026 -256.64411074211790265 -43.641057499984960089 53.284866108316222721 76.466968679671808218 90.500010060854506833 25.398762339064280269 -81.732193757731010919 38.528738930734661494 -172.65605168017040683 -33.456023086174297987 -92.421268389174429103 -88.792153023365770537 -196.00474502523476872 510.25220619530432486 -45.529020929858788236 -115.91287468612681266 -5.9147221174810953315 619.42623999347620156 2.8988169947033881613;11.625974620383566105 -7.3661132711726562405 6.4056807880088797447 -6.0491357103048173371 6.299905468727947877 57.947798248641106511 14.330084126859233606 -8.8293766505486264151 -5.5287480819023082645 -7.2279066134770237895 -3.441692229821129434 -8.7932597165587704779 -5.8732475131399644042 13.443554357851693837 31.941782331439753762 -6.3523736443084972692 -14.345052061066134286 -1.1676140580893235033 -8.0341224381464968474 17.612690333982062185 -18.23858517405242452 -0.78156624880146841061 -6.9930221275760082733 18.498338453344885579 -8.453337073731756135;4.9757640943062124705 -23.467734150999973508 -14.538135890008758722 -38.06102223778039928 -51.661845991461710526 42.032815732782253804 15.147571735771043322 -5.5844881226545313169 -8.5124696024085331203 -23.926679667803906426 19.803595942391211793 -3.0296146463820146089 -1.0572206014150824505 -1.8274650572671882198 41.592753717967333671 3.725062588733309088 34.477915620806832919 0.45235749637068334295 -18.528365511177273817 44.266532707882412012 -34.290243631026804394 -27.87862358142827901 -51.190619792613503591 25.162353346755768513 -7.3388932447346499899;-88.128837242509746375 -87.535727983151119247 16.418884465282300056 -28.748406132013993641 -143.05266359936450726 35.298773332717260587 12.584464799275433933 -31.901684760994953649 27.249939519547016431 -60.20538827648594804 -25.899251916001208684 -15.712587750453753443 60.048996107086111351 -73.114541452989712411 -91.649587862657526216 48.337523088677841088 34.228570069800767328 32.399463941263206834 -158.19888312867107061 114.96693793454913646 27.933630076623163774 167.96463867600644448 -114.35917358683416012 86.216916472635602986 -2.0999804351366124777;-210.80784788162378618 -310.63488916383249716 1332.1615271674702399 39.096211065554946629 -365.60422987505978654 614.70508749670534598 116.63245556456361385 768.78590508006811888 -188.24746244189628896 -381.61369798325296188 546.91760372556075254 -635.90794284322964813 -260.281533586421574 -819.5097628029700445 -301.05052598170561851 -254.23591939924719441 -406.86283547626766222 202.31830344323179816 444.24283490555836806 43.338137745639798482 264.07426326981681086 989.46182605546550803 1391.646725797276531 895.61494728221555306 -114.93790136037750926];

% Layer 3
b3 = -1.4439971793634567288;
LW3_2 = [0.0007041330934972661517 -2.3681884496856357991 -0.0026819143500867188151 7.9828195147900411549e-05 -5.5621245377600238985e-05 0.0026619298765523224243 -0.0025415941793338718557 0.0012355347110042072707 -0.001461081898032770901 -0.001343986377492560353 -0.0018609641976737359946 0.0036656460974778281615 0.0021692305032210341433 -0.0011011773339416677797 -0.00039947785007505513116];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
