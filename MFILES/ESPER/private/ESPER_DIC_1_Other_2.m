function [Y,Xf,Af] = ESPER_DIC_1_Other_2(X,~,~)
%ESPER_DIC_1_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.5500386312186205107;3.6689034498896280212;-1.4225955901083198185;1.1189754203812654065;0.32858571340164677288;-3.3737663940338475932;-0.34138071635494948719;2.1840122934939003585;-1.2436193742235928106;0.49649320788106610092;-3.6990941949680689049;-1.4002793485875988377;-0.21287079504853773093;-1.10753952907499853;0.47125272219598030032;1.0822055718097678412;-1.6659918629032994808;0.8483911602839132593;0.056075882447454587776;-3.6261658402744023633];
IW1_1 = [0.54127182758463066037 0.081093013977394809433 -1.3705867866279102252 0.28089408514039176934 1.4968084560835868135 1.336475805869944411 -0.38142735523537990572 0.3539715767941460367 0.1388859984516819801;0.13774965750111539675 -0.023867436901950381256 2.2803569865960064966 -0.8616006042352808425 -0.26575263268550081142 -0.16764317045032031683 1.1852677636942858808 0.072031477313933903184 2.0738890501422178048;0.04451642820790280286 0.15932045363013108696 0.054897097218406125385 -0.077293068925620933562 1.8674604714618028289 -1.0098098812736913121 0.36319549953034430123 1.4282935093938797788 -0.62072737650408971177;-0.10570909276548517974 0.11730814616551921148 0.34569345167930953799 0.25562844742163892686 -0.33302097050496881625 -0.22347793622883124764 -0.0014484568104506242384 -0.35062266628752825071 0.37066115415779687936;0.30511032574160779074 0.32826594472057701868 -0.85800492719820820042 -0.37392098417895208717 -0.0662568096423871572 1.887317110075342308 2.1425785020954388749 0.36913074859024058716 -0.55674393886502848705;0.30812459879724807266 0.55470426444848963676 -0.18122933408925764875 0.10691062992195866921 -2.4784360661894364597 -3.0616053285572375486 -2.5978192227584337992 2.762024719067183387 0.61191689785790381872;0.25011710514728113797 0.031360856730842878726 0.11644049036986718615 0.24687247146270582809 -0.65805386532135601296 -0.19439783643409550007 -0.94671999880570345542 2.165871457429487279 0.55743137781716878276;0.2943383558347792972 -0.14029550642802485205 -0.15283721021928681205 0.88497016970892172782 2.8806937424842558038 0.87340013679960215587 0.31827710352393340232 -1.8384611719047014855 0.4764912684700093326;0.067530653015833927433 -0.054988741285350556387 0.75347729736354451813 -0.10384220612849082155 -0.44944668299880841111 0.89099202279532629944 0.027568663613619190378 0.16039685124485281165 -0.095810768786540725928;-0.19337493842135039523 -0.018828089989964724021 0.33666392255760568819 0.39106272073597847516 0.43778377264405010649 0.13876813842041132996 0.5348260814240258787 0.90358136305938319133 -0.23863210855695676793;-0.30981154897525370329 -0.40030226779693994787 2.6438880563719773242 -1.6306226477004159836 0.58118795834225267516 0.8072251405438234384 0.58416788891385129645 -1.6712001720555578199 -0.69014779664756087385;0.079804145939805240517 -0.11427033574031260355 -0.5284760359788968076 -0.24328757178587279153 0.39854966230532756777 0.62173818985729967235 -0.33103015267473206995 -0.31501107067447869925 -0.20675949312468372421;0.94443689214474924043 0.29571084909829076226 3.2919382093971356618 0.76783682474428427422 2.5233853511259289881 0.37009910363752718254 -0.4192650904399620182 -0.63620661577043191581 0.23182194062855646099;0.071975935970812005005 0.037614468780526641445 -0.031827825311096714922 -0.0786367473172310677 -0.34256134540772081865 -0.56458232871985236656 -0.60314586348103227387 -0.33761469023300905157 0.18659334851832248825;-0.21868326900790335809 0.0094621731134224649346 -0.64527615624061152033 -0.22294523745591732222 0.18261478455980331703 0.60020183109788471931 1.1117578185870444774 -1.8940645423610740217 -0.27764234974684542934;-0.024999682839217329811 -0.099911475090964152468 0.25758503398843735077 0.052901209193237014317 0.072909167988594827947 1.0271042836471317994 0.33726464112814397156 -0.4441566705382704594 -0.39614564889322589902;-0.24674560822742319655 -0.20841358922962768818 0.13494713786582215875 -0.19618400453638665248 -0.55989360584499114903 -0.66929253996811777228 -0.67429309952406413231 -0.68531597525427967454 0.12656803602079194637;0.51427583553464029098 0.81110392953643251079 -2.5617894409451582582 -0.15635444557284866596 0.24642211872616384682 -0.49877949926055664687 0.034478241875699040808 0.6689625920997903652 -1.0915440317671527559;-0.0072878418625473839754 0.090144672446680784716 0.16757861752863395521 0.16219058392069907182 0.14003182743822611966 -0.36876328663388596718 -0.29016316787580925807 -0.38273426153603540278 0.55100737417942624585;-1.1129005407303018682 0.19441124684051747096 1.8889773628430808206 -1.0849276911294267745 -0.23909831711590084913 1.5290858209691700065 0.41844573609850849172 -1.2381292132699992514 -1.206935521626578911];

% Layer 2
b2 = [-11.068695085353873253;-2.8326341866614539455;-9.8387997363851873445;6.352350881935667104;2.239720220706559406;-9.6313128812344714902;-0.50905128476642136359;1.0954149770638277328;0.19968500874020564395;3.4474124448476195504;2.3217164765552062988;4.2795283068046083841;-0.86817571458373454796;-7.7001207600969427958;0.59887646354236456769;-0.11003918246346765242;13.555822844368439206;-0.48468650791365680552;-0.61118210187587518334;-1.5599709527103753359];
LW2_1 = [0.60699108095673193208 -2.5178691462736462192 2.7955594468180975376 3.2314008300855920908 -1.6151000977087279775 -1.3833047424613542642 -0.93988743302430954873 1.1402005634203193907 2.8637735486462760903 -5.0293792737822977656 3.1117486993588965305 -1.2491770413215221858 -0.96564038276748243028 -6.6946026898451345133 -0.17111238105725481984 0.67310601123045887828 -3.3745548782614247507 2.8811774528516274074 -7.3907277495934762257 -0.58596999730063847878;1.9670869994670461267 -6.5201977611331303208 1.4031918863071901615 -3.3267936078907287545 1.8730443476589559992 2.0694395300679140348 -2.6985236396922998026 -1.4777273120798466444 -0.80371497109629996825 -1.2574723276988211129 0.34016279017513822991 -6.4225684539260363692 2.0440444454921045114 1.5037276064139335485 -1.3177508076684636418 -2.9962983958655287076 1.0107432976700316818 8.900953869685938713 2.3474364599412349541 -1.7788177228245019013;1.7242490893381552386 -3.9467449644958252364 2.5428046121740757179 5.2672627223603631919 -0.17926077457192982068 6.3213101904329400682 -2.6117584359491612389 -0.51525831641857389176 -11.35654293091602085 -5.6438930025508060595 0.72779353087763054564 -3.3234018156227191909 0.95126795801529251406 -5.8984117529692445814 -2.8961052109173448521 2.9974817217727802721 -1.5548365401083101833 -0.2371886230057771161 -2.2539355700505248059 1.4002256110406934297;-6.2738622527610017343 -1.6407356476241199417 1.8086064798794267983 1.2492551138683587464 -3.4384978274099493589 6.8121669122088075454 -0.88670952143948567059 0.63130920051852912334 8.6307353953481147357 -0.52819165120220901155 0.29813152626342337426 7.8201910705285433423 -0.94285790468694741229 -3.9468245436090159117 -1.0440871362280377266 6.6406356539724944454 -5.2446848175503300027 1.2820826464642218756 0.86769538751297270451 1.0028639316482126365;3.0490386883272475593 -0.93290305530349426633 -0.99521657379060124438 1.4509429905032378283 1.0057614536756398493 0.0053438194385878826781 0.12476618737121958347 0.015199279156987771308 -0.69960456577948637591 -1.5259200037249698312 -0.03580654798957476348 -1.985398613679228097 0.42986835034088255458 2.9131725185418231305 0.59909023248950132867 -2.5590358038665557139 -4.449881594406384977 -0.51506358195715673531 -1.8713463265430814175 -0.40607018189543109266;1.7605806997305888384 0.17226441551888299619 -0.56980708615268016448 3.4510540129297075929 -0.55028037412891539493 0.58526185002790809264 7.6984788545307401009 2.2341765252816938592 2.0999764275956271931 -0.90414530720576091749 1.0945260109712735552 -10.745533499895737251 0.43970152455729077934 4.7041801086957066858 6.4573941293374419459 5.3195054322117663048 -2.1916470850965099615 0.080118663787915586627 -2.6324844073163586877 -2.3133725592594718279;0.9121245746453259251 1.1978738626938745249 1.0032311392366271008 3.6707762885869534841 0.27358618068529610978 2.7581007772411938461 -0.92894448751714531198 0.0026061404384102437176 2.3491154711137349764 -1.3882637938532680355 1.8411833183624739529 0.94867482140133430057 -0.14972149161022074715 3.7179326595481456685 -0.14018821317072716059 2.9854693186449163811 -2.2114292168162363872 1.2998049257969410686 0.037400353222643296924 -1.9656980909216736908;1.0704612800459691879 2.1804887815160878262 2.317596923922346619 -2.4066807206853901846 -2.1752542899072135896 4.9559579013836341232 0.21459486395243920764 0.58989406770908447974 -1.531143131025011872 -4.718231603201041402 -0.42882668992069383762 -3.592715662475267635 -0.60768690511126044473 3.2283695480482395013 -1.0237013729660533468 4.0466852739615113421 -5.1288640957107185514 0.98073491299095405527 1.153544203369620158 0.42697641428213878312;-0.11273925437383283676 -0.78432023824244379018 -0.072991025511522450442 1.8002274863623277668 0.56261026451595719244 2.418412333709189177 0.34143487631185104325 -0.33851772123650530899 -3.7868213778594830288 0.085010247092398488755 -0.76103660232360925697 0.010688744171579160624 0.67557620399495754704 -3.865085209625105378 -0.026496206315020882222 -0.62670083489356676054 1.505559698948021774 -1.6786317339131728854 0.38742115806766491692 1.3375261787975059047;1.8700119355389461795 -2.8100098743523385103 -0.067079466910739488084 2.2885728913511194094 0.10271605363390144683 -0.81698704828221435648 -0.36086738835591752883 0.045195955594823707113 -0.43853522999953192807 0.37919355475649080267 0.50476402699118105843 -1.6652023736624470551 0.12891513132851564749 4.000192523106039566 0.32393836394683178659 -0.60132244557904446225 -0.74778369856220783252 0.11328824656305758189 -2.0090260246241338216 -0.40124797073406115455;0.64146390702765476721 -1.356748620273369399 0.27346512355925450821 -4.2504924324477384445 -0.021166923656448666941 -3.1373937970807506126 1.8529497240931172009 -0.80807040849941214056 0.63701581721595934571 0.96325017451404137958 -2.2992978966095751758 -1.2043210012160365796 -0.0030399784619850609216 2.3001173880629681712 2.7176381785859007323 1.1151780355369276254 -1.1978406907252450164 -0.051566078155486277934 4.312170767113122416 2.0733931919192647442;-0.47123112839666631002 -0.93557216921012809063 -1.1254689441198872935 -1.8082287892196056145 0.81454133957371976926 -1.1071632466723053678 -0.45176041536815358945 -0.1141031764805820331 -0.87583126775523523211 -0.8650158006921950804 1.9724414876175959677 -2.9983207807602121342 0.21787672280352618492 4.6785643216198797845 -0.52523179583746792964 -0.39588316881326718333 -0.87786568156029276544 -0.007403622402124674165 2.0221137660870165398 -0.78195061968386336826;-1.8421272731444460202 0.26166591318984300241 -0.13630662598153242548 -4.1732010004590414098 -0.5267444175059294853 -0.83816641723972251654 -0.5416821468623603808 -0.42117403682966619849 -3.3859737373066125521 -0.094955666576022418335 -1.5810556607886845359 1.4882130849561596708 -0.11497096586203280066 1.7527924835489323563 -0.22376623056628791586 -0.87863387963414441018 -1.5179064640074884096 -0.0090932537410222408908 -0.31764612083141136045 1.2751560723474342218;-1.6518701485380209437 0.52306184872456495949 -3.2145967228247380731 -0.78555069012768286019 0.43454659723291066964 -0.58166602618232732258 -4.1223726040079888833 -1.5913989950577174248 -0.058498745813705073371 -2.8860908112340171172 -1.8853755925856041653 -2.8507941604031348248 0.16062790349570837956 -4.833793265882200707 -5.0346876514295990646 -2.9164226347922230786 -1.8375853127960570799 0.32816956696456323073 -1.7025359723442576865 1.189511859630633106;-1.7022428740751700538 1.5364514451475330681 -0.50066110703049071518 -0.42605595315497130082 0.37548681310805587241 -1.1167075189401676205 -0.74178559528724308247 -0.064470426593390084413 -1.6243522372360184036 1.1859462782339900144 -1.705771572413314896 4.3748713971121659938 0.140859943208613142 -1.3430780650521665365 -1.6233031425536532666 -2.3735041421387736982 2.6674815020346160921 -0.20788483339111932247 -0.43824110743088096065 0.72038147406536368056;1.0226513760459225999 0.062008928565405498079 0.78202844452792708019 0.063298285299377893276 -0.1021120576099592836 3.2938405479810222154 0.1047170838592980241 0.72526027346455479439 -0.80189917841539859467 -2.0621402372874402253 0.49401345056948980927 -2.8136007671367950778 0.0073163808869289798445 -3.2870555100603109366 -0.59504151132115290501 2.0858756762266188467 -0.10038295051936489688 0.26257784257893573843 1.1323651842868012185 -0.21964224856225122995;3.9298543468165507697 -6.6895407321939233114 -0.0052278350648316367077 -5.7250554122967471926 -0.32829332716325593244 2.1683909863399324358 -4.4885894792343314919 1.479060887474803021 8.7206968094669328195 -1.6737378600654941874 -1.8144336690737523643 -10.563087728932165632 -1.4285539357236849423 0.26687440228375797213 -0.85033742868155126615 -1.2015531901416971472 0.86508322950183269562 0.13858944040128318154 3.776877503320705376 1.7306991698698717119;1.6318225909093890813 -1.4734015263758033498 0.3650039024766706941 1.3451506961112276173 -0.28869611640980452627 1.18775170346720782 0.69893469356991544394 0.13744707647729803579 1.3353944230090222245 -1.0037511692470750813 1.642309650404349064 -3.6141009846275302664 -0.028980891117052178657 1.4317301192050699843 1.4165784720301188848 1.968507338023315123 -2.2360847331555411266 0.21919766963431386309 -0.32523250762048877549 -0.77426401330170280257;0.14561433516848321101 -0.85009248787348279386 -0.38940467276393109231 1.0080570845597096596 -0.13526468694283530492 0.17456793174802481827 -1.2641070667846390219 0.16080446053562469366 -0.53609214182779840741 -0.49082644285393217665 0.90983118400414586535 -0.49788891645859056911 -0.014567408459789626951 -2.2159092164376574807 -1.3170797104345419726 -1.6528407581940383064 0.89581648547810877048 0.18630927898004540078 -2.0405013282425281673 -0.81159049916831771387;1.3916024961133630633 4.9023261176438630571 -4.1609436779579898058 -2.4501595034472254397 -1.5485990522333950015 -6.9147105676734090807 -1.4357497322386369998 -1.3675459439088559765 -5.6854303695489472048 3.874627224634831002 -4.3526535149907541467 -0.45679488185722405547 -1.8507696525889583139 -2.2300595171810502215 -2.2077040557884104466 -0.91374673898253921944 2.4939545606719613069 -10.108533526679291725 -2.194755218281486453 2.6406335356632535394];

% Layer 3
b3 = -0.21955904173203721896;
LW3_2 = [-0.10777694264132764435 -0.16874686861899157453 0.071115648049351526394 -0.018763962593793776651 0.19748686465177242577 0.037760433934494366803 0.20498912992899664953 -0.088097461150035902278 0.17648238984541386731 -0.37963474602134605895 0.2553425270811721659 -0.32615623794369263955 -0.1962048146988589481 -0.051065511258414027218 -1.9340923348735030718 0.68677274131850019057 -0.037983187724671164942 -2.3555800604792929143 0.79023549872494847079 -0.099564146364852279536];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
