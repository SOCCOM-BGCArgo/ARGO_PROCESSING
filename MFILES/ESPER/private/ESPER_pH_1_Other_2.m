function [Y,Xf,Af] = ESPER_pH_1_Other_2(X,~,~)
%ESPER_PH_1_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:20.
% 
% [Y] = ESPER_pH_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.52518927409312321508;1.606789977872614017;-1.0704891707905477283;1.2153191656931996434;4.1930691303968909978;0.097323310894686571038;0.23451195108834402281;-3.6252847078035470574;-0.36146777686140613151;-0.56325845780005323604;0.40839411159177674282;-0.56326886925372454673;-0.79562892347277669458;1.1091135962146307925;-1.127586348666617333;-0.20805263964830703061;1.1317275996227540436;-2.1832857159537306657;2.8843267301458492824;-2.4129520942594941957];
IW1_1 = [-0.13650397834920563467 -0.081431458032061296293 -0.10909136163096981587 -0.16253506375401705064 0.31460056925331880695 0.49617790152689905669 0.28506296731900887531 -1.0264183084452322969 0.046817826693201870791;-0.77964049096899146196 0.35976299659783234075 0.58093494138294377027 0.044773291985386182157 -0.00083993787837660042334 0.85670162393038129522 0.73335215189727787077 -0.60180800259674727126 -0.18478219777993140638;0.71425528519670888894 -0.27756857307600335538 0.027813938611757776237 -0.25592606888336832949 -0.070927005526731590201 -1.6856969245916681999 -0.76140540559388103503 -0.4741032621845112649 0.020164149271925217721;-0.54478896025865053421 -0.27493975280111865311 0.81090217745298198704 0.29797378746894348511 -0.073958879667775145883 1.4475759971176853647 -0.26730456431329352451 -0.60630372761479600641 1.3284512548172338064;-0.031773031268459178689 -0.30568375189609714448 0.24974133240773832565 1.3304113037911917683 0.68284063164148500746 -1.1886951235395160076 0.12997964521345503619 -0.0032939070897372484462 2.4330276585993666494;-0.823935856995214988 -0.62943478545596376339 -0.3357737401361614582 0.0093435845853889806095 1.2915096917798574161 -0.37440666061359345607 0.20527290938502698592 -0.19013060275419566003 0.53191800576936043576;-0.06802305095235278154 0.5405240754642413048 0.88957534570543272956 -0.025359006161536627733 -1.423664648668029109 -0.35711676710583140082 -0.97082228203038012371 0.83306083028331567863 -0.34904464173808436023;3.0194605630697273213 0.85532802922016570868 -0.018855767049612587316 0.0098349254470464098771 0.92967896717686593355 -0.92695319169872758547 -0.18160680489400482518 0.17650821423190007908 0.52296955924542809502;-0.11379478362814628156 -0.34339770926491830494 0.65380551377696416449 0.18740961183021415115 -1.0394853016385054989 -1.0172510607497009527 -0.74210249904416147881 0.084005421457952644815 0.98758694160203419621;-0.38651288824361501595 -0.20717953823745691166 0.8127443475985566268 -0.19813797857082060538 1.4073131722828904344 -0.42973749210638334528 -0.28366820850315038749 0.64815770636031255769 0.21984825069215183091;-0.49524711961507411617 -0.54117734533640149408 -0.035954847180218928171 -0.057777300526616288956 -0.59504157722173556255 0.97539539270348607491 -0.21392212649116368328 -0.36299057389795424955 0.050563927740470381023;0.39342876938014859078 0.52096391549825515899 -1.3489955368566441951 0.066761141318347233531 -0.66850197104754960353 -1.9044869021056418656 -1.3751736844956869987 0.33883619484178056913 0.16322959162476985417;-1.6067003707263407541 0.21154400578097876107 1.3178202807046064393 0.28855686413978220983 0.004259367484433112562 -0.26786844355132616302 0.94157512112576291496 0.10838680410031391321 -1.3322952333590509788;-0.62417107397529181245 -0.83197275317200436451 0.024325404558061879817 -0.29067578542660466034 -1.2090474982305916551 1.081592407891458274 -0.82875530421538046166 -0.42582972793200069006 0.3792818909260716187;-0.39985226014306679554 -0.67387564869952121249 -0.030959785449298955762 -0.083909424005386215595 0.96317414815797941507 0.0019095836791005473508 -0.62243132351519137035 0.11259202402050380587 0.48621961711236399983;0.13630862943105204188 0.32855526161436232613 -0.78501267232133187246 0.42795822357629947907 0.21442316043860926156 -1.7336264522317057502 -1.0142437876447119027 1.2913556043185490108 -0.95842794069245795807;-0.14557872351523246102 0.3042902320314589959 -1.2848482948466257714 0.23246230019885960605 -1.6177772316082721371 0.52887845501525299063 0.042669083644624253293 0.80246470978190809209 -0.05817741069292484829;-1.8959272584331579026 1.1542629400499260228 0.085714615264637444847 0.46216828439598639511 0.2085578409512896525 -1.2401829614963759685 0.13334028497508879085 -0.10840897441086087827 -0.53449962429077824133;0.86844874225934265422 -0.22499744933437509919 1.4473407084277165602 0.16537124557643054223 1.6528930868980489244 1.0745259632670174366 1.1195736455164952972 0.70998360041487285077 0.021962151505238367705;-0.87630401633335996969 -1.1339990159814667958 -1.3856338294861711979 0.25860162432242950192 1.262684512469233411 0.88037722066358392592 -0.069354633119905584326 -0.095097831147503780747 0.036447429198582945165];

% Layer 2
b2 = [-2.105708143743714178;-1.1664487966573231503;-2.6198396641181878053;-2.0202321792693007652;-1.2474906749327789868;-1.7876305592176189307;2.3725812767474594445;0.83643372111706726368;-0.15692467961991760084;-0.63656252132056034831;-0.57531468124543594378;-1.0251311363031296864;1.0115961329943992109;0.12185010349701418109;0.24452862822938503662;2.6122043235501739566;-0.5874612533390303204;-5.025049551132939385;4.0428825248343258636;-0.81473123000510394576];
LW2_1 = [0.058255018922508686186 0.50386346418832606009 0.21334920258517836578 0.49122329120709140593 0.17990085846793324453 0.40823423453520202298 -0.56338938557674622665 -0.093360157884898167802 -0.3375720412359005107 0.97549080007199195919 -0.39634524194066911296 0.53942839755157490078 -0.033518042177958666528 0.14205925396750485046 -0.54903237970125284839 0.77622348919900963082 0.085847887688185367527 0.058344330176586071957 -0.73976525006203019963 0.216719196655786428;0.30345544877811242435 -0.38033530077884802889 0.83671349497025648834 0.77180337456548642194 1.3821760866517127653 0.40941684349694718037 0.39390931062548473207 -0.34422040860925673389 -0.89048703551535191014 0.26737076701411738311 -0.24757514776217562358 -0.3753326526691304621 0.23910772470021340874 0.3258033944350980371 -1.0423996787553921894 -0.012509359904186763066 0.39636346125351329395 -0.40396236687963427148 -0.892001873085494279 0.75174075372075088719;0.13490181883607391122 0.62413770051934625016 -0.061406480580247328749 0.75588934909483718183 1.6204344503384202625 0.8905233682823361363 0.5895753919743704774 0.17342024973295824819 -0.19419695257343422279 -0.033957464806157154624 -0.89260021944949008432 -0.88010007799983391852 -0.7885597861140322129 0.56837418465426436942 -1.5308243482336194585 0.58042174296433135527 0.1602682104693599896 -0.249306410684284524 -0.057728561896059883696 0.70014646854732842662;3.4094940259347938927 -2.5713229594025017732 0.19355422029777819004 1.0950774003034282611 2.0896816719220958625 1.4068870588459991833 2.3336294347759558576 -0.052705986355253683917 -0.31718672575939849123 0.38153874132139325992 -0.40000153784793840428 -0.75633096862500781565 -0.59378496172209749293 -0.37680028172581420121 -0.41463847899878708558 -0.15783387011932123456 1.3338230700470756762 -0.55725860921316050511 -0.34451021172877843712 0.09077702324040026749;0.11053712279916697026 -0.01179320389265280794 -0.065523083272991611281 0.0041094220014110723754 0.044818767514626739468 0.2604658286789018895 0.32323612984127336745 0.31015838202471385232 0.16720788129885108542 -0.50015334990670667903 -0.034412305083029573471 0.10101967435780466464 0.066678890747346869494 0.81687203336879765647 0.21404601042920576304 0.038954649889372208738 -0.64125239553053259289 -0.33082705557898489657 -0.79443287717794452973 -0.51930999445917225277;-0.1208048272657337302 0.53932359317541211929 0.070130027284748569505 0.78545871043189963157 1.3013298450744763546 0.90820285006885503876 0.55909690027171665694 0.16544886166434932817 -0.1759670893861264851 -0.14704633215355181197 -1.3562771680338627789 -0.87900636732743508972 -0.62530678819973639637 0.79482800382984497567 -1.0851824552802573631 0.51109869821793818545 0.086094223852867760027 -0.26088858776710982523 -0.32741583547080688188 0.40156109226385755528;-1.3344849408821504166 0.20559963571622072442 0.5098737774965429459 -0.18129213775078562021 -0.31166745609720281074 -0.70441982748106135581 0.15669865851500025533 0.23537739108263555643 -0.27873547532583586861 -0.63103588008329924985 0.20255801191703476372 -1.0014391256764776372 -0.0095934272924687331169 0.084713439678078886197 1.0982223337132508423 -0.50913077839037756966 0.73495009055696491895 0.11577485796352778025 0.95367949020983722175 -0.66071609236461448234;0.022638865523884194042 0.025318786523640592068 -0.61690169193162092132 -1.3392987162763809739 -0.18424746405757413958 -0.12365140068196538159 -0.23141831615151967072 -0.19087945071186213086 1.2708570491871773456 0.51458149527647401023 1.7639065054619753603 0.043145151226763392427 0.064470802352505449107 -0.84829222348801036624 -0.5801706710882402751 -0.69358119481974844778 -0.18026999297090676166 -0.092697115077785219306 -0.83144613827206237389 0.22900031887723309998;-0.33138666647337045035 -0.40075477333370385091 -0.0041071593615282838557 0.0063035728508467258821 -0.47976180708639065697 0.0063123195132311054473 0.15061402026269457566 -0.26193225447851287147 -0.4267920468265001821 -0.53806889607464636338 -0.22007181768210465345 0.18256886705845543073 -0.0040999671754419235101 0.20838468882848931729 -0.084583551006133031458 0.34061475676798624868 -0.56301259848891793691 -0.13238519915997862264 1.0334102352593694807 0.13454049069592943777;-0.36600689202676323086 -0.21610882316694324246 0.49973979695672776646 1.0734086695488760377 -0.094944424220324161179 0.26871099258198022364 0.38045145062605711939 0.050138956470812345856 -1.2228978997188009181 -0.67489142774319621498 -1.3971937739263187161 0.0063010568316300081051 -0.03560678049271927964 0.76376641421802915488 0.097958741750134525894 0.6484178868555401376 -0.18369927254125414939 -0.057268307656586046883 0.94608427580119602851 0.080498743728736804615;0.5663537878249848001 -1.3684509457637428209 0.63152585189306142954 -0.094215514123478311115 1.2516982370139810854 -0.87504742846963246006 0.20637610660562905052 -0.25637962105305567295 0.10436555348995760206 2.1335966518875451037 2.2737138997785288907 0.34061312579108865561 0.27905899056970601135 -0.78416825586841087947 -1.002120583848366886 -1.0056581701081104274 1.0762084599919317096 0.3382178154795493219 0.51397661958147211614 -0.096169919747122634135;-1.1487710581909649221 -2.1991324118320378922 -2.3451725579580164904 1.3851342955225502962 -0.11723381440975758072 1.0017666072509037178 -1.8864226537447659204 0.078009141448551796993 0.35949916336144616125 -3.0162110218328179734 -1.1374651342431367773 0.3135746731339589255 1.094725275209803117 -0.051321723788115808373 -0.99647229001750059485 3.0653302654519736237 -1.4517461531497397598 -1.0537030004571927844 1.4546837470141531501 -0.99711132232110422091;-0.97167685910734125088 0.2802514955663273355 1.0767667593756107269 0.79394519509652439204 0.36557866181595327637 0.24962236133328882803 -0.69101437328401127402 -0.58735410069200277849 0.115667299970528617 0.45980099383861094964 -0.63935037063362576415 -0.36895037728686119749 -0.42938259884847862491 0.67205779955930877723 0.45171664964352564731 -0.090218826213360525657 0.97104629247203966269 0.1768244850351988473 -0.81763392542134483154 -0.79472285482287285951;0.7909594692214839684 -0.88083465554992623758 0.10199181864480273696 -0.33316635663153537639 0.1339349690881035948 -0.12978885579037602316 0.39365111907188315987 0.10681453140249826117 0.43199132693999942045 1.002041404329097718 0.70840292711146957139 0.14174247552168450781 0.20642572608793316458 -0.49423810447711069571 0.064974732521733372104 -0.89092565015667135597 0.64527546776517474836 0.16856973577632583527 0.59822924685872946871 -0.4051672613923235633;0.42677894030564844652 1.0210236104959724557 -0.67773171246651398025 0.2895823886379932377 0.44152110392811161343 0.62881421709685869637 0.81376654535689774139 0.92387250168531021011 -0.2605983495227303659 -0.62545517310638432118 -1.9755416422229947759 -0.1973816311024285397 -0.53249298953758761321 1.0129280361965813384 -0.12727050626590355464 0.22512338019479441464 -0.88301997426735401309 0.071552177054259438749 -0.99073518905087154529 0.84555824139674662376;0.083532941506253788333 -0.76962577885097416264 -0.24429937970091655797 0.20726724301243970583 0.010282719872404444753 -0.1914825612099186336 0.43744157105318853818 0.19969171582357797545 0.1894483292819513498 -0.8079680148867320888 -0.29141065833630980242 -0.63050937441637433523 -0.00081066902825329377469 0.13439528368768155486 0.18770488907607915663 -0.078929850665656026143 -0.16598039164227862408 -0.085137916542346869786 -0.43667074357485691216 -0.13383985315040652919;-0.58210100604120385004 -0.77952102757273156186 -0.17949831403648275341 -0.22320725485664119625 0.29667833163198564783 0.039825857526756429372 1.0613779460122407805 0.39506784258811916688 0.088951766168685608704 -0.70375102846128267942 0.32017642296548998182 0.3693073541541048721 0.50550366909362876022 0.43752342173829650296 0.39434006194759058106 -0.36624857876912902954 -1.3971258636271342013 -0.72757089615914072311 0.25925378458739073428 0.1528852942330379272;2.2483577701959132078 -3.2991725350547413953 -0.91457135058072847045 -1.9021391039270703072 -0.066618566631446607396 0.30518201790693955111 0.063467079830240427651 -0.50912680328304027455 0.31561188699803455204 -0.26325305711599883418 1.483007269343146417 -0.83279053410865311324 -0.20296600408424650408 -1.6153185975272370545 -0.32676812684658967934 -1.584366588839686063 -0.2515645251116776504 -1.6377442428961872523 2.9037755456136187249 -0.01155925740596995023;0.64410859992914060168 -3.7865269517854054371 1.2160390245626200301 2.1686728067459810632 0.98844989728326870804 0.94788170948961014695 -1.712028387347235947 -2.2477414519280873861 -1.3921721115171021843 0.3142968949555101088 -1.8628465021908215959 -1.2302271919032607972 -1.2393031060168799851 -0.16227602181441189155 -1.1592910869375470106 0.44640982533984374658 1.965444275879787428 0.91014928849918130815 -1.93852898435123433 0.53951464144342009543;0.66005981025269566675 -0.85876423819555569583 -0.86161914493064362119 -0.24209091898585660685 -1.4832872620855523937 1.5151717939674571589 1.2988503556103123682 -0.34516309046895138346 -0.0057947050424425111323 -1.6812759466447935175 -4.2031950499097066043 -0.33641092780596842937 -0.22971419257194089503 0.81526910608770386535 0.46654436164095008932 0.027563091294258545982 -1.4371294109088570412 -0.61988296473653192731 -1.094567743099399415 0.68521873297999180696];

% Layer 3
b3 = 0.83673912704819874975;
LW3_2 = [2.7196767338305769535 1.2106564266932957619 2.2102104020385469063 -0.23755204261495482809 2.3255187455904473559 -2.8328512584644944816 2.1252214325007514617 -3.3649635502524577468 3.6377763622954066847 -4.9549476179979645707 -0.95542792316524316476 0.19562045177339171254 0.65521316612310476213 2.1519760213833860618 0.69032286533589903854 2.7396299581953784674 -1.2108417613548132508 -0.56068033392068106213 -0.45242617632924914117 2.7282784480721073983];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
