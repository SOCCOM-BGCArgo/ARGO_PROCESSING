function [Y,Xf,Af] = ESPER_DIC_10_Atl_3(X,~,~)
%ESPER_DIC_10_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_10_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3038920880892148624;0.53302957623387614561;26.26186658216581904;-11.073224897002926781;15.663859275967453755;-5.4560031176136831732;-1.3115693956611313986;3.326497775937262702;3.6550273884456156992;0.30951520801246462655;0.32327921675762999465;1.7131049673871581174;0.696959048834855599;-4.4280972432315302001;-10.328600523564972491;-7.7110812186085890829;-0.36613161967480289949;-0.89506132043047470503;0.7208142350024568934;-4.6691033668557579972;0.37843145555563251214;-4.7157407174150804963;-10.964054591338985745;7.0547384120120630868;7.1522075615193720921];
IW1_1 = [3.4281028995493225686 -2.4104889345994604533 -0.55280148784890736913 -2.0592538988565332048 -9.380918183690535983 0.69987528000957699437 -0.41416330054521743875;-0.085242230969393303908 -0.01862530301158841009 0.037135632305637551742 0.1002154131785718133 -0.08237344697811349592 -0.038734194867897579762 -0.090316863204261355058;13.313582596744900854 -3.4199392756866524579 -0.14902790712049224231 7.0569558215149292835 -3.4616116055261336726 1.3979128822659105946 15.088685861819870482;0.30344792393112690609 -0.19718597848779331749 -0.041719161897690953955 1.2342192231312054673 14.384892343002018578 3.2272687085336793089 -1.4713209818888139946;-7.5013171843104586856 -2.4396725950263595806 -7.7565665598595723296 0.64001377456545560651 -13.828156089557779751 3.3284260772426610409 -7.3404319185679085535;-0.02668316968727673516 1.1017337908263764579 0.19505903486570716487 0.52629398610813993287 11.334843499842500947 -2.2136508433697641429 2.5048232469834132985;0.84427260783269586497 -1.0623115316945443976 -0.015737554549367566148 0.8392383416795073936 -0.79887646963742942052 2.1582442817150959691 -2.7063215315066062594;-0.40545501218261192911 0.29348957405997228021 -0.7652898767294049609 2.7853347170797513321 2.2128003855662554678 0.49406773796049840985 1.3587089434100858565;-2.2645190938061019459 -2.021233988411929694 0.67120927247547967909 -0.10076234713381328201 -0.22407037955457270728 0.36666247830736781177 4.5518098515228704315;0.59908385046656187356 0.45058034833703580757 -0.77200225215709217252 -1.0635250303885004364 -0.22845773314471537474 -1.2511339071251768029 0.56179220088980530434;0.69683300959632421545 -0.65822164285573858677 2.5798586052280652048 -0.020559857327531801119 -0.049749866397816415453 3.2464718579885278871 -2.2859083845156717985;-0.52834216030957248389 -0.91265951061932959476 -1.2057003424860950336 -0.41476156294969401817 -2.0591002811710139575 -1.1535008961740658151 0.97207796456055761691;-0.11603110900902602332 0.63682276758140388129 0.22741414390265127232 0.72076274310421228897 -1.1419430701400892225 1.9102179465262729696 -1.3368610894021257796;-0.033928137352885474887 -0.99323816454263758047 0.48066192433247306726 -0.84432342321827902332 7.4083254389600039502 0.43749165590135130621 3.6407686915300532249;0.3419842355218294383 0.24303031429464874713 2.3561547927896242527 -0.051450044700162823885 4.4388026214931288749 1.7990491683469491679 -7.4564475807414352104;1.078516200105623879 -0.47480774050610824455 1.9725859375631691339 1.9283663087416826887 12.447742267393115512 -0.8981454174982680394 3.015519284461876115;-1.7233295846288698705 -1.2444547108471386565 -1.8583280737544600747 -2.0238103805755263132 -2.1983611266849543142 -0.22203672086393211327 0.59002187853355170244;-0.46562074021361221643 -1.3608139545177653229 -0.69773020109057315441 -8.1752283102413620952 -1.3502694268583157466 5.557586750446286139 -8.0204098283548166393;0.13606365027094999287 -1.7275345516423612491 -3.1524898172164066423 0.15880050907698939344 3.9601285337275982101 1.9144235359316361667 2.6384146085725239672;0.1897573125233349145 0.53112387609907774078 -0.6685150853407511029 0.37728879318494762396 6.7385145816849112421 -0.24247632132969468288 0.52739963349066698584;-0.05281166331403956693 -0.015319555028232838267 0.02625905465560836316 0.061034471498466129347 -0.031760991603618352053 -0.0039145079583938870507 -0.056695774448885287444;0.17655498176281378409 0.45566986148430738135 -0.57347007213694689565 0.26298339447885565878 6.8198440762351930644 -0.059584537194128921189 0.55651242568076331185;-1.7147549427817680989 -1.2117077360872645642 -0.11467381104698677607 -0.59001406939989287093 15.195741559778307206 -4.2350888456641930802 3.1174766470349508651;2.8514576725962936798 -0.15409681240645026201 -0.26409616128227325627 0.13192585358865038803 -4.552685793554827498 0.12360264940751893026 4.2541759609183706914;2.0168634199676374053 -2.9893209056886416164 -2.1783570584193476805 1.1833044414606475048 -2.9881892530816842601 0.32120952315820572309 -0.49271698074064729234];

% Layer 2
b2 = [10.696574280810713375;48.729109485274882729;-0.072942082103344421662;-271.84767514688201118;116.3541277847545814;-222.75115549580752372;50.093820774834767917;-207.50086629435955388;-339.01755795112723035;33.435672983935418756;140.01940949003665082;10.056192560861518359;30.419502164916004006;-93.542245857448051538;-71.389530144367441267];
LW2_1 = [0.81645757158262122211 -49.696060469647100888 21.738437422810516608 11.813982383420189137 46.242158062471673929 -28.750830557665622678 9.391018584365490085 -106.87993811701413449 5.9577238270281966948 30.658492131428939587 -14.64231044221385325 -2.3871919512275474595 -38.625330465669819091 7.9199718516198993612 38.037399195983134348 18.980959502738727451 -25.457339512565308581 -4.9564946477634537203 -18.247331810499730409 5.2151981102411326674 192.84097145697833753 -13.061895075554852852 1.7075733049492674009 71.91674855962035906 -42.347074276601048837;-47.131682715107260151 21.095560155357468091 38.097244102737363391 -5.4740162291420206842 -7.5084367042930200142 39.216598560647966565 -25.142824485752434782 29.857724987810883022 -18.207676546029205156 5.3271876182712984971 37.931571929868439952 69.61955956342271179 19.594602419029254037 7.7724823537634657455 7.3743650405156744299 3.8815246053599152809 7.7827563567342998851 245.81222750788668918 50.871905791148869014 -17.849903014671784973 30.403042829675325009 20.100704596716699513 -23.73340982967001267 51.774710157096592411 -11.422658000329832362;-0.07902675359391009291 -25.242518319907357949 -0.0096535251743883020159 0.16217258174912826951 -0.011183654066008739611 -0.08493945995909281399 -0.12218698658424397008 0.11794331017988352039 -0.031677353909003357069 0.16026060393689378625 0.10505872758918043119 -0.21043463361266173672 -0.32826974754680066093 0.07348500569596144727 -0.07514074500555546765 -0.031890177160678198631 0.013748648916691670954 0.030792627841281176165 -0.032270054657096043649 2.1704335191847290432 38.597934229236301462 -2.0785015847792118748 0.026007357740563268739 0.12195500134953579652 -0.12258122465120416256;-158.28855812376437484 -73.395597067233978805 85.053196337554396678 15.315477506750513115 97.049345220157988479 112.30476155438958585 378.96170294504395315 -29.538471269715930845 2.6290636097716824082 213.78106370409986425 -23.113496830492202605 -244.54189095631957684 -109.8586788575864972 97.427513915971303504 108.15712095961723094 -195.92732786900643305 110.20569247036411298 65.488523533501847851 121.86115774315300087 32.873710448342968959 -95.186763307492995523 28.306185599725118607 -47.209759575835548162 19.45514540523082303 -43.540450253035828609;-28.992405928695760053 38.451494931630726626 97.86330225354170409 48.520280910526629725 115.02238866513522453 -0.1914655571972024295 -64.855659036946022411 42.219020478407621511 -70.805513504505071865 47.006607859845772168 62.564047127174092111 -97.581998966918661154 -6.9969335156482035387 56.676794115312063127 -55.276255660007464598 51.401759732264963532 -168.94215013980755202 -22.82150690534476567 -111.28692052659152978 39.391030941916199026 -369.8274648894598613 125.43961841056976425 -23.672543606747602496 -97.147756527788146741 47.972806479755710996;23.950296720330182865 52.715505693433868828 213.19623546143714066 -44.750793455216360428 76.179494563470171897 -1.7444989190492390385 -32.529183614658279566 -125.08765030466618384 -38.961911631839655001 -95.229017088298647309 107.37231320437675208 -4.7778480811939783024 -127.17624023715271164 -101.66968083224837471 141.83270576685109177 -143.90423868731025436 146.31302717719322004 -54.118041832916489398 33.993809680196129364 -111.94328907613511603 -270.5252510736661975 102.43186448938169519 -101.63622808136969411 -74.369908027434178166 159.28182841951527848;13.077269670287504866 39.605632724862218197 -26.528721612738753066 4.2831277496502879742 -30.958295839723632525 3.4386938715915364995 -19.088848921809237424 42.252207310384882533 3.9105207586011245802 8.8236576775288639851 -0.077586679226206170523 19.853292467074432182 -1.3399191802998278167 7.3014120716103239062 -11.49682120456769141 19.458642160192574977 -1.7211067364319978523 -1.7415608840220717646 26.344410842160403519 -19.282892851851855198 -102.05376978577967861 0.59537361626103213474 3.0535787994419583136 -3.6102673419478406025 -44.799528518499890595;294.88261544133047209 9.0427612226581874921 -96.284069853965348784 42.728062829151333801 -8.0558500720403181106 -11.12706244920164167 -403.46546108925997487 -56.815524995139405462 238.56471329058308584 252.17860213344246745 -30.307619060608988804 73.916659454384074479 272.4704819140384302 9.5430481993300109167 117.26625322542955132 169.76535770348607457 -452.95033204418268724 52.887207238254987374 251.42943788455730214 -170.93414267122457773 119.61969224288947089 314.52921259598531378 -140.34246081155021102 -145.34077195319153475 198.93367858512331736;41.141745446437568035 7.4022225084555550723 -38.300078680138710752 -59.86559678133903617 71.986203814641598342 -29.781538118431051032 -55.752978526261749437 287.15500978696479706 29.400547279568662873 71.081859085617466576 -20.715290589821027112 -55.657862678062272721 -81.284540781822244071 -59.854288983500204324 39.403554662828582877 -32.804703536225581217 -133.38888994590388393 -273.93605641875871015 -33.769822650447338219 -35.991534327893468515 -305.73296052157803615 -113.69660745167604432 118.71450796324585042 195.15513148497532825 305.58261489617842699;2.2854440064376984054 -0.074431370827241133403 4.8875510568175508652 -3.8960602552199308235 3.4505091463765666937 -5.2367649116852481583 -3.8894212160111183429 0.17724157129334586203 10.912215476045632911 -5.4956603128781633671 11.271687992029328029 -0.14246483212316657374 3.4863382499880239962 -6.1652209613458746063 -4.1417796728786102634 -3.2580720837849250771 1.8456094421894908564 11.84390760715726465 -3.3042036354786619157 -4.5528943446002392292 -11.323337307168841903 -5.7933468584543605928 -8.5692369673982984324 4.7093497450942374272 15.390119528975668928;107.09116504145454485 -231.58741106771921636 -79.226419590251012437 -16.188858227312689309 -4.2679901891489153698 53.856497088110181437 -35.39173135546455029 381.01779402576823941 19.623049509707858107 7.7100578761277009932 132.51437773113599405 146.8028952655452315 183.54671608406786731 64.302605415013672996 120.45498164917304962 136.4315809585300201 -26.121594026478597073 -127.14689940942551516 49.343251667412872052 -20.51786473125379473 10.949117602205877375 390.52609695224992947 234.16129182837764233 4.9229661838029556975 242.46980283601368455;30.042947387574514551 -29.442240909730269749 84.499318173513998431 -68.748142402606134738 212.55686946788631531 -27.516181797967007583 -26.455342792944495756 -138.69499515621964747 -41.877415643892938135 -74.414582680392939551 -3.0830222569200382843 -35.062986966715108395 -21.973058777899971972 -11.737774393324844624 -3.6670732225410698213 13.676784183198448019 -5.3885242250369236316 48.183182022694019508 22.454614956178950536 -36.762673641120450441 -1.4116480076316808567 79.598183592360129524 13.129730024668850419 14.292193215414799923 -26.05293508535254432;-12.755058747606744518 -18.594344938402915801 3.056809016782864763 4.9865198997427855332 -8.9945212104476830461 10.430052122271501247 17.22786737765665066 85.314908510271223463 -3.33349668921050446 -5.3933345201883504672 23.917177969105534174 -17.251686693173450493 -35.756180594013663665 4.5597599855276405023 -12.92832842497242396 12.48445987031619353 9.2488849712212228837 -0.8311361852765578595 -16.152999984211557916 120.81363535827551914 -64.288032311333282109 -194.22948128807360035 -8.1290939068791292499 6.9490662859847649457 -20.996829019863398003;-3.0283004092572367583 -47.682877276315842607 -54.689121416229248496 -11.489070971331736715 77.985190199345510109 -135.04650406849947331 7.286406386098078336 68.150047175624450801 7.7062434044649297249 -4.340608504550437452 -8.5327705274239438182 -56.791923048737480428 -24.536089853039808162 -9.8053472696990020552 -49.782492253360651091 -14.668211669589906521 8.1181243111502432441 -165.08719448596494317 -156.46528942924240368 -0.44044310421789228949 166.73544393710895406 57.413062565145523308 -10.27762535818139078 52.589838496961490932 30.931952539016101866;22.686689918387020981 23.752082024964128237 -4.9659221299223492707 -13.543550504608802498 -52.444692162278535363 17.609080616517911011 -54.256132577754947022 -28.347545069528070627 -16.054157885430019093 59.91757703626829823 -5.4247365322583194214 43.862156312177511097 48.075030509675507062 -23.328760037665723814 -14.582467527359325388 8.3382284439372007512 -14.079888813267205094 30.700711646093573393 78.814649577166235872 -12.54986585678511446 98.094971997110249617 -128.1164751394936161 -15.174714072148422161 25.795046754904621622 -58.148727756798379573];

% Layer 3
b3 = 11.122890212268149668;
LW3_2 = [0.0023623513116343979219 -0.0011822046404839248613 4.2077225943818099552 -0.0017337034059368998298 -0.0009271025155094373988 -0.0003178589352615444983 0.0050824697042543736172 -0.0013714578479195689478 -0.0017344743769030770628 -14.434391250363667325 0.00075821721942346848467 -0.0049778574036502083386 0.012255274972943461936 -0.0017456142211161680602 -0.0052164851397026971991];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
