function [Y,Xf,Af] = ESPER_oxygen_14_Other_1(X,~,~)
%ESPER_OXYGEN_14_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_14_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5809455240460339454;1.5124143754438730269;3.1960143256910278353;-2.7731420126622179367;-1.2611348422115364887;-2.4902896263182867642;0.15047651197361291975;2.5286735724037381345;0.29486001505954417823;1.0878938575984831161;-0.20926840491804762912;-1.6894263029800395959;-0.37706413980671471542;-0.79692171629766350716;1.1766564949206308466;1.5283084120289898156;1.1170397789649872955;-0.45998506790322407634;1.2818229484587393419;0.49352342306716229237;0.42256924792074762598;-2.2901005344939813213;-0.43636091693886652765;-1.2075925331704462362;-1.5418525238979181591;-0.28127189605306529563;-2.7266726584573603986;0.34309782539441763261;1.5152609407382313655;-0.020846378929574631289;-1.9177829948766595969;2.3762616360626864775;4.1008987105102718829;-1.4973772194720014195;-2.646130878625570837;2.5715702748150204293;7.5477602701926009843;-0.28467620629696160917;0.52079121618075374656;3.7263617023249802074];
IW1_1 = [-0.61779769284099150806 2.9078186052226895342 2.7551681341525342539 -2.6476057186297023982 1.2073282213951133102 1.1180461578289968561;-0.20206918227537176702 0.58990753722629074574 0.53836290024671640264 -0.83835482231094315964 -3.6483465070024467813 -1.5940754189259100926;-0.91581200527716977167 -0.13276890921270531609 3.580252692280492699 0.59819275834055807284 -4.8718283120891170412 -0.032601792891005003383;2.5312430150916203075 0.93649221037042540416 -1.3195725107545552834 1.3108456005083495288 2.6439605158562353715 -0.073213734212258074763;2.1175733046139892934 1.0790941903951694059 0.2010325194889568956 -0.43221553409981816607 -1.7558828741228189596 2.410785195842980233;2.3427586191403393379 0.902368533023612307 -1.1326983222027147136 1.1426404460589709711 1.7193507767101106065 -0.38226984900985516713;0.36827847052794404625 0.14638105665520229071 -0.36738650348795481859 0.85866962490125930962 -5.0851942870413058273 -2.1529609588890075145;-1.4111296518783187359 -0.84243928426729408621 -4.3546456652730816117 -0.54305838411096396534 -2.0330349245840149131 -0.088606407073123144569;-0.85940849155012377647 -0.18780292983063381906 -2.051755530870846389 -0.42207218747515462542 -5.3832045591641177751 -1.1781019709977009757;-0.053207957261642353786 -0.096699652842109393158 -0.13054623813587248882 0.42444174176424936951 -3.0230001286846506225 -1.0520088580283926127;-0.1062892244683054932 0.21038200531862238929 1.4110089908191179031 0.42120638426378720354 0.59716495377649492227 -1.3151848686452991544;0.62919122781668490596 -0.93967014105614887765 0.22030833589263387751 -0.055468731453473231474 -1.0019701036452115517 0.21410441769479479635;-0.21210472297655105778 0.23634103696585820331 -1.6696151452546694749 -0.28994073183845420205 -1.3110972778593654731 -0.72336728478057765734;-1.4325355706860332106 0.7303996038051311368 -0.69254481785803345684 -0.59947317603487171311 -0.34749309842802883486 -0.35241093309123017185;-2.1692951868014866967 -1.1102707082030236485 -0.35404277595479932694 0.34145642872437853566 2.1605278873604607526 -2.3293342529711451583;-0.37903754623188734563 0.60193393386840265968 -0.059074874685706026123 -0.61147176415780435388 -0.85236141637636964052 -1.345208036055901113;-0.044663618879666230899 0.16430380995735316407 -3.0110761299841395378 1.926716086618582624 8.9919035788188992342 2.0118340540401904448;2.0706385951548682556 0.84216820215208709755 0.13392009256724901611 -1.1203102584778747985 1.5298628797236879517 0.17496461139904731508;0.12088169618494060131 0.2293024656028666286 -1.0570211964764544277 -0.69552424448354366326 -0.84291530265501379837 -0.93743603921705620508;-2.109004266790544424 -0.97149256379096182723 -0.26207947997749059255 -0.051397002021223131552 -0.20128452145407960128 1.4173243674222331112;-1.8891077583527275952 -0.85577121346692430759 -0.11464597039436258408 -0.080182151942020468693 -0.58652813143246507188 1.2508117869064816485;-0.037996678609072687127 -0.079627182111127806086 -1.7998462424041341556 -2.0034609021184639488 -1.285260939303387584 -0.69663235527319067319;-0.074579022796004368345 -0.18642482846351432491 -0.018748998602651157502 1.135606580439987745 -0.55689334123969458368 -0.31985802716457345518;-0.015490627706637324912 -0.17463978599229196265 1.702471992152245539 -0.78919913786750317541 -3.8178291714594632111 0.056783621351966219459;-0.0094019402014328574968 -0.20568619571992885486 1.1008241788848862619 -0.79824325336941781561 -3.5780141449971032408 -0.4657020551062687197;-0.56402518328115569535 -0.51363592657957768406 0.90231026255708179917 0.52528975394981158864 -1.5295817115587533319 -1.3455072547185613629;-0.1008135404500753729 -0.14797323945337076401 -2.3216731258343989985 -2.1569096989077523041 -0.18782059898702732625 -0.61996865978679738252;0.18068345589404291585 0.096277199059608756238 -0.22609065427856755992 0.18257529571640973565 -2.4716296682690974684 -0.66120454756400415253;0.56280313289279204625 -1.7773010543339533562 -0.84501217669316297521 0.36765755205089006852 0.021019283167235839477 0.65511664263742452885;0.24720481839236732591 0.12729876679232618453 -0.5508019591716482033 0.57911387069452324727 -4.9665247032358070811 -1.7353935317724404896;-0.70002336259794883944 -0.13598634546492247011 0.66359186768319067262 0.87738362195975561075 4.0679004613681906122 1.8616620900158697971;-0.03151065138458252618 -1.9485728904254431271 -0.2430667518632777524 -0.00030515006221469836295 1.5307505870496309619 0.89498181668549281476;1.5599508726836497363 0.23583946530788341134 3.6621018582790836327 0.39115641046237675793 -1.3748686555969871215 0.83521161425163714664;-0.037899673388076489389 -0.23500022248688715032 1.4360750013571395023 -1.3578950079833118636 -0.85111936717272662634 -1.21977010787748541;3.3084350015053156646 -2.9242112152540502557 7.5862742326084866562 1.9704996297680694717 -7.970530463255482978 -4.3287663410831980215;0.094507226367220836805 -1.9111768599129825841 0.99469857029741148846 -0.26329176238168600088 -0.46523081081059047825 1.402907721269172292;0.58376413554235873082 1.1713851551063854117 -2.0730135757166698873 8.9355085586856102253 -10.249589796048049095 0.025785517711594485579;-0.38637438417194053253 -0.13858602920921594959 -0.1609707491795141221 0.37766232284147666087 0.61213709994627096833 0.044424837336815160838;0.82360938292418184314 0.13264971574026948598 0.063079094742954755493 -1.1051833891962243861 0.2744009688008908765 -1.7068556209775993526;5.3175798800914613196 3.0421740092489235607 2.2032297416147246238 -0.93492289296879660387 5.6467323278169647693 -0.065414196289823756114];

% Layer 2
b2 = -4.8170521560963797114;
LW2_1 = [-0.084543685942125454402 2.234343006253006525 -0.34032002902301877745 1.9947122689905760762 -1.2067062619507935572 -2.6953271804898921715 -1.4193940036852492614 -0.29539930616915471839 -0.51194617192087377155 4.8245564708193464654 0.62646534178823332084 -2.6739003578006306228 1.1587236461747161265 -0.24434731425869057886 -1.1410909101219235406 -3.8595144460242791773 -0.21774552346554149063 0.3164887465228021779 5.4921505002247696936 -2.0868075119439888354 2.7756547205308774728 -1.6052785631279009593 2.1341469186348671627 -1.1230289245874021109 1.8047989105097990148 0.79230187773769078508 1.0719127636866228048 -6.7966999057643349147 0.26459470685340313878 2.7452593131798441739 2.8483067698732229545 1.0029461540835218347 -0.45932475032196506959 -1.2601228016165111345 -0.094639956015618045826 -0.73550481292657776677 0.088060381707993601319 -7.1533700036666223454 -0.74770263623818389309 0.042245472681002017856];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
