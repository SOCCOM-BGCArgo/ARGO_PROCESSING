function [Y,Xf,Af] = ESPER_TA_6_Other_1(X,~,~)
%ESPER_TA_6_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:01.
% 
% [Y] = ESPER_TA_6_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4346743717678249741;1.5263546186090819479;5.8943567852515705852;-4.8353544557973862084;-1.6769788198658208689;15.310210449419406231;5.4782016809437905636;0.75808651181962471988;-0.19635500141770956262;1.7178415294346034425;0.20712396165387148006;-1.9305552201284930103;2.2578940674222218732;2.2313574973757797082;-0.0079798284925630610931;-0.47453437412141008522;0.59661953560910785388;0.058314193705072736584;-2.2796006526145813353;1.2179797112169428175;0.70132709695355932578;-4.7362797220760137762;3.2696786368006542922;0.031909768854555493889;0.40201596916853882258;-1.2087506260072702347;-0.57421122337788355061;-5.0430126555626308971;-0.6446202508909086859;6.819162010983777833;1.2569082037781438288;-0.37841212457064032915;-3.2785152234717740427;-4.6705233274830471046;-2.329670190194112589;3.3150445887023414215;-5.6073418719046337344;-0.96342361298831302729;4.6096560943962918699;-1.103829229774144105];
IW1_1 = [-0.93094374969740512071 -0.41822882062419003413 2.5995246132366234271 -0.60473331290717746711 0.27665135551335651165 -1.9332253757667483551 -0.022676484262609257481;-0.95717062358417426271 -0.47844391609949382671 2.4360525083236668209 -0.36294076823853976821 0.44862907723293965478 -1.7071886143751104914 0.0065267858357690531484;-0.14518271265421522909 -0.12232435535685136363 -0.8243444340136831805 1.1371655276746412966 -6.8318862127966326625 5.5281053832378734825 1.6171117614286962816;0.12664973803898996185 -0.98838945297835389958 0.85033075555578263582 -0.17928485027395427154 4.0745473236846887488 -4.0542651679748562543 0.85643734297991680471;0.21388761681325080266 -0.098752915628917012358 0.087996174454316331004 -1.045324689951990127 0.54604456180964555667 0.47718771232330031706 -0.072178398108543123657;-4.5689478126398865854 -6.5572047326122167021 -4.9035512011467092819 -0.20118323413882441275 2.0954588155436257857 7.663718763228992259 0.55504002456513856778;-0.10852659547827386843 -0.031998525920276681134 0.47931557269237201613 0.088484871916310686712 0.10230883335837022419 5.4919160870327816681 -0.55009300439958574991;4.7403340870954373543 3.1359349613906903897 3.019082854986075759 -2.2549871216321757394 5.9943829543175359831 -2.5138366344322045087 0.76430067013996227931;0.3149123170213380396 -0.30106368408683603644 -2.4286912310976904728 -0.17912856982283695273 -3.1046766631806601566 -1.0423700308838801387 -1.50305010154902563;-0.98885228830525984112 -2.4311798257858838745 -1.8421655370042961941 -1.4754583134730621108 -1.0764951314815167649 1.642241350413135903 1.2121647893512497163;-0.11715038375554209793 4.9243906386627394056 -7.9959901065151459676 1.2900488658662310204 4.925859178725764842 3.3301977783019296453 0.28918490936563850946;-1.0462139010978293019 0.73683174050751776285 -2.6340147510448899126 -0.43391343677208937812 1.7774300578288058095 0.61447472885462783854 -0.043597539985146815944;-0.12296542050114100952 -0.077079437796818625617 0.4250351039523775909 -0.33290103552809341414 0.10239004556115968714 3.1428526612792571093 1.5442940983297479551;-5.697099655679599195 0.60714299822890782643 0.74975348933853003253 3.0260508793469633737 3.5037778391432277125 0.38455117361640545059 -0.85494661596806542647;1.5988630582988743178 -3.1583569444385997116 -2.056972592451034032 -0.20783145076337691814 1.5165083534539565147 -0.191175195141936205 0.080953681313677014475;0.65677689054573107352 -0.69275181835090327009 -1.6415755250166552681 -0.45292275592811764851 -3.01889571359378861 -1.2269937952266332104 -1.8199233140265154152;1.6618776266927708374 1.4028608679774148271 0.11268263870518101244 -0.74996964261346377167 -3.4880743157474891625 1.4061634128318529768 1.2503058775164201943;-0.099022165255730515421 -0.091777736254492398027 -1.1436408034044522886 -1.0963250128769816971 2.3057896891207771972 -0.28437106388404309598 -2.8289446678019118941;-2.6290977298746391888 -1.2374126881125624422 -11.564315527446929366 -0.84448613411377870808 3.3000630091018772205 1.7164885058083740876 0.91502292722765876665;-1.1974633622543588984 0.16482745486983524374 -1.614296254825262622 -0.55198763479693879752 -2.2357935392447769729 3.6390307137418651529 -0.91010359956318198638;0.98330130413065375272 0.3541343044150578323 0.77628872685641792106 0.25262399092621506957 1.1170291609032902969 -1.562112746158983434 -1.0394245274155164971;0.10492546384634705847 0.048665135165402488571 -0.79666515474464039137 0.35507644654188652567 1.0953426982738487805 -4.9471051112612149936 0.10128018967992724608;-2.0090264167412188456 1.6436573679152834959 -2.4360767276835733064 -0.86393726982134122494 -2.6707300571377681209 5.6571874300888991272 2.4839343486943885608;0.62467348942770695164 0.097077343364973200934 0.75503374317450300257 0.23777249232132571799 -1.4879993633763592964 -0.63756842365557442331 0.14993040010776795268;-0.24084805888569574273 -0.57409675221383782429 1.0846465353653638175 -1.3183417591131847413 -0.36313878197125970537 2.4318966007509077443 0.90316421152566916941;0.68755373340932179893 -1.3260512759347211631 -1.8001411803720486215 -1.8265193336313005901 2.6980905901902927368 -0.69111915864143436128 -0.8419412535096990613;-2.4773377899886366293 -2.3959101145992978132 -3.7027569281342391783 0.91552700332596437249 -4.5505227306506634832 3.0873589081374408494 -0.021766539586270276796;-1.0727341673711503489 -0.31603455076447611871 2.184934170493955552 0.9201454756790774514 8.8804105742351016062 -5.8577310714532222491 -1.0702169797288421105;0.53776286816170448812 -1.3441618460692421611 -0.93277783820395487879 -0.15441598960475674818 2.5622172498402422391 -0.65356242491689475749 -0.011955447504671968401;-2.8316000034121926454 4.6205591434790935779 -4.4595484151941962025 0.44359455061469249548 -6.3016305907364724703 3.2489471798784110845 3.7184924133297836413;-0.3739511539796501749 0.51856944262409743196 -0.84839189658351699119 1.4595584383768029912 1.0223400869977485872 -0.53738290133958188655 0.15656159445215778181;-0.58321684471084234147 0.36206123728087546976 -1.1216074302053380407 -0.964881234774426777 2.2761697662356357164 -0.28542462963715092839 -0.91369239187420758785;-0.30105750462986219373 0.68494320196561964131 0.0077051662455382263078 0.76584394706147163046 3.7065828548083290528 -2.5153940074183873676 0.96149680384534574884;-0.75330320870588007853 -0.03479889246522199775 2.9143175945602890486 -2.6942648319610520424 3.8109736695814326879 -0.13414673565953674772 0.67091419705715271693;1.1519098133916743087 0.40917860731292649001 1.9446437923734292141 -3.0817230414059375576 -9.606060975721486983 -3.165563154070821561 -2.7160950414379407825;-0.17634622198908189716 -0.11378085070659964273 0.4655667722185594104 0.22018090380458613109 0.14166949501212622309 3.7778043207218545696 1.9425598137136044219;0.17471955334685790318 0.15178171456234992864 0.73904928304097061709 -1.0169745339824955987 6.3342476000988998663 -5.2299202988196569208 -1.5803350686140766879;-1.0499645120208553895 -0.39690380526233076663 -1.0150352322123463722 -0.4821308740064572107 -1.2449835717018713499 1.7038016268174716039 1.0726542844430466683;-0.60880995313569130634 -0.54261552248870448256 0.39375325968286650768 -0.72732653762405719 -4.624135149225832464 4.7712210133715302618 1.9707725687619266353;-1.443594099934821573 0.52207270334639466203 0.73198543862930809389 0.097120776855937604455 -6.6531194303883323116 3.1686749076711158146 5.3998349271391532511];

% Layer 2
b2 = 0.93357203372888741821;
LW2_1 = [-0.6479219911051911085 0.7143611534766857174 -1.4680102774315386682 0.13442722120671835029 0.56772504350572317033 -0.39844843186695244608 0.5855895500217896954 0.025664883156502359129 -0.17911197900409481232 -0.033948421249847170189 -0.013915345021457825939 0.10040221179354419379 1.3247988123713139164 0.02177507315002408933 -0.047511181413432135301 0.124839654244865636 -0.049753656112517308241 -0.1459414972227147389 -0.015946820322159428046 0.054271140925783396824 -0.56890835499225933525 0.60848727615190389972 -0.05096784518301909761 0.314654990584033456 -0.19552185080724049371 0.048018235902503182688 0.047492963252695447052 0.055507878382528345884 0.16603786098116665726 -0.033461966062214645867 0.23190275508632848811 0.28430195614176545504 0.1769302642097126399 0.066146905467012614976 -0.026033441589751245282 -1.0209528789524162651 -1.7943611264086456458 -0.63725585597047018638 -0.26006098651968617697 -0.051505786002034419091];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
