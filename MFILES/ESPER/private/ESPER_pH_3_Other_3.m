function [Y,Xf,Af] = ESPER_pH_3_Other_3(X,~,~)
%ESPER_PH_3_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:21.
% 
% [Y] = ESPER_pH_3_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3249964082008807154;-1.2267060239964664436;1.5438596087442495453;-1.4286803621744157411;1.1705567339477855882;-0.99766685641980046295;1.3959255009544833115;0.16144111056795412695;1.0163611263036338439;-0.75993383759361121665;1.388169272603087645;0.090975470908395916769;-0.62364946830815248813;-1.0387645604529862631;-1.0850222217755109977;-0.68230828059503134675;-1.5513304650116210848;-0.65624791394030046465;0.91163304048704807414;-1.1784686978904730381;-1.1983692202280078476;-1.4297663309304753376;2.0361922428750900416;-2.4042787175865982796;1.7375830442493604977];
IW1_1 = [0.16949529875117744226 -0.85143879958685453335 1.9938457090369321456 -1.0837128139014464701 -0.97499873791099622711 1.9805338055537937691 -0.6375640150637155168 0.4021502174423112197;-0.37215625389034900916 -0.5863478333656398922 -0.067259338253685338471 0.019469180227106051839 -1.5922409798980305951 0.61077825817298514455 0.99954934607806356084 0.36463914806823666259;-0.39284517049064798799 0.019859789787882279471 1.1898121423517811213 0.026263600692306168782 0.44322501331970365346 1.4087677067055159874 0.52277128169041064965 -1.1833514344543676344;0.28817206055657518249 -1.769406591978107457 0.51800772405225259387 0.64673690487265089732 -1.0555367475590451409 0.4790930368288615071 -0.2328375228800561858 0.2194141140412014801;-0.29277897965809118741 0.1919756823827837855 0.48535255901891377617 -0.047002431152053554542 0.62858274057458840556 0.78555232141567854498 -1.5663061385987495644 0.99281816652681109669;0.29862432017829260156 0.45773496184456180513 -0.087307999254122747868 0.077840245050365672319 -0.090039855220872100361 -0.12586945142216057758 -0.59236739011984340664 -0.7910190041570261954;-1.4170829082047009528 -1.0435077761514475192 -0.9245546788029468388 -0.96217572417660324202 -0.3466931437431409746 -0.9867332045925667483 0.1812575191534923913 -0.51758146363269819101;-0.39123532713672815042 0.0050177222757005063292 -1.4941909471273975285 -0.10133631850177340916 -0.13985211365970839914 -1.04271007952595407 -1.6180702404622344659 1.1056511501430397182;-0.65567773602235490671 0.75284911525979414382 -1.8220098353780553868 0.12367965323557943147 -0.12022617008691580121 -0.82484410143333508625 0.67269225814430300137 0.23604812178760334329;0.44347674452161162106 1.0546095900888066144 0.46000609481646898002 0.26176152404184216405 -1.3552327570533455603 1.3478488537957737936 -1.387702184909036518 0.772640962532695319;-1.1553571815416241453 0.52163421301718315704 1.109053565601478164 -0.24502220172562433342 -0.20060250359488032701 -0.93368216240379064974 -0.79843015085652213614 0.66649324731150483281;2.1811127724964083363 1.3083836810504887449 1.3768565536544086214 -0.68663983814000983941 -0.12117191837012931954 0.19896655103471633241 -0.508027642955940828 0.23001195989592923552;0.50861264447007270562 0.86833776722614719468 0.62567704884229091711 0.75856593570088604039 0.85433376865800214617 0.89163228559517304639 0.58833587342819682053 0.46558796346603631422;-1.4533922741301206205 0.59116104843558148207 -0.4047196725497178571 -0.042605267187052923983 0.90209382906585078299 0.024391841444677330591 -1.0293343013195139779 -0.62589049329118218168;-0.59806968699224871688 0.042700057402278543406 0.77563954121347589155 0.23437657063318198536 1.2175871592706961621 -0.38281957607404110133 0.23359423489038336208 1.0160071183746857137;-0.14849310146532604393 0.031142546098036641422 1.0052054224309245889 -1.2412844002842751134 -0.61101113448011168394 0.79216785182253357522 -1.5568869347389662217 0.7472082187590135538;-0.47922918347746790158 0.83454217239703776254 2.1694098735153977131 -0.18186698290504679787 -0.80656282615658914104 -0.99733726270155331761 -2.1878666882934481031 -0.19276648942951665755;0.54559587064114400956 -1.1098377404359711651 -0.14414508092692235319 -0.1315526282786290968 1.6586150801267367516 -1.1413979352983056881 -1.5114816892805418291 0.65231589770912912218;0.22831899737363137159 -0.42583791712977636656 -0.31904501107379562574 -0.57116753395674324523 0.46624173901978649415 0.43198774551620328088 -0.55498796859045029795 -0.14127036119311470186;-0.20260073415756374438 -0.82102958819193294637 0.3190842183949048616 -0.7391144275344697645 0.66902515353035241219 -0.66353738309377885418 -0.84680776188810447103 -0.10219862962223899561;0.16290244152883623374 0.37593469245828231573 0.14852049400077801944 -0.047402700300100075737 2.1665747351849442559 0.060340559966639173428 1.1142690970603104095 0.23195796635404614117;-1.0198170345816328641 -1.0711054285433003752 -0.035396730850479105057 0.41037467650456976864 1.4582894961407890655 1.3593694864165515312 -0.064765416049460802772 0.56933306846080045105;0.15484414824518938358 0.49849358155707307327 -0.80200644596061421154 -0.38454265618846877883 1.2239510749980477833 1.2717264877439404813 1.0380541311563189488 0.50189552361926514923;-0.54583224238507865866 -0.25752035010097440448 -0.82900938986928940366 0.075140830843227757185 -0.29395135084104678791 1.1574628107229179008 0.75427891070319952327 -1.0893755616529137153;-0.22340350441823753069 0.21981871122391483109 -0.87551118474833711236 0.74890335079219605419 -0.78719239819826503091 1.2419415256265284864 -0.43463117977720439056 -0.9692559997894028001];

% Layer 2
b2 = [-1.5451111504912911077;-1.2877535355557614416;-0.97314379736693046308;-0.75979167629116184379;-0.58928873195257536199;-0.2426764512918161143;0.063441670858365120655;0.61565261566833806572;0.20955055251478602041;-0.34374871860456462924;0.66778992403038839321;-1.4000349082806009537;0.99034698742643967329;1.3416541223696094587;1.5945506843687551335];
LW2_1 = [0.32966043844913855976 0.15333475572424959399 0.813744163807053833 0.41230272443151477768 -0.30972334283864383364 0.73496122233479066477 -0.68124601264586159832 -0.21130535732938240945 -0.4602728354314373771 0.054158475269724511147 0.41099597908150986569 -0.09613945823766083254 -0.45115719214676974769 0.38588136684207963167 -0.35487578708862843602 -1.0694410134293783621 0.87404499226496412678 0.76420870629674353403 0.13428064413109799813 -0.2121820018445982059 -0.52872571025844472548 -0.22000759070449590893 -0.077848230267921716963 -0.0035927758732089542376 -0.13111254134533986693;0.2968976338111970481 0.24009067897260361057 0.11004165409757613037 0.026695176780662809718 -0.17512048946526034832 0.43169975684447381425 -0.16600823576653117586 0.57566094460240191388 0.08128832754709096331 -0.15745572955196998621 -0.36028812853958958051 -0.28750340898144916002 0.48928717033090496358 -0.22229739471173670662 0.16825061485355194413 0.46213656118977530785 -0.48466437221284575099 0.09465566224855230526 -0.24876307769759425925 -0.20239468407501101654 -0.40426078363701045681 0.39319964008227414887 0.42207758792171201634 -0.10917545231189124122 0.47036853549491902671;1.0334520640302491401 -0.39086499194201446139 0.43070416568909886124 -0.057838086140454013362 -0.21233814117565355528 -0.5346607601490458439 -0.35701468447033524178 0.71988123307215790003 -0.50074759478948849267 0.35580113878298719188 0.4445586166767210301 -0.069007645410756546234 -0.72132084062131340829 -0.44550912654513241673 0.50966331165106992795 0.78766371950974833904 -0.07021267623356478027 -0.3698465893322587239 -0.20084989579115677949 0.15519551769203224212 0.28251200576933227504 -0.15488214712695311248 0.48269407148154019893 -0.78660563832731600353 0.11586430899951459528;0.4476294059898465183 0.17949791046563284835 -0.10121097261598047123 0.22944676870441954586 0.75221948798573590178 0.45914331376856143407 -0.31201156655869805023 -0.1856979858577457454 0.014738701939264613888 0.394512176003613102 -0.038287426248729501677 -0.15547496789521886296 -0.28416333950364008887 -0.19639725283510772735 0.075697463356595523498 -1.0973098222135224677 0.2249136211070293101 0.3514490250302286789 -0.43447952053014710083 0.76286683198171423292 -0.12403080292017212849 -0.38134280646771684387 0.037850228545270564462 -0.57647076225875137911 0.43860690907339433542;-0.44449413063417109182 0.91577429583161695792 0.50718224321451221837 -0.33015818626207849018 0.091166729566156470832 0.050707476526331833611 -0.2296716411155855786 -0.34823317110446644351 -0.31438692535890738755 -0.89049398348175534679 -0.27752753165540450242 -0.016127469465034818125 -0.33655217499594153319 -0.11006953821165980922 -0.60688924244752551207 0.32741193239575755447 -0.68608945998620596285 0.50090807517885549416 -0.37482244890212818023 -0.64721625731366760892 -0.22998906355591269834 -0.49535279576135521351 -0.29112934459020228806 -0.071740952736055116357 -0.31458740364040088666;-0.080971154460209679438 -0.09718870675119614666 -1.0193229553800553511 0.31051453931577938095 -0.48355362256802747467 -1.0546799732931855242 -0.052063323138989398009 -1.0051168206594662813 -0.50536474376676876474 0.74130885445804994838 0.1781355740371578511 -0.30539662656133098606 0.54683262390289255617 0.20240827172491118735 -0.50638851802042894601 0.5092764254593488138 -0.10637477664079006412 0.58786751893548350179 0.69508911658051886207 -0.13433761288402989997 -0.00081869755708421096743 0.28380649147947173416 0.17785156948866384652 -0.40406562453498079401 0.24331045929752456725;0.025744048947831537494 -0.67715707654318713082 0.6763869171016223536 -0.715258053043200559 0.3853360312511989183 -1.6683043593963551299 0.6657799308422059914 0.68748878512840905231 0.026664911437854949688 0.027119175026284705887 -0.18071724120602722374 0.34860264656191985999 0.67100130823214687581 -0.29218743367194444094 0.22833263376395257493 -0.43562782950152284522 0.63876649248414973936 0.20439528977516485675 0.056581964361994342705 -0.81993248070644286774 0.39563588191888221512 0.15267279691787463691 -0.22284803968457644885 -0.080355926026970461717 0.03093914577080868894;-0.69416875684131507107 -0.85486082324958145851 -0.042158936164195803808 -1.012999540611104532 1.0078692301011562549 -1.3080947890934888633 0.36757233409559714188 0.32696167792423858067 -0.41158055421369216242 -0.59102914100626746663 -0.13406028730793617676 0.30954859248281252349 -0.2310371438293571944 -0.4887384813193849098 -0.41222101005414579777 -0.063524840663198273161 0.25245540714924885606 0.5598970219424272976 -0.57083622465879280128 -1.2337170805884434266 0.78493947466659086398 -0.30291621124625661698 -1.1072282778819475535 0.57776454566378276922 -0.19198251593289256123;0.26136289262005879541 -0.63113102653831809619 0.62384351627821543751 -0.20305624483971396188 -0.55772221976095615048 -0.39753113080284951941 0.37927761860702552399 -0.072637385081224956074 0.079819823682079432681 0.056464977820493506 0.16529678024425692451 -0.0094090833353716960691 0.68164188398515324074 -0.35186550857254855762 0.32939052822425651801 1.0980425558703816868 -0.85163118525240877332 0.4876569544636643605 0.089521457761580408574 -0.69039433018943641152 -0.26005658131262071597 -0.44971888075984939315 -0.41293193468734962215 -0.26356950138383461457 0.41864184492796829851;0.050496540238368421705 0.21194602168078988114 -0.075252029298486164399 0.5427859068107393492 -0.017802209253053050131 0.8178461491835979924 -0.30036116297151793653 0.21348994397200718454 0.13223196087910998875 -0.61799549038664169931 -0.48671786892780133371 -0.31110704979648012847 -0.094746132957930051521 0.043734421796489078571 0.088283086361082868665 -0.14353797802342477263 0.51597117136249615044 0.49767653893276453392 -0.47703272624467879526 0.4405054972647618472 0.50987168823194006784 0.061542530429185469953 0.9239943672238219996 -0.32574434754385556134 0.15345898170081140321;1.1092451882588068024 -0.51709406711005811985 -0.065223874430180225903 -0.091134605179176847445 0.14355821522583300798 0.68363111192242653757 -0.43251994713613561849 -0.044059157097051403207 -0.27045241895412247546 0.035002675328058840964 0.54088608720400122021 0.1066774849568625505 -0.21260973482897632669 -0.24098504340787790801 -0.072793333975565976957 -0.78053734194031432203 0.59399733300695867211 0.38143109905807703885 0.065205609078891543784 0.59254295232691223116 0.072926762622022245353 -0.38405171695328899073 0.30970525495403522509 0.3417129882430383625 0.1562204749986174368;-1.0531575877689662857 0.5359218024841363448 -0.15608824093250525666 0.37585148359437697829 0.18099960085911098728 -0.10859925220921606837 -0.094138156508599024619 0.067881948609271811068 -0.38153456337343821803 -0.068210367836968349708 0.16625312330968902708 0.1096366939073913499 0.15399820526642518659 -0.26386078112984967525 -0.11190234712097549274 -0.38566715236044990522 0.12737743668556866794 -0.25194995026229277668 -0.22554120312360950718 -0.44213767027205319593 -0.067070379696770515698 -0.4326506724351927291 0.18697353888763892926 0.3843274573844469022 0.20318937552128091273;0.46638699444972753216 -0.11702100942942783579 0.32281618082552715476 0.028780208721380203668 -0.61785510040521829378 0.47472014126627942732 0.37958700216490054435 0.26587321867928875863 0.35750791361036027283 0.48369493672101598891 -0.24869599768088260228 -0.053183377876001476647 0.71572193825453023219 0.19954591671266327935 0.4479593637912721027 -0.28706520473883223588 0.75532643829361933996 0.30570104258007108067 0.51697510102276467148 -0.1204031790129096724 -0.13381636561512252892 -0.17670003144455870281 0.045732953192721054192 0.11773584413933720072 -0.15598417438522652056;0.53947825682524552793 -0.17882164682933740507 -0.73558212612653750551 -0.081433710726369873401 -0.051381477858247308343 0.25365379701866935802 0.027585838911374182397 -0.50440735982955242633 0.068720422513067092041 -0.1530941613443697058 0.059599213872959799776 -0.038633755449140168292 -0.063130633784334103109 0.40886084818017376374 -0.48500650518240351339 0.16411174976745807053 -0.077226473076490720349 0.2831675160827986093 -0.083613114477386243917 0.26319584643578064487 0.10842713277883715695 0.40090734301055175326 0.34095699303275289749 0.079390291793788828056 -0.044897721849786409454;-0.49577182594654956027 -0.12298487911797177652 0.11346577933755856715 -0.3952540969269148774 -0.21135053362702044266 0.46739105291805532749 0.18189096355905212676 -0.20177679445649820966 -0.41877357086976579881 0.17564012785788996052 0.50532396949780067352 0.0014542680130272562372 -0.68749809191147148724 -0.038201828015462548083 0.60641181334857918728 -0.25541665744180119813 0.14558566316025192688 0.26095956198011655003 -0.33466678292322221688 1.0238574394876509555 0.22596747023335922444 0.56911013118823294832 -0.24713860543390578361 0.48760621419742022908 0.091837567541789455472];

% Layer 3
b3 = -0.60582511193166410646;
LW3_2 = [1.3864663521683284753 -0.31061197207363944184 -0.6141155059307576991 -0.9430794844965368906 -0.97966396450804071883 -0.28948111296144096727 -1.5916267191036697071 1.2292047355676625209 1.5916981775143523858 1.2020276138433505508 0.78623841844049524585 -1.722179361062670111 -0.93374758329813267732 -0.83388106949743712182 -0.59697083155833852164];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
