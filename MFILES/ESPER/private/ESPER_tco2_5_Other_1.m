function [Y,Xf,Af] = ESPER_tco2_5_Other_1(X,~,~)
%ESPER_TCO2_5_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:54.
% 
% [Y] = ESPER_tco2_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7725448004854223;1.1244818371552141;1.0099471049786626;4.9662136929275311;-3.0661948921557096;4.2067382697608924;-6.0812677294955799;0.57454136445595261;3.3061127779387252;-1.2991025032212709;-1.2457167519125623;0.41453313114264662;2.7774776613002636;-0.69779240989260105;1.1678086363655928;0.29244739533032343;-2.3218303210948554;-1.3230862047262435;0.78613555917724132;0.66426607236675173;-0.67493588273851968;-1.0629878201119329;2.8699984356750554;0.38209466387984381;-0.053094588780916524;-1.2334150733019347;1.1638525417350047;-1.9669215122118175;3.2395967214024242;-2.0408202281958738;-0.33470921810431842;-2.9735611525405643;-0.25009201980049967;2.7345357454628028;-0.37920075181597074;-0.13763501014311164;-2.0641207750436119;-0.40582234148138374;-0.023851403199409558;-1.338440907657082];
IW1_1 = [0.026119823296590131 -0.28750567448182252 -0.17053891397841248 0.76701661589347614 0.070704009181925098 -1.7998196673116436 0.15171828088188077 -3.3615055417835329;0.50049248234685673 0.92553133891953943 0.71567376328944354 -0.4308068515596668 0.59107381870163478 -0.14738899978957404 1.1691141593505252 -2.7603883117850461;-0.82923760791032597 0.76710153626175737 0.62252310719025261 -0.077968318595485295 -0.13578177287605078 -0.21774768331998426 0.32014379385575814 -0.29588820903586327;1.0181743030577179 -2.1371223073298808 -1.2227495510171884 0.19241657571601631 -0.091612256671698741 2.0909870033468216 1.1132970444808337 -0.27381634368435959;0.18997212204363223 0.090627457414250392 -0.82352045436337362 -1.3759642313075888 -0.28267957350813916 1.6637390406650894 -0.37318497086508406 0.089295978164961612;-2.0107534665582567 0.010822207286011364 0.24208108844265311 0.17314409914735884 -2.4801504124570681 0.58780034574203788 -0.14843690419095101 0.29930548060466533;1.6734901078262452 -1.12686638946738 7.0414262368967968 -2.0655340547927916 -0.26498045928668512 1.6370750464277444 -0.14402621532624454 -2.6322716548566962;3.5331359338991679 -1.6361595529339727 -5.9697116933963308 0.021581505522940664 3.4917050026777949 1.8600398069303827 0.18188789100854583 -0.63709447132544716;-0.85597481865467206 -1.8008593756795808 0.015383469659190074 1.4715291399986772 -0.68582048900624837 2.0533396407823927 0.31390301137802368 -0.16845775409399696;-0.048187527052076698 -0.37415423224696159 -5.6647972272309772 0.59408068507838441 0.20656313030848802 -2.5715519861953497 -0.70263401832932459 -6.584934955893833;0.014209956497396987 -0.29213975383568763 0.013346801407372355 0.55965666078480925 0.38758274579289764 -0.96756441951833361 0.73147032260192657 -3.0430050963471795;-0.060576907027323351 -0.27764015966011585 0.16605905719630254 0.17811646704890158 0.37331324744485117 0.2585334309711847 1.0495382422267989 -1.8763852672223302;-0.041077452404557582 -0.66216127024893112 -2.7524925969661136 0.52194145552919258 -3.4036397622900978 2.6443393931944734 0.69007322932850534 1.87636431803447;2.4976012625104698 1.6907920559068157 -0.056775677482781929 -1.2157887986614921 -3.235985908438106 0.4509070123492106 2.3902301796666077 0.91153692031393196;0.14574497796676969 -0.56168316235105842 -0.93710004879179865 0.10156236552675604 0.5747874646218869 1.0319005081007324 0.45866174218639227 -0.41996882700271004;-0.062532554077831509 -0.32836800600016319 -0.33669765675156244 0.035157900128298461 -0.86602811896412191 -0.23680361897106733 -0.29761723719378669 0.10140672626335033;0.98441709281046386 0.40307707616587252 -1.2868688256412162 0.14248048894944973 1.8851094949816478 -4.6598260695523539 -3.9180071257211404 0.80906938243013371;1.1385634231748121 -1.7852594506144097 5.8269347233905879 -2.5371609137222215 -2.365249248290282 3.5139889602519419 0.73618282444875172 -0.20866207754035884;1.1191127071712379 0.74321982215199467 -1.4433486060714715 -0.22202399799370079 -1.8195360914196066 0.76995052335869218 0.44184338136139162 0.24344921275707782;0.069614384291233275 -0.13222623715904136 -1.7577271933197083 0.18384041052541603 -1.1237397257635124 0.040524926004953457 -0.066807732123378302 1.4056862791883429;-0.0039596704358700625 0.47759386829726558 3.3023540349550689 0.029190906822297125 -0.74361227696824272 -4.7407305674759082 -0.64966829970511319 -0.15828464988919597;0.67173104870330125 -1.6242603584213202 0.76311373199380428 -0.27548563698885009 3.1585475792658575 -0.5672733221749432 0.33250216615230155 1.2363893003416013;-0.21691845819540273 -0.29740293750319263 2.4644150399039306 1.5349481875641482 0.33408168301292795 1.8104135641110177 0.3194942172813966 -0.25797789640260732;1.1621217114753852 -0.4855279664690722 -0.29686838658485792 0.93434742085511058 -1.0705955053111191 -2.052322359469307 -0.77666112571780233 1.5981638270915819;-0.040147060369510365 -0.15841410088030383 0.21648047501157616 0.027776135163796744 0.55532528656197033 0.20722968567392597 0.89167185159915163 -1.4694134860872603;0.03614545850074543 0.32428092805675279 -0.70650490961440571 -0.072705461973974608 -0.93935568896505872 -1.6788879167980921 -0.28155258929057186 0.24813165041275331;-0.485441122132862 -1.120019059214475 0.054057527066194433 0.1142760423982445 -0.96225370921480713 -1.3020912897326322 -0.40965021252304429 0.66295299037997346;-0.22310149964373358 -0.83654402489929292 -2.2430827482244955 -0.43843194464978502 0.77585215131992369 -0.68671024367542244 -0.87028204640534701 1.158504920571241;0.019987209248851768 1.3323031419521825 1.4905117563365964 -0.59221927635393501 -0.29455237140010287 3.3905970681901842 0.53894658799069273 1.6825625505917159;-0.94052257420859753 0.042445123891608531 2.036223293666767 -1.2593519520226908 -2.0738637852287147 -1.8891065536261968 -0.6701366768740139 -2.0242954865877421;0.72196083948377721 1.5858865078837849 -0.24820003516733036 -1.1885607170397121 -0.44403696442382085 1.086498647037152 0.68786004718497673 -1.984271522624232;-0.17946060652555956 -0.81458008523794156 0.56348913687733593 0.64447477754856131 2.2995879640161965 -2.0400276114236 -0.41326423779082977 1.7477423767157689;-0.093846783419070448 0.11884028543214362 0.54200149906351414 0.052631175001219242 0.59893959987199508 0.49390170454651505 0.70932637416129662 -0.86706952509506363;-0.22199290438643557 -0.30129838059375219 2.4718258702896114 1.5036001114962578 0.35071773771680337 1.6382534658414498 0.32521913367409427 -0.26262102496055967;0.044517101100794258 0.48858359806648388 0.33694517185025907 -0.11358289681247577 1.2480944908640308 0.37085324407326326 0.056763459199947977 0.40446281114684851;-0.31404272585331283 0.17137055912325019 0.47012431182150138 0.95727065681743118 -1.3672873749086119 0.57072046819267808 -0.47442758177125199 2.9806558460376746;0.05548422908463406 0.040036883194417235 -1.359827909904072 -0.60501291725233119 -0.34160138629765507 2.0080555930133999 0.029207520385285308 0.25168504092338956;0.23875177126268221 0.12887206925501338 -0.10301782135767788 -0.3109761024978312 1.0120894087831873 0.10961747880231218 0.3612627787436698 -0.14837303058463097;-0.23114883272931111 -0.34941707542558254 0.66560464975266731 1.249267127969043 1.6544060898208124 -0.0391329512405156 -2.0126252186717175 2.0813466765946798;0.11084372805003562 -1.3147871980641417 -0.32729649669411487 0.51592937042622211 -0.046093524702673513 0.64355096671581979 0.040702928340055906 -1.5403119628149835];

% Layer 2
b2 = -0.23124706987339169;
LW2_1 = [0.41234856257080205 -0.1139090553960066 -0.41169548825993707 0.3283291855786975 -1.0648319318887565 0.49102798210016929 0.073242997835487114 -0.014369339758050478 -0.053486318524147619 -0.018380351213292963 -0.82777760220613361 -1.9722150441581241 0.10643280955867848 -0.012447626254522292 0.32381644779707147 -4.7570903993010978 -0.033292661563851321 0.020487779616029336 -0.1284563567919193 -0.38787766393171252 -0.048114866541249836 0.055885469622047941 1.2748401546581662 -0.045283888557005207 3.4987959564755924 0.38036798020098239 0.23646772577397956 0.099052630916733483 -0.051460357922323112 -0.069936741411228215 -0.072763485751593443 0.18310257145148337 -2.7961720286138521 -1.2592265439077375 -1.4644926841584249 0.12755963270349807 1.0565827681716931 -1.4459822224805103 -0.15549559475207675 -0.27321903176338819];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
