function [Y,Xf,Af] = ESPER_DIC_11_Atl_3(X,~,~)
%ESPER_DIC_11_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_11_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8541414847087454021;4.628353951652367293;-4.0276797910237149836;-0.24410047688999481075;-1.0915522385911835546;2.7564195674069731368;0.85564961807725148368;1.4330413165304671796;-0.4860024202406078575;-0.72438740299169523951;5.5210609108575692261;-1.3512717509896201573;-0.13672661015990769662;-0.75912983097182240577;-0.1591573833093935797;-3.7793754938298200763;-1.6176188158546798146;-2.3372001159569188999;-0.29221045013818497393;-1.7813162314520272211;-2.2611133665880904786;-0.39803005334887742173;1.9606598676803375092;2.0298208092537559644;-2.1951854406485740157];
IW1_1 = [-0.47209493315036599181 -1.6998500084263963306 -0.82901227800814447644 -1.2380250898783171642 0.69079305620282804856 0.9734904998834950085 0.92316574590415489965;-1.3157017723890185312 1.5876572534982313911 1.6396219806515885953 0.50153865491723659265 -3.4641705687106814082 -1.2731122774691641109 -0.35954115873528369463;0.34118684494776241323 0.89593016599743691142 -0.45241756501188939987 -0.744877168701887582 1.2105480614039012544 1.1624079688327666471 -2.71366717121454748;-0.3785438718807599412 -2.7588461803495190061 1.8222236537880833751 -0.21868645511479375965 1.2892610786762879194 -0.7429923393511375096 -0.70854251197998319167;0.067695510652465290535 -0.43226997248796755757 1.3348438461431419988 1.1716931624285711333 0.65235930053351576241 0.49451571825423462636 -0.19297621269141945755;0.87579056160041557355 -1.0763217571279477536 0.16138555126422762798 -0.25026027407206641318 -5.6373929975696261963 -0.11271860988249475521 0.02072924176674738328;-0.57552067687175123556 0.5109534746660270299 1.2264331201731513143 0.76565287479554988703 0.039619183412603314887 0.020070010532526806613 0.24024840771633057535;-1.6623536789995332352 3.64006635223055941 -2.61477548997494047 -2.9842438013495145022 -0.57934797283162964288 -1.3395628983177150229 4.0132837232751681356;-0.5995791598248619847 -1.4818122977536316576 -3.102730499763365124 -0.35869797588713175918 0.11209225332717182022 0.52443105313423710179 -1.0532642869344324144;-0.05837076126500196499 0.0023548310099006652951 -0.16771527790727014384 -0.016191362556355354957 0.95684056577350451445 -1.5687577858745211934 -0.46344333887835764685;0.51461655127525096631 -0.67380966020932453464 -5.5519338953114871771 -1.2250770324302719949 1.9480935628749322941 -1.9015057944209132756 3.7110890858113227964;-1.6179434982783400532 0.83250115008984149068 -1.3821017959328742997 -0.63021681447415434096 -2.1723346042753943763 0.90965268795220222131 0.82114780665956599304;-0.063537666861353800374 -0.95760671054971302496 2.2766193340791329724 -0.60464319460064974709 -0.96153634513325703104 -2.0050637199204901506 0.47606200309478385879;0.38953037920430905183 -0.96771822700815635088 0.76679943458931920652 1.2714713271644633164 2.3977898368179411115 3.7482851953451916671 0.28662902624319713807;0.69573919527414251895 0.36885461089143645186 -2.2655777856916752278 1.1568707792385670707 -1.1655659506900768463 -0.24655896440124075442 0.7183818976641004328;1.3874338007016377983 -1.3148107335523522288 -1.4247042097514084347 -0.46831394195355124932 2.4715666314674007431 0.29474507686888695712 -0.48267072920734532815;-0.18107525035573945882 0.54012391408281512639 0.19701244664889505653 0.2938911816602552407 -1.2239930605514233175 -0.35718887532146659236 1.2448901612907143921;-0.24700746941147899705 0.78073809912159253255 0.90940636170052080445 -1.2010599642440233925 5.297592159546235635 0.25055339284247524212 1.9589003574265477781;-0.30912016325630847779 0.26127450364700655072 3.893555768239677306 -0.15774023876957446455 1.4409424065072542476 -2.4455810723357749303 1.1049458213528509098;-1.3001931205858279217 -1.0019527082699566378 2.245940276908215516 -0.8509163825913635959 0.12331511447403732673 -0.40600612689689746793 2.3093754756459592414;-1.3831878377782469425 0.39069472160286722318 -0.61831395838904656959 -3.4109458827232765898 -2.0334170019339943281 -2.0617768572215124934 -0.13767469455313330329;-0.063621568799984248854 -1.2862290579137576341 0.40937280580456286705 -0.75889346978999328019 -0.92981033953919656199 -0.52367626937854716562 0.024654840369750737755;1.2018118751251296583 1.306273062759336856 -3.4864535663299083268 0.59631812799882810694 0.43351116408358703058 1.1257841233721723739 -0.026877880684801513933;1.0391220972872718953 -0.48576104168683131856 -0.27776707556884683292 -0.31016876728635123239 -2.3799725657312618132 -1.3243952898748867497 -0.7609095531726113304;-1.7221904055511214615 -0.43481535939291710013 -0.45775557860504378915 -0.20604217705524888182 -0.097429537377170583046 1.7209667348167183576 0.87420182413154157164];

% Layer 2
b2 = [-0.83860621543982560855;1.9161984103625737674;1.5259864187529796897;-0.18138009384651082589;1.55676079934582412;-0.2676853346648640497;-0.4272792494202377056;0.41823385014215247457;0.55526081710209918008;-1.057284763012998674;-0.36712677743387245322;-0.024246349665446233212;-0.68086644413156705014;-0.18350874346658133107;0.97822094099856349292];
LW2_1 = [-0.13232522459713408347 -0.86937785344616824723 -0.72371841242925505355 -0.78965012290234715131 -0.048671020283761641523 0.70273077851589627052 0.80399293942337446417 -0.40911379737983394334 -0.069896766838178275849 0.14013127333580249756 0.55351136758246699543 0.87807268450045283803 0.75118801155763659239 0.40677439272914472923 -0.25373012235331848796 -0.12128048575204092296 -1.3926229884552250304 -0.93599080599489759003 -1.0413451814115901595 -1.5313685182802152518 1.6045953569403921257 1.3178229506010583627 -0.51408179289709332593 -1.3965634126528061465 -0.69064106945909908841;-1.8463309263602365462 -0.83227625119217729655 -5.0634615709491628266 0.25093528238377649231 0.70957362650220179301 -1.2404949546240184866 -1.975642389628412543 1.2089199359168514292 -0.34907927735703297989 1.1873026407591662501 -0.77972307737646906478 0.26155681238868117022 -2.8901046859196481975 0.79896395730186953177 -1.3110936963742927386 -0.82482315354512769634 -0.69715475372564306156 -0.29339727517475494567 -0.19690019578536832601 0.86947043158186143597 -1.0460059942671595667 -4.4368757709989354865 -0.27107736939982618463 1.168891899483341712 -1.0081459673728687676;-0.28338766567738660207 0.67098715511954043489 -0.30272102992974336821 0.070171181305737004297 1.9222958996671271059 0.10094072426879875659 0.26429871976878233086 -0.019347760255515277644 1.8569515504288303109 -0.45302698225462623149 0.72942886353726577031 -1.7210524548615810936 -0.056285880101367979922 0.032861748079495517461 0.11114383771969982284 0.47302756290465702849 0.036212028895235816306 -0.13695285191969827632 2.4334306052653955632 -0.64806349774641547334 -0.47857121150613884941 0.74473166800302625923 -0.14767572224886887922 -1.0156437649512273236 -0.46800652820327032222;0.64842561683980681764 -0.1234334550704409561 0.80658626188718229866 0.3670418254006758696 -0.20593616139842590984 0.7762439973722854436 2.6300811533259498276 0.45063761677060459876 0.24502123231102720946 1.2673130187145262848 1.7602760721472328065 0.61127473268278864627 0.97696147343833739107 -0.61934486427688884014 -0.41021197338580767111 -0.034799735712079865602 1.2638941515956476636 1.3853039857759223974 -0.99702537913441091622 0.049360941510552022726 0.95865717735882749473 0.40967357830686174092 1.5359065489629397661 -0.019476419404078817305 0.15069491187817665723;-0.81972140311180685668 1.3463087106052900044 -0.87133417727121520446 0.21461249499559331699 -0.52865438835268563356 0.37496171306118075695 0.96340739509320694189 -0.35211802391842805804 0.39995378264030856386 -0.90081754937319147292 -1.7843514308591736928 0.84121661736912278773 -0.81050654012466327725 -0.059669074546568202921 0.51077407197672786143 2.0794515803613720095 -0.79863727821748597968 -0.35177671704174034994 0.30607824470403571793 -0.670942622025196167 -1.0957328443808247442 0.9549047788054210173 -0.25394970021452883957 -1.3518609402368757522 0.54619849867839531665;0.42818532562637717787 -1.1752782537450254807 -0.48268987403435781314 0.27753785138481573691 -0.053171120153241616113 0.16472973064452317571 0.39988414573824720977 0.083579616945593751542 0.7934505933876863093 0.86627541126780316372 0.85929470862722301394 0.37126947336594207094 1.2758232510146623184 0.23202226678944659621 -0.16452651722435288062 -1.5755254510905307708 -0.24730393906578682084 -0.12118309479103100967 -0.058046780898407208948 0.56168299060257198541 0.10566873080246010075 -1.4587416602258544973 -0.62046747452053918614 1.6199972101249497936 0.1341772314392097043;2.9667979708518652515 2.8203679345937193723 1.5871706377972893964 2.2462136313143625799 -1.1011427376835793979 -0.10444332167313133408 2.0004089990962339307 1.4478149720279354096 2.0315919481560755777 -0.29860794251655065068 0.89142993194095798692 3.8430644109554270571 0.14088884316262403895 -0.4321448684951883501 -0.086312335536771297995 1.2983218302844650172 0.51762337397226521052 -0.63879103858851604691 1.0633678676369817673 0.30948427741558759418 0.011038201307755554637 -0.51708003594288043381 0.24937076937005817068 1.4479525034542020112 -0.15355056380321036036;0.36933608836642989326 -1.3971738611261801388 0.43610252871369414862 0.32742030106828134972 1.2211576058441329096 -1.2423183524573144787 0.50592179200111053738 -0.36823723533282370912 -0.8323436497839432624 2.020615087824909839 -1.0246838159463846907 0.058575746625481962815 -1.6077104506024484376 1.0517676152088137886 0.46500532012398015924 2.4511057684357946407 -0.41012232918420721273 1.1369221618528613238 2.1826121005931353736 0.058942750343744423902 0.16992209415449543997 -0.978568933137405228 0.90327297449418120223 -0.76315967478729074269 -0.024011941891442581398;-0.46256404537508633013 0.7080742046690513547 -0.12470840351849615812 1.2320535039643769615 -1.4019377859441499723 -2.7513389675366268783 2.3441369773580440494 0.3289710614385466525 -0.70610392730637627778 -1.9147432434406164159 -1.9025066225895173044 0.11866069895027457626 1.1268191837888634765 -0.45360346292772801835 0.012221193852059213103 3.1123796562972279034 -0.54377791189679136608 -0.25085355261087782797 -0.36231936728443719931 -0.57191142185987864366 1.7187923673310510075 -0.46640530107038791208 0.54224625969596862429 1.663378126195709239 0.25148965473475765053;0.072045789696259937562 1.149941607013125866 -2.1413439124645763378 0.47362568309025981916 -0.64805535126513136301 -0.7704631136058214258 -0.19532183847658177167 0.72945977441184994827 0.27550409078072912727 -1.1402599040405625441 -1.7217439064235318114 -0.058740518295865080944 0.3443792202672315006 0.3344071187297840142 -0.3506578794778068553 -0.26055686515727738417 0.84940178243803043934 -0.23192813351076133066 -0.039863668579166948447 -1.4663444135478811425 0.76413834231312538492 0.040603700064863683383 -0.40902955461786505431 0.028361077172548695979 0.16688204053441066388;0.42500312009101215427 -1.247645848962453119 -0.46893637575375118898 0.25354011426012557084 -0.12833975990492274555 0.31070985936488554335 0.55940643986911364749 0.12431117272673203322 0.76133407805352670827 0.9728250246308572935 0.68479967065932623171 -0.39500317226914549718 1.3119232823887079231 0.35516084509549622483 -0.16169557806735293526 -1.5479479789163086423 0.29266941320193340381 -0.1017035241043254129 -0.14780923843321197575 0.45153425655901291424 0.10746461920409988711 -1.3557733904614617249 -0.58559509006446119894 1.5617150964267685342 0.29389119170155220129;0.40923691713033610862 0.33869311521104966678 -0.63393276302366941 0.15935212135713480719 0.66058086227760637321 -0.59043800406872226638 -0.97387895963708470681 0.61787413403662339029 -1.8883874590100846458 0.60677976936442334921 -0.37583645001686266651 -0.89610980601035850057 -0.9855174530674516431 1.13781116599960197 -0.011746465600408541666 -0.88826546675433915023 -0.40314755343183023006 0.56113033740259865567 1.0010097350823499163 -1.2088600249017065202 0.034666029094746725336 0.3172244502568908886 1.3326682693694198445 1.4312665498645436024 -1.0254940279798525626;-0.082426126790905412944 0.097522975920519547333 0.91301983501365124862 0.15363792837804143843 0.84940113215891821508 -2.1334756711822424613 -2.0118549401948047084 0.27195184191556404096 -0.90053179148676654187 -0.5934460022171457183 -1.2839164850573299148 -0.77500120008752426681 1.4372795213834450578 -0.72829683422478108668 -0.19684946172634748551 2.1581898712894238557 -0.057893132524216329993 -0.22639570566807695751 -0.056550931163354009601 -1.6353050524132504151 -0.94379648709983943178 1.379997564001033572 0.088079868921111026392 0.36941660852811136762 0.30965276624571491659;-1.0113423938804200208 -0.030576361485524276851 0.65420021601725941718 0.24131691908464270035 -1.1105997777300775642 0.52969948929861809805 0.43736706215017845389 -0.4238034338699709358 0.16581572253297058306 -1.0064319022503409595 0.11623995242323534316 0.80609484714341894662 1.1554640211422655405 -1.5573368645385738951 -0.044591996148907714348 -0.047383967443515175033 0.7679134101049956973 -0.9913104806891465115 -2.1807633989622949855 0.55084626515564216742 -0.90669832975944864017 -0.085128873534057653005 -1.016979341373659862 -2.095928549243442518 0.23844172851549516601;0.0024356696785988131079 0.7518480744663589288 0.359240085885818905 -0.053551707599259000536 -0.17955012595536429254 0.15558430669074191366 -0.6696349853130533214 -0.076500945117482233027 0.20541658380800045802 0.28505459355514356501 -0.57851267337633893728 -0.27880666528769132428 -1.0170417448480837397 -0.58604688237846613852 -0.039262626506020574524 -0.6872763156324047662 0.45564973074166092992 0.073957080157086269034 0.68079255041907127399 -0.25601484203844077081 -0.59753550120456366823 0.043037444098471634712 -0.60623663182094811308 -0.2308499922202892074 -0.25214133441822467185];

% Layer 3
b3 = -1.9504912617590994817;
LW3_2 = [-0.054267093925158431389 2.8013578233965987785 1.6061325100446588454 -0.18046505857587333277 -0.21891450564441747306 0.85931243539444746027 -0.22373318896208277407 -0.018327943814035903974 -0.064930890246288244794 0.079245251016688639245 -0.8686763630034570749 -2.1735414828931114428 0.026595174362462475903 -0.3426017741628106239 -0.1632765616764181027];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
