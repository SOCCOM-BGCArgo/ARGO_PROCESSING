function [Y,Xf,Af] = ESPER_nitrate_10_Other_1(X,~,~)
%ESPER_NITRATE_10_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:35.
% 
% [Y] = ESPER_nitrate_10_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.5838027900625224476;2.6242703066617010244;-0.803079514443466147;-0.76429210279447967746;-6.3372800820346260053;1.7597447509344965599;-0.99833502068629798032;0.17104429580350200002;0.77341908793794311716;-0.19181678559830589448;-0.25085124836504457679;-5.1960334708768245449;1.6402463989280289258;-5.064469758437334157;4.4905024843636383025;0.35786010858045547156;-3.0749729300861257109;0.83140824977325344936;1.3351261738829416359;-0.94995685086527392738;-1.4600353183071148599;4.2296966426758801916;-10.985524174726496227;-3.2846213164847157806;-6.2126272491278946575;-0.21377395958391415265;-15.849636344051230452;4.3052532168872064133;2.5006853244758220356;0.21385574316040087406;0.44433349809570699129;3.0062714837208832641;1.7168138387700322411;1.6855824134044639084;-5.4229411113515677556;7.5317512301861793134;3.069541960433542549;0.090542229011716948706;-3.1898030145301192739;5.7093565418813021495];
IW1_1 = [0.044454635582615732725 0.24954809056234109055 -1.6804462743262924551 5.0592779513477452724 -3.6555413373751814987 -0.28321950569031456579 2.0480615452818642375;-0.19787433629804818125 0.11118463198200559394 0.93157814553912232647 1.0096542139163571239 -0.4966318330408416859 2.2632538883080948189 -0.93740173724221309559;0.10148698344158191276 -0.16414575711747411702 -0.88516858627947003768 0.34768181985844265336 -1.0571491759579629832 1.4098515258182799936 0.26371703383273076282;0.81276578483861960933 0.20377733710096923581 0.046679063656341002186 -0.14641050711518574512 6.6138321235220818295 1.7370589560283620223 1.1781175594015667052;-0.023145350688367087588 -0.2654330475401796563 1.5263722291925583274 -4.7215994253428013039 3.4102372415358614965 0.40700551506048765482 -2.2140601880907464505;-0.22246303845684234357 0.34279598596257215837 -0.27133859767569085131 0.36677759539775950381 1.2614180784999216023 0.38617901187370951011 2.3354470549895913756;1.9424680497982338423 1.137143252305301111 -1.0914413356192946836 -1.0313998124568173331 6.7542082134557093198 1.9593345640502548566 0.098399872072309380044;-0.14644348352034552985 -0.088117623067045056096 0.11245727424327778277 0.012215400821887007626 1.4248143117338882835 0.65176462142427682434 0.12337151563039262803;-0.10079273653183365433 0.15845442948398455463 0.83896263431235407193 -0.27258247829309290022 0.74051038188707296595 -1.4204592811896712412 -0.21851385253409455478;-0.10191578192263915648 -0.14628053677886571071 1.1053976675912788874 -0.57360060400330181718 1.5377427655241397986 0.23703531959741971913 -0.031319543780879560702;0.21702468100323982214 0.46846991765927020746 -2.1291272102278617773 0.81285764127083393049 -1.4072654337506824707 0.71388068284143957332 1.0884968361663835967;0.0043464054508379063035 -0.32644658714496832541 -0.2070408917994275011 -2.3335311283506925406 3.3243834447478946004 1.2446315924617279425 -3.270318862641647506;-5.6951068285512445044 6.3694130028619992956 0.78722991854378887577 -6.9093646424536174777 0.38919973466817398 -2.3700565364639079036 4.5667720195660193028;0.076029573147468526573 0.036797768913384508449 -2.0306135614333364892 -1.55253701455955051 -2.2234256255378594958 -0.32265257741148278825 -3.032077704247588823;-0.091077215464929334177 -0.48059239605422815478 1.0450148350035519673 -1.3081112550066766875 -4.0546352428539309543 -2.7791069662687384323 4.1699958447217717605;0.13110965409529676262 0.034087245372300366275 -0.29791134895360105173 0.43187479103149217785 0.18051007922207601419 -0.79713468516848351442 -0.070503281359033678766;0.19461940925959553272 -0.21677080777090690367 -0.087138316757684380898 -0.7449722634862802062 -2.3105694094139699324 2.7769044956739001861 -0.71456274906173411487;0.2457792539443319213 -9.202819682838498494 -3.1479768286362586061 -10.068415157410404603 6.4999992931374412919 -5.9767165564759476837 6.7492797731416942497;9.3776409816128207808 8.5233535407413860696 2.1365679046786918427 -0.37506121300445555145 -1.8936310830814027106 -2.0810771987312892684 0.7263677576577162176;0.27910292704628308913 -0.55496846955333445361 -1.4318634009248376593 1.3687752018647583174 10.971750118523631912 3.6102792530104821367 0.76728790416881753611;0.061945863869835311732 -0.17291170331101651803 -2.129323117953170641 1.0062436883941661137 -5.3606440278552520695 0.17981333955003189762 0.67845255526017045344;0.03023577374734415929 0.12150531113146421924 1.6514658903794652289 2.0623291068964917372 -1.1445008546200214905 -0.044967218707289362267 2.833814322531249541;0.029135309866127116069 -0.26743840161904081087 -0.098040593893518296342 -10.274046250509737632 -0.40657374690712583254 -4.0813206236541086369 2.1365919991598194549;-0.22884689331962873582 -0.64367134267003356385 2.5402189545182176644 -2.5320181458419761533 -0.85501995144271247806 0.24312337866408503806 -0.30600465366412882284;0.0017140461705222930031 -0.2871316715982952239 1.3937622441453070277 -4.5123360398923688663 3.2364546377990426329 0.55378911838537947521 -2.3846759185208243892;-0.14032921182480045941 -0.11846338072395995455 0.10278152327065434579 -0.67246856340459337797 0.72271396322146952418 0.33172683228515031928 -1.1879099111606696848;-25.464815576372167527 -7.2283470263313924775 0.11331682498196163356 0.15617313287285636281 3.6570852624374889928 3.0114617468931479394 -2.0930014347185577073;0.037720292560803454773 0.12371904304514147466 1.6739533441606508912 2.1253814026444786123 -1.3417063281309791201 -0.11439606728000548119 2.9100099028193233686;0.0072657758179361566636 0.23813746544688035867 -0.43132667702522137221 0.66781837319671200071 -2.5986325990212200132 -2.334804664999473367 0.99639143326136669909;-0.14180075261219207694 -0.07468570404337349089 0.1252046740856139484 0.12092840144605840336 1.2838754612401788169 0.37290739426080415919 0.16491636940969542358;0.2209419250662086609 0.13288326960534502241 -0.055949671506578022018 0.71406377783357100064 -1.0285398080357550654 -0.77368997563033969911 1.0461480887798635386;0.10010950394467225955 0.37682791197867498978 -2.7072420384983146846 2.2044133601138429235 1.5563544798239297151 0.13569001639172631468 -0.19916168589660257493;-0.2172271557090841021 0.32490527304506855444 -0.25813279472479250254 0.3282714199028873292 1.3741282035532524919 0.42818276424184092965 2.2791707818966422394;0.16566910311245844345 0.013014314258897201337 -1.6651257020731300429 1.8839035539390167617 -4.4158538174027297529 1.022991401794220101 1.5554845590837746983;-0.013539737583893129633 -0.31294932381966017454 -0.37759956513791365085 -2.5166703432323904721 3.4962346147723817325 1.3177628939447953993 -3.3132209394434188887;-0.11096246567113265957 -0.039602413750964259032 3.5216057568584346882 2.4554816085351172106 1.4368775008607315158 0.54497603171277342327 3.4434079157156003426;0.14948947862623382377 0.44096750194532552403 -2.6281807014710181214 2.2531112593695725721 1.3290640232493502459 -0.00052870649335816019554 -0.014937416534469633717;-0.5245400529279753421 1.4261294381376390383 11.322080616016419796 7.8396280881835274101 15.675148060331487443 1.010672614431653793 -1.0207045643843717375;-0.20739550134548240257 -0.55499613183333151856 2.5533817963397891226 -2.4008826959212674623 -1.0386861412583230369 0.15238579016966005697 -0.1861189017131588963;0.21078208352710875451 -0.027671901597360472336 -2.0836794004940295544 5.2314498947014369534 -2.8409685822246411036 3.0890460131668553423 -3.100066428794383544];

% Layer 2
b2 = -0.72161938933103542126;
LW2_1 = [-11.528995922775516547 -0.59281766072902231102 10.057464901528762269 -0.12418676263539844828 -24.352639705781584212 6.9500144517098210173 -0.031107396362626715813 8.1203518497271431897 10.1800911177995701 1.2145397351253695017 0.27832064006089402008 -5.5841299286325103424 0.011545279301513434317 0.46379604986910577535 0.96399105250362815411 1.9079796467205567545 -0.69258506848180290127 0.0071697394464443212417 0.01625495603565127456 -0.14166656399737423411 -0.24960499826455348482 6.2572570208918820711 -0.19224725371645928762 -10.470329240669139281 12.532157619977107643 -2.3762415148743758486 0.01449045423616888463 -5.7850608567393964066 -1.3647511652810773164 -8.8268876480997828793 -2.1204621411474802173 -10.848908938378233557 -7.2581336531546805091 0.36688892902379005578 4.9516424364238016409 0.31775938360386435377 25.208498619212384995 -0.011207542287349088125 24.795838571379011483 -0.22020887756776488797];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
