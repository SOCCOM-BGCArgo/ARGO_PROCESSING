function [Y,Xf,Af] = ESPER_talk_6_Other_1(X,~,~)
%ESPER_TALK_6_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:46.
% 
% [Y] = ESPER_talk_6_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.434674371767825;1.5263546186090819;5.8943567852515706;-4.8353544557973862;-1.6769788198658209;15.310210449419406;5.4782016809437906;0.75808651181962472;-0.19635500141770956;1.7178415294346034;0.20712396165387148;-1.930555220128493;2.2578940674222219;2.2313574973757797;-0.0079798284925630611;-0.47453437412141009;0.59661953560910785;0.058314193705072737;-2.2796006526145813;1.2179797112169428;0.70132709695355933;-4.7362797220760138;3.2696786368006543;0.031909768854555494;0.40201596916853882;-1.2087506260072702;-0.57421122337788355;-5.0430126555626309;-0.64462025089090869;6.8191620109837778;1.2569082037781438;-0.37841212457064033;-3.278515223471774;-4.6705233274830471;-2.3296701901941126;3.3150445887023414;-5.6073418719046337;-0.96342361298831303;4.6096560943962919;-1.1038292297741441];
IW1_1 = [-0.93094374969740512 -0.41822882062419003 2.5995246132366234 -0.60473331290717747 0.27665135551335651 -1.9332253757667484 -0.022676484262609257;-0.95717062358417426 -0.47844391609949383 2.4360525083236668 -0.36294076823853977 0.44862907723293965 -1.7071886143751105 0.0065267858357690531;-0.14518271265421523 -0.12232435535685136 -0.82434443401368318 1.1371655276746413 -6.8318862127966327 5.5281053832378735 1.6171117614286963;0.12664973803898996 -0.9883894529783539 0.85033075555578264 -0.17928485027395427 4.0745473236846887 -4.0542651679748563 0.8564373429799168;0.2138876168132508 -0.098752915628917012 0.087996174454316331 -1.0453246899519901 0.54604456180964556 0.47718771232330032 -0.072178398108543124;-4.5689478126398866 -6.5572047326122167 -4.9035512011467093 -0.20118323413882441 2.0954588155436258 7.6637187632289923 0.55504002456513857;-0.10852659547827387 -0.031998525920276681 0.47931557269237202 0.088484871916310687 0.10230883335837022 5.4919160870327817 -0.55009300439958575;4.7403340870954374 3.1359349613906904 3.0190828549860758 -2.2549871216321757 5.994382954317536 -2.5138366344322045 0.76430067013996228;0.31491231702133804 -0.30106368408683604 -2.4286912310976905 -0.17912856982283695 -3.1046766631806602 -1.0423700308838801 -1.5030501015490256;-0.98885228830525984 -2.4311798257858839 -1.8421655370042962 -1.4754583134730621 -1.0764951314815168 1.6422413504131359 1.2121647893512497;-0.1171503837555421 4.9243906386627394 -7.995990106515146 1.290048865866231 4.9258591787257648 3.3301977783019296 0.28918490936563851;-1.0462139010978293 0.73683174050751776 -2.6340147510448899 -0.43391343677208938 1.7774300578288058 0.61447472885462784 -0.043597539985146816;-0.12296542050114101 -0.077079437796818626 0.42503510395237759 -0.33290103552809341 0.10239004556115969 3.1428526612792571 1.544294098329748;-5.6970996556795992 0.60714299822890783 0.74975348933853003 3.0260508793469634 3.5037778391432277 0.38455117361640545 -0.85494661596806543;1.5988630582988743 -3.1583569444385997 -2.056972592451034 -0.20783145076337692 1.5165083534539565 -0.19117519514193621 0.080953681313677014;0.65677689054573107 -0.69275181835090327 -1.6415755250166553 -0.45292275592811765 -3.0188957135937886 -1.2269937952266332 -1.8199233140265154;1.6618776266927708 1.4028608679774148 0.11268263870518101 -0.74996964261346377 -3.4880743157474892 1.406163412831853 1.2503058775164202;-0.099022165255730515 -0.091777736254492398 -1.1436408034044523 -1.0963250128769817 2.3057896891207772 -0.2843710638840431 -2.8289446678019119;-2.6290977298746392 -1.2374126881125624 -11.564315527446929 -0.84448613411377871 3.3000630091018772 1.7164885058083741 0.91502292722765877;-1.1974633622543589 0.16482745486983524 -1.6142962548252626 -0.5519876347969388 -2.235793539244777 3.6390307137418652 -0.91010359956318199;0.98330130413065375 0.35413430441505783 0.77628872685641792 0.25262399092621507 1.1170291609032903 -1.5621127461589834 -1.0394245274155165;0.10492546384634706 0.048665135165402489 -0.79666515474464039 0.35507644654188653 1.0953426982738488 -4.947105111261215 0.10128018967992725;-2.0090264167412188 1.6436573679152835 -2.4360767276835733 -0.86393726982134122 -2.6707300571377681 5.6571874300888991 2.4839343486943886;0.62467348942770695 0.097077343364973201 0.755033743174503 0.23777249232132572 -1.4879993633763593 -0.63756842365557442 0.14993040010776795;-0.24084805888569574 -0.57409675221383782 1.0846465353653638 -1.3183417591131847 -0.36313878197125971 2.4318966007509077 0.90316421152566917;0.6875537334093218 -1.3260512759347212 -1.8001411803720486 -1.8265193336313006 2.6980905901902927 -0.69111915864143436 -0.84194125350969906;-2.4773377899886366 -2.3959101145992978 -3.7027569281342392 0.91552700332596437 -4.5505227306506635 3.0873589081374408 -0.021766539586270277;-1.0727341673711503 -0.31603455076447612 2.1849341704939556 0.92014547567907745 8.8804105742351016 -5.8577310714532222 -1.0702169797288421;0.53776286816170449 -1.3441618460692422 -0.93277783820395488 -0.15441598960475675 2.5622172498402422 -0.65356242491689476 -0.011955447504671968;-2.8316000034121926 4.6205591434790936 -4.4595484151941962 0.4435945506146925 -6.3016305907364725 3.2489471798784111 3.7184924133297836;-0.37395115397965017 0.51856944262409743 -0.84839189658351699 1.459558438376803 1.0223400869977486 -0.53738290133958189 0.15656159445215778;-0.58321684471084234 0.36206123728087547 -1.121607430205338 -0.96488123477442678 2.2761697662356357 -0.28542462963715093 -0.91369239187420759;-0.30105750462986219 0.68494320196561964 0.0077051662455382263 0.76584394706147163 3.7065828548083291 -2.5153940074183874 0.96149680384534575;-0.75330320870588008 -0.034798892465221998 2.914317594560289 -2.694264831961052 3.8109736695814327 -0.13414673565953675 0.67091419705715272;1.1519098133916743 0.40917860731292649 1.9446437923734292 -3.0817230414059376 -9.606060975721487 -3.1655631540708216 -2.7160950414379408;-0.1763462219890819 -0.11378085070659964 0.46556677221855941 0.22018090380458613 0.14166949501212622 3.7778043207218546 1.9425598137136044;0.1747195533468579 0.15178171456234993 0.73904928304097062 -1.0169745339824956 6.3342476000988999 -5.2299202988196569 -1.5803350686140767;-1.0499645120208554 -0.39690380526233077 -1.0150352322123464 -0.48213087400645721 -1.2449835717018713 1.7038016268174716 1.0726542844430467;-0.60880995313569131 -0.54261552248870448 0.39375325968286651 -0.72732653762405719 -4.6241351492258325 4.7712210133715303 1.9707725687619266;-1.4435940999348216 0.52207270334639466 0.73198543862930809 0.097120776855937604 -6.6531194303883323 3.1686749076711158 5.3998349271391533];

% Layer 2
b2 = 0.93357203372888742;
LW2_1 = [-0.64792199110519111 0.71436115347668572 -1.4680102774315387 0.13442722120671835 0.56772504350572317 -0.39844843186695245 0.5855895500217897 0.025664883156502359 -0.17911197900409481 -0.03394842124984717 -0.013915345021457826 0.10040221179354419 1.3247988123713139 0.021775073150024089 -0.047511181413432135 0.12483965424486564 -0.049753656112517308 -0.14594149722271474 -0.015946820322159428 0.054271140925783397 -0.56890835499225934 0.6084872761519039 -0.050967845183019098 0.31465499058403346 -0.19552185080724049 0.048018235902503183 0.047492963252695447 0.055507878382528346 0.16603786098116666 -0.033461966062214646 0.23190275508632849 0.28430195614176546 0.17693026420971264 0.066146905467012615 -0.026033441589751245 -1.0209528789524163 -1.7943611264086456 -0.63725585597047019 -0.26006098651968618 -0.051505786002034419];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
