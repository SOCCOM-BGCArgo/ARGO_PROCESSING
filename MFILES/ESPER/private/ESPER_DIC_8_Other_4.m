function [Y,Xf,Af] = ESPER_DIC_8_Other_4(X,~,~)
%ESPER_DIC_8_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_8_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.8719273506099141091;-0.30056848880146125325;2.0497426831613441145;-6.1098604247358077046;4.0995212795960771501;-0.30575754571975893858;-2.2289043755536490643;0.33265996334303110649;-0.43723391698559249674;1.9485432146796044517;-0.53625018102389743202;-1.1555493909944889452;-0.22338983144433438577;-1.1560676510462664091;-0.32133926127465406442;4.0554530168597571205;-0.79965798315782998795;0.28220429537548441523;-1.160649455395479368;-3.0802316265502183157;-0.12585858367249622147;0.6817255808200731737;2.78526746238372791;-6.9315335249699643327;-2.0870339405931837007;-2.0244775243122012931;-0.38580603387022621709;1.744564873153306106;-1.4797663815565365031;4.1151715093859344563];
IW1_1 = [-1.9034125003462327719 -0.2337879635994017935 -5.2384785706599972244 0.12729117863656219667 2.7163689783971776137 -1.7078104114157861559;-0.30773490138073983369 -0.25053578885971100609 -0.69823068921069531001 0.42664569873294866387 0.063351147600167939666 -0.020955115925174676306;-2.9760620487128686129 0.82694726643849669756 9.5965551575864829204 -0.89834767476215560134 -2.8404539399783503839 -5.8138801512863613752;10.044731944093824083 4.2919810430070315377 6.6372297274367930697 0.87670059685643586533 -2.5674852408756692057 -3.9414577597730220404;-2.4480012897869025679 2.0443548897863719205 -0.43329148154604268939 1.6033543595028396656 2.4523355119558694071 3.6085134601134938315;0.89529767431057349913 0.092352712439164597047 -2.8709895534275342577 0.69640411534446688968 -1.961448916082644045 1.8321972963429411507;-1.8736182918491566252 1.5050580557105581736 1.9422302495192631522 8.2800151560780310689 -17.921069476971315027 -6.6036434405217798727;-0.00030314875147640610482 0.043156394981544131395 -1.4474179568233522808 1.9880912867559510371 3.496090856740648789 1.7813635719390543688;-0.51305649373807593605 0.81140304629905912748 -2.4696732668105605413 0.61203181626491431899 1.5538247455145788312 0.054611214554109457908;-0.54377071927747755442 -0.56512078524730868789 -0.71700129774251486481 0.36633220176174041693 -0.040681191587527872067 2.0571543947999093582;0.8240999902121807219 0.77141872334362759922 0.2372374717306518499 -0.49164220285476456507 -0.46747623935654980531 1.414881403297213236;2.728795358320282638 1.9954898074742675185 -1.7367252294726198691 -1.2119882422980952086 3.3259214137968937663 -1.2643428356695063375;-0.33047109738328744877 0.79996773980442237306 -1.7829154338555757153 0.51916768632894361168 1.6333042743323866741 0.21948775689224089835;-0.70813357819043554198 0.57229135629502048133 1.8289329875742117437 -0.60557668406589892918 1.0328990727643410086 -1.5470246028476055677;-0.42976024825363962067 -0.5722538264029332078 0.62364995767984410246 -1.4122922643001960541 5.8584434213481957343 0.96193305739674939137;0.94302168606805714113 2.1846566432497485089 1.0467252074114514748 0.075749237083628906397 -4.1920300061200004293 1.6400903020245465314;-1.4722780646314812536 0.32422988953519793487 0.39137365852100458596 -0.073394140439826227595 1.5074174393682080453 -1.2730913570423365577;0.29824869731021375063 0.28471756734531106225 0.19251234521563118096 -0.06388376071163272274 -0.021858291178435185209 -1.1515681108055837445;-0.69556982235567288431 0.55419334124264996166 1.826797609727639049 -0.60825721387285258679 1.039054038252462675 -1.5626409803618075411;-1.415830810484570712 0.065058804533934241898 1.3424892079756292063 -0.72391444251949477184 2.241981862653264379 -1.8279171251606367576;0.1997989936754687168 0.14469881464181003072 0.20798327490113227567 -0.16098257496532114574 -0.25606160547389950066 -0.092862289592396590754;0.6205799072178211917 0.36561144058531802603 1.1281017725575142041 -0.79438474343638165731 -0.22123166259289589464 0.20468051040704485222;-2.0908481107456773351 -0.94567963662662202218 0.17634874249640022925 2.7524667006030312244 -5.699274687560175856 2.133407473729760806;3.079502588202141844 -2.6356643683882432505 2.7866015942062443145 -5.8859795997807049517 7.0111119519301023928 0.24219831346066938993;-3.0122792131193585341 -2.3848960133678693829 1.7964915369119227595 -0.059258478148501984861 -1.0286938844362398804 2.2256653006472975065;1.5017040748727921162 -1.8790939598172720082 -1.2650887034246818263 -0.30873205886935617404 3.5021388680672518312 -0.21333314995616600718;-1.6951096456165823945 0.57153596189934097183 3.0043185878020532975 1.5155041681934391384 -4.5242881827958454366 2.4914373193917906946;2.0820473181800922546 -2.164210841036967814 -0.82706650546882898301 0.48774935776183564462 -0.72163883003702522512 0.53382770113440847215;1.2032167934183455316 0.51865872074831331773 -0.41702656071385491021 0.50740576114756263948 1.2946380220026605379 -2.2841439375496603859;-0.57659861174512849757 -0.13043619117331387014 -1.149083581753673533 0.56076149413419995593 -4.6706936605297091347 5.3751512076794005779];

% Layer 2
b2 = [-38.864975275866385118;-38.971758838021550275;-3.6873313882539746622;-147.57413533852573551;-28.546458055937794285;2.8329784588950595037;-47.37367815792225656;100.10793423586437711;52.667832003370840255;-14.982165651026818409];
LW2_1 = [19.310274786696460581 -118.53492219542998498 29.831209481780739168 35.888078406901215089 -73.786513309016754647 81.817316069162046688 -80.072898178716656048 177.79297738290267716 -76.424005351074157488 -113.92765032328030372 -44.575642035881180902 -68.499423773448896213 3.7076425501122969308 -174.92274942215635747 106.0134078688449506 41.008737869633023365 -60.534195427154031677 55.724378090930677843 98.664297612087167977 10.704414502206526905 93.569236534046694942 54.671933537929149338 13.741991556436602195 -80.303653898104244035 -11.826095325764992339 -114.64821719934130329 -70.732771527770481157 -181.71512391597738656 -59.737487641468021593 132.36693862323042481;39.448423325053319388 -70.677719486871779964 -19.246598337063538509 -15.17766964193932111 113.21520545112136347 42.905941931575128478 11.759174554547108471 15.716203629746988923 -1.4552685033466827846 46.82712277422634628 54.498920253908103462 -16.400871423239991032 -40.212135871715702251 -59.402859494965369436 -20.121394433678243985 -19.897795098622630405 -28.382025560385727658 27.572175359988154497 60.46873406596643008 -0.070009162543125086353 32.128207170307270246 9.5928131869598125547 -11.015776503321887958 -32.82717206452756642 -7.3420707075035371858 47.12039951328921461 34.054283693616532958 22.811310354923772792 67.668592510185789024 -31.127765851686909571;-0.2953883427403471984 -9.4678583132745863793 -0.026187145405322721781 0.023169590924025495332 0.12291160630986243396 0.66284702515909521559 -0.045378668575167417643 -0.48841904456989398975 -0.90259145368134030551 -0.66252006201174540312 -0.16928549914170656909 -0.37377680378187078114 0.72763647613917015189 26.259941629018673126 -0.27353927418391910109 -0.11249434265203882288 -0.34484706448528151812 2.6148903743841809266 -26.375751900774019987 -0.64739789043193229912 -13.956886344156684387 -3.3492352041065625023 -0.37457017762201122446 0.057336690803068461608 0.0037541667681324640722 -0.14308583116026113435 -0.080329007415641570655 0.061576346454372432593 0.071642201802620833484 -0.30708957306641149199;5.9333072340722052829 -19.830172579212671735 -3.8369996154979588709 -6.8665501883467214839 30.134284453783017454 -51.016916170716044121 -5.5718732408608229179 13.501247687728199054 -26.744704386269134488 54.288012787839889484 -17.597153908071952344 -10.767315720714771388 -20.236601386445709494 13.598519682104807771 -9.2489736251551786239 -0.80499890643413962721 -16.415639673687895339 32.537771262689275886 -45.691308029727821349 -22.959263162832606042 -1.1947763466149470268 -11.863513811987296265 -29.806174369552397962 -7.3244669667699113802 5.3041223184972166038 -20.646834623418431676 -7.4361767692120270823 -24.009227799186160013 20.851510585643708851 -8.9841066542258989358;-2.5149696911488739204 -57.651491155240535136 -2.0951287770661131127 -0.46752439381435995092 2.7388700831129351165 -2.9704239580062639092 0.7798997615758819224 -1.6428266750617608327 -15.730039440391621497 6.3957474974321470995 -19.750741655609839853 -1.0322430429679765318 25.123704025908541126 -73.326902190150946126 -0.20927426250052627577 -2.8211290776677744319 -11.451743336385343142 16.305982311170566845 69.808380076720467855 -7.6878169663696356295 -0.91221267107995940293 -25.050298991986007735 0.39742964953090326174 -0.91252757147486651679 9.5655760096955742 0.43845420858736283698 -0.48752145285539666419 -3.7452481337202896405 -9.5431199072940966488 -5.9998761275002596705;0.063199762354579108736 10.082296839446733827 0.36379311439762340719 -0.083050063732947917994 -0.52389031241317751686 -0.70130085909004702405 -0.017496678999284552558 1.1857086327396619829 2.7105908172647898979 -1.6831148649630804925 0.63641205700105318854 0.71486660384842115601 -2.8633332400645818971 -6.9771863714259589884 1.089148413699139395 0.21023245307177756969 0.70230955481460899392 -0.0034553453502265850036 6.3648766794780256006 0.49116969482239253297 10.606616232280801526 4.7491806242822622863 1.0158549085659556166 -0.097339957779134900218 0.012977756746698576248 0.30231637489902968285 -0.55295709717461316579 -0.032035095255646330037 -0.88913832421552052576 0.96727875076688607514;74.241101062122581311 -25.401271089442516882 -45.623388034408861813 -36.720498676245284742 5.7647625531312565172 -3.3608606996734580186 17.924003627858926535 -2.2715074819598424227 -75.669282051486462137 21.425858310578480115 57.85116454122798757 -58.478333368270732251 27.307244209231221532 43.078945427575902727 -85.292307937967493103 25.077317743224391222 49.176397743930657214 37.873504871685319983 17.211301898659698395 -33.120266435676384731 49.478324673090327224 43.92203878383758564 -30.317435096892733526 -68.288928173476406869 5.4874299908433634698 40.468492975864123196 -4.5958087881961295906 9.5685724662698152798 9.1191311334658013976 2.4354198870917911357;82.754394602307726814 -22.668091201751565222 43.542299486771042893 25.419903443314037617 10.756048900180360306 203.64520553889713028 -4.37796538798509971 -52.627222108207739382 33.503440306749887156 -74.584760183387800225 -50.322252079942600744 32.535367521955457448 18.173455946648608972 -49.188278847339461208 20.985210203842790122 44.890817456105892802 71.638833046974511376 38.010087373246690845 -136.95321049023635851 34.190098821189153 146.15370405883862759 -11.565146170147471594 99.534600018395892107 -83.780343455847344103 194.6519706856365417 29.651519190664394898 -60.485623754906526983 14.463225504335984084 91.283878754245861842 51.410254134475835031;-9.9667116422567350043 -1.4089115029671306356 28.047471255120935751 12.728459610470698848 -59.265071737224545245 54.901894277315939519 5.9298445529050045621 19.07246988910375407 13.067790732249365604 -20.531447564174357012 -53.615681635795496618 -5.4469304008895731428 -23.555982248161480896 -27.608543011504718123 12.443267954583424384 12.850412408475349935 -0.32086040892500233834 -25.961541348606111512 22.440805735775832375 -11.338266481154809284 0.18753593058264314553 3.9480511925297081532 -13.616856748060000015 43.746008183944553593 -29.967436734404760301 -87.552817919337527997 5.206282944411854352 10.65771426516132081 -47.590154547837734356 28.377547682095681125;-3.4400648100753694614 75.052813460517938893 -13.394448633922763747 21.061225167650501788 21.549429680184285729 -60.095344593150805679 83.691222795978205795 -63.305206432331914357 56.554517299470575153 103.96069997106602045 74.438746759925521701 -33.883671809500569339 55.198815842746995486 -5.2833463075063784586 19.660134734833611958 3.9151010022434307167 44.017305111674481566 -25.891400115154937112 18.598375596420947176 10.057524611639870216 4.7529268692301842592 90.715376206863226116 -22.897878469435426041 19.954040101142172858 3.6955231080084671724 65.65105039300422618 34.8861397842430776 11.553096279088897802 64.095907528736759673 -6.1817823996029321876];

% Layer 3
b3 = 0.21932903022911517943;
LW3_2 = [-0.0093579305899367491717 -0.0079811394514594496269 0.90755684066715647251 0.016500887708694938344 0.059974129595602533593 0.3238563956556377299 -0.0093769902179320057528 -0.0079211566299474799741 -0.0082312484668060677956 0.005801109605414572247];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
