function [Y,Xf,Af] = ESPER_DIC_10_Atl_4(X,~,~)
%ESPER_DIC_10_ATL_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_10_Atl_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [8.6359549524861538572;-3.3225202337598469526;-1.2588007417291904311;0.28709284390335598758;-4.4793397547721403029;1.4922747496256589805;-1.4242836128262506001;-2.2880402011385765348;1.6022397725169466032;-2.8135995087352601018;5.2919681633810107257;-8.387110259330174955;3.4981475828767938374;0.30885391664846195692;2.1347935000044802045;-4.0683666652108483319;-3.4360897119023516844;-0.11141775181946059203;3.663819580887409888;-3.7563068826385537236;-7.6830179673923222339;-1.5009744898577812577;5.2676124920948623753;4.4984581274978978627;-0.86157573759397998447;-2.3782768873843300739;0.67924629529871383138;2.0860534168435722613;1.6028086605730333947;-6.9499594449102399807];
IW1_1 = [-0.57430454274479258991 1.583443991580088861 -3.4343336545103597679 0.58968291898275593255 -5.9296399739526313155 0.42207430898367903627 0.32527128856136694468;0.51059656718130830289 -3.5605233897038046642 0.18248438725775839586 1.6746835472169538939 1.1581137049429284236 0.31027244218777422224 -3.7283237784852323315;-1.1998775547803126607 2.5300518917462841983 -0.47779831469615735573 -1.0051996019987377018 4.0036404057573946602 -0.16810267795445940631 1.41340122372606114;0.18791862535815034851 -0.20605951413009113149 -0.030017041209711995547 -0.52267555648118824152 -1.5366600412664348507 -1.9429797364749805677 -2.0567824444663269645;0.50042130911489790535 3.1809995780703954615 -0.71210523187249497035 -0.1215870329913346648 0.19064932598773609573 0.84046690449252114963 -2.4711616089751777814;0.98598954773193425716 -0.79603550210733264869 -2.1533367953442659193 2.3657327306913402687 -2.3852125978323210909 0.033022795233211249544 -5.8680734996419996463;-0.035955453885963314931 1.6510291864948518636 -3.4742674327231521936 1.7103933552874781565 1.72109985919240982 -5.4412499479422251625 -0.073113709139279406402;1.7927704523511769352 0.82836294424270240366 3.9622168579626433349 -1.3130870573120401179 -1.3622946952155869926 0.38305942228691614027 3.7607728112977505397;-0.44639379512122201454 3.2983981957975583299 -3.225966982563289509 1.2567015078435230802 -4.2773164449158187495 -0.76288918147573092643 3.6405591726333450531;0.72266030403304504226 -4.9064575031231081326 0.96331827625420107797 0.30291699050053222386 -1.2477672566361506235 0.95423318565436043848 0.48815617812320649671;-3.7917092332971416013 -1.1291681206833974471 -0.12950476564406859792 -0.33882278815746924572 -2.4075268145187558311 1.2574729085847982102 -0.23823973502779738354;2.9178979764783008477 -2.1345247446318924567 -0.14172713023476821159 0.61891360228137359822 7.6143680303382659247 1.2120934539604462099 0.60783309485439129816;-1.379060329132546503 1.3521640844499962508 -2.9615101329274171604 1.0674894624205428784 1.6535093585259521554 -0.55828329233816254007 1.5979660784987392841;0.46943196673718884382 -1.8098344505632011359 -0.81373685826563912915 -0.58073582276503865618 -1.2133412050757921286 0.35880783791419429418 0.70765153027267990726;-1.9954050390777937629 1.179296556403741203 0.15249310324501966218 0.67641113429693278114 0.16034613086658891512 0.46893018008944459263 1.2018967257190198428;1.5369000634524394577 -0.76337337446134179153 -0.079892959423513668082 -1.2616577980445162765 1.4102358859798103108 -1.3497331340877425365 0.87208676199896251191;2.0049909594388894973 0.2748481685862863011 -2.5147897512544092891 1.2399926715372617814 -2.011745222684115042 -0.85707900220514587897 2.8055149935015730733;1.2410544925490116785 -5.8280606384941204823 3.5220552369562994066 1.7695635975019907704 -5.931442388463424642 0.92568640451607786535 0.94950623079071772015;0.89769448045128430458 -0.27232583969126522572 -0.61733730413643328472 0.3190320244976971864 -4.14279354791133958 -0.92076554604770521895 0.48902323681027309865;1.0698908012205650131 -2.3556922911170512513 -1.2122240372927259866 -0.4108704895084100972 3.2380150427559515336 0.77634402766007104546 0.99128201666052229157;-12.650561899432448243 -7.8208442629034857774 -12.325674701086342111 -4.8993267827315918339 1.2775717341202303956 -0.66430485444633669001 2.4362364639427127599;0.42454674102602724117 -1.5171629576684271257 -1.9410580041149851915 0.17684083452939489134 2.7782090869453863746 -0.39000626332351651104 -1.0374859566488376927;0.80953354686810463647 -0.26898903540915347632 -0.88154645666991715558 0.29581955432850171039 -4.2128418201768829121 -0.85417505254534431547 1.5184451707418127331;0.41733158487345323184 1.5226953020319420329 -1.2501174969393580305 3.0557691943016238589 1.0375036256859748729 0.64973538186562995733 2.2277560036895569517;-1.2879316972515348905 0.8870957199781150937 -0.39803438488198017442 -0.48944678514851774898 -0.17026774434378535994 0.48954912036605263692 -1.4242556816171048073;-1.443876302164609049 -1.1936196699836045809 1.2099603869439516934 -1.3492806673865875844 -0.50240237190089398478 0.11559943595446439679 -1.0543455412305966501;0.15203699649252497283 0.52082343629004679286 2.0096385174048285727 -0.58523606880079503956 -2.9439314483402023725 -0.54588960831280253228 -0.046798820428919793435;1.3971910661644377782 -2.6181139089194149783 0.89973044444689653787 1.0063171889624695776 -3.6931227967487436636 0.24333140964029595366 -0.40126894319132566658;-0.093232665949862930654 -0.27890276700327154558 0.18833465656730061233 1.5790247902251919321 1.3818696275268702589 1.2442427133226734437 -1.0833614438108947198;-1.3585723869115928775 -0.20374980836933651029 -3.6172477316005529069 -5.1590812672614978496 -0.020378101310382666644 -3.2408057604722411149 0.55728661891644015736];

% Layer 2
b2 = [-1.4215630522228093202;-6.1392637245280834435;-3.6367627329080418619;-4.1573911699423407029;-3.2321103576488638964;-3.4353186592420787981;4.6974898709846666378;-2.076340129938453849;7.1390367062317885427;-0.38326741456311874678];
LW2_1 = [1.8575243982510507568 0.81375182119951006143 1.6733450293158340649 -1.0003059795618571837 -1.0763468426779294607 -2.2234282784982459802 0.37057511439386880969 2.8925895560970795728 1.3695719794145622128 0.55652346669870023099 -0.44528715993329209821 0.40221028966388905346 -0.13295460616132823151 -3.6733952067238573314 -0.019768930310073540291 -0.12931659420594907028 2.0958471265198537203 0.3982345081346991833 2.2202182302838542327 1.2693604363813459912 -0.052575168202927333172 6.1331158841887774003 1.8361723103032874249 0.40519450259412925774 4.6973241748207819057 -0.58889272874970766125 3.7318583023579319224 2.2903995755246464583 7.3294296584415947748 0.15316523985335497859;2.326905587755809357 1.4965470382153100992 0.85246909507856882815 -1.1564594338482740987 4.1068989715459931489 0.34850523577452457991 -0.46765969855498373819 -0.59939097876601521442 -0.70160832780150594878 -1.4900482344105963062 -1.0316973081912919064 -0.5164283650687444549 -0.87658055810115154127 -0.41694702346656414838 0.033460726112489971862 0.7876150031991584477 0.57831200116259318111 0.62570862939328597552 0.47546258351125592068 0.78800976322349980396 0.51623738973333677116 7.1281221517252237874 -1.1560007821003654982 -0.27504429630337862145 -2.0864415116122461136 0.17987102131728957555 3.1967047168840831972 1.7582435946659620285 2.6482075194811978136 -0.44971833372742636703;0.9729215132165071056 1.2462464419371095392 2.4158064627527946477 0.16529800193604318737 -1.5004044183451563654 0.50848171145299525531 -0.33740707639428119125 -1.3136412144567313209 4.1564335644286636295 2.8168133111737496677 1.5787521904635624104 -1.4387794840224026327 -1.2121918290888615832 -2.3926663849882752189 -3.1476144662043554767 3.0243635188435664674 -2.1584873796287582515 -0.46219840702556158618 -2.7954413774656035052 -1.4837599901430120752 0.17709194053253055068 -1.4616102123414260738 4.2695549331194966314 -0.20143492691530784366 3.9687961402298261859 -0.83840262879452198685 -0.22402152157507235208 2.0389935330262889401 -1.78505313640268648 1.3396699796452293807;0.14133869751085909039 0.40635237433078663649 -2.3691034315049965819 -0.77799364252860603308 -1.5395280524270862355 0.96141667920159767924 2.1382823942591020483 -5.5750497716613223176 1.5715710951456711708 -2.2178601838175890926 0.43325131186979082276 -0.13181936389725332215 1.5881711214203237947 -1.8055104023316277395 -1.3278922688798366902 -3.6582931451226485819 1.5671146467219920773 -0.68798206765691072295 -1.9860533205283239511 -1.1669140439603540305 -0.69251061363389698755 0.85538282018356703862 -0.85391085982361591977 -0.49806547722370098086 -1.0336609484732304232 0.54888804156231918441 3.1602413483788174275 2.649470795210206564 2.1239429211685569854 -0.59295628514453313507;1.6070049635510812447 0.52145752986856919176 -2.7706892404273935071 1.5945520547504068443 -2.2565378543232053055 -0.83402680667607975717 -0.2397577254216655962 2.5489738830695491956 1.8750617198383157103 0.12619040593650393545 -1.2275062375310925589 1.9210537848369653169 0.93391695048968903503 1.1757801324070913385 0.19232309176861689393 -0.11079193059857714299 -0.019036040006013998926 0.0028497474552314555271 -3.7190969761714001152 0.41325702367774219681 0.36117471222499508698 2.4954154588681327631 3.3357343522392497448 -0.38258838148160734249 -1.2513930826064350033 -0.73612312631566867438 4.2328100889805444496 -3.4774653097052707906 -1.7045457176813709754 -3.8734416020568103178;0.022008719360788880914 -0.32731012238267598313 0.015834230521639097722 0.35884901271778890663 -1.7651948339648775299 -0.53213952017094046099 0.38059940496996647052 -0.61206868293314964369 0.022597615347417714105 0.64850596751132316697 1.9744669764123494726 -0.64952742859153711485 1.8466021899848490406 -2.0467752978512669948 -0.0010790728976679229978 -1.3925063669999433458 -1.4289692339425177359 -0.27252545284260337732 -3.9614447101724645783 1.3280782423459425168 -0.16956705039176894756 2.5467606834629386015 1.5033788952259994343 -0.19252516536088806753 0.076419465066399488995 -0.69882196723179901277 2.6747465928388773904 -0.38264471217369355749 -2.4013911753688539363 -0.20104046981346315737;0.18518895277749192196 1.1708808092243947474 -0.75278778598702233982 0.4057137927684786316 2.3394742040800666771 -2.8633192526752031526 -0.50838811636524394721 3.6823665075269915725 0.46420061933391731923 -0.40703846908756491363 -0.72878556102254998805 0.86697418759331734694 -1.2769990277952336655 0.35310525540228138164 0.99356016308477346222 2.0468055984138051606 -0.036151501172681739515 0.41140970198503318267 0.010603673766503951548 0.90069638484926162203 -0.060802721209215454534 1.7019997339040511264 -0.33564527146869166385 1.4075024781694571718 -0.92742754106364710953 1.6705054825513006023 -2.0735562708080763628 -1.9862405756539960322 6.612581945887138879 0.6723281513795583697;-1.6591451870196844975 0.08007971883272241298 3.826655062191188339 0.50668698309219184495 -4.2785868794581833896 -0.17180599646559871485 -0.13948188140044553984 1.3108375381640713364 -1.0734090577130597222 0.43438778980739556346 -0.92869578689422127571 1.2191845279048778572 2.8201310846215128514 1.1760793209080966371 0.085172880867314726405 0.35025299997808589936 4.0936052827811595378 0.12908663998403047124 -1.1850269445882015695 -0.59002035591601997844 -0.068610666788174456965 -0.85136906349433127961 0.037159453722394007735 0.20234166730301267334 1.1935839861216375191 -3.7603294820320720682 2.1156660931181008323 2.4952660574687079986 2.3744625284190217229 -0.34523877205480441033;9.8533190145466864607 0.69841387272227284377 -2.8399989300911867574 -3.9709080849960214366 1.096566852411447357 -0.64752236630081216884 -0.73807673713662103054 -5.1445050775640615015 5.3763555050648719202 0.53380139676684934535 -1.4232872655827655262 -4.5370768671804784233 0.62810379672431415621 10.321927582947825641 -7.1586750942767389816 6.8211249713426029828 -1.8513532222831325935 -0.13713173023906538583 -7.856367477816015743 -4.2080288016566562703 1.1457793691893727317 -4.2590441994831236272 1.5165485379809833244 0.72416898828038678282 -2.8562786928794694497 0.32820394206093511658 0.54483385741245182743 -1.6113493929742466193 -4.4515497401523420606 2.6287223763195224358;-1.4101898747713481619 -1.8329776812217275506 1.6485723254094928336 -0.06938527244532548266 -2.1365404014108317909 1.2859555979206485077 -0.15221291165013953184 1.5217766404894570442 -3.1350219838865327482 0.29203431803908497244 -1.1746697992051495785 1.0295168706422006544 0.16425905950175309633 -0.59130253855539882668 0.517197334289997257 2.5666867125806751559 0.48256790261021736965 -0.77830372744789388939 0.12649369843445715245 0.6510205729261275831 -0.42579511091212057794 1.9178605035975326842 0.84463053875978955087 -0.62446275543811957665 0.37225909281405655804 0.61912647211759974653 0.40646093428485891019 2.3287414109296054043 0.25835545412235111362 -0.319307506626297255];

% Layer 3
b3 = 0.00050233067191155400706;
LW3_2 = [0.033284435292375263993 0.036533722398095790085 -0.7476474285446517154 0.022358001509747892077 0.049819580011889852411 0.056773161656915878404 0.044064784158418697502 0.058802134441665841746 -0.0049318560578685815415 0.025846373724201582994];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
