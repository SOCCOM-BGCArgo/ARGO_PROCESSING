function [Y,Xf,Af] = ESPER_silicate_5_Other_4(X,~,~)
%ESPER_SILICATE_5_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_5_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.9063817580514115235;8.2754220023355298252;6.6166813837221463146;-1.7356599214222554473;-0.12650433195272370313;-3.1923674936750314757;1.2088826476814136246;-1.213045698161785424;1.0584669619817206332;-1.6288402740836660509;1.677320834622399337;2.117605415362435739;0.7644740263048948048;-1.0631924854347138965;0.0425191988675266766;0.87349666331619812976;2.4575891883936962223;-1.132397004455809153;1.6235030624201693961;-0.64950618882936184129;-1.6595440814802708829;3.4671127443516294164;-2.4292340820670932366;0.21256801258245902608;-1.6337772744215728338;2.8943274003562859953;-0.82031003522706913422;-0.44568449813738331144;7.991284731240592798;-5.6933727837746923583];
IW1_1 = [-0.18695650901855778714 -0.6348291805901516982 4.0549778761596231291 0.0041119182820225589486 -1.5830075803232581677 1.622889493568929753 0.47381019551560510372 0.098563878503400703668;0.15733169123482826368 0.12700345106293342567 2.4997217055363072369 -0.41650927608674581659 -2.7491854798974153518 6.6035609276822313518 -0.21901641490402640189 2.0386856795146903742;-0.99076055628129233721 1.3554640352621911692 -1.0183939355942643878 4.1025693299306773554 3.6441069115757858121 0.46587794829057027624 -1.3706694007912336719 1.606478001202509498;3.8662918855386765316 0.50855215814571064215 0.038407915893419741771 -0.33446024095585347169 -2.9610235643125357718 -2.9281251609659020296 -2.7285053074503964332 1.4008674204263322771;3.1595607339892919363 0.44095066287708295505 -1.3285537330463514927 0.20330631032621801491 1.9898116899054527629 0.11648229709791091402 -1.4086870246494349601 0.67997614855511023801;0.033403053166786919603 0.29173752329968005714 -3.9887448569520080888 0.63224591398686103005 -5.6990888429012143135 1.0920645077883399665 0.98167539872204279128 -0.38455659462873159615;0.096939202266114563034 -0.35981634569969045412 -0.63055148497002067032 -1.1180378628133973429 -1.0349717808593259516 -0.80480408150886151297 1.4494269040124148074 0.041293060920404522918;0.06205826528911227713 0.16340265117183147558 -1.3578972732038057103 -0.66006889029281867742 -7.0746091182999792935 -1.0718137489618886349 -0.50563502756621647727 -0.14363308627874343815;0.0086633830255486276445 -0.34040224759359932749 0.4875656807612850363 -0.50895229079482506851 0.95017469857406922085 1.6124580533858368092 0.36095557449595083721 0.74934089473766296585;-0.070542252929493218239 -0.11074782736887617274 0.31884902625047928382 -0.47591514611220836484 7.0226961480283973671 -1.7432588125738339713 -0.71273823991462070815 2.3591492923330221743;-0.19600283587944289376 0.34841897389324827383 -0.40431094293935887496 0.94048917495332673422 -0.21811265285598122055 1.331959171682528309 -0.80712376458773660293 0.69709133062113992629;3.621371090200490972 2.3054621856420807191 1.6326942449389409973 -0.056958540361694301457 -2.7527599752560374391 -0.86728972830416839468 -0.49636759234900124094 0.53426448559440886665;10.66338536873346321 1.8248351253151420259 -0.13506767614434780911 0.3525084778847129563 -0.28405970716645906338 1.4796559733997778352 -0.22162993904910449627 1.7895087793977142443;1.2444185894986115049 -2.260299609746331484 2.2564409823885727135 0.23947938306476129755 -0.27389334177297736117 0.17972570099073423289 -0.10934979320710888628 -0.66459245770486319316;-0.82939561251424942512 -0.55035774923265856629 -0.97248075159929114886 0.14928205294257346214 -1.0990893331770024144 -3.072357926422067731 -1.1024697381730568235 -0.60475982431869590439;0.12126516045529732446 -0.79236095769987902049 1.6063763945888513973 -0.25969273255219704755 -2.4428813532906916706 -2.0768912069101017615 1.0121191831092706259 0.26955373621826878017;0.62589384791675983788 0.36051946323582623188 -1.155536433949783337 -0.041388210314601950324 2.2029029508100537171 4.1732431686242081881 1.0646317797522586446 -1.4889707513826302421;-0.10927015968943772084 -2.1845961202328769701 0.8431584920359919133 -2.1081265970366285245 0.27590729324985552307 -0.07746579087890519133 -2.0425879314286619071 2.6356173899004051719;-2.3674811701377498352 -1.09362499144732217 1.3823092344991776415 -3.6465106613562490168 -0.50887642892881779222 4.7655542207470595883 -2.2695359718854759556 -0.34900695921806246247;-0.063570715206500316707 -0.58521291367201255795 -0.86310822313097168568 -0.58411210122447321247 -6.8084106229074432548 1.7792929281875184966 0.10344372263717073468 -0.23313428156038054628;0.27358669943626451326 0.0032146395435163439488 -0.85602405996821762102 -0.72214947232112847164 -3.0481819629709625552 -4.0604402335128542134 -2.1102472252671424791 0.19833231655425498374;0.10872599755329975801 0.061810234896954502348 2.2597565729437842919 -0.71436933906415422957 1.5704155436528524081 0.84704120910943248024 -0.74963587758086558388 1.8848640922284811694;-0.23975278877025416047 0.26385347681899595784 -2.0442623871422171966 -0.29462481617993629968 -0.70899827086184774583 -2.4379451489271346531 -1.2336553161316488048 1.0179953513667383547;0.080043203622924996576 -0.069434461316449716528 0.6481180153257369847 -0.17501764672284422786 -4.4014990875296042816 0.089609632057621929624 -0.27672892990475206343 -0.11368876123582299931;0.92594930577507295055 2.5362816688301617063 0.38355481181923184453 0.80531189215697585038 -5.171548790257839201 0.52304138448879877732 -1.1278428815607794977 -0.77628247934817939946;0.61896985883496780101 0.18055368384425238282 3.1601163201025892491 1.4112905239572643978 -3.1336993001433626205 3.3318990285001843787 0.21887656474289113318 1.0559375696808723788;-0.48315750687869341018 -0.19147184808460249172 0.044271162906250730029 0.23421394811244941603 4.1074956022166864145 -1.7099320665737500757 -0.58227132139467419059 0.49569658260384558135;0.025668165367663073329 0.19025464303687783518 -0.45826257939269776642 0.50887168538401728046 0.82825194912603206099 -0.5153819020231600323 0.42162128583455915631 -0.23628311493651787956;0.10357143627209933201 0.71994354644130498233 4.1186653105536308317 0.61938825495822658063 -0.53918290390784229249 4.2681088910521616242 0.28596093114949111547 1.0443023454277742257;0.094002620715499654591 -0.35461741272291130711 0.96623092045971026298 -3.6993135532743179894 0.1071257419616977874 -3.0239411458216638451 -0.90037184198335584728 -0.45856731401581463103];

% Layer 2
b2 = [-3.4191840019814829787;-6.0650864225539793395;2.4779850165262398143;-3.1805383610288271434;-0.23210246756584942962;-2.0971088205997481246;-3.6867638358821523958;-2.3614612212309267214;-3.2336296532726538366;-0.92388805440987231687];
LW2_1 = [-2.6787282491847803634 0.15891659690487902612 -0.88167248523086672041 0.83127464673307249754 -0.50505025843979045597 -1.1047991382277784211 -1.032036521968368481 -3.5163050599639289473 2.6086893841152942741 -0.60464602434290615207 0.7327773683374549929 0.6239304591246711551 -0.44287922568975002235 -1.6302661316929090152 -0.67130139109615794002 2.5130387031326089087 -1.7371215237345956073 -0.12369657827309875342 -0.17709202587321618005 1.220480064339090065 2.1930102577389174456 -0.60240280197867257517 2.9772610070606400079 0.20826410564282987758 0.21520222564977231627 0.14460585438170292516 -1.6466568661891416436 1.6629744120334806201 0.2742906795570956846 -2.5114411531348657114;-1.2543085725177791634 0.32825856148811616286 4.6314452403257613256 -0.071350090578235256245 1.8200251065435453235 -3.833030716825101436 -2.3895806981326059848 -1.549695872905972438 -5.1154929331976148887 -0.80093796654091842235 -1.2192327598199617089 0.39932951264438604211 -1.6614117991587227241 0.7982604536826661823 2.4188928226451382741 1.7644814430890254364 -1.0143440203190705606 2.3258065308225779333 -0.47754612815263969283 0.66272718538190467097 -0.34573955885902679652 -4.2455140885794255823 -0.20793429880419478373 0.058351811860980810909 -0.58594988233010791845 -1.6853119112996994833 0.063264463712032481535 -1.3929108226677173743 2.873355890827544723 -1.2099946264279046737;0.25635750576922788913 1.1572380485859028454 -1.4256961534742735864 1.9013356788516970752 -1.7928529228925844663 -0.1924568974610100236 -0.77503885330238997398 1.77566714253650626 0.99857485780663779451 -0.10277531112989689299 0.90659972612021777483 1.6227432106779642318 -1.4513679678363851089 -0.99223451251668504103 0.78856918564056655008 -1.1692140143189926338 -0.56522392431668921908 -0.083524078528950135292 0.14526428836745225448 1.6484698632915115724 -1.8790384941845093003 1.565790070903672726 -1.0681413405868653843 -2.6257315338178668362 -0.24613423738467660185 0.091606766262877503681 0.7897428829290416008 1.7678577195743256922 -0.1333644152048689413 1.0853118966295969283;-1.9929564151451282239 2.52470006064844954 -0.89035769077302862051 0.93317683668555839738 -2.820027794238163299 -0.58369672070479905468 1.604011024108152661 -1.5509531183770839391 -1.2560416012666295593 -0.92867318355698846855 -1.1910308578379356081 0.51433440182695389087 0.14548161121710276311 0.013356898910391643009 1.1637144507088876821 1.5816938136829972184 0.48081366259874330771 1.8092750868053630864 -0.077829338664622799149 1.1226848634351385137 -2.2104307428722349549 -3.4113422342836874357 0.072945865436184392783 0.76074702578296138356 1.5298459653314651074 -1.8173711299943962061 3.3991010483429029421 0.030059395178564304874 0.15721972471854087083 -0.45692623747478761098;-4.7157185036096658237 -2.3415041641979019715 -5.2887770747713762631 0.25886812027318589768 -1.5029769474953471597 -2.1072848168680917702 1.9848547360289505725 1.7646489792032971078 -0.083384426126011781943 -3.873061930427831534 0.24994513924173689112 -0.34367896269881159643 1.0453478346368572094 0.62738483903835140509 -0.40089499972546549511 -0.28474087977030365648 -0.87077726324949733527 1.5032716027172987605 -1.1721377775617940475 -1.9248784136129448719 0.20163345958704484429 0.67810232843087236976 0.17095449715439250959 -0.96736300273819886275 0.90570877243523217892 1.3388958710000318231 0.60918861957127690143 -1.4847140947929782229 1.881013297632060377 -3.6907451741953765101;0.036406179750179713805 -0.33932140902924656789 -0.14964178143278863975 -0.20337542767269570221 -0.16938874484832092127 -1.2108320164202521774 1.0597531402635167463 0.11331363223503446158 0.28106351607052343367 -0.22792664217676991689 -0.92558606547738375703 0.012110386487307903125 0.29563344854694506569 -0.093735843276081878828 -0.32521935843033988878 0.18536970534982372127 -0.12997811583176521744 0.12386919153364112089 -0.09059712421850565911 -0.19127477919426635888 0.074963119977963024732 -1.0010452128110272074 0.92909628353372264442 0.072649853522716634213 0.14684227372439498382 0.81173567627228271348 0.15529759557395192426 0.36374623590967014586 0.77700315313570056386 -0.44947858416651720326;-0.83478310750534201468 3.40666527458337276 -1.0282850182619069912 -0.24721402425923083568 -0.142815565175067688 -1.0395730560018658917 2.1471591649364958343 2.9176487558250880916 -1.2529260128522698992 2.7337439860897014832 -0.90676038822421489716 -0.075475983837110155461 0.26162435758043539602 0.10286719738313394867 -0.93884914633408900198 2.9307961893327911795 1.7093775110792579497 0.098927607541067968944 -0.086926560807409264386 -0.78622330752298796863 -0.46743364088641953247 -5.034576129176498327 -1.6858595173822625846 3.2521657477969263539 0.18257572372717389975 -0.2021762822056197284 3.2155235666543018347 3.8283294745387941305 -0.33528909474754708953 -0.4120034487467887363;4.4728786933440902729 -3.2943566335441438753 -3.167219657938343147 1.3668462945992509994 -1.4353150402887022707 -1.8073162478143125487 1.076875686759108941 0.14734569644196321425 -0.19479071611988357793 -1.19005313251680378 -0.82274655193167312017 0.50407415044553172123 -0.48370711235366425917 -0.50849883378874505269 -0.65634442459079822552 -1.3665389706018429283 -0.41665985699275814858 -0.22656399367694107783 0.35768831142984547355 0.39749555762489824362 0.53970976478997467751 -3.5387121394787910411 1.2597908520902507679 -1.1320841818078319907 -0.15338456236806460864 1.4638743435432115536 0.018629130925696294613 -2.48361973227606736 4.8882764004449903439 -1.4435947523407337556;-1.3578414839373651457 1.8554724842998870926 -2.1501003192497205596 -0.93797388126990244306 2.4728005156990069402 2.3935293853381791607 2.9122711475917140156 1.9900296309112168736 2.8991033646830244308 -1.2170068953940655909 -0.35162201189743497176 0.78767032426762306763 -0.4480389717476810918 -2.7624538125390487586 -0.11732693259930326857 3.5542447884737073949 2.1208601846703456495 -0.87233277960182020738 0.35413596498008043101 -1.3631054778767148772 -5.0022480723979887429 -2.0539721981435081766 2.2918880791911107053 3.3246427581747020064 -0.28250957470931925553 -1.8359325739397840405 7.0222212099760898951 -0.44640110559641782428 -1.1400660837883600518 1.013973185380286246;1.9299734602194675848 -1.6135483564729637962 0.31353681795272675403 -0.43987228887301421665 -0.25939960168623865666 -0.22169989323101527146 -0.22996467244974236332 1.1211392634573544846 -1.9124134900834770523 -0.5912004558733180426 -0.17166029740476587695 -0.059012959730557729143 0.5954092892048133967 -0.17117703592508159982 -0.74803085604295393995 0.43130661106928214199 0.2851363288231680837 0.02208314472383907795 -0.28754255000989464852 0.61007267003301579589 -0.65967137298468414564 1.2367564264161925447 0.48276146794698376885 -3.2203953278207895217 0.3195181262655295007 0.97553734392811342069 -0.04843012336701781051 -4.9283456237440734782 1.3417979609834209676 0.40459554383093171426];

% Layer 3
b3 = 1.9982372688417877615;
LW3_2 = [0.089414509181337586963 -0.024101881071800949213 0.086493152369407230728 -0.24401214785302571819 -0.02366274971450918474 0.56509711427608277923 2.2004413639924083057 -0.082135649591045148399 0.13951998859011460752 -0.28546259393507705804];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
