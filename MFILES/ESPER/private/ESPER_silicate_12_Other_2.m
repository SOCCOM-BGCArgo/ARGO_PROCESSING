function [Y,Xf,Af] = ESPER_silicate_12_Other_2(X,~,~)
%ESPER_SILICATE_12_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.6383663947632598479;-2.1462804690782726347;-9.7376420255656555014;3.7804569918755439595;-2.1268212836261826126;-1.5707035776611153466;-3.2814135056020683479;0.98950804603132469506;0.34526383892520534635;-2.1458765610770100807;0.75988262851675281162;-1.9873090648972313588;2.0222597360583209891;0.43580009360172433652;-0.43981427180744842032;-2.6508371099299381513;-1.7140164280667440355;-7.1005926875054079517;2.6093570135569774671;0.72358363837441541655];
IW1_1 = [0.83251242631077826406 0.48155146605977977581 -10.805531245640819904 0.54247734441320816234 -1.0490361176283422573 -0.14559327263306715006;0.79562959070626571023 -0.020126548347216444146 3.744160575175381922 -0.40181869570674849657 4.5256192837174591403 0.17493049952791958623;5.6011512401191474453 -3.9679506480147881398 -5.8719401272462743435 -0.69926144953843294427 1.5538282814475108395 -1.3355782331525083428;-0.25596297801222750445 -0.11905628277200089316 -0.22568993033451500985 3.7503908807125405644 -0.23472085497772315899 -1.3499238843647474173;0.73608399421538150964 0.12270552441494887719 3.5634140981482005373 -1.4776687449138297126 4.4782351607920016789 0.67243641828490574586;-1.3637331071883047606 0.63588034401643933613 1.1265165375687768989 0.33474778387913567412 -1.7249234939951438861 -0.63953046579488426193;-0.13068435131081729272 0.16192811633782419611 0.37128691794362650436 -4.6382097852251416015 -4.2252558743725456836 -0.68775235906452814039;-0.1545286464486638478 -0.020952010209878010882 1.2832577153436814932 1.1758256276506178217 0.93972171202243270915 -0.029926213641856255765;-0.16604749738673058035 -0.15699611756337256141 -0.73256693487149404653 0.70864597145909380416 -3.3174847990397737796 -2.4392982625513379702;-0.078487255041548700807 -0.18864453446331452824 -2.8667894960996260778 0.10519436995134170965 -0.6799420985153784569 -0.054380488151117373219;-0.066123697546296975047 -0.0089581226226282846536 0.23087183496977323194 -1.2313300498330319588 1.583727826418419582 -1.2204892564672435995;-2.3157423360487356945 1.4435073064185544034 1.7949803049967067992 0.47701535624507157562 -1.4105121663870205939 -0.30779463946627161341;0.84436451313844651523 -1.3862102147407173725 -0.63839892283974430942 1.2785727591315225737 0.34767115188281622062 -0.13089366871063845554;1.3920993769550535912 1.6749753981266082281 -0.47796049581758615066 0.18268763659742337513 2.1082704821166124987 -1.5535930362958527695;0.078073207245375225716 -0.026596570254039022391 -0.11116379030405701411 1.2421438509256697014 4.8014861009565645844 1.3544693389739441702;-3.4951520052253131077 1.3969938550650868869 -0.76777318433688335197 1.4595471430847180017 1.0555670463267423642 0.52980947839860181858;-2.9208441733859826783 0.80023315766934277615 -1.6089587865159902247 -1.7981845692218010324 1.7578659571137533746 -0.83792246916759760555;-5.2395412179055727009 -9.9140407023669947506 3.793613527142888131 -0.51641500327762024369 -0.91005609897183226131 -0.23490400518612278291;2.032614397127426642 0.0096566079498439875289 0.63518335115791124679 0.060866491367790244438 -0.48083274044921742174 -0.26067807509724905124;0.074246289885484803572 0.66461016193392685736 -0.71434847775423371274 -0.060643894986611102116 -2.347277536850855828 -0.99503089708008407577];

% Layer 2
b2 = [-14.208406744036626179;2.6211169417270250293;-2.7063123388677938763;-7.7054565135796364572;2.0542964241474308551;2.0549288926587592208;3.0399976552616516656;5.0652425571217403188;-7.5012554201992518443;1.3650067912103449608;2.4494205584689616728;-2.3986753892165739721;-3.0700531332385572192;0.86843757303128288338;4.2681723814834944264;2.5307611034063488553;1.0072862420200447975;-2.004083056808922958;-3.758880955926554801;2.1077701013054559454];
LW2_1 = [1.3185358534096782712 1.7799235175954875032 0.06451712358868864905 0.11399173734820061688 -0.97456112334447375645 0.71928774027982900208 0.49487696487336724216 0.87214904674894788705 -0.87380607884335870228 2.2625993721001691483 7.0206933883134539087 -2.6506364392760963788 -1.9808085886971333878 -0.7817681026276868117 6.359763283609625617 1.8509783209305643581 -1.0437361518261958349 -5.1300248370229164507 9.3027786352104886447 3.6358369082933181815;-1.0068831070292987295 1.6644562316847955064 -0.24554170481769993506 -0.74156865043338582311 -1.0619975064506148588 0.71253579153937640633 -0.46125605576584094436 -1.4146024486017720889 -0.22027073930260632206 -0.65849638542629929105 -4.3906972481826773702 -0.28517087687089748282 -0.50518161309831499661 0.2723772259030866616 -4.8611669467987885795 -0.12440620751262351784 0.090860364404129936866 -0.074890387878285030743 -0.6374626045482345571 -1.8261130030357299869;-0.4018684013894157081 0.47217880789502447714 0.45532885828400054828 -0.69077403358041977732 -1.2795411197587693852 0.18861051359684441464 0.93043978177497121962 -0.3581578715485886355 0.55132435689749637042 -1.1206484412358235225 4.156162454679686924 -0.28590316803706372628 -0.85109822150242953054 0.12724717663009788016 1.5801382866067867905 0.25955603015821276935 -0.19818505559494595247 0.2847691857394809567 0.10761403942170340298 -1.2219780291714974485;0.57074408222591843654 0.57124928998978052874 -8.0826081201021082734 -0.4509679799357858565 0.088567677346959403084 -1.3087636466464096507 -0.7997335098193130154 0.014525120628535607981 -0.3267010908633301014 0.066133470416751161114 -0.6987091002617563662 0.84178471150201150675 -0.01941441107313024092 -0.99290361722137820966 -0.57688687665878235489 -0.35738713217361162133 0.30678087047033963941 -0.0012036854816935022711 -2.6278905235356777581 -0.82855454517150617377;-3.2340557246963959059 -2.3418937611861343484 0.82746602499452026613 0.39242745603627116058 5.4173432023961236581 7.6720514961535180021 0.26833963672488092556 1.630281440050220354 0.87050296383165681746 7.4438760615172103741 3.189808039971736342 -5.9473854584214906893 0.74410285857470104265 -1.1821790109972358795 -0.031265773015824380177 -0.16943329062080053626 -4.0855445981515279286 -4.2129500116311682234 -8.147923154295051873 -4.2506626401013756222;-0.73721191773831440397 0.51666395352146909925 -0.070396776109908673624 0.11173741793877368933 -0.98058206609908438178 1.1578458263288404773 0.7879547399675899122 -1.9692904283140131305 -0.6885074392340257976 -0.60943349576103877929 1.940720999127006241 -0.84415901822418093481 -0.39766496566543818592 0.38940613824424252787 1.8020316622302399168 0.58211034561171226542 -0.24486914852143926158 0.24025964202097185862 -0.97671938086076404151 -1.799359123649404868;1.6274457866864404654 1.2309245862394333493 -0.22050084167663475121 0.39953314937937450813 -0.39201973281655960735 0.53082505254904677194 0.10579718772914831204 0.57300398416855558015 -0.61055429631522717404 0.14993004495621453653 1.2320999313865641511 -0.754932086066617547 -0.45979623692104071297 -0.018535303222646942051 0.93431832093800837313 0.058065860374544774059 -0.15509603641187888479 -0.097413413047598401695 -0.20168742903466413408 -0.45437314942656720218;-1.8377003736808508183 1.4533757985816160296 -0.26731045519533869204 -1.5229522670658646177 -1.0307357596897375185 2.8187554875525258069 -0.40049509401537636277 0.50671960256375092602 2.1133648772277080496 1.9141503948225451204 -3.1951374397808485206 -0.97579146076191358716 -0.36625739078525454406 0.7712220428911064074 -4.322975005611875865 0.28083079025463730805 -0.13949148301223521229 0.13599424370519644367 0.45988236677752380999 -1.2421320576085936871;1.4289200436467410782 1.4161621840568534569 -5.3797533740794660773 1.3903116556477248533 0.95506051587566964667 -1.1052051548749126653 -0.88028397851395490115 1.8319219499640158055 -0.0041558273781813603182 -3.5672639038118210131 -1.7666092000809809903 -1.108057744647257703 -0.800878179474185381 -0.88925654964551004156 -2.6003645025561143989 0.81029342526922076839 -0.61399350338103397817 0.53676183715654735007 0.43675274235069583284 0.70062419764646177711;-1.3447508005916319895 0.48810155718519793178 -0.28633011972783400934 -0.50522678940245935308 -0.23264416133346824123 0.8812330001078427788 -0.11148002282882885083 0.64362158232911437228 0.19209924889959878458 2.081214539342451264 1.1481105066502559353 -0.7347269470983195383 0.1511326065833927812 0.20291228184534579326 0.73343254781426980848 0.29486010565339704215 -0.14891741608652106499 -0.043849723490503644818 0.551797353724913342 -0.60572918347840298825;-0.86485488153112743959 0.40302677312561585588 -0.34420244550234019298 0.002401374576862222443 0.044935069689353221434 2.3255548028889019285 -0.32455350259469994967 -0.56242833048066698254 0.73314166519323875626 1.013470282350492635 -1.78140128392977104 -0.60072080568560515257 -0.27290083826913291709 0.14821858839006649133 -1.8966526464167221544 0.13105636353177610443 -0.094683696787782267723 0.040926883658781047781 1.1581803419756071527 -0.24575316199646027315;1.42840562249130687 -2.2081123587749491577 -0.79356407347669621899 -2.1452926350241714459 2.3557025580326862446 -4.7775550034250668929 -0.95810531161212542095 2.1441561161662061608 0.71310603047353304795 3.7310744698076541148 5.0264069015300609777 3.8185236081615494541 2.7342373807862108137 0.45586962401396707856 1.3273289877563663186 -0.41845587936370615134 0.1762684218379958756 -0.56825629931916299409 -1.2634481600776183985 -0.012058257780961978423;-1.3000807328560397558 -0.50624582590955102823 -0.34962736533267302352 0.84101111123468796915 0.8425936050198770122 0.7444015582226914951 1.9186330192855287624 -0.64223448104594360597 0.62808794192596506534 -0.90099790709392835186 0.0012838781117099420936 -0.2060358594219965922 0.31391773889799362562 0.058981094917105375552 0.93898347692141226339 0.61264031739418967071 -0.13794333805989356101 0.38073926539482572107 1.5951644274688625558 1.1354377421201935494;-1.0189451484616052213 1.1459074654202707766 -0.11896559965151738691 0.10434682900730082866 -1.1238979516381739643 -0.27106355078119120927 -0.027780359896351958932 -0.18258145580645576689 -0.023353436394196763759 1.3976895761830641085 -1.1943101669319109437 0.18108562802291189309 0.024742288343887707674 0.38480420460923908665 -1.4017445039255780337 0.035080069356999657448 -0.15141707021118161469 -0.058068915229429557412 0.027981804044918054397 -1.0834801120549781839;-0.63296825866055927978 3.6285585937327673456 2.1344058319519039202 1.7937757157600335844 -2.3820181016236792182 0.26324204484619556643 1.1021463303270566669 -2.5335656255602163611 -0.28278679614110091567 -3.8863353077686229042 -5.2455009525900004874 -2.1084899019019198718 -3.1315340864838487889 0.23150915079612319203 -0.063782262466186678829 1.2413291874103991042 0.4209614532456086855 0.7200678152486039707 2.7695369087011187936 -1.0152430804880447912;1.7450489329505631808 -0.57041795842992326637 -0.2501833970452987943 0.52421740567685537471 -0.039537607349713559113 -0.80124889571619228867 0.40722209675742332413 -0.22794294952995175496 -0.52024383697776754865 -0.27695444623642156978 0.11606443346739023226 0.46383893219563548938 -0.51557248192776028439 -0.14174913159934302009 1.4795853944846240058 -0.20523961664460191323 -0.15229873622702935765 -0.015243077789353638718 -0.95368053452474821352 -0.52674565892806313183;-0.95741436218949604875 1.3189688556952687826 -0.047271148078720147401 0.11017236083766675236 -1.2570120307519172531 -0.25306391787315341002 -0.0062044006280842006404 -0.22159480373485501703 -0.060411075519122468813 1.2990711337576830164 -1.3303006607337324319 0.13953177782133277529 -0.0089083831506021945307 0.3922697675162811759 -1.5337148677874976599 0.032196184406853026183 -0.15392659681456230536 -0.054462953743361873504 0.023810326310176106734 -1.0825245750391034871;-0.031326160034033559421 -2.0151998823079195766 -1.2127870335840986726 2.0910400987170749687 0.72601911296748533609 1.242527270023971786 0.81901066628599805686 2.290143522425344802 -0.23347401420202132383 3.3219354317743858829 -0.74544300037099930911 -1.4552721770156435976 0.70182004775355866233 1.4287979489183886272 -2.3500834802799479561 1.646841193908296308 -0.44128640476931429992 0.037455144466311228457 0.83830007679388085506 -2.7075578485006510654;-1.8861005639874173223 -0.052273599286618517568 -1.883806626786709959 -0.63234281917356549574 1.7988638827604173098 1.1123463175555836635 -0.47732588663517228067 -3.2976164887821775018 0.61077913737324496246 -2.3828832437176816761 1.7405487842197089332 -1.3952678951989903045 0.86039828137031915123 -0.6386869361213927121 2.7790334975853649979 -0.071514672536344234266 0.76068243408414637496 -0.32876937528940075595 1.8983747019012000568 1.1924818220076101039;0.71779404153659687182 1.34450900169775589 0.16494659087580820778 -0.3862204333694522207 -0.048678737128277388413 0.1990798970486440389 -0.37593183993189793757 -1.6445143241420114855 0.86848755210346351152 -0.88225283279563870842 -5.8051652906792075015 -0.046497572753586166594 0.18927048363240886464 -0.29194797359201257736 -5.1386368270059650243 0.17508797569845152564 0.19989058190220945765 0.10168958552768403436 -0.87631352972311415961 -0.8331463248785992981];

% Layer 3
b3 = -0.82489956250297935547;
LW3_2 = [-0.16093590592018774954 0.26902317113749985023 -0.19760898523768896662 0.30336683347591220095 0.35415144374645213254 -0.19972820517041950383 -0.69242107209231185116 -0.3705665585415505725 0.059905990232718336896 0.80309707623112924768 0.75920567394863214261 0.10585145432584962266 -0.17571554989930970869 -5.9797954895829912303 0.084086292412652641204 0.64651543372083808414 5.5129641259026724853 0.14866070504211817416 -0.11319922075985885956 -0.32638413203702648646];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
