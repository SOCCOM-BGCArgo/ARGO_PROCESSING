function [Y,Xf,Af] = ESPER_oxygen_3_Other_1(X,~,~)
%ESPER_OXYGEN_3_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_3_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.92765147629971222987;4.664471730111885428;1.4404500833901394685;-5.3860049117891097836;-3.6980976898309187995;2.4731057204264899063;-1.8954497521213151678;1.8906120273339077631;-1.8594015480324899148;-0.10180624433752663571;-10.405632976996615824;4.5537424552395746602;0.25963636686130331377;0.31551117854414173491;-0.1162156119439978208;-2.4556901258701784307;-1.1283094252506535859;0.36500123222466368533;-0.67242921358217111472;0.26247826018898423595;-0.23686850858884025972;0.12815583154795381904;1.1316464467360025647;-0.84127691338170673685;-1.2455392434086505205;-0.27245797932423138077;6.775778054005288098;3.5363573344467740256;0.58198346899664143983;0.83601574683433310664;4.9800580176827438095;-0.60637854603067908865;-2.4181683621845988519;-0.94851924427680467389;-4.5108073836152993152;-1.9460451053045808578;0.88217608340661768374;1.0646288750379626631;3.5619173329382309845;-1.2601117805230688251];
IW1_1 = [-0.028588429216747267975 0.13316129394745826464 -0.12338493376876885632 0.68430951996896105527 0.31987766613521639858 -0.85936148081858143577 -0.49567650510829502908 -0.90733210070450021068;-0.0089236500492832250553 -0.60984899871572073593 -1.1368760284474215272 2.165475268666455122 -8.2200280529111680039 4.1873548354428518081 0.75710976751750180824 0.55386368218341730518;-1.0180320973759111602 0.94128421248268512311 0.12764097919951253313 -0.51203264220517075156 -1.532598708426884393 -1.5495215252660470284 -1.1756981406345927699 1.7187838460885820346;0.0074496708794323995492 0.48757633851332987662 -2.2616151700844930872 -0.94575267093443160515 -0.84129899587252443549 -2.3378648459890882805 -1.4630828361252914416 0.053787120443215125087;-0.16324353867427210396 0.058136433385553534792 -0.94630118766201731795 -0.86502297087293922306 -4.0234221750839234133 -3.2053788511857366217 -4.1729702397010211001 -0.35545773732343810547;-0.054625062043409881862 0.093219647399347543848 1.1950155856846766955 0.57499843513354764735 3.0756984433080880592 1.4971616616192102711 0.69592464829116484903 0.39856974016856444587;0.74163986571742046561 -0.99076172849935051357 1.2195324999935543975 -2.7680198782993659101 -2.0267373205114376233 4.0652259306192455313 0.039498001863255804977 1.126727428862270175;-0.7029454213770353066 0.89670723137983021633 -0.93573854384030641373 2.7657536449932265121 2.283145413571423088 -4.0003986009597589657 -0.21199880033765838849 -1.0389976056259973003;0.30419325451389900294 -0.020893443757099429414 -1.0742998294706329609 -0.27575126343128308903 -0.15243915889748232972 -1.0864442944071879271 -0.06568987783005300618 -0.05207691941097507965;0.47253300795641406395 -0.46756419383387315403 1.3104354856164031062 -1.7428140897227430983 -1.3714345920682879942 5.764388063535675677 1.8749144714797474354 -0.73255738471100539932;-0.88564505592932629696 -0.7086404756481338163 -0.31207001068876727423 -9.7531241246740343342 -3.2497001622187324799 1.5838720694679433443 -1.041756440328869715 1.1056813283401587533;-0.16148278725214357254 -0.52802716223967516296 -1.1832891329723533858 0.59025065231854345615 -10.048293478165003734 4.2876497551730610169 -1.1683871641190228807 0.78272818499474661191;0.31778515911880245159 0.58119648103085186364 1.0289763160403200271 -1.4903893359260205198 0.10113833249976164619 -1.3304233651222885371 0.77412931818315189325 0.49256407884423836219;0.087944865566999527728 -1.8566170256981648912 0.13789709274707515063 0.81568523118810021266 -3.7326423951797016443 -1.6148357954865546482 -3.1529424453700052311 0.12323066226986219285;0.17533135967819013512 0.46445978445875385487 -0.20667987383671065915 -0.18735175603186562943 0.17087682770844428437 -1.2969251904142027332 0.39194626523948289387 0.52520775101199901336;0.25423875335535323083 0.13670582786606175207 -1.2812407925748197091 -0.52462339120693601835 -1.6493622135238790172 -1.7260931312783258651 0.017133228374683975165 0.65773186101530434211;0.23451455725166894806 1.3756951500738088257 -0.23319787436300029593 -0.30297886280235475365 -0.27658203635353534322 -1.6421143768259405249 0.41181050178712486076 0.13259605658801265626;1.5001215938887464407 0.42304070286780054433 0.80441611233355359012 -0.79932372105461935163 4.602890754453574651 -2.382999324978576805 -1.5674921533597958589 -0.39041271754680617612;-0.034745007726740065324 -0.57944682132386648998 -1.1138538461628102461 -0.028401896804796804979 -0.65445893524849041434 0.49143816505588999721 -0.50892318043801754168 -0.47429885893148826526;0.040841162831363735097 0.053184145164587290355 -0.50170463939251774832 -0.52223677292905323899 0.45095512880124188904 0.24219302510045775945 0.19657250289635386231 -1.047716543882019069;-0.22866476848650615916 0.10944686990118618342 0.9657446702628988966 0.39405707740819123641 -2.1184382944389068548 -0.27666783836564012855 -0.88972507256790922536 1.0648317539296778822;-0.48465630960349914691 0.42606649062023405072 -0.056291930778648469058 0.064202754672875478326 -0.71234206209581396596 -0.7062378770612363077 -0.20664399349467166278 -0.4204022798720932208;0.71903892009214143144 0.63603165816848206138 -0.11721674668319986834 1.0417805896952290201 1.8927808027631227716 -0.95103276394081182055 0.41495811841692864519 -1.1764413626174488048;-0.99722548162736635025 0.68881397174148373264 1.093705564350187398 -0.074700292938209594817 -1.7573659895712396839 -0.25306610443255145304 0.53831864073517821101 -0.63304216615113884092;-0.044224999558639975505 0.037247667018312523302 0.02788763018682194339 0.59820580939457634884 -1.6397447191813030454 -0.87183801349670408953 -1.1072407523646041749 -0.6854056166881775658;-0.22408936398489570641 0.37646040706992461855 0.065560321322672587829 0.15828418053754708672 0.011924894555618709147 -0.43562433567765185272 0.0021821580471422163602 -0.35041275761168849678;2.8124489199578923682 -1.8983077957061593732 -2.599056776492409071 0.084941563317110516107 5.2132143667304085 2.7761718228107881146 3.1903508087512184588 -2.4554925058394685422;-0.026386923778668230217 0.12003706747997894277 0.49908690367738667293 -1.1042692720653684013 -3.2959235487194269432 1.8666446750921634745 -2.387412839089634975 -0.19572287470713572999;0.17872962893721522359 0.22579468265658420023 -0.14369644696719963139 -0.010761769164920940642 0.23584005235754507135 -0.95349581832534058279 0.48859023409391777459 0.92562089100345801285;0.96547662080878782209 0.22082492946964304981 -1.8536197916955423626 0.14704677692463963279 -1.5767991566362702383 -2.536638056163996513 0.073137260018182534416 0.58200726372771205419;0.86379949028018676582 -0.40662497959672094794 -2.1843937598235858566 1.8904953239887982708 -0.58800785558686863297 4.1865738493735316084 1.1602227296091744968 0.95286889241132732842;-0.26919289634676857315 -0.30972577501839820835 0.79816020767825202054 -0.84870607980171597351 -0.29067530857401502331 1.4484318494587153925 0.88676644346716548828 0.51562863436081873836;-0.79947412508683846077 -0.50485979660789293 0.67798917468208097503 0.76834373270684463986 -4.2382335993787183526 -0.69515652204258471247 -0.033657514426759328752 -1.7555453950642390115;-0.34207523959070090802 -0.21707034274088035652 1.045599366987635559 -0.92921524561554869059 -0.47539353915754145596 1.2264649783254366611 0.80324631840033267061 0.31811133251516482412;-0.21757008316831163985 -1.5645275776971296899 -0.1105661046693807853 1.0726199543992080976 -6.7522569960775324915 1.3153363788724290462 2.0952389294249345042 -3.4564282613598442673;-0.55458378862578705526 0.076556212188152131248 1.4667579699171926499 -1.0670137067493277172 -2.143765997254595046 0.39688739597786454327 0.47468695379031239368 0.022348697020483379583;-0.21458656123307628949 -0.85632945100599500154 0.041718675229041553287 0.20982201822413176773 -0.068003699912487364232 1.5200921261671669349 -0.52099778701821553017 0.11490923386318213639;0.9377984244551056392 -0.64938296126102279526 -0.89904047447974644314 0.027394305916788555533 1.9057765255362815182 0.48150593399170438236 -0.42548140800039507825 0.72788844387116558021;-0.040737711059547487835 0.098939650280652921555 0.4197864524660658847 -0.84868784157860555073 -5.8444148757803544569 2.4021817196527441851 -1.8522284924222649494 -0.45707124469864834904;-0.37462382472845995318 -0.43169365486854632818 -0.35740169664495780033 0.33472191354759461834 -0.13500656304074973302 -0.047036936810820335897 -0.23701117270112972979 0.39218726393831249144];

% Layer 2
b2 = -3.5978898915739647713;
LW2_1 = [2.1767823102949361846 0.2091509729637341386 -0.40640542336744212015 0.472225187967595883 0.13078321847226784258 -0.6370084201301519089 -0.78649894388667485057 -0.87873123069991987411 -2.1961576012162336013 -0.084851720390106175063 0.27892204328396857926 -0.30702833468015555685 -0.55064844640361965133 0.065943666231172828884 5.1873697810669714414 0.99915437624246783432 0.59508968574823883912 -0.12402626268001525067 -0.77507412122825503076 1.4866348769977828503 1.0474506745549561071 2.6497220433225399105 0.73100539957465437979 -1.0823808608770535411 -1.7222561465858567953 -4.446899605920258125 -0.15044003911015249586 2.4052211862205896686 -2.8348167077868442476 -0.19597863794707973129 -0.15252990001195124159 -2.5439513812280951655 0.24511099632910901547 3.1082123918374415794 -0.15763537813162994961 -1.1908218492012496714 2.5910006946377883708 -1.3140502736146744134 -3.3051156595404118654 -3.2830872292936508217];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
