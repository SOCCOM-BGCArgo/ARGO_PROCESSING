function [Y,Xf,Af] = ESPER_nitrate_15_Other_1(X,~,~)
%ESPER_NITRATE_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:37.
% 
% [Y] = ESPER_nitrate_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.705385067372469754;6.896449801519357159;-2.7147464590953891417;0.32312622345883545982;2.3595351422104009487;2.0387403575716129822;-0.87968019357353754994;0.42565093830799988206;-3.6615296939160453249;3.2450717745361647992;2.0406039687373969116;-1.9890268792830974043;-0.94728940511313619588;0.24333802823092526291;2.2670355652926552636;-0.29707862171105448024;-3.7743710254437643492;0.020208494633361571979;1.6586574297816867318;1.1280047516593763035;0.41295145959198614749;-0.16554805250257906279;-1.3645587942475514431;-0.065338124091015845063;-0.95461732373127083928;-2.5188568998487705919;-3.8174193902820889868;-0.096035862609744324092;4.0926686196743347068;0.13783945159587063234;0.47548821067205032653;-8.1210811645238365486;-8.2616988511854323463;6.2767750469551346626;2.684001714399840921;2.461290377672473717;0.044113522441362754134;-3.726059755016366104;-2.4327033302751082111;0.62028808847916128144];
IW1_1 = [1.011825611156864646 -0.52972722593008547687 2.8107562032896407089 -1.6909151085036839834 4.3293288852354354646 0.63470896209698179913;-1.2693031107742211994 -1.5865049170430705061 -7.3247259796953345656 2.972111955172386466 -4.0465193804337928896 -1.7189472289741536404;1.5499515265835639433 2.6027759881786902696 -0.16929885642013114966 0.11446075748689840679 -0.42850301474385910083 -0.15202227691317446445;-1.8065452265535881793 -0.42359923137974914154 0.66486185373441319957 -0.51401565089819734045 -2.6436047371965374353 -1.1702762218225633006;-1.2760942811254245566 -1.393832925259701927 -0.064739028795277847594 -0.99654767847304814854 3.3511578658062957103 -0.84811519062976692407;-0.34084936770877899415 0.5807308192722812068 2.0330236691704706153 1.0462313551209336815 -0.012758897249098359941 -0.33480275449283064537;-0.40141909457180091625 0.091543749141614685905 -1.3473236576899143557 1.3009132120045685532 -2.0849705519510481899 1.8269447661210762579;-1.6205029872167528993 -1.2555351589216934283 0.32063111252404891127 -0.28565226489857986625 -0.37373993395879334667 -0.17184673840532582734;-0.10942480066446212683 -0.060473403157792086915 -3.5918604513210565798 -3.9647099770433951171 3.9652247774958273574 -0.042846879736443153897;-1.2192363472866887264 -0.30005713430337271896 3.228898406969412882 -2.6541568640353792041 1.4721392590289243962 -6.9343245727087490238;-0.25790071541700504421 0.99786472972699846729 0.39204693658125583378 -0.58566993742855921745 -1.274795295244695259 -0.7778671839984369063;-0.4989122416575361707 -1.0785158580636695635 -0.41525591407739037564 -0.7645150418384712987 -1.6462123684568450432 -0.11431411740295681356;-6.2965723738818946131 2.4248820546217242367 -1.8845291536100494678 0.053404618584611089627 -1.6261068365335658026 -1.7101698632835478087;-2.073709168748989029 -0.4582270384708148625 0.62197537823952075975 -0.67518920065852905399 -2.8617889299918397583 -1.1972467731398779289;-1.310929653985074772 -2.3917774405213854116 -0.048807815043149328782 -0.23343411971627353596 0.54910628840414643648 0.10825569547455177188;1.224889246842478352 2.2572326325249680856 1.8091241410471079476 -0.047740853426652324343 -4.9409287528912360088 -2.118665444855599489;-0.11989452518209670062 -0.073981808837169343862 -3.6551181568258024335 -4.1709135626019726573 3.8879686054084938718 0.028839256778233065409;1.4559335507353723393 -0.68068233882559436854 -3.3193453332278215484 -2.1406134511302163936 -0.16636582740356209431 -5.7121664772402303001;-0.52828027271972577417 -0.071098515384511631887 1.5770658456434745176 -1.2335929330437520601 -3.2877066613390524275 -3.2883263355334042544;1.2837218244446644277 0.28688009834941213816 3.6849074931843150971 0.99003201585241151772 -1.5536738006212937879 -0.12322367364620162578;-1.2158137423867603211 -0.012482084977740877038 -0.18484394250708494067 -0.55733654332695203859 3.3951993335978434274 -0.18189375966854462452;0.19888744256107573904 -0.60417409832302704231 -3.1440223813396119823 -2.2613696378538943321 -1.7898083644279401128 -0.37893790734334581449;2.5699070580677960685 -0.23905444091869715306 -0.5213101156358205257 -0.24093448406150283492 0.37667849063404995613 -0.21054547830025294175;0.96054926258946526918 0.091110031742345318206 0.47727122648134789884 0.52539538197464386027 -3.276297178840661406 0.32486328247694667981;-0.18647313220380282162 0.13177110167143588071 2.9433023681870653654 -2.1572332004015941642 3.9379780701516757802 -0.98616037479842133529;-2.4444385259510950092 0.54179974138250253102 -5.2433634825238479849 -0.55602056445574377097 -3.2390410876220232517 0.83258426399312501776;-4.4965908198756308067 -0.46603507469838018062 -0.21713054191369765555 0.91837076713236287517 -8.8523939151344563925 0.43994157013398249578;1.0710108614212825451 -0.35039321557853420064 -2.7693237688200995628 -1.0012987517685720817 1.9727776346660723661 -2.9616901472104064652;-0.29063706023668683942 0.2211039607610493507 4.0816545899548009046 1.3948622106489347861 5.889209692895925663 -1.2884671302872177101;-0.14434902413387101783 0.54363571843756053337 2.5585641578880129465 1.4325372477236510971 -0.17437772166411272257 0.079619769322619951546;-0.16387746531147126539 0.045324108379750080444 0.7940654088142218292 0.2780705275102007823 -0.34845640213789358386 -0.91430890829456357149;0.11333420407850490486 -0.42796330133656346195 0.64390711123465838028 -8.5965924498741621562 -3.9469769946307202702 -1.20437218814996716;-0.16171613953470595493 -0.49247080872029713738 1.1623699439307231263 -9.2079094789194488868 4.441513548337281847 -0.36366853897427359188;4.2835058668424359496 0.47011764154449575681 0.69360593894282196459 2.8313639007699662464 3.1621628038480835698 2.7807063928385598039;1.1086091762966649998 1.5365273317606509274 1.1623662212268299765 -0.88458185209925710435 16.109698907368699139 -0.69190914032862282923;0.26866429870663732782 0.10404062253619894562 3.6188373124022366056 -2.1446351747283114442 3.5818161426960495319 -4.4424039200009870498;1.3954983324417555846 -0.64913114995069709501 -3.1697417492560995278 -1.966851322069393726 -0.072979196284700745267 -5.3598204750750326752;0.24520716022359609343 0.10147389541068609076 3.956205699001884124 -3.4928805683259653847 -7.3698148840507329282 -1.2534445122966784147;-0.488422557461824558 -0.72681362167983754041 -0.69663515415488141969 -0.92999349710601320051 -4.2335136008679263853 0.023737817155321094126;1.1241083930043425099 -1.2142448150130304985 -0.19536019373512172881 -0.36174302897859400563 -1.2517864108218448305 -0.37184160273057015322];

% Layer 2
b2 = 2.9180751339481596496;
LW2_1 = [0.11235893369896106375 -0.055661338590866131504 1.8584432939895061399 2.6484050605608442375 -1.2656595645318016174 0.83850949509778505142 -0.57847225257371026608 -0.69967733295309897379 -2.8287571488830893784 -0.15112595022187377825 -2.3797833782410933168 1.5478308169107202197 0.030382254889886464028 -2.1352350576489103062 2.494911950915173815 -0.073984960519347872654 2.5614353594535543834 1.5281457089775380975 0.56896091365679191121 -0.17253373093135571104 1.3752565092137170044 0.36740597647831424455 0.45875199532520027912 1.1093244770399419696 -0.20715227790511070438 -0.07616587320485901369 0.10854795241565201591 0.39471456072776706092 -0.52882760899058489645 0.81716603041151270048 -1.3476281282785631532 0.14527109522120570939 -0.28127948173102002016 -0.060984001154057367045 -0.1773111946977909692 -0.22303192846842195829 -1.7957007886482698744 -0.23634242829493762317 -1.2273985709657986298 -0.56332128131460901255];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
