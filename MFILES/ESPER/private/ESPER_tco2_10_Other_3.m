function [Y,Xf,Af] = ESPER_tco2_10_Other_3(X,~,~)
%ESPER_TCO2_10_OTHER_3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:57.
% 
% [Y] = ESPER_tco2_10_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.9435494734583685;-0.69138694933511191;-2.2631212710349482;-1.6373439877499607;-3.1135468106800155;-1.6684469449749393;-4.9282648621606002;2.3302851202754975;-4.3359374911622517;1.6779752188619435;-2.6760181260418476;1.8685889500194477;2.2388604597453714;0.27767237942680278;2.2325934347879639;1.9091782083005118;-0.47749978818001865;-2.8132110934222747;1.5821538738784515;0.49654507037601492;2.3108459479507002;-4.4238473869631916;1.1021718324255803;-4.0142620310600954;1.3835665631694167];
IW1_1 = [0.38963764947245183 -1.1047184289581715 0.85436093841813654 -2.304168536019302 2.1180205060857755 -0.69060066345260196 -4.6541633976376966;0.42233917252919956 0.37640185477894683 -2.1519010437531998 0.15922576432800761 -1.5411046624119931 0.47592064353276614 -0.28016149999007983;0.39884554441667197 -1.1756969439981084 -0.20109253040685585 -0.4497407011896748 -0.44130963248168614 -0.61635263411283203 -0.94120777999590011;0.10549250441946374 -0.0091476875317348383 -0.1586293461484552 0.060772831053710147 -1.0739561976091945 0.16067629056846172 -0.032226047230701133;0.081069423564526677 -0.64270406001851232 0.43152036032833546 -1.2311218550298897 1.6599031978534269 -0.60322613163189165 -0.95300264767268172;-0.49094791904674201 0.086713077563561253 -0.87303417759496238 0.092218267960831393 -2.2024660427932923 -0.9260906686567969 0.14043929569897434;0.16160716898353689 -0.37255074047027031 0.95440686628041727 -3.5261187223142292 1.2031548952610067 -0.81387892709173781 -0.57283337829725567;-0.43196662228687149 1.1996734814127701 0.26689520105163472 0.65518590040493496 -0.45891541060798607 0.75457696550824083 1.3170510467026644;1.3807326835820319 0.05843180490186986 1.3790528916517724 -4.6071451556053606 -1.0220995045614691 -1.7107085154758097 1.6628901674139127;1.5071739561057271 0.76297257487203962 -2.4590590122913598 -0.43102647288653595 -4.6434805624120443 0.59282703852186958 0.27087834341235029;0.2591773829180411 0.27427823558435999 -0.36237826762062259 0.32296792575025735 2.7127603083853562 0.76406675460986828 -1.0597539717818125;2.2920721439389689 1.1585944811535269 -4.722973138647669 -1.2415910945266864 -2.176435254516119 0.7642446979436337 0.6504473829504327;-0.26172347771153143 0.74685698814046164 -4.9265203422562953 -1.0315423442810643 -2.4585064740935771 -0.68598749109742896 1.1264220360458801;-0.51892698254278879 -0.35779615867804121 2.3101883655651756 -0.13549299617878574 1.375654319090442 0.55515320080590325 0.25557645034442927;-0.75130368487471222 1.0873954088884301 -2.7286041312178746 0.82713179743337506 -1.4477649202267615 1.0339509684824128e-05 -0.043941557632042751;1.7931380966194894 1.1992494245285417 -4.3096048116240269 -1.1213763357021431 -1.6755646446849122 -0.090617004340350124 -0.26920370038301444;0.28414791555554875 0.028032829671553704 -0.28965100009285605 0.092645103815907806 0.2365632675083103 0.28629103503931685 0.02068160873164197;-0.83194104902007271 -0.18563314059111988 2.052119401159489 0.034521520116038401 -4.0527148837203413 2.3012309779996558 -3.3623205363761879;2.9833603920823184 -0.32878441074066161 2.2375977696276674 0.60202865590437504 -0.067724100896211628 -0.02169521506327355 2.1402816674972489;0.24866694489482 -0.02160030664693334 -0.051260241632244595 0.059990556517076368 0.82337475647647818 -0.02685379405681014 -0.03567960709968325;1.1115151237956049 0.88071250075059682 -0.7095725584406829 -0.30989557877601953 -1.9208984171117451 0.79905737106224972 1.1485775709296877;-0.80530137877199603 -0.057508841624502524 4.3228598194530958 0.17048998217448061 -0.57336661164022273 -0.13114123772070418 -2.4768073984645662;0.25524619315501618 -0.13369661562370036 -0.72292731979950131 0.41364983151331669 1.4796139302340154 -1.0278225905301721 1.6823899345379008;-0.91851356109209148 0.25504754969586529 0.37559677465847058 -1.3885699592774743 3.5518285938556406 2.1403133522577025 -1.6894284605026639;-0.62193603656883278 0.19486126559201869 -3.5761028755714568 0.2055299224825419 1.1503751930696453 -1.9538104332041561 2.0278956166276831];

% Layer 2
b2 = [7.6567169081362385;-1.9980403297921276;-1.4556265338416483;-3.1426616388882374;-3.1178304843809852;8.3658435958396407;8.0659234804154352;7.2301761657833756;-0.0033279414926877283;-3.1153285071770509;-3.3883915467526928;0.89498975243233359;-1.0949063530226888;1.2280100943245009;-0.062637344090144986];
LW2_1 = [-1.2260557118814188 0.74848318839379924 -1.1511415464635992 -0.51663580868100856 -2.2203278510793463 5.3822362996612414 4.8151373146482452 -2.2981895787136724 -3.904233892116693 0.032481939884778266 0.15290631338217353 0.52443984378138708 0.72292363407709359 1.0251673977519755 -1.1855905503581388 -1.2744650344095534 2.7985026697612332 -0.962472624740214 -0.6073243189501335 -3.5504927835206597 1.054195714218841 -1.1770957276366469 -2.2561914975764163 -1.6599120340764133 2.5409073166881071;-0.030911858218520161 -0.46279902106026344 -0.58536506602103733 -0.90781974929410658 2.1351649855720405 -0.40306227494889246 0.62991080958932244 0.41871565960391655 -1.3728892270527313 -1.0340442902063895 -3.1516997238703688 -0.82614960472432641 -0.95309458306441341 -1.5356061782637376 0.95769964512759942 1.8352660956611959 2.8846675338073848 -0.10307076583892694 -0.0974698508266897 -1.8185640888998313 1.7035288279664185 0.77067168799697927 0.47831615784493958 -0.11554021738318834 0.20965161934031123;-3.5126787009322933 0.92935775844156099 3.0694415191127478 -4.6851478389877572 1.087349848861574 1.1892516332196776 2.3241299693591086 1.5478646729273475 -2.4274348333740696 1.476913781421437 -0.8807173646760541 0.47129515172241082 0.084659262671201427 0.63046842682676429 -2.915299661724907 -2.3603749004670491 -5.7920450749473833 1.2816458630113847 0.030624226455499663 3.3176028761214491 -0.12459738908936585 2.9950639027248696 1.738977422571738 -0.51996819927177051 0.5553002361201036;-4.8614803629263914 2.5350242170160868 3.7967488711828734 -2.2211956393382661 7.5112046251657087 1.0523572292993162 -3.0881643230710298 2.1055593317161527 0.29826069929388382 0.83000460172998491 -0.63670455635947298 -0.43716687961014211 -0.46182106496944392 1.2680601425681792 -0.35292726742125885 0.72903660185750663 -5.7265661674858555 1.3882583207955974 -0.10195884074172835 3.5483831599439575 0.52195478487330049 -2.213270487654972 -0.40119626212885512 0.95760598932382834 0.38111901245602742;2.0861927650943497 -1.7169533767445591 -0.82622145074961517 -4.2310120290667772 -4.6542836505746461 -0.27809997253648533 3.0132421953526261 0.075476974373640621 -0.3616849201302263 0.034718389525503719 -5.7558897185755269 -1.6478115415341184 -0.78015813561422886 -1.1777191139689205 -1.4977638977630985 2.7358997654632944 3.0484140907670687 -2.6965801431860581 0.17494682680685297 -2.5244141665078383 -0.47339543500230497 1.7310167362126125 -1.4627910116462004 2.2440053402112223 0.778526949329159;-0.4494630741810457 6.1671464319025979 5.5459142455828747 -18.52182912158089 -2.9977540443887309 -1.5722032377448791 -4.7073031148180871 2.01093516666293 4.3162297598203319 -5.6693177926543807 7.974065327304384 8.1133478164926505 1.3875793008120847 11.640613438143152 3.6366666923191255 -0.50768466513452637 5.225028833517193 -6.5947120501927783 11.995055059593433 -17.196074102177963 -4.0134301055739305 -0.54760641330323767 -1.0728654256018539 -0.3504234950086898 -2.6734598220679322;-2.0365486745993739 0.010776651799507223 -0.31929296753896652 6.536982141224172 0.31118172630191182 -0.40099756111206136 5.0619409953674817 -1.0054445267606649 -1.723761041351328 1.3570260010402084 5.7447780748075497 -2.6169421587689818 0.97612038816546942 1.8304518767220517 -1.4663386055791963 1.5873053276928222 -4.3876967439999159 -0.73883657690682614 -0.13627575935803063 3.9446857789222025 1.0496252696746244 -1.0753247075275882 -0.21622219101138129 0.38218403439213899 -0.41910205353491986;1.7872390302692345 1.3991056550065952 2.991579106550919 3.0567367499477025 4.9356069434861585 6.6487602480133612 -9.7852857301009166 2.0525992357563103 4.5603867950320796 -0.68228283180366511 3.4047182388994801 0.92234849626683535 1.319644287509768 0.077480650395643738 2.5964177098926862 -0.99083156590071475 -3.5028716463925429 -0.067895728149280729 -0.35458849711229495 11.42595683477092 -1.5394328613597601 1.7670128046042524 -0.50684516371907107 0.37100940278911504 0.58008443871786175;6.2480670713708593 -4.8020806064515487 -2.5494511361496941 0.99532341021146142 -6.5183228748957172 5.7382737266217809 0.84556523606289646 0.36523432546083889 2.3942138757076208 -1.2175773993207861 -4.9153870511026803 -2.45509260349476 1.4477673422669717 -4.7766235984653092 -4.2011514807150219 -0.09325402690803046 4.5569144141988565 0.67446524133326702 -1.9400794751383492 -1.0959066223792457 1.5184807171886345 2.0404683655035245 -1.3854260024434228 1.6086905795605344 7.6099067092614527;-0.87718001631119935 0.5596253480588288 0.60986773098174141 -3.0845497088263953 1.9756128059603391 0.43682221378081998 -0.29822960914742491 0.56627331156593552 0.052489665966197238 -0.1025282416158767 -1.0578391238110623 0.018869146519368191 -0.16744180328623981 0.70318374063517042 0.39001648037510095 0.096024253971048634 0.37168421304382737 0.12255294768230644 0.16917519636574785 -0.26731018120251249 0.29736842531542074 -0.10118599540907548 -0.16891730626074855 -0.12081152623262945 0.061264472061335652;4.2678924554934303 -3.9825466018408515 -1.861044971413935 9.0448960869654833 -10.485795818915346 -1.1571418883172082 2.0902591816617044 -1.810325620816172 -2.0896900710083131 -0.14563641110311645 -6.2895284954874064 -0.096749832584026793 1.4177030236896315 -2.4894199369390964 -1.7017757642734641 -0.88134489242713598 0.50490277589013488 0.26887212278144329 -0.2475553580459737 0.48987537172134521 -2.8466783331824774 0.95266803882802953 1.8508962939865068 1.1990630614284914 -0.052146792193422421;1.9937225934901599 0.33383928869831198 0.26294206235810086 3.5327446192745797 -7.4970071305123778 5.2611708947973623 6.9892363526044177 0.11897739927640039 -3.9537812664358674 2.0034133126122482 -2.7481314722490344 -1.1548325970853273 -0.75194048598130725 0.78110960737515056 0.75033997234029393 -1.4627290245933999 -1.5043090292582877 -0.65008338532934906 0.58673966821789336 1.0366464633289925 1.0326583830098319 0.34695855637959261 -0.86561195166330007 -0.70679058222920443 1.6775068091934338;-4.0834467364606102 -2.4146528791788895 -2.3620260736740448 -1.4323895924351249 0.19419208639699601 -2.4864611901307838 0.12216620468971777 -4.2884097133607053 4.2752874111231529 0.18053536730399183 -2.3940776216502964 0.63713941185968015 3.3285772468971473 -3.0974014527584321 -2.8526240544337536 -2.6510011815430867 -2.4899650118220991 1.4574067715986438 -0.90646991363194174 1.0210520228042304 3.4377596931141134 -0.19628241514678285 0.63048259854360478 0.44156719151173324 -0.16454250019711128;-1.0938211024733162 0.79951877944741634 0.78852508723889381 1.6798385302947973 2.8678248688296493 1.3397620933877443 -0.41722041190219428 0.89467874978724249 0.20497626713563821 -0.39634383602861306 -1.8626723294421366 -0.15793422407070462 -0.48054789571083467 0.64024427847171728 0.92224238036070416 0.66132825711909471 -0.48959465529234297 0.18365402247046922 0.30253419754741007 0.97111866087345666 0.5221491778209667 0.25436230673791482 -0.49520343331405242 -0.23000514591629626 0.2073009805288975;0.0094823001256085122 1.346577388519435 4.2265332812448131 -4.2644181944957262 -0.58501594174271754 2.2711018138515224 1.4455133750983098 1.8877467722586947 -4.1079823704352618 1.4838220689162642 4.4710068343983567 -0.99205284765808754 -0.84030313730458162 3.0333286761056368 1.7650121343020213 -1.1605678955624137 -0.84005351300105735 0.10129191601451888 0.83332291120557378 -2.2739245067557228 -1.1637958913456812 -0.60313363419594934 0.24677458381372408 -0.21384728773179415 1.4853058880710381];

% Layer 3
b3 = 0.92881036933134165;
LW3_2 = [-0.15155696676659935 0.15570073635467682 -0.056005008163131011 0.070573201131896204 0.16167646873038435 0.010815193330282958 -0.073461026511947511 0.1098032239133192 -0.1027436839096965 1.9490891936206372 0.16259296712108273 0.065038316814228114 -0.086027227767284054 -1.005272784148683 -0.08062791045239863];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
