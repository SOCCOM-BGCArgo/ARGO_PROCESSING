function [Y,Xf,Af] = ESPER_oxygen_3_Other_3(X,~,~)
%ESPER_OXYGEN_3_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_3_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9030616011819305733;-2.6056102606461801763;5.6888559947655430449;-1.0802907188853876352;-0.88967023603962502865;-1.8233061612414964703;-0.022128033900556995373;1.0655042950105204635;-1.671706214561650139;-0.75989088333373078221;-0.67850101515726268797;1.0770060010311170995;-0.46743410692805953399;-0.46052676840012024551;0.97916024984672545006;0.31910300026274085461;0.48253787493052802127;-0.86366292422011547991;2.6868699603320744806;2.1961710862632446428;10.23530486069849843;-3.3589367996205652389;-0.92621282189644160709;-2.6463545905418968118;-1.9092333512181431932];
IW1_1 = [-0.12648588451132358745 -0.004938109702958244987 0.90151553184748811631 -0.23518593488329750385 0.38632190061808957537 1.4328758514912514066 0.73290877055822789554 1.8225605563430880007;-0.17243579130450750747 1.0825874592854485279 1.0740088192713779236 -0.52773242369532602503 -0.7388322812163574671 -0.84964502667928454294 -1.3521472434366286208 0.60267836915696215705;-1.6623252231498564235 1.2606193950592801123 -5.7564722022305110372 -0.097393948803451035889 -6.1136118609163183635 0.2287723620240268152 0.3806859968639066949 3.4621267241236366452;1.965620899227762397 -0.72292614714075276172 -0.58493644249243303967 0.24912754722036264954 0.66774159997136406375 1.3106667763255734904 0.17079118104190146865 0.12869744589404000235;0.45404706341766126743 -0.25959261113471637783 -0.11288019426260524625 -0.37196875747192464923 -1.0281683873113569572 -0.0079685417997657249922 -1.0469339734491476257 -0.17708265495435990267;2.0108974345605052925 -2.7050770542175497368 2.2181743864715470771 -1.9921997190696227875 2.4619094193231396694 1.2205167064894570927 -0.76291050428934725769 1.0218329306138440593;-0.055583318656666408364 0.23067645711293660593 -0.38761955088090921384 -0.26636505855171127566 1.06093753145288483 -1.2689283250697032113 -1.1100753935514857673 0.31719542390898008977;-0.20206224216172652408 -0.3473845453426320784 -0.43120122042252567729 -0.15223828683744100587 -4.2212423276028365748 2.5050662163007149097 -0.62731874468671311451 -0.47580060396570827974;-0.13436841603927901501 -0.084637244734438482618 0.10377820838949865234 -0.99734071689888581513 -1.997931692871651288 -1.5351618439231833335 -0.19824792437808180789 1.0948291964397154352;-0.1822282404738481687 0.14740370337055760941 -0.26338834601483174236 0.6851846363596214573 0.47320174664871139658 1.4346061690659810406 -1.1831788942059837666 -0.21066884603975111201;-0.18754498999966923156 -0.081175520439995291211 -0.67329740483995437206 -0.095384029284525731485 0.59516471528916636835 1.7857596129761064141 -0.99025223409754814519 0.81674753569132529929;-0.1092859413143571351 0.25147059086199896605 0.48986551061730798651 0.52577352559868728576 1.2794952488321573725 -0.53271653989632239412 0.85615080802522425252 0.48405166373535846169;0.87863509366871295203 -0.63939084412398716761 -0.93308506274842728523 0.68470407753706719056 0.32165975611350888785 -0.37592400247845447758 -0.26701267714213949844 0.30356840851517719049;-0.42063755527832819014 -0.59269369909966962418 0.33448507840552066384 -0.080146670032710878862 -1.6482334586784568309 -0.29035515226867575356 -0.10242651104740435608 1.0158148763633949585;0.16026686271920786986 0.55496785560884520638 0.42192947926196966435 -0.80457719467153465676 0.98892556842875301015 1.7762166236772674033 0.05683150198233753031 0.26848800557946050915;0.11723773858808206327 -0.25530839843275848766 0.1041536201361409758 0.40439375885312273118 -1.5274291406771856039 -0.39097743932385597976 -0.73880085249621174626 0.057900012216346177785;0.61647824090183245271 -0.14014614004254477564 -3.0400781058342998264 1.0194958715271693617 0.028043215790462899806 -1.4446912199379675634 -0.69396819030659417926 -0.0075972249395584202925;0.55631046900216185591 -0.19989173073077828868 0.33357069793240368138 -0.37388252012206912855 -0.60041538812875827613 -0.80225853545999159522 -1.3451002316334290665 -0.015251914979419757198;0.33222681263868641954 -0.001122907922045905801 0.39782841853750505745 -0.13311223508337297061 -5.2904532479378572063 2.0456121620619325263 -1.2851999187001825753 0.58862997118622284454;-0.23546171451316028067 0.054518018133482178122 0.51691400369112983082 0.14128703301479064725 -0.35721598356866329782 0.86701721127764119768 0.57843131329021946208 1.4318581836035544352;1.0786573620488910663 -0.10039227005821539651 -1.7211492742568366143 10.952593391301920889 -2.0188417570447687588 -1.487120311933104011 -0.65835460082433039375 -1.5708248583120070219;-0.17348848791810378422 0.036903436689659292747 1.6196830621769717773 -1.7682778385806032784 -1.3405315466241600753 -0.96099645702039693251 -1.0440465126857834122 -0.48690505241389270275;-0.30473343417357978691 -0.66574975145581094527 0.58619347738835902994 -0.71728549260060237014 -0.099412819791882184317 -0.9409936399224604342 -0.19571266667193409905 0.96478311237071490147;-0.5146290507426641847 -0.26330467082545222501 -0.65284612605170910804 -0.18791634871395226924 2.2451320666254117597 -1.0360123163737902097 0.34478271516216607573 -0.72260352827252893881;-0.023634944648937273454 0.031082029459657503634 0.080536795136950861673 -0.0059979396508348086642 1.1839566048824947675 -1.8730689737259278438 0.28973548243484942288 -0.037319759591562820522];

% Layer 2
b2 = [-1.4813023086372179016;-1.2193429215392073139;-0.091989236343342772884;0.72155105628311888566;3.1813884909276799462;-0.48680408960891718984;-2.4207702014755714259;-2.4670975992345920424;-0.74468959690598457435;-1.3893911592104266628;1.5673144828348783975;-0.25353247514126975304;-6.0145270277764195654;-2.1110985874891103897;2.8031186024741407969];
LW2_1 = [0.17042993100808256912 0.56300447263676489662 -0.95511996631548889969 0.87506818309843947823 4.4348997737231323768 -0.73654510182444499211 0.1157594151076095923 0.62814911274796303431 0.53307873009783623974 -0.64496159538387820565 -2.6214132081624175186 2.4942288747353864586 -0.65855958448817619733 -0.31407897454785088653 0.66337844091904418775 2.0232524186196245708 -0.87716444513615499101 -3.7090469323967174553 0.24469031089696846593 -1.3587688565895250647 -0.47676225869523553014 0.6819958402532456665 -0.89527233515679693898 -0.28861182877182639528 2.9928994605207797086;-0.6060089032807350895 -1.502066415361282159 0.38409940376630558045 0.37459281388796200618 -1.9636724573198265364 -0.32492059675066115032 0.71705481996011788404 0.72122478890874464064 -1.3065625452133016182 -1.2177683650799473458 2.3691839028614767315 -0.6620656045627684172 0.008335397594396189852 2.0158755146708671191 1.5843901003229392543 -1.0124301767043424327 -0.32314178231755597004 1.4635027517228946792 3.3681014123781718439 0.42857673054716449723 0.16383290532001743012 0.89229968259793968066 -0.45134317113364641472 -0.065721986197366674687 3.723194402720303664;-2.5013903643758754747 0.23101147182155884474 0.73315972772189375029 0.7045590969892377986 -1.2745357280516045329 -0.07931089720463421755 0.85408251416287561675 0.49558570251040323651 -1.4944987860739669117 1.6860450319810553754 -2.2159327392795202805 -0.75351333947914911349 0.35557330013110222122 1.2694132972152203376 1.5549450075923711978 -0.5601846105591812286 -0.032418470116195342856 1.029138270090203866 1.7792242943754272844 3.2384880055298950197 -0.0033787470111968642694 -1.4976422973661809301 0.25082924865703676298 1.9141381345006978076 2.7705098424561183101;0.30610474588578173716 1.3046658504504540232 1.3034972629965770885 0.65617211177845680137 2.1911596989032444682 -0.66529220128072508178 1.4991559955700339835 1.9044162406779032715 1.6244512690679213662 -1.9996145676018450832 0.7701454448753951576 -1.1894903306078830063 -1.4032430633463917058 0.040292928215875413456 -0.13444355707875410566 0.18428099515041657108 -1.2464160098016376921 -2.0825297132115028198 -2.8676717304452705726 -2.0623659119023733943 -0.67589571135001980107 0.20982642577465304701 -0.25774917187006252117 -1.9643771015605686614 1.6273632026940227924;-2.1308456608145878164 0.71134871935780263907 0.92163108775746283019 -0.072863390979762590605 -1.3971765103566360366 0.091998628619950631458 -0.2354335253505981107 -0.90911479912569803652 0.59879229446453918762 -1.9333525351940656911 2.9352358920512315876 0.05033695106165841926 -0.54656232628077272562 3.4499070495686616766 0.3597452774996286462 -0.067060813265509680581 0.90696937725429904731 1.6749929232842040161 0.3670270961201610449 1.3473921136864548398 -0.22692605610436333841 -0.18323347942796994192 -2.5094621829986047956 2.1744976553730190894 -1.5191226059745341903;-2.1953656635305640599 0.11392665319250677713 0.0014494334501486700467 0.60569310574659451785 0.95950448569271962196 -0.13181155330646410206 1.7377679010612077093 -0.39528521832860691321 -1.1070108345896711999 1.0313041412561920751 -1.7108385780787007668 1.4483393274780043125 0.67743365595265359058 -1.9355729768269835933 0.45834543898254798133 -0.017890209787013895693 -0.80733193490084176336 -1.0690200621237015977 0.78570870524467395501 1.2853785268830821842 -0.0052369687272746656692 0.057693832623697365036 1.8481649580750039163 1.1986500505666863869 0.12088903169480445798;-0.58695892928487780615 -1.1479637538897848881 0.34274735319881854956 -0.097371193100430866729 3.0860680577958135018 -0.27603589110428750075 -0.6373044406163921316 -0.54802462988238009878 0.061125303390626627154 1.300987889381456597 -0.32340249172102325526 2.2378944932446174221 -0.19912856690639890722 -1.6055121740133491137 -0.1117717286588079395 -0.47061203930336442669 -0.36835613474249961907 -1.2047202666721783526 1.0452786744723652212 0.48020542016739997671 0.60540274277215400112 -0.26651333624026818381 1.2341889221387338793 -0.20932750403302927134 -2.273102484659642375;-0.39182256130512466141 -2.4328535251363665459 -0.98755130546597003072 -0.29233482972129337663 -3.9559935374812784659 -0.29260572844453053287 -1.2500524629197373727 1.8779512071611610402 1.1694473784047847431 -0.6572278497076476933 0.9996223282558506229 -2.8392103117923435107 -0.7305477324685175633 1.0690248272537377083 -0.38519721197640804933 -0.35158313923128303724 -0.69835906145899051545 2.6781928908802421496 -0.58510507056496940947 -0.073260553269516748287 0.70455045689548145837 -0.8491251106328510101 -1.0029187161949042473 -4.9291915981013563197 1.5709559214814843298;-0.39357297255553369553 0.24347496422155068263 0.55497245338171186102 0.40380468232389243877 -0.29510620807314713598 -0.13079932903547253353 0.54586787293455885095 -0.36645718634199764274 -0.63969773106935190476 0.77759213740320931585 -0.99910333595847944377 0.81735448471110494495 0.36533656207829401374 -1.1958471629179185935 0.58228343600074605746 0.6289111771040492016 -0.21275488979614362584 -0.080084648135797006918 0.076566080458797633468 0.38132315972759006639 0.0438501722828129048 -0.22766113004358040639 1.1831596447402317196 1.2995083255165895686 -0.18324845623818442064;-1.3812900114657429285 0.32469956057069926381 0.4736384630788527117 -0.18377035185984397225 -1.397385704155644337 0.16174064234221185998 -0.3387965242991690662 -0.60817472917468884397 0.18052098343319084028 0.55938094376328617585 -1.1749116815353937149 -0.42499187048923603438 0.32419878307379368376 -0.48055206031813346712 -0.94368779227660548603 -0.46728031055691110485 0.6936325696093673665 1.7324914865537257569 -1.3715507771635753187 2.6793553579003548393 0.14541332016502250823 -0.35201293181099552188 0.44709167753109207988 -0.079541351401370891105 -2.9382657563091232333;0.68134361077212146629 0.40257263381284136283 0.31043773377952527115 0.3641190575340965685 -0.7729241177380659078 0.022793204453466255066 0.74195492107020999395 0.16805645143161951349 0.43693340875888786456 -0.6851865126841184539 1.5684303261862462264 0.82301387283739690925 -0.43959515099903367918 0.37112415951836230654 0.17734590682085826785 0.6208922130395861938 -0.19113937277685461025 0.31049979308422503976 0.7627638396522719022 -3.5959221385943758165 0.49294087699487049159 0.10764973615258029149 -0.18134030981213317135 -0.80143209739464116304 -0.61730147099161336577;4.9676220808535349605 2.0540323596116150107 -0.42032959503276517976 0.032714684466409904573 -7.3249128195661610263 -0.38530356876520155396 -0.4935156166282516077 -0.51018177561735000847 1.3284765145230372774 -4.1243801682346834525 1.9673949891976849624 -6.2420184128714364391 -0.32557480235225366716 1.0357011152776542939 -1.9448803590689247578 -3.7785356510127989793 -1.0513543239059282008 4.2119840912473609507 2.119223428107606999 -3.3260689810232588748 0.08387488513576854543 -1.2407210973619589023 -2.9804650900900133692 2.1193926584991933382 2.120449352326309711;-0.729779770676609707 -0.4208009033284507705 0.19086692725082229916 -0.3995891005956785369 -3.925474716699168809 0.13660386583507772018 -0.67239781819787536321 0.45253391508504842156 2.2557402901845677867 -0.1931631654479333271 -0.33625474837585600518 -2.1819158083054777109 -0.75157801475021857041 -0.72686242729078998082 -1.4812418982195778572 -0.098519611165930776053 0.039866594021018365857 3.1882309467754237353 -1.529659188869163966 0.43603492025392975862 -0.28740455074822263137 -1.7666682430231044343 -0.70150981920290200744 -2.7058070273940511008 -4.3491979685047787996;2.9410748923527227916 1.3865748821082191089 1.1164898125089661729 -0.77300978018976185258 0.14227878020804107795 -0.2446023799727812531 -1.0285841547984162503 -1.2760320025459366278 0.84142998543331171124 -1.8517385894670641555 1.1303050835936991891 -1.0487842778745357641 -0.013473088854641789014 0.013300415962855166585 0.9259253972727508053 0.82341813486734072303 -0.28466549837937504819 -0.79318885337042510653 -0.80573565096382637751 -3.9528567944015895463 -0.71103952522348456977 -0.9392709655609794428 0.19907168313948442329 0.39000985417632050289 -3.9757610438388106822;2.3460442328042647731 -2.361137307348210701 -1.5378949478255401484 -0.093836909485854061441 -1.1428565062991742352 0.12096453397994046119 -1.7408735055082247278 0.23784758896261481986 1.4027713581762446537 0.76885916175381885385 0.51101251359382493522 0.18980830926434202888 -0.81444629289362424629 1.4639522491782133162 0.46622334366907425274 2.1150990853972380101 -0.17041883504543983707 -0.069427969784206927661 -1.2274766368359488755 -3.4834322672672088927 0.70677972693011203997 1.1933938346219155058 -1.3303832014468763845 -0.11332483856285749391 -0.54053228341910031229];

% Layer 3
b3 = -0.038215602402767515078;
LW3_2 = [-0.41184948556366346439 -0.51567670398231457707 -0.50255324372870346927 0.12592799035263610441 0.2323938980477515126 -0.64756648037444675126 -0.62937046099980142877 0.4580197806730729182 1.7408348616319626601 -1.3238413338431642696 0.43279132387009466854 -0.21871836232158847757 0.54147530217954575882 -0.27809318792141818344 -0.45269212482370968509];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
