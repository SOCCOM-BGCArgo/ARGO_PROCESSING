function [Y,Xf,Af] = ESPER_silicate_7_Other_1(X,~,~)
%ESPER_SILICATE_7_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.5187444837978176793;-0.11294847465385320084;7.0622571205180291187;-8.4421570152333575976;-0.49891271544199050636;0.047310090874869904776;-2.0786570181808601276;7.1416713799980930943;-14.301004731390891678;12.489699407487655947;3.7616791112743115377;-1.484972742894100195;-1.848028620299170699;0.28709008693480464469;-1.3886287000443267026;-2.2188730045745423958;-2.0716199457814368223;-2.3801958639892677461;-3.6704659999982935936;-3.3975871184577650652;-1.1329447976820641308;-0.10244754969675155809;3.5555459459481486562;0.72901159613279375993;-5.3631507267613836021;-0.26329626982603593355;3.2073499395434112991;-1.5188357477263976225;7.0133521714618920484;11.876626986036399103;0.67706448347556347223;4.5292347895661464463;-6.3924345274716465326;5.901012507939956464;5.7253691355805624852;5.9939393643266232203;1.1169918017659530296;4.5311524568752270525;-0.20658484967100776419;-4.4734322631446694629];
IW1_1 = [0.14267281099943129874 0.10527553963969639439 -0.05175575062547986549 0.54204991837724958437 5.6274814755732220917 -5.3746738874367423477 2.4432374561099723387;0.58341236547600583418 0.16624891103672098658 3.0067522223933091929 -1.5346923378043417774 1.5097595204002154379 -3.5247077715468813075 0.87507794735699273581;1.4647281030871091012 -2.9887221919262891845 -3.5165929227716952177 0.73300573524253653801 10.03804817105265812 -1.2614772391251416472 -2.8395544337864189188;0.64395883904094119998 -1.4556575438808745382 -0.26975999069584222223 0.40542937262704131784 4.4827019542465595947 -6.4562371767927064781 0.32041893031409790504;-0.92237359426978415833 -0.40334212728052304398 -4.0930594043701864493 -0.51990480717674281141 -1.643784654029662784 3.4788728656463461242 -0.96866515982065060086;-2.2579189987598446976 4.9650383155825732473 -5.4082893972202024102 -0.43050901350850384608 -2.4108022844896641601 2.1913122761521726112 -0.29721016356963658733;-1.0604722230240501979 10.488710023344518518 -2.7569995489049019533 -2.3623628926695832142 -0.64079080329752002854 -2.3702695338712618245 -1.1070989166095752676;-2.0140206945693748253 6.2292312749053433407 1.8369193439311841676 -4.3575436421773607876 -2.917785189069569185 -5.0643827916063814953 -8.5394822419921254664;0.27037441466308020921 0.21565909544228673012 -2.2611747461438116424 -1.0671696182148202592 4.4189321229252183088 -15.76866678727087745 -0.88954828289560849974;-1.5001685031756155642 -0.063346783866311637268 9.4978864243398088973 1.8984039437094453184 -6.2136674185635953904 4.0113597760989634367 3.5558346425536937474;0.56602106846588629008 -0.72089662263979692458 1.6052558096007312205 1.1395911598280443755 -2.5413068201756612297 3.2676830618103074322 -0.69717566268873998325;-0.30118160795746135028 0.23771704968628251664 -0.76309329646911538969 -2.1411785728568841769 0.19343950582163879637 -1.7210185784037947965 0.42692947446951240442;0.1474439868196931458 -1.9859246931182108487 -6.5449656560353135504 2.6093228182108489932 -1.1671497294849226822 3.6484985317206350963 3.7292430330364756408;3.9521948337493664205 3.3620619175664288036 -4.2234515572664452776 -2.0359986066662916215 -2.9454244208191755483 2.4803517865451536473 4.0077343529514131149;0.070498439041968397056 1.6510579758830647989 -13.575492446029535643 -0.62531572027753834497 -2.0940152240672196271 -0.6157651977685595357 -2.0353280164703844157;0.29192685882575880596 -2.4880645944397041802 1.5038993336527937128 -0.73359852834160965696 3.781371958688724888 -1.961256075806820931 1.5547380387912828059;-0.35045308759599635984 -1.3928065234448649967 -5.39428993459207895 -4.0045164336580629794 1.1824049602966650863 -7.6572371421871698871 -3.4982777491844747608;-0.050501814357442373349 0.12974081830029887685 0.80536211151282555143 0.43552352127564591955 4.3352046735512539399 -4.6892480221694299303 0.66650496274371928696;-0.63240447813687283851 0.77424025611046864981 -1.5859327605901354374 -1.0967592301866249116 2.2343127450689972413 -3.0738205272293841475 0.76379697487865139127;-1.5245723991602597724 3.706896772737546808 0.5839364595767225774 0.12373834892032052613 0.31055444481230465303 0.045995646453618019289 -3.1069455662004141772;0.22736254060410041045 0.03795184815992474342 0.83098084260544324842 -1.1897950495770575063 0.80258384689355610764 -1.3479713413332379268 0.63106927338107754455;2.161117854445215869 6.2756776117043449048 -0.37209287337006763385 2.9917190172639407386 -2.6880566595191099921 1.2668363571405536483 1.2421287484298209058;-3.2529176484580091255 -4.1312726993996458091 -1.574354417904517911 -0.11618691730562022424 0.16552882470587834685 -0.26975537161998119906 0.49329884753724512203;-0.0055325759497606239595 -0.09513691800018225786 -0.19328514956383968659 0.54307984363222638891 -0.71102995749887698551 0.689797863618290652 1.3159168867127630786;0.25701793258370086992 0.12513790584762835012 -0.2765421518860537442 0.39937317729514065778 3.9234795949518881386 -4.9171359047447333879 2.3062265868031532889;7.3307816139078685325 -3.0390518972119795471 0.52829826615682229374 -1.4398445149702645551 4.6039740355620111245 -3.1203659975956825612 0.64920895086743857227;-3.1323391789524932527 -3.7485510412410141257 -1.780513427083136424 -0.27163613048176254994 0.13117620060417753414 0.0033781417581243817182 1.1131796822623107879;3.0684776411800265272 -0.36675018416871246751 -0.049225888023653588399 -2.6074667634225807689 1.777862039516716619 -1.3575425515838743795 3.8470957886199377285;0.51772874426318260532 0.094030928545367112315 -1.0395304507949894024 5.527934430595498938 -2.7495477422971803527 3.528264443238271042 1.4022413676769220903;1.1730535158970942788 -0.40044870370796881165 1.03900454451212787 -0.72394682468381932328 -6.6951477426140053595 10.246964399114583344 -1.1518532404464099095;0.99580492400608178194 0.45884200890884291324 4.2616956033058892572 0.68908716385224744183 1.5678473588868675481 -3.4630636144960549316 1.0846182105803041651;-0.22069774432401303987 -0.39002584948948926247 -0.6576653415961712934 -0.49336213739687739821 -10.546860757283615939 8.7903988538700268407 1.8588487028542735047;-2.0090234006113250054 5.2479536645273539008 0.75064793072183932932 -1.8991033591832631178 1.3501226145220852626 -0.32817403342557860402 -3.9243839148435837316;-3.2068907281786458441 1.4449626310767962334 -6.3556728723066182596 4.4244117850512534318 2.3978213523971363408 8.88386893593184368 -1.5176003691294346343;-0.089975822700520208253 -0.10563216371559024098 -0.10577240048744974976 -0.7866313014242166668 -7.0158305988837286193 5.6034081062339602397 -2.809528848854493166;1.4197684146271156713 3.3964623502647257602 3.2475709562794623508 -0.31409512136113143521 -3.9077795362051590544 2.8872996539892721302 1.442979854664463657;0.032099492284146956267 -0.084647355957334247112 -0.20427612573716294464 0.79617013680563186728 -0.70342083015450707073 0.53896300524199824977 1.3243663487102994569;1.9349866338535826049 2.4145345713768757712 0.4437546814746731183 -1.1042928701303227346 0.056977874947074874656 1.7028258255562713774 2.1197079159344625054;-0.1015798301860719316 -0.18413769480592723227 -0.14687916063130002087 -0.30095500969669541913 -0.65948807859312741364 1.1890600646757498726 1.1991185762153324657;-0.20448997911213950829 -0.29671946373285756904 1.9445982447829697204 -4.9733392263577682613 -8.5799379384605032328 4.0168012167354731901 1.6693159521992844141];

% Layer 2
b2 = -2.7541942145930073949;
LW2_1 = [8.584026071116667822 -0.080444028049786189816 -0.033318248583365440985 -1.1895064351430939542 0.71753827789031077167 0.019692905878510882228 0.0093723361778335137484 -0.027710117125090902301 0.12544333587256459306 -0.080211656672014172709 -1.0207090589692557892 -0.12763192854144758681 -0.039721302458409588065 0.015803310061432651601 0.018477263418923708937 0.051531388795566915317 0.022153401293744118955 0.22693766228469128277 -0.99114430106157069833 -0.15453908531091234413 0.38643110580000517018 -0.0092011066040699127089 -0.26903741025508398632 2.133990639457341576 -4.2607340940273088492 -0.016926115919198569948 0.2948630199965034393 -0.031150962772320007349 0.11311537396714808901 1.0600458644189505453 0.64851008112553709672 0.12022457804510580659 0.097100668907526485607 0.011812502310684305437 4.2411709713290628443 -0.05743150713362217552 -1.639057881522012261 0.22918282913132942413 -0.71942469457478341877 0.062346737969784189748];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
