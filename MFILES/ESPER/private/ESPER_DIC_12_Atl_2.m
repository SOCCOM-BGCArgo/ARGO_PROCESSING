function [Y,Xf,Af] = ESPER_DIC_12_Atl_2(X,~,~)
%ESPER_DIC_12_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_12_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.0618743074851366703;-8.1408906047804432404;2.1851629818864499732;-2.1944637251476164508;3.7285266054206904762;1.9916642153925658842;3.5427923154259670646;-1.8688129902147365691;-1.5721031858428260453;1.1015977893804640431;2.1814472832743714292;2.4915587759089783404;-1.1357966541227380031;-1.5034951236045288603;-0.30853523460404980172;2.7644258527402065795;-1.9434516515421611516;-1.5817864245244439569;2.2784445345180710518;3.1980179408376847583];
IW1_1 = [-0.35301334953065993671 0.31679449859061792338 0.029753063410113970294 -1.3563182621505978087 0.39899522891251565371 0.26453233329570069454;-0.42899819185958976142 0.047092810567721445081 -1.0170851170706798339 -8.4036596148008388951 -0.74088054531723968044 -0.52575174988384187902;0.18285874969312998495 -0.24125262581555304009 1.4670707845464479036 -0.94237812326488068493 1.4486032047793557798 -0.090557879662465604054;0.75800452614280666719 -0.51884785966337687579 -1.048779101483103382 0.30242353750280553948 2.2612485533001764892 1.0687492813298262728;-0.80510572422934456593 -1.520059194573476935 -0.34490029184751286317 0.84866248559552037722 -0.18212993850985126354 2.678195763545624164;-1.5805670547815757754 0.71740312887972346179 0.082851625418971633352 -2.0844432199482159085 1.9961447288289635438 0.87296718119360494637;0.35864335296947008613 -1.7827768750012478183 -1.0959873979164869162 1.6747927419234618363 -2.9146206354790713533 1.4544815755488020859;2.7249905360849435709 -0.21587343579888532141 -0.23081361079947271264 0.44107893977044820844 -1.3273854867139753821 -0.46281499326990543919;1.0886208972415056806 0.039858813888622494914 -1.0775870128255264913 1.7880050473799600219 -0.3019962749887690201 -0.73136717740276002697;0.37369698780763838108 1.8095941264646930868 0.71346299447923711146 -0.030258085759272669579 -1.916196226489773391 0.58557327642424938929;-0.37826875319996222657 0.29109679158079304617 -1.3968922436872710513 -1.5338594877424778229 1.1965875048917267165 3.6050763319067162804;-0.51284531206073669107 -0.77684305421519084245 0.22207344376662049856 -1.6912310506004057942 -0.52375232970284135714 4.4719983285613587043;0.08918545582315230702 -1.3601297072761837637 0.12792201047844831141 -0.2261195716358096186 -1.2265514432271795719 -0.92938668276070868224;0.023644035471378829077 -1.0489188070909265527 0.15853281958529252815 -0.48688309527309814317 -0.16281748624068254072 -0.57872278463553683547;-0.16944585003579459848 1.9992810973423051912 -1.6627149063007322649 1.2751048083696818747 3.9077722103430927447 0.17050415869803708935;3.6031039320414532945 1.5424754443624926203 0.30036453068961449508 0.08646083376785826391 1.5586415284827050964 0.25123662817558595206;-0.48439282705731168122 1.117540314055688766 1.6853278038378107784 0.44416081782008609569 0.7838698337295583185 -0.51032785997578455905;-1.2641283696321308216 0.32869944596457895125 -0.69976993950978005898 1.4408661773852924348 0.71769415229122113242 -0.61684957255336347881;0.16824685592938767864 1.1997507132126379314 -0.29338209925542413359 -0.43241559028784926078 1.2654634479714266249 -1.2559405410324875341;0.035422066584255389177 -0.65415041441530108468 -0.92763381326244365166 0.59057367081963407784 -1.9579343400052426905 0.26907849672237416083];

% Layer 2
b2 = [-1.928515243018522396;-1.5158142055277137317;-1.443844995630231054;-0.54635534640120753114;-1.4151253108208778908;-0.11895667483218691496;0.1705830718798512502;-0.084008974879969763871;-0.52700323114215985587;-0.35340299958899090704;0.31712279711890445366;-0.11440737726240526873;-0.098720498634252223935;-0.76253717811802579352;-0.31281495328072228546;-0.89554442755235119655;1.172221744868273241;-1.8394794971352537161;1.6291049390974603472;1.5145264789541212913];
LW2_1 = [-0.25052361586481619593 -2.3575343718198875642 0.19850264569287784377 -2.2011505006066722778 0.82092500249246491695 0.16345412531115607879 1.7687403423668988101 -0.084210872295870695114 -0.86720050441152873866 0.27107599934265724784 -1.5611296845429680769 1.7580333732509405564 -1.5949779655184486149 -1.6956841562350255526 1.3732015977686962138 0.75874537792551355331 0.66043723135484522224 0.65703824278892286603 -0.29265767500833289594 1.3477985623339379107;-0.40061844632714993519 0.80849113787198234604 0.34065915179532346713 0.10370912400916339202 -0.84641307297859857961 0.14100063188568998096 0.81234222387080357031 0.54451157003905392706 -1.3854724108329388166 2.6990036836458068947 1.2452428494072629306 -1.0427485436723857859 0.42390144118969880216 -0.51575945832796799007 -0.34207841306369884959 0.46493791976711068559 -0.6539793316437364501 0.18033590621798242792 -0.22398902193595590648 0.72605383254361977041;-0.10927656023477265446 -0.75353425225349135452 -0.023772597922375900831 0.39226737325323690619 -0.12505399610455114612 -0.74330548899697912457 -1.6694929908587630152 0.17838591903522743598 -0.6933687017282682552 0.32454705253351306959 0.4872187619072427256 -2.0826310212490621865 -0.27629938658911457061 0.075287514799728741388 0.18024737595787104771 -1.4942534011477093259 0.42230180140289286239 0.14164404817177986273 -0.37191995127827864875 1.1747022163118092664;-0.54870005203152927287 -1.8230726056334798368 1.0118957729807749324 0.52725072527342209394 0.99796509590533133416 -0.23255730990911893663 -0.73730149705613501343 1.2663483817981104895 -0.97757383565134736703 -1.0776746369546463811 -0.48108457555130085259 0.41435769608180589296 -0.45537133314932559669 -1.149280418214350119 -1.405295430665397971 -0.5117826668410534463 0.28073308277429448454 -0.60139541831931253579 0.90192130738567044546 -0.49147427325353459926;0.26991477354918730347 0.74579752882014482829 -0.7668590926874152558 0.46055059802714926054 -0.62595589443116794737 -0.65317641019242689282 -1.5404967715032185094 -0.93963997258005149682 0.33857797970063152615 2.2320450262234539096 0.15264310061132188578 -0.90503108592057879278 -0.0049487379294788809425 0.44074949962009468685 -0.41305633883272246942 0.48457469375826295321 -1.9616643872194716725 0.70948712817523473806 -0.77652516135396376651 -0.67102740601973986934;-0.76917011020998715676 -0.9652328873177358215 0.0030061958137116307627 0.50117502171011052425 -0.13610513754387768004 -0.33474439988938808899 -1.1310106526192311716 0.7375516979621783431 -0.190686228213686082 -0.40180419438772879692 -0.57578980134286150694 0.18776973596456372761 0.7924966677474795107 -2.1814995195394719651 -0.95613860935903216554 1.3685297961066695827 -0.18622036647436121526 0.087593306601624468244 -0.031125273346584998724 0.09595857150644557243;0.42153297844262094252 -1.2871962336510749392 0.9599086039752495747 0.42580735799551172605 0.1308120099775767764 0.20016084857058782931 0.9637790581345143659 1.1002209141374850176 -0.86976134416976991215 -1.0356761675561894087 -0.69492196827944785475 1.3213857658692804709 0.15060599050172335245 -0.38822207074618736433 0.67467774580277961594 -1.0386976773947522723 0.82143484640375119543 0.15481769354356517132 1.265446535080758439 -0.73778774313984374356;0.67466809614978473508 0.23245198609700790104 -0.3116709397243335733 1.213777442614101032 -1.411249241893600459 -0.091650041253585556866 0.58229352462035854909 0.63008289977100651047 -0.36047200692654285392 0.23885747989534630853 0.0092753447209383416139 0.96376141520950553421 0.38194798219111636417 -0.46412382614527997182 0.22445915347808692575 0.069514227188534616353 1.0742817644859319337 -0.30742051676531123583 -1.3683770960939349859 -0.66975330195670113032;1.3091993357790914221 1.0377976201166807524 -0.53385500186272061285 0.081435217843381299541 -1.0057156961187818656 -0.74176896093448263514 1.8982443440358787168 -2.0964727246499834656 0.095782093749924843151 0.77540683059768245045 -0.56230199162018223991 0.12106220861589402082 -1.3798962655844935199 -0.97645434912313655573 1.3331687512624523784 0.79231880984792890654 0.03315060184378083169 0.046952160282543974057 0.20528567621502111229 0.22069922305839578813;0.52523468445019605433 1.1079074387382035205 -0.68094647346649883612 -0.066860001150067002729 -0.075205898105730514813 -0.82236278496042936048 -0.8460611604400284369 -0.66593582960903907608 0.65897689665724590302 1.4757414775898511916 0.67438608950719480806 -1.1485221096574251831 0.45528285382167354989 0.10518937490570602622 -0.52120280182466660612 0.6240552175551885572 -1.0019902530368360871 -0.12004467662920927096 -0.57145997166350503971 0.092021369479297093763;0.050393503855155050153 -1.8566264046244764785 0.32923580307957878155 -0.21671682205995024262 1.7894113679579131126 -0.21718195887062663463 -0.71123826627020680924 1.3321321409138788816 -0.53859706254528749714 0.11663802376946451334 -0.54179466407305476583 0.38720812793685299713 -0.60757593999718384481 -1.1814500672711627516 -0.98816526076184663108 -0.46995965164549657889 -0.63475533757599489348 -0.36851717791186444639 -0.058562930185742580191 -0.4321254566220341653;-0.46886582234746299047 -0.64052451457844206129 0.17225679153265274768 0.84405183911649483974 -2.0275155927726942195 0.22986676484701284995 -0.47059862673338265227 0.2220304308207077526 -0.008029061782994353913 -0.022851376268943700276 -1.6170262185040737979 1.01899528138556561 -0.67641971721500326886 -1.1805368926933970108 -1.2548374004168545426 2.1296298485824363134 0.61333155600610100855 -0.22350906691024977069 0.42065456050272015398 0.85887079309954661444;0.28881160872097982883 1.5564234039374438279 -0.97034669145090535203 -0.57476354698641096697 -1.1302590991589001046 -0.46008742927639562081 -0.99805756393063294052 0.073659888428811617911 0.55952505849628308976 1.7102557850940685036 1.0196681431021510367 -0.23233609238917815598 -0.57350551865274501662 -1.1789436574343710173 0.52508758235185681862 -2.6122483746228795098 -0.85984223690612238133 0.50627067805305714376 -0.14008295209877366649 -0.62035332614802518592;0.16179621747812450439 0.58574960476845427948 -0.33461236284169154631 0.29060455206466045963 -2.1861497918265522244 -0.83198600689975044098 2.8082293237731534852 -0.1849738790403752664 -0.94355362361622563405 0.59918532806279445335 -0.69334282668452529297 0.69643385968566351441 -1.2106063947554039917 -2.4314372697594071049 -1.4570600743495236706 0.92322250896856861146 -0.90650706454319962546 -0.7244616065939435412 -0.61383141328786872126 -0.31324500794501725087;-0.35672901385358668502 -0.50547187152748895844 -0.045065032092917345352 0.27483127685788871775 -1.1250853767105755132 0.23986209963553659086 -0.12304231065573641157 0.42177287571993216098 0.43725048780429875972 -0.46528949622122023344 -0.60947785207533300422 0.99681711100631753553 -0.35556248319112865319 -1.7901241169785919727 -1.4309110885734666052 1.6928463333382390843 -1.0752251901397678058 0.49968272875743813266 0.62225865681932890361 0.44836322998268540729;0.26098051880564304694 1.5123101524782451843 0.18812170300009181667 0.38590959404936064914 0.10592182634131888652 0.069844794889902375723 -1.1152138924062711123 -0.96615103821805592421 -0.35992540917634757713 1.3677585508296072891 0.21652068536585958314 -1.9347952873441129906 0.44087408849893716667 0.058868670908714108847 0.81316725128593569938 -0.33075988742312906199 0.34286128489334805058 -0.7240541744511690414 0.45644445648546150274 -0.45732498366705487403;0.32264605943783825071 0.98076848099158786543 -0.27599208077859471722 0.5275495405543388916 -0.77721121533003056925 -0.30044362340839086967 1.8136304969510290697 -1.9100184025478368355 -0.34086603195446679715 0.96325576635660670188 -0.63969582129857294195 0.1633950309406514978 -1.6616915544649786263 -0.11876990534263309751 1.3013980696365137213 0.57419791955628285418 -0.11690942453107115717 0.26786464125574277473 -0.44772188165378268287 -0.3023092644664932549;-0.40645460868055743875 2.1130270267758017866 -0.64560691621202004331 0.5118903579925002667 -1.7964813141846454059 -0.41593967450072949488 -0.70644032255671362908 -0.20183246022143858101 -0.69712194050371278919 -0.52712872149271261524 -1.1636258310285172435 1.1228033159282468922 1.3844975162164900873 -1.3801747552891749926 -0.29466024089497361294 0.68254800872802645628 -0.63949283268137113723 0.063907535429048992204 0.021407701795777597797 0.62536530540820944868;0.46982214095457897063 -0.0053179506761009322918 0.63954664447545028771 -0.19283438044399681122 1.0519553521329116919 -0.087901175282489862894 0.346001555267991312 1.161461970760868434 0.33295366009805393848 -1.1063766628304938511 -0.5786843809000937755 0.782496791953402826 2.6503258797284807713 0.17352934885442503066 -1.9146553515162796355 -0.36681609820183935788 0.1395430590216729938 -0.19999108022824663156 0.035398482042469731068 0.054586092497573832083;1.2875240023462428685 0.81511522837428840305 0.47501295476039845367 0.14254575055651372284 -0.22412265895821659178 -0.20313677395988941066 1.1190306643118035357 -0.49134803325380627115 0.046184316971116315398 0.62195820615738628412 0.26200898390867261023 0.061235499963626684183 1.4766758021948842572 -0.030936375043125765444 0.69303596273532075411 -1.1970752324675686395 0.32125886860782576493 0.48308921141479344019 -0.14429324167652832211 -0.34168125065626309134];

% Layer 3
b3 = -1.8416709237147435019;
LW3_2 = [-0.13299063204042371744 -0.22335973156483010515 0.1152867648438574838 -1.0644702408159809615 -1.6458634786545280893 -0.35836681495460948055 1.4018267124665599876 1.2773843179956978489 -0.56064589793081698321 2.54986980519230233 1.0109205270797545495 0.13020613058421587338 -0.59299061063022673324 -0.054509872846977953931 0.12837347148130942576 -0.086282247841111561759 0.61778450170188325963 -2.6343132822312855801 -0.042930036759768738786 -0.27023004520656340732];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
