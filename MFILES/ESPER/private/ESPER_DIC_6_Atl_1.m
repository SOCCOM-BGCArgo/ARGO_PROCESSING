function [Y,Xf,Af] = ESPER_DIC_6_Atl_1(X,~,~)
%ESPER_DIC_6_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_6_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.206860965383844686;0.58384143533499233136;3.3150874030735866249;-4.8896165609248205541;3.4787418624011579027;-3.0864869244225050515;-8.6050863682356482087;-3.3087648512664840084;-4.6450063124997758024;-1.0929190715520902266;-0.9464776727104393661;0.61951741314910213632;1.0086994257477890358;-2.1597406185101637455;-1.8249158718594888917;-0.56304588680181810734;-0.47245770155529098755;3.0171998208152768228;0.10870243275191840415;1.2463807727428972694;0.97275654210141737632;0.16545295668696982649;-1.1408782837413193878;0.63059542751751995748;1.0096619074266319771;3.557220436468800262;1.1720908304046475656;1.286724014814524919;-1.3468273900290181899;1.3558613869074696012;-1.9503373316212133659;1.3946585632763548457;3.5497539317650272928;4.7125547288078983854;-1.0159520119138834016;-1.7785844391914202856;0.24334086589160860981;-2.3126503531081188392;0.66673989099122377144;3.9851333856620057006];
IW1_1 = [-1.3190002211469924465 -3.542527173160921361 2.624629057347640515 -1.3882501547331034253 8.9700710109340260345 -0.93417917083542090229 1.7798526916752765992;0.16022280420089310415 0.066644088238023452275 1.6110808159300975539 1.1843254650428263197 -1.6964498472067284229 -2.3573461904662762478 0.3242869057613956274;-0.46875627336175573756 -0.10759698345949013365 0.59660095799910883851 1.7388385510580668392 -1.4741635197056808249 -1.4766525107965184915 0.39079600706468575755;2.1058631893122665701 1.5655871800084224521 1.637707738393393786 -2.3642588916623452633 -1.4018190495794080608 -0.75415399827150886303 1.950016966958998843;4.0834735673203388373 3.8477699078355582785 1.1777187449342898518 2.6667839048032502269 -4.789070136709799641 4.2701266444447973925 -3.4921597647320874458;-0.74951044498333552202 -0.041680765487062003405 -0.30527686740650356034 -0.30336081565242317692 3.2980520812539739772 -0.28125749699214841471 1.4956029651976237016;0.92719762886638745769 0.33596404255093209601 -0.79926736621108629421 -0.070435228642714411973 7.5725947612109099083 -2.355882933428339765 -0.066933035471349572321;5.843998199616125433 -1.5377860508737482004 -0.62495727159540948037 0.21690130678398195085 -1.3425107588524731739 0.33751157638262579974 0.361015240589306452;0.64822919959333180628 -0.50866968331857953523 -1.6073488498481935949 -0.92633720150410714389 -0.58773223986437184152 -4.3460552479491765254 -1.0147672047164064679;1.4939983096089919368 -2.1712744673779447169 0.34740816464558998966 -0.19109232910732260047 -3.9439280989145060197 0.67340773004247189704 0.60045108923606571594;3.9680031044352719327 -0.73473338455786862955 1.0941894172453325851 0.46487413812939021307 -1.7008424465310203466 1.3567464954664785193 -1.2892342967759544692;4.7694618282415852661 -1.0215583367331448894 -0.063544073661488814642 -3.5344010404312253826 0.66159594062781434953 12.068206971101734126 3.0918532095195905285;0.7713739285533383061 3.74500791000427391 0.76127073265410016845 0.27115699616555810625 -1.2436357519554783746 1.7365997912568607031 0.12934654086611904744;0.06039586183832066496 -0.46548126540077999769 0.096914509131252699059 -0.54488430150793343287 3.3336622994966509381 -1.3953910826671163115 0.46797686604816979283;-1.8881418914459733305 0.019518969970892086074 1.3630501793483116302 1.0285657000675476613 -2.65791438671460023 2.239339139856141081 0.73930277323811188772;1.4405980899867041334 4.1047261283098936957 1.5687482990483418988 2.3313578551747200507 -1.3995721575907693612 0.44900645765725377689 1.3509334271641662006;-1.5640216129885831098 -1.0520733921025873236 1.6447913100520272778 -0.23512440162131345578 5.3006618509032925601 1.2784145258706987036 1.4406241887989714723;-1.2005911529365593804 0.87497354143150118944 2.1251701978990014119 1.4488559363376920519 -1.9155836998883879474 -1.2239050951867518346 -1.2066879629180773392;0.97464125462557493762 -1.149291605162406249 0.020374654078717323313 -0.037235458418230470146 -0.27812406385083893179 0.37747176990312092393 -0.46950989012082106067;1.7476820346471124701 -0.34435164267550100181 0.29097043605439487646 3.0379329224814339838 -1.1640657375106215898 -2.4694473017252485114 1.6969121699734717179;-2.9114689823584982697 1.7136956578098621051 -0.25961190177687909486 -0.033578216330382854027 0.094648430834816443813 -3.1420476077551988681 1.0852589170931541407;-1.6500583522689622473 3.0552407469278897167 -1.7387277848799360669 0.59138071882783205258 -0.20726495337849576428 0.52991408673793993778 -0.65156632222198462845;-0.23707929730081811481 -1.3549046941201128291 -1.1080492269884345546 0.18678063461029636994 1.3590045019788752345 -0.71377296409523172116 0.43708814395063977365;2.3557829439246003034 -3.7008909618920711182 -0.82131748453199993065 -0.15421737265977533693 -4.9303302613693569256 -1.0275981023600304631 -0.46863463596296400793;-1.0263949526117344124 0.27865604191012227631 1.1632978100926509857 0.16348470532400488642 0.4911416269722314043 1.1041790941243718738 0.74822789061530636801;-0.030423159875388221945 1.6271924400871209393 3.660514003418624096 -0.72220932347505217841 -1.869724029718650371 -0.96688360628801761631 -0.39243839763994220471;-0.084998000824753866533 -0.25032958839567553966 0.099574890036112376213 -0.020922167379694073253 -2.8637461207114744965 0.73391703112731432324 -0.3835708484293610665;-0.41604037018943779147 0.35845557929554422438 0.41085788765137987166 2.1856776113664162509 -1.2495685625908230509 1.037893249708369714 0.042174771099196178836;2.8628389222716243978 -0.9859801706151907208 4.2267964827047288523 0.17996803456036380986 -0.76514106050483243759 3.2725430930389425299 1.567922389361472435;-0.071114916399912492251 -1.6993494335596532885 -3.5146169746543298729 -0.08326293100887273424 1.612609819840714831 -4.8126046321697382169 2.0902593021606201695;0.090632480057488418179 0.7705410300578399152 -1.2045879242368602302 -0.83331981410815370026 1.3242937211507679329 0.54993029497473888689 0.54420057768954066546;-0.49180374389974584881 0.74444641681599343919 -0.16661504294191811781 -0.013015791820612443094 -1.9816536643891726754 -0.24274999229519031441 -0.078321078387613304872;2.1236529683120810574 2.489459304333032641 -1.074743459703160875 0.4151398844389364573 -1.1829381850457774128 0.44963541018245362091 0.083586026027587842502;2.0745339971742433605 -4.8601281046572184508 -10.275780678957353587 0.43889152430232869495 1.5457801074862289603 -1.7467404530035293142 -3.4779259950566863147;-2.282176450686096203 -1.2650364536462752607 0.056077906141860284217 -0.22858699445986213616 -1.7606060578510556169 0.47392316902353992525 -0.22366515807917536351;1.1721416515351612553 3.2153115680630426354 -0.26112346521648716058 0.39754334146730196942 0.14782342121421404579 1.7567785660498473899 -0.48461600506349233886;-1.9023226726589286262 -0.54586170102044762054 4.0552703734628661181 0.12130482842985744474 5.4747407761251247749 3.1833466682264850434 2.1005522974349286613;-0.069202036442707365316 0.20934233745240901636 -0.00087685473913156307402 -2.309337180774156284 1.8271318185462352979 1.2093167861546509911 -1.9207778413382146088;-0.68404649971710418388 -1.9736939376980640048 1.7870257015032626757 -0.13307989587884966332 -4.6454783556059622285 0.238080364139629852 -0.45044490727604946656;3.5714236351652641765 -1.8990874590292432522 1.6662459436166494608 -0.012056666713110942429 2.0831990163059539434 -1.9787301990625265624 1.4691289393537503294];

% Layer 2
b2 = -0.042980227527857996217;
LW2_1 = [0.0176695577119740585 -0.048643734112321181107 -0.13512735793588720457 -0.063980521945706081421 -0.0092068103376017548789 0.17705321931655959578 0.2637394548466044375 0.03493407440032138267 -0.037963552593094751497 -0.5186856010201215117 -0.029291489956195713301 0.0032084712198484147128 -0.11981370183805140073 -0.29707446948285265442 1.3836671888260401175 0.012254321241243953944 0.12729520006307201707 0.049539036240058287319 0.51140358944501929095 0.02138490114144771248 -0.024859724531690840371 -0.092325763378184239061 0.14727916583755534807 -0.098395919509044915685 0.13863788471766488875 -0.0073127593977611263926 -0.58415394286233179866 -0.020641778483949622947 0.016689666289577190922 0.026426822915377658207 -0.11578212459983176774 0.77821593199941774266 0.10717417962986756919 -0.019477909665990007781 -0.20402103216931555263 0.077298491676968256181 0.019158710277359231738 0.042281407141313370746 0.11962126620783300468 1.3638222037622300675];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
