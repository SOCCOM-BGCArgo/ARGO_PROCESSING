function [Y,Xf,Af] = ESPER_silicate_10_Other_4(X,~,~)
%ESPER_SILICATE_10_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_10_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4529946962359439055;0.91001569318955177756;0.99083966059458494779;-0.88971518787501469028;-1.8403069602565480523;1.2660037157264385499;-0.89382507093055574288;3.9049384435963814255;-0.93681212032668514933;1.4219205855424594809;0.38859780525961429287;-0.58745365576054031642;-1.6233711373555548274;0.022207966626989268655;0.44818269374005564876;-0.35232764972543872961;-0.85518113942248219495;-0.88929002617327490565;-0.19238749895692358605;1.1633225753881570874;-0.65784072279573047037;-1.2366386736484134001;0.095668664943927506084;-7.5529146819740473617;-0.32549937136008905147;0.62474747589078416521;-0.49621586157257907557;0.8008463610223026663;-2.2730169701710716268;1.4093564780505212219];
IW1_1 = [-0.75176552198745538735 1.7997341488471219062 -2.5457401194429016833 2.1325610399261942796 0.13353396275739704002 -0.024221984733167174764 -1.7457597683581780323;0.023584738533940875077 0.33889269529991150609 -1.3669182980031531205 0.84598208671961849792 -2.8571369366145522584 -0.85122759968846806178 -0.047590466710283232943;0.12617751100128410391 0.35282266274930534911 0.80836730365857190073 -0.22241928106943520405 3.045378612568379495 0.21910110421579195861 -0.61655633067110293677;0.048029096596466772096 -0.34992530024021417656 1.5629524265337000344 -2.4571559954375947754 -2.646660810097281491 -0.13249088066689698739 -0.64118065899209042424;-1.1696799402265385392 -0.53610385962518780634 0.17327388056362830193 0.37568278708945190836 2.7804578627512057665 0.67735626371211221652 2.1019564803323107505;-0.15907269915263769211 0.22299261535230119335 0.36256497586168068281 -0.52282361431830881582 -2.1155244025318529211 0.036754513456573420505 -1.5253659036959585915;0.15713708140043272654 -0.33219698403757569327 1.5888466225689334976 -1.736147622030381088 -0.79632714069690613279 0.048614012024808195278 -0.45140221210810371755;-0.82577277914459334962 -1.7461829024133210808 4.2688982462403020079 2.3226863369731169939 -0.50524698781132937331 -1.1300239349088789798 -0.092567628408683919061;1.0867982257614621222 -0.66184221914313001722 0.78515528618362073754 0.46363272262465732299 0.54625405480581734619 -2.2481704641217810092 0.57516848612816606767;-0.26545056376758602301 0.2396434657210522734 0.37772731657444097442 -0.43883082298444603397 -1.4614012958285409471 -0.07775464765428223568 -1.4759029199703321833;-0.23019852183997846495 0.25257952224333851676 0.012390204636202538716 0.24724897438726653465 -0.4671616622325080459 0.29982764614404094905 -0.29016188141032922543;-0.46404765142247633714 0.23152185676158915095 1.1668737786487441976 0.71213573715556199861 -3.0517129960310045433 0.44361177182427274923 -0.68910950752309352296;0.63728226134266285907 0.71284946006607630142 -2.9647948590374975097 -0.89171903000189889354 2.3985325321357597872 -0.54310177219478683597 1.6637342502669154598;0.28640543589614664288 -0.32037954790452111142 -0.3426953496787748521 -0.27585475519379359932 -0.53040935146122969446 -0.44636696372922057829 0.39791949346232180496;0.80640552775274954023 -0.23182400937457772749 -0.35135277281000465432 -0.70310923490591270557 3.68433308360224121 -0.49371147353644745381 2.5415350693765641488;-0.08382015043456818304 0.063556406457445854818 0.048933348848529067965 -0.66011594505025006363 -0.16901651413419749304 0.42949207670738781539 0.16006439127933649869;0.21432027214232246548 -0.38009443905245454687 1.576036064415188287 -1.3281091319219235913 -0.84052849808826235467 0.17637108109399368683 -0.41415747132443192502;0.060789646246574742527 -0.34079133132316230537 1.5694799996014934251 -2.2733785748792358916 -1.4381810372970882383 -0.062462472521164671968 -0.54917958690934576271;-2.0109053000719088189 -2.0923995625810491994 1.0479863889820468792 0.9286616082051227794 -2.8918466114489267405 -0.1908621513632424993 0.19947943849524074622;0.41944922164328724001 0.35712288400420277856 0.53303486319113213554 0.44201599234260158244 1.2546211318609419294 -1.2473504418511558445 -0.68939510257764624601;-3.0361933950211557054 -2.4647859116464023721 0.83380377298505770067 1.0114083186600835162 -0.47443897341344132279 0.87072924709067900384 -0.47135786721219724571;0.17937055679985636214 0.48899577230347707202 -0.25152946630262829064 -1.6162776678259886953 2.4669161149845240111 -1.2195524594710247523 -0.59121957621347265288;-0.14072397119968588219 0.1453566541322679484 0.4025909371560066341 0.27426421704657633072 0.88570075981926288389 0.28439889060441958524 -0.22680396970014399249;0.68682849388695921267 0.21080218041155207587 -10.997932735608602073 0.22353850700585312095 2.097253917611060281 0.57299664691166773967 -0.10832669598420389956;3.5561593146506753627 -0.68635695414287267724 2.6379874409595824858 -0.40787313018455972902 -3.9948672047178610534 -6.29022415318907413 3.0305221919973375222;1.428442705971050275 -0.58350423227933256864 -1.949374780943935237 -0.64355244557174295927 1.081619289268453743 -0.62452886038220101206 0.58928936258724695652;-0.51141020189690766795 0.39627322496263595042 1.3583894654698767113 0.77121165828073234838 -3.2116718836555944172 0.17727936800749591328 -0.48555071225001622537;1.4477880382689247707 -0.66180845198428461806 -1.7762277780109954062 -0.49313333394440728163 2.2073163867115872527 -0.48660701701964237387 0.42077235484069414051;-0.40108788892190255782 -0.68027964682217667569 -3.8024992708884841619 -0.65674234569361933378 5.8531855047248466661 0.61240373798242442316 2.4107493846544154614;-0.55994346014640872244 0.57413709880046770451 0.41333395850311460684 0.2799173227456343005 -0.51166085236559566418 0.85998744811809846311 -0.93524130295663365775];

% Layer 2
b2 = [-9.2323603117248769223;-9.0173288440195040749;3.8084811692698425922;-4.4299685162675803696;5.0662361728812923545;-23.596411388816868282;37.59597328173973807;-44.461133976208778051;17.214616951662176092;3.6770428140607918088];
LW2_1 = [-1.3676051114844516299 2.1289177077548178119 8.2819676516829030533 10.527418092474514211 2.2323722295194912135 -7.6862508226715124948 2.1354595165899574738 0.95185958421192207179 -3.2442625709647456844 13.010488929235744848 -0.11232657146450426844 -19.877803962210133903 2.8789972870955495843 7.7170561798647625551 -3.3928485584713863332 -9.0876760970602603606 5.8199649252823713041 -12.893068727027646503 7.9242741079531864301 -2.1980104915671065946 -4.9519023181095578323 1.3002390800873511179 4.321760146968776084 0.65028517181094036559 -1.5237665863549445522 7.4675659628063364437 16.54493351477509222 -3.7941278282807937572 -2.9389895904116758452 -3.2891280736460104528;1.1320621502394851987 -2.9443272899682462196 -7.5851288047943787873 9.1167740876297571617 3.5994898873674738837 50.475782246721657032 25.337076756336212924 1.9691583511264054707 -10.781251813945456064 -34.547933522437496379 13.145922616172088127 19.364524759001461973 2.9827276117919829801 19.571023301930843274 2.1101777216705301932 3.8111312312991407758 -12.4984941484730534 -24.941258068135940817 -4.7405421002510852446 -0.0049176725415573602565 2.4427784427624721353 3.7869769270223545554 16.820316846142667089 -3.864570795843686124 -0.086859419020977823855 15.155089011270057142 -14.652754668106993563 -16.595500513898223005 -0.51242515362761331676 -12.602815444169452874;-5.7303757898817249128 1.0390681429981305506 4.836513457605548183 -6.5518765067551321124 2.0879910251698996504 20.561969106243353167 -22.835753641673097292 1.1102411186407046273 5.8309964117821015961 -25.083685891280545377 -8.2246456747814775667 -10.457426107084241806 0.64989824328004330845 -24.58671030801201951 -3.8794722214698631468 -8.2453171587785867303 15.272505453475387682 17.872728252639497271 -3.0955997406704223174 -1.7864201312562362212 1.5352043651543494374 -4.2700815451007647638 -22.798218519606379573 2.5870978686773118405 -0.43942834308897893436 -0.48286058429597833452 7.5741204805440460746 4.1108061682491126021 -0.58234803558237735466 5.0997251224166282313;0.52678486498742405075 2.4705732173343490921 -3.9641039722066646611 -6.9867654173372786275 -0.89419422540311244152 27.123196089196891734 -6.7462749049748174102 1.2544264705778991331 0.54905047533428230633 -19.749639346043093013 41.852664245815326183 -18.026200573484679524 2.004003859764841966 55.605456313811522762 -4.8594409743849986683 6.4100478244161145369 5.5297062789632658308 11.095309008451840427 0.42388621691040084816 -3.3317063269235731582 0.059294215084127049886 6.6976636468983095085 59.601464892652025185 -2.403149456812934126 0.32472820621920922557 -0.8213346157629923816 14.406690001822356706 1.5888060630090656833 0.60914023440524456277 -13.11292731871604289;-0.0042616934732987356987 -0.81644983751990118925 -1.8096578339498308186 4.9147005646527954781 0.036435692982015939478 6.2577885437052529483 12.428732150334994344 0.011475536609171489016 1.1369571141608756371 -7.1650045635985675219 -16.593096140190645826 4.6230668033162292119 -0.21801875565932787859 -16.805485721948436151 0.31147868726967703479 -2.5901756447229584701 -8.3624644110281582954 -9.8474135871663364128 0.14111597699924638416 0.58774508530033686693 -0.1244175868118251177 0.077187676661913423581 -14.182641300043124843 -0.054277088206566466433 -0.077132363521482602553 1.8852103700269393638 -3.648829144405449032 -1.8416846738979955056 -0.046573252290676943332 6.6951734426083797658;4.9903849886002218383 45.498034660614287361 139.61521861109903853 27.784549726778294598 22.084588027595017934 -121.52896221734680182 -18.200504252707897734 -9.4875834414035900011 -28.903017021030162681 -2.9264419597679607321 -1.4690807953305222711 -75.776374146713536106 -1.2525598225339629188 -62.006570884347866013 -61.116504475538711461 28.261090046589202984 -4.0435809482632611989 1.3850154333808599727 27.369535928102937561 -15.4703125337869416 -8.113610824916976938 -47.987922735887870829 -73.225196374160788082 2.6346265143265394926 4.0648380911990900088 61.277331202732639781 15.675896321702591507 14.856917081379817702 -59.883808377241599885 -16.151500493401396596;1.5304119493874535074 12.387670637151547481 -38.010363973703647389 -1.1410227012997371521 21.208099791666462863 3.9310053490441276836 -2.8555140878817901751 -18.411429513988021966 9.9139697892517961719 -26.047916058845324017 -7.7041263302528975032 -25.737115643779937102 -20.201008697680936876 13.24160537028057405 -16.791486017705640421 18.218602136752839016 21.425566591873032252 -1.3189989112565549956 6.7760585814673079952 12.682988338235215764 -10.820257110966895908 -20.113692155999689959 20.125094934573251493 -11.900093097636998962 0.62061820652559362976 14.999425985793239491 6.6929714517191998269 -6.5152955933713361247 -10.4577560092832762 8.7085488416159737568;-20.162885725901233513 -26.908215885702603032 22.323444428322545718 -14.347663885391982674 -0.45485463913955365145 -53.254364423365522896 10.621447949516884535 -15.932017025832506008 -20.376691177096070362 65.254315844722853512 33.176727961440164449 -6.5435499734994024834 26.531466026813642856 -57.103430010582414411 3.9022592801361004611 -44.934162556938893829 55.441582452957796079 -11.453170907261517542 -5.5032640350088533054 -5.944747674869187648 2.354462562006184978 6.0413243321822189813 -74.462466727636467567 -27.229573777945720536 4.6978130949585903409 -8.4210817008991032395 7.1363107690990652543 6.0405649046989289275 34.388573181713191218 -7.2571452570179646457;-5.3395321999309892647 10.277549187495303329 -19.244520270506054516 -8.3017883125248719267 -6.7534625554406328973 -0.63244769186045823872 -0.69224427379436592744 1.8098353835764393605 -21.508117368992049734 -8.4793826397713853993 -4.1511763693113490348 1.6656011517057300875 -1.322148516662190243 -1.3228622928998836628 3.2848687562272296248 1.1399587678626139642 -15.927605919526925504 -1.7314553461625927788 18.333038988964773353 1.073910701207222651 -4.3595564082176272436 2.8356058631003522308 5.8663252904860732073 3.80964740137539426 -7.8818078858087883276 -12.847495540757373433 -3.397587264514704497 9.8789858349993586728 5.0831639842170019961 3.1619726530931626662;0.060826148831767165581 -1.6184743801132224217 -0.081947582142460270727 -0.90767971673723990556 -1.9337252488689493646 -1.7373879797087365962 -6.2213904163316007256 0.71327652128463214787 0.23292608697435066012 -2.0557279685557894311 -20.809864014651232367 1.3408751130088900627 -0.062439671316050236738 -25.883682162435910357 0.72292156309446387041 -3.0705856881896287369 1.3222527398022692058 3.6452893291993611058 -1.4287331273315044822 -2.600405071307070326 1.5495660651126839102 1.4049432838604969387 -29.460891331461777298 -2.0225624205019641089 0.34973550718766144296 -10.986456722544334141 2.1950955718438676101 10.885792776247720681 0.017149316315079973783 9.8039502067016357501];

% Layer 3
b3 = 0.037232112885262319546;
LW3_2 = [-0.031370489877209500884 -0.044755338198713093267 -0.047387296745392756825 0.18610778619406240231 -0.9012438859239304545 -0.0095584640627789634743 -0.0093048738979991055947 -0.014363275378052589235 -0.0056383865842604104571 -0.27048999858860023338];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
