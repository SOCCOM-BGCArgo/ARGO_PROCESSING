function [Y,Xf,Af] = ESPER_tco2_3_Other_3(X,~,~)
%ESPER_TCO2_3_OTHER_3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:53.
% 
% [Y] = ESPER_tco2_3_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.864954121809494;2.1214008993323077;3.9056172246104839;-1.2383109137986767;-2.2811440561372609;2.4829053843795932;1.996799873334558;0.97566940751412201;-0.28117163191215588;-9.3292637916079446;-1.14720145841813;-0.67190658808036408;1.5478407621795689;-0.091470593046118528;0.8043429054513842;0.21265726056577089;0.50413827850105064;0.69842368503627206;-1.0000155574770559;2.0698245408376934;-1.5832179096608632;0.54758850260021996;2.4801218519631516;3.2283990254418056;1.9814152948054986];
IW1_1 = [0.16285198860331096 0.041540350649660912 0.69820043744702931 1.1629383314044397 3.0206222188452281 0.86753804454190719 0.28460554436634172 -0.091021884780158074;-0.42795770630220231 -1.1904920792483946 0.080326810255233999 0.33582822471190837 -2.6897728807305725 -1.8844199521639813 -0.9477408761487025 -0.069427054819960532;0.22117972894042257 -0.14006438387719794 0.60139338775416329 0.15963531161736033 -1.5836519172078216 2.3106182788409941 -1.0517047814159037 0.58509525590495237;1.1099356972421266 -1.4246970584974155 0.22397339234033492 -1.5613253497050683 0.26080222365524613 0.24645411247642685 -0.80966646383362639 1.3539350276905922;-0.15817236509098681 -0.2157746598725597 -0.71586133724893841 0.80372705029391012 2.3618530093325276 -0.79877479907206783 1.1703637233626469 -0.45999108968621411;-0.10274364368519241 0.013979263428330337 1.0733229088006433 1.4550435179090535 0.043262761909538219 -1.0612644454180367 3.5725481996481374 -0.81443296465393933;-0.043176497327382615 0.0025361936267886999 -0.2009516725398722 0.6435532016349429 -0.48127692739145633 0.88326161574800277 0.53513442036375092 0.93177581963299894;-0.82698183892025501 1.0361979964059838 -0.44584317815874319 1.4308682634788836 1.1278935673160282 -0.10100808279310436 1.2604331338080379 -0.73618971852615633;0.1895240877817122 -0.12856373018863859 1.2684888067504545 0.48644807783481975 1.289017990705174 0.1306158495110788 -0.21197658294208424 0.3876122518383836;-0.024663610022604799 -0.020316723610892012 -0.46683683091155059 -2.9757014238228963 -0.40724221439684483 1.1008035628696848 -2.1223462030964693 -4.5986147887775157;0.87366735821609942 -0.34032282764837957 1.8732012342953135 -0.26722120715694642 0.36522142709531669 -2.6362938471426003 -0.94867032186457878 -0.041230240906742821;0.14101987384142373 -0.26829291715134895 -0.1054747334723156 0.43844442101356979 1.3883563919284072 0.33490509606651159 0.23915918482074633 0.20812711197731526;-0.14937951768425178 0.0055866479797319528 -0.44437782857849217 0.69053396365786279 -0.8047862933010268 0.45364928397635174 0.83508375085399478 0.64026630452025546;-0.039596273120596 -0.086806714250709641 1.1003333880185615 0.41197656884249101 0.77901598116785931 0.2171821077821838 -0.0052208680994931186 0.405369095134268;-0.028833564838953735 -0.093222150093779876 1.0159347426887286 0.41502466173380226 0.11372767154624414 1.5411777630311339 0.70985039743097356 0.95850037524891563;-0.31513325812716553 0.064527945812431459 -0.32638355875290154 0.22502840943263938 -0.15774403380033872 -0.27911081147748545 0.45256814892768221 -0.030886457426760827;0.61844107970639328 -0.7879681729878617 -2.7683808060170088 0.75539827037522345 -1.2912120271442964 1.08409012556768 -0.54475207872668396 -0.29690231591844624;-1.3698062541399116 0.32127183685551208 1.1542280553567321 0.18020318915465297 -0.46214921018769661 -1.2101824261807781 0.91259210641420641 -0.14302976985584775;-0.33699016204253601 0.31212066020723939 1.309340421260214 0.37646588174249773 -0.54110093542791571 1.7160418288229591 -0.4501729509876165 -0.67507380770732994;-0.26307459677352157 -0.71817324951285655 -1.4173229855447451 0.72020615274666278 -0.29614348389442913 1.5642157185343089 1.5723362702394388 0.095916135154382451;-0.82264606151426445 0.078406610150697956 -3.6157328280242571 0.4687949866049011 -0.41014154085750892 1.5825728887880071 -0.7886290677017197 0.014871672572450485;-0.30619904517953411 0.058538928587903577 -0.26479242063915426 0.20358183052762688 -0.16432492376753877 0.64253759397053067 -0.43186929724003204 0.068887558537397572;0.49918585615838362 0.034406811880308169 -1.0749355000080003 -0.62865249792163902 -1.1090490537752808 2.0728017634092097 -0.50997404447521366 0.4425440685464157;0.19509232585986347 -0.2320574802162263 -1.7504405987062464 1.223604740894628 1.0624555920433167 -1.1265657184821638 -0.11402559221593191 1.3689930701877198;-0.19717363625046716 -0.37394542453592122 -0.45362602884075209 1.1617667062728587 1.1797564857605924 0.54501790257737537 2.5227162143922106 -0.38830315829425571];

% Layer 2
b2 = [1.2495911581211385;2.0902013187065176;-0.85160676113161016;0.080099182598342006;-0.40055492548416782;-0.88326035121294677;-3.47589828570141;-0.36464355661134645;-0.26957663096789597;-0.80256579781177351;1.2936520419566393;0.37233502089792231;1.213160491518904;-2.8661650959696248;5.8495183939429092];
LW2_1 = [-1.3228612781317366 -0.40256113188984144 -0.28130746049059491 0.43109997558023389 0.078740840241729074 -1.4148360911555116 0.15684279194600215 0.6445949247609859 0.10535339011852679 -1.4054413019772221 -0.071989051509635041 0.71056473356848271 0.33077588464914948 0.16806863205282194 -0.37674295556536941 2.1429105516822986 0.60171901016256713 -0.25779932060135918 1.1442128222549934 -0.97741194190537817 -1.1335634398475076 -0.094870443268103885 0.21008204645930878 0.85756248386358636 0.87620830858026921;-0.78833944365446795 0.37585531251856913 -0.94493858571455436 0.15268498564398331 -0.33517445236303656 0.50347862049588044 1.4367031449759211 -0.42598938091065408 -0.87204225725114015 0.59484782146110715 -0.15903213812108868 1.116376515740888 -0.32601519517583694 1.2787402776966841 -0.67599739499893796 -0.9948103733988668 0.043825303043338246 0.44115294825071349 2.2651706097252298 -0.68915724878397 0.53976184201886201 -1.4736161399426526 0.34358400885551638 2.5861336318658203 -0.29671721857069427;0.74597508471617691 0.058581180970372959 0.4164135555813826 -0.24494684194377619 0.2198125910795117 -0.71590519773398498 0.63444149796642924 -0.16816304505996801 1.1759288931094516 -0.90457467292312588 0.26287934598852675 0.03666449480240145 -1.6551848517695888 -1.2659728454845709 0.62150677598865078 2.5891334963476025 -0.12277850853171818 -0.45712548721503216 -1.2343225425003448 -0.052090757846105312 0.36702473438139727 -0.11534995097149953 0.73773332910734679 -1.147397310734025 0.25623988460963848;-1.7624090404207735 -0.084918406870498592 1.7832697091001661 0.62289237530498409 -0.85365162430253261 0.0416081349793418 2.0556074540475553 2.415651373859073 2.1042369085571595 1.1317292132689389 0.28233200865341262 1.8834055313894709 -1.4785783212411636 -5.0486760065405552 -0.27851701884830926 1.6026278144040897 2.1488431048603109 0.44481781338289134 1.4190173410932669 0.14154557070799689 -2.1195502063622889 -0.29753365904745566 -1.2748377768389405 1.2496333788172054 -0.45116030854586947;0.63804766853831507 -0.13836183380388603 0.52436984577155188 -0.31559202738326519 -1.1931012584657272 -0.0083586667298452405 0.99607122391670133 0.22604527398747526 -0.80384431984819271 -0.60551952908248863 -0.2707663728887294 2.1863821262379539 -0.3984012433695045 -1.0534564421030239 -0.88328093497600968 0.21035220107643349 -0.13608139435705779 0.39500076272083279 2.53707870440142 0.044647450283717388 0.81146274003163088 -1.9388867141574215 -1.3731877993582282 1.7766699738564293 -0.48278255539030646;2.6166995079929847 -0.4841281918381784 -1.1531527391846892 -0.62920834661129488 -0.20445067216367754 -0.62953683564177088 -0.90097679249806983 -0.76378227861696413 -0.092082233764724075 -1.9200268244112824 0.73570476858425082 0.23461039132691192 -0.19117951007625417 0.6341770149189303 -0.33336317806911125 2.357429943382618 -0.17962920036303351 -0.84949910096038994 0.31918830825962557 -0.58062026458579452 1.5432750503085295 0.81068841621726717 1.3132400402984121 -0.1615881304077951 0.37956861347987852;0.4571027162457218 0.29785749398672429 1.8186290850121232 0.36283747544492245 0.72312580438283514 -0.076438974807974208 0.95111926742671893 0.0095293357509238247 0.40638456782009941 -0.99381421454810825 -0.076576673443092616 -1.8889832537072 -1.8974633222693762 -3.1944818269019839 2.3338955267448935 1.560274518051433 -0.16085706885096723 0.31479233156220854 -0.30420535245931241 0.014646099351449905 -0.52267543591575993 -0.55664041952228283 -0.89537593567610341 -0.27179709858741025 0.078614313469194744;0.93053789180475699 2.0523765377331431 4.0153400821078238 1.6463929511258737 0.17918316356258757 -0.16585498072224117 -0.63286307216585291 1.2320267981290385 -2.4128095464814079 -1.8954823987045393 -0.15049063579171124 4.2439781131843244 -0.087399960613965239 -1.7007137682609734 -0.053371999077734808 -1.1914849430477636 -1.0576206151414398 -0.95579846733853246 3.0138307806086573 -1.5360925090387785 2.0685694631311184 -3.5119755263348749 -0.63873226460853372 -0.30856547660649036 -1.3477887229244667;-0.66935036781678892 -0.32511784313350317 2.6744775058723769 -5.1972319054272633 -2.0956354882793922 -2.2748658069190135 0.13109090487545824 -5.8580967285932593 0.37274747677774361 3.5692220936735781 0.33929184315810368 4.3023186336485386 -0.018250301647705445 0.20740007188626824 -1.9176324097105288 1.0827393379397696 -1.0230944126288584 -0.90303410304116238 -2.3924049302002204 1.2569508711059258 -4.7354312747526128 0.83155963869571403 -1.3948802311976947 -4.6174023527266863 3.3462289784911712;-0.6659661051604111 -0.19052799500650169 -1.3472241144234882 -1.0529165363073518 -0.45711084204958374 2.0854691026143839 -0.34444590571343431 -0.8151049269511933 -2.328417467364726 2.4521410576031135 0.83280361760210886 1.0944862108665312 -0.59030597256376627 -5.4778040357993918 2.7027469444678851 0.58777361795373406 0.1129128129208353 0.47505418145797873 2.0248713314344577 -0.81040686133065631 -1.0247212264401788 3.6860415189748741 -3.8023876096108666 2.1804761695227763 2.1458420558373268;-2.6801512213925833 -0.078743755430285958 -0.49948814070619119 1.1033724123336419 1.3062097264317487 1.0003979179383669 1.6408814681637645 0.65424577673302642 -1.9763990128509108 3.0123976347176864 -1.0032627239694214 -2.2792932523524025 -0.53912617110881911 4.8158187038478104 0.90878942955180664 -1.2343451278177981 -0.1772397289174199 -0.94566877778125746 0.94644281308347245 -2.002112662135449 -2.0636862854469604 1.3089441012914997 2.0129099742057694 3.5421676831385422 0.71347333220282283;0.38852122477448192 -0.40317123693980533 2.0970774362846583 1.6967232808570933 1.6819392314190937 -0.21396744857947891 -0.20476926778994667 2.3231072006647437 -6.2851365232064937 2.742094127155986 1.3324430525565525 1.9317861575183055 0.95217881120048531 5.701020053034024 -1.2464125692043222 -0.85061828844349519 -0.86999491682006558 0.23240146733346895 4.0461757713579907 -1.0454173368868613 -0.59713436720478175 2.3909591562432073 1.5109279052859028 5.9657429585563673 -0.39529701564203351;-1.0618215381355018 0.53253255490852003 -0.56069300710450898 1.1968568673481867 2.5566825757519722 -0.39685547270103483 1.2884625614872232 1.0539748827809288 0.13838663810529489 1.3686594586991825 -0.0021001244829427631 -3.3759517089617792 -0.87191550420028507 0.33771838700837981 0.56364406672290668 -0.48782859932057393 0.0082052993344092894 -0.0042406013028526155 1.0410258711706495 -0.91171373536652256 -0.18451111704033543 0.95367980203273062 0.54671391408768188 2.1933324111009895 0.55966246199616687;-0.26748398141090757 -0.23632375667186539 2.070906603470124 -0.3355555345841707 -1.5666613018691438 -1.0523500815916944 -2.7586350530317407 -0.63938694452581379 -1.9385968445058586 -3.6892461503770746 -0.34457573814817671 3.0762995693322677 2.8566854206912149 -1.0292085598663774 0.72661366237395786 -1.7598177470556573 0.042483215664856314 0.81343050597473088 2.268403022595419 -0.62548342149197567 -0.33915750979114373 -0.68793696033632135 -1.0018206452001126 1.0083660548974853 0.97169504727512657;-0.3509511468348146 -1.7407783923423736 1.6625191279878493 -1.1744166465252426 -2.8154103149467562 0.10035823033996029 -3.1169910519638897 -0.087851586750570393 -0.78741641772098436 1.8660444504212148 -1.0114414889439367 3.7452982351524784 3.3414660376058603 0.3952545497628554 -1.9566226991646265 -1.5488644090252353 -0.26667172480862289 0.49334975716039059 2.2389431268192297 -0.03912990871863814 0.42431697048049755 -3.1516621095937354 -1.5944217298026691 -0.046288157567810906 -0.80678390847657733];

% Layer 3
b3 = -0.06318929196906159;
LW3_2 = [0.25126308791481927 0.25429892088677258 0.59505502346770323 -0.15864524843689679 0.27941061449172416 -0.15610403661208311 0.30640755090481903 -0.030164003332727413 0.02269452749455066 0.067420879543091408 0.069583292653346895 -0.049102925742806065 -0.22519553810257933 -0.20821702389682811 -0.11025770421030308];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
