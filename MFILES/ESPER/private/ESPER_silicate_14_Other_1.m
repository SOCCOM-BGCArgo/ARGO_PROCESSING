function [Y,Xf,Af] = ESPER_silicate_14_Other_1(X,~,~)
%ESPER_SILICATE_14_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_14_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [10.511651892826630927;1.0580821225388192808;-3.8300435410829192229;-0.73429618524181106132;-2.2530380019747200393;-1.4200805892846763978;-10.856946655041701533;-0.13527022935626295541;0.7376581982472936172;-0.044210892274874548369;-3.0802378540026946752;-2.3047810752165927006;3.8383884203207805363;16.201597961868085207;3.8339251897184949414;1.4290526364810789417;-0.77336625515189993951;1.5925675742361384835;-1.2870232277290498679;3.2663191508296200993;-4.4363134829103341161;-3.3048680555261160663;-8.5863300294662607826;-0.17292545081037605237;-0.76613192487235237671;-4.9173687915500119416;0.1646322664339719688;-1.7949166841705956887;1.1577695761370381256;3.0034157568501949065;0.70727732744607541004;-2.8901785463461830972;-5.5771031127053491971;2.3308780210037687297;5.1402901289748763602;3.6499661786786345985;4.3212049407519286248;0.31802432897770016584;-6.299370046814100732;-6.2429365941035124266];
IW1_1 = [31.638408453535625142 -10.596494890923933596 -20.909714528344501616 -5.7003098521767574525 2.594241581285317011 4.1004339967068581529;-0.15164767014310834292 0.35068088595515467532 -0.61756804351076222126 1.1103954681905383595 -1.1297790150420967681 -1.2065768837423671567;-9.2708380438145230329 -19.852733895469370395 13.108993252227834958 7.2312642011020464849 -12.345689578767993666 3.1521639958906004786;-0.73097021417288021716 0.68260775655638827875 2.7355822683711203958 1.6211501297095181062 -1.0168137399605914339 1.0615510284859632772;-0.18428034380697580485 -2.2955996799115752083 2.6172620094180678585 -1.6601693178187311162 -2.0087553737426331324 2.9551560116134942824;-0.50770152216916053511 -2.4442853797096439905 -0.73861570297206102786 -0.459248875529680467 -1.3126104578552930668 -0.27541792716868840341;-23.720629804257963968 1.9389340124602176818 -10.485749371375201022 -6.4183899600756255666 -5.9089521668972055934 -7.4352548832555616087;0.07035506706277741551 0.070924200669239878536 -1.4995265203215781824 0.14669864181557679128 2.634414804800176757 0.5925947955473586104;-2.0595532067856128222 2.1798426610897987388 -0.88122692771678312607 1.9261035186332924329 -29.755578622903861685 -4.487612385608558796;-0.076861058604152113216 -0.23740172560784791878 1.0327545591778346523 -0.16961313491074636595 2.9033194696308903815 0.79092429475329850685;-1.6654342931999295274 -0.16299261356163510794 0.73684794594808022961 -3.6181075014749497498 -5.3933335113864080412 1.4523614751671585221;2.7046584967880797912 1.8695770659387374035 -2.2559545692108455839 -0.68934806451233310298 -3.3261887239114500403 0.23343709478017923842;-0.20772594885074208149 -0.033654001155648344268 4.8293147661219499867 -1.0293419936917900248 21.583629868679906849 -0.54588522789370208521;13.160265509001142448 -9.9410545661831406505 -2.9105913151111617587 -2.6062838598147273217 -8.2712239625119874376 3.5682837012049941627;-0.056440526005916369368 -0.068806238652598536443 3.6436734807860799989 0.33747831168362663057 15.790942629452699109 -0.62925066222627412671;-0.19353211816806500933 0.073810015807211748484 1.3698011477494396182 2.3405871945187111116 5.9748643209790506248 1.2900825470697323549;-1.7271324244112702395 -1.9420090430080885202 -4.3929120460366553047 -1.0726673985973902425 -5.9267870423388888668 -1.5344006405527375048;0.79713961188390758394 -0.39700034212941692768 4.6632000654586871491 -2.2116455547611475474 17.894484210993827134 -1.5457874404059643858;-3.9841210526935286751 -0.13655721887530969383 -2.5878647342383631624 -1.9462760894103654508 3.3429626252506947637 1.0061800072618118929;0.0075738082223913670565 0.12344449549908068087 0.92185977258645601662 2.6615278744209609485 -7.869663636172975707 -2.1479232077469125883;0.79729079887319354025 -0.28743882880956461712 -5.2509795711774307492 -0.98585977198082763717 2.0954826296556379184 0.31402820470556597199;-0.41822395986891547359 -1.0275855272599569989 0.89297182881724479486 -0.21335372328101723238 1.7682175350891948806 0.40284342231560132941;-5.9504161451880586142 -2.0403111203519497252 -13.863432123561162612 -5.8573052770624016716 -9.3796707350155443805 -5.8977676938039094168;0.092008002455220450067 0.086041760213814308389 -1.6460440844096901891 0.097886064728246527378 2.6339664911682514337 0.57785098725254491203;-0.76836254907367207423 0.7154884571048117925 2.8048974500219761019 1.6327460322566029749 -1.0094470427263728673 1.1083005305553106368;2.1838381353793563378 3.5727732595959706963 -6.0559061217876442029 1.3992873572387165559 -9.6894720013650186274 -7.4193646553371568331;-0.093371946608177852633 -0.076040050766127728621 1.0364115423292754592 -0.47552157510752807168 4.2055342958072596815 1.0584325386701474159;-2.3597478852171462904 0.084034969556937524904 -4.6073662156220684949 -0.32329421574967759367 -3.355336128625664216 -1.6314943915393569362;-0.032418350632678040457 0.063023094772557353149 -1.7840577466973970289 2.2183566948122055429 4.0075483876621174062 1.3853404597775966778;0.05954268708501646995 0.7319318817859760129 4.3415005084595188478 -1.231650647914504404 1.7642351417963684224 0.8980611840652632516;1.115280142708140243 1.2303346207225316356 0.42292184009263750211 -0.054117205746354229978 -1.8724573115584193239 0.79515211527041207429;3.1639839609152544675 0.18238610406706448619 3.8429899034629855237 -1.2677840351898497229 18.462171475785236652 4.8852887898974310943;3.0095782991303163811 2.7688619264663403285 -10.645863276984854906 -2.5952735524546985957 -7.9229010149775325189 -0.28270452428903136699;-2.7691970210972627342 -1.9083650362253068433 2.2926205822212288865 0.68116151857112283707 3.0983221785244294821 -0.24292363192219845747;7.398576505758970967 -2.240304320638105029 5.3334745518668018605 -2.7952565181936122052 6.696571091421255062 3.6199264015543937134;0.49321418251140736189 -2.9091113947718199029 -7.9147450666733805136 -8.2009064168123551042 24.279824542237836482 -0.30791820344353099115;-0.71777097112421417435 0.2293622438786440676 5.1167661202368037721 0.94278372174578273235 -2.0841477469361864294 -0.32377089380993329115;0.044294009518576656081 0.20457155681399608049 -0.056647988487561799775 -0.34991538300691743535 -5.553975393823337825 -0.99761910740754144999;-4.834922118516309375 1.1189822453098015043 -0.271226212846192416 -1.5498442869157404989 -1.5075442245017616205 2.2732424507169159966;-4.4850450413170541708 10.210026274602821417 -0.41116066537761003508 1.7188522710600522281 -13.585263921759976213 8.8108014790841036046];

% Layer 2
b2 = -3.8434065767020997306;
LW2_1 = [0.02250499538561240645 -0.55270540024607484053 -0.010532233621474257693 3.8643981939676006476 -0.056990259709872981286 0.10566961695867081727 -0.011209720122284751176 -6.0512012503459873258 0.035074327181421546817 -1.9149833145084214081 0.064463596316342089421 2.1350547877019674381 -0.38206613153008850414 0.013755735095695059353 0.58167764084270245917 0.38414651678308797678 0.092246384170373729727 -0.065271712463786338287 0.058000421540373180151 0.39357674946540444072 -4.7291067682821754659 -3.8078816502626517959 0.015383876369501919834 5.0703173178276310651 -3.5744201280745948601 0.019722636486911027109 1.1053259493612683784 -0.099257409318601941273 0.38834907520219624777 0.23217378777268923851 -0.080952964941545912936 0.072141639017459638361 0.034750283995970299156 2.1212930946529393594 0.029566495658228855031 0.027833351915053743814 -5.4015953662135629543 -1.0035377504961910944 0.058683753729763331319 -0.0087729741143342757775];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
