function [Y,Xf,Af] = ESPER_oxygen_1_Other_1(X,~,~)
%ESPER_OXYGEN_1_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_1_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-14.420452562101207405;-6.9818125203872121176;-36.346102696891250616;-16.90703793445285541;-3.2576634686048802081;2.1940541670479669634;0.854845681636103083;3.1672379175926401729;-0.33993646423462997586;-4.7221017586633928786;-0.39846844569763933963;-0.99743880895927627961;0.67633607480327950778;4.8705101028144870412;-20.84418225353151044;1.457003361899363858;-1.45019252608081195;-0.70103276933298763751;0.64420659732370355588;-1.6384647238062390873;0.91289397900890600912;3.2458107886162870237;2.211673239822106396;-0.48268022424538276072;-1.0282930076828089572;0.60593492369328239011;1.8745642626969667432;-0.52151515819956006936;-0.43039686803268395465;0.16904984978561451991;-15.402469301920149292;7.0500608727284648225;0.63258691718551496308;4.3844307164052844783;-0.26457962816300018005;1.8827334686742416281;1.5123673432474900036;1.486976161869856039;-2.2603082484196694857;13.174503333074854439];
IW1_1 = [-3.0425631519121920654 -1.7861398695000998416 -2.0317367017832586029 -6.9290518259196636208 -2.736624951436524178 5.9665841743384682161 5.9649319882621227862 -7.1493445427940294223 -6.0530205793375033707;-0.0070340452711683725331 -0.066194698442687813222 0.21361460559763020828 -6.0998001498035554491 -0.5539321340947580552 -1.6354630083943497709 -1.4445881257644812568 -2.099084308805684973 -1.383731519864972892;-0.16589247635439649531 -0.26679658981961745789 -0.28920156206863389947 -37.652445027094955776 -0.63974911689245450575 0.57331065872560194041 -0.52851427995907973578 -0.85621309555264224489 1.5916520546607857423;-11.106812740117595339 4.6325981531999476104 1.3201815809396189039 -18.515100873004797677 -7.6357294571973346464 -4.1878038892524891423 -2.3788922521319935122 34.976718132691146934 -5.0517523788587874733;-0.85165649818285016348 0.956375482174634306 1.7332024748258068048 0.83523698585551298113 -8.3493747002980267524 0.20059691989250733046 -0.24466858678222561108 -2.2532872995438593122 0.21409785436629930055;0.15023454559396878794 0.24652665855676514362 -0.51144152414164345544 -0.80819093639486772052 1.5170855303300805339 2.8249901486334203504 0.96730079441453720168 1.9468197998579015451 -2.054246204977664636;0.86096984959371891666 -0.002994232305296936486 0.17215091008278016194 -0.075526778367134783654 2.4744238020710120907 0.66298803478069656681 -0.20037050028117289746 0.28547408304189297867 0.32199742650934781718;-2.8204741643732780254 -1.2128998058022779638 1.8163714290978991706 -1.0231854054628297668 5.005377959709477409 0.031823850330632036387 -4.7331354170833881412 1.2020563418938003952 0.22136977130394286384;0.62794781289736989471 -0.56725146278572946557 0.020365916243059067198 0.37836236228423336669 1.2373332173906257392 0.56374967286520294429 -0.61402498778935865609 0.26973845766604370722 -0.37811971045026115945;1.1130757630769785305 0.17767001435010332244 1.7796799098564812791 -0.96531499246965946082 2.6553426244015634339 -3.9898787826736943352 2.3041003583897134988 -3.4923446460214644382 -0.84161948349743331832;0.55574492116419649257 1.4515477491475508032 -0.3395809045546094862 -0.16561811857788005797 -5.6879713988618139098 -0.79579313489080005795 -0.56842782973641470257 0.18818558024709908238 -0.0030408586531777341382;-11.33906267956372993 26.986025988854599689 5.5946434180722848239 -3.6036357214834335849 8.7374940810839873961 1.1565250389523840102 4.5784160301266920712 -2.5041997563047546649 -6.870777675359176051;0.087386381161473222767 0.011868564496235529948 -0.0094716918716227834624 -0.72406586248944260209 -6.8335510176229901091 2.4854329938699462055 -0.19660945181960995387 -0.53103126173621317818 0.028089895132674888578;1.9560860024900190712 -5.0398449463711347818 1.5683885918797064729 -3.9132422956481147658 -5.6975541669350198148 -5.2623740504044578259 3.8979400190209343435 -2.7686071321857350647 -0.80083866073211584791;2.3572907614540601351 0.8430190608776336747 8.5283516202396345562 -22.020170526601976491 58.3424725769817627 -14.873929188333470108 7.6587366103035945386 13.258198221650554061 -1.0261687889353838798;0.22444181196141074763 1.3332119433099842709 -1.3213848923693545245 2.2822182188606356945 1.6067109757878661469 -1.4222476065133902168 -0.39585127326694174998 -1.9366368970576117725 0.25614231030471062978;-0.22205625939572284921 -1.3057320546443089704 1.2963539671035022582 -2.232109193461336627 -1.4142228361255932967 1.3927982511541112665 0.42696479437116219291 1.9201080854864276404 -0.29270703133936942786;-0.13222542833343767232 -0.16704946109815363431 0.17401852967468947608 0.27258534358229391525 -0.60845493081992874096 -0.0093788352843494973698 0.0421271962660025312 -0.11782252315827797251 0.30545948633936598204;0.95852672028143803828 0.06419863178458608266 0.09858737840677116171 -0.12608482123125200336 1.6942445888214139327 0.64913628637586373582 -0.32833203401966848389 0.33449854988873989337 0.24277496971732295816;0.1774536983943119095 1.9729587701264879041 0.098302540482959790968 -0.28655927078800114138 2.0390873916133123167 -1.3779495192110435831 2.5980543811472762705 -1.572963365031450067 -0.20426772195862336057;-0.32973437883476458543 -0.3550366401441963915 3.2072035169965014134 0.14710471643990907786 -1.2268666192097086309 -3.0294773102809839926 -1.4098252424240307334 -1.1963933331680738359 1.8090365812691788783;-0.32653706529190995589 -0.34999637010501377654 1.9626834267969466286 0.87279724747454545675 6.9687340763060126037 0.81713144471956400405 -2.1768702015855811993 1.3314900479217455231 2.9134728889495153936;-0.047234782917676423897 0.91035390332283971926 -0.73729522311971340542 6.2561233457235001509 -11.570671413353798229 -1.2475005306091886403 5.6407359133927714723 -4.5436452809014173937 1.4343072829711465133;1.2444459991083254291 0.43989460137800773243 0.70570135409659995318 -0.67294367267782828623 1.0835858230341273156 -2.340993991238483396 0.45345115047453915524 0.14978191573138374681 -0.72956748715149588591;-0.093293162649616165338 -0.24822453215625564504 1.4423745525028299763 -0.77160560547509682294 2.9663939214216439311 0.25365417995970213072 0.054265495853460805897 -0.48152478924620606415 0.67812587537653912229;0.17234812224610662756 0.27665562841511565084 0.077254052312369328459 0.95368805725227956405 3.0568752800226692834 -2.7962964671994199328 -0.72713764648693701709 0.32513647990851679559 0.20707180492616042433;1.2236143900032940834 0.41870385277023425274 -0.6584301404092657295 -0.82170880649876387736 3.5319250031817466251 0.41315140828497531889 -0.64839065733234912958 0.62722473863516436943 1.5868218225562924495;0.013190100654819710349 -0.21020236793184654545 0.92746955377542528165 0.36022087496196047995 -0.27051521396951333509 -3.2491838350865163143 -1.8839635627536559515 -1.0889027444052521432 0.23395517147475169972;-0.064679527362151212344 0.0036852411720219076935 -0.031704876244758359305 0.78095597405513761391 6.0683252266429876798 -2.0313482194597396457 0.27839705596253200293 0.51979561409350782952 0.070324688290774858834;-0.028043212918678481899 0.55022132934409173632 0.97088165560908079588 -0.30403408962629768775 -2.1228985819584380579 -0.54737576012759803223 0.40096355299954938856 0.35408490380057988656 0.82579532962184332145;-0.015485356993783254073 0.14785187591869169976 -0.54693811934924352336 -15.508136119374674067 -0.37208048631854306887 -0.80212428890530751424 -1.3844437006776419974 -2.057162032320309919 0.34284443484161797322;0.2013022454127237626 -0.0023678011583748046973 -0.022078087397127316854 -0.77766111472824683837 -15.164790683099298008 8.3923277698557274817 -0.33962082185004427437 -1.2156740317801317808 0.81023621007846013953;-0.023056405924576462568 0.29812845503186058416 -0.26909459740684771312 0.86056293520582849421 -1.9942703308179321464 -0.32890251146100185631 0.35845479645982414318 -0.56305386625703768289 0.010607923054388443407;7.9724028442850451981 3.5843115714944766559 3.3217162272615614604 -0.86108224963400614715 -2.0647022621181174706 5.8777710268934084681 6.657680589623649503 -8.2502939741981098365 0.66307690612641656536;-0.18236367743917322737 -0.67991353742190929754 3.0264738310122103471 -1.960790616744674475 7.2065987838488654305 -3.2188251103836447164 -3.6238493817142352071 -0.4390241817830851101 0.86966381490491495576;0.46985649710010835012 -0.25849478909090711776 -1.2781220838783435845 0.91308862449306071873 6.0197520516618769904 -0.77481042151573020771 -1.9340336203676427029 1.5734999962322475664 -0.20038759871347280872;0.1000237662805566613 -0.69742045519817641441 1.5769686949320858016 -1.7843707499673251426 -0.42920516285476073559 -4.8840889132153284535 1.4304055276973017818 -3.6386625234562299802 3.2005674420038969785;-0.023994720051935095745 0.44438254977185820405 -0.024217879067814730709 0.73234708869576570223 0.054521589861857767956 0.56920877487149024176 0.13808007018876802818 -0.27949829960119226824 -0.28508506235969738318;-1.2884986214733062937 -0.41051895453693204585 0.86037851209436244648 0.88388340917971675026 -3.5709078898105595101 -0.85248350928891047928 0.84928640643533492849 -0.90022846333990635959 -2.0352279016202876605;0.13068761143137017089 0.043139584964185427596 1.295406601359083032 9.3888038553284616228 0.51551879540881151431 2.4843897905788949743 -0.072583163632893854533 0.48212885913703745766 0.20637535640660645275];

% Layer 2
b2 = -1.586417666905707069;
LW2_1 = [-0.031449318092919328893 0.097404803283294552618 0.098094870001602454956 0.0033960154095603470661 0.13597089419595861925 -0.3224937449407005996 0.82382888907001938783 -0.032660005098079140928 0.51941503621464657492 -0.23666269653293964259 -0.11813437203131635367 0.0025317926865504073938 -2.7948473865701659591 -0.050202240026580392807 0.0036167760729178175493 2.1043094972224722916 2.1723202377523280759 -2.9658503540639085116 -0.91485687882716593133 0.086398828010183781334 -0.06418024825040599679 0.071802286695455436183 0.019361487701407265744 -0.16278308857269496723 0.37699029273486911462 0.2609494392202397206 -1.0230543105942766502 0.15261485336179730909 -3.2807559256592218055 0.20646768846958291066 0.080112200465639812896 -0.25825558582781887873 1.4509579118618951554 0.008238947425499829752 0.042733613983042033346 0.22328949106548698356 -0.088919240870777793706 -1.0233115006534954095 -0.75521694273801454056 0.51799257000027898457];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
