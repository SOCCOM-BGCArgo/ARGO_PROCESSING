function [Y,Xf,Af] = ESPER_DIC_8_Atl_1(X,~,~)
%ESPER_DIC_8_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_8_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6702658751386041391;-2.1575946566667929538;-1.6118211090009206821;5.3452698467389074821;3.4747179206574325683;0.42783337829631484794;-7.7969028835605298511;-8.0346544632695326982;0.15429132453170441019;-3.2055006781836250518;-2.9654794626332274809;-3.2135570847753456292;0.77616554880715360465;-1.5374411586606542279;8.3069484789505896316;1.4599586219416911259;-3.9990477930685690566;1.321801797567935699;-0.68232169253032670664;5.7403884140029610705;2.5998053999949903847;5.0765827107879495372;0.63061345647429944972;3.7995134123584364261;5.7983053659463710261;-3.3145579350721989798;0.88445265950452611747;1.7895916701644620783;-0.026244138303940546531;-5.7103887125447245765;-0.28782576087370964624;4.2432535556543449218;-1.4554442801935933982;3.3713107276292917369;-1.1196588855287055164;0.70711620520372731047;4.2864566650114559465;-0.95239620655488765877;-7.0334659810755182363;-16.66662124982972415];
IW1_1 = [0.66576795191971005483 2.3797180105352984114 1.1695036771872284742 1.0347043093487315879 0.80143700591341038297 -1.067615039711938163;-0.0075768862135314422185 -0.37436775655803811169 -1.2578559339406043538 1.1333507250312415682 0.37755188865927158393 -0.65354174649331153724;-0.052429476398584598518 -0.32770865445203756217 -1.1178361001710017675 1.0606606154988560409 -0.20029213486903757468 -0.76663834810583564305;-2.2720282511911662482 2.3523126088282086954 1.1064858959696171059 0.68392331662630900802 -7.1015569953445600859 -0.53083105266189212212;-1.4457539509596266658 -0.20535496853975193643 -2.2729283245367448707 1.5298488094966007367 -2.9409096752745647052 1.5868091966447868124;-0.46045462357362154648 -0.52939570219639031645 0.72482997955979244775 0.1452590901724612471 -1.5353626533631681284 -1.1669656495596252288;0.69129568221182291499 -0.01979386096752723187 9.3382695948836236255 -3.6093643589585511222 0.32655217910407935422 5.4329783960363382533;2.1075576193226956967 0.63872894174663519262 -0.53609896199027051722 0.17388685562692729469 6.8285706745415115648 -1.3068545681301515504;0.042577287383998137227 0.64507115211872323446 0.20221875700198443937 -1.2369024404431891995 -4.6620680650539378931 -1.4913753068467199281;1.1507919394325578644 -1.1223873667121420095 0.827455812743029262 1.4507277722474285486 3.0951991043731279518 1.7489681472921307925;2.0965211623849966394 -2.2308687650358369758 0.53294654743789715567 -2.9689979128421462029 4.2077568297196759062 5.1782188538111357801;-0.35531241560183018935 -6.9376933209858293594 0.091845669862827092333 -0.58245278324847638007 -6.4440596299890575693 -0.79059895691937365214;-0.27393787514209344547 -0.69205301789862649908 -4.22963988620574316 -0.88274551710500315238 1.0208340081785540754 0.39807956732544030887;1.1692692537695712485 0.15709848046708291269 0.45416911918783453572 0.029518712691111465701 1.2112542003921866751 0.69301779940992824791;-0.38489918085896018818 1.6925905669669203402 -1.6293324051033717392 -0.23405875463321867969 -6.2454070170285378438 4.8502358012541799681;-2.36248422471521069 0.68941217637147400588 -2.7854403394176738828 1.771146483214146361 -9.5566304028781381419 -7.4703565976140469118;6.5537653580847585744 -2.6821147249885113339 -3.8790481483682044406 15.263121043768052232 16.193136180859042383 -5.7534533859965284464;-0.6694052034138220364 0.5728038718815871011 0.91610677391851469409 -0.75073035341465077508 2.3293926344808681961 3.4954821592092835125;0.58344961208665291341 0.56418414691869378519 -0.95704721110113000204 -0.28279659266550594143 1.7914830918519486502 1.2927070675231875363;-0.0060229839639363447895 5.5108732112205895959 1.1108536477706216772 2.3540917116522908081 -6.364507389625021716 2.8947469311981710582;4.1119977813120094368 -8.0601935142964098446 12.259064414990017866 7.8375365187179033555 -4.6626162699621938046 3.0425125059322861709;-0.20474632149223470634 0.065481144728827628265 -1.8974709032267771391 -4.8119062508724885774 -12.338655092013148362 0.48618206667669688903;0.98110201018120324346 -0.54983118527789232033 -2.7210897143796404229 2.5944899809700499027 -1.3050703346903949065 1.830507790452925887;-1.8078511336285361111 -0.40753354303150318705 -0.61104189626433802474 -1.0819171048692886039 -2.1669248467822139759 1.0654376533912690572;4.8448258496083198565 -4.0690692958343515073 -2.798595946994772099 -2.5452870362077675281 -0.86090614491247408058 3.6149793339153983851;-0.26273489808271688339 -0.67712398553137287394 -0.045951800240621898386 0.93209432479921661141 4.5048121150619691022 -1.4470936273392833726;-0.84327399221133558793 0.48437738463574608883 -0.45914923571895743803 -1.541050708138716141 -2.516984107543637883 -1.4285881733272365324;-2.5541651024952836124 1.9942637140352541536 -1.1115766357888405835 -0.12479039589349028017 1.4851990510552486313 -0.44997094060890996392;-0.79551117634992085659 1.1987014977408396721 -1.106445664492464509 -0.076727849144056378683 1.2639001535202949444 -1.1495474100552838248;0.060815252238394713891 0.4875246660845796165 5.145810819667340219 0.7898604421040720247 6.4994673263300812849 0.73093755492000023199;2.4285183856724819051 1.3361110818199484207 0.81053701597543537094 -3.6073307861150452069 1.8240299883035406836 1.7358814029255347222;2.4062550996026548233 -3.4242556535288324326 -0.32272802570270864297 1.0573489506136453109 -5.1255179208869456886 -4.7512712136284518394;-2.9439044202343325196 -0.70290919632614579093 -1.1599458972882366048 -1.3532201144480908717 3.6567881409614089172 -1.1517201400508252362;-0.057227308866250693742 -0.040412776031196410986 -0.38324122538668115023 6.2046673697434400196 4.0895526832676090123 -1.515463245871106146;-0.63410058422449544491 0.092439654016007538617 -0.056691038398256878017 -4.6028911436403738833 -4.7421006285436222427 2.5098042440802421638;-0.065662525014077349761 -0.078801418534136552507 1.5554852022702381209 -0.29874281266120461531 -5.0796430586663241513 -1.0334105535670190523;3.8177781315376160265 5.5223775191865556167 -2.4780424156807447922 0.81464100657646254522 2.535837416378017295 -0.41715099793465049149;0.36397500825205492125 0.22925677846213776689 -1.3225293229069474688 -0.089629048257706955827 4.5842544141832419768 0.97069004670589775774;0.25151368617021224727 -2.9425771328244914038 1.1633295620547081661 -0.61072960696516109813 5.0346969466264974713 -0.74712711036548307142;-3.0098233961526497104 1.0491688722025320768 -0.6903364452692005715 -13.256731292641495301 -0.91917592692745531124 0.73730713283453508389];

% Layer 2
b2 = -2.6042842599449045338;
LW2_1 = [-0.11441326885086229581 -2.7928629239322648736 3.264203907991717557 -0.21576408500137303492 -0.073708415140766786466 -1.5087576335386401194 0.031238920637798501395 -0.17539458342484384734 0.43133225454815310451 -0.17964028234236614767 -0.040762359843448808805 -0.075057224377821737948 0.071305471656906121991 0.38121181948243393345 0.052267066425486605197 -0.048087820034440030559 -0.014130539554251588322 0.14739423091939105048 -1.1999081318909619043 0.045844883681428340305 -0.010705194137728165152 0.063836519807770844559 -0.081049469534550860894 -0.24476531123813774493 0.031730513260752803151 0.39150494576663286139 0.22620407183741880752 0.1983595208830655765 -0.29741970799679545712 0.06381827739865879312 0.018149390362870092969 -0.037506386854085756177 0.14097570618724222791 0.2409301786003654744 0.16405121483573992247 -0.79545562298359040465 0.038954563150486662404 -0.97418587861602479183 -0.10367544043667702158 -3.510467083139787281];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
