function [Y,Xf,Af] = ESPER_DIC_1_Atl_3(X,~,~)
%ESPER_DIC_1_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.659428606297338904;1.977550585281186768;-1.2295512712454366167;-2.1962527798798969769;1.7253281437955121369;0.69726197558438540725;0.60800548362065531816;0.78627170632420706475;2.8392436632401460983;-0.12418567236705251033;0.70330267171025961925;1.1569448242256505921;1.4415111288311373006;-0.048440216353073939359;1.4076065967428117442;-0.58912967925748238596;1.9260854394548057034;-3.153551830257250721;0.376049477608485061;-1.5111617368709617804;-3.5787436717847205259;2.2360532880726893268;-1.7249518280248881119;-1.2030203058429516094;2.0121271364670350046];
IW1_1 = [-1.4819770949261841242 1.1802560342266803506 1.5390216760580373023 0.73692085883269331514 1.4951229227880780126 0.68446413601656419523 -1.4174213521962268914 -0.082706642966680760098 0.69255372859830777177;-0.27931961427494345074 0.72994216751494744866 -0.08837661061242882421 -0.090481851643172461763 0.18193936576658664706 0.75654384682101472048 0.64191550614363113159 -2.2094271471741540047 -0.31290737899306886316;0.82880160658584411948 2.2030272405055408846 1.2365642858173926388 -0.99385443938263851038 -4.4007039438551238675 2.5260217976566368137 -1.7782512455293322251 0.30954725338471378304 0.19801255288771721363;-0.049685322603488416005 0.96270904784423427802 0.50922856791914183905 0.10555165531645256671 2.0861415577394195608 -0.10429046581653700354 0.2127685031167892149 -0.20217012196664571611 -0.05923440305845920073;0.61890866452384785124 -1.4370766331432747176 -1.7916734952722150886 -0.79377555331233762281 2.4200390721019502394 -0.8330593290750862856 -0.0740285536663715521 -1.9376719833201754284 2.8747680425850523633;0.012473114713770799833 1.4516939050808381761 0.1785608633815134183 0.3798101836470585968 -1.5342292061023896643 1.2835699284447923407 0.93804230561596024796 -0.89530650701731540053 -0.45057386275086758198;-0.14130763952993741217 0.97508578023290459758 0.73580814736248489893 0.3365117378029890971 -3.6564332078680479299 -0.3895396421633223194 -0.66845074458873021683 0.67359962185226507358 0.22691058583006495919;-0.64954016068230024938 0.63297415535966605749 0.58895409946881804863 -0.29524922454240620784 -0.062442940061077492619 -1.6221791985356346366 -0.52861756346224042513 1.9064562967505533919 -0.43136899612650564384;-0.11344183667170090746 -0.94488836502781736737 -0.13597119332576720896 0.053267638222464795683 -3.4860278841385126114 1.1042143424537476104 1.4008354643788951677 1.9219697009759462158 -0.96164043632139784012;-0.59718551924787754981 0.22544517388131560254 0.49857346939692426258 -1.500454387986169813 -1.2986374608581896517 -0.098495519625555652543 -0.93167905079501234233 0.74719168430668414516 1.5379365385891281548;0.21378507791882681022 0.62035687790780413842 0.90093372055362708206 -0.92295951173504409137 -1.4106117936691773274 0.39130995149204939043 -0.17938182375092326382 0.59947344086007592345 0.22146373903907887182;-0.46798207928057206084 0.47064043497802826588 0.45778295667223367627 -0.67194950332667058301 0.23587387185751151897 1.8992893936032444469 0.2324484623040162512 -0.85029226510639155379 1.0086684928673539385;1.1432983813540151807 0.28461027499253022111 0.59831902787127055898 -0.45848360855796710389 -3.5171556156176122521 0.60665794745321710568 0.029595411942807271777 0.40148408391140300022 -0.55680249168342943467;0.61966130774336602993 -1.3569923206308889263 -0.20056338971967394014 0.24284512271187091992 -2.4039274141678346197 -0.51258174862087424462 -0.085548191298248837944 -0.078770381772956463151 -1.0395171311887219101;0.5460741729296796354 0.64940186271829269948 -0.50852993888693687197 1.3667359836159802544 -0.68272434730538322789 -0.016167554610701927176 1.6958957751459668994 -0.29489059409378898247 -1.9084336863152133734;0.88641375820414125553 0.17624747031785931162 0.089741197282141776936 -0.0042272674743049701296 1.8088395882324359576 1.2270936752761949506 0.68930860944521532563 -1.1130654595359676939 0.081034650441895977879;1.0746823264502964879 -0.44656933801796777628 0.99060677934485552587 0.64345996872920496745 -0.037015439140526226747 1.9044583247142605753 3.3179781653802260522 -2.2262026404802410795 1.0192572945176587851;0.3535993559348445392 0.6271239738656726459 -0.027849024225866714222 -2.2885973029703485793 -0.81850775761602601044 -0.41294850529165516573 0.46102638128646727944 -0.78502140762780070471 -0.13471413469376222749;0.35332628384390041276 -0.35245475025088240928 0.70057242670127883866 -0.41671171305473581059 -0.99990103798187424111 -0.81472177412794621887 -0.25311317780597258897 -0.064086578359506596314 0.071089390389185991292;0.35980130590170128491 0.7340330671492157899 -1.0433464109952821364 0.47881247630416534644 2.1732841010805943327 -0.48477404869948903521 -0.62018664516391663888 1.4134266652938660691 -0.54806662332313837993;-0.81593368399913634992 1.027639714177148722 0.3845739513988886138 -0.073887610373207457393 -0.66215109406305072692 -3.1248459634588332534 -1.1852612376656181947 0.65724929697717304755 1.6082228871796144798;0.49595599873550894054 1.6134770099194202242 0.77644917038886851479 -0.81149631054653037499 0.68962697013861351536 0.8239088643774070686 -0.62313360512099902344 -1.3531976846391238212 0.50408152807011874508;-0.050142018141721797497 -1.2218891335536352649 -0.46289229738527182256 0.24330194952711364786 1.4969141279202777817 -0.96970636044312219504 0.27741601053002229449 0.10736304376624897228 -0.58801166958835837661;-0.1695962341043254773 1.2318611284470717404 1.6801047987979007559 2.2708654237585381708 -0.20183196784428630854 -1.1285827461456574561 -0.40936702578259193119 0.026838230637601337425 -0.16370689567588392332;1.8601381340648921459 0.38150788943381042095 -2.5799447730235023357 -1.5125064614186469747 3.2911498504404348431 -4.359806784664797874 0.13599647246800869449 0.328260177516122853 -0.1623662585617001719];

% Layer 2
b2 = [2.3210623538196131221;-0.10378854426277163425;-3.3436989623776063318;0.024460074104377935167;0.80764703605894494487;0.86419585621496652905;0.15872452358420999219;-0.32817544593300435052;0.70743249999505519732;-1.2806718558755552095;1.2375286798455018555;1.8124790364221439187;-0.5890817787676118078;-2.7137057744720043395;-1.7587814240370511776];
LW2_1 = [0.025119696526349804405 -0.39891591901862644143 1.2260881029822963129 -0.81488726383828036237 -0.038838474206868783822 0.72149232459310363996 -0.24117253334487781524 0.25822394314762586731 0.59780686795346649198 0.94861810480575170512 0.65309326925657540386 -0.62395980779992610277 0.55505000777860380445 0.0012669861315367601101 -1.1621080500393619062 -1.4830964825221994996 0.11837524234190274774 0.20949741064474955432 -1.575584551392764654 1.0284355982649657779 -0.42852664836077902777 0.67087980628352528178 -2.1562103063142652459 -0.35246756104128740272 0.96705363682612577314;-0.27095215779698395009 -0.51986345243062526134 -0.28635923122307277433 0.90957436398083002516 1.1682759612030206853 -0.76919716430403239915 1.7020446308990362372 0.77924907492340356185 0.40902118083429889195 0.5688990535182885111 -1.0355593807146110663 0.38865367129474226449 0.4023871395208188928 -0.09011282486005187109 0.6380763863111068579 -0.1443688971750380079 -0.011133071188541647165 -0.66280163918900369957 -0.34860127409251606689 -0.22869959461256583744 -0.56133656141437648923 0.10862986606117788768 -0.88487119058820407069 0.25442909976477201539 -2.175703570179392532;-0.2257519470406550155 2.1477099400838874921 -2.9596204380287991498 -1.6008287055525909359 -1.7614632282624704818 0.53185513752712487712 -2.3994043854185935771 -1.3147121104234584799 0.23066595805437761779 -1.3739918967962136964 2.3623088186009293388 0.010431710063809634947 -1.1908494920025805008 -0.18817421571535880576 -1.010976572382757066 0.063678754991396191443 0.28690628748917212931 2.6478120504327291584 2.1876040953853426174 1.7669244432306565606 1.6979825097341636475 -0.45882116612435647207 0.78657832645935277238 -0.030013011083392840406 -0.01876334157071298317;-1.1906448845997914532 -0.42967086411331661955 1.3268616636949850385 1.0643305511795277951 4.1459875364770626405 -0.23539392734050593181 0.10768460465447753094 -2.1069879025179916177 -1.129870247294412211 -1.6148968865717134857 1.1526008288870621676 2.0189469008272342698 -0.45807577136832466902 0.1202664758172313636 -1.0415187034700390534 -0.19544512045238565667 0.12327427207169774914 -2.6463917443695157417 -1.2771141843803055504 0.072223472238542182899 0.34355503759266575736 0.40546727510109642489 1.2276142571569310658 1.1679603907406670427 -0.0030948792489670952366;-0.22422830672193000412 -0.11562047460345151184 -1.0867701344011546638 0.11681008649097915364 -0.89089354321184133223 -0.010659709580582134303 -0.79648011206876068169 -0.31336195878606193377 0.66223276849287449064 -1.6172844381259892099 -0.44440286526956324087 -0.31768742318652831713 -0.16088885491032545172 0.25651113495385458041 -0.69170702801623495937 -1.1457491331149096681 0.32709883468419331809 1.1686168807772407963 0.11140988105542251607 -0.42271774539875200949 -0.81094139425193900728 0.32796461083245592727 -1.7372716991559999933 0.016641577130451862265 0.08171351445742378039;-0.24726013872812349637 1.1298995646292366857 2.3638757482917402974 -0.59617981571490918924 1.5508238021877078783 -0.20707498581844238639 0.35588490227706870428 -0.48144115023114614216 -0.27851219491055689836 -1.6373536387200142705 -0.15090677699543197932 0.62092497011794212103 0.13184218018698831698 0.47340611685919076201 0.32737924497070164387 0.047989408086973397993 -0.13908865165187567214 -0.027734808962513173014 1.2919686652433872709 0.072000053202157049403 2.8476426486792352222 -0.46721566655867707851 -1.2470834828707491049 -0.68779508380453857619 0.51697709992628615439;-0.43839359280544704101 -0.66464085163208808105 -1.2080477110347715985 1.1515989558120154346 0.43828244799768684148 -0.54636553460857106845 -0.25024548900067317136 0.023594838294773410464 1.0197931935669612979 -1.1192746682979650696 0.97688514181975438788 -0.52780235224152771689 -0.12290940353067797419 0.77876055796589205293 0.37630645953403712989 -0.97184006544554046858 0.11431800941676141525 -0.05138070893121514382 -0.26677013831001739064 -0.25079103555809661996 0.0083943609163119256578 -0.0413147144341147049 -1.221702118446339913 0.96673657360923159754 0.44706008091373117264;-1.1851756335965675238 1.5105657735525033214 -0.2366206851307707526 -1.623543093801329773 -1.3968674752776955028 -0.38986956244655351922 -2.4141634920157279964 0.79099729812637820103 0.87420351850304989227 1.3169692215672976765 2.2405620445626572845 0.71187377198245105347 -3.2797578562367943888 2.2800042621185427905 2.6075174551992783556 2.5125214128110666678 2.7309624841791388938 -1.6526610318286714119 1.7259832493947904197 0.29726586100953394931 0.10437313526661783081 0.8419555899318743597 0.62621826326294405263 3.8511258790636038185 2.3790340881787299665;-0.44230982490010506414 0.58223072005900355919 -1.8514273611007852072 -2.4515189448222001189 -0.097752519160118345187 1.6518099696085766226 0.26749298962660766898 0.57748958890789225951 -0.23817561214600369013 1.3523652730721178461 1.163746153960028229 -0.60108141276767257377 -1.0299356441861668987 0.27354837494057809844 0.72063630381364229827 0.52888767894535715364 -0.54719992876124601278 0.42800175986009475482 0.14300054839659004369 -0.72404178847877864733 -2.1648907988106156353 -0.54051213891867033734 -0.15412410430884659895 1.369959018254163885 -1.4019456834843362358;0.14483040436703631393 -0.49277921466389906779 -1.0160326048508558916 0.3361256098268009529 0.58250255241356063696 -2.0555851081172216155 -0.70513535092849966013 0.36235508719564912816 -0.64563342378174848335 -0.46718770263908221407 1.4288358898295143717 0.64802905298196256112 -0.78810759574380151449 0.75654605320094958643 -0.69603916187262171444 2.5333443287944894529 -0.78369181823971867384 -0.34581663918383825918 -1.2150861402873043282 -0.27303180950328931331 -0.2610517024468289593 -1.1011810805831216964 1.1378112563370379462 -0.28015889161756257764 -1.1936420452121045965;0.94122120046877966182 2.9914885646308109202 0.1278946004485538579 1.1468265525831340401 -3.6040754451147209991 0.56612019576371142016 -0.017434905356301926005 0.71303516208469563953 2.4251055279472977233 1.2679796332748904941 -0.2486223553903360306 1.5930157552117059083 0.093881866624265286614 0.5975799980512018772 -0.28496204286887827362 -0.62759790047056773776 0.22394650046514871788 -1.1863166157778926024 -1.463577394248055441 2.6740698633218595859 0.78260632511787586729 0.058393652637164263075 0.78206973941912727444 0.58961362896678082279 0.9944627204351254024;-0.12998537617338445926 -1.234696138366688789 0.19804990813196107768 0.60600086429076926997 0.1907065915518148802 -0.14105245776346364561 0.14836787050242170038 1.0283980902694813686 -0.14426271935630538557 0.34703916051161215472 -1.257829034329503326 0.002083451039783090937 0.32723722919347753013 -0.69429078690114043315 0.24005614153325577353 0.72329516549620098687 -0.13167392099391481142 -1.679711573936965463 -0.054905474954675265176 -0.47571900130175032162 -0.16339034073968897176 -0.19151349562553157679 -0.2463612981263797741 -0.31351030725272549526 -0.25209151381854466578;1.2552618176927874405 -0.74727178787325398979 2.4072094263789289847 -1.2074353049844883667 -1.4501718859405754447 -1.8355993376662051997 1.4883151987814331463 -0.69191684626401905867 -0.054086214947476132786 0.25134229221482279337 0.13660788773307175337 -0.38039682548839537368 0.19047688455655237272 -0.49760387104673847736 1.3198655846316473816 2.2127069512629615744 -0.084854582045748874752 -2.048577157361793688 0.2959657074580314684 1.0726097433762356026 0.61547627703947049849 -0.26136134158797624805 1.2575756360957630609 0.10213074654206999448 0.71613922768689253218;-1.9066246136901574548 0.91047071297486747987 -1.6903580445812773636 0.34249369847330890515 1.1925866710853580965 0.39650467047324222669 -0.58279264602684344165 -0.96719984839203176907 -1.7882951582848887195 1.8155407496763302788 0.86230670845979218164 -2.0584368041848408737 0.76133450256921986199 1.001803232702718871 0.19052193136641237814 -1.9432242138178612567 0.70444592023534002845 0.0022430556256434856788 -1.1708293004761960443 -0.060727111527982997885 -0.96696376455909172076 0.021999416428379485466 -0.34398898730518440159 0.88582527269182520513 -1.5644062822340529806;-0.22949113038055221625 0.92227940844631584039 2.3029777967241016334 0.1805723181633732688 0.10280116018439759695 1.0455831004914641902 -1.9383026471969964089 -0.10038166035138527954 -0.88087808987643190228 0.27786594658787944212 -0.55893647866367257571 -0.48677363408613216755 0.9230721754582784655 2.9239160418799539087 0.14237512606064203768 3.2361418870574731876 -0.91218647687595222351 1.9497600012216635967 0.89832831596698470289 2.392961013047738561 -1.5878581780400284895 -0.011528396818544832392 -0.73279713215137609605 0.81409717307782625273 0.52944310814724371284];

% Layer 3
b3 = -0.095659953308604328548;
LW3_2 = [-0.021886235130571741331 0.50906579137468799257 0.068556091149776246518 -0.021522801750516726282 -0.28838290411648020983 -0.077942144221419207284 0.057523482121356474261 0.37454271402056615869 -0.15717502084489867742 0.040498058693230871985 -0.011613242934521827293 1.5212430242760819343 -0.015215052755172512808 0.20562153632024474104 -0.0040389093812795767366];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
