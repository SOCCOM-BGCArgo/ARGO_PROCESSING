function [Y,Xf,Af] = ESPER_DIC_5_Atl_3(X,~,~)
%ESPER_DIC_5_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.082320941167346797784;-0.64303108362483640814;-3.0601974682411055007;0.20810025271658744161;-1.6648811874859517079;9.3444895008780157752;-1.2245902669328150303;1.061557879003071081;1.8224845979706929544;2.8402108486827724043;-0.013435550783746370851;0.68346724627607902125;-0.098299680822593313301;-2.7126062190768096549;0.82888632049124777446;-2.7830518176033045563;1.7878583992644672129;1.6855839848876308373;-1.1731486264340900139;-0.58747906450684594937;1.7552642849553059534;-0.062745671938655628308;4.7885558197026565352;0.1802034034251685235;0.46951895866191895035];
IW1_1 = [-2.4958901722174804405 -1.2567217504785943571 -2.8336706205710169293 -0.31220388049005121101 5.8359266376820828626 -1.62610991186593834 1.157985520475583785 -2.1037374867433134007;1.119269591831484556 -0.5401759760708735314 -0.1737744120966572825 0.51287150209726983796 -2.5405738321565536353 1.0940781833428478986 -0.45249664857002991347 -3.7777711605798973693;0.12793603606965708863 -0.37784223280801215727 0.55503928228237287001 -0.17565143702906038659 1.0557348385342542052 -2.4204468248293942167 -0.49486101850094121879 0.96911078180505794144;-1.428150813518058726 0.82408857786859945893 1.113914630272937023 0.32434706629355186669 2.3214633260711226015 1.5761720173754445451 1.0873345172295616479 -1.9825229018747991816;-0.10660543187635877771 -0.15439003516493840507 0.95565461937905482603 -0.23806802683706176915 1.5326224147065252712 -2.7116810555276851247 -0.67697443976545024213 0.1036151732450907581;1.0510832833965000344 -0.47131273409107460326 -5.4434985160318367647 -0.41133880899310060197 0.14201628266164792458 4.1508244735203589926 0.001140121270124559022 -0.30631205099780545176;0.29346468434418926385 0.055750402430230258655 1.2075755048817338189 0.56567459441827339095 1.1794567009844643124 0.34561967240318991479 0.042840252317638237434 -0.45891409197804561293;0.88726408565797521 -0.3438642379581669517 -3.5688177633592346183 -0.28012151571541776818 1.9290924267097429023 0.792909812707479289 0.16833811844963961213 -1.0823344337366069823;0.33384632968758237714 -0.49428274234895341888 -0.90285167068331362294 -0.61476791187326573773 -2.0843731616482816804 -0.76257984015136459632 0.059961647514308949458 -0.85918000252940551764;-0.91430844629785279487 0.29970980923221995917 0.37662760568109188153 0.22678939095248440427 -4.1809829791461039505 0.54419625433013840698 -0.67172668377506261628 -2.0629946280861553021;-0.47966584202761192168 0.15752765365687640409 -1.1088397525643480801 -0.88460807302905664073 0.10369592007728689609 -1.2927830006662954787 -0.40768714413243167805 -0.41416424931590084535;-0.23548160169268433917 -0.14188858965828071712 1.1672179884670219607 0.27227535706382749447 -1.9292484328256436221 -0.80162020412954981818 -0.55318380379284060044 0.82787725459462901956;-2.0218281971079021808 2.3371723366122991727 -1.5823828930644718849 0.58308905549202039165 0.55999241540227517877 -0.45071456696059158942 -0.051349553717954937726 1.2146889606922404159;0.96948055485489603722 -0.2281189837039358792 1.2237461250293548698 0.70685253122091962208 2.6861459100560560742 0.6002818495119420783 0.22466606941519468021 -0.4090659517321554306;-0.13742797378499405081 0.39586059668583306603 -0.41828609999211568971 0.39142184718490741213 -0.79204239791996478015 0.81539420335512158289 0.26198562807834618882 -0.56016003689607951621;-0.43160925800456828583 0.076275757895283444188 0.80685871268708164727 -0.61789349084556866032 -2.9102051695655761776 -2.2261099040653276049 0.24118867484285341773 0.11453152239759939457;-0.1035503968730119434 0.47849512393372728436 1.5727705880779685454 0.80531459236242930455 -1.5474207872474758929 1.3233072416365949664 0.189543935831775201 0.85341829655142931177;0.70667837286577062095 0.76040689724449861409 -5.0943557767918425938 -0.53683867516799577135 4.3504538768206328925 0.32973131899024388236 0.78119618776132315752 -2.0265479782573709855;-0.29694461522408588383 0.34536910809958654145 0.31670456382869932588 0.36429187820164521394 1.3804204944544236078 -1.2517953494348372789 0.32081251602958732461 0.51583170545833723075;-4.2698848645429690052 6.4398375126516054223 -9.6509821797314465641 1.3976027463539975049 -6.0209926274934142398 1.0075279802475074487 -1.4454703337082130954 0.6639582198975961802;-1.890917905319744019 1.9174288801180703334 -3.5005204983229045723 -0.33776487224815421317 -1.922351942013686088 -2.3187314749883314313 0.036352098270543850567 -1.631362950135241352;-1.178134945700077818 -0.027625729852458601882 0.59738083481173398503 -0.7564669160635673073 -1.2902698527992639832 -0.8674420413662274898 -0.63927978126342233089 -0.10422132343825099565;-1.3378570012548629542 2.0023735764291212824 -6.4634776513562064437 -0.75984277398887478672 2.0428490963929304414 -0.65743952688384632577 0.35552521005595366654 -0.27859024055014103283;2.2544672561977798786 -2.8481996488202465656 -1.5483909880855006858 -1.6368161165640284782 2.6529900826848273887 2.5317596810977729405 -1.5345386477224702837 -0.39260659189700169991;-1.5869897997644855092 1.7664757813723717117 0.14166468258281153525 -0.081566861262280840328 -0.86159098166198899715 1.4253299901057183696 -0.22839272444904767934 0.89736560104834361962];

% Layer 2
b2 = [2.9775348374385064432;3.1102126056866437054;0.38579740407408225078;-1.9814993938767571091;-3.6116146977980698729;0.41379362586949225422;-1.1003408561453993375;-5.0289990527242425244;-0.33856578157205519108;3.062777054821430589;1.7312323863866418971;0.88266404856497671094;0.595965412268608552;-0.69177070382290395401;2.2732766638478505428];
LW2_1 = [-1.0223121841534257292 -1.6992158994654393833 2.6747011730592196166 1.1955900425416448041 2.1965080815027797634 0.85888396100388042509 -2.6963646353464523209 1.183826042436004311 3.167999235778108158 0.97213813004725135869 2.5188303615798153245 0.59952828164049143389 4.7014469529990474683 2.5752970301499735761 3.7635024701493318133 1.7999571124337903072 1.5277529935282523343 -2.338448300905970445 -3.0480419313836026873 -3.7028980391284611606 -2.8281935317398012586 -1.6525913921334653978 0.51963549646057871634 -3.5178110054486890768 2.1912041168408862291;1.3237930079859310251 -2.5614069377731012445 0.37549510217981607596 1.4504559839327026971 -0.74661539711474944614 -1.1319743323326225681 0.46778745086636913664 -1.9980070575950688028 2.5172430745425731224 1.7146803360362226076 -0.05875699903400651708 3.2458007526291630107 1.8604387993831135173 -0.0091840367777037516805 0.7769053807071973905 4.0483752747178174403 -0.5043800584937607745 0.23041829001850616665 -2.469744266183251824 -0.018399099877679854498 -4.2977847219699549797 -2.8464500987455654268 -1.2254216945978690934 0.6928908454790617677 0.23676821616920090685;-2.854641545997833596 2.3581152166004217818 -1.7999456936966264919 0.36568083300382481227 -1.715067752814766866 1.8067359835454446237 2.1301680125048481074 -1.8521495057829278075 -3.9832345344950415011 -0.44307669815253197809 -1.7267708826905487918 1.1302671095061216366 -0.35499328228809567953 -1.4539228164556381451 -1.0315907904662557915 0.69346908788171823801 -3.4683231025194047881 5.0462196008612805187 0.98750539737469078538 -0.53601963987430512049 0.78994788727996478883 0.78818986474688290667 -0.1574869957501406903 1.9887423055708841613 -0.81545493787409817354;1.0059195412188512986 -1.9852657741081609633 -1.5494528365103121814 0.39110773849038049654 -0.63535753429248353896 -1.4871919387603036444 -4.3595808167498484309 0.258348246522906555 -2.1365124499642416112 1.6626514536905940833 -1.2417556022761635504 0.15092688600920656228 -0.38136068881281559584 3.0148408124515402307 -0.057209622677443019989 -3.3230620351080695229 -0.3208381394362019301 0.24290021809546250009 2.1524406437287244565 -0.4213188068156452637 -0.15251467812217101017 1.1782287013982690738 0.19553825159005805423 0.98117309274069486325 0.77086283330576876871;4.146578271693373452 2.2616938219760460704 2.95724146050106107 -2.3752385801230397888 0.26999189861133865431 -1.1241044130987205563 0.38768836108315873901 2.8487532787632821041 -2.4192701391946358491 -0.72588433702432464401 3.3678255771319682843 -6.1691686096521216598 -2.8752570569916948706 0.15794610419682098001 0.36566198918491421566 -0.60789691997085659736 5.2090737196655325647 -0.46350981937882274053 1.3996714712218121246 -1.7924998269586120969 7.7094422876189652172 3.9809979891687641285 0.74455334337672662848 1.2741178448103294141 -5.3491210480018285267;-0.93684349396102639673 -1.9393008278020091861 0.22255873225315522812 0.81324130660237581303 0.96788549689300296119 1.3434768434549673177 -0.71147306998959902735 -0.55695878559538580799 -1.4019036844459678015 1.6709750446398139445 -0.15204198978132665854 2.2226964821163672781 -1.3418198108274395075 -1.4369028141915274333 1.2773349681077510454 -2.3463129905576796119 -0.229519903128548447 -0.48881804516902083169 -1.8447560575427852658 1.6412462671986516316 -2.3302643125871749241 -2.3053220795008861899 -0.88360119698579664416 0.69249549323921921751 4.1458943896740567681;-0.77026452191370109457 0.18090040444271784925 2.2212572821630502951 0.36393621762270195186 -1.329499916093630052 -1.9183750445378957572 3.8745041998640754599 0.77716727927276674226 1.4497026136767721116 -1.1191763736363176118 0.13690691653483322288 -2.640162404701258847 -0.6094565231853535936 -1.2973693167646180857 1.0631264067473866763 -1.0936424162520910208 0.44967981496152598098 0.9521695455891225901 0.57334748497625487307 1.6762290983500240937 0.54202133355492831956 1.0578553632248521854 -0.13151862356800922416 1.6820904009226826936 -1.0522445820648331782;1.5430140146445010529 0.48403006188356295647 0.86640373079734711581 0.86185093066046780663 -1.0212450466847118324 -1.094942422825783801 -0.41989069918740851151 -4.9577621203069170974 0.058411460202712109369 0.003670341535597825347 0.60461348951609428237 -2.5376181394373378275 0.46671394449663394788 0.9667497196028012052 0.077353342659465321174 -4.430500178803047362 0.89995213248541106044 0.021554264639911859675 -2.4016860177138665833 0.020007633139225745877 0.6048900678912157991 -0.19998530558804850088 0.54212443781985231173 0.60006914800548483147 -0.65709975396088404764;1.8133737963910179225 -0.89590251422139977056 0.69679937610757136657 0.13518716084370907549 2.1530094895167839475 -0.73585900961542816123 -1.0314556800928966762 -0.32371997358786808174 -3.1249644457201086745 2.2861317954983628731 0.44917636018094436734 0.92224328098118824037 0.75355555395955720055 -2.6908414835633931439 0.33476150557223094406 0.90473885818832266992 1.286392704910539253 0.42581747195842956089 -1.6676318379596295483 -2.0636647947887682975 -0.98400937420548251211 -2.2281301096786427784 0.088927194774808954181 0.48929482734261475763 -0.67304869748688567199;-5.1473234714860653938 -1.6320800837837430297 -1.3309564967711042804 0.082603277383855366889 0.34853750104398717458 -0.26110217485376152613 -0.53139501534639843605 -1.2940280811394855309 0.62863853042159623108 2.1211600053789414488 -0.29691816309196050749 2.2578902698543532601 -0.26093298843642903639 -0.43619960432868981615 1.9630494825987419016 -0.71251752902477771823 -0.488498778324393923 1.1917015804288311198 -0.68953219609451010808 -2.3170513978384819076 -0.57553990762558371319 0.15506580740379935501 -0.021285982562452614164 -0.71477558593020418254 -0.35163831309923393453;1.7626650925766247369 -0.99701926098520698982 -1.8046058392326556064 0.94137607303583070717 -0.91001087239934130846 -1.0570856419533201098 2.1180731644961556803 -1.9388407920241366167 -1.4340493488514522991 0.73370084752977215992 -2.1117295107329066006 1.8805585464899698955 -0.67211830337330336071 -0.7909200760547686615 1.5953994290071191742 0.96233132766648887824 -4.9789783859959877432 -2.3021435424459610886 2.4822465388805001751 3.0900097206332577393 2.7787775879363709741 -1.0159071566559743083 0.25077841556753444063 3.4895516621713920102 -2.5060358547811785179;-1.8803782691654362669 1.0422945600320216997 -0.81410059484951180497 0.46858192068971521449 -0.30259670613943856488 -1.4315404257489143802 -1.0143188959563500529 -1.123473004363272798 -4.0235415187761374156 -0.37981882617583523354 -2.5915976407689171879 1.8636650001626942075 0.87015867094791987668 -0.74728155358290804244 -2.1645956929707774741 -3.3853986679743317545 -2.3011239151865305885 0.41899343476724049129 -0.5980232292158029761 -2.9516525946379053025 0.223724409716182987 -0.48723885690024432149 -0.71332806282898708616 -0.01450401432422020534 -0.94496853137668623823;-0.018967674534470648634 0.055149341066672977196 -1.1979501093553843738 0.23708789630981655372 -0.94198128581115514457 0.75467951652229947612 1.5919222006397384384 1.7274580086899389286 -1.4907748306591972476 -0.072681453314830612999 1.4242828902561677218 0.94003739514068784811 -1.1299702133020330663 -1.5698511097491409938 -1.6304430404810319466 0.82973070889806410655 -0.53713211513718972512 -0.74973103427590626069 2.7648966925931368621 -1.5376045845881634033 0.44596044107822990776 -1.4819010320308190209 -0.49742713940921595706 0.89783943975521329772 1.561844516170335595;2.5187509937129859416 3.0458904388863734525 -0.37397894028169587077 -1.4279023567304165443 2.2426671295349502877 1.2404462223292285206 -0.19146296483016950196 -1.2145999500488611211 -0.39470735932924644329 -0.53771878302793441051 0.78328054615161502028 -4.6823364803166658277 1.433367166193227682 1.0795928787161752638 -3.7964679827897036546 1.9239922239344695587 2.830154605387383171 0.74263619135190805931 0.64223422013062780866 -7.2672850178833989787 5.6185314159764176978 1.9121283720458779332 -0.10667693161050632866 -1.8428768404722635221 0.73687902506269931102;-0.31825682863008747381 -0.82764253157368317115 2.5383033592003290124 0.7614107371753086051 -0.24837165742855504824 3.0156283105193493199 1.0222731258963262402 3.472541297440034036 -7.274680814173472676 -2.5213643018006455243 5.9746484301631763714 2.744254948065494748 0.63629472430545763739 -0.19046620472727557316 5.2673148714793391889 -3.5986952705392774021 -1.9540952844300041313 -0.38626773341128450845 -0.68146789104355465216 -0.054036584730537136345 -4.7579169562153067474 -2.3550177049103067084 -3.5598712901604616654 -2.9695633281790279057 3.9555353479776673709];

% Layer 3
b3 = -0.034398130224439348035;
LW3_2 = [0.068884597682062648216 0.030701663954535138995 -0.034598509359563135723 0.04853378724616826817 0.020099246146327923168 -0.04283711260457079284 0.2495766737959779491 -0.12099495593643813662 0.14327079819504995317 -0.05878065405899074447 -0.0056775369347187108066 0.10480699080361328968 0.73744026132295670273 0.025766709804423061636 0.016969960565341588726];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
