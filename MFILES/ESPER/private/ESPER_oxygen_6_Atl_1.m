function [Y,Xf,Af] = ESPER_oxygen_6_Atl_1(X,~,~)
%ESPER_OXYGEN_6_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_6_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278;-0.03];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417;0.604229607250755];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.8260675944682764893;-7.8301515110582053936;5.0864436075475412125;-6.7856570591168283713;3.6039556342055210081;-3.6643701777536397124;-3.0761058561087972762;-2.3758922527233790056;-10.763355569013649315;-1.0613610961267130328;-1.0419609646773999589;-1.8002814480712554523;-4.0447616766773979435;8.8601212717202368907;0.68893621411991290415;8.654016415913597271;-0.11107212315414519144;1.875117008602876556;3.6465392233809534872;-0.53709037671615422749;2.7237729873453466745;-3.2136354263950450694;-7.8990220547298131137;9.0115921386711903551;5.1580696909597758548;3.6403371102681338911;-6.9584817706268289328;2.3087066481779574545;-6.0347339121530207962;6.1051391544726119065;-2.3438948859254682411;1.776443728803891009;-4.6447910706676811543;-15.33972851128924475;-1.5673886183481937628;3.3473784915735831369;1.9922617156671780236;3.0380095342156496763;5.6764086578390404725;2.9114000349123991818];
IW1_1 = [0.45041644789575008279 0.52825255383525893116 -0.79993082388810521355 -0.36501312802958996162 1.602930419956696273 2.3834525099816441518 -1.866627500950410079;0.96181794409027998594 5.2232735550052629137 -1.512965066824853988 -1.843534043523299637 4.7061915559592977232 -5.5115143651273479364 -1.4746327857778027681;-2.7891360630423496225 8.0499343113843035979 2.3292440205878639503 3.2967555136419517403 6.1852469635570042072 0.81700733705850492328 0.62614866143913661123;-2.2814230438531710732 -6.4672929397113003702 0.3481682614406237386 -0.041923743861350087903 -8.5662381189627243572 3.2022802737641411497 -0.19446910385465046578;0.97057321198402057849 5.1768243392361679156 -1.5910069832335675954 1.4036853796908232983 2.8778694005900744557 6.9832407810721894847 1.3853833744858163879;0.10557681625103874923 0.28484674407096227666 -0.96893743919629449213 1.373116132091731334 9.7690594598629569845 1.12703520230688925 -0.86511310086641568518;-1.1628895510766590338 0.72356076149830073074 1.4764251929939007368 0.47265111554289773732 -2.0677150397355097411 -2.8686688970559819367 -8.5235234602554559302;0.58979554200630768257 -0.84356085160661153921 3.6594017390734334683 -0.2981138898984477259 -1.0354638895186405456 1.1455000869405309594 -2.00500195742580134;0.11334116133786800718 -0.15719717914772915468 -0.11513559971673810456 -6.8884667507349810478 1.3877434146508877966 -0.99708495970091992611 -0.95079644895152048978;0.027062972562838714247 0.50434094277490826297 1.5014924769539561566 -0.51558376406448569451 0.8403960315902712086 -1.03250143048688936 0.25529960493745351702;-0.13028197469992150448 0.55378679341883541021 1.411709803061210744 -0.68791656892860464367 1.0754476144103024549 -1.121043127927015437 0.38463639427668905313;0.78815621372286803759 1.1849951520396064808 0.54346153444115585796 -3.4629174079056217472 -0.8319480647908398252 4.039887667645906788 -0.0090379071662268720827;5.2083967761840392896 -1.8930093984810769658 -0.62695808015805543079 1.6186183359839760865 3.040497388250309907 2.7312977967882696717 -2.5880137380842405115;0.19887850757639477517 -0.37960290524816925339 -1.5129530669294570799 -1.2635893222890077769 -7.4468082749212696214 7.6580153492557947459 -1.6217736073285946574;-0.67964762234851938683 -2.2340685072492485475 7.6467308692624529343 2.1283500983152503494 2.5791017889252492168 1.1513052834649530887 1.5453257396575195148;-0.15280966525226352681 1.0666369711229919393 -4.6134645495021970873 1.6682049796420512777 -6.7938145837738295185 -1.1006317227451221097 3.315721784096689273;-2.0195306441895999328 0.49202150519291165676 0.4757073628525657627 0.72525049154221887804 5.9248315752737212847 0.89215397456341494209 -1.6170591913015177621;0.72695870452426569752 0.53622955078338230273 0.52167114153822069511 1.6247791643269062778 2.3780444300399299351 1.5963126702091021691 -1.7360092615534166161;-0.24594818339371923854 -2.4357067482888550281 0.51312051761477783796 -0.20315815363213868272 -4.9362760873519677673 3.8601330221755327798 2.3273620196358275614;-0.28696439126192713198 0.46514229345330165843 -0.65495383646038707326 -1.0405126677429579196 1.4765893303864543462 0.63386815067643209609 -2.10261313941342598;-0.28978329787959528074 1.0173658307898676423 -0.012335774386103181416 -3.1846879506480907374 -1.8199981301457355265 2.7311892660831222912 -0.25740365937162651422;4.1658015898238405228 -1.2242448850528591109 1.3965069686093150025 6.5059216004941093914 4.2285523727059164401 2.7078088221582468087 -15.714925367835091308;-0.6702885151553007459 0.84246911867242235683 -0.15245010057884872401 -5.0007501423964431098 6.307915636922582614 -1.0745522667810794015 0.64398810837987940925;-0.10294599700910964102 0.66409305001948615299 -4.33546638925188077 5.1680073265707457963 -1.9960589943524640333 -2.1096766658158530028 5.2292561645657347214;-0.11838897993371967632 -0.24959529554214154867 0.6107602684653413716 0.15922860837490523944 -9.9757936713533421624 -1.2289993453000203072 0.52279126119120400418;0.1226726828738410463 1.3772963882208917319 -1.3912270775009734081 -0.26151273144133740933 -4.8645039503707394601 0.5055886852549674737 -1.2844718930505498733;-0.92243473914859064333 -5.2297007947941080985 -2.5042654661877961075 -4.4805773701725932767 3.9618579550799570832 0.41078610682556676581 -0.92494348991912456182;-1.511497218612141813 1.1240524351460163821 -2.124894304126782707 -0.26891080651016863179 -0.39414275221131284122 -3.2015492530542388749 -0.99072357163902702304;0.75118198264954205712 0.93955648536319791297 -4.0859082643051500838 -1.7701237611284901252 1.5627347958552035845 2.7385145331377311884 0.14543736147709554474;0.020084074300698168125 1.4772608794365171825 1.6988915574218137472 0.33340239451489850353 -2.4882655716966119996 5.7746577317815388497 -0.1644683409817568609;-1.3785911865948405897 -2.8756731244068065578 1.8817540857058747683 -1.4362884784171443542 0.26946621282411314935 3.0483021401829666353 4.4851276066120142616;4.3889343951027832702 -0.36110435158682274714 -5.1936835594921335613 1.5725139653262121264 -3.3029956181357640332 -0.33533424659601862583 -7.1581608415763318121;0.12104141845798015165 3.1137258738231814448 -3.0796936499835472212 -0.77355105294239479008 2.0120984688639538263 -6.2538580337596263448 -8.605941700919011339;-0.87078849834866978163 -3.2417413441518942996 2.8005153676906489046 -0.57542675637957541035 10.608315834236645259 -3.7483094746613372372 -0.68623935168801242224;0.11402066510051811488 -1.3120841051647509357 1.5371236061244610838 0.57458995483596675413 2.4328382324588226915 0.26906304231184541287 1.2320838840449304108;0.18390967703116922749 -0.050342429159870222266 0.6897862314228559999 1.125898666988042196 -2.1152340676317238355 0.0381179973483564416 -0.72801136370895869199;-0.83116922157335626498 1.0536074846270984118 -0.67979159437497316265 -4.3122234260842606801 -7.3157401137264992386 0.19200745437786256864 0.91381341609920452296;0.26602677265813040597 0.59328474889617832666 0.077839017393212875384 0.80555519329251767946 -3.1282534101141146188 0.33785480422775804321 -0.52719058913480798534;-1.4318960488838254896 -0.60099189268855390811 -13.268723102194847741 4.144623533446584851 -1.97640629749602037 -4.4133476731339849053 1.4312067968553576769;-0.79812283698150510158 -1.6819162485953114139 -3.7224953965046161386 0.48657200927034066629 0.058169844889004382327 -6.5726372209080254905 0.82694680169271328474];

% Layer 2
b2 = 0.56975280359201063707;
LW2_1 = [0.35679472768799469495 0.036753563659796505136 -0.020508195023156781944 0.06156147314749540328 -0.03318588553877876296 0.97290612413293697802 -0.045411631051731682351 0.13149730594875935763 1.8566844377637043983 0.95597898745997156311 -1.0067098499073672269 -0.099010725492979068108 -0.031329855630223418794 -0.027052292510665730541 -0.020668145366653272593 0.070322763622447589937 -0.12323380430953309594 -0.4373726319357733594 -0.096456589777074913661 0.19107431735852609123 0.069206955133835609817 0.010138865092351203451 0.078330744759815426614 -0.04374362483860171763 0.93064895045519702155 0.4931102287456147204 -0.025661333720848705092 0.16846655113787004088 0.14577774798824480462 -0.077005129370256192312 -0.074443678659807069331 -0.034449974025588830928 0.031343045203133142185 -0.10806398780274310834 0.47590632998495613348 1.4308027919769816805 0.096146821510775012931 -0.36068810830221659236 -0.0061146131158783187387 -0.071733697127004780736];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
