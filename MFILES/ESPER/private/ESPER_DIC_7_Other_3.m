function [Y,Xf,Af] = ESPER_DIC_7_Other_3(X,~,~)
%ESPER_DIC_7_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-6.6138443349704845176;0.68702227850740005266;2.002063753291373871;-0.61284400467912358845;4.6908228392180530975;-3.0339242227738272284;-4.3950428568513757455;-0.58679276799825863531;2.9297571044023817954;-0.11500156475831327385;-0.17347068579696536816;-1.6148786838128414978;-0.0011135059296847335877;-0.42094737634625717382;-0.40096158473477483408;0.099967300747467638389;2.2959097940374797453;-1.0223931392726299805;-0.69650943078023475064;0.89329290060856247901;-0.14661952586241788765;-0.0459941235102687071;-5.7948921763405687457;0.47271436789349946528;-1.8744514277966481952];
IW1_1 = [0.18902068726081491801 -0.0046128293885170437716 -0.27608098955877913294 -1.429694608243916365 -3.7706674574715224324 -5.5432469361163576593 0.92548003949184576289;-0.2104141001957230972 0.42882921157376324706 -0.6959718102885154023 0.40239931038812132291 0.81879985670215493787 0.23651462434050790629 -0.97256292537289834588;0.25892850306146769634 -0.13290859488426981505 1.0178641697032337898 0.51728244073651430401 -1.3587794073861132471 -0.70025654935691072911 0.17639539469075762868;0.44200088672894283226 -0.054999862918255662536 0.68809840731209992448 0.65554241985340755416 0.73994499938623248259 0.49136543700072854435 -0.46665732599888548604;-0.60443760272610524975 1.1627956604988718414 -2.0023712188572320159 3.0604721111642407827 -0.34987802464344980313 0.093162851803257312744 1.574596281272920395;0.33418576261552496165 -1.1561112070772352478 -2.352254562282016348 -0.0088402947338884711043 6.6703900262466770954 -1.4167694223437659051 -0.71876131126292208684;-0.17010971614948169894 0.44102184653880277532 -4.1330937299854575429 -0.53090814112695727811 0.097947677090675283607 2.7219274560622310766 -2.2970868320347657132;0.4287409356484525591 -0.59240707653652024955 -1.1100756766317054769 -0.17406404378887668782 -0.51444030558156217392 0.33086890091431653271 0.58301347216780441407;-1.6053151500891837955 -0.37482860691534208852 -3.517819992268180318 -0.14289389262323154428 1.4116108660680015685 0.069121677731060052197 1.1068531668987717786;0.46766451471097314485 -0.66385408406746182486 -1.2041432729332366414 0.44370599683546912972 -2.0321553491304715777 1.8417083989305174097 1.2036677130811948011;0.15134017334534333177 0.42283891466670736614 0.22717758594604867128 -0.6172339754074224194 -1.7074578159203237515 1.3678224316493488022 -1.2412950670824145494;0.4098250126428216733 0.43821816481218545114 -2.0357901935877622535 -1.8586865102564622543 0.2300132682895960623 -0.43638567527802107904 -0.98320123778124590697;0.087111512189850276444 -0.41230963339478798879 0.13908525532725668494 0.5605390193686095035 0.4533078322804315885 1.0111325181106667337 0.17703963891947951947;0.59098953024808442702 0.41703185126271741234 0.61874142090308681396 -0.82235773777524889816 -1.0697623665813309479 0.47110445280480772734 -1.0879407365777391536;-0.43540772422426859967 1.4910382630688352457 0.027162083096358400486 -0.56591600293227761753 1.762908671246202541 -2.2884289025707942322 -1.9456902465053147466;-0.42511439889852348228 1.4367497655778811438 -0.010289118515614061738 -0.23811581107109972 1.3126667384890950974 -1.2653122863326689007 -1.4758623850774597042;0.12366229824396840487 0.095172434759084198475 -0.37275772077846491825 -0.2886856118220984535 -0.67764233928107731053 1.8735135178627952968 -0.98138796774360737007;-0.50555907135670785646 0.97311199143241822185 1.9893756020911008697 0.28355553025765273256 1.4111767455662476145 -0.51081083809969585197 0.91717606795841799538;-0.15067426724259749826 0.69299107526812175895 -0.92736852819005000104 0.059247436519226683027 2.0308092329810381038 -0.2596328366173767388 -0.98725589279246883656;0.23078312364262398848 0.10244321911550863247 -1.2316440959312637826 0.67496179240966514001 0.58377064194705929889 0.56808438362665303334 -0.041398353021032764654;-0.1483925752232910511 0.37418850783038098973 -0.588650602318184335 0.077260708654104046089 0.9338231863072614658 -0.14930615772959510146 -0.64152280086904234224;0.29838560546588488442 -0.0028072277914052978787 0.3638913222206563991 -0.74786446801489336877 -0.077312518825059989291 -0.73387987403136845099 1.1543147404530904598;-1.1044729414137663959 0.80032986541312822748 0.13024286446564700692 -1.8937125669516987614 0.60257381535428944375 2.4589615583807513666 -2.5423695351265931386;0.61554308936404622532 -0.026807581040028269359 -1.0610372097484372933 -0.91431635056460736077 2.3188498037057563295 0.28971795512379877602 -1.3366918152822127031;-0.563306061113327039 0.31393261078892803484 1.0948466518525088453 0.55080890572527596571 0.47569675760259938491 -1.751087253968295121 0.54611118721326279424];

% Layer 2
b2 = [7.2529001386943754426;-0.30905830869316508469;-1.3900834344043326851;-3.3178021341862620197;0.47913556213453706301;0.74427033141626131041;-1.4001315976059314217;2.6996078614633418624;2.5864157943022854091;3.3939255373732177823;3.6666298976039066737;4.0144855084257455857;0.067829005844834908134;0.61567141098422817347;4.7273450147783631081];
LW2_1 = [3.4693184386220634607 -0.75226228498904368358 -2.8224546976018816125 4.6309864410103100951 -3.1670759928783698278 -0.56185555079638793696 0.69652507707424315964 1.3603939616570017712 0.89700078778400205159 -0.5778248961114418325 2.0565360628887314753 -0.80259266380756688619 -6.4815547154844272981 -2.8856989896110869509 -0.2743026492411422268 -0.057843579537357421583 -1.1586938084024980267 0.81714927579445673089 -2.0096037385882694615 -0.30948557347018196273 3.4513333182027063906 0.34475235560779665667 -1.2310782877942794133 -3.7682812562097849352 -6.2278572667128715423;0.12884937770031151816 -1.1159028179377974421 0.87368021184328492623 -0.39353846702308337147 0.03131952034527790002 0.055911343897418620819 0.089253936355750601583 -0.3635503792574756865 -0.010871224731642328831 -0.068261242860378767983 0.2427631651629282572 0.077385543429206379851 1.1444565193034261785 -0.23377014834727907755 -0.031687153128836562099 0.12712493897897791939 -0.20116256750055444558 -0.092334815424701816022 -0.37486778746114879368 0.00031439703399797685676 1.9977360183355417078 0.44350423559022289499 0.01588946619839877103 -0.0056138654354668865096 -0.14715797227226287691;-3.0454849035569475646 0.39985779523892384102 7.6783014358466781246 2.0568330353867696481 0.47503426647538438132 -2.5603213743514312561 2.4001100576862346436 3.9632106322245670427 -6.9444987357715071141 -1.1460423414921503404 1.645088920995513071 -0.67132687090473586178 0.61424195643912682385 -2.0398717040063809591 -1.5464383811832285165 2.5575271715977820897 1.9955066408926303012 0.76151591263387208297 0.23107507915737862669 -1.3585595450519571958 1.6283779078242737182 1.2315973689734454055 2.2249400925412388119 -0.80520348027662835833 0.043459720632341970747;-0.25445221572037662883 -0.3383246896352777866 0.19777649139671626966 0.60481852351259424161 -0.41725223761985180682 -0.39046416769244596257 0.50274307561949505008 1.2478380129625656902 0.95269491297892106019 0.0051496979100395402079 0.39951384616040580555 0.28000456198501855187 1.7481611452437777476 -1.0468668864570918053 0.25140837584625430612 0.29524096437539509852 1.3628699544520406217 0.067837906600790587319 -2.122204320178243897 0.92865955955865864269 2.9331786266283534914 0.86318633027243163447 -1.6641314640307751649 0.8817567888606954174 2.3115525052548897555;-4.1285564738108382343 -6.1792306387790167932 3.7826050476621904117 2.3782927002857867649 4.134054925856360363 -3.617760797999669542 6.6031245315028659348 7.6283075732930640811 -6.5390819146373235782 -1.3052193649826340227 -0.51503479640894311853 -1.247071877382156968 5.1007728524680882032 1.8850599349778900393 6.6785371189200599673 -2.5933827013717762888 3.6099369019005838055 -5.3390963520012428845 7.3988014322651078913 -3.300667228601766201 0.33168598348511757479 0.53406353420555396916 -5.5154426609150748462 1.4909029932506805416 0.91268147909082530944;1.3955017491589916112 2.424766991159614804 -2.5769632502237160843 -5.5810049495532787489 -1.4186621393665250768 -0.11180696819102761697 0.61611333209797214394 3.0553098438745158738 0.98117474103707813526 0.010375222320159156048 -0.85303600080766839309 -1.6614023436976039783 -1.0917578950429913665 2.2564289294723551826 1.7895914373524084429 1.2398529571936196536 -3.7654243140249183952 -1.5387793193972720829 1.430881763929787498 -1.7875297354901082958 -4.1810065619322633879 0.36228872381667198699 -3.1123781337188876073 -3.948605762471010916 -2.3839284210522118101;0.306835281610795374 -0.70736537373534102979 2.060937725537091314 0.76075396922503502051 0.41810775260953891852 0.35745667877953368752 1.2220178392116183286 -0.66572490074758106093 1.2214300068505403729 -1.059256316306287804 1.2978986550538178513 0.65037835027680268585 0.81442926559605333114 -1.3105169944870453946 -0.84519138081809797036 0.33083547150591013919 0.77226255854229430842 0.041293699771908158602 -0.77550157343437797763 -0.0099962610142176489686 1.8059010584835755164 0.16410699427128100369 0.083623249489588089012 0.19373443599648129676 0.62240880430039990934;0.27433220558546006496 -1.829598936086368699 -0.74599765826163844107 -0.22426751861302079982 -1.3111399916897494844 -0.47789320024023795863 0.25259110068631229762 0.43639418750467712238 0.58603150229765121892 1.3752538900011741507 -1.3233755447889208323 -0.36971254168079237257 0.69886323617753220994 0.9415507323851997068 1.2714371863417155417 -0.95615085487277118315 -0.84118666168704547825 -0.63112771813449997094 -1.3756625783982197042 -1.4483055815441339131 5.6882918544703846564 0.35011155881757710651 -0.19594095701957975342 -0.25509538878898407877 -0.6420648156352589675;-0.30698828356890561775 0.36717506923522125195 -2.5417045954007839725 1.2938231232147472394 -1.1568172882054372774 -0.53519911663127839319 0.10514289775087146128 1.2844019394204213569 1.4250198835889187343 0.15356914268086763187 -1.753435418140672164 -0.20855730173434078312 -2.2012439353267678754 1.1014071846244848363 0.023509669300589834673 -0.49453274624693416284 -0.43294867667192832306 -0.25916888075223731835 -1.3575914197997276389 -1.091831788142628934 2.2147039268538946111 -1.0353514341854308523 0.077820649671683145288 0.070124838735303521298 0.41213949246347630906;-0.4730293135780437308 1.2235717129675200976 1.5783372938545783271 0.37533208434131842823 1.1396856895322642345 1.4149809926420442441 1.2932993592670638527 -1.2325169987405861782 -3.6327287036881612536 0.032111648897784082768 -0.0070129684671145619407 1.3583214059989043854 1.6174800038121512902 -0.54925627220529593675 2.5408775233106415392 -3.6657297069568599568 -0.40405627455377551849 1.1281072216112433271 0.78030180846182262133 0.9705991067715080689 -1.1905449231766098706 2.2701168161124716249 1.5085807044952133094 -0.63668118207473778369 -0.89967393491283920159;0.99427412259242142767 1.6466059081019512877 -3.808262501194712879 -2.4924211170846706231 -0.44904750021160350082 -0.72321753884036243942 -3.2651560714775778038 0.14739342809484617947 -5.2738775306982272895 -1.2469208655986767642 0.34243658051237180207 -0.71740519478895803385 0.72607794431243000144 -0.8216724021773740283 -0.56476286948157272683 -1.0482063710943627655 2.5800016234305087615 -1.6634075687948053357 0.82400482487244475216 1.784678918541922954 -0.64041998957494339351 1.469768561012144259 1.431216239638190002 -2.0245124843536594916 1.5314893340821089662;2.6637793926940140921 5.231396635570991549 0.12022715840881537108 3.3540143200617387187 1.0976939411031128024 2.0893847913273444483 -0.91715122922276903772 -0.82058607083953893913 -1.9655033429094412867 1.7543458500744759654 -0.23504038440720431691 3.0640201298856206691 -0.063715560813307051125 -0.49371606676760426691 -1.4152116371196254985 0.29203408819195997292 2.7914899376240502882 2.6707768344902409474 0.48910133722993831551 -3.4910516191388798468 -5.0275290169141229057 -2.6799400288016546057 1.8588290947408780962 -3.5711802710546916018 -3.741404871618891903;0.35754865510177008536 -0.63520220339808297627 1.7327479184476448637 0.91260774419395873647 -1.4804541289171349039 0.55957484249176037139 3.9414814214779370083 0.12405165194256183303 3.2196860465059051748 0.18049503099510932902 1.4963788490779017515 0.12239529750562004595 -2.5511284713728730189 -2.6131411116987184329 -2.1130985723128263842 1.7013313272562937684 2.0738085071224068301 -0.016129452564957805216 1.0368010557365641144 -1.0269827133240319039 -0.56177196960473407827 0.094111061947385263315 -2.2073712311695947719 -1.9608775681902448351 1.1042375587373762791;-2.9932697561231367267 1.2704828057327826052 3.3720727977923643515 -1.2022172191148670084 -1.0489545216355984358 0.48165883481860588544 2.26580827593311529 1.7153556667190741347 -6.2689317783886728819 -2.563258573899703574 0.38989663575926208905 -0.02854098931273329684 0.97294904013099259288 -1.481711627123519559 -1.9296610193825056712 2.9557554791148170636 1.4367994582532008785 1.3937246561196328098 -1.9474465086415320147 -0.66154314752188592141 0.7966716969797524861 -0.68944253117295228872 1.6580351092043827954 0.0061863411363768340198 -0.12697039460896986096;-2.5754233037345461987 0.081298231416615560074 -3.2595536509094635846 -3.034705312889371509 1.4002273163186815808 5.4925340602343251106 1.8202532219168323646 1.4907313786633176189 -0.45770002689194017043 -4.4512337471159186819 1.0366811599693854795 -0.35519669388587166159 3.5678957204590329155 1.6116735108217385974 1.7726573456142220575 -0.9964070068737451713 -2.0461533954783650557 -1.4312271440784209986 1.1659648930623207619 2.7036723572631395918 -1.7193502604881567564 -0.21907950791387306722 -3.9749457897901514514 -0.25523365925122487585 -0.89554352081523691531];

% Layer 3
b3 = 0.35441427513958312367;
LW3_2 = [0.049460743438616443235 1.9443392414290772141 0.12439193899174084967 0.28594705759766664288 -0.014818307167287244133 0.037014506911186510763 -0.55076711532344679867 -0.49822561478168425619 0.43990209156519877176 0.048556762820014059967 -0.058079386845430451547 -0.045710962420128002648 0.078658449566114924112 -0.11422445970831407447 -0.043900111207087540166];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
