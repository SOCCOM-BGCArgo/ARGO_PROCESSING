function [Y,Xf,Af] = ESPER_DIC_12_Atl_3(X,~,~)
%ESPER_DIC_12_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_12_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.3236755280322582973;-0.35623392150947053025;0.4789517858937655248;-10.428736988790028306;0.64209623244783864404;-9.2405972163900695904;5.2782641394722258354;14.268990595152077461;1.0810400632867933624;4.0074522280104467598;2.6190967576794941252;-0.9287633484824795449;8.4338428618758580768;-0.21389478330265276895;-1.0217100040201367861;1.3004492540838219483;3.120417657430954339;1.1351109718841974061;12.552634506264219283;-8.91461564324955269;-0.23677507632735955712;-8.2713800252050333484;1.1608276566137798458;-0.74109715409251741836;-2.3420309479894543259];
IW1_1 = [0.86444391576828560897 -0.19336466488249051676 0.36354421528206598557 -0.25875374166583597901 -3.3286928361861543024 0.25934860692047123631;-0.84238647388070175825 0.084956927948105748216 0.071396758602123119863 0.89949854201491186156 1.9539790028000194599 -1.1464188258395326958;-0.82760966271346902978 0.24994734475865731937 -1.245538842934453827 0.15300549040617172913 0.65918540389397917156 -0.60428530741218755562;0.67765790723384411454 -0.84122734213426053618 1.923948053107381595 0.13223173217434644466 12.773064838160385293 3.3893613211597579671;0.074562235251005345993 -0.11299146659429309958 0.1052766828453367276 0.6843104111324099792 0.46343013124877907583 1.108576043634574404;1.259308524433799592 -1.7390234052391431163 1.0361915510107591043 2.1612958975662550642 9.5271625552945575777 -8.958785646067427777;-3.6846142323089989823 2.7487154575095726905 2.6512192557992615427 1.461325296333501278 -2.010463867954509265 -3.9450999650244269468;0.081535793188638919227 -0.015206395106918194071 0.11630270195794124855 11.640975171241171537 1.8781725185699340575 3.3981849414643972018;-0.37511309402338377517 0.36405347037517898912 -0.79989431658698673111 -0.13317735484889492437 -0.21619736895920374509 0.08656408831625614364;-0.31907012371220100366 2.2834230429632800252 -2.0991573407404997553 -0.58057540087346892754 -9.6674091866932680972 -1.923527811590181491;-0.56951627487039258035 -0.15697077745809318028 -1.342867624409624705 -0.55838788685038254211 -2.1332771457455166342 1.1000019550614492658;1.8720074300799500744 4.2980277300746738689 -1.5513029634529800216 -0.21005858162784804555 0.99364096812327595831 0.19207206644193208778;-0.66821507677032820904 -1.8466238324172159491 1.1641472383754203346 0.58308287528026603308 -14.160155632310742035 -0.97683294546431720384;-0.5074883645636119045 0.78619936967150949592 -1.1946791717296969537 0.026711865640470022071 2.9879695964742554182 0.34996126532372129336;-0.0044316037411927201514 0.018925314928701052197 -0.049311543876931582253 -0.83563639018369118006 -0.19286486331644564496 -1.2237199461020091817;0.74927742153459442331 -0.36169132157687938767 0.61609210928881719127 -0.1970421789907593757 -3.1823200288183581819 0.45270348157901790787;0.65706836665091628014 4.459035715759561036 -0.12538269860394657407 0.36320105617152953492 -4.9681286977764100854 0.092543163784359866453;-1.0287516274589514342 0.31764129563522425226 -1.9033112316103772965 0.20974262492883039011 0.52389287856330879478 -0.53232385294367678963;6.0137185738174627758 -8.2316335111341718545 -13.655825956019645773 12.324528181966298845 8.0794879049726127107 -1.6205025079801784749;3.4576113636772385362 -1.4616089864790495767 1.6673870100309013953 -1.3779269521599202264 11.611135737168147841 -1.3202838678573873832;-0.66554281624104039139 0.00052395342469804210422 0.0034509618328408429508 0.39517175086817912799 1.3748201941230642209 -0.67436939871108281253;-0.59453000740626804621 -2.968365933661945455 0.5275735075170414623 5.6305593230360120316 7.7709203063485841056 -13.536480541154702451;0.37844008854985994317 0.03757727085109753562 0.58760655777117565268 -0.025553579714341759233 -0.82872880172478446958 0.67054565583468495049;-2.6543737525281647649 1.4383637355445202388 1.6579071119985688831 0.20032587535218279728 -1.2289229807753341284 2.5795242318450579688;0.42219782943549033494 -0.46965299274836047605 -0.81535384480253692008 0.096808057711009032342 2.2898365340167745607 -2.2443757501537882071];

% Layer 2
b2 = [-20.979693129478686586;-5.8952800279696155883;10.75664903220815205;-32.236232579636578066;-16.60509953985356546;6.155225368737914593;9.355982583146724707;-0.78812756026090735606;1.8891398749186250061;14.1781954845077518;-3.3552014970223291712;-3.0991234943261853907;-6.7654341162487927619;-11.960316653436310119;6.1584217345830198909];
LW2_1 = [7.6084953366882563941 -1.1480212514753933561 -3.3465344617833538976 -3.9792244169073440752 5.8541667454686354688 10.572001509599125768 -0.30869505168516170324 1.8165859334834266736 6.7867282218257010129 -2.2569057189090413473 -3.8930795462731588863 -3.4011762173443536028 -0.60605902646507847642 -18.156563379217804055 3.5257098371744572951 -21.230685115855536083 6.409791566890051584 5.9354537373991638205 -10.172295342094722415 4.8622875695160141518 -3.4771873671320312482 22.694204570321659276 -4.1944950340774163067 -2.8010342895101301153 -12.023545862484258606;-12.795732709510492242 -0.73706440246040627606 1.1692081424833447034 -4.2061361435069866133 -7.5542281686063992296 -2.6570698749333727662 -10.263495848256171783 19.574219636704096814 -11.016732223938465296 7.7380868557749105108 -5.9029555741034469563 -4.9213014057526418554 0.49896759882217645021 -13.324888698623045258 0.94276230710954289638 -11.436731747637667311 -4.3695743483906097637 18.46667673331874937 4.7649569871957320188 2.3119236911263931766 -1.0764603716128013922 -0.95869851719722021244 7.8037645756882678683 2.3414380659048936728 -19.498656885863386634;-18.32533369895339348 -13.660398063056844009 3.9390145637006050983 3.0723670235510813775 1.2079177564948466728 -16.642105606018201769 18.740434263981406104 -3.432331296280347388 0.54684780688452971908 1.5765770910248009251 2.2505929857973141495 18.001744503902070704 9.5507558603531421682 -4.2447215979387458162 6.6540136946078192182 11.318365757700689755 -2.3584237471596884994 -10.598371132891218238 -4.8558815039129878954 -0.70955142248902813851 21.85978108500789574 -23.264555375200746568 -22.873674370243914922 13.879276904368261114 30.161942063367074951;-16.738801434144487956 -13.947109442862645423 2.52927394436412456 -4.4016980917242323201 9.1356660969794116767 -8.6411425936946351101 4.5578459763015848338 19.748558342217918948 -0.82481076718055057473 7.4026910522156539329 -3.5619608981078707544 -1.5091380983085072032 -6.7207629346671495796 -7.9612398087398323909 1.7877127846683933399 -4.6082923382819638292 0.47907330440313028452 0.95582471484475195478 -3.2416026016910848284 10.354174920852457831 16.0219106220758718 4.2104690734555783038 4.7313129592141329738 -0.70796016748685752784 3.8995091736863338738;6.2991583942400053431 20.285760185657075283 -1.0988799619919455974 6.0371654258731526355 -3.558624760656977859 12.833887993646060366 -4.2818116506281933553 5.8274130049807748577 14.460130407607433511 -5.7933950825043210031 21.394766060418231035 12.903708583624471373 10.979052725468550378 4.4951703200485217948 -5.2780155649302145093 -4.308282986041354512 8.5678321667549024454 7.6941776481412578192 -4.0677821796078221794 -6.443154502899379743 -15.556529699391381527 -13.706074927679214426 5.5541659662274911469 -0.78387948532819118341 1.46454250839944633;-15.956109469995288563 4.1845519249509539605 -8.087915176577761045 -4.0196583491417801071 11.108467286734805768 -16.2138502472638244 -4.2458676314940699825 3.024326871466226585 -6.3394923795918858289 14.060825349584920474 -0.76590882319629771668 0.39108280182709997952 3.431582659199314822 22.468553398701278212 11.700224997785220182 -5.8191379944636638655 1.0485606582620474736 -7.9467180740737655142 10.365100703457478915 -1.0751572378228522187 5.670350857377729703 -0.49557928167891507343 2.6071207396808948609 -2.2757283104977741317 -6.2934790664088442469;-10.05998443466726755 1.7832289888560728386 3.2957621985380671781 -15.433409206182318485 7.8588001962589180138 1.8157186021404325693 -2.4908589952734514483 -11.378381472793300588 -9.4122456361543456183 2.3178223850050829746 -10.917049121874539352 0.90105712590751740887 1.5372862340799013925 -11.431231293126813853 3.6362996769771522843 16.600415160267193215 0.14234707621460376825 9.4070193184674781861 3.7094925127442022195 -4.433512565020826024 -10.87714632561898398 6.9905198481783497044 -18.311894012350702354 -9.6869647256735849083 -5.7948852748971155791;-6.0156329444488418901 3.7603279777692559804 8.9032038297222904077 -1.1143851868724916621 -11.553386314978963512 -0.018432568567157064238 0.070217662907867336997 -0.38767960102421994417 -5.9207922094713003602 -0.068713612494644638051 0.1381736809348931283 0.020101627343819490623 -0.0001152040787256525603 2.9222644337718657326 -9.0139318088329805079 8.834613065550668054 -0.058175198053933105391 -3.7245870583620539485 -0.093410607261862510509 0.18885127262879894405 -7.8208232723333424019 -0.056295839265499775239 -0.18282342193467523983 0.20710982286456605661 0.21341712598975481896;-18.587208987877083644 12.750376139989894497 -3.2717422161964191396 -17.546450308772641336 -4.8643281771614095277 -5.399700185489538562 -0.53545548081684546382 -13.191757364258753782 -2.8630933451063409478 -2.4781569266563518994 4.0759426531321754084 1.1032982765895869015 0.92305199841682727957 8.8244575795950144226 -3.7749430437330744326 14.816382437190988242 -3.2331236750353680165 -6.2810174420954538732 -1.4083226229304990351 -8.1603175242330721062 -28.45090079169679953 -2.0705079736737141971 -8.6323768224615964328 -13.690558487907660279 -0.98026790919270134772;4.4243097362307999276 3.1485029985679706677 -10.390243216695397521 1.8234480314363863407 -4.2944675595250689781 -1.1909338520482766199 -2.2236376301406233225 -2.1125690499940898981 -0.96275478667990355142 8.5170551882751013295 -1.7912524392104680615 1.3856285392089846553 2.1072383523286943863 15.956026849656877786 -9.0607715565243083233 7.2018213665862402806 -2.3214141174045681559 -9.7394396035051187255 3.0306994972767813401 2.7260370766724704161 14.329226465889380648 0.3057956587130168935 -8.5356666800415794683 -4.7678781596654626895 -5.2732230998593001559;-9.769832497641257163 -0.36369403803904920558 3.4160485462261562795 -4.2103443793776618165 5.6296781192844855823 -4.0514542044672596788 -2.8146101815089208387 10.558717114841709162 -30.327806815488546732 3.4440571517537619251 -2.2059659576893704269 -0.43497655283912950441 -0.51414073518547265262 20.311590208732130947 7.9126914708803628429 7.861414634739138485 3.9504736822764399129 4.9741416634586093082 -2.6105295038741460623 5.5079819776772600548 -7.6988307263977855399 -8.5279217071603969913 -4.0169053975374975352 -13.73008737813612079 -5.62070112355222129;-4.9229891675427346343 -1.9646190624614401354 -25.837936296276996728 -10.459825529600067284 -15.552706251742957733 -3.5897808439793745805 12.562587611558921452 -14.399126063311173951 -5.1328410456772051162 -4.4932444453174467114 -1.7547151336521116249 -5.883021523392281793 -15.263902619448844078 11.615880863475350537 -19.892600412245776909 -6.8886321062600890386 7.5228033404107792492 2.5240173459079948692 0.28287427141386589646 0.11420241425581705019 35.029267577513088838 -12.23797112248310448 -23.395597348837185336 -2.67196268536373438 -14.945055953488436629;1.835911106302204665 4.7838573887190962708 2.812479019137856362 0.18373471010943714932 -7.6805681026463323846 1.4621282672838418204 3.2196640350424088339 10.527176656742032179 -3.7666922086831968741 2.9188611753759947653 -0.018297048803431449626 -2.3538923391470949475 -5.617502665970578235 -22.661672485764636775 -9.5933220997171897437 0.093530781277040092592 1.7046358520530338065 26.911615371796965945 0.58222872674286518802 -10.583692051810130508 -16.352245709733821855 1.79714180916028754 2.473743473150960881 27.719287894644565995 14.859116047272118877;2.5367144253432889478 6.1714905189882367509 0.58011140190595400501 7.4860144706663582781 -20.05218169394622052 -7.1952182887672577749 -9.7705544869098783778 -5.82362225212019613 1.3448290761481247468 -6.9927049781820089791 10.04999029612264394 5.3838649599540477908 15.591852815478576488 16.9945029587688623 -11.069693391631846069 -12.891401365159522285 -3.8894405708235675334 -23.931772701902005451 -8.500562897725778555 8.2027706160993378859 11.323010682129570625 -5.0094146909024601655 23.72680368423620223 3.4016229801420823087 22.256649193664021169;1.2528321699053797111 4.9179691174807516063 -1.9387077746002336909 -4.3606967264573093246 -2.1622833322048773397 2.2928800124114783188 0.61193502078960337887 -0.043502326128267841676 -2.3212523794577251124 0.73613341661818421091 0.36310835289401399706 -1.5406481549013395504 -1.6283916623936387502 -1.7287279980171135207 -5.5571676320393166293 0.73469266521618825649 0.0030606704759062290655 0.3915925991705986875 -1.0649533682802247991 0.80654222449262402694 -9.8483369560046813973 0.14699817016499430733 -9.0950061921118514618 -3.0024959245163711508 -6.6575948233475905624];

% Layer 3
b3 = -1.1774647041600585506;
LW3_2 = [-0.018353693504122380042 0.0048947011042401499317 -0.01487355199516260558 -0.0066438479218568985765 0.0053108401036645715501 0.0077757371205046848031 -0.018544327506769205799 -1.9762825986058771832 -0.01934150211136703712 -0.023725631685197829529 0.011207516546475938118 -0.0047950903413739448533 -0.011025938300320297161 0.0037443779990642819464 -0.034403997457994661691];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
