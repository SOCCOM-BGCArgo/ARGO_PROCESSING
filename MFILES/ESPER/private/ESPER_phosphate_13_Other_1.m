function [Y,Xf,Af] = ESPER_phosphate_13_Other_1(X,~,~)
%ESPER_PHOSPHATE_13_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:30.
% 
% [Y] = ESPER_phosphate_13_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.2882913832138558341;-3.7379919788440707507;4.8090449905888270621;1.1779576065403860596;-0.90905613440851706919;-2.8048452284114278044;2.1793145133187556972;-1.4320328327122304746;2.1148480473424200454;-1.3851145599929515217;1.5956757246049515508;1.2655170153705335157;1.104064430126882268;0.52989948656990515374;1.3365946319114918595;1.4319179588503054834;-0.88534496711308829919;1.0320120377739065987;-1.3121184866182462603;-0.74054562506468490923;0.34580027136679947208;-0.42169861165481725696;0.40613792873849619003;-0.84012890399743678227;0.25830495260797053936;-0.11796771898808201817;0.19994405216859370555;0.76339691558415834205;-0.086066407116445281522;1.0497615442992913604;-1.6662107187379988638;-3.8887361012801919813;-1.1819757638217422979;1.680690945941438752;-0.022886236565040914137;-1.221008464937646254;2.3966683403271269448;-3.22751360273729615;1.1899824192314885085;7.1818034944797108921];
IW1_1 = [0.25701897400217349476 -0.49794576824384401137 -2.4139582298862101162 -0.5891246763096559258 2.2166455722562501407 -0.41557564538818936306 -0.49920824493354570839;0.25591582751854580202 -0.42008542419473887675 -3.2253833108128246998 -0.3480263264079247465 2.6568902377164014261 -0.3446170507160444263 -0.82755418348991716115;-0.045634928178749645244 0.27137236525950758637 3.185064581493572522 1.3575446283811907211 -2.4228251300338325969 1.3405269654892484343 1.2150251104482616693;-0.27107202662068186072 0.88626841191673466636 -0.99568678545404265545 -0.43411136434017405517 -2.0972518869962146759 -0.74818054498057018353 -0.52600238798347931368;0.075544148750962117345 1.1513817999816988724 1.1683197198744645906 0.36855723188889916164 1.965903675313319221 2.3851862641282477462 -2.3720086607224741826;0.4337989955278998 -0.63419488062463413858 -1.402042107702599294 -0.97356693313977915594 2.4586575643045165407 0.054425948905322214799 -0.81191227162811785423;-0.024710966059269260514 -0.11748466262009849004 2.8634129527259579717 -0.24046240262051865599 -1.4024006404665345649 -0.53385211523880649054 0.59350407699904950132;0.76419649651791199396 0.11651545688932685163 -0.33682598552855808061 -0.34993358808768459944 -0.21223126161362715347 0.18030478616707035222 -0.14271891845748191363;0.0056277882849347597022 -0.17822826519916570853 2.6786949699624327259 -0.21112113292036122081 -1.2122476629685996485 -0.29827172331430801266 0.52923943065206191516;0.0024989492102480657942 -0.05595855298228730873 0.50827657617480526131 -1.3984666724986631881 2.8985183137696330924 -0.73742363085871198702 2.0961264722058374765;0.24307750523295329481 0.33292717841455787831 -0.1109361666184865286 -0.49994477102505807675 -2.6264464030717520338 1.9908577375016425215 -3.4271576225230346857;-0.11093039131439400014 -0.27110994732484966496 -1.173934966173876937 1.5568876455470068709 2.022102081842373611 1.0817039651782063281 0.68797986134669419922;0.091526163758675782578 -0.42599007308380154591 -1.871980478092575062 -0.051839432344132393982 -3.3511115264357829169 -1.3999938729780763147 1.0993164309226428621;0.20350696761104467014 -0.3249450944360171567 0.93215378751149080561 -0.92090524605747703379 0.41349408898190664896 -0.89549116342841605931 0.80850747314843574021;-0.3816446247858492069 0.41814650736019187693 0.049411466595976547 -0.69846222756066922432 -1.1916049787985418806 -0.19581777225930058206 4.3115876242801798313;-0.4966753963735844879 -0.0031469057707806721152 0.2004438997949426482 0.93028301452289541285 -1.0982604007339387131 0.30086190459288408849 0.022457328658155063794;0.61236547702905308466 -0.82094044302714974659 -1.2387255724086456699 -0.78493430737952984977 -3.7672016334206035459 -3.002705199216024301 3.8258780849126314827;-0.10677284393268371421 -1.8634596850194560247 -1.5566756366482910057 -0.046704284584450098117 -4.7828764220781971872 -3.126057025051827587 3.3902597931898741379;-0.77012381772801241642 -0.18959444427711272252 -0.90633371615841218372 0.42915979548910904162 -3.3713087771992857888 0.43586265246472816193 0.5508670674582581972;-0.051049965849749572022 -0.12428902327194915611 -1.4265784739042863816 1.0734898674439892208 -2.5847738420503265644 -0.4224468078339042032 1.7099924433627031739;0.052727637576086394677 -0.019894928847267311089 0.41927587749815964369 0.52739863410891696383 0.15742269640595202285 0.7523330271187775864 0.84546156466212429859;0.030919546706305207906 -0.033211413785926395537 -0.33563638645833987484 -0.56810495121594917212 0.18354498516655812224 -0.42963900865588072753 -1.0082617047393136467;0.40951138404697301487 -1.3119348018158487612 -1.850092185257540045 -2.2445036071778314835 0.89790918053496149298 2.3099513420634756322 -4.370672601150354275;0.11331436909558155468 -0.073579330404045448222 -0.52306818218486583749 -1.1223996339426056679 0.86709271913057006653 -0.33711407080240829437 -1.3292892614240749971;-0.13984477733267652866 0.17590740901993753842 0.90180019537402933416 1.516362056027472871 0.3249344484788757037 0.35430942842712870311 -0.62580679531468075272;0.34777613907799126425 -0.34240641159316365094 -0.31393419271885092403 -0.54566984267077245363 2.0014231609709622894 0.92942817390034859759 -0.89725765661285794561;-0.12694109894186000886 0.15561271468745560553 0.87228415906830547577 1.4459852961055670306 0.5394303318340087916 0.47589297633466670634 -0.55504204353865715937;-2.5764322936762522609 -0.58691456806143782465 1.2604274910896435813 0.62925272778886698344 -3.727318321007405455 -0.87822512294286025902 0.072216856618348229668;0.14851397677125785513 0.084561337535029021395 0.88193030891379620151 0.32849592681513367642 0.92315529159152964755 -0.7696252097841385087 2.0119271623506169711;-0.0083215243560941544454 0.33952803835093475771 0.86430249568511474667 0.55013339218181722678 -1.3959215357533745205 0.47587128224954544642 -0.1025486204512364441;-0.38779932505812808596 0.45045902853742852967 3.6080486814643548676 -0.45481802075700306087 1.6055746463979869709 0.068137780522765284408 -0.82272997088085242368;0.073720535955128022043 0.1118212166392489465 -1.1351534051190106389 -2.9826719704562068003 1.0621776551151471679 -0.40057782398331664986 -2.1810262767036867615;-1.1929198157829099536 -0.66076893663509883581 -0.26974822599576137039 -1.0456941191435449312 -0.57551261639222317523 -1.5311210514271942351 0.41733573407112911635;0.37541580512976596706 -0.47198607538329068189 -3.5482759332210327408 0.40903170862941379271 -1.3861022576231472048 -0.074082496249468859917 0.7854621174819025331;-0.70383099425616135747 0.053667275111460216452 1.2385370317494839298 1.4030834261705431576 4.6226136952683480885 2.0647931891015689487 0.3462079523314929852;0.02617871815047652026 0.2064096740581723155 0.26555472778171057557 -0.8551776861749027514 1.1864504236963275829 0.040203795087004792763 -0.22268584315395206774;-0.047270108415739378604 0.056138752022859922386 2.9011455958500600438 0.4158903176052036188 0.094698879154735349228 0.13038728065855481608 1.1756066117973447138;-0.081135710522647730425 0.2480323124790022038 2.0545527201622504343 -2.088372416100520379 -0.44181082962205242559 0.043745566271415632642 -0.20111957045268558097;0.070238730814017227844 0.30351150687656319738 0.94493163928515799821 0.51219597868161181875 -1.48242719815551105 0.66251756620778590179 -0.061940189033375107897;0.2057796115345279786 -0.50823821766033627778 0.70786344982048221564 2.4050300140324893938 2.4299275353740537042 3.5371321927739467483 1.0832713085129399566];

% Layer 2
b2 = -2.9603030972865442827;
LW2_1 = [-7.4082462732081522105 4.4174777589843099435 -0.65858085195567017678 0.25944498665142462501 0.34145762947537289245 1.8726617109861012356 -2.5324297749495512377 -1.276482316961594643 3.125120035471676605 0.30070764755221501829 -0.34751055159552052265 0.16735758081785157003 -0.33800405323511484301 0.58747591366798623813 0.28292191250281034653 -1.3791821654048519452 -0.11199002524971311823 0.13947164529862740578 -0.21577519280640292121 0.44690698281468327346 -2.5886740149907603303 -6.2598312172590784286 -0.05397117192360856297 2.1957178786427298256 3.6628844330893990389 0.88243507784933494786 -4.2999240736575154997 0.04561264127799460194 -0.58712754997357141651 5.084369120844551837 1.6720901447020899422 0.37283007687989122569 -0.083564713925746283985 1.7986335513106472828 -0.10862572145235946386 -2.3992823559133484856 -0.51667617879902283384 0.35957933532984526215 -3.6909667462683350969 0.21414310776050127227];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
