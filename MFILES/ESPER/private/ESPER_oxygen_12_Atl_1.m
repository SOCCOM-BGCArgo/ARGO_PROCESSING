function [Y,Xf,Af] = ESPER_oxygen_12_Atl_1(X,~,~)
%ESPER_OXYGEN_12_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_12_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9528741150414696826;-4.3647329487947823523;2.5593415686583886881;3.1365862765173435633;-4.6006060410109688164;0.89149956205216485117;2.9607469837921605027;-5.2104299208586128955;-17.690161175876916388;-1.6156123912059168202;-7.2435618173692741806;-2.0660547025275333155;2.1308062828834701818;-0.79560012523183420985;-1.0187649891798735702;-1.5060662354205980318;6.4465010231591719503;-6.0286013421961444081;-1.2808930831277582918;-0.23709849573410471391;-3.0333326937995974681;-0.22878761327131835746;3.5900086213493982434;2.9555630228288922723;0.58883602067391405122;-2.476931198067307438;-2.0873860418423557661;-0.96039239022005495894;6.1766352979602725526;-2.7913042593405732461;-0.63834082927908364358;1.0291683839775547238;1.3846913374813214492;-3.2718527433721051878;0.082575678849344885668;-6.1391446170689105699;1.0125529447957086759;2.2711530420197596492;-1.933133563333912619;-7.666054672967194783];
IW1_1 = [-0.27622878257581057193 -1.164304980859591554 -0.77036767163347175114 -2.0159630589588553029 1.7972882441949211696 -1.5714560217417667953;-1.5629040771238928986 2.4004229341589424784 0.15747760711879577045 -2.7489115212057857462 2.8508413307917397361 -3.7652782253654222266;-0.32891806275322782449 -0.47154696539585305715 -2.1211413628650941376 -1.4979418235822630212 -1.500896399754277466 2.6692482345359853646;0.16184052850349481267 1.9948945263066681921 1.6265065700508549718 0.33798129083714884002 -6.2770300938920202682 -0.50808255665373303067;-0.26162558526230178524 -0.76058700842851734159 3.7568764150850695316 1.0830137877616721198 4.3274046172003517441 0.84199327676745538973;-0.057285391941398769444 0.42937023705395710449 2.2897163112049487843 7.4589659355366615401 7.2302242385880877151 -0.35464123788407209137;2.2195036950925897123 0.35708263757129760085 3.2076157335654329472 -0.4647808911687994482 -5.0302127063833221854 -0.2648681105677563874;-0.48880150053312571012 1.0128377995774469067 1.6182045264399931295 -1.5983990197528239463 -3.4380425693357481443 -3.4829624725858465695;1.1620492247119076357 -1.0008679366686574763 -0.76296996259034477461 0.37491682267574300003 23.287098777618808754 -0.82659839695376924329;4.0242332397846940495 0.49716849425748271818 0.87083268871509433851 -1.5424683456483441191 -0.92816100355955366563 3.9849582480948146923;1.874031458365911007 0.68178659216724779579 1.4264335101987171139 -1.3460870225709193893 3.4721021156119764584 -2.2400231489338739976;-0.69446184159542767578 -0.32689226811595162303 -0.43093925065257437934 -3.5060894557604536104 -2.8123294357909136565 -1.530043444189233881;4.3402427877519400568 1.7516481253863260825 0.21751006208289810906 0.19054096437993026103 -1.9028626541249480386 -0.03469966410511868965;0.014209450567918367053 -0.63148439091469588114 -0.55579962376593416984 1.7133881994794539771 -0.28642047350492261248 -1.3960463199974706416;0.38506156870527191716 -0.33697894749086143573 -0.96439451982430046684 7.7502989417051013632 14.510810117098007055 1.6632076470509933319;-0.051157623867731621958 -0.64237458565594784954 -0.57764716890020229023 1.8665857146501712016 0.71464480626992088474 -1.4200153491756222213;0.56657531718364095852 2.8527850940167889249 -1.6740870355382146961 3.5216534110805390867 6.7287260933518844297 6.8628431760818262575;5.5011885614630955388 -8.8048479867204925142 0.77343366696321191878 0.68961598677673818791 0.5947389526543335192 2.2825006468060369258;0.59273797829446661645 -0.69132223039792251029 -1.1156553305105996188 -1.4800323320221930867 2.6855997344573365737 0.92984211614202993967;0.83789746231654116393 -0.51018007284977318072 1.7285525295256622957 3.8342696672870681951 5.2037926017001598922 2.3882744232493440251;5.397704585296626334 -0.31905056882481641622 -0.18047585017165196364 -0.50457053297443921203 -2.1415624802620949474 3.1663065062869453214;-2.9778192687286741958 -1.5576210103094725312 0.39854370914670805837 -3.6923356077516369389 -3.5840049825684783258 1.5025840833512635886;-1.3142061837970389071 3.872133849515342785 -7.8308928637763983716 -0.92413688829273687997 -3.5458502963950913056 0.45604685499447727981;1.2718430866287431247 -3.3940216859724228193 -1.5654009978349352483 -3.5428706118162884842 -2.490223857785928363 -1.4564201293826777306;1.0898370118780551508 2.6513162926622704241 0.90277439172931694955 -0.96995880343095786102 -2.4135869253961828029 2.9485711600685498013;-0.60534172251880791205 -0.32570551596264235572 -0.33250606597504778206 -3.5332944353103865609 -1.8322146160021142158 -1.1744824114998015929;-1.0567597696372688088 1.4494998605415647663 -2.1531901834869002776 -1.51463730046077516 -2.273885424987452275 -2.7050444146250258726;-1.4851351868538675838 3.6319009419953225404 2.8033546157650608421 -0.69078650351797155071 1.9075319854417662757 3.3881193639086188973;0.46135035993211254146 -0.42336761396549205116 -1.3268818514544817866 6.3533499506294566217 -0.99707974356897932644 -1.4243174682632764316;-3.1294456027541825982 1.1081010560493804729 2.4971077542494097834 -0.16486656069049315798 0.12693262841352692671 2.5212128204996258063;-0.93879955932616543368 0.1414278704208469517 1.2406875076282251058 0.76736154564080905072 2.3165967894571450891 2.3073547186733640579;-2.0421356421255811853 3.6013809295438687919 1.9404950081531828765 -2.7727336733627367948 5.8384953132629240358 4.3386510161530393859;1.4691576098355030311 -1.583031879168405931 -0.35255152348907170534 -2.945641902938245682 -6.1972275690105922408 1.1716337854631151405;-4.7881015819892613905 -0.39123742292738383775 5.6835788181821795817 1.3057345786989089653 -2.526111705726874046 -1.6501071090049146406;-0.8681316616489223037 -0.83390562402924495178 5.0837969812968601957 3.7296099505256044004 0.92944619226144542523 3.1055286848727496896;2.7389492095215723921 0.81566524542640173046 -7.7727297975230493776 0.12431788105893010199 8.2828808144641694611 -3.8036031727226746746;1.0019069850306068226 -0.21545172457390410203 -1.1496573136004553106 -0.72890693307258036526 -2.9568858349043054545 -2.1591363254016537887;-0.54191661267034063609 -0.054049828647110095825 -1.8892174627828699496 -1.1380636730040702975 -0.78988242426261556783 2.4501007888852206484;0.73166603538163621501 1.5129852386503448436 0.21368060197626484453 0.21135429045625522826 -0.12340186958725997413 0.51802558379902496899;0.76493490169753530772 -1.0578162812633262746 0.28681177420391451571 -2.4974348817545313217 -1.6663284925596659747 -6.253656425087045001];

% Layer 2
b2 = 1.5581812564069621452;
LW2_1 = [-0.052956580094671287795 -0.22039890127114025731 0.98862006765931087493 -0.30438462270256866349 -0.32542026439787336001 0.14958746625928573404 -0.15656631395930920014 -0.4363768010610199477 -0.27740984955591829753 0.18111452117433152198 0.32883524027927113487 2.0888632517742795613 0.11364535915769970187 -1.7643311136987864796 0.32489349462623612341 1.462926422151232364 -0.091609705228271054445 0.044454747001112474014 -0.48336920338451255796 -0.10591839108499509492 -0.18593129826503454471 0.17673095523297729925 0.063836074033091425028 -0.14937213297827336977 -0.20530909262067442711 -2.3317511761702047757 0.33175100552459912961 -0.12958936323724301598 -0.53900626997019340791 0.29518657327292707748 1.7287721970181504361 -0.18094976413078209254 -0.15364376118496131385 0.19550782918295231405 0.021530517471609649655 -0.091783892420521748234 1.9189508551738088116 -1.1446555531252617932 1.2438283936792866591 0.28010379644821797873];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
