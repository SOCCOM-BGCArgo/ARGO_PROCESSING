function [Y,Xf,Af] = ESPER_DIC_2_Atl_1(X,~,~)
%ESPER_DIC_2_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_2_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.132988677105757791;-1.3487060064430780315;-4.0110294400423942562;2.3748221929069761593;2.056078562418781619;4.7818878132767528299;4.6791394806177075694;19.187237268858993389;-0.51258048782825293976;2.6971433207756323469;-0.84680997367983501523;-29.323719586151735683;-6.4111267947736472195;-3.1819074429646128088;-8.3590383478565826181;4.4722322371071179248;-1.3111544111506883148;-4.6074505467343822573;-0.26028551559164081475;0.81396164465993314785;11.725845308203702189;19.539102823593012204;8.3465612172344822994;0.6473864107660433076;-3.605974049031137163;-6.8261859324893778833;-0.39983821871818847615;1.8422580817547968834;-3.1058254373555973515;-7.7846962197295228592;-0.8745544661617027371;-3.5523869693242962065;5.0182550504634084731;5.6459033718602853469;-3.6489459963134414089;-2.7388969734876487117;6.4895530091641671078;-3.7823029612995768822;-12.518273885706104664;10.155305334415036356];
IW1_1 = [-11.798501100376364903 0.1258911049388758141 -5.8828806899997605484 -1.4051359544285058067 -4.6968976787386811367 -12.12307199897206722 -8.0883470496468579114 3.866383789249024705;-0.3048670709302085946 0.23489524226406263696 -0.041574069275638260434 -0.24551874466379311479 0.83467462448092999416 -0.51710277817297933822 -0.67288879461340755928 -0.2747135790612977857;4.0666358049278557019 2.7775136494782763918 -2.0770363941097409466 -1.4831765393383777862 -1.2060621503097421758 -5.1441192744368358092 -11.243916995549108506 0.73286495982888300027;-11.43214100397646682 7.4256342769790348868 2.3390737943943533672 4.0057213790790564545 1.5509299157553801951 17.489247762612592396 6.9439644632510386657 -9.008143766634033156;0.22428776281790607783 0.21761871156498971414 0.02097066468239611875 -3.7737296498222332453 -5.3504277404004882968 0.52437948988022597963 -1.6013298659833063997 3.4982766101671827208;-0.90021428942756853697 1.5454642394846345166 0.22745887309098869467 -2.1992017655487381411 2.3099772993745508742 4.2373261684100516078 -2.6529825598520155872 1.7425016987790384881;-3.0138507147688025078 1.6912269362118377281 -0.74701137752844848361 0.23505563709989907295 -2.3393871085653779041 4.6250720130261928631 -1.1671345233607137715 2.1546176627101418788;-8.2554308298866612148 7.733377915329317176 -6.5159946166749067586 -1.0069891854920798302 -4.9420489266500364778 9.1285180451136831437 16.815050416484108808 3.2176634760829587734;-3.1545343455899637064 3.827707010011450528 0.2406739879810588234 -3.9593438152339355263 0.6693158442716513612 -0.90716408424363936813 -0.43449100359016806783 0.72887524988110707902;24.810808102011179699 17.254899696405246345 -0.17551365180233025054 -4.0563612796486312462 -6.5583270305780230203 -1.9386774933534574039 3.6327711451662927367 -2.5570430693827508328;-2.8583176132057794838 1.8813962300766093882 -1.162415273379407088 -0.00021895878425277296581 -3.671073165690547313 -9.4046869007398576912 7.5543527340311111828 -5.2257806823578034638;6.9466699527942461501 -17.273155409030668039 8.0056629402699588383 -2.8238587018656935435 1.8401803583501465944 -2.939583416026462892 -5.9945951823780410095 -1.3661771980392056758;0.88362699023732771408 0.10681137006016001856 -2.2228079808911713755 1.5143548307452452395 8.9779166547901514406 0.63090683923129398103 -0.59825829742939640177 -2.5766585811204434364;3.0244487304312328568 -9.3992831175365285645 -5.2982558884819379585 -1.8540597892603436492 0.79769120127145032306 -10.534089743255757199 2.220575465752582911 7.6534119908035043167;-0.3082036384025165221 -0.6303541081345851449 2.3433899715145849463 -2.3933899245876233408 9.4866371761616861136 -1.0836031926248266277 -1.8907130812526247166 1.4562315925466255973;0.018371181109605880244 1.6666192680845226537 0.86433866592418084895 -0.36325174954772110336 -3.9187108126568266364 2.1171608516513100717 -1.0104290632482610945 2.4083530561981034701;3.7365253500357202832 -2.9414109647244743861 1.9861324067991701359 3.1650694619963366527 1.389249209237419791 -5.5173510809238557329 -3.3235105962151063608 4.4375630240468462162;4.3223253989060843594 2.0122097031293297853 0.83394185403178089366 1.0179118639507018784 -2.7350788784562154454 -3.0216282530519245064 2.9776412129293503561 0.52308357222255685848;-0.16762970469321000766 0.11988065116104079655 0.2165284639190763194 -0.14576973465952933195 -0.45736763969183258371 -0.17635227919505047645 -0.49305431269935989791 -0.10532913013389544332;-0.12021727473737908731 0.01876498068970947064 0.51144523944573438978 -0.10491495975699917376 -1.6197775493244368494 0.1576775397089529851 -0.29438719271046748238 0.047552095154227744245;1.4319284381141506035 1.4072526684004207365 0.86978926447061322147 -0.74594725747471413158 -13.446096189805547994 2.3003714085082913599 -3.3254033319368274668 4.4951120578209629031;-9.6702184243730915369 -2.6859724841448393562 4.4606943389536990452 -3.2863243360644185387 -9.6152539198329094461 12.295576880358648708 2.0871489363027189157 7.9825608138239783074;0.77018898455982842677 2.4427821093265054131 -11.845192695143744288 8.9412398567271331729 -8.4512886448610835544 -1.4271828896662082098 -7.662701735324878527 3.3105554937785170999;2.4130451372262209375 -0.638272649246575563 -0.13124698093621073314 0.89686429761617758594 -2.3671081663604449652 -1.1076651577975791252 -1.5953497931988902536 0.13385040626577579537;10.401282340251240655 -3.3902697713480915986 8.978817008838808178 0.49465226022086683511 14.784937868350109369 3.0091434178002298694 1.90322899656058242 7.7563996931535550416;0.63247635548971814501 0.87450959597929400768 -1.7434032421923286726 0.051595299163087832151 9.7836349046882364888 -0.57403709758513832284 -0.58408219259651938948 -1.1710719571231225089;3.1514170065866347059 -1.1453964929147151253 1.1526936902495776849 -0.38744412346985335205 -2.2778447429887660469 -3.334321067611108802 1.1234430109520905372 -1.5583540986354615931;-0.29644741196259954963 -0.65103206013745096303 -1.0202093982800521932 0.35267447512571159507 -3.8141618131621526366 -0.75817958159929010886 -0.38636796541991735854 -1.6810994885498582452;2.578184209022891249 5.3820809902596025154 -2.1483721995065230281 1.1834814206525545721 1.5364754085467378086 -3.0812028613338919847 0.66765781537310620042 -1.5312095419323363821;1.6609710467561014102 -1.0904564107836360876 -5.5041050062578467106 1.1380856126753222668 -6.4214720493917214483 -6.5636997090903790308 1.1618749930972460671 -1.2625008343718406856;0.73754646225799769255 -0.64832251664815521153 -0.61385198750253511246 -3.6497269344799074808 0.31480994685229291008 -2.7162978246747049305 -4.9773339815039578937 3.1871177127548491192;-3.0857671575979157552 -4.9425266356299948356 -4.1351749406575120105 0.2461834893483960951 6.8294905884851830891 -4.3634800538987805751 3.3878555987028127205 -7.8162450666879079719;2.2548420933650588083 3.9619467408375226292 3.753062403750528464 5.369933012549798157 11.549700521964672006 2.7236331285547090708 1.3896452392366525075 3.6875177663798623939;-0.10781850443600746181 -0.073388880620377308639 0.15609689163532730616 3.8531397120933839062 1.3395065017923222239 0.20930459637817849794 1.2967002427027998213 -0.25238473846198444805;2.2435416776007799378 -3.9648205355193164579 8.2437945022685674701 -1.8127157191944742731 -9.8612752902913598518 -1.3653191183804656017 8.4287852249493742107 -6.0308700821959346783;-0.58340655456744860974 0.31269998660484316089 2.6792702955490330652 -6.4563455417269866032 0.061794473961671710083 -0.4557103328647266749 1.092675890473878475 2.1740002399322886362;-0.42984990225901259508 -1.1935762061297350289 1.1756347737541856802 3.489847802095011442 -3.5785611444354508137 0.42414934873530057979 -1.877149463606465396 -3.8287451033462436278;1.9987577569955934376 1.6001500209621002391 3.7075816125190157457 2.1319762011439649108 7.3050398812477084221 10.054344370042215928 2.0771900788335511123 -3.9666767866546210897;7.2993302668418431622 0.077262482624698619604 0.7581178033152520257 4.3682663976646880499 5.710758844257838085 -6.7720086786907067733 6.591334221106055935 -2.8987851460431350858;4.8410315279179769732 -0.045952951029755426116 3.8430326301967094871 -0.10846477242221098936 -8.0644068477004111628 -3.1178529980143574463 0.094099356615954934946 4.2251852851933255906];

% Layer 2
b2 = -1.0815738915242580909;
LW2_1 = [-0.004656196122431626068 -1.1480200973921852459 -0.0069226237541929027189 -0.006326182374008209458 0.094731719679693002223 0.025114239981985874567 0.058828500480296502806 0.003856857021288023421 0.029454542180482840702 0.0012693367749395676261 0.0043328386515339763901 0.006034593480281843364 0.040923872401687808043 0.0043503063846940153228 0.026011001065852683289 -0.066789863540503591199 0.011947146589534491171 -0.0068886545963158535982 2.6786967737060054517 -1.5850580503808355814 -0.026695845299243611826 0.0022735908339692034036 -0.0033953584020417816071 -0.045053079896301202745 -0.0065452989985992325594 -0.077578943426999627531 0.07782230459787917165 -0.14780064946675433579 -0.01007533174909250491 0.014883357812146318783 -0.014238318673243800794 -0.077752220335204208501 0.015449474341518753748 2.0535112766154504094 0.00030745663280096853162 0.010249592942589908981 0.037704351481536654833 -0.0034628898306526827329 -0.0020945330011342454604 -0.014924081350134101032];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
