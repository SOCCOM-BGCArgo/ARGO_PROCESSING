function [Y,Xf,Af] = ESPER_phosphate_11_Other_3(X,~,~)
%ESPER_PHOSPHATE_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:30.
% 
% [Y] = ESPER_phosphate_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.8288400663250183875;-7.3513154293936375794;-3.9818201537667006207;1.982353556433759989;2.403631638474407417;1.9421754315541199798;-1.1278595683505816538;-3.0212547971714629469;0.29071866109112393106;0.23894853166337781669;2.3640278499363458486;0.053876672563692523665;0.17406630133123748849;0.26369300725060917934;0.8009979642342016648;-3.4578932328831020193;-7.7401112988817493132;-4.9753662477995677094;0.39733939545462404475;-4.4458809978686693043;4.1872962871756689296;4.3017292693561444139;-3.9816106215757791631;1.8416664795474995131;-18.130181032001697616];
IW1_1 = [0.31061822338543654265 0.19158324579346841521 0.22553388177866365294 -0.98257663880011525404 -0.42131749918446287362 0.4693997247974793785 -0.30468997696185035062;-0.35016243810121544522 3.3102194925569419226 -4.2343505366878586571 0.31815444960014671594 -5.5888112222919534844 1.0777604664898179365 -1.4864180523033161396;0.40569427541742464349 0.88598374664804724343 1.0963336542304338295 0.2173626751969107429 0.81178202120514464379 0.51260539864685727984 -1.8283179909941369434;-0.46499331069948335315 0.35989356814997153222 2.585540651241351906 0.9248331985263883448 2.4633571277886860962 0.17146329209605212784 -1.0637736103157520162;-0.51667571612285378979 -0.27435939199826941959 -1.3426052908730972124 1.0200305098414865768 -0.21719738976963884336 0.87669443221199572225 0.71655015813671885105;-0.034408907606190253237 0.34219207265249501626 0.22600890446949625789 1.0594770988903643438 -3.8911504673123116227 -0.79871535467515275553 0.17071369899867203102;0.49549956038189052476 0.554104264092750598 0.95466262364623322156 -0.77822001557468911681 0.76437877907378903863 -0.67450812988423169969 -0.23673113942504131479;0.30045275812944616245 -0.075143451365260294228 -4.0765659561618790008 -1.5039343252814194596 -0.36349806639564019584 -1.67505740763321187 2.6967919239319724234;-0.78768321191748857935 -0.46095067174469533944 -0.18406572446689797862 0.37278402734773841143 0.93347931732471378652 -0.52480444617281885034 -0.60442957573709987784;-0.62782297006699561148 -0.35452571266161153618 -0.57189820495145649026 -0.12035418219625870773 -0.12203411001370192968 0.33079684995049613017 -0.40210363823690248308;-0.42846866153540330568 0.25356975975298401416 -0.34800337393645103257 1.7613941078737300749 4.4325701688698089242 -0.39772813972843756858 -0.49710980623085709862;-0.15393275879753090529 -0.052754780593870738425 -0.037332920943354101773 0.5236929012074192924 0.026304343555247203246 1.0392096400005657042 0.41552006640900257528;-0.11712347504158827916 0.1711168156105371263 0.89485057469426321219 -0.067694620028790244981 1.0450331685910612123 0.21791215823246168348 0.28403248489546417677;0.0098717234918886918871 -0.1147746474698505964 -1.0387683879092715067 -0.12600132905071945166 1.5024712711379111241 -1.2862033793692573269 0.18761011951366615702;-2.8138336387089011303 -2.4321896852551252444 2.2507972805980478448 -1.3462116227121705414 2.4163771790723758137 0.35397286276451145337 1.4224369256929063621;0.25592653275481130892 0.23179678175201412493 0.76849812106132853184 -1.3595157171957910069 3.5641308149305324093 -0.14093647235488063196 -2.721003571395555376;0.46407887167751582513 -0.4336521535324685539 -0.042700492304314691117 -2.0399668073861461082 0.13422077723842634756 -0.60737958157436766626 -6.3258741681390722178;-0.95100069487145222347 0.42110899370951410114 -3.559080074030127161 -0.43480290576926983181 -0.59796239696527919705 -1.0552187955134562092 -2.7975765523104465515;-0.032383289694368183609 0.24357572222145415508 0.33093087228724116233 -0.56268551355355189703 -2.8886982619982055631 -0.95760753324402991815 0.64459836716422047598;-0.068316349451513699864 -0.46793589830530252227 2.6533222684754247389 -4.1414863367978176356 0.75206493072744240447 -1.0749340483557916492 -0.088987185231195697899;0.11911954613655882651 0.58507811365516115831 2.4614534602038347089 -0.53562940623390598027 -1.3980468365882943171 1.0012539971507996572 3.0590694032565881599;0.2500157006804991644 0.78865220118842782604 2.3271135857463716157 0.14878570711417682393 -0.74633597785857463958 1.2904951328007185918 2.5823766402133006004;0.094449934482270833658 0.056623949284452787523 2.1408815822270681473 -4.2110888283463898674 -1.9822003481170795691 -0.94568375709977103849 -0.37416460458050176952;0.54953424541018314198 -0.25365281555392499291 -0.012091710712250781229 1.3133526826659627229 0.38922890276065352788 1.2885050474704768941 -0.44710543625396709233;0.090805129625957312078 -3.357668750910646871 0.55299528485529614308 -11.55863429177245294 -0.45889038759947392565 0.20197942003378221987 -2.5093647036565283059];

% Layer 2
b2 = [-55.482645623177404559;-5.3144815191327250403;0.098972221443933472429;5.3101483753979037417;-2.2398023811963110319;3.0047187232340002438;-7.9476556788095553685;9.3244889371357793095;3.3029428174356612047;21.41299184178392423;4.6842645843408137196;2.2568770784531464457;3.3678691168869274719;20.705666065419837452;24.863183517036873127];
LW2_1 = [3.4840211342141707007 -0.33579328570636068907 -6.0501517334179268914 -1.1320932613741787609 -4.7277557730389832003 -0.69782142091101140302 0.95683583117948312058 -1.2082829097273062313 2.5769032903902617804 1.5260576871827751244 0.26562939395610474236 1.3952843129260030786 1.2042621123534609229 -0.25980505619976107523 -7.9584099079939178978 -0.091637720297159316885 -1.6743571170762605593 0.56278286528444199099 2.1444085403275705559 0.48453714898206812212 10.113996962153509074 -8.6108472461700706901 -2.0888361049023624894 3.4678310539264511903 -38.528123007437763192;-0.68718942381650527373 -0.58348276673936427805 -2.7300252403238154386 0.13887503328016259641 0.19001881470212503289 1.2702457602264107805 -0.71780213582695284735 0.009737866399120050781 -0.47704109930634180925 -0.21859639921769991044 -1.0847805492503901359 -1.2295000021880408969 1.9465631782842756081 -0.99700361519746971695 0.0049340511725053772321 0.6502900299290402808 0.10947457976365299048 -0.55220142760119006464 -1.1195857574414018742 0.11619836569724648068 1.8156320259219704827 -1.9876508643529098297 0.22397534246961645077 -0.17562262347151935682 -0.72357059245981214524;5.0042520598419244493 -0.21363906371076371582 0.52100766157009859025 -0.017932559230791553229 1.3223976835267232666 -1.0770160898546878858 -1.4968815648712321398 -1.0698939188086813434 1.004573765407591468 -0.78872494025988870714 0.60892701423294037788 2.1399013100708219604 -2.0539663595865911283 0.045003250869642408283 -0.29362016763477261083 1.7508044544741763193 -1.6674877041263729271 -0.53941004324037755691 2.8063318825094225595 0.77045541879029366683 -1.4225805752536877513 -0.072067955854704282559 0.21140527963142749512 0.17002415477559465473 -2.7784749848460794652;-0.45161593292937185495 0.25216728840377689025 1.6695109052508692038 0.34883988142051625125 1.8457884976207061811 -1.1570025871822589014 0.56794418661273127213 -0.26046598127956266389 -0.34488438905290375036 -0.10406350275235659586 -0.087895138724871757496 0.93290229686226477934 -0.18492069011479511653 0.37486644669889973569 -0.016907918357600165704 -0.38096274266690799415 -0.05727974885971082869 0.066347679729753833433 0.82748392779536150687 0.19720724997783212196 -0.89816736595958579503 0.99278133524457368164 0.99936641917204349639 -0.073730210806622953346 4.1385667409307984599;-0.12968178687569506535 -0.29417710453612694321 -0.91086221868930672407 -0.10679031892155912975 0.62185853810113367324 -0.52977316634178228671 -0.48725356890951720956 0.10075849727454376514 -0.27189691368919710612 0.50160383959242205165 1.1420454977043272837 -0.23050741445956626774 -0.84652393792820801455 -0.6590626907245686894 -0.0027151274684417002654 0.63556127862641431658 0.14178509548912621163 -0.10058917515276975807 0.17266484475875112925 0.94381544095861680255 -0.1380339934904651622 0.60690516110659642468 0.21486603145525651204 0.42712415842537571065 -0.86064208191468904996;-0.061408692393840634549 -0.8956086656678917679 -0.0081203283983954550884 -0.84743616159547552336 -1.3527470136363521913 -0.17587604195531264528 0.053105751911023561795 2.9563018081186780428 0.56724110907050862007 0.035473166870646853643 -0.056698146231495237524 0.64533205943075511168 -0.5922770363708329544 0.90696121312979560702 0.0091683723819310312259 -0.085035794969743158656 -0.30218184312478663101 0.00094898605993677925124 0.29623201491577416666 -0.055006975204486337205 0.011374956167507782254 0.82051918955482772144 -0.56676591919314711632 0.73806679341745995426 0.0011979042671442004936;-0.62401549748446616395 0.17038019821927261055 -4.3837139300268654907 -0.045211641586941846149 0.42717808838684473427 -0.58432968326296219619 0.61800668821932513985 -0.19449388754804974866 -0.65781870643039597191 0.5978025179962139779 0.36620280818254657973 0.54091844461562987867 0.14992855622818018757 0.59822996952084916966 -0.052457272232440267656 0.18180691612328195306 -0.35340680769601884315 0.0902980343762541382 -0.076408639752383780697 -0.098204532480001271999 -0.20829984360363326679 -0.31144993183765373734 0.87379627311850127658 0.34418982137159914725 -2.6005658461896272726;1.7529685230044576016 -0.18858768422782715146 3.2254145866719596825 0.62005339645884194333 1.5499749159948479349 -2.1166982429201635085 -1.5904563084126868144 -0.48983174454162858869 0.052318057650435685624 -0.96624552759115822642 1.0643971431523313598 0.64730986950893276699 -0.10815913571554305883 1.1332477630602204588 -0.044826260063117503996 1.0896947134579380023 -0.16159214634959609413 -0.31635658389488552356 1.7425773924251388713 1.4327897119708830065 -2.389267158323223228 2.2878167773888917758 0.61105663598308723738 0.23795239411184604394 5.0900875942748537994;-1.5886444408486832813 1.1946366920052109428 -0.55127348077982329944 -0.18666745062543943501 -0.91833153297480929478 0.27670062751087076691 -1.6129585602122353816 -1.4110304585371014063 -0.40298886027618679995 -0.58998914726953366472 -0.89714189122200060922 -0.94231643216527449791 1.5621409443413880602 -0.8362439966844389394 0.028265389412626375915 0.50294845081741335058 -0.42180363240107660028 -0.0051127679250615783862 -0.4831585682261902992 0.22994215746610038864 -1.9908276174117760515 0.66387044556603247436 0.87425019599515474411 0.22384728000413001148 3.3216427931155316777;-2.0614640016246612575 5.0932174652477426591 24.047899374661476202 0.87734265159396540579 9.4500312651379516637 -3.883086177847506093 1.3958838060341711707 -0.26099274812214956487 1.9270828523708485314 -2.7528183939068737729 -2.2720031755875509383 -3.2644896002099552668 2.0508604769866729534 1.9340063138440870549 -1.1603616349825505161 0.82933859594867531673 0.65241958566857061186 -0.94504836193184027504 -2.135407406011663678 0.58591417838784687344 -3.8868213141951648559 6.1302833253503896671 -1.6901224371958076809 -3.5484309659977419926 -9.4532966107686711155;0.45072136358177611326 -1.1247951305083627727 1.5454308672891079457 -0.43569708402519802259 -0.22347498628435380486 0.17169339196515720491 0.15614557270968984493 3.1077936208140428676 0.59202308517278046107 -0.010498978512483461006 -0.12609532716388335838 0.19767887157042235424 -0.62848148374819323703 0.53148523533093461335 -0.012054560461037153521 -0.036446402418013390534 -0.094165417379463975389 0.054521706536190706061 0.41795446135163111245 0.25798914871666661641 0.89470319591017033467 0.25624923231781021604 -0.79925395591565839837 0.60715900347119511338 1.0017666537301206375;2.5822093766965448225 0.028063505783693286355 -2.4012726158844559521 2.9176366756907547995 0.50764944139550649549 -0.18040963390440509229 -0.77338939088773039909 2.1269086686665685804 1.090808442332618089 -2.5266992701066914861 -2.153070603167606567 -0.592503464620577458 4.263883378611250663 3.5130173197326550749 0.19830102229330021091 -1.3108144590573063137 1.4948177419553236867 -0.083610791603923428905 0.11683863883411228779 -0.31323008534660484736 3.9640509255791385179 -3.0060761182694428761 -0.41229092481021994976 -0.53190076706489863856 3.5805249931171467814;5.8813590467684706553 0.1968708031480387588 -0.45679949711802964041 2.5165073439911815889 -1.9804871215937440709 2.6661025249635783574 -1.7727850179107200734 3.0182616899630323459 0.19035467613484235994 2.5326312164953783679 -0.38696445193683348673 -3.2312567873852473532 2.1164997205588207407 2.839740783225466636 0.01475328115607092358 -0.85230836701225487495 0.35066524929995229742 -1.3831388516306932779 -4.2863276703185801964 -2.1298598895864846448 0.057385271839332660515 -0.80902446833001528947 2.594346626203780648 -1.9467842487661259909 3.7523471630739679838;3.3578293351372856534 -1.1214978242232729322 8.3126999834928607669 1.9582086096330824088 3.5654547937284624126 -4.2268417660306880634 -0.54811142473167218103 7.5953506701507400578 2.3914370378796885319 -3.8842243311256989813 -0.68430873404386161063 0.94036192699524567828 -1.0755698294078555044 1.4562600511148531268 -0.27019024574063593702 0.38244953119470548319 -0.96358795779947048477 -0.1770689608239764401 2.0576100203937586208 0.27276144961071940864 -2.5231194610087821495 2.2597447462228834603 -1.0297918040060629608 0.067485241150691488432 2.5314937186128085855;7.300857167523350455 -0.79456612187836961336 39.624234342173828338 0.094101490891545597206 2.6326734425333584433 -0.87322866311888580615 -1.7560869471095417182 -0.689509653924942012 2.5583949334330280401 -0.80155326748655575386 0.90967153491019148159 0.56829966923211561181 0.35884372165401162702 0.84641669133195851504 -0.2991005948458163588 0.079494228478018236217 -0.019664438942985487668 -1.0141292909927048793 2.7206714064803070308 -0.28065468016479372393 -2.1453167376901030039 3.3928038768649058099 -0.0036338734820375515056 0.095693873222299913328 -13.393553768068279908];

% Layer 3
b3 = 4.0469344321261333519;
LW3_2 = [4.7973767272806844275 0.97694747456905572935 0.26581139001962683643 0.85285186633881271412 0.8598625038357710082 1.8710634280264133444 -1.6690790271046407334 -0.46338325912210892588 -0.91233241466472991821 -0.16534015344686120441 -2.5874699426416363224 0.25238940458152669954 -0.30523170139472882711 0.28948678671987693178 -0.1314381126215069806];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
