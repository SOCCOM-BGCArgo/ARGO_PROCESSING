function [Y,Xf,Af] = ESPER_oxygen_6_Other_3(X,~,~)
%ESPER_OXYGEN_6_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_6_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6774309177399144843;-0.82771531109216045508;-2.1478862070750097679;-3.8017812096160232826;7.4838431498797115538;-1.6537215298433733945;-2.3701614837138880176;-0.66421893898776973586;0.94304134482094781333;-0.7183837702779891643;1.3064720222816252893;0.4269823039405962195;1.0599344606067382379;-0.9702439628259100779;-0.28074077287137971792;0.042771555824584903127;-12.165043896580712612;0.38481475570024814559;-0.37424753467869131818;-1.0353045509468019603;1.3246092205616639692;11.484762644913692142;-0.37296164427679567854;-5.0353372153818858337;-4.9902117053160406357];
IW1_1 = [-0.38169045928463074535 -0.37205106945122379258 -1.0883689203619173469 0.30134001621506345536 0.52161365473502963042 1.0803477576094597801 -0.16135433158462630931;-0.070484580958318138189 -0.098876071184555172633 -0.75697414109636163015 -0.79192387370648642531 -0.36819742458348325709 -0.57672127056502942022 -1.1237553682787164711;1.4184262822396518366 -0.056448683664131353577 2.6043393388827769108 0.27068392696635618089 -0.032224771744251499983 -0.12949132172422153642 -0.63282736237210668317;0.010988326502920437583 0.072204472686339352117 -0.42256662524930577174 0.56304373059951273728 3.7891861572068656905 -3.3508757102528261562 2.0479171205626078844;0.050014564946071961293 -0.29024701304823780079 -1.3713711566551280985 4.7905984713876117453 0.9473822432838822083 -0.60004218839978884503 1.5235711999321102095;-0.12221360060884087217 0.89556281827337713697 -0.054578737661881995824 -0.17341892218337076614 1.4390236408493937148 -1.6524109057875733253 0.062044407869352023732;1.6256835550476438357 0.60972465158021249554 1.8383640473569264895 0.14917554894819437528 -0.2093439287899975243 0.65794033562424514283 0.15238492621187912923;0.316047439463486457 -0.30887684975719609248 -2.2423625576383736657 0.28706159653821022859 3.5965201249143743389 -2.6195932415204077337 0.63413684771618261671;0.16467731983912375915 0.30889313486875052961 0.31214778817484167828 1.2719837272714584753 2.5979406077203104353 0.025493942602724140034 -0.31799099018792625904;-0.037792308626325321619 -0.18926027286338995004 -0.68242137046574857795 -0.12597915159581254962 0.02578149518592013148 -0.22845182160500365764 -1.3259416889594619615;-1.1286772191606104787 0.29303108768807023532 -0.82043307173253210429 0.18166636932509158675 0.52374190353015159793 0.48736121095155404692 0.079715980082176091104;-0.32948723604534158049 0.167431887998612694 2.7728228703392878707 -1.2824970132585815641 -5.6934487690613710953 3.8539684661057256321 0.11372950194580330741;0.015801479925626513157 -0.029008812698372323652 0.10206394191315004694 -0.3872539370664142 1.0679688346293974011 0.84409845282519468945 -0.46552785360184478769;-0.81867791641282694481 -0.45786229986194687536 -1.4355293933500510306 -0.23990749988917373092 1.0894472043657970062 1.4280724503683759341 0.60296656119684011177;-0.082365253066939980719 -0.23875594969524807643 -0.34562534419167628696 0.74134548917841258664 -0.85618485627432727725 -0.82837608518112881839 -1.2821442368413293877;-0.041754207606763932281 -0.013216063487827108686 0.16965225955090867949 -0.069321432428146007032 -0.18973232558697422645 -0.65220402691862455757 -0.89158088855023165387;-0.26541747191101289216 -0.040179537440720766717 0.8448633651541626044 -10.75457150087425795 0.47872674431943579298 0.23182391648561187503 -0.3069157091724806774;-0.31655656164564127675 0.052029958764278794181 -1.48488724049703813 0.00049434778650391669741 -0.37302166034906858449 -0.096911485684201353896 -1.3717250952824247001;-0.0025650106926274171722 0.20431174267880486406 0.37322369335543642554 0.582171755160768023 2.9293952754235306202 -1.4967927943084515796 0.3017765315288866157;0.034117883924100055049 0.071484583332680734502 0.77458433723592901021 -0.21838507586803457272 0.65192979261660344292 -1.140376423808568962 0.42713528489267171828;0.87186281123635001045 -0.14247883864720342628 0.26871144422557874387 0.2674194324164611003 -0.25448579718156799645 -0.96728240906536777644 -0.4910071788436350948;0.067729522983342435594 0.43065490893197200251 -0.63551657013492390824 10.093398406344286755 0.44796625028253850287 -0.87006035243348278652 1.2047889407740397516;0.21430191819693639177 0.07938445322502230006 -3.1059724877025383094 -0.40519943968774491116 1.6682893068152264693 1.1909806764515997735 0.99026272455747021972;0.78629358785869429838 -0.4233747723993498413 -2.925458048541083933 -0.1534730767570281762 -3.5450519774171715959 -0.84551352815415159458 -0.17689627167888841153;-0.59557795969016269488 -1.0345825432016961809 1.3346587602111332771 -3.0611871090974838161 0.7062844508108587771 -0.80028372094907540557 -1.123120035102216363];

% Layer 2
b2 = [-0.60432059703032425801;-7.1605080175996649317;0.048002576212644469666;-0.86137732137100497809;-0.24983958751157775424;-0.090188025083719272623;-1.354060940096998511;1.9330857432376067351;-2.7759624508139073562;1.0721610011874318502;3.1219374685789400559;3.5545187759420437956;0.38131902085544516767;2.8804357052977680453;-3.969540175061149867];
LW2_1 = [2.2788876241485835905 -0.31354011508746026937 -3.5521691220762541263 1.936570281436060581 -0.41576134992640917387 -0.10464377143551480132 0.74702403470897738025 -0.37459429644510089386 -0.087177059489924144109 -0.15690451795733711959 0.19315809061223301879 0.56514794408838608941 1.0746043121388055841 1.4017480729415865426 -0.3520538883955735554 3.0541969492679901244 1.3779533067147589076 1.6955949919871564635 0.60328305959675931902 4.5527417954333442296 1.5138068401687498898 -1.9081281381442554146 1.030176273478392357 2.4165335175022497616 -2.3600139753315794167;0.82341717296799965542 -1.0084520161898578028 -2.9930963229089022626 -3.0405707001971733483 2.8169393418935153584 1.0758045205154143087 4.3250981693054040278 1.0659142820324727374 -1.6637486722405554485 0.57809460260253331398 -0.42085444205750205393 0.70623324076405702421 0.75009073590338248838 1.0309658045228773382 -2.3692176511746518841 3.3808826472158362009 3.9828203804430315493 0.087905586211997246981 -0.27898426709447932126 -0.86093888311661725954 1.9592141057159948581 0.49103196939047633052 -0.21522582173624243973 0.82837375153954240226 0.13445227090433498063;2.8818468538029824444 0.59469810705465042666 4.8811223437817421456 -1.631350765456955898 -0.879177659838000225 -0.10145498144812629959 -2.5628314079914611412 -0.10234043027960131045 0.6587278959677829171 -0.19178511270265621858 -0.025177470103265063572 0.017367184970009240386 2.0915954457252068366 0.14666630832053026423 0.87418294329195445069 -4.6336154851467412641 -2.5366034483234836117 -0.20972263607874147562 1.9439621283248564865 0.29629319384428359774 -0.49668566870856806217 0.94732278218139021053 -0.83230912002142432016 0.3810361953318699979 0.63635542361617836171;0.31768611207659647189 1.4200617176875693914 -1.1462922785922264879 1.4754763368945960078 -0.15144415370411706823 -0.76179998748886346149 1.5579822907196778647 1.1397781751063129629 1.0123396341413994914 -2.6502864557710505977 0.75704331864586027478 0.73374964514658702619 2.523424563305218804 -0.10601062816703200886 1.3149746551804781802 2.0709823594926892731 -2.0402668087988691248 -1.4526674719294327964 0.28347682007945879112 0.60237102414920484783 -1.0582936878724109597 -0.75413575385139164364 1.0556387181629784955 -0.60753545410280573869 0.75501435465483712761;-2.4523545147365055641 -0.65760752462424221232 -4.9606093063349767647 1.5154145744279226005 0.83939017065067544898 0.30053371933494615886 2.6024941756378634494 -0.1086650994320972341 -0.58410614750090372738 0.31713575455287734695 -0.10481652067397845274 -0.22512317636616563377 -2.108681059843162231 -0.017766332855988324624 -0.78387528281076968018 4.1915980513437922639 2.4451912095052845686 0.28691793851570585039 -2.269841828052464372 0.09624177454401881826 0.69040439032378764228 -1.039286020152688117 0.71888507496221976112 -0.3431550280904926975 -0.70339940352883700836;-1.4506890464275836727 2.0618956513670556596 0.51494648834523570891 -0.91505892382170428423 1.9073179670923834372 -1.1633137855261634908 1.9834614534626786586 -1.2896059565803856817 -1.1806922554985959106 -1.3240833261986546532 0.49335681314195584113 -1.2501018667635535042 -1.4078008263310761716 0.38914780397148346358 -1.7702109514757622399 -1.5355617503188303541 -1.8887434321065441623 -0.5313913641161952528 4.3133309250510345478 -3.6666794218392326776 0.67785984264098642083 -0.50779669398636373412 -0.73434678109622841813 0.97381118032589775169 1.361001530215922406;3.8858164857444021933 -2.531295835081241119 1.5524149018994817251 0.77829709485571008099 -0.10557922697241489685 1.0945281493712346599 0.87116005047652034232 -0.41910626194200978345 -0.76096565936491311621 2.5915249827140485195 0.041158950573794123029 0.4596972806570165937 2.3090475094973781367 0.41802492876218150242 -0.6513847081086815427 -1.5023914836567975328 1.1728293364759521111 2.3702698319023403073 0.27437386299787291932 2.7422838880413400453 0.51342110723347667012 0.31636108844838162213 0.063491397970015323038 -0.52295364075475503363 -0.051843600749702394015;0.23961284248711484102 2.306644392202514382 2.491673037249646061 3.0867730265866408779 -1.4515082242071417618 0.83633769212886288624 0.63562216904045021337 0.25448432834457651586 0.80632844035077921863 -0.92048303113898599648 1.4223538131208974811 0.3115381494866280021 6.5501539353848476921 0.74934920587818154569 2.3932297803157327465 -1.534904576760523387 0.97303869608681670123 -1.041805875047359109 0.72684549479066984379 1.411419247910974617 1.3765192533473178393 2.2948597566328992059 -0.15611805527538974436 1.2953591941304836155 -1.1593989815094987161;3.9749476939429242428 -1.3010198808706363582 0.58084477986648164194 0.46549722084107669762 0.03059823919978739773 0.059921233417673594457 0.21646850833874861642 -0.97729218650709215321 -0.51336639694570340708 1.7389312457045822402 0.39719092442792913733 -0.32346421063470193191 1.7951777120432206303 0.56042044740666197011 -0.20379808324970222211 -1.4068201850944732634 2.40888190764869492 1.4810657758755532143 1.241538959847501955 2.039763315946100608 1.1422254807038896285 0.15423145424868395237 -0.25310045118093288385 -0.54528997682379709566 -1.4250971842409281276;-0.3149622664315461229 -2.3459337942104232511 2.2575945567635780087 -0.23526502529429277333 -2.6384636926485676156 2.4079732447937027828 0.69141797912743496735 -0.029476235858221379316 -0.53090652675191496446 1.0664066426721712233 -0.82169672400840831905 0.23326473512860554371 0.7371782415332103211 -0.40823460411724477037 -1.160883873096399288 -0.70117493750153614407 0.17130393522673650897 1.9032913440639380731 -1.2760403918127061207 0.69746966623845751965 -0.50292371971949734188 4.0576946334235062253 -0.65457128545577203393 2.2486286864863505031 -1.9674754515992880499;-2.0954747949355709835 -0.30590210970182607486 0.52499929123702082645 -0.17554036831397765162 -0.56923052463148782198 0.15165066146064554164 0.12724206684468314377 0.10245550864747714204 -1.0742177650891877594 1.372524748750558965 -0.020721542201555601115 0.38436673304477070312 2.4390913484890996976 -0.18978454720415588453 -0.65942088062979009599 -1.7791321784829321473 3.2354823557046974436 0.38631828069751061872 -0.19911642773193286016 0.8627113284892684586 -0.41560474779346917584 1.3080548085835728145 0.50309308106911487801 -0.99896007883108628445 0.53174119301197353415;1.2963573597008839489 -5.4068548267023022191 0.56453898783670430905 -0.3119582475647094677 3.1290911815207551605 1.4970947603586364227 6.5195034060060867986 -0.18837179513776738937 -1.5951672685296065524 3.5074181613689394688 -1.1739616754373827234 0.20161212683098239662 -1.7792689293002654782 0.029549321922297023396 -1.5224616304030909042 2.7376482081655062473 -1.9192113272406932101 1.5493963332173041891 -2.0689741238008059199 -0.016839431758628318342 1.1364791748630918011 -3.6100579994252548488 0.57452886995635832346 -0.75472946105327176625 -1.6652541338629718304;0.52319656722827057038 -0.82732190074688949366 0.7693852177658700997 0.39573129920637423185 0.52960430632463106893 -0.068029148112220383382 -0.13430437043190893154 0.062870543445577312114 0.84561688061475881462 0.37001207770985028445 0.73708097395596949841 2.4067881439854623693 1.4615113828116692574 -0.14209624894729463995 0.37894525678055462903 -0.15523771333943398032 -1.9099853293998372283 0.12605627953317469214 -2.2499144672474868933 2.3555327564490680103 -1.3654524217374739425 -1.391363024576083296 0.48773960543330885375 0.02842770597203399946 -4.1837831148588673358;-1.0259642374199167136 -2.0916806876510452007 0.24050012038227866484 -0.24898681888814408469 0.7121544925447376162 -0.2001347666793708846 2.051435807626118546 -0.53343969661630952217 -0.28201327544795384838 1.1748345163100111233 0.14941662857310658574 -0.79358702786706503129 1.185443908413944536 -0.11449191890336912758 -0.21258670392768894142 -0.98706599902027480908 0.41299168466612073969 1.5616619795702635365 -0.60141634559609336019 1.7726793711063304482 -0.75248500327703438106 -0.74223436639696460659 0.034032684296259281542 -1.7341475057438702212 0.2478108149400630178;0.27844852438331280098 -1.2668206098385488279 -0.35797545919046402929 1.6413270462150402196 0.81709817606894474817 0.70839241802016561511 -0.1684593684260216051 -1.6507169651943065514 -1.7462133660709193705 3.8822540905706754977 -1.0974087966409908912 0.073315077585789395487 -4.6065090819805840638 -0.41957603709684143656 -3.369961140254941423 -0.12987774122415055023 1.59556390362147682 0.45884847363704006629 0.72292539553273815756 -2.7563847168020489953 0.55954906675998261623 0.46594837815412953885 -1.1683151314606170512 -4.734194432075402581 -0.68707368470288976425];

% Layer 3
b3 = 6.1146558507862049936;
LW3_2 = [0.2095351796251036236 4.5467367282579447263 -3.126993243433624059 -0.69140904794493285301 -3.0123157075974096308 -0.25830543379330228593 0.53909436861406601071 0.22694214102160634172 -0.5634385204550259596 -0.25191447261462923679 -0.47689173195042749986 -0.30220210351353454792 -2.0314681527474713896 0.7759483150285182429 -0.36797944124632436802];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
