function [Y,Xf,Af] = ESPER_TA_1_Other_1(X,~,~)
%ESPER_TA_1_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:29:59.
% 
% [Y] = ESPER_TA_1_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.2233067182966985698;4.0401012333447665625;0.32199136774130737715;3.2715283327049728967;-5.7199313454480149588;0.74076824841624022699;2.487718872384916402;-1.3847994150866902441;7.8702122608606153165;0.87464895566039491115;-3.3966025833760618013;-0.25886339773949557097;1.4079747821454959844;-0.42555845485440146891;2.0366100613986222179;1.2040218663229058649;-1.2458305356442793688;3.1471750337674553322;1.2164536729057018327;0.33074211864950914253;-1.7418545871401815983;1.942858698599344347;-1.053075194483094057;1.0965265173949616528;-0.27552242514987784761;1.4238457496000920255;-2.2500069217655105369;1.7480989760600109673;3.5670817839272985772;-0.33539523887689060011;-0.83180951138750192086;-1.0740887704116526269;1.7557074710384314997;2.5095350899456927429;1.5401367580553526615;-1.1242628813459514259;1.3789870847223562045;-7.2446558583696898381;4.4405700639868852519;0.81069762651344356996];
IW1_1 = [-0.37037972666816038059 -0.58949808121053026699 -0.21128525909464648813 0.61091950760811564169 -2.7579434285963286833 1.4862741582364382698 -0.73622007789193033567 1.1536522037246847994 -0.11848303360706352594;1.2941820340951299961 1.2512887424646537138 0.56350143219859161192 0.79492756490653015966 -1.0691336583956032591 0.20879069805090549883 2.1501827287795047816 -2.8981950399887961289 3.6855873945949690906;-0.26819293078690281673 -0.13508523622808227271 3.2450144342586910717 -0.059846594218554566291 9.4372372241732929155 0.65262995978770410588 0.028245076299564957079 0.44509882887451557298 -4.4775869431455497249;-0.41590665775186252962 -2.113372639729869551 -0.8578052600395367211 1.6874128357905007203 -1.3168611350283971895 1.0172625528506382686 -1.2845856798483523686 1.1963605107860435517 -2.2614839869244902637;1.9835927264068602405 -0.19610173646922032797 2.296115423523274135 -2.4909990469855283202 2.4359268307704189382 -0.92863255002958600137 -0.94699351833395295497 -0.11948294058854488919 0.2019325319973269417;0.065441301386484435065 0.22791987861765267143 0.1104573437380344525 0.031953519104499381043 -0.071298135887470429073 -0.35235695280718681843 -0.55765852948167260461 -0.53441063220493567609 0.72210766032054096719;-0.23620051513146611555 -0.06475560920791804953 -1.0072449119888178259 -1.5421741776884994035 -1.4827088854588101885 0.48570353522070019991 0.5238585238937565336 -2.9285780620752333014 -1.7977599757060644947;3.6968617069689089227 1.801381929538033555 -1.1709137718254247762 -1.9225844854227189806 1.4697743637251690085 0.5531640992263440193 -2.8366111753796836581 1.5575195505519949801 0.43757295549937902379;-0.29077061126909425903 -0.20565409106665388794 0.062855422366006052926 3.2265965842747430514 2.5442611438314775008 -2.6012986226866550155 -2.4234369095866727939 4.6015354434418229701 4.7294225115890125011;-0.13820088044763140234 0.12757261314325968327 1.6227436838728701574 1.487496238447974406 -1.2270986754925712336 -2.8520579411210658094 -1.0607334438549544942 1.2370600834493370446 0.56335951055771738005;2.2997807492505413229 4.5673959634759855319 0.47971926378077589526 1.4274621996529963663 -1.4734898841602439568 2.5737990527435643529 4.8504058162585312886 -1.8295191564914607962 2.9387981229230559777;-0.54346744045301553783 0.053360745656879600418 1.1152930862420202818 0.54582549642577937732 -0.12134666471590754844 0.74389030506585529512 -0.69464639972557296055 0.38863521762324598763 1.1925420329695244348;1.7407689483001316244 -0.10029129617195002566 1.2322004523380862828 -0.54446712372496286481 2.3949386445893026121 0.14764838326700369109 0.57841865267196435063 -1.3675859964726133633 1.3311098023142433622;0.008341821999100749313 -0.17532338266365082857 -0.71102599871671989806 -0.26012205929132475868 2.1664719582323419544 0.071882131132292220732 0.34144557953315202159 0.12301439074398769213 -0.012833196317518110602;2.4343972183663256104 1.047683164521888477 1.8491352042945263801 -0.064949066902093913201 2.4735323291683082303 1.0889615012665503357 2.0453866223270007474 -3.1430420257917415228 2.7034779030989919413;-1.3600381117067905645 1.5236838649828232661 -1.6776345596139927707 0.057728341153470585922 -2.4359952385991743284 2.5607590594957949648 -0.036740362206819164592 0.86324807468135034139 -0.55845843227126923392;-0.34707281612057272469 0.14122730486836812536 -0.61928811641192305082 0.76730491279973878083 4.0120460627791816322 -0.2315081821368062398 2.1674286804215845414 0.31896380342825314536 -0.027239586493516175503;0.62238893984407506199 -0.70628995603234512313 0.46444745670171122542 0.95072586364016853366 1.8806848629465564571 1.6382668848658321625 2.5132547163954268576 -0.69080498283907321166 -1.1830649066855338791;0.39437108134115617109 0.86457916321225680711 1.1119042190143038074 0.013132235528593324408 -8.1219075144760228824 -1.0386693111672595791 -3.5209163800039906533 3.6910138117838853233 0.12540467002339009128;-0.41621007071870524952 0.10372787645073720808 0.96433480714725872129 -0.86779484866444933644 -0.5901881521624280369 1.4544064316911586854 0.5655464090727435611 -1.073060326873028103 0.34559020763854519931;0.1148150133051175914 0.050327841611314663717 -1.7739984028009456729 -0.37764296954682469165 1.5480235579012791014 -1.9943552205673720223 -1.130970380185954971 -2.0181226351484471415 0.6556218505989459544;1.1949783049670466006 -0.45755837891094258696 -0.28054211092741149214 0.75905529073606781143 -0.66960333775014346802 1.151623030764864497 0.2948792766620620398 -0.75037639985680637533 0.16251989098751962182;1.4418996594882471651 -1.6657639223617626278 1.6339309265231354296 -0.0069945756244019618303 2.5534811490782574062 -2.339979257132972279 0.045379239221341856336 -0.867627743051095357 0.60462082485995194414;0.65507189582128999561 0.042394226971565515671 0.21691109981342265867 -0.72828081040520808997 2.3997778022196905034 -0.1940428197076297101 1.2243193760269959203 0.0023104771045159323839 -0.70486354163797737549;-0.61586906049798673113 0.082076217889344230128 0.92851136614164364591 0.61880863827350784945 -0.28492439735605518125 0.71533225027563418497 -0.62449733130824114369 0.41520696996560108039 1.1202907536936712596;-0.33000968721306561671 0.24175697673823109968 0.80292767515477403428 -0.22298523696531430405 -1.2993752380685437142 2.307162696936925439 0.66963044196553600518 2.0779458905692078652 2.0567993338306456153;-0.62450229821990954626 -0.24554415605394269706 -0.94831257912551636391 -0.96463268934140278255 -0.44281102372442404658 -2.2068247029897611888 1.6684676375713154428 0.53931727014210040227 5.2952210498250735782;-0.13187013502058830827 -0.95681745047094834966 -1.1931874781169298227 2.0377183868672195111 1.9132418700761799624 1.0321376671690252191 -0.11451848858394868269 -0.13158308322650325017 -0.35749312945309791312;-0.11104123132713869526 -0.08456594098469899512 -0.80880764351015210778 -1.3446709987439200429 -1.8947995622573881036 1.7197747554928715097 0.49894405933734276015 -2.9759298126434754472 -1.2223668715544864227;1.7104677817139437579 -0.96332174464216246967 -2.7050216749144340156 2.1350613277630166031 -0.39195899649964555111 -1.4777273232843810558 -0.7834114541140496657 -8.6640435253742005273 -3.6082258211895208433;-0.23335592352665862625 -0.30996992628910996492 0.4169056189813415414 0.33658266268406800137 2.2018702711565230068 -2.6900114082373027813 -0.47978622217964139729 -1.870204552217579641 -1.0105410701412780305;-0.15364626844846362985 -0.10548723651796401701 -1.0317339543833832227 -0.25373831103316146773 1.8865472733859893761 1.7525649906118190291 0.5481027968257339289 -0.42277229128804544311 -1.2946239570113176054;-0.48946690024998401602 -1.0027047891812828073 -0.33052823442224998907 0.68668954034015539101 -3.3020946296078368398 1.9680021652030539325 -0.75311092596326234538 1.2846597709705971369 0.12037358625477313778;0.69207204376633080223 -0.53237627205941207009 0.6721914572485767625 2.8377124903439736592 6.7646331081907451477 -0.7220513430275193878 -1.0864157130309579635 0.17591927905319762471 -2.2472241413383180486;-0.039327879617176417226 0.32952230297356138733 0.45741215778629251698 -0.33484069600073107509 -1.2817902172903123947 0.11149407182270715255 0.64639830928555763734 -1.2494214847935143364 0.89521802342927347951;-0.55572980478250211256 -0.15370734626204052287 -2.5508201101529692778 -2.8320704821662685546 -3.2275493183796934993 3.7869969980692892442 -0.45995515285918930903 -4.8673071076091867226 2.2107547865546175458;1.6481908667429565618 -0.099110293462870438508 1.053478692135455308 -0.51858769939826199202 2.0497676162499667285 0.15353388631378339646 0.42342715210752368549 -1.1980566791894602385 1.2443065678993512346;-1.0129929044575989305 -1.4416136161973576169 2.2488409474020949474 -3.9510677662786233277 3.5339618882519325815 -4.5344520563898136345 -0.15246300756122041498 1.1183989878272337926 -1.0228070896321082017;2.0472571390859193308 -1.0096798021575421611 4.0947003706752722607 -0.55223495014832990613 0.27933253307855215875 0.17686134023330191134 2.2757561017390397495 -3.7224802496015492181 3.5071304853292568637;-0.50742519623444493071 0.33663613423817323467 0.46813587444739063193 0.95166844747815393379 -2.5925086001459294316 2.1338835427917786092 0.24672992658002174116 2.6912003556752268629 1.8564210718832192537];

% Layer 2
b2 = -0.26163827926892418985;
LW2_1 = [-0.52657798374500663918 -0.019137918417782277813 0.057852731647553556904 -0.042534286557674133578 -0.10911363020080870612 0.49557001395197392002 0.7220384121259774135 0.012277897298368544571 -0.036938625323330552541 -0.11580637546541425187 -0.027125232121437709704 1.4489252259901117537 0.84135533561668307545 0.4224022557324016991 -0.039130181378115629076 0.26473932419714524267 0.065171916287598233297 -0.18064553786008463732 0.043074834521443859658 0.20894703209631046437 -0.11176041717487343596 0.16522522774632047993 0.24409072834731043722 0.43590883955106873859 -1.5816434604922304796 0.11285882221071016906 0.021379520435738999518 0.085484062164367158321 -0.96265127322595345216 -0.0097521631034311502539 0.10373081530031325048 -0.29017622586831354203 0.28653771349210432895 0.086003588231948147058 -0.30577169448096008786 -0.013239660614132139557 -0.98053936049547207876 -0.029219487481941860268 -0.024928869565886784682 0.11999459181373496597];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
