function [Y,Xf,Af] = ESPER_oxygen_11_Atl_3(X,~,~)
%ESPER_OXYGEN_11_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_11_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.4087957576248628655;6.3497846473227292918;-5.8739568034935292218;0.28762810310209718789;-1.452632594009342526;-4.0547183417019612151;1.5856808765863967814;0.26208931915506461507;2.9475891911326641548;4.9523573567446428356;-2.051151822959896176;-2.9460625769423645082;-11.579036915500084959;4.303046493873761591;0.32998757258596017605;11.913901633867215679;10.286530639870569814;1.6850278152383431074;3.271333255439381027;1.7922964863712593786;2.3528470313692451121;2.4689379538014639692;3.2243246491636274875;2.8523967642248346799;1.8559201417435717829];
IW1_1 = [-0.47142676882684536599 1.8036801453250967953 0.14357824415020242759 0.061804915185499707808 -7.4408271550639319969 -1.1844927964956526445 0.44364863924906883241;-0.26433094145671587327 -0.31917676767503744273 0.68987315696973616763 0.57393208221417102433 -7.2972871426381589188 0.65595710956868147345 0.91380691124317270368;0.30851442568532017052 -0.10110939408473912371 0.55093407010141526303 -0.39237320381431384231 7.4301535287056017509 -0.29618531935111264142 -0.014040703636878279145;-0.3155352639116136837 0.37654413390594326794 1.40212653744500515 -0.17017666136053269388 2.0117702397678676185 -0.35562665726223896545 -0.89840527382674484347;0.29566298680032176982 0.29772966224803676383 -0.68339492789217204383 0.42048377587995050542 1.2852024786152256297 -0.35855160220795362358 0.99487761964632115408;-0.91142095408431023085 -0.7967445061378327642 1.8933331659364482924 0.13747760674190501184 3.6973836707235236965 0.35880932931607245617 0.084168552088000406219;-0.46835062986392839157 -0.36623266737099663404 1.4483028789071032971 -0.21673810240279856032 -1.066500209145359479 0.37502399398520591678 -0.36727307818003523954;-0.075432501285016356762 -0.10269666162048035618 -0.54709170120558514583 0.74772880000381924948 0.9794111915953618297 0.074495942512180765571 0.30726857263434598222;0.48849140281176101075 0.86302578283320752206 0.28432680566126672383 -0.21315049925146220544 -5.3979586588725334551 -0.21959822387308192138 -0.10360977848628609432;-1.7348480194679547495 0.59466347265835828306 -3.4776297888487901488 -0.64122869179726094124 -0.44644262837845732905 -1.3207933107156359931 2.1340631070580529105;1.0198205532136264129 -1.0925051032586790001 0.39666658242693136893 2.7225877106979128328 3.4822435133618125924 -0.24772467256043825823 -0.84646534029720921222;0.86008444132106842694 0.3500843986533606067 3.08106838632576574 -1.07946439377412573 2.5529438129856178996 -0.56134461617914044318 1.1795618252642390278;-0.30191393973919067317 -6.5978501908339834969 -9.0817710307259105207 -0.72316213966854214767 10.408597359469286658 -10.838386771280207554 0.22052453392292897805;-0.033977910418116825941 0.19960639552394734975 0.68607418846685142011 -1.0005111242533977212 -7.6321557060713791643 -0.42136407753285681776 -0.6542813334891307564;0.0035021667500873899029 -0.61961059151424990876 0.74384035278856741602 -0.045271211460154996142 -0.60003296539599559889 0.23076734642507770734 -0.4307218498599441614;-0.10491982576412353656 -1.3680415183705627591 -0.84488703414359667132 -1.2285611036418890851 -14.851686086469907622 1.2021185150241258111 0.7552507066355893528;-0.60000565921067960939 1.7785774480098908157 0.39858463603803367947 0.29556907901046558518 -11.922692144064882314 2.0005919723448810643 -4.0284643581742907159;0.83616697019078922715 0.55857757319018497277 -2.216059642023696874 0.50926156490715535075 -1.1786699421463533444 0.87820467998780105123 -2.0074477100203553803;-0.99901465759760255114 -1.2282373567742443932 0.72372095735151864559 0.55105122209421597557 -2.2929555622524917524 4.9658688231912382349 -2.2626984702272863181;-0.46433056368533331959 -0.35329528199352044915 4.046500883738481491 0.65125191759482592424 -2.9037502266014074692 0.26525486571707779238 1.9343369743587564002;-0.32339384631681067361 -0.43871593686507670551 -2.841710390717087531 0.67603216068012217388 -0.76813663874274540344 0.86296148944529327274 -0.035849746044941260825;0.14248322312379466115 -0.050695365841868934853 0.13556514362608160229 -1.196838434954200725 -4.2891247379496668657 -0.5480673757624295872 -0.35699797471578020858;3.244259366747029194 0.86529390536656158872 0.8044196453420175974 -0.94508173132423456408 -0.3658618150892812837 2.2747474851793878514 -1.2320328595947687145;0.12774370378063240605 0.22485149040196322767 -3.8976342544098137033 -0.96992002333331173158 -4.1934415061004637337 -0.36806491580140598963 -1.9677875592139164596;2.453383763510100124 -0.9676241061796418963 3.0919573591955002989 0.65695065131183005835 0.3787600721251422331 2.6396779353688342162 -2.8773455916061498883];

% Layer 2
b2 = [-1.4688732113064033591;-1.0226480975603078338;4.3276138133161587973;14.575539754926852609;-5.4908328334415799077;0.33984977568512453328;-7.6521114654333048932;-3.2344765817953371467;-6.5430022358770809632;-14.331833648876672882;7.435376956869377274;-5.5735885696205329509;-2.8934521284835024169;3.6810225966681251464;-4.4135477461535659316];
LW2_1 = [0.70972647244044406722 -0.68508560848799504583 -3.5732406569599435286 0.35896927548312951295 -7.2978614700651593949 -0.46865061505877020354 2.0878450201089115978 -11.63594964543675303 -4.4455064477457604255 -3.0345470325375227816 -0.10205040373523283082 2.5472092162579991204 0.15065642559407743661 -2.5056978366586699636 -6.6575318072491187493 -0.31746761483101265666 -0.18930637049641252379 -1.8326602294059048948 -1.0898345467017533927 -4.4488534887414648011 4.4705523334932308899 -3.2029105150298637916 1.6957954637152430344 -2.870298771605044319 -2.6201820751883908578;-4.6149186279401552824 -0.31296863075948100352 -5.4337673346042016931 5.4793522666184646397 4.0955417300146823578 9.7547253372168203356 4.2431086786759610874 -7.1040531475112045356 5.0587437524622442808 -10.775957667192798795 -0.2604426085414742742 -7.8691672161816947906 0.26992668385461426883 -10.191575225885626921 -7.2964977621576325717 -5.5841352002446527081 9.4653041940782074448 0.45697789535990029908 -3.4293488604280066845 3.437705672497707976 0.58048166854273730575 15.451744229496540584 12.255173637607779114 3.0796780568140578183 -7.3753572022079811887;0.43317262801256706251 -0.032958216576189573732 -0.0078030475261049083574 -2.657744299364577234 0.39938100297564887997 0.15171114844093830376 -1.2456749282356773811 0.25652846351110719647 0.031624087219574333052 -0.16886158812372581428 -0.66706003224513743532 0.35545228064576278593 -0.10589296375002603401 -0.35766172442899246686 2.2349552586624907846 -0.23717789878242376278 -0.11033003886115499981 0.048391843230647005325 0.062504980365109860663 0.23428679160926260683 0.62395178336607981517 0.069278004054945621637 -1.1550786655601796848 -0.12256123660456945401 0.94674979267666969918;-5.3939250041944752923 2.1649782870321914174 2.3809709082031540461 -0.57481723146917629297 -8.5669901748593915158 5.6873432403457897522 2.196464421875103934 0.67538032291591232337 4.0085580462725145523 1.7545478782392258665 -1.1304261234742549735 -0.45297245779953365652 -0.54324740043001518153 6.237678269802515274 -19.912136894297727707 4.6682037770893289874 -2.2088596066993395617 2.9400680405782884108 -0.0090794779114191231928 -6.9706013061133926811 -1.7133238524993299468 -5.1698472933133166052 -7.6035024148367629238 -1.0044864963092809962 -2.1315011049345948813;0.4636377079582501004 2.2156616649294513799 5.2822114591049835752 -3.6012367849529072217 -3.048482649917516607 0.55839622220738904801 -1.6004017699538601871 6.8625572759100954556 0.69472613331103316714 2.1102135298805420049 -2.6045707910954587483 -1.4845526609447123878 -0.18599379452447115102 -0.25715024290040933153 0.030431337678183147805 1.6154277574045468047 0.13020263816304980531 1.1587076649727681144 1.6871126095075748008 1.9434121773543449052 -4.3450304883165653536 1.0115343669223546552 3.6037962314436713385 1.1571362356434471419 1.0213973281389387981;1.1942991249380023877 -1.9264778911673985373 0.16755715010319910396 -2.2461077321910636329 1.1420991522763626058 1.4697065408705525247 0.39368177233268586424 5.2383781249552763271 2.4126750895559352372 0.78830994072027960051 0.91726306309717497989 0.45812788200518256287 -0.20271199242320789291 1.057548433496822593 4.909256501060902167 0.30917004852366575252 1.0772364800687275199 0.90312593732420365367 -0.47828335078912342926 -0.2525888508922231046 -0.051106021695655527715 1.126549763860518194 -0.076336721216634054188 0.82624274925201335318 -1.0283454531501790008;1.9902399716878114155 -3.2436870153069419231 -4.0446521203296006419 -1.3716884513702174431 3.9606484585978556368 3.0050506774397813814 2.6979053197666882369 -4.1947122281310313952 0.24113825536195207522 3.7958700976382662162 0.79379978222734415283 2.103695413767778355 -0.11388565262762934127 -7.2458963095731512283 4.3728059217492125654 3.412237612559966049 -1.0693486741975422039 6.3493645220794689976 -0.15665373556182304871 -3.7858267784920700549 -2.0770207554481152634 1.1640869268809861392 4.0943095862769087745 -5.0378721645611390656 -0.42081909981706056012;1.5363141244276163899 -0.94687502269059653504 0.23395703062797046368 0.80773811197963352182 2.9002092577704439158 0.46560284379393779286 -2.1577424286623778649 4.6559192089431871153 3.1161441775916713937 2.059724312965891535 -0.81107470283872706851 2.3093997308633920085 0.19792683358239090974 -3.8908930687630918221 9.9636559245118689887 1.3396305968449784274 -0.29819975905937390337 3.5788239363806111371 -0.18901107717895965221 0.4646365967199523328 -2.1295092727285371836 0.094909802744777921335 1.1909079123644839004 -0.28279620598637444928 -0.16655089378050663695;2.0770743547168959431 1.5257221470526052265 1.0218003222542759723 -0.37963748326305185588 -3.764605934252131636 -6.1098247065402553346 1.1241247626729786724 1.0550572119630254875 -7.2897041392109391822 1.7313425819984522569 -0.31729776333923492837 -6.5675201800309936928 -0.059129905165954455004 4.7568831633235104661 -3.5292278069254954254 -0.7273020711357930379 -1.514327297351520496 -1.2568317154560837423 0.9493680095150837106 2.4372758686660094263 -8.4584546967115379346 -1.7018543337293676743 5.7629839218327978401 1.5709557190305141194 -7.3503853450435023831;-0.58645541385586719141 -1.148342798249416763 -1.1847537402583512289 5.9972887589413019782 1.274070492728071935 4.0461126457472076368 6.8497055027759312651 -4.0935456011781328201 -0.069154533410637542001 -0.65752000407172428442 1.526772646453286475 -0.41483335038814728168 0.054689365655927496546 -1.946794488727455974 -6.9752153675432095881 2.1474685657376064718 -0.38824205774608200326 3.6764717926201901932 -0.18237343441079989503 0.12216395650963589314 -0.19591856713254782174 -0.26727868044703328998 12.950481084746419569 0.26343583057237257572 -4.4995118292436915297;1.2965498657962690743 1.3826251731472105622 2.1137617699387050152 2.9164781280875935465 7.8858196137231191258 0.68086084171838034962 -2.6647765893662578307 5.3027038261334462632 4.6455703181680076952 2.2440374503037250342 -0.46224011335604636708 3.1697931862067068032 0.10874699926165364017 1.9046304162984817321 8.1362507704224409366 1.2874858306737668734 -5.1675147453549215015 2.1401084887324803852 0.746899324330704939 -2.6376073399925141771 2.1896939564072859241 -2.5737128177815420393 -0.56248411153226784975 -0.52614345526219652438 1.0437785551930642836;1.2937282585699740878 9.2184638752094034686 7.4731735302829278567 -1.0804880465463231332 10.018074334691627669 1.315162208040388192 7.1295232322705688333 -4.3624451948359643794 1.1832393425431673162 -1.2368464546404698279 -0.20080648478400700552 -1.4818966159035376062 0.24560629148039761493 1.0336802823212225544 0.18126303308349012156 -2.5188625805891824427 1.4546713787360587844 -1.9401246042354043375 -0.10910513065487126294 -0.78170118713060632309 0.23493262362047628855 -1.5463940856851017269 0.41097050067327373091 1.6778034838903823633 7.1882795674440007616;-1.1954609324099383372 7.0085779797339906594 5.5671718400162921725 6.8272661484659016295 -6.5556118780990333406 -1.6214165201654449078 -15.438432688716751784 -4.1623316421617291283 3.3145937859665637326 0.13366702966061813629 -0.7515219505535177813 -0.55999751751188298066 1.1863985241383461222 -1.2728489155534168376 2.3024746962247242266 0.80915779408003762896 -2.0123651373244739737 -3.8479635160564846785 0.1270528272575626727 -3.7013547562543860359 -7.4284957154031534543 -5.0833355949849723388 1.522471904187905567 -0.61209028977186152876 -0.29875880009745281463;-0.16179304971221095122 -1.1750331786764327546 -3.5636893755886993596 5.929242584789624182 12.780166412444913249 0.72539974031546439193 10.358313404743288544 11.400602966042200137 2.8859729423331330622 -3.9576018097969365428 1.1770078407840918189 3.5804965506441490675 0.22863317619155687499 -5.1625482738944148409 0.37629981037161858159 2.5169065847205089881 0.86209432618044457008 -0.1845381767112801441 -0.42820562384126736877 -0.012497920601228307627 3.5223733176711036208 7.5643865927486615419 0.83667556426212130738 1.0217971503172833536 -6.2384632864722364687;-0.054052146566390360527 -0.76079422657649931061 -1.2550338919090651135 6.995899742327704729 4.0693292864925201258 -0.39270454683714089983 5.0666628718926638442 -2.5362851159447004079 -2.3396599238816242483 -0.42672602208333637597 1.2735610330322815198 -0.84753289572683698783 -0.19685961323639630804 -0.67017820992169485628 -3.7965748023142720236 0.1856999979108763521 0.49434472392041495237 -1.4774697934888927353 0.64216970748641322153 -0.20626691364833840692 0.55922256726279206962 0.70254049688760800141 1.4676237418078776908 -0.75773462379433587088 -3.7668487588771388808];

% Layer 3
b3 = -0.69311326913395598925;
LW3_2 = [-0.18228944860873969036 -0.037992752023703606212 0.73953264814855712572 -0.066970354250883018521 -0.10878593619296227091 0.16301384697162951687 -0.21215536298722603714 0.21581436666234601884 0.078954295906962498885 0.15601661438962294293 -0.26901670095322843812 -0.18714133829387019636 0.083034152066476102361 -0.089808247081889364116 -0.1737378069653936763];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
