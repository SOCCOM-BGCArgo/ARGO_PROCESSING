function [Y,Xf,Af] = ESPER_oxygen_12_Atl_3(X,~,~)
%ESPER_OXYGEN_12_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_12_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [7.0843339518947097133;6.4635619656258569421;2.9883069590785331648;-0.97670418770880496062;0.65319699297804756366;-8.2523240067937528863;-2.0624535833503636617;-1.1935579126154911567;-1.1167259840855812136;-2.1014830329919029772;1.2227227023760376401;4.4605553974968108477;-0.0079863667707864311601;-1.8752723054473436903;2.4582125658599607299;3.172159086126266736;2.2425671907521578241;-4.0647735158328490712;-5.8635958464394297707;-4.8559462147703111867;1.5178593624752625413;-2.3878120243077312068;3.981552331411819079;-6.6015333896361187982;4.1256226405714375716];
IW1_1 = [-0.10065505384967583791 0.1820411818634768697 0.12619430294637587475 1.7124620116537991876 -7.3679012117845097407 0.96361391517228445203;-5.9454517889168663203 6.6518823053924753808 -5.2376269396711219173 -5.5693253011864625179 -3.2996894421331117719 1.8800993513653547762;1.9488185984874217827 -1.601317345463289854 1.6288309735959118907 3.8583320254298509866 -4.1084274701507439431 -1.3893504517880219673;-0.96099506145470336982 0.29095987710825060857 1.7803946208505863069 0.41133750567120291874 -0.61501033513506009331 -2.3601030204956763292;1.557079596798450094 1.2919928597283822924 -2.6955629340829929674 -1.542881467347207991 -1.0827466680784856301 -0.19587503994358362869;0.41901028053346717206 0.0012465851831887299513 0.75493409325149130051 1.9540478310362099368 6.1906670611721432707 -6.1125433076380781827;2.0773333492157473046 -1.332443774088135191 -0.54622962752080184146 -0.67223903911742277639 1.1518035096266001638 2.0123998498746775709;-2.2423402727962145065 2.7044693423452978998 2.5042579741983423958 1.5622595636254290596 4.9633138716800369039 -1.2273103709846260312;0.26157361806482215538 -0.20594426081733543943 -0.067883777324620114824 -1.7595188212995438448 -4.4496555411193483565 -3.1165697090596569119;1.5937764638042200005 -0.081123471584832462788 0.28982314279825843739 1.8461891519539788131 5.8547657161942634474 -1.4949647591239796363;-0.39494424215766987807 -0.25377114661483163305 -0.098331707406622267942 -1.8178504531303822933 -1.9412013290640617313 4.2947225482959625609;-0.68268066731783938472 1.8364151929966896493 -8.2312745787964693989 -0.7920789460531660886 -1.5233960604038592201 -4.1859581345441005951;1.77514853926477989 1.727506065962496562 -2.852556058336636724 -0.97799849468948008013 0.018471759639245650259 -0.24532886232341002963;-0.81730161550304192275 0.51331381310928014816 0.54032887014347585897 1.0063616162712478719 2.8568378893359174242 -2.1379130282721940937;1.150527774171998141 -2.4368072458930796209 2.7678159117374518949 0.70017274457353673167 -3.4061829469521671676 2.9607953132350308678;2.2170731794679130466 2.1283595158071828557 0.70866253810495627441 5.840111697838814564 0.86676147797736713407 -3.5244444774878012083;5.0904133766253956139 -1.1293155718423748546 -0.16886553136952064946 -0.30851012512176512192 -4.8464451808515169873 -0.7600378830411429476;-0.14015750710365756926 0.25057834113477789328 0.20971540205344946228 -0.25559336192417114741 5.6070804260227085081 -1.6757673126516503537;-4.864371177171405769 -0.48516810326298459577 4.3835814814560016828 -1.2421083800533656571 1.5800504770510637176 0.57795592344903556903;0.46538614488219331999 -0.31314086095675802701 0.32280298677917934613 -2.3775548623843305585 1.3785107282721196231 -1.8054291277496126167;0.70492171972127548596 -1.9679814362355552149 -0.20713459450577872967 0.054816128325980553737 0.72275155341516028606 0.81738087347196741739;0.2329265301024154855 3.8997018530950673387 -1.0954810696993126928 1.2004795937674037631 1.1471013526624929124 -3.1141605648426708974;0.12890847246088871225 -0.0074301233760293407607 0.34384215134074608278 1.1381153401748811405 -4.9220325402498152911 -0.13975171706889569223;-0.54161433059024954861 6.1484597773070959192 0.3014997426894978072 -0.6343206267390962827 0.23789445755545027272 0.93134254353092382761;2.284990191714472374 1.8026693341222854716 0.58574751253768675419 5.132975669465920987 -1.4418848068768166382 -3.529658373147772199];

% Layer 2
b2 = [1.8210798754002710531;1.7927817099464291584;4.8650018634579952348;-1.2924199581892665822;-0.50401219144628139901;-1.8018054889901515825;-4.6166250729111570905;-1.6792633111937924628;3.0840189106407946973;1.342064734856410313;-0.2623624021185006483;0.83888980983720529139;-2.3761526587478578598;1.8883966439581254537;4.1688328174589095454];
LW2_1 = [2.7036785479333205195 2.0535242618571136752 0.45914662986975257608 -4.7920980582668226688 -5.3764937475721357174 0.20161551646671002636 -4.1548196137874739975 -1.6517713679842849217 -2.9314028864566998855 -2.297240831048918519 0.045002615271125777363 -2.0992319508784769155 4.5893831203262580587 0.5125300065475620892 -1.5289791660131928364 2.4222596701902832095 -2.4300493062476498096 -3.3114977609676312653 -3.8162123448011424642 2.7756348769938465892 -1.9681079087057966603 -2.0582044488770128154 1.0679791038824080207 -1.7003164781488770974 -0.99113662571766358855;1.2964492179276234651 0.27285672588683002049 -1.9244824085450227269 2.0823190431475770978 -1.3131147232069766417 1.7006767480557207772 -1.4890778802660240565 0.5824236006346366068 1.3510779884371404425 0.69727204166216272263 -1.556870006494718961 -0.014055523060898553883 2.6902766962281088325 -3.6772636707477026619 1.840433829295323731 -1.689513475458574332 -1.1448051629308382271 0.089429869478519330439 0.81769181908464438902 -0.37345469180210977278 -4.8207808626542956176 -1.4324773257397398485 -1.8687188616838266153 -1.7678218513597132588 2.7289313332993230254;1.4678380052220703078 2.0585938934064085259 1.771698986491875738 1.1872835874318359295 1.858712622434766315 4.2780916773508304018 0.27619104089047430417 0.40241560561610084656 0.62947127380121148388 -0.61221955146518858282 -1.3085914086760250807 0.46303218842267868105 -1.752666655908175164 0.65912708266966624215 0.85738673436517742754 -0.021273787740954720055 1.6689534843330249281 -0.67864604294914310234 -3.1248461832309541997 -1.3521059879015508987 1.4652885858397903807 -2.2552990319028030086 -1.8093686420827062022 -3.1216370236327670717 4.8943573630352856796;-4.1903920694308389727 -0.98217625334769376177 -1.0086071848764557313 2.1891204989053636432 -2.2585432795360116387 -2.4876481867573261297 0.9974554813778943041 0.11007765556528587014 -2.8296331707330928396 -5.0380452322495363759 -2.5254501696429856317 -0.48611624907539924267 2.3271738097593970274 0.87380765107633651123 0.088848909923825630797 0.61286689210102585079 -0.82384149347586010936 0.03041400260274621653 -1.2987618468029991092 1.8281173958549865599 2.2929388028032655633 0.91118594806829478205 2.8974630021449265804 0.92536366710458028972 2.792250197063114836;0.88681042642025142975 0.11129478619211968793 0.61798260548368844081 0.098393274621002668745 -1.52631276204950872 0.0095734385817141109953 3.5813515816791130497 3.6289107308808410401 0.57573257203350003408 -1.5291014063147734259 0.90312133501136182545 -0.087964143653439103021 0.096984822127429592964 1.9561313861247882073 -0.33843388219032716213 0.71022388635746180885 1.2356677163518605678 0.3264482551073034089 1.4475606487110705967 -0.069471478839086109325 0.72769110390108082687 -0.30888201653169872207 -1.825216127518902054 3.0510078534875333389 -0.22605448389243645857;2.1175519661430750595 0.2171940001997380576 1.0044654534167993809 -0.45935054172582939769 0.87907233794058814436 0.48440140258632041759 2.3520042068051036921 1.4459789618373954934 3.3227445345409503119 0.011077087520009165286 -1.6288360485525799071 0.78310385925179659683 -0.84828522161723030059 3.2708616020774301525 0.083735272797208049056 -0.037816031194593272002 1.0620419418152022839 -1.911059934494163004 -1.726425411343190941 -3.4984287634138344636 0.45224354827519441802 0.46802759762207657435 -4.5104814489862476989 1.2005665143005637141 -0.53034754975583742187;-8.0690114983262333226 0.092423794472863321503 -2.7528313953671195158 0.70793686701734259703 1.3551341259076250534 1.9899214320090643504 -0.047366842349362281439 0.78966335665751818951 -1.88272623469090572 -9.3172284074329247971 -1.8755210402629678423 0.51001798502085315956 -1.4636985501598900328 -3.5668397014080430729 0.79209462056062684976 -1.3884885829266897517 1.0823568157382756905 5.3084536490454086177 -2.4832467630426444671 -4.3664394873330323321 1.8249958819959226641 -1.0466464942814963646 4.1527248424677418726 0.69375249664452653953 3.0102925342375561613;0.34045060447939862192 -0.77193467771955581735 -0.27128129902159214826 2.120830398353882984 -1.0718789549973353203 -1.5827965680115025915 2.1055707519558271024 0.51894045453397807943 1.6700239153764426803 -0.3371668207984006016 0.08092339169075309091 -0.13186604196346529694 0.69985920959239689143 1.6103695644592730396 1.0542718865579661092 -2.3116522129578211953 -1.3585695160873976217 -0.2855838185291072473 1.7215942006675000187 -1.1679462199608310335 0.53601241416554024077 1.2717804311766680581 -2.2276835575698030745 -3.2512341797825938805 4.4453262494217300471;-0.77833309670284123172 0.036143317850560678639 -2.5685962734207516966 3.278816549745424247 -3.3537275928004697256 2.5618309153650025145 5.369710747376484683 0.52698306020054741516 2.5051700187675423059 -0.086863122458837385698 1.4157598452378119536 -0.35845733880815766614 2.3741342397224030059 -5.7121660570847225813 1.1304036194138216143 -1.8697257482126636852 0.1222932565152712453 2.689261303362759481 0.6394031852016837103 0.69665857576839629317 1.4041703922778729918 0.82703546905504843334 6.1710359357388382406 2.5849302307111114985 2.8086783331083098325;-2.5542730625393073041 -0.72907609281206264829 -0.093558501450038328295 -3.2915242210089306063 2.6563147176727626153 -1.2598873854245964399 1.1233878511980091019 2.6648420741560578939 -4.1713074223989279332 -7.0930381843252305885 -0.25669361824628267321 -0.23304664513114548008 -2.309010396027566081 3.6180420803068757962 -0.12426103163559948372 6.7091284010983232022 -2.8916012339085281901 -1.2072448925436340961 -2.8949737413149216891 1.086992146352957489 -0.72587221311819960512 -0.74769789088964810908 -0.10023997925081140625 -0.090246857262300528291 -3.5437287027714581278;7.9466039506371641821 0.10117077922950037938 0.89893008247309047487 2.324258653860368895 -1.3634403897023195107 0.59529944220276198585 2.4265379177081900508 1.7612917560102714365 8.6720980230350495077 1.3385692861256521802 -2.662712786149701305 -0.16171540112854293492 1.4846643151659557613 2.2960641122398692815 1.6686265687335721797 3.3221805335402256887 -1.2153904516880473796 -4.6620003102829183916 -0.037918750516845955989 -4.3454223870809949304 0.07213857630753971184 0.8271394958510230877 -12.174882815809164427 -2.2092616113822423074 -3.4771519374857233764;0.80741320102288505201 -0.82623611669542185165 0.37310624162858113673 -5.8644080950938706209 -4.7189426577555044773 2.1150649178896308023 1.1358917900344509544 1.689197468318363704 5.248412837523524388 0.44826397844638538048 -0.93190821827183489834 -0.10641032601621047693 3.2240645262327434217 -3.1009488385399395227 -1.5608516311045221858 -0.10529726534755172451 0.96170552783456952906 3.6235877120233825899 -4.606570282451862397 -1.5358864240330893924 -0.90576456473656596913 4.3680909207091822566 -1.3013436810066543181 -1.0412105468960370924 -1.88871227832175137;-4.8586975586322704856 -0.94431440270501920686 -0.72269747593357502868 0.47568026947732416909 3.3659025707169143438 -0.87906887861958860064 -1.4091328838003986945 0.36557225038144131046 -4.6285149604625432929 -1.0787550248655588536 -2.9300476829710553339 -0.37832356928662363993 -2.9526695704746885873 -1.4544996776881906619 1.8302579597593868765 2.6908325748682386802 -4.0088365350544430399 -0.35916738650471274896 2.3022057015218746479 0.07042301000316873727 1.6863293275723152398 -1.8729430538199614009 3.9006529841870842823 2.4082646400928444663 -0.56418970375047650112;-0.43660651508359160644 0.80607512003665549027 2.4139813222386452551 -3.3521368951574039841 -3.386223014933743336 -3.7685180412368901592 1.739922317894760484 2.2285079981692796913 1.4119874846994053819 2.9199854285336903637 3.918427454028444501 0.10360640108122977365 2.4192874902693080053 6.0641524398281685393 -2.5364836721853767365 -2.0648665025870602818 -0.56180807258544529503 -2.4219111913316835327 -1.9755260270811898504 -0.42112252995049553883 -0.99627978572438757876 -1.927614543614524889 0.75414896603023007238 -0.20081532720174899431 0.73200691042664478569;0.9084900908099462491 3.078808123188347512 1.6443214125226570665 2.5489771331612671723 2.6373787266290977804 5.0575798438239374377 2.5631290665461397005 -3.213956746926271979 1.0790053863111908061 -2.8626428511724353321 0.19509255628323804443 0.10379466695965490486 -3.8090811619456377279 -0.17620255686625227454 2.1881429540799772759 0.36830883451516693849 -2.6131515397891611485 1.9032460304085982994 0.092431981026176751604 1.1822301128536751857 -1.6876738222660703226 -1.3773516107902223915 -4.2625054143082463654 -3.2588060089813262188 -1.1288316723731495195];

% Layer 3
b3 = -0.40403596942812791681;
LW3_2 = [-0.051588383812910677817 0.15479828942590337371 0.66532493537986925336 -0.11708693781137570478 0.40531120579532459169 0.26682782380175085191 -0.16742445448074519398 0.22778357173400742841 0.11447578509213918174 0.078530835398364251532 -0.14617435585830482192 -0.097415848115872033519 -0.11730939646978870428 -0.066031209934346524193 0.041579475521391413839];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
