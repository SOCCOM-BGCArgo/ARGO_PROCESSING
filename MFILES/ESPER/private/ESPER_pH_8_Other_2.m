function [Y,Xf,Af] = ESPER_pH_8_Other_2(X,~,~)
%ESPER_PH_8_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_8_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.6918554568179899888;-1.267345034893713418;-3.1937943603916023605;4.2003168917293383089;-2.1844958971971997208;2.2898637383935129819;0.52203859257659812609;2.2484217352347406482;-0.79421123499455492656;0.6127201491284166579;0.69693110425736948255;-0.033850274767186348812;0.22655642067366804637;1.6772354438700878276;-0.90021459530247127656;1.1184214120028361794;-2.1546257047800985163;2.2169495289330165555;2.7535246391061916071;4.0799921271474230977];
IW1_1 = [2.4398597548334963747 -0.65155604627258156825 3.3853957564218157827 -2.8197676734396246445 -2.7437993737915236103 -2.9260561922852064143;0.25406515384545141911 1.5590292863065284834 -0.14189950241506793516 0.52254928058764815724 -1.1229610738492521449 -0.052997022004472212064;-0.049560911190224411771 0.32043966156063791173 1.1355330027874073195 -1.5769849551542607369 -0.54721873460429149016 -1.8500277123306325677;-0.85661951101039612855 0.20807458754829002978 0.091129578160832974687 3.7948648287575967863 -1.6255098835116219558 1.1904915459238891717;1.7287397356699312212 -0.22701001291562791784 -1.3434552441858138572 -0.98362140612932935646 2.2166386043850776488 -0.81650341527677605669;-0.60219711111204099474 -1.2177923042648843843 4.6818981345827577201 -1.2265891824704406865 1.0818406701042839746 -4.4673302591400849693;-0.15283679760774387946 0.56883392097501694895 0.64475239377520832118 -0.18905918675841798526 -0.67623200345613598827 1.8780531310630621533;-1.003847947704862742 -0.021572267164608614071 -0.24724389184176062684 0.8474490431264232182 -2.2373617381195618492 2.2307656367844908019;0.0063734159191720244145 -1.1531918114282433407 0.14494526198272161821 -2.5016645483783070958 0.53522476793008477713 0.60367024826615600652;0.33261641035997913107 0.45092713396823841387 0.13832134902880299787 0.26285453841850808798 0.00061130839665765514951 1.453023550823746346;-0.0085282078591926140793 -0.25458851935722370818 -0.10788743896318034321 -1.5577964505714239074 -4.7994319151803619405 4.1101552305247839314;-1.4981849901922901225 -0.58101878251150662624 0.6575288262953261631 0.58061272162561905485 0.90289183939821482383 1.4135560169202983083;0.17584301373190058815 0.46374816172987604057 -0.91307789154319507485 -0.56119582007860291384 -2.0326141269194462069 0.8479239374357998571;2.4119986638429957715 -0.57113778709370188746 -0.92243457590376909394 -0.029096792036112744534 2.3253419132043693374 -1.7740648724583218954;-0.6272841280304666256 -0.95772902938416393237 -1.4935909051524105529 -1.7498479365534314045 0.077308509509660547354 0.77705888122122723782;0.54962961210380789634 -0.55431580158504301092 0.18578907883299963788 0.16666524540706162405 0.31673450884452675202 -0.15848973474644051374;-0.11695264073825853424 -0.11778887387468851833 -0.25304160941629899595 -0.11641082290770367325 2.9358095230917102825 -2.0748024108798763798;0.31781304216529293605 -0.13872275875264833411 -3.3932903053290144335 0.96346780511544227732 -1.158330784323112761 0.3861753314344805732;-0.17835312855825807832 0.59127102386041674453 0.79427623721512874422 -0.34321446615945394587 5.2283848991363441883 4.0367063235609750294;0.53830449391383250468 0.27525818539073548807 -0.87050985241335798737 -1.0777881802158868485 0.92468398595149137176 4.3602457468884159297];

% Layer 2
b2 = [6.0501551651132210452;-2.7240002442729447374;12.47230438171656175;-2.3989479640662296767;-2.8270667394639943382;-0.11104938756562149349;13.717690960635774644;-2.1548161351293058097;-1.756922031090758729;1.6435313344415531933;-2.221748452375551075;1.8470783947983744344;-2.8120465723573118133;-1.1280554413553733895;3.0869162415268176503;0.3359373884586027148;-1.4412202066246908583;0.040967660501290970032;1.8484316990595250907;-2.6117810343212761737];
LW2_1 = [-0.074475884810819653614 -0.30380269396810094529 -2.6760679314400204198 -0.019828957747187340999 -1.1997511414901924631 -1.674046764114106578 2.4202541166037030429 -2.5265105006051742365 1.6670526500081022103 -2.449609213080556458 0.27264453556408990709 1.7859071237925039366 0.9986722585015798126 1.7603189601124666908 -1.4635729112274578068 -1.9366800460903750292 2.9133784130028055337 -1.1287462954374443136 -0.27170628952893438601 -3.9308407703982832793;-1.0481441371236805971 0.0083805774172713703996 7.76961445984743726 0.74351182035291707439 0.21685190389987615833 0.67432158350191762075 -4.1066661406953688385 1.4333773163901279979 1.259575881440322398 5.7334893224068030904 -0.6674629508432869951 -0.36025884114981920892 0.63116918112103059801 0.30015555417463218868 0.24985778934558330877 1.2406438907901857771 0.27610534519848339841 2.517047681822712768 0.12974675200603585923 1.7635033993729145596;0.2339228903379218516 -4.0879349466344860886 1.9618617187923832468 1.0567639593353932437 -3.9101178070917881335 1.1460298499790686488 -3.4148559094781045786 -7.0662961329717939307 -5.8069386365076072209 9.1629511796015528091 -0.96488195906561124993 1.4933171677112642151 9.0369771814586190573 3.2289915560382289605 3.3949865693055989446 0.67135586958522508461 0.89955772832843672315 -7.0675667028300201977 -2.2021930960582527526 -0.42497869840821733689;0.011561359769039559683 0.083889405478880296751 -0.64820871996649465085 0.2800922623069559414 -0.21191076140644246606 0.57027525648772114941 0.59045521023478853007 -0.54036538121611188412 -0.17220316580351624491 -0.45487732832008720418 0.19112655005090758986 0.18904286856534191497 0.09158015877870168131 0.12264443561102272851 0.071188586663866876281 0.023998506970819410283 0.43609566791442716527 -0.53447966639929866961 -0.067147807883907797977 0.027026103563690288129;-0.079274781676879665926 1.0487037410075186195 2.3464241457735219853 -3.7953602154096883758 -0.53202444056237829795 0.69380676936621343831 3.0353273383892482862 0.15573943819338528782 -2.3245325591184888836 -0.73673000707239677531 0.27388118049058435277 1.5253688750330582913 2.6840345525719717656 -0.28039914238985269579 1.4766121996175984865 1.8118724044359117986 -1.4198350845462746062 -1.6401877375644204893 -0.54763604895565520803 2.4409864683783992767;0.30583075590455233161 1.1565755308673779655 0.12088062543986624608 -1.206717629802673164 -0.19173560831266889259 -0.22830282486321040736 0.15684813698452676478 0.013203171764968199553 -2.1570303600346734108 -0.03997530179761683844 0.85965655383717964888 0.24301363782090729115 1.2732409312389156852 -1.0794660267034938972 0.25510100062517526709 1.7400791877617134418 -0.75147218894920231325 -1.3060747360954672036 0.4242073557703595621 0.40739348205312403417;-0.25273972264905247842 0.40758279663201085752 -3.3780921912232471094 -2.2679258654882903379 -2.5280069059002125975 -0.6651900582363678982 -4.5644344829795526763 1.6482767419908572748 -5.7659784057585028449 6.1235484704315190641 -1.6432450917204262097 -0.92054642275507658766 -2.528829849482699732 -10.825308604397379852 0.32497806047185590073 6.049196844389026495 0.16243194275185574016 1.3384193526108161265 0.35608381353272944292 -5.8176512531719248855;-0.23032405021253066213 -0.42320850384113478659 -0.46526765373320655428 -0.51352865405053971237 -0.34757507561271905328 0.8780888051242636827 0.83981457018354110922 0.21457777144665760027 -0.25890320644943787265 0.73974074005049672564 -0.11667176679974075593 -0.72987585184981584874 0.10744514012330157182 -0.30815985650386334971 -0.057634509893996016539 0.1877718281610024631 0.38439679149326505536 0.83859040858430833332 0.17404068459787308543 0.11630665653698792072;-0.24227628505039619511 1.2652011788618147126 -0.11066200290181468779 0.15902090244804895081 0.44294344597983020817 -0.37763125843630152012 -1.2265085552650598633 0.67443890655778904186 -1.1117925262809327247 0.0071245291598890274701 0.32095940515952198213 -0.26935633013186299767 0.64244223598898075878 -0.9620241538902150058 0.40034486685420211938 1.1894626844698228396 -2.7955727311843774352 -1.804712004192262409 0.0054928353072877106333 0.58481380602931809509;-0.0026837433861643901142 0.040424448953692522502 0.61142313491821120852 0.099832147240440025082 0.11006285073106066019 0.016582049233297570245 -1.1084077341944680306 0.43684180337031169872 0.3337721385680498809 1.2166329571857028569 -0.03793104985717450639 -0.095722446678052436342 0.1945791810954292933 -0.068637135964939477439 -0.24745980575220463682 0.34675654584954057613 1.5681882854204256539 0.69236774000760825665 0.47858110366245437683 -0.59063422854667479989;0.60290254075350324658 0.021273036147464792489 -0.37792801117513391551 -0.46544497225290254461 0.29086538807283679464 0.68117265131061932593 -1.092952500332211585 0.64885727846926921636 0.017805166188152345141 0.66779360187649972058 0.43277672013682499941 -0.22669613509418995445 1.2794320979570839025 0.34709220623572345499 -0.57654872162601700225 1.3131822600625122632 -0.37686479077950185701 0.94696996146153278318 -0.38603750758826332889 1.2649461778761963426;0.046618369895038036521 -0.0057486249056770350255 0.40293677023754798094 -0.015832267930894976249 -0.082512786808538921002 -0.19222275773398556087 -0.87693758717683889525 0.21966836717717161398 0.3193245208656250167 0.89498982222777734297 0.017175813382230346177 -0.029999734159861960597 -0.015586849461517822066 -0.024536732374797927403 -0.34789253150108856438 0.069533136411001728039 1.3056475645027165733 0.62471319849093531751 0.3508027576932612468 -0.58652823477143911646;-0.11137037727364304529 0.15365702889207574766 -1.1644135273195448388 -0.060849312439206465486 -0.32275280474278650322 1.0398148719342963364 -1.2172096429774417192 -0.10350624866522124823 -0.051604992472661537217 -0.35958951682899081836 0.11909861576788252635 0.052708023448670066058 0.38400207720585954885 0.52773652197774612027 -0.25492595850923222001 -0.16938147327621497218 -0.90357292512156495157 -0.76433071804190755305 -0.64187149526844144987 0.80380282518257561986;0.070222084190241243484 0.40854654432719061941 -0.18246869232213339118 0.67890679365192441175 0.16203611391894667815 1.1622596065326493697 -0.82205668748561400161 -0.24918883354773554983 0.092113036009145415894 -1.0754340543569400612 1.0025643502373577931 -0.21997653348485271541 0.31451469160597617103 0.65728710391597977569 -0.39809486223974333008 -0.1205217385171656469 -0.047557354747819156893 -0.59151190440940404347 -0.44221739736116993935 0.50053895465278996912;-0.2194915640302290416 0.30255439058515387618 -0.20492739598841536175 -0.094831969976500493646 -0.16833054934660698909 -1.0938086647489320136 -0.59868043514455038245 0.82257801522436069241 0.45604846994161363227 -0.88389740840573483016 2.9694914529937364023 0.1675933243799747896 0.71139767784912455451 0.64567819496853573469 0.066118468550881201451 3.0935167038567441544 0.31826580695254069742 -1.0689328942433120595 -0.30917798303836097062 0.29314996317317432162;0.45734816959706320327 0.66771518639733118405 -1.6771148050459003809 0.25435799039129219912 -0.0046513096051178058621 -0.13685564517285897512 1.583107889749570063 -0.56758250427271927929 0.48716853072208415876 -1.4850426306078929883 1.404622102731118316 2.1821956830196147514 0.13723928123192349893 2.9322331745356660093 -0.94954521400136682185 -2.3542735653967064025 -0.83373568263835684533 0.66794682023848939156 -1.6404946435294143203 1.7151403003147840387;-0.4153031571989829196 -0.033474127955766860842 0.70268214578923282598 -0.15365772859659915239 -0.14222865706815598918 0.03148402145298115351 -1.2283673745800356425 -0.08590506363875831386 -0.014364974521665737489 0.17766405133740190148 -0.42837361161455345115 0.4220839103968480055 0.32083698445947789191 -0.17610440994378628865 0.21963742192961166477 0.13568008728648883743 -1.5152669652862698069 0.04916813041723853972 -0.48653025367788155231 0.55511275520328173805;-0.10401625587701870956 -2.2353130363333395536 1.5585146897405606214 2.6879757450831278653 2.3919081445661904972 0.36138992332934583018 -2.5105034134526551526 1.9578417525042686176 -2.9423297825346454992 3.8409477332957302487 -1.4034478658271227758 0.24657872264928598627 2.2840897695588098237 0.26125418924848908819 3.7094649199279832175 2.2049239578228450043 4.0348733728979224722 -2.7698443658285558655 1.0793031531755923336 2.1619967954653338538;-0.16764457439026766994 -1.0629440536569605413 0.55728741819276428338 -0.27770470459551327425 0.44688497787461561872 0.44448755244105664364 -0.66703492469403458109 1.3317699757314973574 0.39049713508320521571 3.7391398096110624039 0.0034254061024355610988 0.064418885688827962066 1.934278114073797239 -0.039336026208217349243 -0.17057091393519335787 2.5657562006802301369 1.7507463259426438995 1.0173857206708274425 0.0055923402499938133087 0.47511132602972661054;0.24837927018139871471 1.3541175933653835095 0.92472222506207701898 -0.040406211738548594714 0.10723371955493729568 -0.17786318320486210753 -2.0703884008172117603 -1.7906355418637560639 -0.47393820052570567736 -3.3607601932638133668 0.28381286795881832674 -0.13512082597032881726 -3.2316477716555667143 -0.40477560630864145574 -2.0416867396189450901 -4.1722577895956476368 -4.2316740709526809994 0.6384153775953961274 1.0088373862507689083 -1.0230398011805836855];

% Layer 3
b3 = 4.9846936544857713969;
LW3_2 = [-0.24383689270573419283 -0.37030756566996370083 0.74602428528174358213 9.1455182729219828275 0.60454657462485461572 -0.98015897140217689287 -0.29698639989806197015 0.76658201753785348842 1.0688475099015950498 -5.9428206864631007988 0.40085283315201192256 8.014256952614983831 -1.8130692771242149508 0.88762583466954703137 1.5864228844687637832 0.36017362927887025537 1.5802013575024340675 0.28141322298441101557 2.1968564783083222025 1.4660004196172664592];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
