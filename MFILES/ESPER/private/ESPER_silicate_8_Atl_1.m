function [Y,Xf,Af] = ESPER_silicate_8_Atl_1(X,~,~)
%ESPER_SILICATE_8_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_8_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0604107502911417];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7333317922535509403;-0.77660371550260787199;-2.9239092236501695865;3.8968418480416029404;-2.099851939966839609;-2.5628353314681713293;6.8846210647661880699;1.8658466860930882358;-0.51737099225315963391;3.7920066511140340104;-1.9136276102795364285;5.4491126685311588318;-5.8350768125345320314;-0.86410014624839837083;3.3573001792156165202;2.1200137960600162756;-9.455864134672701482;3.4272813229825476178;4.1960296390469871142;5.2313495803418508245;3.5362545989504692301;-4.4767383682146446588;5.440226266131137578;1.346525038927145479;-4.3693014278472901424;9.6684653527536283946;-5.2827672960038265515;1.8410589522588229894;-0.88152180272446045706;-6.7659111598740153681;9.5800145917005110618;1.3736434116283160467;1.1805329403170836677;-3.8955329823648630061;-0.73751278783001272821;2.5162985146997551844;4.5918771868790688728;2.2145170077642095663;4.8927976721630015433;3.158221278028453316];
IW1_1 = [-0.9799770198745254568 2.0645542997489596537 4.2903264271746310854 1.6961837106058201829 0.74288666840031014615 3.0234515224862001936;0.28187044740730771153 1.3401561702467543746 -0.84571367230815408522 -1.7828458878746713534 -2.9155739096057673443 -0.12238913933330289319;0.54124949466573135659 -0.21834579482414187557 -2.1862991363350445795 -1.7781983363826523448 0.81174970145531533117 1.8507778106504313431;0.30882737282690919667 0.072165764619362096632 1.1069053499751460024 -0.5862745460848644008 -0.034876030694718486436 4.3852350181105741456;-0.58215569649030618482 9.1697364553338420734 -0.81041584645534059383 2.9217926699973948423 6.5849228723154000775 -5.0033900566035391932;0.090520670661177027316 0.088693547525207111493 -0.095101762291556923845 -0.86085410148160734778 2.9252746775997993112 -0.2176227170796287691;-0.27992379834470132449 2.963142660358057956 0.0040926861868392991339 -0.82397619879108752183 -3.5535902858883225974 -0.048191125288152468487;-1.2078678943255920508 1.0887059693456730969 0.65981801540282825069 2.9086980863243852014 3.1636500317341647026 0.29238533752915135677;1.4010209646333029454 -0.38793111203142760512 0.5036765429732710242 1.6905791563576526571 -0.86330791488420866031 0.39077581185388027274;-2.2956233288935607995 -2.2444886100678180796 -0.79821883099932811056 7.2073531387989300256 1.3333918769083261679 -3.9056703003941706243;-0.56208631241215634144 9.1046116015655034204 -0.76940162550768709249 2.967033690231200449 6.3960801244028475665 -4.9144227749503679448;-1.421091057820412118 1.9025115539802130993 5.8845051199175948398 0.71778407871129845663 -3.2967589480390007139 -0.5200544941512246222;0.93071556299829072412 -0.42049985211147000719 1.8274287172641485721 -0.61424885339349022395 1.8848788858867209228 -0.30498881681388206877;-0.064924496111753215999 -0.058832721021449249643 0.8033200746739102005 0.94839354643523965382 0.65434842233688761404 -0.80577429586191862132;2.077490206100506942 0.29551575252808959249 1.9018874686267981389 -0.10967704071498352025 -5.9740151156733549698 -0.54821213641659183313;-1.468316403063015807 0.54757448971978162078 -0.63237249558952912665 -1.4940074483855732002 -0.94676608192066058489 -0.059503515172480175854;0.29091436771752021695 0.097523790509178587271 0.98750703578836118712 0.90395529982439559724 14.308391264562782652 -1.7482145590375637312;-0.88269308623801356894 -1.5445909698300965829 -0.31575722694973218374 0.9259376497999619593 -5.3190283522160486385 0.47804816059101601367;-7.6438630463439585228 3.5936714969811918152 -0.48608773861214416012 -2.2862576915492875962 3.4609385564861461226 -1.4746972433275480352;-0.66794116625835242562 1.1155229263877624035 -2.204851669205430742 1.9049854473183309711 -1.7024319944448471631 2.5101130075710020861;2.217085724741734154 0.2965478495497147482 2.0021002796033311455 -0.18378541258510908141 -6.4352142199491124686 -0.4643524591820136771;1.6708524954975449983 -1.7126022299116188119 -6.5258056711582437259 1.7129714471656087849 5.021968615614634146 0.56259358194421349442;0.079546693445700589198 0.14675872874613099528 0.59527710068223294027 -2.3698398545266314841 -4.4395873533956322632 4.0506700853127037831;1.6233432723777767581 -0.22327230822783378228 -0.32303074808315473954 -0.2970581818862458312 -2.816558800457032774 -0.7086801112712609596;-0.29433777843922942496 0.025915269034033849849 -1.3912315830388655158 0.59832210272750607771 -0.021843435541453896931 -4.6158782433024763137;-7.0055025850199497128 2.9198970023148871356 0.26754053155677748332 0.65747617296806126763 -1.5937496925806480252 -0.10627104474929867373;-3.9462680971658534723 1.6930025120553409135 -5.0773274239405603581 2.1446059093687144248 3.8291593443161016097 0.15048767097147497385;0.035251060967598557561 -0.27609758620396418483 0.0740557416199850993 0.2946051645503994787 -2.8053285119926285596 0.23865865903328259412;1.0235688156716498121 -0.94567847564456142262 -0.43079999475136876441 -2.2039137418259961976 -3.33218930484280218 -0.062662511276948801298;0.98839743396433310529 2.2195261624605402417 3.0213309241503454317 -0.066100952076634675314 2.4211734555818100745 -3.0422284361879587955;-0.31277363259803903084 -0.088832194075544324008 -1.0143975769506281548 -0.6686323372192541914 -14.120851794070002683 1.6996889237135517359;1.1374260478103241923 0.73852468215506539284 1.3825298491242830057 -0.95816326017060382547 1.7784355572053072159 2.9440076719899064273;0.21831537046552748627 -2.6603740033912264273 -0.813759684246356918 0.085776039369523396361 -5.978515746400145936 0.15540270463051999994;-0.77546770782553464674 1.5975159148564745948 4.3384399116036940214 1.3312121229289828328 1.3069498460429747055 1.940198636548436939;-0.13941320063907150506 -0.080570246140882970098 1.0213272656824632367 1.0116260523071856081 0.29915469325452581639 -1.0506505392933183085;0.14496963094133547001 -0.92733490800086082473 3.3733202504220760609 1.8234592511746419152 7.2477419460504020066 9.1554013665800262345;-0.017138465132527504892 0.18841415611533976482 -1.4984615110131824789 0.29670647333709143645 -2.4065901233627222666 0.44294928614232248476;4.5854938126213378169 -4.2309644824654819573 -3.8063728266991039284 0.53548295300750292647 -1.3457061796584053326 4.3645810283727577428;0.31306396667132724287 -0.019299154393496373294 1.7513104597506496951 -0.69689925459230062099 -0.73645685319719045303 4.2288737728301208918;2.437408542084904095 0.12709365120677543204 1.5378654975380647851 1.2176649587676486863 -4.3067775933875589445 -0.99929533245409618569];

% Layer 2
b2 = -2.5091498949788948458;
LW2_1 = [-0.89869144132255174284 0.4927448666707113234 0.17594728270027124029 6.0485111500601513868 -1.8045226312614779385 6.5393316714750655549 5.2077530108131755426 -2.1443490828695086492 3.2230712528173479647 0.022380217155907863869 1.8212585601829587301 0.14342538024255474527 4.5162937168509342811 7.5120890961210973202 2.1680439888194236175 3.4040729387546790896 6.1351894780628484227 -0.91798091779725254913 0.18296037227105252376 0.1271718156852592041 -1.8051100720811825706 0.15313333650491423032 -0.40900170580920175434 -0.402229525030783297 12.861758374231740731 -0.29584889545848042092 -0.17552427817901647411 7.9748144219366432495 -3.6035595697558524542 -0.30490809324491957577 6.3346377828975750646 -0.58437640351633735047 0.85035339442199797677 1.2807503095530001769 -4.598340875171138542 -0.057062981740371415684 5.1064567459619798484 -0.24608804791820937385 6.6615076546884806064 -0.17781197745786794795];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
