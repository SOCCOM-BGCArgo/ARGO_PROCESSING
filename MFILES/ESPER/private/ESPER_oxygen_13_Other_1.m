function [Y,Xf,Af] = ESPER_oxygen_13_Other_1(X,~,~)
%ESPER_OXYGEN_13_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_13_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [14.237006201463573873;-25.669032452676248113;-5.8097067546276113248;-7.3062848700131306501;-4.6837760080769985649;0.99390825853777176047;-2.8420357038650991832;-4.8973190180991856835;-2.7030218703659967261;-0.48775888967315805811;-2.225181833280843513;7.902458823446110614;-0.49695384932597375105;3.4862989783365834207;10.725420002740770897;-0.90614239371220128838;-7.2864154358894568375;-4.6778388323771595836;-2.7860164377130618441;-5.2690543455090681491;-0.33049010528439420886;-4.0176786476888395327;-0.10022184950240937973;1.481099709935319142;-1.291304195397443122;2.3700926285484311684;-0.65883018702948170642;0.33331199616021589538;1.5529586552397744992;3.3190746750578052904;-2.1137575482708443886;-4.5870807094874228582;-0.86068242667009908775;18.834594102122139248;-1.7894570664852207376;9.9969120191738376491;5.2317513764303607005;-2.2618804221552561984;-0.61445142633695482015;-3.346126501003373388];
IW1_1 = [-0.6702296372765528254 -0.55005075204442088754 14.771657633062613257 1.4636197493416109872 -28.588587361041369661 -3.3470495448396997418 -1.7342644380485596756;6.2983496285216444832 0.54407456321627489793 -0.40213931018540327589 -24.786756955156526772 -10.749557038728978497 3.5904975958034612837 -9.4118769140330069689;5.2322284024516543255 1.7593366144264117601 5.9117299517901003014 -4.7617774574333422422 -8.0847694151251214834 4.923816013885865317 -3.4714387733994205298;-0.10794484881050962766 0.041153603049369234801 10.250296989891705124 -16.658637738493982994 13.009948031327736473 9.8791645971430650519 4.5476454052058556954;-0.10008502366231676606 0.45719346807518468356 1.7099370230987824826 -3.8336747031363231919 -1.8376758043198968551 0.75080038709971219646 -1.6832930085618349469;2.2789710258527726694 0.86145894803502931492 -2.2511638200701464818 1.8390492844892563085 -10.273122933153715053 -1.0887730489457063676 -1.3740721891928970866;-3.2495604096790113857 4.8585168259690174608 -1.8614543863656671796 -1.002254417321505553 9.8536341348641105498 1.2914205698763443486 2.7522689536674889155;0.81466399129812716584 1.1086854156501093627 2.155190612219978874 -6.8473216842686452921 7.8491526688880313145 -1.9391512542879822956 -1.1962210639104917664;-0.0032030778511710098974 0.020257292380761099393 -1.8119930582861099033 -0.56027943426704573948 -2.229843740150774245 -0.81837739154378374984 -0.060593185774543291411;0.54439978456869131396 -0.14554611773501127669 -1.3457971913588786528 -1.0510901943977759565 -2.4037415326769129287 0.15828468502362333381 -0.20181403032756145555;-0.04740820167504081889 0.068981942959989606123 -1.3870615156697239101 -0.60981284843936789386 -1.5308109054259919635 -0.66958254948697315534 0.096796595832339127341;6.1044978720783271697 -3.0708406575170066333 -2.0519177437169444644 11.999378923076225334 -18.453640347636891761 14.839595457746582952 -26.344249289395200719;0.56143026035943266461 -0.1266008118887260725 -1.3592004836514310906 -1.1172693647954350382 -2.3260032211848620243 0.025633840436484648523 -0.080637236453093022459;-0.13386686428664734683 0.87474911127364507468 -5.8638687363425470167 3.6043543032193947617 13.299964971288190441 -13.245118257544818974 16.549078921983944923;0.40607142365715370724 0.32161952708938701395 -1.4651820455265622822 12.400654095325565507 -11.580814469288370105 -4.7688287040998265098 3.7830824973115984022;-0.23555116619356511465 0.034853597561704134644 0.101681498827104283 -0.27308037057021283811 0.54799528804257668924 0.73352998752711318087 0.47940922768357158157;1.7853618477267274578 0.48629798443442495692 -8.5479879068315636204 2.9995734232868365154 42.185022081509423231 13.018459837356441966 6.206042060138564409;0.81230913344655009123 1.0867920081644675268 2.1486998361664877422 -6.6331238733022139797 7.9985171558564038818 -1.920074868731871609 -1.2029377205612745705;-0.40507637510383098789 -0.30870692310116032431 -0.30346693823470655138 -2.8597058102463188689 4.6135948147270386954 -4.265333915059033032 7.4399477934817426217;-0.46751319309907429789 0.20489054577148874126 3.7176801479756718116 -6.979756900628194316 21.950259580624859268 -2.7859469997780830219 6.7510012859448540468;-2.9148364959803516605 -1.3306421511788921741 3.8005937923118580102 -2.7266704284794016644 0.76638300518664115302 0.052653438001693544934 0.19059245421355683336;-6.0526577065055855442 -0.77145569505722011439 1.7507321242958822083 -0.21829140356891002517 -2.6461207214219979456 -2.3669324005682610412 3.6283881376357585147;3.0529500272549552342 1.9921409946685104675 1.1812043867601060843 -0.027909917235026303339 -10.82374147273291598 3.5730394257208839548 -3.1492231578890890198;7.0868312005342719573 10.026958482191885125 -2.3450761932532979692 -1.5148997544052094089 10.661481770783558076 -6.0521299110426971524 12.001877334390998797;0.17399517632130609424 -0.7091109160547656165 1.6566047947756821213 -2.0965091801329487353 1.9571407391048782909 -0.8255639283668109174 0.41935990617456669893;-5.2992708503327285996 -4.1645819800954102519 2.3486958057868840832 -0.57498473426177265644 12.251650055110635762 8.7799453528534918689 -10.449812232590625527;-2.4648671405248734345 -0.16265025848284167531 1.8116251622949346434 1.3090030252328384019 -7.1839651674723246089 1.5409765316950474467 0.98657450521891465467;0.11235316930486596854 -0.49642307237017779808 -0.95778572552226859393 -0.53696308914705814797 -5.1586532381437057992 0.59824502617253294545 -2.0606459953233340343;0.078620861314370155126 0.24911362821380739208 -2.3398457470599050012 3.2845105764670172732 2.2927199187930793478 -0.099732962458293369923 0.85703525972667504718;-1.4605864118152738218 0.89169066830772503174 -1.7217851338626495306 -4.3451618597627534868 -10.655737819892530993 0.53806009586187297788 -4.8558127033568201369;-0.27577680909590279734 0.26450831058248608363 0.18492285349747547563 0.71251309393285300331 -0.0087062455793041875624 0.42311784251695361281 1.54700772396667241;0.29375426129731418978 -0.1183231020398617106 3.8026062772131297152 -2.744309927340570443 -1.6938608639204457695 3.4287384352493588402 -2.2473697278164790347;-0.2147232704561290173 0.11959464684379403354 0.082631669155901477097 -0.053109349809447169155 0.48048976457884984281 0.49262641992366951182 0.49252748703843224343;-4.108117315774891587 1.1463188757756299641 1.0657958756208132378 19.671197587354509295 3.6780030899705162817 5.869100488020216666 -9.528432096046538291;-0.10490545803745704445 0.13058942238519033463 -1.0686322067519040679 -0.59681206934379282814 -1.0098869708315101335 -0.70701040380386304118 0.3120789179144637937;2.5125846979842036966 13.642403045154845032 -4.2244028317998747468 -6.7329627770484599125 -11.370821801754086522 -2.5167146626841798707 2.0688198475944128418;-6.5784969315050449978 -8.203331875611935331 6.4983899338631836429 -0.84986628293341959228 -9.830269914459540459 4.6757346098960894665 5.9332503060635986003;-0.20199945725029258559 0.283295112918221903 1.0575903308440310902 -1.7583087756547515212 -1.5739551541095961884 0.74030568518083050833 -0.72438296936510659929;2.7244913631119089814 0.94885979546316179256 -2.150273883242992401 0.035458226936642217586 -11.757941843834609941 -1.1680418965893821781 -1.4687377754004005137;-0.15287936837617746577 0.31099118963725974618 1.3393021222092906797 -2.5863674978876405319 -1.2644462588076483822 0.58063241724677550071 -1.1968242691821382451];

% Layer 2
b2 = 0.7988816549496958741;
LW2_1 = [0.099721291273667730937 -0.023892934883372525523 -0.034483901415744359908 0.017933520796821485199 -1.4928201002628795901 -0.22113533825913309072 -0.029446419615943571907 1.9394547541184539163 -7.6276851328972217203 -4.7683505616698340646 17.040625241257036038 -0.013065883424655767506 4.702812910317459405 0.050716943722357556157 0.081239294401065587081 -4.3948753134690159428 -0.027280738133335185464 -1.9880319413300011622 0.074119884314637188294 -0.049276239206746882959 -0.14948375297629729053 -0.049454933763572329897 -0.039994115551108225248 -0.017634215902689300004 -0.24448057496182459825 0.034614089471008385734 0.088065029162041105759 0.52302369203177956347 -0.3902763941261091496 -0.048649335838319193726 -1.4084805180581314588 0.26591263730739772564 6.273449690200114226 0.033790703795249669994 -8.5956582999099815368 -0.015395441313155476537 0.018185527265288554954 -1.6127696939531388498 0.18722099709509135157 3.1819376465531892251];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
