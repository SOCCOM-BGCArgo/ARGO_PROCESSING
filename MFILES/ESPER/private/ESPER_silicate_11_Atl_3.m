function [Y,Xf,Af] = ESPER_silicate_11_Atl_3(X,~,~)
%ESPER_SILICATE_11_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_11_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-177.232103709389;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.00425400504498441;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.3451410513923218737;-0.63896261481038962859;1.5404026316190297941;-0.099865307333314612404;-2.50688468618741922;1.5678070548556950481;1.9168075668955604218;2.1422250058669543016;0.11746055525237676653;0.20845152655488269344;0.33925503802280670973;-0.83109058290944226588;-4.1518651030803379598;0.21345139698585241517;0.5488475518014782617;2.3075010174562216037;0.95825272018410234676;2.2549045639949039099;-2.1042486413524041922;-0.64190100743673961237;-0.94343325018910062507;-4.6499067493011203567;1.4890702864382916459;2.5137559319959383863;-0.91547422576662262905];
IW1_1 = [-0.32069111756327239871 -0.18481287069830928949 -2.7790067045080797392 -0.53974957026620418166 0.0014352106002420150777 0.27645010946536352492 3.3556134814100935237;0.558813631946727285 -0.11599550454679141698 1.8682578226028412338 -1.2989622323665597214 0.79985059850861284225 3.2296911398812668814 -1.2366291840481724584;0.62445129897523476981 -0.83606374606060795962 1.3408040387627302437 1.2894379057453431159 0.39456332552739370456 -0.48566237060847006202 -0.34581137445317200463;-0.14142029970109579184 0.17890489544001389466 -0.41969358434377979084 1.3856357923202486937 2.1219862746700908218 -0.078804638239576771386 -0.30235610805835683168;0.2251232719396546178 -0.39523609623666744461 -0.55511083002004046882 -1.3355983706779175346 0.30656501837172267511 -0.46369669065696428323 0.83714966831968684602;0.38974880211018109177 -1.6495674621690519235 0.74569924131407028245 -0.59121173414370231658 -2.1947270990240661526 2.2129681175344955157 -0.66537119106007391878;0.14062571128847412005 -0.13504529331444306561 0.092701464565080632374 0.10805725606488471302 -3.1922588304270580473 1.9504776237664278593 0.64842713647637995056;-2.0675563138139301245 -1.0439665623142633244 1.8982364981846000518 0.062399247230658677621 -1.5395535702163749558 -0.58458953863864127065 -0.15120924123620246848;2.1195657911787875172 0.96142905092840613701 -2.0478731130906662194 0.021527943905299839339 -2.0000176426009446118 0.17871809956619016946 0.20950378873916861155;0.00085881705059220967563 0.24418555057358151683 1.0174346597580907758 0.99387426790157407108 0.50002451483845267166 -0.20611696553617092631 -0.94224065532448741944;-0.16777092966774267979 -0.35985577646729932644 -0.96077536077964653671 -0.14634021667742860839 -0.38513617101302261014 0.021689772105193776824 -0.66637342801981802598;-0.044098107022727942028 0.26308807624117525048 0.85941937536777757156 1.4408618227354073049 4.8470776506090489377 -1.019557959979075612 0.050064115964713204465;0.60567401667159226353 -0.14915315460538447478 1.4449198811135812726 0.10953606556041121933 5.8063103844809198506 1.578413752191493824 -0.91600883450689551957;0.31375409225649258937 0.57285899583061117291 2.3995136056977566241 0.98456342483833958479 -0.77341364259613443188 1.0508754865594513994 0.36114580630080334034;0.67654140538975882091 -0.9442210141029987458 1.8258206702678285716 0.36032907910992068024 -0.75631733532372591444 1.886205173359594367 0.078436823910307512664;0.27025137581928199149 0.14661518232584286325 1.2256091242956386189 0.60294919035341854041 -2.818377838310710537 0.3820125067525518836 -0.7541448424302588105;0.024032209120598505697 0.090547169135688970742 0.40222538179158690008 1.328090742190759288 -0.00057405207475958591745 2.3502618874404070937 1.0278529712107340455;-2.076623277246830046 2.4843429614382230852 1.1433986036362668859 -1.0891850899625765692 0.650289537329463041 0.28035207833328384952 0.346822238179251785;-0.36855211356420203295 0.23722898447420856516 1.0378675898926570387 1.5683409443986791043 2.2931171060281627661 2.1895776983493253631 0.67943731157936038123;1.3295545325441426865 1.0528675461442231764 0.79856189013379152986 0.50821866919953861963 4.002039137387932044 3.2926003782568931122 -0.87731350683712838734;0.062035916264881946214 0.07474671182806202907 1.048929830593978263 0.81181276154705039882 0.022582251973595014738 0.916200539826708793 0.35865138158663945056;-0.97308827453091473192 -3.9900748064233146906 -2.653583899532316881 1.8503873359329086057 -2.1264811558620793086 0.098435924789290321635 2.1378216386062183219;0.58547114904892216813 0.5822968514562214537 0.55721038265391731326 0.30700445186696379007 0.59755181246875888057 -0.71426682930051332843 -0.17734911298189615092;-0.10174721913362036463 0.37918457119996240579 -3.0778787411408243813 1.9080316320361963012 1.8972972098122264928 -0.70150478780771907683 0.57411076503436464513;-0.79662882689164293826 -0.43930656844473031652 -0.6303560372381604715 -0.72761248253597354818 -3.0993440482201095598 -1.2033845133607627975 -0.99920206442311410022];

% Layer 2
b2 = [-4.5807304052541759631;0.47476173554634570895;3.2582526808999263679;-1.5839349260993589308;2.2748344158314304231;-0.41630211889600271524;-2.6166107226893657867;1.1190668177259275318;-0.66463301340447511478;-0.50497696019857274408;-2.0363867302682017169;-3.3086851908051917448;-0.87425661158468204182;-2.3412640377469835506;1.3709990431849008452];
LW2_1 = [0.90404780573904397478 0.37601499200195354078 0.37340900934964982305 2.2663826881722344275 0.3893827848583032436 -1.8832509947741427059 2.2462940838225691209 -0.028395393784082262334 -0.12945661732466515192 -2.1977683137010322056 2.4275708348578182161 0.82690413287920849772 -0.79288104615756893612 1.1790209217556892884 1.4419544556640837563 0.51629271068466331407 -1.0943743885867203147 0.93258333105230017956 -0.31212471882390924183 0.92757838560893757229 0.93593808904948361249 -0.075669751739585511263 0.49708870148065442685 -0.71508833893114043256 -0.2263618864163571831;-0.44522514017780090434 -0.81064602666885809956 -0.80895377533394952074 -2.008523850114372955 -2.4879197124426473131 0.36487984602645850973 -2.0909630968869490353 0.40681772501163476763 0.21085529271454039879 -1.2207875945116617444 -0.92165836066898010337 0.67274053119715038207 0.30997079253934134435 -1.368659201047538021 -0.3425866441189264755 1.8084138270005232219 0.75707527750571101954 -0.82142702466875483491 1.0624451117061668448 1.7752545322217543333 -0.43482931447775424738 0.69750945341622772045 -0.6579735083118982697 1.1427567337414923365 1.4338936595398792395;-0.38125017957289852877 1.2454387521548875295 -0.15686785395164412615 -2.3927316835629803826 0.51633596859893704512 0.32685847180540605894 -1.4936226256253386513 1.0676671659149210569 1.0899404888873258646 1.3470615395308516149 -0.65868945265733536143 -1.6557396357117051267 1.7056989352617641931 -0.99064283964713240049 -0.71657475128596359593 -3.0947287590920726785 0.80055458183559125018 -0.51883037937008702478 0.63244811835172565218 0.14149505023472230825 0.59505138051832340285 -0.14227694995890777241 0.62395910123531816982 1.3027973495654805447 0.13491088390595801227;0.52217089636377900241 1.2139297749107718083 -2.6632912097308820698 1.1936673435288345235 0.68884910180707425997 -0.090414236053250773839 -2.7878028169102999634 -0.54714996143603578105 -1.7941135570259540977 -3.423106948306406494 1.2046907497809467014 -0.61048046442978465276 -0.0132693739048617039 -1.1547463689915022922 -0.42584976150897646541 3.7294644601813544682 2.3346492700068002257 -0.21674262032321806037 0.20491007330218513616 -0.73371306324135898702 0.31313508412137575077 0.79065054428108272333 -0.61121037365477870473 -1.1538890010523412677 -1.2741028608491864471;-2.0189705558459376533 -0.72257920154759569531 0.8441054264625363901 0.42055473630357753656 -1.9307209273501697577 -0.51960590123492012005 -1.0754674521707165979 0.075424375533170051611 -0.31577491669553348075 -1.0182047071531048488 -1.2637289249995735663 -0.49828118390286030293 0.017942899930125488783 -0.63440437037167796142 -0.078834411505879969928 0.5258561753860309107 0.076111956744984735068 -0.0056563290522770853092 1.51258700119743561 1.3604243361022190228 -2.6177575086644671032 0.71350000608675778757 1.1754279405165790617 -1.9399962648933155585 1.1278077881310468733;0.2960958214973604119 0.1216189079483899621 -0.5600205265917752584 1.0928460500838894642 0.60954169582430761665 -0.9527736256280655569 0.0014471398809651099537 -0.70986357076918549236 -0.47071167566793381543 2.0141602706945471724 1.7082073807692841338 1.450878525255189011 -1.4565637885496345305 1.2523969199239606276 1.3930610274966848117 -0.78947576222365301035 0.34182885534368945279 0.14232072056629399559 -1.3434021124241211087 1.0730718080495660338 1.0867374115185943761 1.1319937605801895231 0.96487070193317792111 -0.63769288693403536339 1.8456131028590123666;1.0483739334339796656 -0.62523707139365436447 -0.63395499447692704731 0.77602046315443307112 0.40433688312950544219 0.77186584244251599252 0.22855766895799939364 -0.24143600595007097542 -0.062916086302697543653 -0.76963860121185445617 0.62934824596071581304 1.3142224499915793334 0.033333498025284041821 0.01957273851401324094 0.4021280305938266797 0.12440030247926155138 0.7581474122872824406 0.30009892085835998543 -0.44092642493922429292 1.8717633432465956567 1.2480517468573464335 -0.4697582167396727737 -1.3692606831626412678 0.1224842101567560626 2.1376427772485988577;-0.17937266828080439263 -2.8428284136828811945 2.5752298318589041948 0.004152445563163034703 -1.3699711760721069442 -0.78518895615832973167 2.1120948247204376358 0.12413205752662204162 0.22619578262864403762 -0.26890049116058595269 3.68590737447782546 -1.5303186968353170716 0.98714248323487263637 0.56375267313017041193 -0.3529315373469528172 3.3321608018475981083 -0.80680636533605665228 -1.04320781152356723 0.28949481465630000354 -0.11949342425300867043 0.58193422551037521373 0.41833738911915130387 0.11960336748525270123 0.42632404376606358731 -0.75568787210502208485;-1.3351901893472661875 0.30155462921124248643 0.20451820749858784509 0.22600772985814934768 1.4057472642728838785 0.67083471075420242347 -3.1027391874532388449 -0.016295146680465482508 0.1831185783355078478 -0.79452364022959509615 0.82361470401264058605 -2.0885904357259237329 1.088291361222131215 0.59243813167978820466 0.19778251561211687704 0.22116014039220738274 1.3225972323622132709 0.28317782211771158618 -0.87057942380905284363 -0.31149251241263359313 0.32472776875952319431 -1.632473649436674723 0.37361826683685417372 -0.20722356361437635486 -0.78481702091940208632;-0.46776113495215315696 -0.15561953909782189065 0.58467349557952741357 0.0083905505126686298623 -3.5105299339679443271 0.95524247466032341514 0.28149251439096123484 0.25771718540798649322 0.10593099197526663346 -2.5117660574134101914 -2.0568271069073587043 0.54720612264842660721 -0.420941263802411203 -0.98634308875560006147 -0.52951685233547240994 -0.12480510287137042136 -0.70036350964338256464 -0.24013449971311565112 1.1809010719773016529 0.80996207306736056619 -1.2212989824675233308 1.2721341773825225463 -0.069741058948168455078 0.0058491026120643819369 0.57963275905908373531;0.44569220058606084933 0.3220671730578592018 -1.4964076577309612937 -0.4818280140148775148 -1.0992038183540635554 -1.6595309015059411806 1.3008167123877252269 0.7587594261836096976 -0.1398198754001983013 -0.21277583843568873001 2.8200308756341057048 0.82819404934413243247 -0.67350838002877289057 0.78498035198312643423 0.27915195701776585047 0.95576817475206898855 0.4991571723610851441 -0.40299421414459379864 0.20558679088398429391 -0.95203912034569349032 -0.61592970093480647886 -0.38212381236913622873 -0.24916337720498715758 0.040918625097987874895 -0.95933807196885889645;1.1339936598547244451 0.44821026090760623939 -2.2306336689408863272 2.1841476598311659885 2.5779183611259970377 0.98836638103352858487 0.87527923656848838352 2.1954441994953284301 2.1946968027489468511 -2.5148810430590553544 2.2243126300319135957 4.1184228018484319023 -3.1755838714984236937 0.37855436857552393626 0.33685455792807150743 4.9089695814991767264 0.55977479487079606635 -0.21603734240735805727 -0.65939436049335131695 2.8533561993316083338 1.6961352103586495588 -0.44677044407400789972 -2.0450875636965717419 -0.13961761267684952292 2.6971775766832855048;0.70096632678288095519 1.7453662670407854574 0.69639849691617139449 4.3770095875422327936 -1.061893553503671761 -0.98946119866629289596 2.0317859282072010529 -0.93257396338716724848 -0.29430851077403968885 1.4765575328017881418 0.33214006065196266526 1.5468354822418342032 -1.4735099236208841766 2.2170815646270169985 1.9132725917632160684 -4.3864219760797125147 -0.92185770273852907231 0.13562033947306803561 0.2914177571017046442 -1.3983499189160684129 0.31358115723510310291 0.030140122842777276879 -0.31754034836658517893 -2.1690633500790972299 -0.25664758070453197458;-0.24058887915659374346 0.61126177416453286728 -2.1269924656168828214 -0.52424996734848949842 -4.0954018765575703753 0.63313728872846830598 1.6818269899376383503 2.2665959727640889732 0.57168439035555373984 -0.61562325830669006876 -0.73174124836666054605 0.040462568364804829546 0.1398747993537028389 0.42955450861032329346 0.61825725711337509161 0.12622738450434520252 -0.88187122605675372089 -0.5996668001633702616 -1.0202138020196327428 -0.50795756588211860016 0.75851940949406371217 0.028359874861242331118 -2.5953595754967753173 0.33177605419475741932 0.5108389872726251113;0.014324021986177886898 1.3677755027078004613 0.49784312474035896656 -4.0426648932633755251 -1.453287094025116577 -0.032917926860968178826 -2.8300109853653414582 0.24920442928752475908 0.073637383052271215833 0.0030262552518914020983 1.5790273870153963554 -0.90699485637709098551 -0.72535101750293140555 0.5178599137772105232 -1.3614160870488263289 0.066233592352067771625 0.66614236567472040473 -0.54728963088642024193 0.37174745718383367388 -1.6073668200476034507 2.161284154754189224 0.93809446431551646306 2.7959947943873451059 1.2475407262148221488 -0.64010556112873118195];

% Layer 3
b3 = 2.6446693369968587994;
LW3_2 = [0.80415360152150716644 0.34580089099405780795 -0.45261439955138843549 2.4053346105697452906 -0.38247898123042900487 -0.39027012530070442908 -2.2768202759377400568 -0.044135501133342379398 -0.21135191287679119809 -0.35079872000305284407 -0.52168840044754449803 1.8183282321803091452 0.093411107897900566566 0.36166049531486615942 -0.2836969801875741104];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
