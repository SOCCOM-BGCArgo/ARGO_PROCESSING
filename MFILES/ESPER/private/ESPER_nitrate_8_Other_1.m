function [Y,Xf,Af] = ESPER_nitrate_8_Other_1(X,~,~)
%ESPER_NITRATE_8_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:34.
% 
% [Y] = ESPER_nitrate_8_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.80652215427058226993;2.5928509834193080863;3.341586437222480388;4.9072539283739393667;-1.4367482626964565018;0.036708639543701390706;-0.74969647075548739856;4.8036375477745192342;17.129014662174515848;-1.7769720604037624323;-0.29801493225537711851;0.62686519228123260827;-0.41410041458602081521;-2.1905635835499026598;2.7296066411781483296;-3.2702928162918132315;-2.0560842492075868115;-3.1181819287699537036;2.9297383028790697779;1.4340362068777718907;-17.109902138332621746;-2.2767625661193835462;1.3250736893174279718;-3.6489613893110335319;0.15271911928035880601;2.021975862488948561;1.0807149367656505579;0.6334147534057186224;-2.4784522678438865029;0.62308858655056753584;-3.1714310612468650241;-0.80767005393194235552;2.942836193564662306;-1.1219852552256481815;-4.0194199796302232386;-0.4620141529172602235;1.89462695110588486;-2.4301569811164878132;3.1122810339598423468;-2.7715776033734154105];
IW1_1 = [-3.8890679219118147181 10.043386771814050817 -8.0497222658165235032 -3.7040401264178535179 -20.044114046627029779 1.2771925418145151365;0.20724271429317522863 0.10400674691958458618 -9.7156679564905381596 4.1122299032644269445 5.4424947431719870039 1.2657300406213609634;-1.202707020159914153 -0.21883302051900987983 0.94746083607783937452 1.7525877350425280721 -10.90493995760149204 6.359108349928206394;0.26172508123852888939 -0.68119226410166822117 -1.8804349058157578956 1.1596114584599781505 -3.7687580080201477095 5.8306091641184520924;0.38561474787465616076 -1.6476841686909797779 -0.66486800061887907365 -0.60083923317427057054 3.1244283630239610972 -1.9517155016145746327;2.1197291130154614081 -5.1576475255844167478 -8.6328692689800980986 0.83816827289059081529 0.61296595903428541252 4.6686769716090692484;1.7687503242924720315 -0.64034415114476739284 -1.0620163983127015594 0.44813934670054661469 1.1166852287133750554 1.2702710930884957286;-0.097179287764489363788 -0.17463584521547742545 0.8905067129772922252 5.9927834643260204928 9.9056000021681001044 -3.8482118268915779247;-12.983901033243865797 -2.0756175464221713334 0.13862284060910654016 20.079466543422729075 1.8710830333808621262 2.0731257780325305085;-0.32160082907072634617 0.34008525332801220475 0.87004899704968685636 2.1075038328609418947 -2.8598369083325434481 -3.6902872130821871011;-0.62199937618164813369 -1.1869596290814574679 0.037404461786317899641 -2.3583462243433479522 8.0483578414298388992 -2.155322643042823394;0.1750102493273066051 -0.092769112432437850213 -0.22386897426349056106 0.086275838299413043497 3.4131668395831433749 1.3846200417327649834;0.45004375845089678032 -0.13161450997563334253 3.8710661702529081118 0.69870135146637080137 -4.8071208188908833847 2.2419514995106140098;0.41050878608523222457 -0.51668667306951576723 1.7373212536003805884 -0.66679966319781291961 -8.0085146134248326177 -1.6931806762060457316;-0.071698770421582666557 0.25127766945203250382 2.3886510835755752069 1.1912234222370514658 -6.2759146285121572006 4.3603448986797888054;1.2975831237962169862 3.5630134142899594352 -1.7677990505623339956 -3.4367783956438686666 -0.99262272672492768422 2.3415487179110896498;0.85362423051489810799 -0.11499814350777030902 -5.8700432662568662323 2.5271826192733235494 7.9129374100728711028 -4.3960840262500635589;0.72272881021078017039 0.98291535566412857605 -2.1465423538020083072 -1.2713884794480141416 -3.5611807248113072077 -2.5300661531520489689;-0.17216097572960828432 -0.024536636767471968479 0.0039713844397729946081 0.41882524194751580282 -2.2827197010749054051 4.1049289303670670748;0.0034994773255964299954 1.001268199014516691 3.9209858376352135778 2.5637803388166910956 -1.5873845115889881896 -2.8862492065618887693;12.934575593727480225 2.0650953108126990365 -0.073034728379399588283 -20.053946534148288094 -1.895690894686698158 -2.1306894285072583983;-2.2059896787279233976 1.3417342235886173807 4.9478847128478076201 -2.1969537579714808473 -4.786950385094667304 -0.48905405336341478684;-0.3812280152302703895 1.6184203831168850751 0.62901507809524281889 0.56423406926046948406 -2.7918337011478557841 1.8241103356320464979;1.1496122137598612234 -0.65794620131761483162 1.286645892009143699 -3.6771760310640080327 3.6301175271787915477 -3.9234625763082862093;-0.20039056112094996709 0.3950553543180447269 11.92525008447273116 -4.1321124682824708074 -8.2469977132887937188 3.1213776852466601497;1.144399311655525775 1.3472758887514053594 0.28438440376084872518 -3.0470095540605561801 -2.3685483557040707403 4.4481040540301846065;-0.10204604322417505646 1.0227167225122946181 2.3788090465913622751 0.16520048840238538146 0.031850601658703986407 2.4649917825985547815;-0.73920161428559982841 -0.57220945925395449994 -1.6551318363266918077 -0.80251271582964134321 -0.82356126261295969915 -1.8372200026493534786;1.9556463501965917207 -0.77443332782960738747 2.1829880187092891575 -5.3986170439995957437 -1.6223811440366053827 -2.2579238325871662241;0.99663355563096722722 -0.69088629095869158458 -2.069634785800268606 4.3415141239520975702 -0.97104019630828097842 4.1394373371744999091;0.72062495962997263899 0.97812608437805848016 -2.1031022754967545474 -1.3613549304409535701 -3.5741561175288225627 -2.6052515858423248574;1.1820975163555016429 3.0240058862293142106 0.1971853819184873069 -0.78004656863730781335 0.21329912832810798973 -0.49545003965855333172;-0.14797581661255460039 0.0083335529662208005647 -0.10097328271137016864 0.51210381102472635195 -2.5518061935127431816 4.2110784882616059122;-1.1406069474158395671 -1.1736787022461545593 -0.57233355674048280726 2.9469852626307555532 -4.9449362268600589587 -2.8439012159545096203;-2.3653887348515878486 -0.3454148808678929039 1.8504769320452874037 -3.3945797851867220984 -6.3464978855976630356 1.6289428564154722068;-0.16185345551071284032 -0.24173007332998705521 1.8492744888028900263 1.5238717730443727127 8.9384274372561911548 -2.5848169281990931445;0.38644061794201139959 -1.8114373426302681214 -0.54277513575973157511 -1.1062200355665614548 0.90890094486324457534 -1.7857878628700061263;-0.97386743910577577843 0.80434870390616930447 -4.1358872689411576573 -0.05331876275327102066 6.3836226249813075029 -5.0062745384617466371;1.8283328684299711142 1.7688804343680908371 0.18438694220160639636 0.17528450062914366359 -3.9373787690156341057 1.4386987152178241089;3.0536978953797748737 2.2887509089620166058 0.61869829241735485592 -0.83035560675996356039 -1.5701375934300323411 -3.2095935051806918636];

% Layer 2
b2 = -1.2003033196846757402;
LW2_1 = [-0.027678933210201504822 -0.20056308084400936709 0.31252767856289415116 0.43979700025160389787 -5.4769842329186539942 0.036327204799170328964 -0.46763527173516994395 0.21471941032708583008 -5.4498390959037514847 0.44772893576860561815 -0.13878298877216305174 -0.78375936614272245784 -0.36806488271689091762 -0.39670209874816647622 -0.5007897170373586393 -0.064615254524803100722 0.11614689829925509135 6.16942489762043067 7.6652002050471930161 -0.10374803185847647491 -5.4557602353219500912 0.12616609433646794325 -5.8581950644100437842 0.33245398306011170186 -0.10799391899661892058 -0.25058342842344061285 0.51219053809974068869 -0.60979363448420276228 -0.1421239539732045698 0.15982901505011845589 -6.1804516337328720965 0.082515930429190878503 -7.5809639873776921704 -0.30155607004515561087 -0.11559988538580408257 -0.30890728310381637689 0.6160188483155575323 -0.24268353954335178391 0.41443768387065410552 0.13445269581466884334];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
