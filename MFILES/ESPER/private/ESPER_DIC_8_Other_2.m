function [Y,Xf,Af] = ESPER_DIC_8_Other_2(X,~,~)
%ESPER_DIC_8_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_8_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.9783569420302051789;-2.3538701366410199611;-5.4670437199651695792;3.4240141236052688001;-0.6610932886993730051;-3.3705756336208789747;0.55880604088585994482;0.10860758715983016842;-0.29548057669809002501;-0.032698029939511263908;0.86231798922483759995;-1.0054447150792278354;0.91688457212808593955;0.97803411125027117645;-3.7317644794382287543;2.1283512672390756393;0.069721816805865532984;1.958153390434508756;2.512217415030481682;-0.33636942611520548319];
IW1_1 = [0.44493074315808439634 -1.4500053763291487208 -0.95597986157340919533 -1.5173210702739627909 -0.14302364434514999725 0.010292252508510724845;1.349536806141574008 -0.57771962890569272808 0.3942763287677706896 -0.84576359364184039435 0.50188247573271393964 -0.72967819897218388903;1.5406142576929842125 2.315691919938786647 1.1290504776640655216 -4.7869829830761894129 -0.48742062840180566674 0.94622434368422447815;-1.6451796391192976543 0.81346262398834823237 0.1119560010113136439 -0.17109061746139767046 -2.2726158450965669999 1.3874505165566299869;0.34538232629927484441 -0.65531532733044206562 -0.83789360015954750249 -1.7502574081142781015 0.36793216022425240253 0.54443362473266676549;1.8896759937740463808 0.52942605593233238448 2.2804294428582267962 -0.69817232007259022453 6.8385806384158982496 -3.8537577357066350459;-0.69966300864195496434 -0.51614342648982014516 0.66334400889368039245 -0.0080707741326469691068 0.29523996638459720776 -0.32556334119413432582;0.62701199405987828595 -1.7397243295371844773 2.0736135613449291348 -0.39797378881865252964 -2.6314431096803025945 -0.11154301394109832068;-0.35642017239421180941 -0.1502111365711090718 0.21745352542492007997 0.49234558512054077406 1.1949846689684453516 -0.79316489406628454262;0.21256587092696693775 -0.98424879140130416832 1.7926993625190645876 -0.40964204942856696778 -1.5936091197352417748 -0.12951601445383173483;0.15189689258186869769 0.61395632401293231961 -0.17935974024260284421 -0.09712888883904798043 -0.97118296696941208701 0.66169183833835931718;0.39297271332212901918 -1.7207431973586690965 1.5820454102059300361 -0.54467393489103710369 -0.74935247907186441907 -1.1548156822341606453;-0.019527278988876062976 0.19786817231859879507 -0.046295693676870287858 1.5074403668806657386 1.3850901230293706234 0.93555711227593674195;-0.32928753342393402015 0.49821842789836667809 -5.0182592175217424213 1.4608626416425578576 -2.4446679850014394475 0.56331993744347053088;0.24055033882162998871 -0.98083838475262519196 -0.43182044544247244477 -1.9584767534765408215 1.2259116811385881718 -2.9536614576672448607;-0.06169950908859647698 -0.39352573280756170115 0.51830803246544276952 -0.46287630069947266476 -2.4330549774525662698 1.9370934710923595201;0.53176127368671344264 -0.55296082733276696874 -1.6681007966863747871 1.5074900951613836586 1.55462445896080248 1.5086648632858696839;-0.065322963682871770796 1.4220341730538503811 -0.71389439847411018114 1.7752796210481625039 1.3529820113562343042 -2.514722275576705357;2.00505371325371895 -0.87350161657857494646 0.10854364457012150025 0.62799485053141934632 -0.032488198559822246969 0.24952138776098989337;-0.10290716865855238649 -0.30633926648143261495 0.35362327258259951268 -0.87593287247594753264 -1.181738555527796608 -0.32654870888436887677];

% Layer 2
b2 = [-2.6837521965647419542;0.031674714147946148035;0.72615106291527253823;-4.715330674657427501;1.7057128555650735713;-0.75633552294852257614;-7.8207369856815276421;1.663109806445663752;1.588095915055168561;4.2637353269117417298;1.8047636159567508329;9.6508801381295246102;-0.40287217590625934438;3.5546907200077351163;-13.696672334015515204;-0.73091252065401812743;1.7924114521571166136;-5.6965216730877212825;-6.8389702333223034714;-7.1959779067090376969];
LW2_1 = [0.20764340802304268041 0.2090965464001225127 0.0080685720605827987439 3.2664850423298252835 4.2034224106220960948 -2.411333401674911503 -3.2594002861607602739 -5.6775594781367182406 1.2493750481971632738 5.4874106782849647601 2.9842920363051383958 3.1759736573584911312 5.1365283196337170324 -1.8456319040876600912 -2.4144558990653579578 -5.9114711885863222562 -4.1159211709383729527 0.43720303057927961676 0.77581388195488898418 6.0817982021908072454;-2.0887511295836702629 -2.1809009349125556554 -2.4209641020944854262 2.442626144290188428 5.0786843642877794736 1.8935430147135978718 0.14455424398442104361 -3.0457660884577126836 -8.6636429091549604919 -10.541687017839880269 -6.5096643129214664114 7.5591274397541283747 5.0988122354828018246 -5.3769432002656518677 -3.1459145832151640398 -8.9421377844551521719 -0.092537671966208420726 3.3185668658585618651 -5.732371312088648807 11.96882867528640837;-1.4638986162053988505 0.23269117233409419843 0.30912658382572905102 -1.0325607841282617994 -0.043085672964709942345 0.60326962666141537017 -1.4455414095922471951 -10.106644156734068574 -1.8321975660803306862 4.2970484539293440918 -5.5191279513621864794 2.6282458309816236763 -3.1346929538995751408 1.9013401034439749715 -1.4134868298891651861 0.79013606203961017638 -1.0410550013376103085 -1.3842150026634940652 -1.6531712924352850447 -2.8363805914141955178;-1.7721739189260514724 1.3414360854060427553 -1.9919211747708194249 -11.720838804958312096 -0.83579879700528192377 -1.1020418841230859019 9.3641088257585227694 5.928265450588624752 2.2788955618006845327 -0.39900018288088051621 1.2440943158440271876 -10.052928149377606815 -3.2025496709018153041 -0.68215360025824200996 -0.90437590681097157486 3.6803749765297251173 -3.453093709062488692 -0.72227804140018503354 6.7886408099097224067 1.6299868881763899253;3.3746460641744220332 1.7608070485366826841 -2.3864619325392739668 -0.1828379575604747731 -6.3021192062488573526 -1.3771557716194815502 5.8578877764863079847 6.3274722207321616452 -9.6274816075803073545 -2.8501858787895941738 -4.4114735174567343279 -3.2037150967888128328 2.1402546647761817589 -1.5701753006173406746 5.3216988596155418989 2.1343090317475246209 0.1578953063636829024 3.2407126811367064079 -2.7221927189913044387 -1.3469960821827531294;0.63170336574397922824 0.11828428352825948178 0.40172563787474790953 -1.0408238433089587183 -0.1907952302168469394 0.10970530865560959577 -0.29498000989484990386 0.57268313592435149406 1.8656077099988066514 -1.3919972894189633905 2.5133404189903578718 -0.14022715593823809055 0.34391468454249557452 0.34036763734887348631 -0.5366096210746943429 1.5881335358037931282 0.57296025630222247038 -0.34701417070527001973 0.0086508886464399629979 2.2590689393439373767;0.45414703086448676705 -2.589995372257167805 -0.063525775273599399684 -3.5201249129959975015 -1.4050008731671990159 -1.6939384304433087181 6.6578926638342883493 -3.0608060179660250277 -6.9417960337625661538 4.3382524798105892572 1.7536848467859402767 -0.80101552827057498352 2.6819879793808922841 -0.16196180778856808513 1.2132122172029375928 -7.319295342962750972 0.11398706705197196587 5.4834712099023370513 4.555270983694421183 7.6076399097072355815;-1.4917256837638745992 1.1395207726984688534 -1.2422395495440501367 0.93143953528479617177 -1.7705048122669437838 -0.59090935814942358029 -3.2518839941191206577 -7.0735786730793499544 -4.2581741707288234267 3.5147689720792292256 2.618545865233591563 3.8033824239296980529 4.9544736818105166165 0.26425904432689489854 2.2998172757466650573 -6.4046064667902333767 1.9041908733254491182 4.4431308754316676257 -0.18442498470621387918 11.456793883317766714;-2.4582045747397329727 0.64048197740743650908 -0.6432483232569199405 -2.4772743139156179204 7.9789566829549363192 0.68139824861340447804 -1.3845437802302171804 -1.9447844613279152703 -1.5365626196550792315 2.605361552062143371 -4.8888832849896752819 0.21842138828277418705 -1.5639742833095051644 0.69707594780644444032 -5.4405553777882840194 0.49569538534326051948 -1.5209601225680819958 2.4833531496550191875 -1.9899346459924780461 -5.2914477191023454594;3.6426023115121242135 -1.663003538500125611 0.90313324729324273576 3.9890504071485497484 0.95236928934862286056 0.98001623849853125581 1.8710079561354666655 -6.2747541194234006667 -10.756730544632578273 7.8220684570324099383 -3.4532797131162662474 5.0985967773753051446 -3.1095704851056735762 0.43379641720500106139 -4.5133674654440563145 -10.651502859470920015 3.6434186465687736778 3.1775254336144507228 -4.3022221901137278621 -6.8981637491828386999;3.8348617867053773622 -10.061932172746358205 -2.4964344008547070253 -21.52998430235884797 -0.99149805808160740295 -0.74274575116437535627 -6.5250706618306626439 -1.0309470912051030833 7.3051683490422405498 0.093158654484554972997 14.688363267238097265 4.0408102004971553356 6.7544801239768252898 -1.2147506640205227857 -0.42026797709384761115 0.80707880412499199974 -1.5648444347155430201 3.9945888977255052943 1.9610566155088997586 13.625017368215837976;4.2846543481480718896 -7.558718493007353878 1.6188391264055552732 -5.0318675000493326976 -3.7158541488970029398 -1.1666506043268933812 -7.9312860399656237576 8.6547975579879672381 3.2778857656101774154 -7.6598553684616197401 -6.7766204121066397903 -3.3453571304690954413 -8.0484976261178555745 0.78673572891105703064 -1.9013695832696348997 4.0595678327541433461 -6.8168139825785489805 -4.0488035329518732297 -11.714226143095768151 -19.516550624371571843;1.0263187864739771182 0.76275816605816137983 1.1468102877273762541 -1.9590072166634200368 0.8621007515958118983 0.3214524759825888589 0.42831926127306158003 -1.1544377716086429153 3.6138943309451434516 -0.50861693130074947522 3.4992228075156579514 0.64464234326618019555 -1.7347454072698507144 0.068717562466867540549 -1.9443404702742812518 0.73075705037047844481 1.448510269242778703 0.072005300265048075015 -0.18037327008873887957 1.0985819086303221237;-2.245077765822101501 -0.40522807358926332677 1.8242453722716269748 -3.1883839777051110609 3.5154895783577480017 0.16192469201376144539 -4.7193830795096687325 2.9932526431148782642 7.7984740890423935866 -1.8485600369682002597 -3.7614224769021640249 -2.04184506161604018 -2.8606540197740981668 2.1080355202145848459 -1.4720316892236995354 1.6116618361457537567 -0.70236944921679855813 -3.5791948522302985403 0.57821829248941991608 -4.0821103633574304936;-7.6601830404821589227 3.3811314631375801731 -0.13177682649221778011 -5.0541007038251581918 6.492218175120627599 -1.9311498137795382046 11.167305849502623616 -0.42269910368420515745 10.470592108306732371 1.7996619959862771854 20.206050640904063442 1.6641373821212732675 2.081117916031602455 1.0688935197172158009 3.8566620761229706282 0.13830787102730435212 1.6164840381642324729 0.096564402393163245586 8.3579488680286893043 6.6635912856871275523;3.5930637832346477012 -2.0253572392240153377 -0.16218416799642360049 -2.148138466220769871 -3.9808065184638317113 0.18125876138367541524 4.6968442620634354157 -0.30207049324937162993 -7.6140812511729256684 2.1641857140436226992 -0.30574555384778268063 2.6653347372135351989 -2.7736083341460759932 -1.1471440461413466849 2.1404314691351067346 3.8422213131765223793 0.36189069404518542372 1.0975779692060072534 0.010202103411904122482 -12.299435173305724334;0.23256401330585282916 4.9256545141619980654 -1.1774583934375848493 5.7479598356200511944 3.1715533382986662581 -4.775178110543718546 4.393939044427657592 0.95023176628472505456 -13.372768841206898571 -4.5345305163281093286 -6.2601366885237936799 9.1386040744298053795 7.1317026617496432905 -4.1049344368300770824 0.081770650404589903526 -9.5422442211561406822 -0.0155271408490546374 6.2338923973020614611 1.4955238275219226995 7.219427524324333767;4.9032421725482491226 -10.837187234484103371 6.3790730091337701779 0.79735083261150740963 -3.460009848197304283 2.8415630070631157089 -2.138154918317416886 -6.0771043632110144372 11.986270504339890053 -10.990556926459717602 11.279353095447412159 13.663247621779778029 3.1450320672663041321 2.3730899675323433584 -5.298183898382731627 -1.1026943250260099472 4.9738998088614154724 -6.09315264263274603 -5.623527806949729424 17.722777987706997749;-1.3951490296522370826 1.9848421440927184189 1.8218247142151744455 4.7359971654249051198 1.6933213478227249205 -0.55163170549799911413 1.3615922043405159769 -3.2044278184496479689 -1.0386590364096344175 8.0842108033517536825 -1.714588924061082098 -0.7652557587036760145 -4.8618596917877150432 0.21702926358864885192 -2.4750464642485927591 -3.4982445266162272013 0.093721701500151494146 3.7331794910964792855 2.2754438357802890813 -5.3489348682345356778;4.6152912064053861485 -1.4121908968007224061 5.5502569337225073909 1.2112625869137265688 -0.1805686588774771395 -0.54994347804418397541 -9.2083298059491944798 -2.8571988263805412345 20.307219982245623413 -5.0910559428242789792 16.776331621175664566 12.083912338387612806 -5.9640839841061774607 -0.92947686721071043348 -4.7676047756270856226 4.8412488671060041057 -3.0288333141620031874 2.3779875006800144099 -0.82909524843612292244 -9.0118562606105392376];

% Layer 3
b3 = 0.074839927928893379416;
LW3_2 = [-0.069275644368880326396 -0.039302427598186973068 0.049470905645628303338 0.034298172459027352621 0.043132618991073679027 -0.55360584678087942923 -0.10098705940034528872 0.052590767679187896966 -0.074533223845137608343 -0.043463287246008987241 0.043804025077114602804 0.031201710140043747987 0.21222279573827498855 -0.12184342480774583428 -0.22581148502994735638 0.058292260035005115382 -0.018087130153618111161 -0.031285696061397166856 0.08707154213678985899 0.051826008349134145003];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
