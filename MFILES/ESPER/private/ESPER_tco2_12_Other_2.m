function [Y,Xf,Af] = ESPER_tco2_12_Other_2(X,~,~)
%ESPER_TCO2_12_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:58.
% 
% [Y] = ESPER_tco2_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.5408826313458306;0.92382045759068188;-5.3861631563213308;-5.3300498086230661;-1.1185338821785651;1.1165590229114679;4.651156613122061;0.65162649778356385;3.3370343891880605;0.64736152701827743;1.0204047239112635;-1.9390503808447408;-1.8942768977079736;-1.0707240443951369;0.35150195388618494;-9.0891895701013183;-5.0612095221788707;-3.4824896989079805;2.4559089875754578;10.058571700302029];
IW1_1 = [-3.8826873190423385 1.4498011498200276 4.2574025809882583 0.48794465595497771 0.23522397579389617 0.13899329051334153;-1.1552702410220224 -0.1671887152065557 -2.3072071051749181 0.41012220772154273 0.29749556603592131 -0.071810040551045909;-0.002078767361143962 -0.32504483078602853 3.3038439882104407 -1.9435384121775567 -0.4918787511318673 -3.0924572612159915;0.41873395468736374 0.051196908750518008 1.2000625641408957 -6.4977489350406543 1.1261747513610358 1.212169515076416;0.93679710166569441 0.21965968919722348 2.0366885712974754 -0.31112241859159756 -0.78688172063766937 0.23179522689064289;-0.059433614212878023 -0.573667844748735 0.13244649294408387 -0.36726967349068829 -1.4245050325149635 -0.20211069024809131;-0.48168383080197974 -0.11554481421481425 -1.0465016172851966 5.9192068009984338 0.43905541216244909 -1.7359066473458351;-0.010462913554632107 -0.39003521340616459 3.2421130631048021 -0.24465301621002383 -0.45571157669391277 1.3649769765852313;0.27529398220927181 1.9114239846628653 -0.61492609621789729 -0.30212971373745995 0.22401749370162766 0.74988540630944112;-0.35899880084014912 -0.1088468840395027 -1.4804417190039942 0.60341219680850755 -0.96499951299276099 0.33163787254113486;0.013303227415577094 0.14651417088293892 2.526241022702552 -0.29182032131094737 -0.25475396456622962 -0.51055844946621287;-0.21724345754671623 -0.32836465940573223 -2.4638788074560178 0.75505969989903787 3.2376251290743832 0.65087518652451803;-1.8631979861588046 0.93218532240189 1.4641473882003284 0.79137018365764344 -5.5066738318356956 1.6858358470655788;-0.51532295675326945 1.1369021039354092 -0.25216936617326158 0.15326941782800793 0.75790009853115115 -0.057736523683393479;0.74715640241220527 -1.232949815188279 -4.1460846385739254 0.031649740077890773 -4.1197640828905424 -1.5438235142596404;-0.035944155388671677 -0.010500201619867039 2.5072379722194653 -6.3651798320291455 1.9836778900098582 -3.5025094961504877;1.4873206137163264 2.1952350112538648 4.3367802083789408 -0.38282746528946326 -1.0369117885653865 -0.84932501882948341;-0.39893029812779601 -0.25308481905916858 0.56379822662121992 -1.3413002052635885 1.4231928780771506 -2.1563262326370567;0.11243493247096102 0.046687967671389559 0.32898902294872845 0.38343031108602443 -0.071989344796739962 1.2830009176911761;-0.020643166536202101 -0.45648983531930931 1.131124752768855 8.7579942880569011 0.87419267223504304 1.6284217248347734];

% Layer 2
b2 = [-3.8513253631548907;7.6322296927785098;0.26267333467538101;0.94728999918852252;8.8766403997866234;2.9260555692728731;-6.7240330455360784;-11.72762437942955;3.1614889515050026;0.60582256415195268;-4.9631605383982409;-3.0242267364380013;-0.08146373803305372;-1.1620860616306194;-2.0730818934112114;-16.161034007209313;-4.5941727150199654;-12.276813580821123;-13.265773326595212;1.6655452981119356];
LW2_1 = [-0.010902143711786525 1.3281112582993841 0.60742194501590618 0.4941055797033086 1.1642439903266 1.2909630887692094 0.517235101183391 -0.12946235698603434 2.8481967750734607 -0.22987002248821681 1.2077790181773611 1.2080319840559488 -0.30484019226114212 0.21022245661580274 0.28593835623590397 -0.15820549129875058 -0.99376911608862406 0.078337212965069583 0.07235866932670805 -0.086058769901594695;-0.25282295119236003 -4.428132392375181 -10.114699105191699 -5.3580766565983877 -10.489678988468322 -0.86026137929383995 -5.4886134214674982 10.250551367200519 -0.9935497176258633 -5.8193480274968357 -2.319074611398626 0.5752312293576054 1.4465705080830837 1.3648950363848575 0.19822442441369015 -2.1703998473161419 1.7939958497011479 1.0737339022632624 -5.2064907697445992 1.1138450295407769;-1.419574191225222 0.64505467975550501 -0.29707253699935193 -1.2216527251377183 1.0853895081904545 -0.50924031290141725 -1.2136915189337569 -0.39164172423475524 -1.3265727652782608 0.069040198772710032 -1.5235788053520729 -1.2758236417490874 0.12048807158838352 -0.18391040553634685 -0.40394278283068075 -0.024507830123782604 0.75210938261005722 0.33989597744223243 3.4593891216189747 -0.024695280488192858;0.2568357484714342 -1.7086561703211436 -0.046469160495595463 -0.17645652215624527 -2.4713207595868525 -0.26523080474640043 -0.32850950345107538 -0.29787534989407061 -1.5387341107860668 -0.90418083593463394 -0.73043662926013331 0.089169425721026901 -1.9060342228306479 0.14696868035858704 -0.40058081944441815 0.23093033718158337 0.90428455832572163 -1.432038172583548 -3.0274626859831302 0.18405728140470964;0.17431560561540457 3.6262587239907806 2.325106973510553 -0.90393226873882171 4.2500482416755405 -2.6446891469990406 -1.0401709147014355 -1.126345458599286 0.2306267630231528 -0.33705104867830549 -2.5039205903317736 -3.3327159684809287 -0.65310073105338395 -0.61700182015010141 0.28571506872928765 0.58642890006711768 -0.20389055208435397 -2.5172262789055586 -8.4059112142146368 2.0107778264917799;0.36239821178457576 1.1564662964425103 -0.064235417796327354 0.25055974100242023 0.36888156867316224 -1.0337003700346912 0.19394817850954635 0.62528199989234123 -0.0061527051639802127 -1.2553299269301759 -0.19810823972032926 0.29638512999625033 -0.31796672844836316 -0.24512293384602332 -2.5448252373659911e-05 0.44345452892332704 1.5253814659450815 -1.19039931441116 -2.3244823581498837 0.039862457507977789;-0.0073249775034426954 -1.7480695254058076 1.3984520231363509 0.20727151049100079 -2.4957179170778896 1.8649376219240934 0.093528995449397648 -0.076203922115319331 8.6992473474923173 0.64613737010940209 1.3036327868307924 0.81879541155896596 0.24777683809688605 0.73596480826044808 0.14127923226826228 -0.44115475001805382 -0.64217294716973827 0.094394629077821493 -3.4603309414754824 0.27848563480225857;-3.6890947055417311 2.6719277034351872 -2.663356095121614 1.8890074009531206 6.7968795166335756 14.3863081834208 1.9151555461949237 5.2880620050659388 -1.1091121578074374 -0.82600574865841414 0.43718657162675045 3.1060420604705006 -4.1047056814045595 1.5717973404782071 1.2561254933284245 1.1364730832792838 1.0797137706592117 1.7769953204971196 0.79696598216301251 0.71201996754884578;0.20752821712915304 -1.3028683155549425 0.52095754454350218 0.12077026522129221 -2.9465006081013985 -0.37672269009291609 0.12178054606149834 0.62011873538378914 -1.6462495912242141 -0.79101375855046618 0.77516288459760496 0.7063386274315715 0.49859240117298032 -0.041243675840189634 0.17491342909330262 0.012649745008190365 0.70239479533449234 -0.82745791011892755 -2.9319001665652911 0.16089900616026911;1.4383102570501269 -0.68671458263643459 1.2822772150029083 1.4161707875508007 -0.77545396379895137 0.52487997830116417 1.5146742014891301 0.070046240811921651 1.6173401561070324 -0.014305526201770204 1.4881360967329482 1.2711763955408988 0.52866303135047665 0.20026296439535538 -0.023055240846255085 0.028312975705047847 -1.3879254121462539 -0.34269552011558158 -3.2643258420573993 -0.028475187424349041;-0.073923367393183989 -0.32492405898657106 0.35572290942848794 0.83919012547642235 -0.9729132399631123 1.8351496955259716 0.73585174641772555 0.098781612756472598 6.3481165720057309 0.43444240048529636 1.470260645151793 1.3619562626628641 -0.46589118144364622 0.56722238394515367 0.26652065803123409 0.12001155770648027 -0.80991396431377916 -0.80472973897550459 -4.3807960620494102 0.22627397827719686;-0.39285941985372452 -0.90347567295852871 -0.065208610923522189 -0.26391441394167969 -0.25752912321609378 0.81741839204733879 -0.19555873657669781 -0.54205257549574204 0.82381389849726017 1.1025808861816875 0.23972934120207989 -0.13650101332539624 0.19624012957764628 0.20000562153543686 -0.0062645582145731222 -0.3891554585997869 -1.1586296077532654 1.0798392576173208 1.9697526574012272 -0.076745042092322732;-0.42365300995685384 1.2577881400828006 -0.049468077802389016 0.098510740555596374 1.8854183528783579 0.33354415356286665 0.26009278463624891 0.38514119657740076 0.68687315806209248 0.9774918059471942 0.83864526586420174 -0.0075607744826520912 2.0881119114975175 -0.10642644883628102 0.44749786589726592 -0.26278848621333972 -0.86770837339625662 1.541301003929173 3.0051721488246823 -0.14041409195319685;-0.27682963736058774 0.13068881883162958 -2.0148990218435925 2.8780869899284376 0.10360088108906719 0.9729173678509444 3.445307402382551 0.57702389138412136 3.8179600604582653 -1.2868501725597659 0.43538683371813075 -0.51385387802513061 -0.66270038335513815 0.87172457313160656 0.43524954791491954 2.2229577148107387 0.30451094221233921 -1.1848018771590192 -5.5180443483118804 0.66681643364947096;-0.028627139108367807 -0.83061512682058469 -3.4651050320405523 -0.76563704981967473 -1.0258088523039004 -0.66048777463922448 -0.89868645351969445 0.33907209705921965 -2.7911825920408888 0.76658984307944655 -0.96592578896672365 -0.51782196063214447 0.16239097214733214 -0.21456665833631414 0.11179107216676827 0.1032084397156274 0.1342322452009988 0.50840053068550506 2.4512387339692858 -0.19588705664411696;-5.8263094609494273 2.4355723944641654 0.46259468500197509 -0.076942861575088284 4.1532942501587087 1.2967756172962155 0.00056518661093989488 -1.0070545595857785 -5.4681064293979063 0.77426557203461932 21.221538301472616 -0.34798508687056884 0.016582715899872591 0.47481250207119791 -0.062609395382324809 0.0092863467659365147 -0.71589175995825705 1.3238075726418181 7.8681323643283392 -0.46018909051138729;0.11798146350881963 2.5569714706776683 1.1914201413321361 1.229334088055533 1.4525820451896732 -1.5266433035333067 1.5252223290254363 0.30508830231067147 5.074044111986673 -0.72558225991884862 0.271659548676568 -0.63224899779789834 -0.15475596029555697 -0.80554527501462536 0.56262684309515254 0.33453745809000607 -1.0549079587599635 -0.64584668247681909 -0.94379878653709826 0.67808079296016843;-0.81686964332541068 -1.6464417167198997 2.2641684667957009 2.1962486259118643 -2.3786199139094704 2.4122999871287183 2.4463301893793834 1.279376923626973 7.7183811841286536 0.7415945455005829 11.588169339861439 2.1175583676671224 0.13727759487989 0.63213971592623874 0.37652904140854843 -0.40171863088372678 -0.50153372294435161 -0.72638090309860215 -5.7285180309098873 -1.3875778290556462;0.088270517518498029 -0.27896101011290758 12.28595160741672 1.4067299107243989 2.5899399049605645 -0.62904988465557232 0.66290893745512403 -10.207016618429231 -2.7709795094030021 1.2641965480453958 -0.62103139984457101 0.15682882491719913 -0.99113554005331339 0.29933339731333181 -0.39604911287610267 -1.5896411094702272 -21.188159528571951 -1.4071100138800525 -5.0519586160849626 -0.48648798765472734;-0.63045508238725234 -2.9208258173364845 1.3517913333590876 -2.0285874143647273 -3.3436272778682294 1.373014507407551 -1.3516399905818388 -1.4018793046261151 -5.3686593404390051 0.63917900103951664 -0.29971763301663812 -0.4455565176472942 0.026395716217478174 0.30875780453763207 -0.14745378669726186 -0.097227798231055193 0.92057483034768361 3.3437871804967232 1.2529464318718164 -0.076386545691870367];

% Layer 3
b3 = -0.57808035474527042;
LW3_2 = [1.333858563260619 0.15778844535345668 1.6746656448606021 4.5550405131078451 -0.25383836540512872 -3.6761102065091302 0.77174561983336387 0.19977690505195961 -1.3332984406353812 1.6304348584985944 -1.051036544973589 -5.4136671989028367 3.7677643105354615 0.29869762205638289 1.1749398834579416 -1.0339106970163006 0.47398292802871617 -0.28693533551165462 0.32989972549234597 -0.67124075881255885];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
