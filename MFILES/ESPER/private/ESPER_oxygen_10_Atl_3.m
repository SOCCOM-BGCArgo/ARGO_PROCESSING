function [Y,Xf,Af] = ESPER_oxygen_10_Atl_3(X,~,~)
%ESPER_OXYGEN_10_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_10_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.52];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0145232735458572];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0931175659313110415;-1.6448020708408206403;-0.55363039585554052469;-1.7822456873591709936;-5.006215543951617164;3.9709951920976993556;-5.8604928675800875837;0.94852837658050859204;-0.0011871896222050638998;-3.0818862628154040095;2.4720719198197960154;0.02332022328387400173;0.62059237266428435298;2.0921070743909662148;-2.8784783900158985581;-3.4550340379541406577;-1.0054147684429224352;0.17809143518502559833;0.66404230809799147384;0.73205929579477890812;-1.8136502633197617573;5.5981028607292744326;-4.3183044742293628104;2.0038909061887455465;-0.46855343478167155169];
IW1_1 = [0.81869891375480119411 1.7282620937919987991 -0.27905666000748113875 -0.67081563000406319031 0.91173002472035502564 1.6112803156528419102 1.6498778925245607407;1.7083534065138221703 -0.22141170765951426191 -1.337678946118649792 -1.1397180029673903423 0.60456577491758112242 -1.2015153431131437856 1.5383524897250211438;1.2036212142129776304 -0.098576818042337352455 -2.1810448326454663359 -1.8752323407112276854 -1.689295356890545996 -0.15153063605185904117 0.41614888041979924971;-0.84458686364804935742 0.39750696471522123376 -1.3820906898282383501 0.15116673609649475263 -1.5457165428434869181 0.28816218365043816396 -1.2077739635069892898;1.0863822285999342743 -2.4721408863487250862 2.3958873851913913278 -2.7722318852276415235 -0.62208181977434373611 1.6734476935313007395 -0.012456616305247820292;-0.25453910663519963009 0.095028948177336813874 -1.6112918011906798288 1.9010311158419790356 0.73550005221133030187 -0.39177792292986646228 2.2716531473402126196;0.60048725716177775436 -0.19067782798750299023 0.14482831546503469045 -0.10612513909074539065 7.7748126928225609333 0.67751610833391562316 0.14758927482039166379;-1.0562441488763916198 -0.54824196355806475989 1.6196704255839187159 0.7700836310519806327 0.25272208228896553273 0.23871597490214455095 -0.62135580950198965322;0.22155209716098139827 -0.67517319140984688453 -1.2242614801112752243 -1.7872164800281900021 1.7244224616245420467 -1.2406469491859044574 2.4907842009230165559;1.9669388162108709661 0.063221885897752752581 -0.16385826752180124299 4.8066033159965906307 7.9814677028588709717 2.2621148538289377328 -2.5209287609735100411;-0.2417618754222097821 -0.13105611661965085868 -0.53148646180031122732 -0.41447754963020400076 -2.6682464914024524028 0.93387214247143113255 0.81168617954468258446;0.51263999913162938693 0.038753785274748826783 -0.83723172293977199399 -0.2071554785609805438 -0.65033511978245128748 -0.030663296564895310692 1.0626936445267942677;0.95149544883427084052 -0.081106235791197731078 1.2750485183849573634 2.147027647871817102 2.0896025177435855191 -0.98912430760437175525 -0.061593192885794192937;-3.1215772243496142657 0.96051045136733836927 -0.84674960156907097542 -2.5711228105128185462 -0.96055552454369719229 -0.70612565933820048425 0.018262095581521184395;-0.48983644385514746311 -0.0094498004569043263928 0.1235376172552918872 -0.013103740937966899469 4.9870612891169354697 0.93766560936604415044 0.17891373899922946578;-1.0209004159164702941 -0.48858005900766898755 4.5072035834900736617 -0.16811426942228277492 -0.34896363903892591019 -0.43134805177562851597 -1.1904856884904149172;-1.6283249682919536117 0.80478282315981497508 -1.1071742854651698273 -3.8501146226765197156 0.15878205999050612474 -0.72171428675832416388 1.8110442135678019859;-1.7237907794161835273 0.19331867262246524297 -1.9499669044065159884 0.37326230498981916028 -0.49557071221980592002 0.92748621525582453096 -0.2429256933107735994;0.38201967330228081554 -0.88139026379190910099 1.6605366355304598258 -0.39032959075377554603 -0.42038011538250935617 -0.13963266692848441686 -0.90640112471997180688;1.0293205171580162016 -0.47925299114334163342 0.26548100162506882427 0.5874240024698405005 0.67466035479682950893 0.87353741933632345074 -0.60753031832146775493;-0.48955375806574580322 1.2726057940733315199 1.9549875814256840734 -0.16082563240883568367 0.70832286761258522745 0.019734489534717750137 1.091517102456996291;-1.042082100793243038 1.735948294627857269 -2.5406883794294152779 0.38163597439162566527 1.9904241050663733503 0.5726923097222891279 2.6091154308774084924;-0.010313704993590152789 0.21769950515184519069 1.408693315751120112 -0.076859856628647957311 4.8977749573278464013 1.1224959121930468964 -0.23796859698905981073;-0.22523203984794162857 0.31991971338370567279 -3.4814770786514395162 2.8672715241143920117 0.0819136498234151883 -0.038259616841743532278 -4.2256663387472910287;1.2794978008461215246 1.9869580524705263702 1.1771161871038795521 -0.29676228923143943561 -3.6464052838461671335 -0.64994967950090654085 1.2909515879707562647];

% Layer 2
b2 = [1.1968031061182098362;-2.8667193223379596745;-0.57214446438843458154;-2.5661435618655574764;-1.9488327302532675311;-2.0704187157086204607;0.77444649251499397824;-0.47653650363199301365;1.2708403051447405563;-1.1867741657482155926;0.12263951195972952468;-1.6925970797105218679;-3.629311550084667104;2.6888548312767817094;2.731490172902153013];
LW2_1 = [0.40519468723078583272 0.59943547268488517332 0.27032572096346518808 -0.44535666002809026764 0.53351674266653736911 -0.010777635521918137868 -2.0483244292858269198 0.23033176772314276071 -0.70323772882839641341 -0.073858415387687809117 0.22392148230114947149 -0.39668138380430295609 0.01426398812685033754 0.048462550988781410988 1.3515675632601644729 0.75683520838115203588 -0.77591555773915144023 -0.83958793778927642837 -0.91393236613496187104 -0.58437426056071617442 -1.1491062707310428781 -0.8677553780578549647 -0.87358476813912999681 -0.04059727982376262756 0.33821748507510962511;-0.11040566431698972671 0.31208999812128374041 0.87545982546564671267 0.64604209580710258987 -1.2814804002898991797 -1.8089589954544724737 -4.163680629957624113 -0.27939484961852534273 -0.63607951427426578928 -0.86657903329813701365 -1.9403319553875519876 1.4589135963128818663 -1.0544703508823405347 -0.1437472004798802383 3.0491763195869081571 1.8511075702659376407 -1.9585345105391358533 -1.7285552191273612088 -1.7056514363084889219 1.3676560385577005707 -2.4882201294473356157 3.6012072105953829571 -1.1990643308565551717 -1.1469003671990720683 -0.79394012198501329181;0.36018302276826397179 -0.17805786308184637368 -0.88938353937022118778 1.1226600506080317565 -0.28067398398144288718 2.1659978964036983307 -0.50070800255280345503 -0.96102539768613504112 -0.63612260168487511081 -0.21179330383035030461 0.42802120738724480642 -0.83614128142286880951 1.8204297087369298858 0.27377920735074040559 1.5040698543137964727 0.29863592964587115652 -0.3124888650657759448 0.34439208141700300425 -0.51445150281065687992 1.1747285147063390998 0.7679053915196831781 -0.76603306644483415422 -0.88739237054957409434 -0.19599481880692687374 -1.4506868677327973138;0.52465880722696733862 -0.67992069469701954532 0.76336839398230915688 1.4833477499460956395 0.3396611747921445823 -0.84555733561058643577 -0.12086645320700353801 -0.37767422961362934197 -0.24907770236129184172 -0.60084508310392703567 0.45152487775136584958 0.0045987452202793125886 0.34117690807997858027 0.69532224840489142981 -0.70047710175026733914 -0.60811835368039057759 -0.18151381326895588142 -0.70366632978510490481 1.7050304926662396277 -0.82679282708884405118 -1.1111370104764419775 0.5638438598840700422 0.075595309516864411803 0.2208393251964958226 0.67488006786562682038;1.2175954561479955807 0.21077600676229457655 -0.057758991978932812394 1.1156918748844499856 -0.32307520894506014386 -2.0331801258791597498 1.0145292393225744387 -0.64347418432174208203 -0.37313798072257209348 -0.29722600721299180515 -0.40424312900235409574 -0.4990873744755748298 0.31079686738223660791 -0.25167343694760152539 -0.16252400127358393456 -1.7643915804610286191 0.62425450583199271204 1.2350074901695842211 1.1608437740966219831 2.0381597379144649196 0.42433240763739688006 -0.89907839038812653598 -0.052244933158178942512 0.57261332951419252613 -0.63369143842932906807;0.9993173477313348485 1.0662672461198012819 -0.91661102706190356049 2.3983706690138104634 -0.055771454161789760229 -1.6069718271497073214 1.6791266837103622223 -0.54629576796999823607 -0.46309181364196944086 -0.25519860291583001954 1.783006877431950965 -3.5269417107012408508 1.1939100954608707905 -0.17212946829395203707 -1.5578939867746099956 -0.98678942034538985606 1.232852800131848392 0.063281438299447975715 -0.60582529214553404451 1.6970458024754322413 -0.23383961578631384803 -0.22529841058501709483 -0.57139281775834882549 0.70898644284956113815 0.10295051927267270808;0.23496064497575519514 -0.60369276269655558487 0.30823754686069121389 -0.64378582246280413592 0.50686881475394840457 0.15769544122690098975 -0.72154244369518472091 -0.072075629495199605712 -0.80968040572357080631 -0.4495631526083125884 -0.5187836768557405609 0.90980512553731318626 -0.26581773241537898222 0.36906305525480959107 1.1251706744300442598 -0.1658078338893596293 -0.53358879716075668931 -0.79422815048995409892 -0.41365719973580800106 0.10586419062390986512 -0.1510149438630942198 -0.39563785957328440057 -0.72030278018432292164 0.30641410943655938981 -0.1443831211604625353;0.59023825272848540191 1.016254826137281686 -0.45252937931060982502 0.8640934365192252109 0.27639101191370418764 -2.4240376427094361134 1.1466254675793645657 1.3811166784943291752 0.14424775831328165432 0.039135334762455037394 0.87711408402305934828 1.376726027339622016 0.54663037006926773476 0.00079712751853588600937 -2.5024748241399987769 -0.091093381809239995506 0.60582637957767893067 1.624413727783203365 1.0006562814378150428 0.251413583449037914 -0.68538811148823020059 0.81280945478668087389 0.45161102504384126322 0.41786296559152724672 1.095906675701402877;-1.2269833767546933778 1.2280953988715193059 -0.11632265815786647922 -0.9283498442034917586 0.1212972104461321754 -0.33752539664116526508 -0.34187406177729856571 1.3410169074384126198 0.66679557256489740968 0.62673251557747822194 -0.25747913947691958292 1.0508569282207829154 0.57678793276991280337 -0.30612362997771824791 -0.98394096858092283675 0.16498045825756540994 0.19059668888884237492 0.86296305229773517809 0.39035193160868086881 -0.25446296369001908388 -0.13011656813811678379 0.035508794399718580925 0.87598341224471121258 0.041303310224999285893 -0.049847429544486947239;1.464364595757329468 -2.6182388593356349382 -0.035121249921188667231 0.060580507453260760975 -0.72376768019262083254 -0.97396279111452987998 1.2997065720302876102 -2.0671139834238614341 0.89123681102072493943 -0.96373303388146613901 -1.7581669571912439398 0.21201186425384316303 -1.6612712690098159207 0.09906011136422937513 1.0676293533850937933 0.57021318892661088107 -0.19296426945989719748 -0.038218632066524794999 -0.36053924050808544566 0.43036830641464834946 -0.72838828515826126164 0.64320166845438009329 0.23812223688880196359 0.58492315514502790652 -0.050693371386661981171;1.136915832367691781 -2.3116690809961011333 -0.3965792194311095753 -0.40874666878852938812 -0.89642296761658035731 -0.48107775882396669465 1.7834239775604787681 -1.5686591722421450168 0.23037226446294783999 -1.1326289268170581792 -0.072840056812940270903 -0.53831593767481233925 -1.7986527146179476233 0.44886317178301016195 -0.017235502428176972811 0.22752910592353961516 -0.46629950904267225553 -0.63832106318788095489 -1.1025470140430071453 -0.346518742671179103 -0.6928917675352214145 -1.0417614419266174597 0.18093662352781703095 0.81400895983092647068 -0.20800727747150463132;-0.32934868854900634094 0.084652531640706227267 -0.51022004515981878026 -0.12945332131272949128 -0.49341343704290802075 -0.27577715332768304446 1.6404890877200490884 -0.33853814621453648392 0.77542294066524675156 -0.014521596338894533426 0.53314661466839152748 -0.85938740870179453069 0.19392427789789645765 -0.24270189625270377487 -1.7629117818549104868 -0.26156640469198311205 0.80315110037090020612 0.59864155889282899548 0.26153459726340311242 0.88040360923055804854 0.77604955108167861244 0.18574575445391991457 0.70139806938126103564 -0.19784761475341103298 -0.53336407161592491732;-0.92001615104789902233 1.0476968639155705976 0.11472274529764839301 2.8698121603076698349 0.028247616515072737631 -0.96647334523164618592 0.57224459587224130175 0.81883348830563451592 1.4736682231244950803 0.7272869582502788921 0.93211189422557749751 -1.4582751289075770451 0.54113343994003426651 -0.59915047112961505871 -1.034750946726870513 -1.4829442521233731078 0.71231248139282221654 0.69423361449527687395 0.46837227445553897276 1.3144759616393992818 3.7962419121828610002 2.1337472717053733717 0.42543268918830817737 2.0567195750676350308 -0.8191126368235448485;0.81162152058381931141 -0.80466815615978215526 0.88486786094303759853 -2.3723509482736582221 -0.45056203360869906405 1.9279845320546491472 -2.0236226126794787383 0.9889099907848862836 0.10504755017263472938 0.99979899754018752844 0.11088385387710426866 -1.0964512554764156427 -0.41320578881694913775 -1.0446557501096593867 1.0782332894457509198 1.3944151516792706591 -0.42696345547350222915 -0.23281776365656239869 -1.8912174369862206902 -3.1805034799285385461 -2.1822866005555745517 -1.049688499134229458 0.90285565685910929012 1.2436471822687771294 2.0678822234210478825;-1.1118238748452020648 0.95653365479514962377 -0.57090456737793493502 -0.63096064431039533549 -0.26986532215896308351 -0.0078622133130127370981 0.77766256912087272646 0.83094170112936960315 0.76791530237748073517 0.63920608400328515764 -0.31671799818360146794 0.7167209858217584717 -0.004482180240468009759 -0.18774784246829739898 -0.58048727284100387624 0.11366386319159607621 0.13453281783491072288 0.63186414764912712805 0.084510407170676954403 -0.75741314118572511394 -0.19304483961553900451 -0.50605049458888495817 0.77509678857511177252 -0.25205948214778284289 0.24075744688122593939];

% Layer 3
b3 = -1.9224402732849219522;
LW3_2 = [-1.357376370906037133 0.2426658192103557099 -1.0736613857685615159 -1.0999338749294647055 -0.4213447063148494931 0.69136322283662487997 -3.0607426802763879614 -0.80362365402933888525 0.90008030833760566125 -0.40759776408384768009 0.49380576549391064223 -3.0763352791287768007 -3.1703534832147650668 -0.90923839067414369275 -0.92373853105861958301];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00368391969055075;
y1_step1.xoffset = 13.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
