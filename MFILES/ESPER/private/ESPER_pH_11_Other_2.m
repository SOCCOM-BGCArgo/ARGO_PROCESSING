function [Y,Xf,Af] = ESPER_pH_11_Other_2(X,~,~)
%ESPER_PH_11_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_11_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6674040241308305532;-1.5654384134588277266;3.1988197293797941967;-0.14960174945105195188;2.8179401132758985504;3.3736451247898262551;-0.9803054304544269737;-0.82627874864008055145;-2.3281735123537798948;1.0220273570931848184;-1.0656725857461313289;-0.0043232719703456363655;-0.93607197799225194679;-0.4421315338471231704;-0.45088818880598341421;0.67992974467303590735;-0.71606139848243166579;3.0176130866409196507;5.4805721340374109474;4.0715553477742130184];
IW1_1 = [0.62907579400468593978 1.9652179332777799381 0.20925207781931404183 -1.4907456437165973462 -0.75835292660498887507 -0.81928535250046019556 -0.16896027672468105774;1.5417188640427885726 1.0380708802837681493 1.1680249923413839053 -0.029402487923696561667 0.1929295886789234582 0.22046536248940945546 -0.0057411797130979182885;-0.47633226915034704296 0.25882145219165775263 -3.9485527915494205153 1.161783967763535097 0.54095989548233114341 1.3564342203039769785 -0.49989004246109020047;0.16568984947202794467 0.19746961072792254543 -0.35148489849319147771 0.32843570627962093145 -1.3388348979477158185 1.7291278135396490612 -0.21187939171113034931;0.1316817817210269026 0.090352066082719506568 2.529838557766868945 1.1464062666163170601 -0.34141196109240784518 0.25990998204841703201 0.87506549517859755216;-1.535445040603353295 -1.0540426127274402646 -4.3901697183543122449 0.49665813867565300477 -0.14762792211407096965 0.81688598370833254148 -0.36432467160576265108;0.42598658183542270628 0.47746129202457060492 0.29663916036603116266 0.48091835303926178113 1.157080325763357731 2.2317501433291759838 0.0025533614659756309964;1.3057751781263400304 -0.72592019823103459686 -0.91864806586699399027 0.57235868072397388939 1.1461527001728539776 -0.39415052621797141974 0.9091386362770468299;-0.093751636822677786309 0.028749593744050061517 -1.0571908572728159204 -1.8114882045688116552 1.4745619302617301027 -1.7676109020317272158 0.27163405051193434403;0.16251029339699418763 1.2156757745613544497 -0.25107515087953730104 -0.47705337896165783684 -0.233720278098836165 0.16211092208528396497 0.36313611795307548791;0.0064184052697717859301 0.1548032466865226775 -0.73635959353190172383 -0.29946760328146421193 -1.3580917139816697237 -0.50204908571009709828 -0.46013221119310948604;0.34707064629729106331 0.030322215113483388937 -1.1476746626484983782 1.3025520717512237834 1.1833725434309114721 1.6218027677942621345 -1.7107709145699594444;0.084683309793646119323 -0.14745675437529445762 -1.0720786671406310475 -0.20305663186967803924 0.35102492090164738592 1.1581034496651749777 -1.6143798671243638765;-0.7167756031148292406 -0.096949638516974065428 0.63637694810369804799 0.28708526566443082206 -2.5989244088161744806 0.48130493227984627591 -1.1570589355037164125;-0.34036539461734094392 0.016537418783592876259 1.1472882468921874466 -0.83198875775613301276 0.66282335748009690857 -1.0264098701440189654 0.36099235023719444815;0.31160447488949810646 0.11454366872580291903 1.2959762105094352336 -0.17738249742969181 0.84086632580883080568 -1.4972971861620776313 0.47494343773824421184;0.017371058782546116434 0.4903767564946685531 0.84826720158654278503 0.71127896104449273018 -1.18056680059510688 -0.031193243169382819241 0.33635146446495672867;-0.20478880484147399255 0.11935849018285429879 -0.14949171294254903763 3.1168243361067857755 0.82607293637585244017 0.87271574878275481879 -0.40046984585554123992;-0.36413368189155059795 0.29487643078061781532 -1.1869996740189749929 0.14315092445404450916 -1.286994208373068993 0.564969507013627803 3.973502288311669961;0.29937632921203005676 0.92306005692029768905 -1.5688052537941017395 2.0784237223625905422 0.04162376876403018483 0.56862780636471255136 -0.1990207728503503859];

% Layer 2
b2 = [3.6467065763066623951;-0.019628327565112835967;-1.6722019593619434907;0.0008436465778204338406;0.36767699757873489874;2.4768707886540108909;-0.43927275285878791822;0.38393132640218291529;-2.1318464696446368656;-1.9959002360079567406;-0.11384163997016330527;-0.5086066915803328925;0.9333928569664510233;0.14826262497724695955;-1.3404731992150260567;-1.5712294154726302864;1.2230632666068013137;1.5335562214733653441;-1.6155143902927209254;0.79277589326450781382];
LW2_1 = [-0.010603389308716053979 0.031700133605099461986 0.59914863995928535623 0.18710702729690578683 -0.26983808236923556567 -1.1100239308990997866 0.41126856122159899387 -0.17337164724847217712 0.042791391501764169947 -0.089284692013458649695 0.013459631388240704888 -1.1583375585853348255 -0.0042489934746789961503 -0.15818943827119491541 -0.6092381814804840312 -0.20601289049080226401 0.23760753093577097195 -0.17880540322154031552 -0.081839298257074394316 -1.2104047471444028261;2.6448002563089696437 0.30044454715827101365 -0.48570244222240033238 -1.3719729578060835262 0.58003894865790273094 -0.22995489953173298137 1.0713736280100545351 0.58524631920566771992 -0.23972096441747489659 0.34348677221920109748 0.52291460630813790811 -0.75823053300856857462 -0.42869578017847714824 -2.0835431797930117348 -2.5125550188282321784 -0.37364145761645212174 0.45720915645917070691 0.64124053739524322637 -1.8189990203140629088 0.96618031951351812658;0.19124434397013465037 -0.083995745679768751835 -0.531268798303146772 0.61100179564478696026 -0.27164464003509308787 0.73691083913939448014 0.019357850634622864039 -0.26996534801845573082 -0.24819065933395664802 -0.13416676297220953007 -0.89415722502525096793 0.1069533600709935417 0.0069670719619717227933 0.048325178234654743437 0.36822677760917271739 0.27231044182672148324 -0.29373557750566114954 -1.1268026797533046146 -1.0997582092964519607 1.5431408760360467713;0.29085955192632256816 -0.24218752774197291333 -0.43072297774038409424 0.96509809266060053723 -0.19057022705299878074 -0.28517139521151890769 -0.32106993556133156531 -0.019941167329390753482 0.62629307872660555656 -0.096884064572763523016 -0.056867955651100803027 1.1164422925107007067 0.0080670884262931501218 0.60761234236908234774 0.58630894486103135588 1.0944977439098562133 -1.4602418139150250553 -0.24791654008526239905 0.12949572646668505715 -0.90625459526312390768;0.22641425197640047129 -0.57143812874966948279 -0.88317647702738810711 -0.12025870800429509788 0.0090754056497357772637 -0.50847354111810749711 0.17510587225616136564 -0.31314853178271107037 -0.047107654697479114936 -0.90093816740474885751 -0.28745556106733249901 0.37611086303829477373 0.42188232605815328968 0.10970567805453480814 0.19590456745920906134 0.58163100964611347266 0.35975569828940956452 0.8906913166203525023 0.11073714780810975378 -0.29196206695685072985;1.3362309543940680268 0.26359487427183792008 1.3999272121539483305 -0.79620051563901117486 1.095818849433420672 0.58876668611962046374 0.24896623343216675583 -0.30150511620308295679 -0.53585606735571433834 0.2171171206621008154 -0.79552771653989950984 -1.7737778569811639695 1.4609491773733573883 -0.75045649398001057495 0.049197817074031674478 -0.26355948730975253813 0.95341229272276784013 -0.49039455257641639818 0.0056112642445064276134 -1.4476801302783270931;0.92731795712100206774 -0.3522447608277904374 3.434513072004643508 0.88581146875286709275 -0.27815143070930758995 -0.090796377322578128433 -0.69708336800713610604 0.0050059884182297557931 -0.011180019251593871846 -1.9094390028412333571 -0.86909730518909900088 -2.2806175352416797608 2.0087349520129906821 0.074123261470486714875 -3.2780305678479870757 2.6392358978005043824 1.065968839397496648 -0.8148528364695715176 -0.41242037104442569317 -0.15608677823033900722;0.68264240306765266997 -0.55375536259413848938 -2.2720384977463425891 0.32204933899597820712 -1.0963610568760036035 -1.6647470144187506147 -1.3579880676715812005 -0.25469392274657143282 -0.32969662670264499038 0.48714813704386539239 0.87855670909502703303 -0.89331324303454873181 -0.099198814010844418854 0.6545462595901954117 -1.4365010333362815409 0.18009866137514726758 -1.17407919140113437 1.3138092680200561535 2.7024331663119394165 0.14411065346975326928;-0.17466184787844163395 0.41435948518660542517 -0.26648182403197989698 -0.048118246272011916398 -0.2380313490140137378 -0.92288366128021437351 -0.15133206741920626759 -0.21232291681575618525 -0.13031610427576081901 0.67282669088587898631 0.67523993981031649181 0.73438713074785566537 -0.94387011890087657573 -0.51846632368123812817 1.31857705781937673 -1.2009782841635570083 -0.050990114422565992192 0.57274036668022842989 0.47171219761176380603 2.7863572870515240787;0.10748863941987853166 0.40848513595649615926 -0.52732349742440731699 0.65721329335891698342 0.95069049888627177314 2.3498398462156191435 0.40281013696191170226 0.63384930675460471328 0.5188050481497884503 -0.66170134903353472478 -0.48451433069539517895 -0.079034781210354260184 0.81919553064016814581 0.56136331478189649413 0.75836637013100371973 0.87615708041267703621 0.1336749327618835248 -0.99733853130445782043 -0.42265239969963125377 1.3605959160878995373;0.67266755127348720755 -0.58484759055103330283 0.59219567032205411294 1.2795423968844685803 0.060059667811604704191 0.027457296394758946845 0.087116152601569490921 -0.47474624664556991371 0.42611448293526571485 0.72788397046442121496 -1.1996954469873162274 -0.63217998617281412344 0.20919554948689933482 0.53098594568157464479 -1.009424376390132938 1.2290848833418566155 -0.30899721742844088457 -1.6318699436999943853 -1.6407110621640981218 -0.17832753850207788693;-0.15262898942870017915 -0.13488013639278256806 -0.80021989402324533724 0.51961670618852351389 0.20304924817471750598 0.12118867235523800296 -0.49634035741949733556 0.21605992901726295274 0.44627135170870696479 -0.077246122355206059407 0.3646781953481101346 0.98145885396181231641 0.08637401237849645641 0.44835117291823756158 0.32267277985238995708 0.70927192914231274035 -0.78725007856212336765 0.037877717306352608195 -0.17571593993963807723 -0.14434215522307969337;0.62523312906721806304 -1.6339558086525456382 0.054669682535218366848 0.412593954923130668 -0.64922666647118842942 0.72772950213282616705 2.4797380108634361484 -1.6858234569099936895 0.3397984192398180725 0.86519478280633832501 -1.9741393384106107334 1.7115251828037272297 -2.7310897798841384798 1.2169246660181358699 -2.2222094989917984265 1.7752714055098823831 -0.45482154082331271994 -0.41384906361072859582 -0.27189571398234452237 1.5936978588220875874;-0.31867958190338896429 0.78328720527302586607 0.0051721932879475497613 -0.28256434937605506841 0.21449710171735666964 1.4225356993069353528 0.62053159103853205991 0.19543832461285801094 -0.64583561966205549343 0.077988373160312318699 -1.2677714788577765237 -0.51342464735191839509 0.57383882834139110507 0.41022224658690598087 0.14552301650611620953 -0.17664514968913863635 0.33062365295691964473 -0.1424609959832068562 -1.2647490598648107873 -2.11277563059584228;-0.53524438745501168313 0.058972085028318764477 -0.73927279512099353109 -0.17975324050087937433 0.035923986413199882062 -1.1296729819720552346 -0.10901793094864560552 0.083055844939290898732 0.39352107231675015342 -0.068529191924126722779 0.084221211363366965674 0.27477292346208176399 -0.07495216931704065666 0.17213711259776387497 0.0082548917375367195093 -0.363924358876462406 0.18216576904905099066 1.4577908752020398708 0.6653566661685724748 1.2102623514770289859;-0.73875462189557106196 0.78607843849756120491 0.75909936704024560949 -0.98964668475114991875 0.20003063066995388497 0.30613030837571386655 0.47119843924160365045 0.40771541341043920914 -0.17167303720830823233 0.53923952717284584502 -0.042114454988089841669 1.1098442158411441216 -0.75053182942001572808 -0.33588057416829286694 1.5117324485758054653 -1.1612274756892162486 -0.59169338655944381244 0.3869895898027813641 0.87113906802679719199 -1.4945803327602924515;0.31754696323904008093 -0.19995149364088066202 0.45653772394445041316 1.5957870287968174416 0.37158235813353440724 0.29118790297171665005 -0.19430051153384145235 0.81609915074684125091 0.29330641472541330028 0.99104520756558323047 1.5165009722962927707 0.19417450233244412661 -0.96433096124327044585 0.33830443316589592362 0.22314780649435425608 0.12335462990498358149 0.1992267788572416598 -0.53606725209553551803 -2.1688384813802028539 1.1491146337446378478;1.2287922267873436777 0.3595927693115196222 -1.6446335051792770887 -0.8983220599360277614 1.0790887125331030116 0.59411005952732998114 0.16652346285819258354 -0.22820076814828849088 -0.59831963025916778953 0.14217205771700855421 -0.73456143377682348028 -1.5377616441059374086 1.3599471546388679499 -0.75977935903113791305 0.19423490111978236605 -0.31815787150886964962 0.82890519520072158954 -0.43087170217283921048 0.57891400106231893918 1.6792295678580373419;-1.2911309620067734638 0.97137372078069872394 1.4548175329770953734 -0.37933271243189453648 0.11889124790865659986 -0.2399761993244932945 0.59480961396659581819 -0.028308685950910544848 -0.81110907139075483219 -0.26617063126475348778 1.0193629508454959964 0.50125527499547140042 -0.78985305541619021952 -0.65079731038515953312 1.1219960511300539618 -0.62583064251619402452 -0.25482376512868376572 -0.15983790921514184902 0.039813402585962207048 0.57697169605974618634;0.17826413283776143537 -0.18512132926152080614 -0.25897097193259066561 -0.97136827829974570214 -3.1481161685445906429 0.085325144783787235103 0.67063944393772223496 -1.1392995331660058511 -2.3857867658244984455 0.88976208463457084896 -0.29668197422698083798 -0.42489032386797942475 -1.3439190417480180173 -0.76950076485129581538 -0.70915560194802851335 -1.0066747906999966578 -1.5308856096740368624 0.062902818995341461261 -2.4633434866492915916 2.1758835856283762489];

% Layer 3
b3 = -0.31732790790257248137;
LW3_2 = [1.4400558668499414683 0.42862719012987832157 -2.4839579271201697175 -1.3796759808352403454 0.90883695876405190539 2.0192819676142570451 0.1373236314151342341 0.14094109574610086399 0.77456013186371963641 0.74295584984672791151 1.0495639871966950807 2.2775414414796011364 -2.0194645835782827348 -0.77214403556432020803 -1.0593679564650735347 0.8334726670620322686 -0.50118924721356117313 -2.038118398557433153 -0.48530526719645861178 0.66292698943171313175];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
