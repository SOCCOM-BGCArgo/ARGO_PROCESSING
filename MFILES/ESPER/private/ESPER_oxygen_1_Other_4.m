function [Y,Xf,Af] = ESPER_oxygen_1_Other_4(X,~,~)
%ESPER_OXYGEN_1_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_1_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.65827527687597497952;1.4369672113154157156;2.2023776587395547111;-0.35577685640593020855;-0.39358644893637850792;3.4636258443535465901;0.34661013611847873994;-0.81633603744115657008;-1.7976630282788645943;-3.6527171640937781127;-0.66013069064079510362;-0.25539550114194159436;0.69316979397194156132;0.35877115045671215121;0.36155831872507621094;-0.18385915683181638935;1.0069281251281132494;-0.064448327281256712062;-3.2055002837331496579;2.8503383962753439107;-0.60844454533018355047;2.8798742519484701319;1.8139435251383650982;0.25993283667418715099;3.3700061692623339837;6.5838739189455433021;1.9660069054362128149;1.9288002934321193393;-0.045408015334433060595;7.5724135739555000768];
IW1_1 = [0.033151151416245722148 0.32460453967393265717 0.2936496941017303075 0.34151625304353488977 -1.5675850967490896348 -1.0782622423458809724 0.29946777748780623041 -0.72473976685528940234 0.49831649386159043713;0.31396326612281671986 0.074670430329664153057 -0.5739479447588468064 0.48170801091345311074 -0.92023408504144477149 0.76073129697471819632 0.042206065997653766098 0.49619350957112356992 0.37905475773359287306;0.92271609065265525196 -0.070900666641005707924 0.85916757189118864169 -0.27386497021573830146 -14.058812386190416177 2.8919444395659761327 -1.0715422939239975797 -0.5912963739517944628 2.2544907538008374104;0.56877017122455664211 -0.10412476341565460314 0.11766219196355412469 -0.21788671774772536138 0.84195522549953349944 -1.5241042731585723313 1.0717632548746327537 -1.3420346360364929783 1.0721944835610501823;0.76102022138783809169 0.77513383028918225737 -0.93972610707544845798 -0.49655412478059496317 -0.73046513591643924546 0.35479819049293476185 -2.0837275416053122612 1.4894701262128020591 1.0586541847362733737;0.071952825588405322499 0.13759593789884030923 0.10476651327861001561 0.68272031731180804481 0.25132784145557329758 2.6753782266124921385 -0.61917266140020765786 -0.32663172534617196385 0.02265964165378123174;0.19264543905694681003 0.19712661857888247319 -0.36859732573680514811 -0.47843877599368506148 -0.56797685293086663805 0.83463094085110345333 -0.55097821841579763813 -0.088919513080081918899 0.86741866154813951351;3.2728695412644208673 -1.3438057274877424074 1.2673236941175540782 -1.8389163442901796941 0.035315405050606145376 -1.9916993733182368764 -2.4030578085602560812 4.4521407111484814223 -2.9620887887311169173;-0.32896305886464172197 -1.0723394205529706014 -0.089910610176322888765 -0.73235867604365312289 -0.67445615475927012117 -2.5306203115638195023 -0.62155951840182788182 -3.8893798033383961688 1.7551902801907655061;-0.030571379294285140615 -2.7558862830886248219 6.2613662046821652041 0.50112575572600226437 -3.9169028218281090048 2.3786226112300385971 1.8780454633625993655 -1.5387994877027235674 -3.5690640110260818396;0.22124687186518296467 -1.3032952724662731914 -2.8306621512407441621 -1.8000481703823547619 0.52521433310543808037 -0.14828955206756627705 1.6009355141595733585 -2.4048405724984425191 -1.379761869425391474;-0.16045150534453564428 0.11745730003817915488 -0.16680920895869250087 0.3987218955406724441 -2.1154228176570271103 0.51747045040464756394 0.14773159632789781281 -0.27794078998943938519 0.840384020593334502;-0.31831945339383588278 -0.089492087772033254711 2.2687795626163858032 -1.7375616353837701755 1.6318391788656321229 2.3499143405631803816 -0.1228825104035561333 -0.74451329064788707157 1.8457470684390469007;0.038972613710618719818 0.083890318793388693464 -0.86289631399681865354 -0.629268429771240978 -1.5076773248784871573 0.66080694880628787491 -0.17322908532033418072 0.5109674605607279485 0.8296716328550768349;-0.26409685317350528599 -0.24307820049121459105 0.28119569427095914005 0.55270322136544336455 0.059145811744294007894 0.1044877778502229515 0.7372844564365116371 -0.054017890719938094213 -0.73203634563484121234;0.63298847831559246213 -0.20438728285463103607 0.41966987580157083526 -0.14675907535212712185 -0.70928663140985537261 -1.2263721539261835947 0.84563914207752632901 -1.2794187502212071017 0.6232296015230548436;0.13449331597904071178 0.062112021444708509499 -0.49075498437543579877 -0.54221245577413346162 -0.74570120959209884592 2.0344486431350832234 -0.19049100471150087754 -0.011623666609233406291 0.86656364822002940329;-0.015221434079650321761 0.38881409541809419661 0.59787179485163155501 0.61581821152112714568 -0.44988533308947259437 -0.33466073761182113522 -0.14325314845187983592 0.040481169658645135834 0.2770383309233601099;-0.18411679381604631467 -0.13973992735868343007 -0.74910680157414366587 -0.31763954002906247265 -0.49671213485662107923 -2.8426962355444675978 0.54529334795873574127 -0.042473394785523789496 -0.058573962534702456173;0.086111476110017862173 0.16833754114791424361 -0.59106044873558294395 1.1922655812398046393 -1.0851003185260008621 -0.76013983400648632571 -1.0889408235745563491 0.12502694329567548559 1.0500911941090445012;-0.30052607772511269468 -0.074017121625584103572 0.57949648556453503545 -0.15057686540933248875 0.4432797388698466734 -0.9178545182335855479 -0.12503568750272042731 0.076235179659175034139 -0.23927319081833903214;-0.0078970411212199338735 -0.26358868767385318366 0.40562356217396644542 -0.61831521538227607326 -1.5597279439996254435 4.6424894486925447623 -1.154289714161814473 2.5746163212538442089 0.37019921773840863688;0.0068150455472532145765 -1.113282254282151662 -0.066333581710729866421 -2.5508576309252450898 -4.113846279846366194 2.0298757345354196957 -1.7752245981723784318 4.4975711308735304428 1.7821757471458632427;0.34594301506159591542 -0.11839265534647189226 0.2078137327425451375 0.66449909827059849832 0.22910960747859304698 2.4263651013663185552 1.8112229179474943486 -0.49513626061091964292 0.57214204037618965337;0.13049449813944744014 0.039882052321989137911 0.79360832123138558281 -0.16523739298956513499 4.9953802115904073489 2.5776472324987595997 0.7221386885652743004 1.9327369678057657598 0.36872741281312315653;0.30642622964777044281 0.68499907686261696238 -2.6992821450198820621 1.6833271485262841782 -9.9283796265044799156 3.5161623944646356321 -1.2824044079888252679 -0.33548299399692904643 2.8215669786481760717;-0.14041425239948274184 -0.072691238190750143144 1.4549282449494582714 0.08636992427710848963 -7.9605139126156139184 1.2616568029665864437 -0.55042533160859641317 -1.2306603712951853513 -0.65208433176598279424;-0.81952438502917490659 0.67182163231938918369 -0.76428619916777307264 0.48597110474718702156 -4.4581397418019159673 2.2309408904588901024 1.0522813579141685469 -0.1452485259624060332 0.82699573940357595792;-0.28294662050527413788 -0.42875265186293359809 0.89951970387175039789 0.30704169759820482133 -2.7991855677538102221 -0.40301908392345414667 0.63294278037483697741 -1.0291370640628192401 0.60575871774150813476;0.12231538960070370559 0.040647692981245840682 0.22741400700059605233 -0.25005725005195744703 -9.7799159858567890069 7.290208685356360796 -0.63400739959340990382 -0.26245559976276711112 -0.081737373443995148259];

% Layer 2
b2 = [1.3707798296847339969;3.8644161194254769143;8.3668542102200635924;-4.1161337330088203501;-1.2874195497908491603;-1.8332515370805111399;2.2123571085748836573;-8.5573713607007810822;3.2396503969018755065;3.868085266932135724];
LW2_1 = [3.9639537787850076533 1.1297463934927507445 -1.5061047009756605153 3.6127691182732681874 -1.4700212110779791175 8.1646300454846496564 1.0053745649318741595 1.2555482637158283943 -0.92122598593579074766 0.81969361242113114585 -0.78669270724566997544 -4.5736973607570181599 -1.2378907807793146922 -5.3592985512523716451 -3.5453078115779939061 -4.2262600429814511926 3.1748069664372056131 -3.9959343707323529138 11.316467116038017693 12.209040927587254899 0.58032703617179071109 2.0470055213412394757 0.54835905433202980497 1.5561650973012159938 -2.4568070746488519518 -2.057794881037525947 -2.2785811379236133867 0.049332719240748203193 1.7482876903984376771 -3.6548281591583386962;-0.26345104714877048968 -1.4674191140732990579 0.81260508737570136262 -2.2324953115697718786 -0.91836961596938915253 -0.704122076970448596 -7.202775346396092182 0.12446233176641784135 0.66290152855781292462 -0.67405600871623772008 0.46842250012653185998 4.0272327318041165611 -0.36343224818021074851 1.9261400396588328476 -4.4470713743422765063 1.2868799963633075212 3.0471590448899625869 1.2299281516566951122 -1.9367418333188430868 0.12747349534221275036 0.67592945490180555979 -1.0334658209418066122 -0.10403920001572007636 0.22174110771566293843 -0.14518215303325204824 -0.77182187483164788055 -1.9600800784991458947 -0.071260069046122712089 -0.57306685739228890863 0.2630499705411136202;-0.042631351803507980258 1.4465885642668945277 0.81914471187767101679 2.2753400364329983141 0.58706901365839403439 -3.7309184410661675457 -3.8343695257256604769 -0.43523752814678967615 0.87948104769219170862 -0.50007744823934463518 -0.20037494683764164871 1.7338559480115995903 -0.68512268162466916088 -3.5433428541128155764 -1.3349780794611685319 -2.3133181795142374604 1.7767032297294194088 -1.6054244076246020345 -2.2304201160707681773 -4.1162661011338377293 -2.8347296888256430236 1.0946369261922415106 0.70854764951801574302 0.96631532255064633841 0.19660692295999965262 -1.4818964447805744733 -0.26679966299382656958 1.1851323186200772852 0.12983532743098760709 -1.1479736747911659656;-5.0579497747033839161 -1.1204280913431987621 0.15955157384682858157 2.4908314412721392905 3.7297157343283475761 1.038359112257394079 -7.8520548984867337694 -0.19950721078412100851 0.44223757960348586415 1.4484397384436802358 -1.4578466396513498626 -6.8234414281804696145 0.14525789184227749784 5.2466576478076110135 -3.2413196270719866199 -1.7869318237467268773 3.9261458232030159721 4.602157234876776748 1.9590023251262618231 -4.4958083392881258433 -1.4266547691933182396 -1.1540886292164502791 1.0134683402620523474 -1.8497314879940554011 1.5220060905600349965 1.7467163806338832366 4.0500730470506063341 -0.67361077196764895803 3.9369169532949070955 -0.92577762702757904201;-2.3027939186850296949 -0.33978891313505815708 -0.078427931629854660822 -2.066555241784078234 -1.4498745235573888834 -4.6449782858177250944 -4.1906698514559730384 0.037100873548883028796 0.28673655950538795567 0.50004425377193473246 -0.0086922615348368637705 2.9205229610713061561 0.021174327767200833844 -3.3121562479014463598 -7.4883508678503920564 1.1414548945342724018 0.15106080278781061632 0.11392730032178842448 -2.1407916703818448134 0.25622637575470008642 -2.3584553631826490339 -0.2814941337317327652 0.82150363356197320108 1.2793942755996099425 1.4409659404648529346 1.0865676455417871971 -0.017465406925630786589 1.3129791018121834689 -0.8168113010392551443 4.1545041288324906503;1.9426209048277627289 6.4447792775342858107 0.1190602832772816172 1.2488934785147427498 -1.3223668444383482878 -1.0365313643468392346 1.8189755817710544505 0.26199407476896291458 -0.28652005855865408934 0.52143326655073041209 -0.37364305204721420806 1.2690770675908238374 1.0370772245003516687 -3.128904726074426268 -0.62034625508197871468 -0.60595209133115390809 -0.58525971461145831487 -4.0830966632146417084 -1.6328857465609107891 -3.3503384629170565034 3.4063646864507175493 -0.22892071571696578913 0.19413559525396228977 -1.7458022804279116347 -0.25572742145884419518 0.62573137731939454387 -0.89552486673572151421 0.78886774799145586989 -1.9871062182456844525 0.90720297239779146281;1.7104426108445380805 -17.818017912917540002 -0.12901562791761286841 -2.0400717238960139888 0.20674943317824018285 1.9679308548944429713 6.9912947330389920708 0.95600612341101265379 -0.2239781948473651696 0.46347299250441276186 2.728217564348305757 -11.79100836048945844 -1.3501440741714691995 18.563949523754349258 8.3662025180338108754 3.8267378236945495118 2.0488871639362757904 10.915347237725011809 2.3708516729638091647 -6.0044744081553158566 -1.9817138759148142935 -0.2698581735475703014 -0.0647618750597194065 -1.1520670590966772817 2.1737336012468797541 -1.7791049948901476174 1.8812828587583909634 -2.1136391248829942136 0.77610302109088646905 -5.787012044297433988;-0.60424863288594299338 -0.15428479106652454034 -0.27136982701005823992 1.4447791954477213761 0.68166956551084412208 2.0827443072072360231 -1.7440696643831563595 -0.031026131865793494385 -0.24802329362402655843 -0.10547109199579507433 -0.046399766095113342823 -2.172473687516158769 -0.014390534972122377352 1.8990023557782826913 0.79154381801955076003 -1.1456088259486496561 1.4708588400525206552 1.6652696855119741848 1.5274465629893310137 0.76697352069408819553 0.072084960268807660166 0.1281712991331976359 -0.13861466770901642587 1.0887667054310601333 0.50990590537764324264 -0.64740775905524472478 0.94197928000154007577 -0.47462763885210607073 1.0635384399435183767 6.0747403363457523895;-0.86724462556826154014 -0.043251475890218424314 -1.3640357720811289166 -7.612851464722981909 4.1965433866839703114 -2.3255341561383580107 -3.6261605335029858388 3.217300361027190192 -0.86148810564654887401 0.24992196297585261844 -3.1636901916913631183 -3.0038108403276542191 1.3425228184785245045 3.2147599301558544838 7.5492199768036289953 9.6602892682079648523 3.3355804666812409742 3.6602983052091939697 3.1460527925136667626 -4.0120436592219297367 -2.2819956209688436743 1.0724885331136022604 -1.7562007629614633242 3.5797977797465794225 -4.8398086540776423803 -0.93503581707109295618 2.6788712029896131206 -2.2750784792353409003 -2.3851690344842562119 1.3364329267837615767;3.351415853029105385 -1.7449671442295680013 0.68637452339428095538 2.0510374814340441851 -3.0093020727607755482 -3.2177508626076694043 -4.48562168172332143 0.15982631998355453784 0.62814542999161870895 0.71138057356393868957 -0.79937613676642504945 1.1106483231272896717 -0.52132523800909891243 -3.1826172977017739285 -11.138351025437707165 -4.1183172735139645937 -5.7476250087735722971 -4.3092674693564543276 -0.12610128486329569286 -5.960059200579664207 -9.5939558616818132464 2.3076218607265230887 0.96467126133368663599 -1.3379586373036815861 0.138419551407385516 5.6528764717542525631 1.6216265515542762632 1.1823990912579125379 -0.49244485950914290706 -2.6114503862011448909];

% Layer 3
b3 = -0.050489816798341219384;
LW3_2 = [0.03999855453465752525 -0.12938210387977933102 -0.068241929852634997111 -0.026442718099313766017 -0.19178240481018399288 -0.16692841686442305704 0.27855879158725632694 -0.42062790833586966022 0.022067505730418872367 0.1430950262540069684];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
