function [Y,Xf,Af] = ESPER_silicate_2_Other_4(X,~,~)
%ESPER_SILICATE_2_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_2_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.075540781897704079;12.360987206757718226;8.1929134667391423363;40.594195194851280917;1.1738400265273496448;0.50772724034594562958;0.91001937412227262847;5.0640394850325254339;-0.17956367530096162266;-0.42906632876648198582;-0.31947576378130221331;1.911172304805027089;-0.83168229821189820772;-1.0533431536187998212;2.6660368763953901095;-1.0921678624870025942;1.066846181622691514;1.434108602027951207;-2.1812202850069084548;-0.62283846073492488138;-0.75020575665449518166;0.39945551418151753476;-0.75992969134904231332;-0.35611143665876376918;9.3871989555859745025;1.451668285552587756;1.47418904858055555;-0.40783648058280247417;8.3652843317069560669;-1.838907469382931037];
IW1_1 = [-0.072881612032009684965 -0.12851358938117657393 1.9126046447514764015 0.22048959639276297096 0.20890363757002516909 2.9254122525209500516 0.33237459421774928625 0.69605178606015760678;0.6210367777534928635 -0.11052390602727134306 0.24576161280580208213 0.18500041614447132465 -2.206909304123740867 10.882928961210009078 -1.034646403796826819 -2.331584500322139597;-0.68270240306660123775 2.0832615297730270321 2.6341504140589249161 1.4285716663964571627 0.33745870149145529293 4.9721004600968825571 0.8636738096803878717 1.3076275259408267626;-7.9086003586759483497 26.231011602872513322 13.675546547107879647 0.16645802066258516549 -2.8611772750171273749 2.4609949391730032708 0.85503536435006399774 1.4337345208907625871;-1.9521048034701604657 -0.84186113857638844582 0.17557608341791972051 -0.050555677715279460915 0.52529030232260054412 -1.0711292185487559792 -0.67137382968739034439 -0.40715677233625063858;-2.3243506306059860123 -0.46279371032538463293 0.89040867475140084153 0.51471581140241462471 -1.4742097721113076592 0.13401643953000996756 0.67494761859049534625 -0.96705050370440492902;-0.057484608329580286212 -0.24816970275670960366 0.37924756816460958309 -2.2018684088665496645 -8.6167108651505444072 3.4349885138872271462 -0.36789771683771926858 -0.080923895035055481983;-0.34549860424857931074 1.1191000186566364416 1.3166310143318791237 -0.72548515088581566612 0.29030009895822234123 5.5712069051968029498 0.84912935764629560165 1.354051078154691945;-0.21900606607875583443 -0.084314779384902227566 1.5929817252408793316 0.27560961516315563014 3.1736871322309152532 -3.2129114448543023563 -0.39816296085014185602 -0.1510051824003071641;0.059756920088440100558 0.12637994341534475318 -0.34239454240676997498 0.57308688792888529129 0.9938181770036120799 -1.5479264539412123103 -0.44200679498344253027 -0.80687738236113737411;0.076250704026232837829 0.0019484923258874357627 -0.10347950683808931904 0.82705166007246788684 -0.91246669176960293335 0.64455063497733278144 0.57349041163757519257 0.67421609256535919297;0.11268056865058025118 0.36462524805877299938 1.2488814035500479527 0.54241973952763566924 1.5822342178318897776 1.0009386414975662838 0.51436485342726523395 0.42371286230311394627;-0.17489376501509665274 -0.023490476635322315307 0.20215127944474292621 0.56875647904212733863 1.9759293626950655831 -0.87282523509263265638 0.23012523300606027576 0.16173087915852715768;-0.044552962347272337396 0.044445969360899589828 -0.57629517286429121636 0.21619241315807022352 2.2709725977441763689 -2.5631842796529085149 0.033550167024068974775 -0.031613270213549836407;-0.82404815248974183639 -0.24772742191980326454 2.4442740170520553811 2.744556640221891719 -2.2453344033789917056 -1.0102186660553855724 0.069256894992531403688 -0.57840764443443737353;-0.40675092037041721271 -0.074380723808685683673 -0.54000844568861505746 0.80195334109680027623 -0.70193855688890938183 -1.3454883085379372165 0.027019277814693782452 -0.16421015541320840847;-0.048929749714970008356 0.032838436620668272348 -1.0198708867874215489 0.75922278613723137575 -1.4016462526647075482 2.2048814855091309894 0.26390353595924065377 0.18283101926602243759;0.65765433159289488074 0.43468763445458336037 -0.3412494985139672421 0.81178013279540250924 -3.5070344513672009334 1.3031484474181884714 -0.21331007820968800326 -0.60092260497560323618;-0.0018103708367398093325 0.14398694413847348827 -3.0464206554449408948 -1.073641672999036567 -8.4690518020190186377 -0.50989243366424918946 -0.4756256002578413411 0.16966686255343629841;-0.01535546076623949853 0.12558875338620545392 -1.1323973250245931155 0.95321154642284111613 2.1148445140845346657 -3.2947137308740281902 0.18804455986232740394 0.037314103452046956666;-2.812834521622773476 -0.50512879382566300279 0.28827373181301363392 -0.15948623024951388838 -2.1278831403819844503 -0.71870884263151779692 0.39749417459082747595 -1.603226962649153764;-1.6352271602292012265 -1.0186866614930119024 0.26859246636226236093 -0.26555758172822846452 -4.4551046649133834165 0.082224117195402929292 -0.058386712054895824331 -0.50303521689803842865;-2.0190265355312009277 -1.1029635550322174353 0.94093265849127694089 0.56317842621884783849 2.459481162363517992 -2.0364647851630444109 0.71067524875882137625 -0.15079735322225454319;-0.054023719472523504259 0.16261600246806867665 -0.99140649442597328367 0.54106034233779043419 0.59620247769047807207 -1.5878895401090282746 -0.091111903737466387598 -0.49021349038524536512;2.6483492288324042008 -0.95403304381856846028 -6.1358651308475087305 -0.16562603280490997837 4.207043592315818259 1.0935417053159526279 -4.0678549033052533446 1.9531988590359949942;-0.18623822609501244907 -0.1345450863636725447 1.2469041071303845758 0.20463057884531418718 3.5571710059197250153 -0.18971077500867297716 -0.25483285763375174149 -0.11779621771334482239;-0.029515682349196253192 0.050270892025054046692 -1.7367179714630696097 0.57785675869219987888 4.888266394389340519 -0.29743860675100125546 -0.22263079673754185284 0.45662343603729016461;-0.03988421441224581504 -0.0053694704778260030423 -1.2162877430813490154 0.63398380336992377071 -3.0125851908312064609 0.56689649141059872406 0.40233046663400640064 0.34373222131457575879;-0.47947586106840728304 0.15896693331434771923 4.2769599409343443952 4.4972382203084553254 7.2764888871654918034 -1.5449226183643982591 -0.076819026700405343422 -0.029237773594333844179;0.2870230110420530778 -0.15606142071665402016 -1.0697413150160663964 0.17546713222975512947 -2.9317314103386054036 -0.48419582309918929308 -0.37687966804227085449 -0.55930814948475771065];

% Layer 2
b2 = [-6.6035728737242953557;-9.308922249886377287;-2.9476457776457678506;0.35478434308780604223;-10.549865561998215568;5.8012381438554996294;-2.5559497974500411388;0.38118491438965090845;9.6690889809583886461;2.0211842684146423821];
LW2_1 = [0.22421294624331897238 -0.83700570262531981403 -0.24027170954350360321 2.9761554974652146832 0.36203158690149694898 -0.89148532845461381235 -0.88300140436178042869 0.48428490140233265704 -0.22266163743112621365 -4.0005800921907939127 3.6152024011091601352 0.39831594821389293415 -8.3491442944078624322 -5.0408163362257045748 0.52950139868653145481 3.2725380033561677351 -1.9578239383562445752 -0.68887457365280035937 -0.069633314654763300844 1.3212288244103833623 0.66824694404099049816 -0.20347746043861331122 -0.61801536335553375334 4.5580847711771514952 0.44359827279438646119 0.52786973803625725221 1.7040921674639546435 -2.1361096253821600932 1.2521755973322334921 3.5201236041616414951;0.044694804876315594178 -1.3863261460204521214 1.2345219187986740117 7.8691677858530164613 0.10585844989193193832 -2.5082912169604552055 0.26295058295173240337 -1.489310647455987846 -2.0014866859597288951 -0.47079550085378346624 1.8335797670777209678 1.6604154664557644328 -6.5231862336710451089 -0.36215273211303694589 -0.42074803962489865095 1.2584740975064387936 -2.3446267446918089838 -1.1652909728004288148 -1.6218596889795444671 0.47599662690883093319 0.14311993265853661939 1.332902636890208381 0.31376447296813841925 3.3032470188281397583 -1.3625194942621114969 6.4111064640024553185 0.066307078432137234181 3.5918851179468433976 -1.716134179052474229 -0.35947960922434640807;-8.8742693205905300857 3.8950602501090991758 2.6410988707734572856 1.4907268543074942979 -1.5864064377731745825 -1.1716796055032101531 -1.5739812560033477062 -1.5506211400216909357 4.6307007906451751467 -6.7353974033740113825 0.95072912456391855951 -1.6472789371471556752 5.0164177742398772253 -8.9081981546071933309 -1.3748454489892043551 -2.6774680818592706544 0.65017262645638629337 -0.20707711489966926233 0.5147346215975098227 0.51322365574923844989 -0.8321126042607309703 2.901016531629325268 -1.4876137390409156502 7.2238424212896479304 -0.34969489135967857241 10.497501663338825395 2.1599260361734335945 3.2982128455919634824 -6.3198660801449344504 -4.8101361784826730528;3.6233741966738612916 -0.41991105751451651695 0.26713097784600597917 0.15713883695936398111 0.26447344892184893039 0.017805841977443337409 -0.9896217641483350258 0.11064749332554690842 1.5180684991274202567 1.1287042403503300125 0.5178099046743943612 -2.0589291360764163663 -4.3477385521795595125 1.5239561809787443014 -0.16226123328217739727 1.6577618622331842246 4.89238513504113115 -0.16340743213733907591 -0.89419822322035047435 1.0569214577183372317 0.27416383897623375354 -0.46315874244287691397 -0.1105858744215327677 -2.6903285381232899809 0.16932850097352752927 -4.2384803690115635533 -2.0731744150028088569 -4.4701281456403210157 0.30970098663970857533 -0.025891420529633429187;2.8560997604206019851 8.1864126061797453104 -0.9758176670116550655 -0.28392319274256661021 -0.14938132826604727521 1.1949264199994367175 -0.57232216146349002006 0.27215411861951266381 0.49877405472767299965 6.3131971430043920535 0.3134039507018965276 0.89456213961887831587 -4.390941260532837731 4.9686146328822111684 -0.38952207536914118524 0.78461994013976876783 2.625267621475956048 0.2948132827541050105 0.14935951849020767668 -0.33971757513090605762 -1.432666846694981011 1.1717411738644156749 0.97095224844186700519 -5.8669601605389161136 0.27832361282970119465 -4.7493613245682757551 -1.4241301003176098927 -2.7742867155441741644 -2.2791409624740275319 -4.7460658487359825841;1.0291880689428718476 -4.9878547487364253143 -3.8663229308039772647 0.14692270662486353605 1.4208981163735046049 -2.4823963237102462109 0.45719337952332822494 1.6206416353828707599 -3.3370566422066922918 5.7018390781106820242 -1.7933929663478371808 0.013671223100023967983 -2.9221702422731867799 2.5230768134688594806 1.4652827151098386516 -0.60562654647389091433 -2.2603414782514694714 -0.64114096602507752998 0.68643388109008662834 1.2809274334832818631 0.020102548570891304314 1.2565317779500400075 0.20728470100544724164 -7.2608838875983794381 0.90217797495854590295 4.2301762068229491476 0.082630875013186069755 6.0677237793576486169 4.5705564144838719542 6.6503673494458537263;4.9623062062820233464 -0.6672066743130140587 -1.4761338157305070595 2.9324401338487935398 0.74365050238174390529 -0.37034400928129768138 -0.2067253096263775014 0.67262566293068193346 0.29637907271949914811 0.9089509385887570847 3.9229879326764298675 0.71426410614815705191 -6.8002655406676879579 2.0634894630206108701 0.25401845361212244123 4.7701345737934222058 1.1685189590893736433 -0.11824094583450513174 0.14866552334619334563 -0.88516030753362962002 1.1094816425535249937 -1.1403189463720870833 0.14535836834825549557 -0.82717452595594953557 0.30726415027744446995 -7.2121388786595383991 -0.51357156594596853338 -5.8095222987398562609 1.1820543386860646873 0.67819861468374531555;4.0827042073628652119 4.3043709870873501089 1.6407426080458271667 -0.36233970740122278809 0.013086869179630625584 0.037146463523803081863 -2.32452234771097066 -3.0580121952516821082 -0.89472462335571700809 -3.6814611108458086264 5.2598929374225686928 -0.21244676776490156733 0.93408692027565443095 -6.3091743049275379462 -0.099969114896290081629 3.8578708450213929915 -3.0646934194656623163 0.058156144620637326148 -0.72268073488935991033 2.160881649439990948 -1.0091027778073389243 1.8735254784016703855 -0.41319678634752432522 4.0367471869959850039 0.4978118901151092901 -3.6195002941693328324 1.6105456718997612775 -5.0544289449730888109 1.6202819176588170169 2.2012441165697675949;-1.2236288340611696235 1.8504509754866291793 1.1123105362444996036 -1.0947050813379117784 2.2319909750435029672 -5.4741520978568019018 0.65911021835580108075 -1.2727776162088983991 0.18541584500454602602 2.3505271724387450938 1.1992191321653948854 5.6576480237453630195 5.0980560739510920598 6.4750799369062921329 -1.0222030824102612545 -6.2536618168559341413 1.6125930849484984009 2.6104376584289270546 0.58198657869537484544 -3.4763023020659091777 6.3627462406787884674 0.63722811800223599921 3.4539770064488588552 -2.4379945759734087396 6.9592567415194448444 -3.3476111463397626444 -3.4043467804891980322 -2.5150389805700248402 -6.2713591651416811246 5.4717153846194213074;-3.0646686259392672547 0.0076581441355982014796 -0.017148312958533012268 -1.4133958406118567463 -0.30186473263094520947 0.29876320133520684053 0.37701836652912940062 -0.33731157668864913957 -0.9612439510343365745 -1.4988878495476105623 -0.85531620198379987308 1.1728527628217633172 3.3460883871358282349 1.0552593650468982123 0.028488160762497546225 -1.0702470375044419448 -2.1403995073808990135 0.75559477457326995609 0.59405890380107262416 -0.86049809831726087328 -0.49547765782191177664 0.54508843970242304433 0.091871976481557940386 0.84180286386135116938 -0.098826630667522105678 2.9757429722717558818 0.64648916765814257168 1.9362314278931753719 -0.93898024256817225197 -0.98184541116481727219];

% Layer 3
b3 = -0.63847246696118997722;
LW3_2 = [-0.2171522537668828523 0.048417378122580394251 0.076891981851440180384 0.74475945371205987122 -0.10819414008233044222 0.079149430431119993656 0.25736935250422771082 0.11309050278647576893 -0.27280374149408087581 1.0178813975956269022];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
