function [Y,Xf,Af] = ESPER_pH_10_Atl_2(X,~,~)
%ESPER_PH_10_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_10_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999025224415;-0.999999994516886;-40;0;11.29;-0.2178;-0.12];
x1_step1.gain = [1.00000048738803;1.0003169936794;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0479365703301392;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.3005691092796265451;0.93352032701173048856;-2.2263961513473278231;-1.6435330212771543934;0.88903915040803349612;-0.11258254441214333996;2.5917784264957761664;-0.6495228931836919406;0.94808958063902071256;0.77024126048069119221;0.91685459232977595256;0.059155041385747120231;-1.7531437625465440266;1.3030178918272965483;-1.7318928886031752512;-1.1430608180848860211;2.5099964235491452058;-2.434360410225340221;1.2671316733422066658;3.0893242771705975436];
IW1_1 = [-0.21992397229221705146 -1.3326471595284956617 -1.5317767441963410224 2.6464903348057751131 -0.24802480998612475016 1.0637154957916412634 -0.99006329673476911601;0.077075237076766112132 0.12402888700947772849 -0.36487358378106210521 0.59879994678612979975 0.45632526825237001988 -1.3725560149677125121 0.54476679744375844372;1.2564839351794145905 1.0929052709702722357 0.41443754342059468954 1.2697329781562254336 3.6613075963642240929 0.29179257084789878007 -0.68952252970221639128;0.77355508654436999638 -1.0304500723896026226 -0.95789198545622467051 0.08100553449362375702 2.1220145359983373368 0.58999745672512982075 0.53262661224843166341;-0.80744144368789005917 1.6921041485442791519 -0.47784942005097680306 0.033528534251654230902 3.28137008390675744 -0.96564405873239078648 0.48831667345354390353;0.80084922074259623503 -0.64606876953916791972 2.0769900630086222115 2.6528129196037038007 -0.61362344340057650705 0.1518325987071095784 -1.6489339170346368757;-0.30519874572907623733 -0.56092297269838919949 -3.6951856114014183241 -0.67547991167021659287 2.5024018699786352293 1.8555069516671742758 0.19105677546172020187;2.5594365866737676107 -1.4158529327179940616 -3.7633863820802964106 -1.1875036806906493769 -0.1269764300752835029 0.48065416213417566649 -1.0666839239404513062;1.36074233632042918 0.28674083019770624237 0.45388267445548069468 1.1576156374871744426 -2.01910817706746748 -0.034624759917324769709 -0.46783590881507985948;-0.6807662615332004119 0.12462592448663757649 -0.23390255130703138664 0.78034502580557940643 -0.6563468657264366346 1.4332483222314282845 -0.08459744263452478874;1.0662884032182580185 -0.63024919630481002208 1.3311183484984412395 1.9356268139503642889 0.95012127988752481667 0.39443324045445798953 0.25132116906109852605;0.087935478969989919196 0.067057525413358978761 -2.8544868621811936293 2.5639745912735776301 3.2528790571934842468 0.6565601928302494672 -2.8759939785724584205;-0.3341203711497590656 -0.5917571310783522609 2.5868052358006088376 -0.45645684871019798212 2.6468916002036375623 0.61254143365418478595 0.83878261386740904371;0.24739565872960367354 0.32045499582867803534 -1.2108456342118940618 -0.6088547280206458856 -0.65561490695739077506 0.43833955002894731123 0.96609535757321063354;-0.47521158205338898117 -0.02933494958073046277 3.3704033953758907316 0.3786761213916685076 -0.18714399266126235943 -0.022531726764577146571 1.9923146156275266527;-0.1510726912238886388 1.5952929092567180724 -0.24305641933477908911 1.9357157344291191503 -0.27112180094560361931 -0.68491725999773156452 -2.5584235769858501008;2.3146356389316209423 0.24803376676326349681 0.85453359344765522643 2.3444537043503661522 -0.23770274534254368093 1.5735835068894661326 -2.2737170237445316623;-0.21489646688653546436 0.20959552708657580578 0.14956593122531927631 -0.45140696302152300001 1.9087349654769718565 0.85644264711247508615 -1.6370325237449259159;1.3486541982612310075 0.22039856489850914723 1.1825543873941464224 0.45627284606082862961 0.7936241821789803419 -0.31737135376868397252 0.19056711224356148726;1.194238475358997853 1.1137714241673450921 2.5469603485877425619 1.4213456322625122041 0.8644828510591420212 2.1721579463618114758 -1.4413332709385913155];

% Layer 2
b2 = [-2.4370090723357171747;1.5481631101478330326;-1.0625425961286583121;-1.6570139124721072754;1.8002569493325755179;-1.8595164060088651414;-0.46890268820656150206;-0.71656009670405007572;-0.36362048423689530274;-0.037732708331056435958;-0.67957581356724883204;-1.2779457169665469074;-0.20750657164078586958;-0.93349924948111306922;-0.89008476655400559086;-1.2098273204466190034;1.7009818537504406422;-1.5359164885974438963;0.79460856262112611326;2.264139937766512567];
LW2_1 = [-0.71478548437805655702 -0.5655574225363964036 -0.45893286549466927315 0.74938486958347716449 0.65497008671780010403 0.29553442778558330906 0.42426253767540511586 -0.46878413613592406772 0.5226601075830307197 0.070265975924213297521 1.6805648490501798875 -1.8619919603568779731 0.43880320397958400003 0.27470339319375464138 -0.43221589610312782792 -1.0733840480394807315 0.14333483843335773078 -0.72799374548103423788 -0.95008087668897511779 -0.55733611842585628615;0.17801981308191192066 -0.15188088810333605361 -0.061110253908071454632 -0.98626546422041672102 -0.28890243265513793069 0.064661030949093520337 -0.022565834989211022016 -1.2783847942471404657 0.66121901118257508934 -0.84053297530269521776 -1.5447984107588426106 1.620775407572188076 0.26332631928895844364 -0.4189195205664634214 -0.28924847808820869366 0.5182137946907320325 -0.69049253067353888458 -0.90905576613854777168 0.93329009933083861839 1.4779196618734631308;-0.1060657166769539278 0.11168322950694815898 -0.097643135603859551597 0.23121453198233790638 -0.78596307901824291609 -0.20141341266457429837 0.75775583752772091017 -1.0825231863143760513 -0.24828751946350113844 -0.15709874225747330612 0.12616590321316431544 -0.71042029886174640207 -1.2753003554843649336 -0.16929565950950550834 0.29638224547188002367 0.75461738580279769106 0.49961371806829502074 0.12390101038816404844 0.015512142499095570025 0.37133431479688228105;-0.38263583419694729981 -1.004514638384091052 1.0700671697437154073 1.137906916741780794 -0.90660173591552939421 -1.6522973842332131511 0.060840748232762906222 -0.015385011685401885073 -1.0553486629010049302 -0.38413960217363068983 -0.5405337651995110182 -0.15058770175951005643 -0.73446502394719614948 0.90270238247259215747 0.66118975533789348109 -0.63868798571273055487 -1.4166423513740182827 -0.80667579993214477696 0.15670597165969163411 -0.54785138692838397656;1.0779453312199023252 2.1108899095857114325 0.19527051224597410939 0.044624476911003942148 -0.36827428530607553281 0.76794570057096001037 -0.070488480664558095246 -0.096763934540395307726 -0.38043598723874960665 0.81406092961961051824 -0.57100466209016409458 0.71166235035557268152 -0.20277555351455869848 1.213487247144128478 0.91632409271267167838 1.1829823603465059456 -0.19790634210017152284 1.2799875374769711378 -0.3680776913695547603 1.5725998620220065227;-0.68499327846247026752 -0.50739420679660618418 0.57275867249990131125 0.70844982033901637841 -1.9912927779244207205 0.69075008183715158605 -0.35184036320772832385 -1.1211241757164358557 0.61207280146514719821 0.49297222290266312639 -0.97216549657617090663 0.39626377486102465353 -0.29724555556412857182 -1.417040782291960177 -0.84990585317405875632 0.52495354450288467252 0.68335789611064590154 0.37779928630959319635 -0.23154911549889325983 -0.25749186788522970826;-0.5111676896735947162 -0.17496149486541923146 -0.20417082881037071362 -0.14855911730804113868 -0.25905701154628257843 -0.27479901749229385111 -0.095334650255957609222 0.067576944185514131735 0.15355604119174989797 0.046891774778536066126 0.46011481638870332933 0.4326906187920989133 -0.45226924163602461038 0.096715180082613538826 -0.41480671962747167614 0.28202444863693459931 -0.53042826888134042562 0.070818620991091443817 -0.60398917268877660991 0.4648687165305959712;0.70232622051974258337 -0.048454450861359688041 0.14179845991236586511 0.36291468910049368146 1.0698115889334727235 0.5190138265186651223 -0.62788967073497148341 0.0089120702617519875072 -0.299520660704084285 0.099791149050876298832 -0.38957136064427072553 0.37039594489505506258 0.24403584544403772449 -0.4572786974677567895 0.22083974417617160957 -0.092614317409976942841 0.73744046088167092279 -0.17733029260986077347 0.42323719978589607882 -0.45711765549683275323;2.0620307150238454952 -0.3476940260687227946 -0.45772308837460812247 -0.67479517351673268255 -0.37278212183879799735 0.19744815587815406355 0.057388007050855283087 -0.76893661005992763879 0.38474379934918984114 -0.15970565611136763873 0.67443815363402570551 -0.80089537775176866674 0.41301929258299752146 -0.16946377008195623315 -1.1476443357326606698 0.35777106543585435183 0.66093638588941916456 -1.2031505920328582349 0.52437109024675288005 0.156013065010531915;0.26170772216108034725 -0.65507778739363686782 0.006027035294511593963 -0.92530940827775742807 -0.063115288415773712627 0.36307564880207099378 -0.97982998063830262225 1.6227194297365252762 0.043114946275079765736 0.35530938960011665406 -0.35574476190416615129 0.79344487742933789143 0.52847600586357923458 -0.26732683210764124349 -0.17535812574859244162 0.090346885572537782849 0.19119226626676202874 -0.61596801505047860115 1.2335239303911933462 0.51207356146954818854;0.91565930044420429379 0.13066239567051671222 0.7829379402218862305 0.028466679148634745078 -0.87749538726689646495 -0.048926639061412889598 0.81922068325175878556 0.3327552065576767637 -0.31230452715390261131 0.46474107666956343543 -1.0271476299445381208 -0.53896808261012296715 0.35804933693523133265 -0.21850774063573796813 0.66510222283809683486 -0.39094358356122704823 -0.47296466347853693968 0.88907461189925152123 2.2558524377194024702 0.23985554653501583999;0.3259727230747487825 -0.25454293054773868832 0.56003066948479274245 -0.35312060147496004969 0.39040665978978200679 0.41811936144481837152 0.60054868828679097703 0.49115213377429917108 -1.0615811846713614219 0.53793545669247089247 -0.64655211232409304234 -0.30418855096022034967 -0.14125019492083873418 1.5711044594885801295 1.0130262256200412985 0.088082187396403874291 0.75011406520143542043 1.6132863181343086723 -0.10285196743283167575 -0.22076890588929859449;-0.99325694015830101602 -1.2438414610554293649 -0.0160244949706434478 -0.075615285641255483573 0.091646922158896665378 0.41214074529350369636 -0.20010601750976161894 0.22321534660874009504 0.344195757361792809 -0.49600676748164451713 -1.1741541539465651933 0.59071091215722282275 -0.96751012252936174907 -0.56094246035112760307 -0.56745944367754663773 -0.23423238201584795082 -0.44960145618679020485 0.43894704451075960971 -0.076296253778730740991 0.41526600588441492379;-1.2543722933644452233 -1.8805187351010701491 -0.030706023310914098978 0.31783768194544725905 0.71405007676036846842 -0.084798905463290927265 0.91990458555297438537 -0.24639569311440925881 -0.23409251049205467843 -0.54362122101090537551 -0.062199325665419594178 0.57362244209492752045 -0.49100566423303204644 -1.3609666206843153979 -1.0537657734749816818 -0.548952553786883235 -0.34632735392359392801 0.23760395414312174278 -0.15625565675983210667 -0.45315506700505336912;0.0052490506315819402891 0.013961274398850672188 -0.072424834806862833925 0.60005274704430699995 0.45412348480191477851 0.086690527508331366446 0.68822861078507224786 0.17158252146085486989 0.37687659871981221693 0.80811743006398040201 -0.59683955494369000938 0.54231354159801659076 0.28434881224331448601 0.52524675799286246747 0.86404867087740289122 0.24451870795436753125 0.43279678051792463966 1.2680019729241367443 0.028641277986118415799 -0.2883221732153285477;0.39374009150442640381 -0.67054683616012678016 0.22404440849330931051 -1.1926495145358149141 0.53736788661498569031 0.36107295518443904836 0.082412368542080657874 0.07427023002198768209 -0.85950592221612209798 -0.4301099452417050939 -0.4284863148644896258 -0.07177608441090230218 -1.2450791088936976614 1.0300869178640206236 0.51194300729620600965 0.058510117605767540672 -0.99788425384397583251 1.133908608651643668 0.47945695124560677725 0.40914007332295887487;-0.33188609709762606492 1.0077913248741257046 0.95398678935853187255 0.63062636986436937381 -0.38623659043564073645 0.29454804312475824091 -0.82569818427912944347 -0.13362200732152593186 -0.92011062183788117075 0.58267903108423324543 -0.035433055320919303044 0.10260833286382459173 0.89517535166295891802 1.2061460523107454534 -0.19320116280402102604 0.60122312412452871833 -1.3761233569045145941 1.0813445530810410489 0.71669267395557523237 -0.68796353622688277696;-0.42585378350623664945 -0.61219299441082719593 0.8746319918707546881 -2.3603639360693997595 0.17473133464264939407 -0.22692402482154305776 0.47704586469571302887 0.36313249155089533105 -0.39421304337127693884 0.41268509903586986232 1.2856971898575149105 1.9524883560457857445 -2.4337318272351988746 0.52944210593581897406 0.3344354035833007055 0.26322004205419458067 -0.033526295532095198859 1.2953609424575922571 -0.81332156319278858803 0.73258183658072173472;0.39082149517149006313 -0.72818781980783686691 -1.6095290786320892717 1.2077184711450279497 0.90454249484076187926 -1.5954325823964385922 0.83575534717489108338 0.29153669527404851847 0.87378940729117215991 0.61288818727407523568 0.96677548297321047599 0.11013964646031876304 0.17590538027932112186 0.8552713668636952038 -0.11650901598289907513 0.63480510299178050104 1.2765728505932731895 -0.42903497813373114855 -1.056362669997619852 0.97608427229151928373;0.04573574797838170225 -0.0009444995812434276404 -0.70685199161314660188 -1.5993696521520157638 -0.48546034406116483906 -0.082330423244174999464 -0.50203052822884508544 -0.014470323487669687831 0.14149677169236232754 0.25520499809287394699 -2.119392519595057589 0.22798915573160219439 -0.33510735358865062494 0.66848448829702300511 0.99005681774377207738 -0.48296248901027466482 0.0082967667349898160944 -0.7281570040928840859 1.6127896968491057805 0.2204452747980899241];

% Layer 3
b3 = -1.1641721367281003818;
LW3_2 = [-1.442392077081305013 0.47533208987261277301 -1.6607003174419019409 -0.67993086543428193913 -2.3811027692051984772 -2.0608140893421165174 3.956159310095451076 1.7118548435293488019 0.97213804453833185804 -1.8701191006437585251 0.6379062409870567274 0.8929364812076907576 2.0194620281740069956 -0.48316407851140280583 -1.3308080203277481424 -1.172109575996025832 0.69024122367207441098 -0.1239529937882018068 0.36907324240542527249 0.47552096670874388629];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2.03830178109291;
y1_step1.xoffset = 7.47181919175367;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
