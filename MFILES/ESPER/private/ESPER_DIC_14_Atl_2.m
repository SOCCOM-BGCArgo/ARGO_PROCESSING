function [Y,Xf,Af] = ESPER_DIC_14_Atl_2(X,~,~)
%ESPER_DIC_14_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_14_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.7852184373583899202;1.0329289375242300952;1.0552945217788169963;1.8278823567411113249;-0.240116172033155717;1.490987388986505735;-0.40510300087742789898;0.98215074430332283129;1.7218638447796148494;1.9309401828180574601;0.85434253779746160973;-2.1433368677694679683;0.87882596406637802922;-2.4451886915734424299;5.752535177724745985;-0.98469905739708907255;2.7710048843642018923;3.2305969166711836493;4.2208614048542481001;-3.0361208239917276686];
IW1_1 = [-1.265446164964908693 0.21218454418125978767 -1.395945146928516678 -0.33851451217339839639 -5.3357097053772370998 -0.79782751982911492838;0.49931318536175400835 -0.61045177521001603438 -2.1890027852378253215 -0.10246873444506621187 -0.13885878942889828824 -0.37811022568850932712;-0.74996550774797854366 -0.5225503189325853004 1.5130369519995381378 1.4230918315211218417 2.7712233102486192315 1.1004609553638862174;-5.2879650382035343625 2.5032877353529552344 0.30551091153296894287 -0.43230156141511583145 1.1093039795611097098 -0.19770957661098145786;1.345431302668558704 -0.75266848152416199191 -1.0207370001109137281 -0.053609607120366033206 -2.2992175873537963326 0.35499600808546138975;-0.25359312839586728439 0.28522344989010339766 0.89545582752323926723 -0.78363845662619679988 -1.6381675458141515822 0.12197312762682535614;-0.44878769012509306391 0.64677861170024020243 0.23699636118308506361 0.2196915071742649439 3.2544893574869755426 0.58019338851877466645;0.12733273177544207622 0.26836151232748006734 0.057091833758127208398 0.49931128751086867323 -1.7850103523359464042 1.5263007474311416356;1.3344328573887098699 -0.91894503060847387843 -0.56412121702682016533 -0.23564042375757113246 -3.3221533055655485533 -0.85878801286685413352;-0.44727009584975546685 -1.0795672679918080217 1.7618636641290670308 0.13875490111659180559 -4.6263313208767558038 0.37232639560326374895;0.36142144991526947706 0.047804333307014543197 0.40793284059536527586 -0.24219915728435292834 -1.7636572855049581499 -1.2718988395772590216;-0.16860256618853161625 -1.0972633226450114741 -0.18543692807414652313 0.64752087545271652669 4.6350066355633634529 1.3428553510810750105;-0.78810963653488641523 1.7009080954804600694 -1.2986396616201076881 -0.41129734277022172995 -2.9122530204706467138 -1.5791741413987154807;-1.9316348547878308128 -1.1943746610276160247 1.1384692262734084078 0.13036814154095868745 1.6800772533230496908 0.051864539453205016351;0.41827156507592960777 -0.34239277776490223415 0.67589951124599245702 8.3936188196361047886 3.0563298814683559357 -1.5233794018713358032;-0.72839922979154558824 0.59498760105973103052 -0.63302778869326381539 -0.16314204863245485022 0.49952354519334846161 -0.51435588308270097091;0.05583539963929951 -1.1497784231007950329 -0.83062508435442072852 0.83230924288814278622 -1.3911191011791828043 1.2300055630140700469;1.658118097577232497 -1.2700575986392108607 0.31704481468429129842 0.54261877746623099483 -1.4317069441102967531 1.5055176848024991454;2.2585119399388053907 0.94348188759117190827 -0.70528930655997068566 -0.18647511583274539726 -3.2760046573748411447 -0.060834437381946833423;-0.88436406590759364388 -0.53429505450432424052 0.61271671312383302332 -0.51509232038382180008 2.3806172920133810145 -0.70381258794298851011];

% Layer 2
b2 = [2.9391652917461423833;5.2862662003024132318;-2.0251079484441736334;6.3708181832393551147;-0.17954521736557838008;2.2328430542204213971;-0.096389742730011843119;2.7159409425472431643;0.30945778492648789992;3.7970813181775189271;0.57751872579471219549;4.2820134081112373181;-1.2469598804075650023;0.55132567145526412133;1.9566667232861665315;-0.40645634799699126294;-3.3115782871789614106;2.669124581552279718;0.68488881987039840205;7.270827547633345489];
LW2_1 = [-2.4498064752917700915 3.6808393243850510146 0.89347966104671749932 -0.25875243527211133632 0.3568200598717218841 2.0688754096254600157 -0.25470310244928123788 2.0581174950521488043 -1.5348650515624384649 -0.012738912798728095621 2.2742611829486047981 0.48170684989478346205 -1.0167931316339315906 1.0326110819487896997 0.74576941380900740874 -0.77205728264213591139 6.0170802314046891723 -7.9569002083686370952 0.47093582162125513513 -3.6992277960745401089;1.5007177510238030038 -1.1544837330230928174 3.3523943476430368982 -2.1073710878121052481 -1.3314374054292072991 0.31305752841434203448 -2.6178607763577930179 -3.8421363683155895785 0.91393290538883353857 -0.21433372827758406798 -2.5779623113482799113 3.5512685548502895827 5.8689932927193373402 1.4384825867570003588 -4.9594788434559395895 -3.6621830881451566952 2.3033428880292530216 -1.1370552872400452316 -4.1340431147443315041 -4.3909319736133660683;3.1272703998896087541 -2.5414195101152965428 -0.1778971121438223113 0.3090601967486062418 0.056186028434111301433 -0.049597906742397439295 0.26591072519480446479 0.53827243767445587252 1.887721400886199774 -2.1408465661319180384 -0.2025922945521582974 0.11201841752073954384 0.4056665443270914273 0.73321895564065187045 0.58241398055640414277 0.85387652883356801592 0.81678191406303168876 -0.3104129544382791539 -2.1449339800562481351 -1.2114915549340317114;1.4948687367375961266 -0.79150889821569181404 -4.3959375547505281645 -2.6330691681076414667 -1.5867988097980869622 -1.6741115002202258122 1.7684574753496724586 1.4565605043720311063 -2.7724704241823046047 0.92500425628540028367 -2.8029829423243213249 -0.54667501525373429772 0.25328834533234867443 -0.96893496062106110323 3.0829070036382155706 -0.94013656768298747846 0.65195718982236738892 -0.1899619289055143323 -0.61408473980829225702 2.0898035439084501341;0.32658968815593530932 -0.32887205491184690054 2.2253671069199514321 -0.81456615215406269481 0.48647832280145109074 0.45894483075732100952 -1.2590389868859994671 -0.10735851818600870844 0.034663947592749724813 0.50666329218500993914 0.49778504399470846487 1.1223872793360625266 -0.94482848572590827363 1.5055396547012844799 -0.014106739009955508724 -0.14738699077220338007 0.10027983610605545328 -0.93718046901091434098 -0.73304335099040396351 0.73479645394688497539;-3.0195713760646296642 2.9836112479913778905 1.5254326409552052546 -1.8259196818733915979 0.54322467932224416387 1.2684287564128637893 -0.4421848679491250933 -0.47258539281443856517 -4.2714749326624517067 0.048001393556819114961 -2.7421061185908546243 -1.2921685361329091624 -0.47184649019155971983 -1.2325190459865336123 0.091773205130474849733 3.3268051018403927976 2.4808486695808720235 0.47949941665808226698 0.24957227370956003298 3.6370681267134523651;1.3204438494365160484 -0.99822759344065725706 0.86335032151117740984 0.7828641246897384276 0.96682208836291949616 0.30524616881394500689 0.10436514481707345747 0.48470397708315787755 0.70245262430289256983 0.90098969025026098834 0.61921671919411858109 0.81700317861551019494 -0.84785771791032038536 -1.4181178035633317247 0.30408166873277348019 0.94026349813914356091 -0.21707006146689597492 -1.3210682173243633031 -1.0902703431550071489 0.5112192239573217778;-2.0600395126410835367 -0.77771695225925796535 1.8949209429893003609 -1.5935794313851328052 1.0147868117677776301 -0.3796942257461835557 1.3623947183537163941 -0.7210342112977630169 -0.21400987386370595722 1.0031692838813908164 -0.15448396468230690681 -1.9097167529552099285 -4.6044470858155479576 1.2836262382224352674 0.75007741209599809729 -1.8479529180236962116 1.819148182943256975 -3.0516455286313313167 -3.069922334345692061 2.6634247181545593897;-1.6739815684105967541 3.9127145361196973283 -2.4603368640036742399 0.48057819868446749467 -1.7924199500216928538 -3.2881204562932060398 0.30906120011889726129 2.3507735474828552746 -0.43666805960605153958 -0.78700780296402472747 0.98709540651224514374 -2.7530115300083166652 -0.32980884886625694286 -0.79589713650978599624 -2.291995600009976819 -6.1108343309607429106 0.46692869054671681806 -5.9561980589117835549 1.8311551624207984545 4.4576353075434465012;3.3092538707235954476 1.0315155781421578851 -1.5318929482259131536 3.1257931311102646887 1.0125851497821061198 -1.5424364666462033746 -3.1382622366894077359 -1.7364034164284225525 -1.8552182289618699418 3.2478087264644157628 -2.2113144868529106546 -1.8947870507152544395 -2.3479151463641816378 -5.0181930007113599856 0.17620601337862712432 -4.5725613524908750307 3.8931381964588211986 -10.624638342470476005 2.2999501799871113761 2.5033867812651595663;0.38807023172896265573 -1.8075585952624337871 -3.2093672259115813006 0.21530879405941169558 -1.678828454636214218 0.027793708799096199236 0.53449904423878979998 -1.2277068806915161225 -0.26535133940195942959 1.2185472863364965601 -1.2619488573498709449 -0.43361178575651970757 -0.91161265721601347778 -2.4381570695825134365 0.38572938087997737933 -1.2238755640915774947 0.58129517235774896822 -1.3629657855610144424 -2.3825842136205759303 0.96912373442796606593;0.048567832740690562721 -4.2034551630853185245 -3.2116300170480336362 1.4076794427123218156 0.31692148901727479338 -0.58574452922627917584 1.8012809829956872854 -2.3410193040962252731 2.3024453493397913917 -1.5896077138220232605 -3.6099920091582577975 0.80387915435478340953 3.2831010822513495562 0.49929229215029613531 -0.96457617470113343749 -2.1806108294325960983 -4.4933922640948926741 4.9950252027001669219 -0.74117605733678015856 -3.7080473019950019875;0.055498160787637210167 -1.7078797082570249533 -0.75015333720916543836 -1.010918007832309673 0.19072776675251343348 -0.22906462768450500112 0.42628048551391412024 -2.3523731342142060186 -0.69598840235155778888 -1.6034425636497313672 -2.2637179315246687139 -1.2512333218984474925 -1.3259317318879477732 1.500329978492543459 0.0046730417875303666142 -1.2068526897086582217 -1.0677223526016350608 0.62788953571146710608 1.8531513444954721415 -0.15669413729523024026;-1.8414987908326456711 2.3483520012588230408 3.668758363896128305 -1.72683048062167388 1.0227393748839184173 -0.46275660131013041099 -2.0448901641675991669 -0.43909683603966220833 -2.8160646799777615534 0.61079953541418330332 -0.23035427605681749186 0.55911660137284036054 -2.2964764550167435786 3.8479640271755171099 0.0098390415226288323314 -1.6975001647736318588 -1.8847406315344639172 -0.22036577307040750018 0.55534029285419150845 0.98509174201061910914;0.19109737141049612519 -1.6839474079664471518 1.6062264015386298333 0.67037492841440571301 0.16275819748125425201 -0.17760563802637505115 -0.65952640565095321801 -0.23440884018457494586 -0.78056503926974074581 0.81430168453598994471 -0.43959341157972975367 -0.12024045049575408928 -1.3649870111068507228 -1.8088982063043785864 0.14185312979610217865 -1.3095065909269665294 -0.8750719612303903272 -1.5602930499766303196 -1.8487891236028894948 -0.31995088579312641608;4.2639871975933703041 -3.4410223677489151228 1.5569448245684853749 2.2872975242800155371 1.672077219630083933 0.77172480576085400461 -3.7832589566620917765 1.1971994590813965775 -3.3966654901711934578 2.3629498044963956893 0.00025024910961235491413 -1.1979443412238506284 -2.4734903701368340379 -4.9193338351837230249 0.17353307787841493193 1.2566843501690954099 1.5914517199827939997 1.753148929957200286 -1.2826390413830575099 0.31693778172744901944;1.0258308258008013159 -0.088844902025085437103 1.1132740083596501801 -0.083133347628444570487 5.1067607619133426056 -1.1848304984423285724 2.5268803325372979351 0.13179928230162774039 -2.5955694868369851847 0.34544647321285160135 4.4597954865127027446 -1.6324552397903535628 -2.1134276668260696397 0.12824772531061073844 -0.68016920590446128259 -1.7926559242636794789 2.5385401205987174755 -1.6049230444231645798 2.9906101742289128431 -0.92576706132147679185;1.3704570824966901821 -5.4199966252363172003 -0.62977697510476660092 -0.13166398001747933733 -1.3137583494559283981 -0.074690489511168453585 -0.25084464029339870184 0.41266956565750173569 0.36247669654164499375 -0.37342322012902867678 -0.45550575899324763363 1.0669090645248191507 0.98195064871759296654 2.3381734631341450914 0.10301857897004117193 -3.2342605545631353259 -0.19130717846850925357 2.902730426131426622 0.16192301605423997657 1.8873610731529379958;-0.15620019030136475524 0.025010118467404963277 0.54255777873007648981 0.34058990385003223844 1.518844612870767552 -0.29282281967283385615 1.1192443450454336862 -0.47907073421105428324 -1.2847540865686295497 0.93596567925244278374 0.55946548133026163807 -0.46278278453705323781 0.72166703612992688655 -0.8186223665986587239 -0.029546278263574341644 0.75191161740544543157 0.10670127270079884929 1.5064984282065692067 -0.15472755135631949264 -0.37387662920730924121;-1.2903131940089491714 5.9378258449910843453 -1.8845570001628892953 -0.023419411336421384895 -0.53391478598396435729 0.75728090011935433878 1.5304549734843249098 1.765874920090393374 -2.5384334025132151424 -2.4436307748010812624 5.1223285871464421248 1.6907199773076566629 0.53390812463892611817 1.6446463473988495174 -2.199595110933009412 1.5244259806065021401 -1.1424248666379974715 0.25670908386921270639 -1.2239103101053250278 0.19878894937491028982];

% Layer 3
b3 = -2.6908584696933153246;
LW3_2 = [0.016652554031251449312 -0.024385092313271610615 -0.10914128690160651569 0.11040234862492617762 -0.083770470999326968053 0.039997445455836340422 0.28896546395192546086 0.034842747789405464909 -2.8033639564405339328 -0.022003804949958041121 -0.27054289488352856186 -0.012375242147649342245 0.11913114441461424009 0.081280535448934140841 -0.27720063252414789412 -0.032398206079258688728 -0.056054070427789627618 0.28671786239078778102 0.61568188096137732579 -0.075292715596610021445];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
