function [Y,Xf,Af] = ESPER_silicate_1_Other_2(X,~,~)
%ESPER_SILICATE_1_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.59227749054730916;3.368672421953584184;2.0132580325309690217;0.98351798374084931087;-5.2074006800711485354;-0.092877571931384850235;-0.69347492535685317794;0.85928076606136583049;-0.56991949401647212792;-0.3196815601521174055;-0.16283506992649360301;-0.13415657799921887339;-1.01035045094112097;0.18175489100531946884;-0.41945848110806605025;2.2853071208671118519;4.1262567107394492183;-0.029937489069840596267;8.7763735465988546025;1.1990074925047962129];
IW1_1 = [-1.2548117228579709348 -0.88094783395426712325 0.49485468500528140279 0.388766346016194142 0.80821084065072323899 -1.0455731917757427052 -0.50200033393541831916 0.79140539591789482721 -0.58471305218252944691;-0.015933874002289395017 0.041961123910390148162 0.26023432853845046564 -0.1768146983238330916 -5.0625269369260026409 3.6934795065522290081 0.087017113853462460527 0.073046625170860954301 -0.25430117734498580706;1.0355217532707379213 0.18399641777658784503 -0.43009710973093256969 0.29758276150051116149 -0.10532380613825441384 -0.82768717666774849206 0.72438637980313813625 1.0470651543050055743 -0.77549338643189758002;-2.2510831509885940172 -0.50010533767426579299 -0.99412912198476743875 0.67847888176787607417 -2.8030216681653628008 0.5069698126373611835 -0.0054078478622211229726 1.0215451431059798804 0.5463383306906375303;0.25243810301757191317 -0.03967997806929856458 -0.60213862713003940552 -0.38008775743343214959 2.1234810674743962444 -4.5948053322064481563 0.001799153619073748378 0.26767329875071799172 0.0018233942990544351782;-0.15061886602755197861 0.088669720203112423196 -0.25173952897270152063 0.16474133853881317568 0.7976099875043840548 -0.11134474749985655284 -0.17103375300122816705 -0.62535979912683481441 -0.35311074581572871045;0.0089496701097274353187 -0.16948269163982437879 1.4841751089923731488 -0.5011280784212794881 -1.4525381930060683455 -0.33870135639114662407 0.21472813069987600754 0.48666027476323614476 0.012263164761513624737;0.00025321494212647804693 -0.31848877741138309494 0.20100325776009095313 1.1391955424891355708 2.3172323883277776702 -1.0361154038226205731 -0.19644673570120399497 0.69344889822933641899 0.020745263196811882661;0.10358896882372337078 -0.001866358590370912349 0.41773498020213367665 -0.21455440056606348009 -0.20541758239254565011 -0.55707622045933447019 -0.23093361983840759999 0.13292199343168870085 -0.14330402549720105965;-0.0077535570132297448875 0.10946487784690689393 -0.74671876080831445233 -0.70731705213341666827 -1.8555033553677457991 0.93614099763211855443 -0.041360395437091378168 -0.55644332677735475201 0.084870282831720211814;-0.10089697284976424652 -0.12859044764135835193 -0.016731943718893374506 0.13417244642091638585 -0.72248674131387835562 0.013660103441320707238 -0.11235424136100657933 0.23909370595261952852 -0.31984956848845536026;0.28472856804308543932 -0.30769421061327018041 -0.015487557386467875817 -0.44462829044178187043 -0.21319512142765859042 0.31685946371389350773 -0.34209803818758788285 -0.79404835311805743725 0.060542945590928189115;0.22685861218086064706 0.58018322415384737667 1.4494714375877424395 -0.99546983907850916662 0.094490486679830523742 -0.39505840276150355761 -0.69270657149062198066 -0.2717249149277334852 0.012514229407036513847;-0.0089418172081406656349 0.065308081153022501386 -0.065567937787459854015 0.046761441412022243524 0.63838869101347561763 -0.18587838035545206639 0.16903679741973529072 -0.0020209194595359148902 0.078105803505010118482;0.093329140576589086908 0.17246359031396574224 -1.008958701816541792 1.4931925801736773973 -2.9419293019010193113 -2.8764977666082209851 1.6107077623437415781 -0.70406597708890628073 -1.8579362751469921111;0.17877523718808405184 0.0080407775139462733804 -0.54939336947560601931 -0.31051434633159380461 -1.8971033737846538791 2.4927772044824680897 -0.58445914956912126126 -1.1997222951344694852 1.3363820961824772748;-0.20911536809642070067 0.043268441311484960587 1.7314276136670883055 0.72792180668416450739 -2.4506774377392179787 2.904914669420562312 0.28814535970983501389 0.40454073858111283535 0.054367589323279987001;0.076970685208040540148 -0.032684741988992835338 -0.10677857887243186186 -0.19900265472497122299 -0.81167529881523536872 0.80146747106594318222 -0.17164634124445490859 -0.43272402380066554706 0.15044996458470619172;0.3924180162297423724 -0.70238697003617311942 1.416443203729945699 -0.54331369972001630764 -3.8552742104759434305 9.711576181069252911 -0.15088158516235952722 6.2898315261685207034 0.69510440260098327325;0.023436781366122420855 -1.2208026063255730254 1.2393831141768454351 -1.1433405288616023121 -0.62209298554170300299 -0.13823466472525181015 -2.0863630098284713377 2.4115925639291586613 0.78924325568427111666];

% Layer 2
b2 = [1.3203398826542449562;-2.3621851957473869454;6.8586178349820308142;4.4753523350509034628;-11.014972848997397037;-6.4240719981245417713;-6.1854601400361346464;-0.88320283974969504559;-11.836420476364875043;6.1948034744167657095;-10.539171426533846088;-5.0740783015010118007;23.732910357415896385;3.5456309716528910947;-2.8582213083650862551;5.4039467893434887102;36.807243568392259192;-2.5811960564608158464;14.869248247956457831;2.6367172812494059642];
LW2_1 = [0.24674037140986351813 10.472116607059387405 -2.3476432906941981926 0.42581022713779892452 4.6734402322244577022 1.8471935342184255813 3.02989056253533251 -1.8120902608749633877 -4.4454933423676212811 1.4042423831096482179 10.265329079042826876 4.8184233087942107687 1.9966677820555216449 14.756543743892585496 1.8840801468527008655 1.1080607101206561005 -1.963334329618561469 -5.5910584349494021339 -5.9962154732085188868 2.1779989008452536048;0.57075800506698282089 6.3603280412733287363 -0.10335988869655721167 0.66746092304267901074 3.8376987654180685361 -1.9804219679281334088 -2.6702503123199146096 0.61506469306657030049 5.1453584675906256507 -3.4212383636418288724 -0.58239022780347105002 -0.77740731457971046225 -0.67531704242747858657 8.2203756256350217768 0.45294754852107160792 -0.09165463781540325594 -0.51159404095670890644 7.2002277426467387045 0.14945125001217643423 -0.2885311785541374574;-4.6862221637951488873 -2.9743404832072211086 1.3285300778566879742 0.86502239288700688569 3.2170988864618585978 4.7007855709965582491 2.3290303442941957535 -2.4495134804876275147 -10.294783044641647507 1.513712221026232152 5.3889632288456672526 3.7955121150490467308 0.37931036406742102418 -5.6139568116212714699 -1.9843381658358061337 -0.58436111133832358 2.9862852831305315426 -13.143060858914942912 -0.53384508157207033463 1.7119539104774799121;-18.291686170499016129 -3.2255135918155413144 7.022763781222443491 1.7811387937489113753 0.96932497521025029474 3.1216081572914502473 -2.8300770067161815646 6.0904839213408337173 9.1677226839241825473 10.52326031431147868 -2.5570093205285284732 0.20598160928092398847 -0.60011910864830220191 -1.0012781961863901348 0.28125338750187606207 -3.6504207539861033283 8.1313030058241100306 -6.6347472774747391355 2.4981285829735901949 -0.20839561782321014416;-6.6341345582846047435 6.9671497387303436 12.600369425567503612 1.6302365812455472671 -0.22801152056298118476 8.5833436689367967887 0.28624025265243602245 8.6246052242667836651 12.814934144718275633 4.3700051785574780538 -4.129369529077552059 -5.3077636948890694057 -1.6230968077706326991 -16.319513777244711861 0.38226103555013146718 -0.81621660471959489591 -2.067395559340909017 -6.9944222323906783956 -1.3558193448337376719 3.7141973960733372095;-8.8364686041061002442 -16.910568667987224245 -1.6947303902854671254 -0.005821373843022864536 -14.099667334124738716 11.267810147125519649 -1.5639730895401446897 -4.5959252533013108533 10.255804446528099305 -19.510836757943941677 10.279097331472586418 -11.767829018799128349 -5.1193468440232861028 -15.405676675425096889 -5.8557299137795002508 14.767263143986204099 -6.7084852417907887556 -8.3183274949299175205 10.523248609427449551 0.92571226101415782228;-2.9707446452552948024 -12.037794018600413537 7.3251083501560811939 3.5878130243368135943 -11.01072233248129173 -5.55737806454808414 -2.5803989392839308259 -0.71544153260115239679 25.350107898350994873 5.6180940607539513465 6.2609638323340908173 -3.3614672989627054633 -1.7931762064583454119 15.211944214219068172 -1.192830489723701648 0.92474958154499986573 -2.6537779948395878726 -0.2557159469394786333 -2.2268662106271976953 2.0287789309948736083;-0.41326341663177112995 4.2356959926170620889 0.46274403037004308015 0.32267374987247793294 2.7561654304764764412 -0.36193976196379340493 0.79915881588796122692 2.0697449207520293157 -6.5550453192857185414 2.8238012071502076594 0.042231760269684157083 3.1402038649204744303 3.1953735898502073631 -0.1937112318380668774 0.51713019481402910937 -0.80445430226997349799 1.5780691412327365608 -2.9957909261103048415 -0.63718903450798958232 -0.79481608337323317315;-1.256723199031368754 11.853927538183665291 8.3536275788649163587 2.0324642620382249447 4.3665572265622989434 -6.6635760407980564324 -6.2835481900805794098 -3.8883132523372387901 18.907319109796233647 -7.1381572757362148351 8.2074858488416921887 -0.15993201747249052858 -2.0634732096426526837 8.2616135769170515601 0.69423765010775018158 4.6234696886247101943 -3.2987772173780380847 3.4934029284700116591 -0.47625525669526763695 -2.5399695595947240356;0.13831896641780525026 -1.8361507417675919651 0.96218914258510446214 -1.3167029664098330866 -0.40253490739614122829 0.48920887701084869725 1.9604186766145703658 1.3346075719469954191 -5.2827771505198661828 2.7947079139740353959 8.0686251931748191879 -0.92332044697922432963 0.91147655574558783531 -0.13300904822012180051 -0.43481253197294905677 -1.1328448353244073843 1.2164118901977851728 4.9640028572368697368 -0.38928930221089846908 0.42463299553989469759;-0.64896258126883921147 -1.1297150724681184197 3.9752071227963066136 -0.81807163362959944841 -0.69857811164706173912 1.6181592244923077573 3.6593829506827608711 4.8726824634495393695 -12.402908967065798151 8.5569180212788698014 -0.21730289947896164193 3.7627850392384813993 3.1537565399483460382 -4.9183802190499399387 1.021730004861761687 3.3681251247817911576 3.2549959190034170042 -11.601752602457466423 -0.37961852331785989056 -0.50707097796260880429;-2.5822923339791317154 2.3442555956448232202 4.1388248366486308782 0.02497524745604371918 -4.7369332524195195688 7.4515906053401588238 1.730392894810177884 -4.8328313673339167167 2.652888804146554147 -6.2961623572925438097 18.410885287290440715 1.7503828286738718489 -3.9400816982361086538 13.362844103009054564 -1.9360714378808157043 14.01633528742476642 -7.4421237975035214873 -4.3118226861745778677 -4.859030810113551091 -1.7850376775502208027;-0.37637723029217079462 19.512787964561407961 1.0323063593208636757 3.0380151382934519333 50.842783607876576468 -2.7185158547304912879 -10.378047611772352354 0.89873158343700798589 -12.346318821189887771 -10.311639189795840821 -12.835437595089839391 18.615333651408864313 -2.9439745716030705225 14.947941190568350578 -0.1182048431894749535 -6.0975063878897985958 5.3050048647593275319 16.453536808556851412 0.80969615072829292934 17.527211093244940088;2.7808341201399291442 5.334950061325413273 -3.5242224682907745681 -0.25365932634000265544 -4.4400855441389053269 -4.6931996690194663913 -6.934623865400643794 -9.9705464438861834964 8.7950145385858817804 -13.693853325343091853 7.0425293809569851078 -2.9519976341228582051 -3.6453356636699578708 -1.6197897940028065378 -0.1733620894617365904 -1.4148435444813687312 -8.0809738503591770353 7.1494592162563863624 0.99411300029354865426 -0.51855769536376894457;4.7796283999390158925 12.924898330717983441 -1.0234781673515755962 -0.33744822012732528238 10.034529592527443143 -5.1134670239899717714 -5.2583213952723752982 6.6622774509648410302 5.6535999888078860565 -2.2019077530672732657 -4.8137963516488619931 -0.24097745671815373747 5.2705305615798598851 -21.142755645202200299 1.0300550653691340486 0.22722154343632008922 5.8076536470703050696 -2.4934424104425589874 -5.8286184638585787354 -1.3940256953406386931;5.6181024046840493114 6.3940120260417874221 0.37477005729389462063 0.53835516365264157734 20.288911478903752794 -6.8477756447125637251 -0.55865702410793960375 0.73060135575145646047 -8.4561202882110073631 -6.466781432915140293 1.5227874038259112677 10.498179427960739218 4.4969884426519648457 -11.087436886079396814 -2.2056433132719606149 0.68901171929057647425 7.7930465346875728017 -4.850078265953834844 -1.1754155794440634963 -7.8822122317700875627;-3.9360291159609768208 -39.828879321778920541 1.2134812605832139276 -0.70575304486482715038 -7.6726888216275099808 7.5810956843371970493 8.5953589108659045337 -1.7304559337148517351 1.7689775714361088976 5.9288591784976727439 -3.9678871536367181783 -0.22345658294475734262 2.3842886393460140937 4.0958432766131647185 -4.6158387053625649088 5.1391700895260905568 -4.793670667687603526 1.2475149531084515075 10.812919903559309986 -11.857372179929217992;0.32105746222556369451 -0.054589636349250847402 -0.31271943127173956745 0.074471009592451661852 -0.52701518970403649078 -1.1800280347488971699 -0.30827604764402094517 0.036730910664792074116 5.7817884549614078082 -0.93310776317197596796 7.0434800759746121201 -0.92042588528996249764 -0.39144137608706797149 19.492034712928450801 0.098424476289475940072 0.81588424433500972288 -0.60882232287276227822 8.5316549041537470544 0.092153281798561956228 -0.16342846210916861516;-4.3614916000152650355 0.086431049054210021265 -1.6817207408849981221 1.5063825003423378934 -3.8458946915700424896 3.1937925322243025938 1.140936708226477192 1.9626358219574293607 7.0543168933491804395 4.8955096332161485151 4.674009689640085341 1.6237095047243235157 0.4694548226090362042 5.2213771814655451919 0.9024906049226534277 -1.6688157097701912246 -10.401749946912298483 -2.0012220832000369164 1.2947801215486240967 0.019300429455881007446;-6.7106631455137257802 -6.8950663608748374855 0.27734124595401443703 -1.1603370330557918333 7.1212447414137862722 7.1566227072585393287 -1.4735564096294651026 3.717659392726978318 8.5706991150490878795 5.3848932186328930527 -2.1724802710209925038 -1.5427253889119196817 2.4127301978884636569 -0.0045185290934943445063 5.657493768980826232 8.4160339743486165531 4.7936102464567138526 4.3723510095820792287 -0.78500681006479422486 0.59356436371994347745];

% Layer 3
b3 = 9.5369492260070511946;
LW3_2 = [-0.045957593580921135556 -0.13600686881497001113 0.10985641179324155681 0.044409782307818036762 0.026588785372996890516 0.011741171425563363961 0.041153982003437977744 0.1569741248842944914 -0.048464789325712361034 0.22902738665633326498 -0.1050775622880895932 -0.011550610869883305362 0.013416992290346662492 -0.050146024330590573126 -0.019507290493902252476 0.014879481965651366118 -0.013605263918318302729 11.20169092160215385 0.065376635491145362877 -0.014112704722396762422];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
