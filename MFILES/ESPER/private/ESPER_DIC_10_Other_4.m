function [Y,Xf,Af] = ESPER_DIC_10_Other_4(X,~,~)
%ESPER_DIC_10_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_10_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.014187530719225316736;-1.1624234603575744895;0.42243816989455934552;-6.5496175650696883963;1.769726778679235224;-7.6282743522518279278;-4.5092350146653981113;0.44442646761979059944;1.2845257728003276476;1.726369767743097583;2.2571094650487859568;1.2431269091307062258;-0.60765333261391896169;0.5822281957251782547;-1.454643517343591208;1.9351633237489045403;0.42800974432823152283;-2.8758202541221660198;-0.34321242648815231124;-3.1953218006201096202;-1.8569507602377208766;0.50079566006456155414;-3.4987804000116291547;3.8616281327119961198;-1.7584696123270067147;-11.182748389189480775;14.016844476018736287;3.5078603605473399618;-0.22171449241921645235;-2.2530836666632891863];
IW1_1 = [-0.78836911575735579838 -0.62942664912777257502 -1.5329021163063507593 -0.16879380287785758497 -3.6624871172150386123 -0.65586447589211638309 -3.8993675378824117495;0.13476179199074042603 0.51852382955661679986 1.0982452826575579419 1.7828232443472933344 0.31047700204309819361 -0.051010959991970770966 -3.6284336120687834537;0.0040671451733342890711 -0.11078013440402041667 0.4352856635441715305 0.60889445411883347248 0.60090866360425654324 0.47597253990625459918 -0.19228275855032359032;0.56772992290029733464 -0.39280544387024329822 6.5285422377498569801 -5.8696887224093465818 -0.50045291001820790822 1.0139281989517290317 0.9258408960897335227;-0.12581320118388900076 1.1753839461451063286 0.87140602571930880771 -0.3522348231595547885 -1.5379095991502043095 -0.98525659936571030606 -0.78021559154091768562;2.3558330553296475962 1.2648668189790850391 -7.7742267332440020411 2.6678231773024565499 12.128926765355757311 -3.7424315957399532095 -0.062042340377508595206;-0.22517463105474930241 -0.090373377984962477427 -6.1872114428227602545 -2.4510312302741619206 -0.91087982582828941336 -3.1509607584594876428 2.9581367198879262581;0.42213765193675861775 -0.56885093550560716924 -0.34016480239133672914 -0.91091008655471950028 2.6963831697675031407 -1.1037172110242083889 0.48914766514176466483;-0.34859893397827096395 -0.5807046658601533462 0.47016751953405788722 0.37119196097647622068 -2.8789362546001835419 -0.19876761032414461128 -0.59025166569453346721;-0.34564541329134196301 -1.1862429613065683665 -0.17599995481758179405 -1.0540142555738352126 1.3702604229887702658 -0.17384988798244538355 2.5698902386527153752;0.075360362588454743449 0.21279443270141643052 -0.70496491203860911501 -0.57292444395728581163 -4.3932762887676641839 -1.8117193262354218675 1.0705835000767525145;-0.17281441111799450416 -0.34554241172352995193 0.58348501307411837491 0.39130751191621249152 -1.5311484890642457213 -0.35634520491525178976 -0.74672448064844543225;0.024747977767036709318 0.17011289621058159338 -0.70033316309356297147 -0.49613780162528525741 -1.1092687196343715694 -0.22072169612829675711 0.091310772799250816689;-0.19386043386920881471 -0.10775210007992927497 1.8964749830730722735 -0.13667762449097373145 2.1485967282643376741 0.034207814917445421299 0.1051128803013562929;-0.50081286406585501236 -0.45673525372954942858 -1.6067693202068122904 -0.038157314923396634665 3.1930222299519188667 0.2860762760302320018 -0.7049114615351737001;0.75302196395194731515 0.62391378695149657396 -0.61935416498040918309 -0.24196624598811700135 -6.0527211645274210383 -0.27686667249127516754 1.014302596912098009;1.4706250450008786501 2.3717767261601121476 -2.6883633061261340558 5.0080972477637342166 -4.700952658209307522 0.20339247601362983597 -5.5035352032544722078;-1.071381271206120589 0.14064136190666393089 10.470203846002153369 7.2005644881673562807 1.1838808613910940526 2.4289883657034718745 -5.5642458052585110906;-0.086923521121526570177 0.5950589961886483259 1.602737728075710022 0.47153974273877685697 0.87967006060170582771 0.61846187165385491102 1.091026974595326049;-0.76473787229420731038 0.97747365406464170601 -0.19816245229723289389 0.3356414070194629895 9.7343418861620207849 -0.15814224731548559566 -0.024993501104821742864;-0.31040437238316143098 0.17467212823916719588 -2.6022469771719491938 0.71667264000578112526 0.024994898721246973372 0.41464046917674196591 -1.2866907886453453624;-0.0062190820698810643855 -0.12659635013729250708 0.50222190522520993028 0.54998534490362749327 0.76444251154815334726 0.36892595658661392344 -0.15272222046218825176;0.057197258108388757125 -0.13756753808644353598 0.96035477608651487191 -0.88639718206643836051 1.5273736513042492913 -0.13700539370619937984 -1.0314632711107805108;0.71165828500630012865 0.7492431085538798774 1.8159735411848769715 -0.025931653003220481862 -4.6556679757260983621 -2.8604750899826942856 5.4262996477288814035;-0.88316664873126415891 0.87952890713686870949 0.99927606499869781054 -0.38543549519181324881 -1.7731355779042248244 -0.0095227171825127826521 -2.6480988566082253044;-1.6474333729794135017 -0.58990125412435490126 2.9831122793840880725 -6.1036035679909614871 -0.23310977806094806963 -0.15571533493008291038 -4.0646647723723701162;0.68559778861618980716 0.011859858766551061374 0.97961509144793390558 13.677726149118731414 -5.8738335025813865897 -0.49067860402901286587 0.56066343226303294589;0.4977258668713344103 2.1124391342394779336 2.5020927976852314067 1.9012433249347171493 3.3569340252077441988 0.32504324601407746931 1.5921457510611805031;0.11790303869288487615 0.50174865079510511112 -0.53240368852541208877 -3.3684528569463298986 -1.8766433817984364829 -3.0764815092846231614 3.1376316429653754447;-0.25873884652621115254 -1.6156843857535871933 -0.72017839365625979653 -0.34901157538707933137 2.6581500084987066401 -0.072107398272130654449 0.63260821745719619802];

% Layer 2
b2 = [-1.1041778905576102865;0.44080414955283014899;5.713265582920715957;-4.1870110318267865779;-13.985525181543806639;0.12524475328409295782;-0.5558711202919238703;4.153162180694586425;-7.5610390069992412521;-1.6228526935814677756];
LW2_1 = [-0.37936803880803071642 -0.017057768027079592971 -2.9123726225286334923 0.3363747253610492316 -2.1197148999140980052 0.45908879258011919822 1.5971247662427487946 -0.13910905423659780666 -5.6391364239331958075 0.68872651162974163341 -0.018608749544695442346 9.8544307805355551011 0.40737733503759371301 -2.2450977906902105374 -1.3909346722767164106 -1.3043999787985209871 -0.24984885131486161969 -0.21266052978097146897 -0.1680079097469349414 0.90693409456756335363 0.27831433428687257781 -2.3428076188407809255 -3.6240243982225051056 -0.10869609074074633448 -0.21599724861017599586 -0.27778485920253748187 0.47723332620526376369 0.075610998522715189285 -0.27084898999720052881 -2.1818567714114629474;18.151909131883037674 3.9621094117450348371 0.14646773152751746405 1.3011683403191036668 0.74658609351462013048 -1.3924729091452945351 8.9388521747759828173 2.6195721092930313034 5.2199668742796747622 -0.84682666828689845406 -2.1970750329544759261 -5.9652604182159691959 -8.053331444664747707 -7.1686776034115817779 5.6998919361662885308 2.1761467621040955223 5.00045191731518468 -1.3681228115981112214 3.9457243475639010022 5.79519102632685712 1.1929905799922495557 8.361962238607233644 -1.8494765013790781527 2.4277894658021366148 2.9609600662255846082 13.49458415036607839 3.9783148230642844112 -4.2316428878368421707 -7.5065294223586986888 8.4453183836495053782;-0.19167229641153404884 1.6130802538599458007 3.5573455849471402601 -0.48112330046731927036 -1.2239053423948145216 0.25772819562732207643 0.22589670035503392476 -2.2151133973694654422 3.3266069516903442604 4.2102710840748009957 0.50688544445324101861 -8.0367600954583195971 -6.9841996136943551576 -5.9951402600005714305 -4.8636229180435730512 -1.5229214639640480389 0.29348215834358287735 -0.94128761269178995441 -4.5387338431395702898 0.53836506666580441482 1.2511716214417658577 -3.811337118784779765 -0.81315044869869979038 0.084039885510075226782 1.1231078059191730301 0.051023887869815862106 -0.034531877479114465868 1.8688472801259432554 0.23746582813333400042 1.1044129455425621966;0.90268173532358519928 -0.48808333941934495259 4.6658704118308094166 -0.66651052401012456095 1.5303650799120638304 -0.055992234956226870357 -0.34912408387684013 -0.3835990789833954584 0.5029958022132161588 -0.4171540837668437085 -0.94397477893597725451 -0.20774321016413133112 4.1440950988164271251 0.10217335052154852271 1.8525247840680414413 -0.38909789232376418289 0.44580938495091138041 -0.35269250308852345688 0.85267682570514513607 -0.66007365556037511656 -1.856556557102740701 2.374571736899410368 -4.3663675268698769472 0.48649127386267787543 -0.066246058290904616395 0.79876600022970278836 -0.052917815973429739584 0.16884147331106880152 0.94093312321874322812 1.3815406395525398064;-3.2957877074467742951 -9.7424016143408618262 2.2230249867666342922 -7.7793071270979092802 0.89090086558292413965 -8.1699075169402188834 8.2344043214259077246 18.031281935091850954 -5.7400366700874183579 4.3687404972018111238 -5.9280020319230963821 -7.725586123755982193 -9.057481194030685856 25.985147847486118167 4.6426803437045931489 11.031799018363376064 1.121726726545545505 14.120364415996025542 7.9604077565547113338 -0.82232933250768291966 12.871165809734611329 16.965322960311130629 3.482686950300807549 -10.861518264993460292 4.7875337969015117068 -2.5008956983062327062 7.0177434194357708463 -4.8391988784752255626 9.9227430897175903368 -6.1793926496235380696;-0.5100501331792451909 2.472490526916060638 3.3017744089455081102 -1.7829538841910008706 -0.99603231963876348587 19.832950699156910446 3.6601335792144373826 12.931513977737520094 0.57739597445655943542 -4.7571303852643644916 0.77273633395453067418 -1.7542853904396391584 7.7870616461123667307 6.4423423250292923825 0.017721711473325910818 -7.2457137494349979079 -4.6305348399485248834 -5.1928830404287404932 21.964116475213110391 2.4398703526012779363 -3.2852946341670277164 -10.910532881290562202 -5.5345186310046896594 6.145959076396958487 9.6612246628581832653 -25.663497621938891058 -2.7215579091292259051 -18.319651463983241513 -3.8134991812249943166 3.5872520725891763327;0.1028651450617212304 0.042599012789637034915 9.0926960065644166775 -0.08423492426400440436 0.21893817943338961252 -0.0066163734395636563529 -0.05693568016340195409 0.073383792404169576051 -0.084618815690327739421 0.013846564717937596967 0.15119502163502765435 0.31576220076964828243 -4.377518649536920492 -0.073190972795811923279 0.19741657910170148926 -0.03053419709309469765 0.039471766743623973306 0.029488565012568003498 0.076616951674419647711 -0.042256628794736558752 -0.13327187691072878151 -13.844235638797467658 1.2087484116248152777 0.060330089204096187805 0.047597094039768694795 0.067440728251215914524 0.021521517850411696349 0.001323694761819372602 0.091769501355590837877 0.184748246133613514;5.4654983798807919015 -0.92744790041669100678 -5.891879673615306956 0.94471005966647980667 -10.870171902310493905 -9.2920986392609705717 -4.871777012538842655 2.7586375032506591509 -0.97977786247640685779 -2.6621663892050433375 1.6399518356571889388 4.8279690107119286324 -1.9850197606816131213 13.403777283992399205 6.0993062214828599465 -0.93117360630416778911 -0.79984067030499395035 1.7477644934066660642 9.2303102884793357674 2.2223062485562179447 4.1178378162889535119 -10.316348477819209606 5.8616812859391629331 3.2742516044944944831 1.011682151654628381 0.57184083093117177299 1.7238938543678870019 -2.958492286034479779 5.8591598625924161681 -10.098896336648115479;10.779129432694837476 -7.014518890569824805 -3.4815658448452477813 -7.2708336819459509215 -0.81511825921123903793 16.2574262449585909 3.1737726922565836496 2.1204866540653322105 7.8964638983507136061 8.8130992170834989707 -5.3604649397800629984 -3.0644493153971374966 4.9316844871209815082 -6.9930300916312519988 -18.137552307344542157 8.948834655573621788 -4.8651962672279900346 10.813549754334101038 -13.97079752560085808 3.7938756133724309549 -2.0557082336749661344 -6.7938173152010747913 5.5610647011524303451 6.8089240045431624893 -6.3599709331328737605 10.125943425700326017 -25.376633623322163658 -8.7738773382008901081 -4.6091996098569900653 5.0322058154578810374;-0.90241458793467710375 0.14767869252881299369 13.945678871410402522 14.286333938649642405 1.7542897237371499752 2.3606970407846219473 -6.4460045291681273838 -5.0454902004940453963 -3.5659669421934077072 3.9335785378733363338 5.9535776753630207381 3.5155373676559547036 -0.4467491763783142944 8.5102135853071221305 1.5416214522216569183 -0.58692548060383775699 -0.625072646109892327 5.306793478947406939 6.6152827838468875044 -9.3883773469288893665 -1.8531290975776215646 -3.9142430414473543543 17.500645831097859428 -6.0485283216667840023 -10.518888771291733164 -17.970839385559077783 -1.9231856729619534185 -3.945889085070084068 2.4982358166155389512 -3.0204441210256018913];

% Layer 3
b3 = -10.370044156012950154;
LW3_2 = [-0.10868771213252780006 0.010333325377386303606 -0.21390772475869607172 0.095190858621708077103 0.0053439476601425143706 0.0051306080011445072755 -11.615801182263966851 0.011538493153599052241 -0.0065259695403587295037 0.0054037450485450062854];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
