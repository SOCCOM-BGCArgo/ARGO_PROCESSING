function [Y,Xf,Af] = ESPER_silicate_5_Other_1(X,~,~)
%ESPER_SILICATE_5_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-10.024680709568499992;24.835425924595838865;-4.204876649008682854;-4.5321486631946878987;0.25475944343319872898;-5.0198181801782997269;-12.867275797615985056;-2.7517638786231102266;8.1842739554579964079;-5.3964617142596571497;-2.3548269196563156314;1.2645351196571052999;3.021057953554875386;-2.9636959548355670258;-4.3914577255971085634;-2.5423082358679396364;-10.069137272306035058;-2.9664949882545417204;-8.7488832546466035467;-0.51238535556038400376;-3.8919592477020152899;2.7907673614657788619;8.7283718375750360963;-7.8231350741982632613;-2.1351499659930905928;-0.059241504232398961571;-6.2524883286795356341;0.79522287206894171074;-0.25092122111504966409;6.5717466644756461491;-4.5320628547330690239;-4.8380762303294497784;0.31366340260068431567;-7.3114397170255980285;2.0846587761605355205;-2.6510806182298471967;4.0502444037440996638;1.0798863989966063226;-3.0438799570021504159;2.6057814556148533036];
IW1_1 = [0.054453702646370560903 0.084533358115524342979 -0.97241098587174912282 -0.035678998545736639869 5.583051995014784552 -12.457278523626829525 -1.1378145590352239935 -0.44114366152150286116;0.68165284602320697083 -0.69339035642752899768 -0.96927298027954744697 -1.4458511212852194205 -21.84085305385169562 21.553924960283350032 -3.2983871168859066891 -5.0726232470660184148;-7.2382540226855827115 1.269109164199915929 0.19217076934538487865 1.2524168994282069978 3.9762717459172352008 -0.26469987023450891606 1.8897356564105900478 -1.5356567727395005196;4.1679522384865315132 -2.7922820291785273028 3.2279767796618492603 -3.7225724045698203035 10.670028049969198847 -7.2652378123495573448 -2.2705232419835215119 1.8368469137429512816;-0.24381048700788859884 0.1692572311599705448 1.5140059134625449833 -1.6255329817450081542 -8.9766165093806158382 2.4142492193125537625 2.5353631368023039627 -1.767518367868526008;7.2670741956807116679 4.6080046517499226866 16.361935391158485942 1.1465740834597273334 -5.8583319763767232047 -4.0184046939697095624 1.7998262634370112423 4.5786903120504138798;10.145925290037579813 10.694352572054084405 0.91032394600394395123 -1.3950473881746565663 2.3349477888843219731 -1.565900225195524742 -0.39578232559581227878 -0.099320144429305076694;-0.24362336765448508458 0.12655048330264001555 1.0662751358766640042 -0.58086319289199905835 4.0076518224899873033 -4.5200276604852644979 -0.47883419276752586802 0.30074518376966180577;1.0805691064955600389 1.0956082218419436192 -9.5879681764898379015 6.5739213382270058617 -9.1657479618620456563 9.5215577622401834645 -3.0718015524116797366 3.9140535388793677996;-0.0071841966566136405276 0.081336448681216727552 0.47499711752016282595 -2.1243689370196947586 3.8527753098918453567 -6.3560590085574650843 0.052477951568981384689 0.48422435167286487223;2.447348909748875645 1.8492218658867773939 1.6847263545109889549 -1.1240310935420800842 2.1735174721837275946 -0.10956818728787870443 1.8693872852822839281 -1.7721808785968702349;-3.3020635630652321879 -2.4165008387244450994 0.30215329755471798112 1.1315259348503707848 3.6435328265089395039 0.55216764436401688521 0.55267587469639556375 2.7109140297956306753;0.21329249378691911287 -0.1913803935085190977 -1.4298381747743922343 0.79925384833900303683 -4.5386906024840882878 4.6010613742376271773 0.35754592385672068211 -0.45664810028140695453;0.14266542206410542937 -0.36937173374842358076 3.0688904120613935689 -3.1849999102405024409 -15.108337531374091967 3.0223514076651634142 -3.1337871724955821406 2.7940668056109800865;0.27727929488460545393 1.5281478734074589454 -6.1500984815055455002 -2.56034508722495735 6.9377265886852068633 -0.2807790066275654417 0.33789479574576319898 2.540116430900790867;1.9285620057412158346 0.21915371472815409204 2.6472518832463771687 -2.7000164614238211236 4.8820825368284035406 -8.2580292421020651261 3.1486824892848530588 -1.0223196250958141995;-3.3115141844894848688 -3.080236575548841671 -12.961493450152303808 -2.270687732984983942 12.038038735840565607 1.998751681495740895 -6.5438107224063424283 7.377545423246374412;0.14977006849207077921 -0.079055571248555944752 0.1196528090955376461 0.77856168901797728754 5.3062549073685829626 -2.7422899806428637781 -0.5611533471770060455 2.4588699245440190921;-3.2264609485334037053 -2.1539266310096261137 6.2415872639603309224 0.71484304579676827274 2.5734170752317000463 -12.347360576905977325 -11.196382547781226435 11.951520474519256254;0.035065245450278080541 -0.14071769220015065138 0.15592936193902179332 -0.50928344721777762949 0.091578226394451567316 1.1905559831659990877 0.22563759597202029394 0.92213786054775082057;0.5728839959064701004 0.75815027010218671855 0.11229173986422472109 0.53250331694534980276 6.0703238923043079112 -5.5527582485048583294 -0.15455942971990963009 -0.016807348404963728949;-0.47154516015171688004 3.0767269223220767849 -0.56764649810868861302 1.2481034643311996746 -6.7763491027733104843 6.0156433456734799137 6.7899241860422048234 -5.3679968934822754889;0.68367304742992018873 -5.5712117438464892061 -1.1406598746476652728 2.3567366384092589549 0.32654121852394768499 15.00398726925953774 -2.0533797706797844995 1.2932766765203027592;-6.1382618063061622493 3.4325210722315695477 4.1671029900473319785 -3.9440725763768256229 0.93901102774897327041 3.7633077215765329271 6.6071828311389904087 2.1125587303070565426;5.5407196401213409942 -1.8724979896251057188 -0.51182733987591133573 -0.3977805053723394435 -29.775978197572275263 -10.23094604653465467 -5.8077643118527539912 2.2578012957359017143;9.0624963511890790357 -2.4666542474940649221 8.3826590283272359727 -9.0092942904906809787 0.33602055182187351434 -21.267743624224848986 6.1125117622101763359 -1.5140862017007779006;-11.105135199745671315 -7.5125517137318613692 5.1760044608825888091 5.0333920294437763943 -3.4294302854917071421 -7.725178644972237052 6.271851670395680145 -2.6180550677975635843;-0.029949765829629510644 -0.11305994220432315223 0.024043315104502378105 0.48935419747614805619 -0.14789583709418166468 1.104980210691546505 0.33588630280442011156 1.0298132996435047648;0.25166514789534161212 -0.15830486462502585399 -1.558572838363202262 1.6531169734533350812 8.8819402108858653833 -2.3507380837475584379 -2.6122155867097638371 1.9264565656138863403;4.0008077236752805916 -4.4732032388482290131 3.9161765480667218853 10.18981872105084463 0.63947601118217556326 6.4406782532453679124 -5.1062651573340103184 7.2431487531781044709;-0.045828894932195100853 -0.27046427153377955444 0.45353050817813722606 -3.9954422239163114305 0.51429721519790949635 -0.27037361976448587297 -0.085305277636385942741 -1.6475041644691239551;0.11086859599248947983 0.98329751707406842787 -9.4041203031415605551 0.39177527700061948179 2.5309155425318397015 3.806465109911246536 -6.8473498536270680503 10.404775833808555419;-1.4206967906444956107 -0.19087393979922476217 -1.4068464090242107645 -1.4099712289043209168 -2.0161863423764017078 -1.3315974969747188528 5.9112550631444511495 -10.187328480629163963;-0.37572590386356774506 -0.064052570250755877512 2.0354170956509931578 -6.1919093664878266381 6.4187438755564292236 -7.7759549029090893058 -0.40300637342369938221 -3.2496401574407656199;4.9061447236709714304 3.7676859155134154733 13.136341017221534244 5.7698920629305217034 -5.441351229458861738 -4.3661848258549129653 6.5037504293612231621 16.12155480408620889;-12.151091200039212836 4.2724594605164387673 -12.684678704624980483 -2.3096331178960660679 -5.8616991605859887216 9.9349356426315420521 -0.79423916373548231196 -0.9981053215015902591;0.45508757394349563796 -0.11113327043163653829 -1.0016343005305607949 1.0945192566759742725 -5.0480890129749882433 6.9229706363543055403 0.86743524134460103792 0.73767831790741056341;-0.12518754971810042154 0.97073339292362958997 -0.80323584609396159184 -0.38373377314282924866 -3.080573694127452633 -0.88897265826034266301 -0.42856579263685368186 -1.5552743610994286261;0.14649061900699339445 -0.053438997027759040093 0.095365302556105410736 0.68427391121764058468 5.1460308822069205092 -2.8827556202954838227 -0.51396905397249559311 2.362196726983141648;-7.2599070280155588719 -0.46995253538190612241 -5.5298209883240696527 0.15704026720693478603 5.0158519101226515247 3.5530985132626984324 3.8784888116256377444 -2.115582733942833471];

% Layer 2
b2 = 3.2982915947036328674;
LW2_1 = [0.23357637617287674292 -3.5787165859816392199 0.024727242298391686331 -0.018464058697811661092 -2.2676505857857796045 0.0054340614353613056128 -0.029704227056742908697 -0.94075469778501252804 0.017796084831123774178 0.1922562765973202803 0.089389177252645460325 -0.034079127544160633945 -0.67700063640516006114 0.058440835530726945035 0.031399066469103786847 0.01863733000148861188 -0.011423114753970078916 -4.8741330041715933419 0.016975537827083834325 -0.92893953563507780657 -0.13362944776027410598 0.020483443889629544127 0.013011128711659710605 0.015904352077514918168 0.010798038981461286628 0.005887560093420225564 -0.0081840594618705336111 1.0362036355964729939 -2.2253609043609787754 0.0086389195270319147496 0.17609410601610267499 0.021379378305041135677 -0.027892686129377418369 0.054982400568696375431 0.0067773312576326913761 -0.0053061033752199822031 -0.15532652246695433096 -0.18638604033304478902 5.2258370431588181404 0.017879685392883631206];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
