function [Y,Xf,Af] = ESPER_DIC_9_Atl_2(X,~,~)
%ESPER_DIC_9_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.9355470951092237364;-1.400903972922862506;-5.7644390654297046339;2.9832035521166564429;-3.1238072673893166886;-0.35198347670837232259;-0.59243071387010470819;-0.22144495561486388091;1.6137224381921815297;-0.79016907281398984786;-1.5171166214910367653;1.3983320394887839289;-0.29016288344966023605;1.8433058841614662349;0.16716373892374380983;1.8145679958903626616;-4.9006706352688604866;0.77788589567084642784;-2.9672889310731522805;1.2650802238681120304];
IW1_1 = [-0.97118408437780001652 -0.34507202625690303055 -0.42762560435281810056 0.35979947795239075603 0.21140830940102031676 2.5378479459444949207 -1.4814210300153907163 -1.1023134252181665538;-0.1398747056970717495 1.2414316429645397832 -0.34107716418071731823 0.58063931940484403427 3.7117093928529798497 0.75485313127708020264 0.074864081936050069777 -0.51264872787573201318;0.42510748469722059451 0.93269054048937050094 -1.2626621615348294636 0.46873920894528664505 8.5817759073100639 -0.58764560854311564952 -1.5838719932982032734 1.1133896904564075658;-1.0081148564878248397 -1.0866638698128929796 0.66508378415220259505 -0.81288214055933027957 -1.6878323327488611305 0.4035003454857480909 1.6940992512823918048 1.9917762315159468489;0.97274962605781312153 -0.87255513540436036024 0.40400865414245723528 0.11414969102738727058 -2.1078113899601729209 1.2266960164982263493 -1.0299538373349970133 1.9823710449051128446;-0.049293076921969401771 0.022766339468400700191 -0.78327179957680481692 -0.15341341191989557591 -0.26458292313014708519 -0.28525957255534811763 -0.7013788782668158861 0.29849020450876290189;0.77793036457352449098 1.2805353579072409342 0.4142773532780575918 0.34904813628924880042 -0.86079950569701901841 -0.12863864554766871184 1.9672851086481768501 -0.83246448551753993161;-0.84832900424007962048 -1.0802350030758263166 -0.68966112218615449603 -0.70296683025583217574 2.192689334282299729 -0.64068258713139580873 -1.1538014021992619718 1.2322314823747444468;1.271233511080404055 0.43934399912917670994 -0.045446708289475334919 0.73536661376655543254 -3.1541661630062436394 -0.53342055427994750083 0.015617644883804597186 0.33978034003963114573;0.99575507838745180855 -0.40102873822930185099 -0.032422912157646852083 -0.16940777840982274016 0.66106994943534203024 -0.19412084982497526675 -0.35686524735829516786 0.33519877599166247872;-1.1787413196734861653 0.040536935850228036915 -0.15865716802093182691 -1.8995154909619678119 -1.6492736217158017187 0.24701194143341828613 0.19199501145651357015 -1.1413585058783997095;-0.39688110509516427715 -0.63687801475384397953 -1.2826649007831434357 -1.1975947484759386086 -3.6660932110804722583 -0.16133875461087454628 0.97843527443292932499 1.0027565052688498515;0.51125425513659650267 2.045762751328425999 0.37816709245498159042 0.038313207754433871444 4.3527816594338313294 1.3335027430595618458 -2.4073007468019418376 0.42226179748640979561;-1.0479185921807756543 0.82043223352855110253 -0.12294335026212813156 -0.12242964197399233695 0.29396629028321624721 -0.69262992385069577228 -1.1470282961609625794 -2.4843360126829359125;-0.62858918645504835432 -1.2735699033007736869 0.22484113693018262237 -0.052445975543948072928 -3.7022138252072624987 -0.38069116120581508733 -0.32022572120142062113 -0.79604354607836314006;0.7619728804770591335 0.55614603882160651427 2.0367472931014702908 0.94667851605007202753 -0.42187556464156017455 -0.2741789041607581856 -1.5319817985265178351 -0.11096025522401986585;-2.2924166400562309143 -3.0501689539684191388 -1.9672397708753071033 -0.32700037135048348746 5.8375369603739528657 0.11788295896988246203 -0.30516787013242180349 -0.5668772332252777213;0.034595406735543544896 1.8398053879640698938 0.65966928973875982312 0.37716463882144996012 1.217609365645244468 -1.3625034275853991073 2.7621402190536983312 0.39559655225509504639;1.054519052270223467 1.8670606130510905007 1.860795311302455568 0.042988198667823170063 3.1224795645509213493 0.48994459809991197652 -0.52940892877677980799 -0.46205028228174738203;-0.50187794537243723969 3.5317873778686319497 2.0102827561111697996 -1.1986097008000169417 -1.9785465375748485517 -2.0723766231820213157 1.2026682318488621792 -0.29906165547333490862];

% Layer 2
b2 = [-3.6340798964676057636;-1.9557489263225162901;-1.7273856499168420697;-0.23944695351680025941;-1.5853337075551516833;1.1088854325513064492;0.29106402714693491163;1.8058899171239026771;-0.14269352874077206872;0.44370226900594333941;1.1779577601705972789;0.32320819309968651378;0.22478059552836651691;-1.4570245460043129704;0.41420059124736802181;-1.0736976960381945378;-1.0645882842149183567;0.42201376919644278951;-1.0210133026930301448;2.2924893180513068458];
LW2_1 = [-0.61053654677622382074 -1.32257090195398197 -1.5307376709997635444 -2.5437997646609575852 -1.9347606402970027872 0.415842411188229788 -0.31128512205076408481 0.095676937800737757445 -2.6062085524498730393 0.60726406143965372397 -0.43938069371769289395 -1.3129105938941911802 -0.11314187839483623443 0.70814028923629257495 -0.075801098459465698909 -0.46795314814648047985 -0.37672798873661939023 1.034222443474359876 0.04642035074890749069 1.1173849389574908031;-1.4994613327883097309 1.6805593839576189463 -0.021442970770127450092 0.43556591736093569489 -0.37423309786668929044 1.7407136138756458266 0.91624166460247347121 0.19254691717170693832 -0.58684547645002038685 0.77840676640599570923 -1.5694445793570135361 0.36877506683603789028 -0.54834918693641854226 -0.28549504863530572596 -0.78716980100481614979 1.3883326734429692895 0.52999954332143772717 0.52193169424373719867 1.3964853160512848973 -1.7882208825093142135;-1.6792068162219151439 -1.4160488044002765839 -0.63377236946153781005 0.53852481385272132908 -0.55784953053040009507 2.1335125292819654419 1.4344417402359128655 0.63254759496869905622 -0.88445136541528468488 0.8535508712164850964 -0.032348648734298442176 1.6320794279331405363 0.24487572586529232632 -0.69742632946500582314 -1.1207577191980804265 2.7165288664382338801 -2.4551066778458232598 -0.1055958563692605684 1.8562179424092486446 0.00042127236774389467677;1.0597980211121766914 1.7967447868935126909 1.3909005720696991926 -0.84897390754838131244 -0.67803036649490677767 -0.23204179921169995615 -1.37117388241245175 -0.67484507836825813332 -2.4872869858115338459 -3.3636655968520989823 -1.9706326984725592855 1.1372461525087129708 -1.2815247546885148999 -0.32563960946035391819 -0.64143602628518947562 1.0305080285402581364 0.79424676994545428954 -0.60700997742781748201 1.1997502282190464218 0.28445436267760626503;0.1791319648742788484 2.0080318248838788797 2.2157293299449398738 -0.61269375716819707289 0.2714041387152836271 -0.23908810037374383928 1.4913667543061366327 -0.50328809369594451617 0.86162135627948355232 -1.0497519970906739051 0.58022461163322958111 0.56867569189375033467 4.8249667765143060549 -0.94592909501503374958 -1.1641623366166389264 -1.2714365334685968634 0.70488162356903338868 -1.4153107310817563125 0.67431892138010807169 1.394821771709565672;0.55284893579349370096 0.65055557166988320361 1.9263744930810933198 0.80611116645846525586 -0.95181468434992999583 -3.4145316932984930425 -2.4631261560285753198 0.61999386088944108408 -1.9660578746168564379 0.18896565841868215307 1.1520916254210533669 1.8316760269636391811 -2.3267071351533359369 -0.58168974011362428733 2.1955091784341638217 0.97340041022246726055 -0.56389117199547389436 1.2657839073206134106 1.4199412852270054675 2.1743755417089078996;-2.0869622260595721563 -0.90974309278547016433 1.4440315258382423469 0.82539012404351552732 -2.7075043399394709276 -1.8883341965777729055 2.2836172979678113215 1.8606914435217780657 0.36319055162147284577 0.052355145521179972945 -0.47170230336931462389 -1.8274860368239842501 -0.89490879607167783671 -0.54766845925525597938 -0.63686672517546416561 -2.0910428459059966499 -0.77579198292840079176 -1.0503702218772847932 0.87826572933456859005 0.27323129907594334576;3.7350277018137796325 -1.0906757245860490002 -3.1153398323757661714 0.57746987793998194594 -1.4681332641881472689 5.270164677427414901 -2.1987540626393586862 0.85630050965854531686 4.1950903495036078183 1.6212276610147189349 -0.67894688276803905058 2.4421678347893913674 -0.54896410005148021938 0.92028977167699022033 1.2674097650645592683 3.106778497390346061 -2.503841611737532169 -5.268962992137571355 -2.3546381651691907777 5.7772607955635972843;-0.32014709935398721896 0.67294444324575797278 -1.8789641395364544696 -0.081300199924973962085 -2.4722742544465043935 2.3417737429059974907 1.8860109870832375556 0.84174488722926521511 1.2179036958726239259 -1.5059542132521126501 -0.97599272933930614204 1.4642860335048901721 0.76497930625133525595 0.30004271777235602681 2.3661879283559867915 1.8107729683266142739 1.7600385355877450344 0.10494966571099154096 0.8385654143864077481 -1.2983422685197247848;-2.3371764777936290258 0.69373131518319908206 2.7609772983677167701 0.65448584358677819317 -0.19921250429108139368 -3.8899500845763435031 0.27821876167956505199 -0.70495490743452449145 -2.7711073515997006744 1.2023271579747887294 0.80899854496564516104 -0.72938365461102128151 -0.84644757370383794104 -1.0076864886549936617 -2.380876138240955342 -1.1958833420076790954 -1.2915082898744760787 -2.2058414511532786761 -1.0219103668928453121 -0.14167801212457092896;0.42817686746998406822 -0.86162485316095427379 -1.85509293108113682 -0.83570858472267772754 -0.71784382577819094706 1.1991746716325795141 1.3964488819172427014 1.8952601515217128991 3.0157808739727385294 -1.0460017393488687532 1.1207152685996244479 0.67410587347195538577 1.0743164622951753007 0.59070876042973474718 -0.89778270402391058269 1.2858236597748371466 0.32013198428331046674 -0.25463593981381482667 0.11997500090433500797 0.27248728947397493627;0.84635839684447933262 -1.6951990429505299218 -1.4587793683925305288 0.70324669218657531733 -0.19920482467335012822 1.9526201101653939407 1.9504399690284706104 0.89795116652125661627 2.4602373026945709711 -2.1415423428481537016 0.66349210746765463487 -0.81771759926624498771 1.8486460459139930634 -0.34583972387358907774 -0.3677791902236978161 -1.0171328679794622296 0.7634215252534114482 -0.40344025773405478574 0.10187948692338034962 -1.2128750322494288305;2.825957643295194277 1.3524648635824232379 -4.1241968577672247775 -1.8244280004819977137 0.058059517218699382979 4.0459053495188559424 -0.27648358731398087196 -0.64156661585000640535 0.95284515240630096589 -2.801175677142826892 -1.0186159211131156077 -0.13647704871594940057 2.0191126778789985075 0.92802997772476081284 0.15503930089561154815 0.21957853496527632298 1.1682335441628923789 0.83820420993223510031 -1.2163679156635607281 2.6425962023041433824;0.72476292994431856798 0.15729818838175513296 1.0004903794952575424 1.1117974247894422124 -1.5549345978809125945 -0.35413238546785624772 1.7834159591678646617 0.79414340401893213084 0.13265799306358638798 0.0088980209039643161362 -0.58873966119575227296 -2.929142146070125019 -0.25402627918761672143 -0.37965186388420446573 0.41093779112993428226 -2.469500966141353171 0.31800532217272137192 -0.33936069344372410406 -0.75691042634092586816 0.66269524022682779751;5.4260960345113540271 0.8488659363707914407 -0.3832409684705518349 -4.1053018316926550568 -1.5376840303478727101 2.9060529436343389698 2.8688932147630850089 0.70807535106751251508 -1.9688209119218258447 -1.2785372152422105341 1.7464244831749800024 1.6888814198917254661 -1.7142031242167126148 0.12959284130920245559 -0.40829082396119686926 1.9488738600198811657 0.63435798964039236125 0.52537321625851207685 0.12250585849091348567 2.2016000953333914048;-0.62443309849503592091 0.1301728318296521969 -0.26989990457524920542 -0.17089400751455133265 0.35138246142318563248 0.58552067214101299886 -0.78555350142937818703 -0.99994208155164299168 -0.39754336383710747738 0.83542983588672192763 0.96580315126423088579 0.22489344310700717933 0.1703297394174546342 0.023620214368255287862 0.098888531867781778728 0.53545357385398362204 -0.18321082661138801684 0.10647466086717780054 -0.14819745317506693993 -0.25466663554873797404;1.2554571535566807494 0.081434396596250749334 0.43496784175311942189 -0.58035353283714696815 -0.28025425450545110584 2.3693125070201777049 -1.311064562810140055 0.72300020052187263797 -1.6747490389978412217 -0.099106040459519539887 1.0534489052951021559 0.469657784051325633 0.17068881617969300368 -0.10698273164323156281 0.13460056444135512499 0.22111871551694450844 -1.355484897065842409 0.012365912750186024149 0.24155002598429328731 -0.32026821310707886958;3.7815189402142830311 1.5521815948894219783 0.16217435855556616708 -0.23348996750647219023 0.67760477312912104075 -2.5947646142786973122 0.099042254077734398487 -0.30612112966210969223 -1.0558743707370652487 1.4786643643620300814 -2.6803898738228033594 0.74538472956227697086 0.43906209086615072268 -2.0067424276531871108 1.3848487983462551831 -1.8832673921311346987 0.1880933254787452158 0.79433265697670518701 0.74913028504322465295 0.64982535895886561761;-0.068324901694064202329 -0.99431379600937874752 1.7074512053754118401 0.81361630655898908859 -1.1003415530135502998 0.33560162831439893649 -2.6205564413906334842 -0.19067142907432935162 1.2050024836922177407 -0.99823974525554370896 0.65713151800896474342 -0.0029617809477980616174 -0.502176252709104598 0.97990109581041695552 1.388594335063467744 3.6167909056170066684 -0.13725428496107675014 -0.25055702963837578334 -0.16666578958170574776 -0.14436871692651762067;0.65356945138643418591 3.1019731940822574678 0.43463404491102552996 -2.266539609916668141 -0.36239061538272404617 1.1874612293381521244 -1.7046112469717784599 2.085720997527028775 -1.7257432997415820264 -0.2389821012035705794 -0.75370256111838762614 1.7356337395276055791 -0.12919521805820721738 0.91531184335658377638 0.12147269787615123937 -0.55363091310114465049 -2.111343356325042997 -2.2761715777665454397 -0.23453690434203022797 2.6161869520456724203];

% Layer 3
b3 = -2.2724868489019125484;
LW3_2 = [0.035272101354778123694 0.066392840601559657832 0.0074470365569482329521 -0.025213759553888138998 0.010508449506515967625 0.0092660517672714867721 -0.062221281335166196691 0.0013769771935342174467 -0.038148662459198484642 0.048656187774870754414 -0.058656351871764482453 0.046560193074031280824 0.018244775509412117925 -0.064903913612526009658 0.0087391993240853848429 -3.2117717886289676166 -0.030335529148704017816 -0.032496154559619495894 0.0014816350966890012332 -0.0090287578151160893108];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
