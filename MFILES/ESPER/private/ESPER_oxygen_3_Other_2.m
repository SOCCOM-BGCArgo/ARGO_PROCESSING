function [Y,Xf,Af] = ESPER_oxygen_3_Other_2(X,~,~)
%ESPER_OXYGEN_3_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:45.
% 
% [Y] = ESPER_oxygen_3_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.3739328348629102905;-1.1193330655220976588;7.0076612512235438857;-0.92731959585741985386;-7.7445116611683131325;-6.1369546209744259002;-1.4174219398639074097;-0.92471854773954853535;-1.4617417343865215518;1.1431215386084829788;0.19688260206628291349;-1.9522377415996357009;-0.21133028923162244794;0.18551285281896473522;-20.192715985233462561;-0.74935749496852677165;-0.7662822759923705318;0.44608777689713541292;-1.923784538901466723;-1.622820765685559774];
IW1_1 = [-1.2120158800049889436 1.6690220949297274178 -2.7522477093568484818 4.0457986330484168036 -6.3068933936155033848 1.8991328150606694436 -0.45391605491003189643 0.29752492267543956261;0.14111831811704236839 0.010812186021508202877 0.48200065316220758183 -0.15115666120371068493 0.45255966458431579058 -0.97627858279484580617 0.42157409955801550261 -0.20763549361919025893;-0.42800240205325557064 -1.128845123853511323 -6.3436251107498300428 1.3866960138399668789 0.90836756932096085482 0.077885432277529531575 0.57006479695181710987 -0.051952470505712382287;0.27712688093478571316 -0.013440008649456413811 0.34280722064087759682 0.45255013297283680496 -1.3257653343168556148 -0.10580030863347875125 -0.69570157582501290783 -0.21324489226316345469;1.9291997198059493979 -2.4697309673745153624 2.2253833142798002953 -7.1204600083452831427 0.57625294613132305166 -0.97637267179879694279 0.42406972837599643533 0.1935196660897551546;1.4531177587912134097 -2.0275177188172226472 2.3758213199674562688 -1.893240272125064072 1.8172776157946186615 0.051898602467448394504 0.14586708679386778398 -2.8055837602685995691;-0.25253576523240972573 -0.15545930058676776797 0.41929233777843261111 -0.23804043892278092809 1.3147581527080922648 -0.99752465280863755748 -1.5353155632540196329 -0.50362471974097344773;0.29235875217846868379 0.42529086277069050315 0.33602202445882245474 -0.021624087820700764462 0.046391056209643399821 -2.0650636410541798327 -0.77221977355255377873 0.21632402321101260045;0.46575835285391797846 -0.13163496089427353941 -1.4782750126794872436 0.43645742908628282208 -1.0819861207468404185 1.1397105353263508043 -0.052107521593450736863 -1.9598911791885240685;-0.2290700458654200411 0.22491503982045232823 0.81505335328142347606 0.24112259563555030195 0.69267320455982595018 -0.72962897634095025268 0.081020266842247251615 1.178364703837608829;0.1569984006896965878 -0.28923435572989758535 -1.0858612861561556251 -0.17349786253710644535 0.84806606688064190003 -2.1646079678886236408 -1.3497718602391601816 -0.61729975609629306188;0.011183074554107915247 0.018011891661602545678 0.25569857533228190771 0.05070356279408328587 2.829230288436891172 -1.2950111067131770959 0.89277521325504183292 -0.098380759263133429893;0.1331954248850507061 0.10117937781560069899 0.96647370292790280022 0.089797324640438144772 -0.95739555986612623339 -0.41202786870838359334 0.17380239521594822993 -0.0093604323234161117273;0.42319142208409804562 -0.32264031512191709838 0.51356298712559478314 -0.10028204804960229313 -2.0200789553854088254 0.70209587918237237325 0.80016800366493001651 -0.43581938154828187004;0.25511184585622304066 -0.17277830182993461627 0.089116952241619071251 -20.035926519696626968 -2.1983628944209621103 1.8322070041682547714 -0.38874385115477033681 0.18779712135932177808;-0.49230558722425377116 -0.25537633099724449393 0.73939178650600700937 -0.21663239422666585865 -4.0600786492540272832 0.55682054029393412975 -1.0212486998468701671 0.31660957902281139376;0.14993022886901349877 0.0061501262594484797444 0.47870230861104651199 0.090189611591359103437 -0.46867762336784107857 -0.61595994495953365622 -0.73282879653687904575 -0.12741207361992590297;0.099058752268192634682 0.58779001566091759745 1.7840748415280687222 -0.66505235514252269979 3.0527757041616552236 -0.40561967824995093235 1.3655272849582147376 0.011288528526206056957;0.073003030287294878864 0.056599375196770350394 -0.41323565884758278743 -0.36833405519807266293 -0.95876144318657074983 -1.2478309903319595442 -0.42871080534839700604 -0.18328995761515995411;-0.31836216211512557983 -0.13064955965540342442 -0.19361951010253963812 -0.43116301764620729164 0.6934037603454760168 -0.83242598989161153966 -0.30818851863526514068 -0.85801849058894685829];

% Layer 2
b2 = [-0.76298842627941954042;0.96296254913845458212;4.8549751339018376584;1.5648962349060207;1.9973039184072582941;-1.1858083767563791788;1.88277445722983372;1.0319075431913335983;-0.12600238226664492447;0.59425955274469777212;0.82689657087365919796;-1.8858660833068172646;-0.21819497221332792569;1.1373632455315558776;-0.16912111723799733154;8.7237930603793234496;-1.4545813275619139393;1.2601604457071158283;-0.012252822303559559453;-6.4093736965565311081];
LW2_1 = [0.036350751424754190744 -0.62862982201136718974 -1.8591173657506872008 -0.53222788853445723856 -0.10929358533728959768 -0.91567774089432685258 -0.32919356623702206166 1.2960456878682231618 -0.10082324609156183282 -1.1721525948511299919 -0.31976905901489977024 -1.0785330965424766436 1.0559894301028256436 0.14611619363869804422 -0.096393849433523692838 -0.13118569702413512834 -1.4725251217672392645 -0.02589831259612919781 -0.93536240486363797508 0.68562839534734754121;-0.69992414948436676436 2.3857760282216737835 0.15782289061841459077 -0.074570685283341930916 0.33145457775374964626 0.031472704585063675242 -1.1721133051240966161 -0.61380469412841032195 -1.7955572231898295765 -3.3669182290570578431 -0.33798640782506078617 -2.3500614253571669998 -0.43287761619237019595 -0.96604688710880415314 -1.0403806569856424158 0.41091740591200970334 1.2171546049675370238 0.30444482118616156274 0.17567247406716990366 -1.5811395235759886368;-1.809228227348473439 4.028228977796420196 -6.0004446961844530861 -9.2864829392622088022 -0.96026276073141592082 -3.8625984072814678605 -5.3837677210999901334 3.9829474090482794857 3.2855963703023460809 0.85792403865894883985 -3.1099097365632886181 -3.2068188447006802377 -8.2691024187817561142 0.40077863436171545786 2.3543022699602857983 3.8913305083331071188 13.14747815707881351 -0.18983715270747242299 -9.2292550327196654081 1.7850558611672766585;-0.62313675879412711023 3.6773526120621027324 0.83712051843297352605 5.7996594964216425794 -0.31536696891155230338 1.0414436367111288284 0.49126742307879850413 0.88948747706240183231 -0.48534866672531229437 -0.2303277371923014849 -2.2276874710116549849 -3.7634664910677280147 -5.2225009620910780583 -0.10033139906297990074 -0.9336408175183276148 1.4009963187833391896 -2.0690572338331647551 0.23820180850869632216 -2.6495777440722516616 -1.7525588646382344038;-0.5964951300179506255 -0.29941394300737300682 1.9132831661426359382 1.7573629852894143699 0.37145951711339691981 -1.4298156018240211207 -1.1566275232135441176 1.1104325812427149334 0.47578018248685249869 3.5799636849193032795 0.32067567282001852025 6.3316855129472742192 -7.8852260483117611045 3.2111320557110278884 -0.075950474443081131271 -0.0056216605461036151317 2.477847278769683026 1.1010018025294796562 -2.5669792348548443606 1.4211575187517280217;0.25989873558724080338 -2.5437967645181491783 -0.14641264506753987051 -1.3273003508151022256 -0.13323938854825512212 0.19402670247961029126 0.60725403149985091034 0.40121015752205024807 0.29758056296847074096 0.34963789445644599674 -0.5097567375836549175 0.36214801821479930544 1.8060829212630575835 0.46813107714651180924 0.2461333927052819226 0.10016186663339284035 -1.0920451518687386283 -0.13027811381727233409 -0.66259400969931803171 0.57940615974074993755;0.78433211705392913426 1.1644450748238239779 0.6550390343469004728 0.98417651908672465488 -0.030858752657226876798 -1.1860871333960103513 1.091121216659992843 -1.8714706415481194846 0.35850604220703358171 -1.1438616636373619695 0.33297123593756594584 2.0051440792917483158 2.0259823774770731042 -2.3761931100664468453 -1.257029311324069365 0.22820455803515915516 -0.6953393949939384866 -0.089085770481385884167 0.86565897627807275594 -2.3942380980184032602;0.459404544682409266 -0.12694699333457459822 0.028650364238764682717 -1.8595983583099349179 0.12563979254682042241 0.67455903887556944998 -0.23219953884087765617 -0.67348047502169472445 0.40073868886785546373 0.12771513725845690113 0.074762760295514665843 0.31392368500592382485 0.75243044639733303036 -0.19591813359776541481 -0.1504805719863699931 0.20492293172901063225 2.3362910220659696137 -0.00040682474076616181001 1.4261727198765563607 -0.5548712521585736912;0.0019191024270788345409 1.0896958836383550118 0.99724999130300995276 1.3168552230970038686 0.11111736267325124372 1.4199558917029062588 -1.3255630170008452229 0.085822987683258883385 -0.70839660065495602126 -0.096623683432414037009 -0.76946089160296249343 -2.6577051854945570319 -1.2325986875813526034 -0.98052439176371153362 -0.067019408574134381462 0.6435796750722366788 1.4598470192207240181 0.18097793258461294941 -1.6141031818770683604 0.20807496963983065918;-0.19856093347671432969 -2.3891379776655834455 1.012810435580856705 1.700441420899145184 -0.31870857582709827271 0.76276657585774132464 0.83050431801831336998 0.34357244412183007842 -0.075991011039008016237 1.0334496267614627918 1.0225372009562732067 3.1024318109887278894 -1.7502077283325292445 0.83393345263140317147 0.39727731220265394274 -0.59201413592400009556 -0.88809459739340090856 0.34024587318240145928 -0.54803445913424109204 0.76084209193106300262;-0.26206308677478395985 1.240299456354812202 -0.060457883264755547803 -0.5327455921376278436 0.24207350593456367083 -0.63200998710256905966 -0.86948165054585391243 -0.32782001297846347088 -0.16468905392213917249 0.0015980189763125250604 0.56257113227527721921 0.86419257472138300002 -2.0420810809910707739 -0.06929709335014938576 -0.19991237082407820047 -0.1492655535172414949 2.9719617453944802143 0.053682994999324752661 0.56274647001618516295 -0.53389755767442936829;0.24233040607488445795 1.2977654922998533848 -0.22675177083636427477 2.6134512519818517973 -0.18980743151216178388 0.06974448649491450658 0.81983918403509192796 0.86506198281515911397 0.0038593873183070861316 1.8382977145270276154 -0.73577304429143164377 -2.0376722803415230345 -1.5780740073423435987 0.010090309354290869642 0.69353534116547954635 -0.034212812250946411652 -1.8856032172485943654 -0.34086669548204912017 -2.6222501080187927691 0.69936196596222754973;-0.26593838348254544846 0.54075658655203651115 0.6595528463195345914 -1.905871269086221842 0.084261867477740531873 0.31472803954696720874 -2.5797476053402315088 1.2401246194976711656 1.1188846519565125437 0.35876511983845221776 0.85295620553548923137 2.1384977555403676952 -1.7264433321032146562 -0.31480524621303573873 0.33483218124731134457 0.95994995601474530922 3.1096619439274109098 -0.20185119269555659716 -1.0704355798006535139 1.8036314968629290068;0.79584694016953949625 2.3200206301039516532 -0.34306882534486415892 2.7043755957191915051 -0.16677039658848150094 0.83058775127109041314 -2.0944605102706654876 -0.41376132305280199919 -3.5317232149364783389 -5.8207885027352439522 0.31208860186938169878 1.5996311795756097407 -0.92501991555144957857 -2.0675630235502953091 0.24421374808259890821 -1.5704055935369474195 -0.71943477771796304765 -0.13329761050054420024 -3.5995950574438619896 1.7316466373019405722;0.13299723320121656367 -0.78318960028567630172 -0.81841864425236909852 -1.2437437185250770355 -0.10351350253649448108 -1.1850182718868476073 1.0910524074128529204 -0.083552363730240011841 0.50837942812055936237 -0.26157287626254266399 0.60918207374261124087 2.2382239141802076077 1.0192549547644362828 0.86894412274052645895 -0.065569692415806166141 -0.4966020791979605109 -1.252371724434472311 -0.087677295833194099361 1.4740412876352586569 -0.27235709655664269713;2.385288933432913705 -0.4370445811027532379 -1.2522529495816803191 -4.0020775464414626299 3.5553657043469315546 -6.9554205634335577457 0.42687824439212374017 -4.575253074365666528 1.9095199479318833991 4.8188730195022024816 0.10569044141706583628 6.9709019580629760782 -0.77550022897143977563 0.042782212907881284059 2.5407379018969424855 -2.5022445342332670926 7.5149156452651784122 -1.6322498822384894357 7.0539759857673232091 1.4139871236668697385;0.026029743285993847679 1.4063225938029397799 0.78593052474464875079 3.722276755432578188 -0.099245784547412160825 -0.070635436917585392447 2.5861237511811911993 -1.056822322486252963 -1.3048643752748725344 -0.58492526778127718057 -1.002954566893676791 -4.695324872159265972 1.5807362641791422586 -0.020829972772909186723 -0.1792988278322176221 -1.1341357330038732698 -4.8527599331415540718 0.11730980391411126307 0.83614656065513226491 -1.561249648142740698;0.41549878657168726193 1.9476855286754721774 1.4014326053441568121 5.5188443731256757729 -0.049693637076420840715 -0.71482907918778826328 1.9304749907785085927 -1.0585963928900443687 0.43053751160160697031 -0.11582401434580213984 -0.23238952336043083857 -1.9898348539056789352 0.98399552831093606287 -1.7539801991670345149 -0.93563763930714294315 0.57361048688158322584 -6.7780875431683877963 0.68987441321393327964 1.0726505113273403502 -1.4914371094891341052;0.37790807809471604894 1.8024131317246423478 -1.3576694676267218043 1.6650477482599630452 -0.26320954465434631686 0.96940024176548955648 0.032123989572508795942 0.27648767279149943921 -0.47032131399591825538 -0.92166456514590433535 -0.084258812755972939401 -2.0431749299961388111 1.641029597009697083 -0.93399677951235404727 0.32901120307195452774 0.095300915666800614656 -3.0460742667798865746 0.28150346352838639952 -1.4745311206243112423 0.60966409445899083508;-0.43204862507061153609 1.4002308147024453699 1.5914926858174658353 -2.0219863799575903407 0.1488098520056143903 1.4688936864772295099 -1.3789829576434555758 -0.37664403332192220031 -0.94168571345813312234 -0.77866155795373981352 -0.586899119707882444 -3.6121510949860917705 -2.4866482870914285996 1.3541898393657583188 0.52030631154128981208 0.25174116100881854807 3.4374172805344729298 0.12811152099055042597 -1.5319141284463491104 0.49505127964312678479];

% Layer 3
b3 = -2.7162303578788944414;
LW3_2 = [0.64176311154154042082 0.90106420058149105934 0.33358605206568459067 -0.25736886408119652447 0.18392389259418223668 -2.4835052234797743154 -0.9010294193521946049 1.5145472098661383331 -3.4184178076561129167 0.38013441839750283791 -2.5280219600030360283 0.91949263365317535079 -1.497347466200042776 0.17499154951735118591 -3.7186780932631311458 -0.072614145370896804321 -1.3996382855696418712 1.2586900557117393085 -0.7853988439572034963 -1.0021855006194382298];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
