function [Y,Xf,Af] = ESPER_phosphate_10_Other_3(X,~,~)
%ESPER_PHOSPHATE_10_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:29.
% 
% [Y] = ESPER_phosphate_10_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2347007560436831231;-2.7394275234638767458;5.0164020109038185424;-1.8389774878638698308;1.1913044780732646721;-1.334783309659158812;3.0896484896701763567;-1.2632157933904195612;-0.99956077682712740629;0.037430006418853786765;-1.2430000242083689699;-0.38718897764255771898;-0.069243014381171252847;-1.3929030822727421768;0.68273170421135132013;-0.56949949120861020901;0.11007281202721448665;1.0269065595987592054;-0.73114703505397660166;1.5470782832087355274;1.4765350988325789405;1.0843226600224078471;-1.9683457553238665749;1.5761355484325068055;-1.7682452035002875768];
IW1_1 = [0.40139116448369982493 -0.7308009721177232132 0.47695512859085348323 -0.41673403050176566209 -0.23052019747690666307 0.97427728387671719279 0.028866463413072321331;0.45127855025839169745 -1.1096794943583163651 -0.71369410255913656727 -0.57090850964406336665 3.4728925090572828616 0.183034675359214416 -0.58341979423489120915;-0.77504808740046304827 1.6740958880269567466 -2.8082936351535074948 -2.1356869989434610346 -3.0541605781471936609 -1.2981951429425622191 6.6772933394113627159;0.7544426267695610866 0.96549191136937617674 -3.1578526309868015787 0.28476955858726094029 -0.16881711784495359585 -0.60783413636389072021 -0.59652377435358772129;-1.0780120526473708775 0.18025377552920801572 -0.23231242136768998074 0.44784866842963932942 -0.12804120003976537934 0.67611409667890320918 0.20505285896806485502;0.56831720246480621483 -1.2057766943076313471 0.69378916769503351514 -0.47465709162293451273 2.465047713512293015 0.41631853988970513036 -0.094525115051210958916;0.35592417617012533926 -0.55794727957491996317 -0.084568354310219723269 1.1151930644688259342 -0.50504819063497841114 0.59131681971074923077 1.9621159886186099186;-0.4498704678900377063 -0.90225507877907995535 -2.0411745755568975191 0.87261870643015104765 1.8379532373013958146 0.22873817600675017125 -1.9913232805712257623;-0.24693909985381201633 -0.33307993088562148909 2.3243098367480818922 -0.57896844962078664043 1.1735522159048266122 2.2227799230815397102 -2.5404637770940352581;-1.0256627293697659908 0.41702410738523065792 -0.95239945226670730261 0.94393179073681809932 0.64432663254928834728 -0.88420212065363379406 -0.36127121766256553581;0.60875027814184712316 0.78519494515347987296 0.81731177484917316711 0.72696476073018001518 3.5295328006299122592 0.26417572993789739666 -0.17842518754738223574;0.64398719299002316063 0.65598968521855205438 -1.1134772935299062091 0.43789385267589753248 -0.9345521483674290586 -0.22431781280265220002 -0.62837956936456895729;0.72294904718328900639 0.15422314009590448736 0.14908382095976713266 -0.025825314347709876772 -2.860074146197797873 -0.77936011120614601122 -0.90256720741424467658;-0.10173353378691198101 -0.78334634994717877721 1.9886151336509796383 -2.3743749555691500142 -0.6222672275026452926 -0.76293635757764677319 -0.11249771369086278283;-0.27874812411659144473 0.15403208193488154842 -1.5744368215112973797 0.36914145016820454348 -1.8651809315139005196 0.77140374605298012156 -0.67193700215091511918;-0.61327166004828448376 0.54814481383767266198 -0.15269890348967818383 0.13172745724957213298 0.62319069004839233727 -0.058014283105437491894 0.27016165397318059327;0.6639657896830855055 -0.53525337465405853354 -1.1343566183806104153 1.1556011253697724417 -0.53869309704420931251 0.16224518358375819571 -0.14293414400667320274;0.47816956548639411029 0.014993693334462227656 -1.3429393766716926084 1.1025490342773895946 1.4638883069898267486 0.84435762625595278674 -0.26739191586193267192;-0.9664979319702142746 -0.57874618155805324093 0.74639302701083343194 -0.21209176801629284204 -3.271824307439735513 0.79465806794456439466 1.1892328544982659899;0.70251785332734284495 -0.37579628223155514544 0.21598256151082670384 -0.12668599173355304943 2.2656749174178556494 0.18975112570696808789 -0.80176328598988666485;0.84335071996754240597 -0.38049563188733964703 -0.065313693671073036473 0.31085195614785177121 2.7251184870553633033 -1.1058592462327780925 -0.23776202793468489971;0.83671611942736601186 -0.24662865917710127817 0.10298174293045710137 0.26520401705839152795 0.72928693050645887475 -1.1515113413406226073 -0.41181058387049940261;-0.69899162993970409552 -0.68766687018185657099 -2.9400506836081534701 0.93402109779036324166 1.3048200136428942386 -0.076677295121265295896 -1.603298128870584538;-0.81039471421982334221 -0.60712305063364746527 -1.9278341738710393916 0.66742686849308052732 -2.4038961774413909467 -0.36112741619119492764 -0.49259119338652934683;-0.43279359858077309786 -0.35845930951929105834 0.46634529714259215227 -0.459364975358972083 -0.37538060883829366121 -1.191148814522799082 0.022034477542236873687];

% Layer 2
b2 = [1.7488468595833541741;1.6648102634802937061;2.1688863230162680473;0.52874906568203883239;-2.3856215211015427968;-1.7520428264523224549;0.95587536699268160767;0.41291803754157968553;-1.8184555785840854636;-0.1475545417788792224;-0.58541051174760661002;-0.28708233190338006136;3.9738872982148714108;2.2768891352892985935;-0.6448887828768272712];
LW2_1 = [-0.11879230196589529722 -0.79287312163367096307 -0.39282229786379940784 -0.067831482412206114962 -0.090831532556372357456 -0.39121365517236084131 -0.51417583737507532859 -0.46850000272023234471 -0.0583716308339962478 0.28029843089329953276 -0.74062335003992485483 0.37613539685561225845 0.20255266800963742102 0.36596502486239018692 -0.7176947287956527699 -0.98951649929916329906 0.13031233764476773951 1.148805057836789878 0.57487113099680497985 -1.7609137104266889828 -0.72427578184669172412 0.7499198878666244461 0.33653534336303991825 -0.33074671251901288649 -0.41388626114552740098;-0.14816072459502196978 1.6179945051642545817 -0.34077719361699693179 -0.16302731300867653874 0.51074363344570550272 -0.65212529757346870962 -0.37806478735732351737 0.73277885367959416651 -0.1361617588715221816 0.055722250665405724523 -1.5872140762421771409 0.30598979863216146935 1.0028783021034832768 0.16906964659823642272 -0.88828553737451654282 -0.044784956507611918541 -0.18725302190982023864 1.3618877132666660223 0.17292138929161646188 -1.3017216161261848661 1.3657059847198076419 -1.4065217466396786605 -1.1124238010771672069 -0.082519440739204794055 0.45451161504503179156;-0.081338959304815494633 -0.79502979443542431959 -0.28274856411687604441 -0.24996066895832824706 -0.065883996703131150752 -0.81351808169665362769 -0.31520967962855228617 -0.44680495023753913353 -0.046975048382897857668 0.23710658007963081317 -1.0029850265272595156 0.69650118226101287444 0.22343244685938812299 0.45793308346335492853 -1.4906829992555286069 -0.95149449192793122965 0.42762576268074897756 1.2639258026820050507 0.80285471826481669133 -2.797551876110208724 -1.0483969188538877493 1.2932407970317763013 0.41587932747407030387 -0.2068749501540279867 -0.61029615995642250148;0.20465844183757414543 -0.50982473349621182379 0.49567893762446435524 -0.048369025214260834289 0.69068032525716405168 0.84027413855059474024 0.17399086058924695397 -0.20743968440471399761 -0.63286167603655296698 0.2048610292570265945 1.1191838970138219267 -0.88107782207292384413 0.69629251131468739011 -0.1958458979212194806 0.01798273630480932625 0.52002486632651390153 1.0746240536085076567 -0.024619495373857543802 0.16419139115210604207 0.79886053320646410736 -0.37406812304927256063 -0.81500905282174929134 -0.52789824654090133915 0.34152359552785321872 -1.2775948760028574824;0.99210631421410744313 -1.7282348426035532007 -0.763333599824482123 -0.07435342626405536115 -1.6813105629399289764 0.8394715459287350745 -0.46902652446966464073 -0.6249027626317357198 -0.29839802204846149758 -1.1096324968372368591 -0.78101716836364898366 -1.0182919861493080482 -0.2172224792472255972 -0.4050933348879045548 0.70937414181441704741 3.1629367779675781058 0.70383105572515303194 0.045174546365918853696 0.4032625462299411212 4.6536607750114624693 -0.25583205050234353317 1.1629123763655326851 0.17607145765379028646 0.18876030486267975084 1.4383101815898877707;-0.79726207607117904885 -2.5763705209721994294 -0.96207516398304415706 0.53039827147338192148 0.23828141496692550882 0.55640927984492738467 -0.67356658173961814207 -0.13566209300507758861 0.060089468572012687264 0.56434948180951205465 0.79060815191962319215 -0.33316419634264393679 0.68643478794152135158 0.36230574997155973183 -0.98800006880103563578 -1.0203434768249943776 -0.49419587894880284695 0.70192802077261073901 0.13842378704613730878 2.0376246259462296173 -1.7839793191511246206 0.45083542856118696829 0.34835553079161218903 -0.029953796365608464924 -0.41951959662216742331;1.6552104866298922303 -0.73746927887513236133 0.53986753778192253517 0.91177996275725681219 0.35997841891978560325 1.1889504370949486312 0.81591798598691644973 -0.04875264039761197099 -0.28602868532194769546 -0.1444522738561587194 0.58613042607153598151 -1.5599939435551879452 -0.40400481371339269643 -0.78736219472175594802 -1.2906503596033751524 1.3312747539675380271 -0.34748901710388441222 -1.6385578852112800963 -0.3498686008499757305 0.83037178613900963775 -1.2136860989699733704 2.3669924074305179751 -0.1521588758592765378 0.23585818347141357387 -1.4362448954860889128;0.088368509868205685764 -0.14533172158742377333 -0.057330517818617122983 -0.042137292703317792697 0.59522526078343307443 0.23735645906426483531 0.26970699195898478751 -0.22160385175687657977 -0.32879328030384907811 0.33886852879825546392 0.98405848690535524526 -0.58547247056531570575 0.75848506984983510293 -0.23882937085055425119 -0.0055878250592649239548 0.65297945266386414609 1.1257587739758523337 -0.26828729063857442716 0.25400525054140943304 1.202011881427725859 -0.36957629968777677698 -0.81414713591655718528 -0.43738466432812794782 0.30096642099446718754 -1.1402237260952801101;0.67782358206286041913 -5.1075193638011127106 -0.5856434274758945957 1.1275473478068605004 -2.3824806060383849626 2.7046880332392015944 -0.88820034238333700483 -1.5227111958888903676 -0.39888358646164390198 -0.73706521144203629436 -0.75512954950825750267 -3.5686607277689814666 0.48881916325957153191 0.67945829610563135414 1.0136856677608254707 5.2672713776574999756 1.8185251538317479536 1.0452504183051121167 -0.067155730733097759866 1.874749936004120654 -0.49629692962616289709 1.6006952676791903478 1.1792597267195927824 -0.32129461499302658378 -1.0275118462647125916;0.83656203495059788811 0.4448138136423512301 -0.16613667064073828206 0.24827523989725505671 -0.42323396579400013318 0.17873609656525130118 -0.094897988708506922362 -0.24138402090889507501 -0.582582983796764875 0.38605677841394803185 1.3358656246029045889 0.03734895335130774402 -0.81200865936295996139 0.47736447878255888755 1.9011716566698411146 0.44075793911913918599 -0.72425296306799635815 0.18704298527851667688 0.5427433209191787622 1.7486264714238239915 -1.8568674001741978241 2.9366163610277671303 0.44315484270210842022 -0.26210227919014561504 0.078294856722990205378;1.9428637666721619848 1.2709860799333467796 -0.4785873972184878089 0.25785058640906077798 -0.10206034698516647241 -1.2711353852914841767 0.79740017919538008773 0.1028009120327213477 -0.080405475191943326374 -0.78326177643556826879 0.89958304740673789013 -0.97147216100401079242 1.6695930028353231922 -0.40261716353341964192 2.7260208525127969104 3.0157728645415922131 0.4531710971132989485 -0.20144175616483273039 0.15015392026077642451 0.59851626870515572953 0.8810962871031525756 -0.68653911285221880245 0.15144952271410316857 0.57987880894625176698 -0.1056127789112999843;1.030264507047846223 1.2430721950446412816 1.1164504763618277039 0.18944462425656194426 1.1192891488530447575 -1.3270432139393468773 1.1844687205519599527 0.92272009285671618972 -0.37152331412017669532 0.30652216940403087531 -0.41777354257256660297 -0.84557998719073101945 -0.02569907475613198225 0.28118643504322843318 -1.602443350390232002 0.77667235642008114471 0.065728612973883868142 -0.06752118726427036588 -0.69470428520028659758 -1.6636875730023810149 -0.109053570567806693 0.39154164729162932446 -0.86357022430799901258 -0.1875831364140514157 -0.63739078089014944428;0.85248373967739088375 -0.47905822738304515429 1.0583734415258596595 -0.34629708908786804855 -0.26364050794869003935 0.56600330776432605795 0.13001358252376199465 -0.79384569444104013947 0.032507607612990110924 0.11237788166753293062 0.095903488561565081172 1.3065087908232306813 0.031568454697780946872 0.0057886084447274629636 -2.1179526116582403361 -1.0712788655346832112 0.12485889781423624434 -0.17167461510268919311 0.84120272346150981591 -3.4166862093940770784 -1.6433091985111187849 1.9801037414720892293 1.1627807610024816221 0.86673228979991689958 -1.3921493599515188944;1.3228875718099373238 0.053115300301056309062 1.3944591219787516589 0.47645627242170834892 -0.54245932251235473576 1.2050803885230865209 0.7223200202502849665 -0.4139126556269832613 -0.13837405041810973971 -0.1280392605032827924 0.30890832528278155955 -1.1432535927101175055 -0.17559883634782286199 -0.42943040234010149137 -0.27638189035141846883 1.2726038307479825562 0.005535133283085318448 -1.233951092216436507 -0.3871683895047035584 -1.027727791376918054 0.092060876915792233532 0.96586904988445654308 0.42964857852678250971 0.3193031848106403503 -0.64404366352276309904;0.18581564271101322361 0.33879178416030925058 -0.52605624663432215549 -0.41828038113513643648 0.01796816867470012527 -0.75266127695662010666 -0.90927155397931636038 0.72369827974671696591 -0.19043983697092950469 -1.0615984591376026458 0.47549491419157641214 0.90438856207831963552 0.47176434587180576807 -0.049424863487762128733 -0.60475095301916326207 0.65563100226559678507 0.21772230145298432369 0.48333016685457552697 0.22923350364093986187 0.67124097775654834042 0.63826033096044609838 -0.25410730992379898519 -0.84730374644063077838 0.39745166774727375136 1.594392079393788908];

% Layer 3
b3 = -1.7618028896110180526;
LW3_2 = [4.0323383822516998265 -0.64369585316317845525 -2.4761939345546970515 1.7785889530924057222 0.33087505503034847498 -0.37264059351426875866 0.44427285092447299508 -1.9779054026266820188 -0.18410089468956877812 -0.45547263288278244664 0.28357437905308396919 0.44226525610862366111 0.5875716340210714872 -0.94744344290399629127 -0.87903545668875260333];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.568038194888224;
y1_step1.xoffset = -0.04979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
