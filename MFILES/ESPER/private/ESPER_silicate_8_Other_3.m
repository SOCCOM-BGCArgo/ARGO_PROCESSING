function [Y,Xf,Af] = ESPER_silicate_8_Other_3(X,~,~)
%ESPER_SILICATE_8_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_8_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3612523297189840221;1.9283720646433004653;2.1513410735644247218;-4.624055995891134252;-1.824214640705001278;-0.6215670360744663947;-1.2690677164672443666;1.8476109459908647281;0.91547736382100020069;0.60716957495333578887;-0.14218025013803281542;1.021089843934507968;-0.5273310976201623923;-1.5839092319923566698;0.79607122128748242229;1.9587130841526472214;-1.8806448278438290256;4.3318661204038138024;1.6939129450812968614;-0.30100149511753082621;1.3055184232553667112;0.94964999250837955902;4.3884659244227313124;-0.15042969371091013953;-0.24212610411597293436];
IW1_1 = [0.34198143068436670511 -0.61608511337549232145 -0.47499730006115348235 -0.70527132828001970477 -2.4767758787909963658 1.7231169105328507651;-0.72014328984881414986 -0.72055085065641522046 -2.6069273315562768722 0.99244416222202469502 -0.94890681850758284988 -0.81037303691884920998;0.20941682989584931018 1.2990458734906902283 0.21544079426748366513 -0.42701139084039196891 -0.85912714188270211668 1.1473286795261745663;0.29655036758046021683 0.040172203743486456506 -2.1113821468436837492 0.58222909236764575081 0.38898528781861735348 -4.1078036037858689511;-0.11011997375674682786 0.2792075659608387328 -0.12184451682749834756 -0.10203881972232246855 -3.1955288790532705434 -2.8403263382377166302;2.0403731141269965121 0.23829993704643040453 1.3550540752472712835 -0.13273601389715661281 -1.0923407189794769323 -0.41016565732021026403;0.22738768304227036099 -1.0936179305377415893 3.7650942593313914131 -0.4401246474169135392 0.039999692401299656586 1.4157537125701864511;-0.40482762463129251529 -0.15653378907289622335 -1.9823689097658074854 0.77274989991305997883 -9.1950839124796655 3.8331465327442271196;0.038481528088474506455 0.41937897388408290622 0.16776436856661730568 0.66647209421305586563 2.5935293413280007258 1.6437102866959900638;-0.90802634230818057848 -0.16050347738846057477 1.2553235709104531015 -0.95857485081471505151 -3.5264799466908041126 2.4443494753454357848;0.21791138999432693724 0.093639004943784617807 2.4113606276579186982 -0.92560433617454551669 -1.0438246790150882415 -0.49326754786641324735;-0.26299838990613683132 0.22401029482248230318 0.15210381763405197986 -0.08472759413526972927 2.7874726803949898546 1.3621000335615216503;0.3599658060979981089 -0.73005344456228637995 -0.56963208288597932949 0.69685806689894091992 0.15313199257880649728 -1.6118429318180722554;0.8621477866562089476 1.2249083923293213605 4.0473967179617975631 -0.1298050216420001679 0.87757610476364622532 1.1683621133707251527;-1.3283691641394002048 -0.40199296148937163631 -0.2798370283206409459 0.42830193639035601949 -0.4906565072476002376 0.26929907405015779398;0.056033345764468479866 -0.26756369223268000601 -0.053417430620690042886 0.29980214965519497161 3.7929602117709415587 2.4341332448284753731;0.91762817049396316893 0.58938086897765917804 -0.54284044924668561904 -0.19238498502406606305 1.7366565142578667125 -2.2262536209288930067;-0.14548914812288310516 -1.4424118702231087941 -1.5132763267408415597 -0.6860219598006492836 -2.2857915876719676618 4.4374480331951895451;0.65647756291920633664 1.3433390682206156619 -0.22333674966599287304 -0.64166646180823672108 -0.60421474642578865133 0.31551211393982092623;-6.8103547174986882595 -2.6222784994229857425 -1.7352817027041538278 -0.35652203442481517071 -19.875642719712530493 5.0135143215975270792;0.81640176345203596675 0.32490147803104274526 -1.6794457101103221763 -0.12358199097672882549 2.2044062285016439162 1.807057769681731374;-1.1855334272341220281 -0.45652821705059826174 0.54578026949045388427 0.06590377957858345459 -0.34091939905334195382 0.23240366511496068913;-0.57057876686769570806 -1.2412876619975201642 -1.2628213398430867542 -0.67442820436796757644 -0.61882690491793879151 4.96591987223322473;-0.096999085909034041264 -0.17835059046134418836 1.2388214980652079156 -1.0495599017045367241 -0.66875562918388986589 -1.0910306260442437232;0.49913630838775813192 -0.19688878097084655527 0.68275193393744570969 1.8024844222614653244 -3.9806730654381823342 -3.1540245256933259199];

% Layer 2
b2 = [4.5502558283521628013;1.2757585488243632366;-1.3957749681809592524;-3.5219033451471606355;4.6027376381944389294;1.0320360775371413276;2.1042360083675366589;4.2589008818081515173;-2.5611288050681415562;4.5967294764925714645;-7.1335457362990783992;-7.6661824234901398967;-0.25049914704466219595;2.8261580167548143727;2.777803668091030076];
LW2_1 = [-1.4642642884561916095 -1.2668503726759119399 0.0096065893348209058233 -0.65364664865407795524 0.17288371402499755347 0.010839705709231520561 0.15934531249824704369 0.49816083513489034518 -0.47388608274408633436 0.59578945374427472181 -0.53019749894040535398 -0.20017352873831448234 -0.68788648345308289755 0.85165508387723876105 -1.7648725341785889142 1.3350386377666747517 0.54992488509499704019 0.089318012026815871152 -0.75784146709970057199 0.046693812325185171663 -0.80412409269512541421 1.4339091711753926273 0.04333462874230678552 1.1617475634019485131 -0.025906239737260184502;-4.1827868200892091011 -6.9073079306644871167 -2.0874309475618724186 -0.44532865192744686134 -7.1789320822097968389 0.77481084322665516595 -4.1393398140757158288 -0.74114031082089892877 -5.8478539631132600007 -2.2682013343996456634 -0.61176975269047917383 1.2697937646874570827 1.5747742211788620104 -0.68131882862468928774 0.47123479401632545338 -8.9440746627692977455 -0.27270302665240481188 1.9079941900909327401 1.3511162722156120353 -0.29795591058409814922 -0.82962383051630028685 0.30325599444908352131 -1.0382794339600991407 -2.6133395869074553808 -1.4247706224559855137;-2.1239807644431012434 0.76563288446587640657 1.389903640029396481 -0.3735394281489706203 4.5543349739583085523 -0.27501127898194799304 0.0022034717289561136025 -0.49467062951568824269 0.025122530947617918717 -0.8529761814236304085 -0.81461775633582911293 -0.99287967970885049329 -0.89070768976352854285 0.43227476267750170047 -1.8871794565022106394 5.2044600749935749917 0.12427990079430875636 -0.49759393051719791323 -1.7392434672428536135 -0.0050913337160971797873 -0.49628378732025130171 1.8039278403753391533 0.91081779186824507466 2.3809569242263992628 -0.10615282728067929052;-0.7769538334717224215 0.69512971022161940127 -0.57085797559275719415 -0.93107582382693188094 0.97689061558562106935 0.50289672259294282419 0.076859915012454482763 -0.86342595218700246562 -2.1443985962646521237 -0.18255742795133109158 -0.23692079078923347635 1.6016498788049113866 0.52845115819366628163 0.28143087035664066109 0.39298488637953699065 0.037557800561879357837 -0.49217901501709987455 -0.48608387355697957322 0.56134716253433381006 -0.062427348667624726897 0.57889488169977421084 0.096758009265942565569 0.29277989938538118153 -1.1179661085040861757 0.45000574121405267913;3.9497187349921536459 2.4839828745044250091 9.4144738368020526309 4.0429742976311615621 -0.30423732998766617186 0.15777837052338541945 0.067242181838673142913 -1.2879430524648280976 0.0067603348492940289888 -0.74112174861537771786 1.5514070244771773766 2.7767266869580407018 1.3404251478896418437 1.2888883461917077788 2.7385787565567984991 -1.0418834623786510374 -2.9454597845991088434 5.8301250355999059138 -7.5683561651866897435 -0.044714418223575934375 1.4895124997532593891 -9.375781380248579211 -5.8389961580574381017 -2.0841698408631623707 0.35234633922323693733;1.5825265618906130261 -2.1792997323572214086 2.6920395208490712768 -1.1864146483438724466 0.42713980850339161588 0.63191412216222953013 -1.0352745310852204952 0.69200497390667814468 2.3865145327263559416 2.1557701183749125029 -1.373273814731281961 2.8212947111056143612 3.0849197089227007318 -0.79608332292921180073 5.9773511986579732636 -1.9390786860923070467 1.6771293321555296174 1.684211768643880669 -7.2203913425232348899 -0.0096712972098564626428 -2.2368451344226589761 -1.5932547750154479882 -0.27999281654569219135 3.3700263545242701291 0.46865349619927509917;-0.44740647866545718569 -0.28039601595953311808 -3.9963555355186421991 -1.2778565540576360959 -3.8490813691321315027 0.15900188454293093243 0.28612324251771958927 0.61872863238169795164 -0.3533794674968856464 0.0099588109373678016661 -0.44953996453627970142 -0.26957104997823450043 -0.40729017505417136613 -0.3474192405023247554 -1.6951292859451523309 -3.670870821614778734 0.75439775540544529164 -0.663378195914312907 3.6972435351714252327 -0.11551321301393330243 -0.24512406716795306916 0.28509666865032712302 -0.20385914718479611341 -1.304848109258554878 0.10389188157865134055;-2.8786777963288234794 -1.9928500517268483705 -6.6903307651474417383 -2.4146585755577594234 -5.1712443888484811438 -0.66514661921924644883 0.62748912328389294668 0.21358649455304717923 -0.86846841825575959994 0.70346987431777519006 -0.92379763416853699631 2.5618016799974303588 1.6478303809466503527 -1.3088028832912836918 -2.284379951018748578 -6.3730492185468241573 0.63935881889494938779 0.75111913608215707949 5.8612981025587505002 -0.037598502733550774602 -1.0790436906816254226 -0.21788891795259360262 -0.14906374908756478415 -1.2029597328463474959 -0.088640816801268576541;5.2470895571413276315 -2.3595180781233464629 -3.2729977332615960428 -1.651341754448831578 -6.8860491707444948517 0.91081630471058083742 0.063467213414315673536 1.2923128038862534694 -1.6618169675063059199 1.2677325250647735189 0.61853869203150901868 6.7387391723156655488 4.3865349967061586511 -1.6027869219746835316 1.9121621191625388647 -11.219732031479232148 4.1244506650436782991 -1.0704623360522100839 1.0209705069206107542 0.033683266447417314904 0.1867563565013350968 0.74769799566766403931 0.77574624355435750633 -0.41971502358673079547 -0.62533615690057942071;-1.1041513187219416103 -1.2736170177320234043 0.24165394473936605002 -0.97266962837463932789 -2.5880137768097126738 2.3696539291438050157 -1.5871094283526179236 0.29219340500994028798 1.6777539124355358435 1.7030274886725018657 0.32248058588736794317 1.7368787913466461337 1.5843890357990744189 -0.95829066570070087216 6.097572089471576362 -4.6253917515876104005 2.3180070961480847558 -0.88208303255673137233 -6.0782511590043064587 -0.10525876165895246828 0.84360861404750797643 -0.81398156067094895594 0.53771013997537153717 1.9892357283403336865 -0.14526591356025872481;-0.998953926433974293 1.6320252329597089158 -0.2161362609775316912 -7.8726634421544421372 3.2132031989130176441 -0.45265996599823399293 0.24759879675775406382 0.2131266507690142975 -4.7292256309168037021 1.0272537152325256216 1.2085610476914780964 3.5394787520657637891 1.7832540798545055694 0.94540867014069174257 -0.401814461015366442 1.0497189432356470729 -0.79428434627416777403 -0.38287018166486103121 0.081625176813330702075 -0.095296830728681294898 -0.69130621757758425883 -2.7854940806920294172 -0.78913082452309379899 -4.7707737539112820002 0.16072768181172447655;-9.3620456789760009286 3.7640504691602436615 -1.9152648072766491616 -0.95182711565448674396 -2.0741301463828287766 -0.13811911529867851312 1.7948209964127497251 1.3002590037481434049 -0.31010854380100083549 7.1773265511486039614 -2.2656396282244126716 -1.9981290186949849375 1.01198291110319194 2.8739271524687368675 -6.3616943795426212915 -1.8716255081295927187 11.063811092145559911 1.332390041191519936 3.6571618677588180191 1.4690093589860784284 0.60827836933207191095 15.408978606581300141 0.40856601166693512495 5.9854586879516995523 -0.81138539247742424987;1.4946165134593125678 0.64405369139513379828 0.13285960752790121342 -1.2736376099282820107 -4.7292146242609893747 0.80089839533383999637 0.14702232337368642545 0.22180015044990450401 -0.18339471710221155742 -1.470650201182144734 0.4328922322338606965 -1.6436286305185698886 -0.35749653765111261139 0.52934226169437836873 1.9853137239254496915 -5.2127749946168924211 -2.6415719803381847441 -0.79222384514129695621 0.82934068718479925231 0.020991279019125373001 0.40250251986637303192 -2.5463732803987579878 0.172438595870118061 -1.2474396986570717161 -0.55476561289649439779;-3.9654491119972732349 -1.7418513516454861012 -2.5265745820754288431 -0.75007087862640964282 1.3417409313037185203 -0.40541984481217235858 -0.497036856781954417 0.407365593916062807 -1.0094401797895486972 1.7752647328406183647 0.5702949807201495025 5.1606750007614241582 1.1023114590552580694 -1.5318193717185053515 -1.2411726678061181239 0.64495308490165847992 1.7746260291504731832 2.8657403688215743465 -1.0089699437283163874 0.024366400901970102638 -0.12605625125932221064 0.43760833408221150309 -2.9871620848663003045 1.139366752919033221 0.92996829544586889771;1.352738819360166822 2.8724458008760209715 1.4824803688179408745 -0.44973358727727946738 -2.2900244691793072427 0.075863750900773310737 -0.30175585619336492416 1.2626339429173769613 3.8090357196097484049 0.41791722150076093811 1.8147813175705107547 -2.3162851925586989132 -0.13276344695015787623 1.4740291707933768084 2.821647516132282707 -1.9016706722273846175 -1.8493102955826909994 -1.3946727566378072094 -1.6430008138745559876 0.068240257300046847089 1.674887370188714808 -4.2118802210307100253 0.57759629023080838461 0.55303383431857899843 -0.97801540826704724818];

% Layer 3
b3 = -2.8511380048840710977;
LW3_2 = [-1.3958044695578859518 -0.5763052473635097428 0.88338961959028106108 -4.1218318876172217458 0.21978727026037403469 -0.17515763897617653289 -0.356141326684908055 0.31802539926697503958 -0.13769524417393433358 0.20502750804759484193 0.42932528139768627584 0.39120747648032638821 0.84163439378686599746 0.46217947807099618585 -0.41496477689948302325];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
