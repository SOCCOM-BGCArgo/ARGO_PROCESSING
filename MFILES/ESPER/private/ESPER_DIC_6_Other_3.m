function [Y,Xf,Af] = ESPER_DIC_6_Other_3(X,~,~)
%ESPER_DIC_6_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_6_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1253442241569637794;-0.98910008867479692896;0.11222978800585681203;-0.27711901113772174909;4.3876806671198584908;-0.6022736789331484264;-1.8025041281447184982;-0.86809432071310621559;-2.4068065076000264568;0.97808716152478081263;0.55521688913879863048;0.28661627162816211145;-0.88225645320673939942;0.59322040640467910144;-1.1291206581381307839;-1.2165807050156642877;0.48086966489472332542;1.7928839675744099313;0.67817210494831181578;-0.19126336107441568868;-1.1922743507437789656;-0.29684517662769543955;-1.6219961436140233335;0.30904841964601148518;2.298953221520163126];
IW1_1 = [0.39508293965587309993 -0.16139772697167417692 0.68388025114135586602 -0.77365776610854186668 -1.4524339600700235664 0.1473141556001472674 1.2676642598106639959;-0.3364030914550155682 0.068471779861394549416 -1.441246143133502855 0.024451530797262685524 1.091362254994788783 -0.56078653272231837601 0.57040568556502979636;-0.94458114954452443435 0.053490944202152140852 -1.0036418670271496367 0.13326626893967549736 1.5119310268999923696 0.60182355819493438265 1.1896686363643353967;0.084079700777352037178 0.10548379619346716363 -0.10489094883592264829 0.038334776873291967481 -0.56391354453695186066 -0.58377491655120405945 -0.40559530856301234669;-2.0747808386127268854 -1.7884043756219465404 -4.9757705496979145465 0.17837683822574862402 0.83770220259944305763 0.31761403525196157949 -0.075531906542488591594;0.24473186411423111797 -0.75537284645500402114 1.4805163272102852545 -0.49805956833807146777 -0.085078142994299818525 -0.65336697334246518487 -0.76798519562611111677;1.2532836802047051528 1.0774243743444753552 0.43765090326132505272 -0.85524963639009365934 2.9405918289060877235 0.68234609923979794299 -1.8285722004591207224;0.32696824690264225666 -0.4409513879731839503 -1.543548000679958232 -1.3269972325363430521 -0.24786064944720972991 -1.680746378736958091 0.030752027252767891174;-0.25126402458433466647 0.04932131946418141788 0.67713880030470829929 0.64452075569971989388 1.3508954385491451777 -2.9713865966141446151 0.20594693705976627185;0.26319360404860853153 0.11719154889141104869 -0.70974228985829901362 -0.039546830600543557421 -0.30241810367765825651 0.83499484191049011539 0.080587483843761562041;0.29260547441992329487 -0.058930559979482481647 1.1004881110978070868 -0.42768280519919843474 -0.81801195170879492657 -0.11179024952104243962 -0.69649882561637099787;-0.067141403901700896784 0.39388704205863228625 1.4561386051043185841 1.0570357393614366881 0.21681851334426385791 0.41268501349791208987 -0.038454106144463533201;0.38235001579092353641 0.050608206701963608098 4.7800280990959489458 -0.1123734177601453943 1.3402286015130249197 -0.45268084730988084052 -0.77904231981931570949;-0.049397302359656634907 0.35760207599562970904 -0.98875475556249814435 0.35937930640751708511 0.20184546704042230503 0.55952589446996803257 0.79171552501165820548;-0.12715023173889836161 -0.43679382423606849528 0.58991557376929959489 -0.1509483482812165045 2.210786255550129642 0.58391350623493543104 0.47918020498059371581;-0.16596315185767546163 -0.40946095588944170229 0.56297138721739947709 -0.16253805762435488691 2.3491920126230896315 0.43495467827519035398 0.26340538872480251387;-0.15648757030724977368 0.32257122607088206667 1.038384890819030737 1.2696309280983986145 1.1764924404798509094 1.1352043927562871506 1.2355531027616493134;0.05414210318784746373 0.66251480289171416072 -0.80683276487687438649 0.90680781924157549678 1.51011156406130298 2.96839136748061172 0.72140046419231362851;-0.26933427084212457903 0.51297077475938845925 -0.81426566687765344899 0.28484845468686859071 3.5646440527057343672 1.8269472864813856017 1.1787661021245354753;-0.82313785476486633907 0.38627676741475480693 0.14173191307599528055 1.2630313538482476066 -1.697466576297441021 1.2455259572725640993 1.2410989581269908921;0.037199099427370221904 0.21335795831282972079 -1.6245206707075436903 -0.58869206066671131428 -3.5526688423128036654 -1.4612753198603893878 0.46627575324228182074;-0.07785571241629274386 0.047455537902491934377 1.2789530308873220399 -0.24486573894787896921 1.2496783288201260831 1.89760723345522897 0.94786659264837258565;0.24127262910227270654 0.20877807565782571797 -0.89196155511336272514 0.30095616412075504309 -1.1102485101029029302 -2.2282389346458422175 -1.7909006364039077308;-0.081942331867570300519 -0.11882433499926152443 0.14778366369646772638 -0.069766407009971193043 0.67253703466035508196 0.65402193047302947804 0.45036365727548238747;-0.28456743656475208537 -0.064187385283698480953 -0.22060825708219025665 0.55586563906568853266 0.039920666313570350725 0.47256100684107854581 0.91318143172577370681];

% Layer 2
b2 = [1.4569711963714622183;10.546726187485315762;0.14791342408111504692;0.364379314075558014;-7.1399322706222605461;6.910496350488940287;-4.9578852446302761336;1.9937020417714894638;-3.9083874181333295716;-1.62682622768234042;3.2736380202600350309;-2.9546747408652458411;0.3280402813600327705;7.9822520960332870033;3.3456650894517703243];
LW2_1 = [6.6380799054136723214 20.779681972291200509 4.5518138433451005298 9.7097216178864975689 1.1678905663014522709 0.92263145919867439737 2.9593519538955814774 0.51326474490812279416 -2.2957405421878434026 -7.5273143429129749649 -1.9949028159095145707 6.0458411389346631282 -4.5791118039172520326 1.1463134662552241227 0.41531749772208265137 1.8509293123031747008 -5.4756807942092349251 6.8885012185283587272 -6.254697565484998556 1.1626036760250799684 -7.2964297623160039308 10.585182246467729428 -0.44923829258101755091 -1.9494629945817167904 6.9628910843616989013;-0.084113198109094067245 -1.4607192814560079341 1.3365925267132949816 16.984663675084252787 2.7077830383623746613 -2.615908515400364287 -3.0753752779056640065 -6.9432207077051142363 3.2329139413517924417 -6.3571239159107406635 -7.0944673456377023157 -12.915372009658394603 -1.9471109251651288474 -10.113165978932519451 13.275480137877455178 -6.8607868084168570633 10.506136323750977724 8.1210921606581454313 -2.760124171501792123 -8.8391974672370778876 3.800292705258829784 -5.1159659685957308284 -6.4054163165096555943 0.97588035672890593997 -10.965914347034010135;-0.24986641706640461136 0.021717941842437814975 -0.33245278189094995547 5.6501175469418631891 0.12591933611557154515 0.72286343907211847437 0.1590299585635236157 -0.17582307901265614714 -0.20696722363921252197 -1.1094490013171594001 -0.62631029236874491417 0.066937597008725452374 0.00087702275352133439272 1.2368414261015745481 0.038772528562791272466 -0.32911820205015779317 -0.11378583569630416894 0.1640356668445609456 -0.28199303115401785913 -0.14641081009795361978 0.12994177199545839385 -0.008154805548465754797 0.51416189332893458275 6.4890028130684678231 0.86975786474839478224;5.5719068996672760363 5.2167457591896999602 -1.1080665411836012613 -2.1355022720897158806 -0.081717003299175999809 -1.9875212664319010791 -1.4243668464346581626 -10.109046978756794033 2.0010388665226197524 5.484845699896287563 -4.0805513785251070757 -3.9877605408450733648 0.62864805674116575052 1.688737149023264994 0.11391682982409664926 6.9293542544720185816 -1.5689465401642144204 -2.8600507503518564079 -8.3352801343914162402 3.2474077440380755277 7.864398083506271675 -9.7344937957182988697 -10.596050554959550283 10.918396579707991378 2.5604654264456603308;0.30606033348040673214 2.0884511344636051966 -1.243419300976868147 -7.7144906036812646022 -0.62194228335356327442 1.9259203057869740405 1.0626098223398725562 -3.3234113428774652022 -1.5785886717716717254 -3.068609176062915278 2.6833123052601166592 -1.483700506031291555 -0.18100049576046223221 4.2496170022872750138 2.7337600547557037167 -5.087003206496002683 1.5842680944040203883 -0.29152324912203342322 -1.0414812735263898613 -2.2713394144900478366 0.28198964401630011167 -2.8043851853001466878 0.28638852136035441998 -3.9939861801190383872 6.0480763912275037342;-0.41118058246585165172 -3.8011706480519995566 -0.67830805713060005058 -1.4938096541278402807 -0.52566063198492174457 3.7588441022053258322 0.38745780768567006369 -1.1958602110121729911 -2.6794722087497815366 -9.9321827320460265298 -0.37011162347783738147 -2.6308374057411745284 0.03013852836353391948 8.0077334873999799214 2.5069834195730726911 -2.9105884441442992916 1.7303821855800587404 0.56104780778550600306 0.22730072460051201078 -0.24568400601102685643 0.62533398423342845263 -1.300010543852936129 0.90969676075563321582 -0.6690863282479847518 -1.2697257519877958032;5.0296846102209347151 1.1707227875024157626 -0.57461949687652758012 -1.1565476031538486357 -1.7202924378761794699 -1.6169597098846477667 -3.0698551440755896813 7.4083437398960381159 -0.76763440438262009469 5.3331748001671819281 5.6588521774148023979 6.4412786292328627624 9.3308171546525713325 0.0097668599113091298519 -5.8846144614242916759 3.152744168841662642 0.77000839850494073868 3.600549175107649269 10.269671546847142451 3.4895270599170764569 0.80258057261360260526 -3.401100429645642631 -1.2171671825061525229 -6.8294917271543154058 -6.7401227754784249768;-6.0807944624334160366 4.0201220074336916355 3.3090836929308449221 -4.6050895017702551115 -13.256787582695700678 -9.1343996417606927452 -3.7822349618133150884 10.0264964539450947 -14.057777546043308092 0.79241479332554365378 -8.0774612862170123151 6.1040714688187192039 5.9666610984195207479 -20.242902179080967784 8.6456454152568991134 3.6250396102598281267 1.505398117473094155 -8.9354790551097007523 6.1371886231166916659 -5.9584471518638988385 6.5685058352899794443 -16.764777079033066798 -7.0718355018617957697 -5.4174945479801523973 11.346995673142055594;2.7131883686709437065 -0.91743727112769501986 0.7284431961574843184 12.969523449740270493 -2.0273779121610311371 7.5874570968826908768 1.3138382905697685299 -1.8962286832478085774 11.839383644565600662 4.7201575671290028069 -17.635586907024222825 7.1376202767606846677 -13.080163126104517701 -12.427889004472179479 -17.101997132099342025 -2.3038835082299087276 -3.4950897316972748818 0.80207861959210724478 -2.7770857311918977217 -13.403915258894524953 -0.92148330789331123203 13.962821888003118076 -0.40715343905637868538 11.020622579656011553 4.6012501800614584724;8.0619587039759572633 -5.6638712904047636698 -4.6443282758317039338 -7.6275955037184619556 0.96787662166566124089 -7.8246345562989816358 2.2683637203565885088 6.3869757094577286338 3.3728878016571477438 -2.3078819898317450843 -3.5257071812065388094 -1.8106321224443058249 2.8876405988601439034 -1.7566503387574212702 8.8635046065139828642 -1.6137389189684623325 3.1790950696564097555 -0.7670414552012106979 -2.1474502116819902398 5.504359729712055227 -5.032609129149786753 -8.5688904785447359558 -2.6949774452066339592 0.35633909331164914658 -6.6848092884659697788;3.4518934080049370472 2.5692821386759949753 -0.049397301576500241005 -7.0064524383745601099 -1.2394783619752869352 -1.8533369472715492954 0.47845723736009365679 2.5899032223907219041 -0.24635842181927955497 1.2826853335709105242 2.1437189808717436179 4.6510605896543992799 -0.082232528395888682127 -2.0253038993564222991 -3.7516381762902017982 5.0198060755864730709 -2.4367968803986976845 1.0970057174908149911 -1.911683899039914758 2.1981593985890861553 -0.64639902401613757998 -1.251691909924400159 1.1672932450367126123 3.1889111137270647056 -4.6056140223031860614;2.3503928506269144982 13.958702689648818662 3.0839450665240129013 6.5120211245794497046 -0.62390722422765054755 -1.0933143175169466321 0.68629827932043652172 10.503887926340038206 -0.92300941442206851928 3.9109229776696441405 9.7828056628443569309 18.964656966582936093 0.52730665170194490621 -3.0506534509413660849 -5.329703296693715231 5.6783196536802469367 -7.7643944214253934888 -0.61912452894011216209 0.085668811747218201469 4.1552429765312810517 -6.4788208488326253232 -1.4438384589309960493 5.1230159227405582811 19.236238472200913208 0.81080006042295549307;-0.44694300450484175657 0.10105160738785820551 -0.53941610796957162322 1.1516385800152046937 0.23157367245067292383 1.2173354910586273725 0.22061717154541468644 -0.29778873743676548269 -0.3349328105449690951 -1.7567170820577089341 -0.68827605178950923559 0.013945935313647673387 0.0011668449098915421001 2.0553687901879196254 -0.8190310211117223238 0.21086452940766511888 -0.16357106251012543119 0.25462606127066739203 -0.37618890859154263673 -0.30047802500332004838 0.19557392090218608804 0.12157523160343654267 0.63570406384327982074 2.8788371842682969337 0.71620371065625121343;0.95248921827435240051 2.6228577464768689786 3.4069851641844284273 2.8931753351004991792 0.47134640492789792177 3.7580904406067134893 -0.24488104338310942576 -3.548306484117260684 1.3399518066860605092 -0.55753797053326770161 -0.11166365774028461089 -3.7196318765644829085 3.4345072975186528019 10.365479718115739871 -3.1819855252757305308 3.597419262799491424 1.536810809223240204 3.0466712072877362161 -2.4366584798050547889 -1.400260623552795014 -3.8115446452216930062 -1.4077192187017137925 0.084098218267254276626 -11.236323330214785798 -5.8837703443801938619;3.5654831807497675555 -2.293008799513819973 2.3170945920338348323 -0.6035336193863370946 -12.392222544089014136 -1.8815032606202075627 -5.712707893286959937 4.243322665911937186 -8.6429237659609654543 -1.4323000348780232649 12.642147208120929847 -6.4814201986322554916 1.5064964643595448734 -4.8721411899407058854 9.2734874568666061379 4.0261089305619375267 -2.7119789294293870086 4.4744691170952739512 6.8141792630180404444 2.5970124557146925248 3.6154119971991418581 1.1205841474707669558 -0.91511326359255684704 -6.9368543952728645152 2.4285857609923642286];

% Layer 3
b3 = -1.1134475793943305888;
LW3_2 = [-0.0089305873493633197713 -0.013386368257654639863 6.4425618117411822539 0.0092483728388810804155 -0.10382464685632082635 0.25662083217371450816 0.011243828271588204165 -0.0063459467469024564285 0.010367673801267879297 -0.01098290412308208959 -0.129095540912459672 -0.019906345684381550332 -4.2268214356848226032 0.042295407722739424006 -0.004807425857563689918];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
