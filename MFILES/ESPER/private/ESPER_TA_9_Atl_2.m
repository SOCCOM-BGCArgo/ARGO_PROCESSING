function [Y,Xf,Af] = ESPER_TA_9_Atl_2(X,~,~)
%ESPER_TA_9_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_9_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-0.2178;-143.241523403244;-0.12];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0479365703301392;0.00458552991639557;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.102168915554917028;1.0241829297572466739;-0.25695374755251454424;1.1001581615980395856;-2.5099828493856790601;0.19628908847223264234;1.0790372815325171008;1.2920336726825663032;-0.9183697811874200756;-0.91825075449756443646;-1.2133048739631036028;-0.27090578184162877884;2.7368509087344792263;0.89563800638378188168;0.56958576563547425042;-2.4297835519867545528;-2.3629007271535340529;-2.9390731456018586165;1.6771921349768417198;2.3669988393569196816];
IW1_1 = [-0.66681678811847366894 0.0082687443759658571518 -0.51425437137264851106 -0.60190464171816959738 0.64026322199568130866 -0.84602119028985522942 0.29247012836927088753 0.58763300233871129663;-1.3074008063596884721 -0.65329959494352929372 0.19586026733258385391 -0.32717667611378814518 2.386066608575319492 0.94705554145653325637 -0.82404506326968562924 1.2265775711318451791;-0.74663000266900969581 4.4071004667702000646 -0.37432187664987975895 -1.1513802797220293872 -1.5619951497685109487 -1.1683708072608742778 -1.6628362850486675395 2.1546195897002942132;-3.4358174165348072115 2.3045540701232938297 -0.34676646184211262769 -0.28675288480719213213 1.8792452180801224593 0.79734594761719490563 -0.4453763872817245173 -2.4633482031982056881;3.8665200716602687869 -1.4359731946374958422 -2.9140421670175400415 0.23472400337202362075 2.5691383552236120025 0.68172169924008330089 0.46866013493513680732 -1.5549450455193265519;0.17215870399255264744 -0.33124351643573207715 -2.5188010843950432438 0.66842191693336261427 1.7564673047723169397 0.83450898282556484897 0.91261875094534139485 -1.5379799355006413819;-1.2694758185971741771 -0.046130325267446134485 -0.11766535461310510813 -0.64139210510540067833 -0.27808143069688923132 -0.061481274507360003656 -0.27044775262974601882 -1.6342787730382521971;-0.81756311932997416392 -0.51458202630974203551 0.49630547486011505898 -0.15143345460955967563 -3.9220516106767280284 -0.40764148009909445536 0.46926451094078630577 -1.7363263538498883154;-0.46802880775445876438 -3.0737443729647804247 0.47814167316258771034 0.044500479971561444914 1.7485923251740136397 0.62083987590367450959 0.35885427566367017471 -2.2410130551177935843;0.33952006471850221248 1.0472736703728564578 2.9285573217584843775 1.5518730506827727034 1.0718438685322568826 1.151404841879723806 1.1737195133485982534 -0.81357863387286177836;0.99507483220234049792 -0.62490145673393293624 0.59856192931414131664 0.25614581737401426187 1.9958976925225007104 -0.11323781640224750422 -0.34874109531075636603 1.5543950201945451184;-0.25245747090202030893 0.45641721869973811421 -0.34263675598683912549 0.49609514719183911424 -0.24392376103846491464 -0.31065830313083031555 -1.9892399780587932678 -1.4007619643612900795;0.45173230200477537677 0.50493359981171892503 -0.25641832661340907551 -0.067210608640949368042 -3.3307460641847836946 0.095813354852626902991 -0.047426741751208374709 0.58994572559515534582;0.75063705085835352726 -1.0769934568900951799 1.5617005954029841153 0.33879410085152844578 1.3327431671985854322 -0.21676546859717546467 1.4434141660848887057 2.9497428838889230285;1.7516839777456427729 2.0761244043698239281 -0.083244626896025519791 0.19025425661055433979 1.9441780728118855937 0.30417184680310244138 0.40929892110412291473 1.9349376998645080317;-2.2234140338109558144 0.27874997586860200682 -1.5902205024187998639 -3.0394445748649432382 -0.38635203628381720176 -2.0440486444241345865 0.023322860967082484351 3.3091410390235385108;-0.32445929813240986794 0.77031851134410067594 1.3552395034411848229 -0.81280815968631048296 1.7765232137831887815 -0.66875141785912861625 0.18428272641117635078 0.77851533564164254742;-1.7528243419274704973 -0.36972355193963846176 -5.5467363991235787424 -1.0817024213543020572 1.6160840322186551532 -0.57758026322688438281 0.0010535146715402697593 -2.6926662906394658314;0.55254432593183944178 -0.61450638299023419009 2.0216589209896289603 0.29888105470016995691 -2.0910945170045680541 -0.28720377537556307512 -0.98525822054257283789 1.0231461742696814632;1.2040014750619287831 -0.062394179361396906458 1.02326831530575868 1.9631272745210315289 2.1231385359538390567 0.33864473196532152155 -0.043553675330851603087 0.048109766169979799322];

% Layer 2
b2 = [0.8733312276063536217;-0.67357126083211216194;2.4574618835641244274;1.6459652017726080775;2.4054399838043343252;0.28858725795802325775;0.15227136089160797638;1.2437443294101573343;-0.81020699430629294913;-0.72167500243829030282;-0.35891682240110467372;0.86546544416369197705;-1.1119255200771975822;0.49978765382510559334;1.2683268725947483002;1.2328809645896103842;-1.4235629470615678294;1.648511274940494209;-2.537527605380780038;1.2259453010438829956];
LW2_1 = [-1.1159337949381833432 -0.015964856726286912048 0.42437403891901781527 0.10421975117437830283 1.1650599032854744852 -1.2858733271234596973 -0.49208877397778666429 -0.70191894072619065437 -0.56159924459403032238 -0.30047192737808092744 -0.77729287922519552101 0.44446537333877478293 -0.48723075326602849344 0.78260093081222825706 -0.11497520659141677313 -0.043582953114625906654 -0.50650692283059517429 -0.55760327134307707819 -0.19487545627584276775 1.9984578694032679724;0.91997531412686550656 -0.91472229026690865528 1.2619741257672165702 -0.51316093355171077395 0.61307640430193144354 1.4185358428513679119 -0.99812766023793930703 0.08593232163448627503 0.47846275711876928849 1.1464407241059157982 -2.0838269717890165467 0.78145181833055121778 1.5625965578029819003 0.34125776253724016129 -1.0707683380935688611 1.0027012944444553266 -0.15165801758703312263 0.39942733096084981348 0.37352910499544950129 0.96058296480572991083;1.4168655481725469514 0.24996729995759264797 0.42498749951975262062 -1.3573951886408841538 1.0978058962322465586 0.33411532418093931041 1.2538864086378589402 2.3379009911036030545 -1.482041976158783525 0.42851401411527001439 0.21678652810425755315 -1.4706784380765003384 1.4136874146743927394 0.06321704442618719666 -1.8343863198514887003 -0.11901423209719502738 -3.024658579856839502 2.1028239335406500032 1.4540699384652773229 0.86636790809793717827;0.60190040758376261998 -1.3560887938944239384 1.1179682266541268731 -0.78439077071903784422 0.093099696465725384487 -0.29253033817601759026 0.15592455303756577734 -0.54397631331957052581 -0.9703437037023159295 0.35679992990534903363 -0.42490113843529431215 -0.4937890164497981127 0.076218006792650783154 -0.62544846417630373114 -0.57906499571827174666 0.85879588031012621396 0.065145671451214429148 0.037957934641727995861 -0.87838050129342348793 -1.0949243727186395159;0.29798668885897289238 -0.22596987133104529111 0.69066997553865649984 0.036773728604436999035 -0.96127240386631462865 -0.79620128628655362224 2.237977800743288892 1.2150451166722169294 -1.3469347060179945874 0.28996485106859171132 1.2278794825800838364 -0.065565790335456383686 0.9907180058517937038 -0.3721142707510300407 0.56258916133626679645 1.4823718167876474006 -0.24715162873208729177 0.38994897561273289543 -0.87987533226281477994 1.0297423908222922417;0.0041107421763250523439 -0.70588404192076881216 -0.75043348844638801953 0.25996900137801942643 0.25302454975416155403 0.21712413432421553972 -0.46964795541303383519 0.086586338065406179276 0.45754321313902834856 0.5292223340070530968 -1.0042344077696676585 -0.57078264951939439165 -0.34357326705414575896 -1.4844764906256102677 0.61670353373984676537 -0.26563637783160803929 -1.1967812360975236263 0.0098133481979415862484 0.29949116671662995293 0.2172357370235895313;0.82315506506325775149 -1.5541528427252899736 -0.9252443810723933737 -0.61909585311334625057 -0.7673760556164215263 0.23755993202286937449 -0.27980444701560308607 -0.30306671662814610446 -0.0020734306160397897312 0.42710871898368646393 -0.81306435850247349428 -0.42316734885052259552 1.3677772334029465462 -0.52993411353442965162 -0.87226146901013756896 -0.94346648483604755864 -0.38483986378747792045 0.687751815692552948 0.55503665000746182923 -1.1880086868244210674;0.24791656086567992467 2.0281221130546569498 0.65934208231340640793 -0.43650806663232299965 -0.96928384042454795999 0.79244969846500412647 -0.074571157355752787366 -0.17117327722610303775 0.77959308274059146981 -0.36181753522963422398 1.6543878775089841948 0.44196327998505374746 0.032409760871631568269 0.42620282043659518667 1.200693236133410835 -0.80656222606608474202 0.6198054152325183086 0.607963221552570654 -0.71350712340615363161 0.18860131534005272758;0.11513348942133369568 0.46283332075038646769 0.7981063205561408358 -0.43540416692519506858 -0.068699285487179337362 -0.75243974589310758105 0.91466197318239395031 -0.30593329523628409738 -0.84770537684510360865 -0.45496564131197964054 0.73693224624568653969 0.27103740171197515663 0.080145980054550952643 1.3149536688549359198 -0.80621804668457386356 0.4661441245241285114 0.55119202544132850363 -0.021971960067662395233 -0.285353725464557062 0.61701332439975598021;-0.77766103242826012387 0.64519027741198764492 -1.5267035227046639179 -0.35500544302316439094 1.1809347629525763779 -1.0190171782830719227 -1.5548426388711862334 -0.25272076819493177746 -0.78677239246867736178 -0.68060587945038875102 -1.4121807521015581344 -0.29106946658933874339 0.29719848745916593868 -1.0552347231990761856 -0.036893337877536597214 -2.389336580439424651 0.56101551077693978531 -0.56758141096734626707 1.0038431521543500491 -0.22333560802726018513;-0.19598428580728854964 0.14548294970359165745 0.20712557854219718068 -0.95800110358144108247 0.83466708090754082594 2.2512400813766384466 0.54168257868558411516 -0.36512076770285051275 1.0023422268717765427 -0.54986126312035610297 -0.29847682116266344154 1.1920364712732103296 1.5529494141396176232 1.03832796647949821 -0.39795324483601202115 -0.3089323591139155889 1.7154456870934278179 0.1964081581775222185 0.14387854099544633568 0.34053820195939221716;1.1131190916998592311 -0.46324129957200516072 -0.06149374750305558468 -0.17521823862354546364 1.1029082820916458196 0.34349579116920359034 -0.87592590555185767531 0.045539686097594164749 -0.79389328528232994131 0.82928604242991366124 -1.4693639187893150488 0.46167218808718474277 0.1044198505460281895 -0.019892575930447853327 -0.89893674016336932997 0.5212484998900482891 0.50627706029649954811 0.21629077307863245339 0.13179995056894244776 -0.70241830789606707341;-1.7196476536332774288 -0.93683921663175506733 -0.51306828505822899 0.82259543192551298763 0.13458208635188145808 1.3256163897966977139 -0.60990086330530868253 -1.7353594970738623893 -0.52853638611171682715 -1.2600035994089779923 -1.9596631029499524956 -1.0248199472999806048 -0.23388296231621824584 -1.6824978077554173517 0.72551324674252215541 -0.88018274013619546281 1.7111616098362718574 -3.8357735056512249905 0.99400657551295679148 -1.5589914008322864891;0.83294316426908809881 0.74067074165460977664 1.7300623966684514077 0.8196701457064766716 -0.27794913189304354395 1.3193580235402451173 0.22809987909944640094 0.78681611420743124974 -1.2469048793284611687 -0.78583787598264109864 -0.57087819808957407375 -0.28895917578545077253 0.41819922597106384821 0.26694442467280043996 0.28949828022733503641 -2.4115133068991645438 0.55801096274198946912 -0.36602601157199782245 0.15414218995469600171 1.1788847774677984059;0.65914417602764552306 0.93018860738545261491 -0.90347526107670272921 0.81931860900841257944 0.92048345682548149416 0.55292634484517233506 0.25056768463314266215 -0.072651856977034190432 -0.3213498537591010229 -0.37237401328170560699 -1.3812653065218434278 -0.207294878905217278 0.75492579063000975204 -1.8310095071237670883 -0.25048296051638091475 0.52626679260545883299 -0.010760450202851972595 -0.44637230678519962401 -0.12004767387082601604 -0.2760642088189901866;0.63463689594613070799 0.28865683328893732007 0.049194270117913177498 0.25005588104730269716 -0.6751231726064731431 -0.029442954687419538307 -0.22117362081481814484 0.15903055404562640995 -0.014311168668459450098 -0.086120829448492086655 0.55976911270101614715 0.0094955995335043001659 -0.7691457078763844768 -0.14196517389439242129 0.53894021494598998157 0.52496023888877740848 0.42930969564617871281 0.019439571355106023687 -0.2280646329924269633 -1.1081529767631321803;-0.47069507417836614627 -0.56081930726440154533 0.099841934966136414165 -0.66169764950445364438 0.69899263536066225111 0.675974175014478873 1.2070145282099551398 -0.32717280135604442926 -1.256345936831462895 0.2617970455661841056 0.21954942055480852758 -0.2991832623533551283 0.88552818975978830895 -0.32785127344542919214 -1.3464198007916503563 -1.7693812281019560828 -0.54336737121639400172 -0.48497692518569968101 0.11185324354096885802 1.3274104227650362908;-0.16048214350515360715 1.0318200982874401461 -0.84445851318784714845 -0.65498192359006279784 -2.3175616580997511207 -1.1321594771075564889 -0.082040361578014753263 -0.70666481355816035403 0.12866465578753702448 0.11369487893855871607 -1.0656448355994476707 0.029198931585470856709 0.33993540329477417439 1.0603394408904884827 -1.7018234115626218461 1.5633019063747501942 -0.57947751566978566995 0.46145398793554764927 0.3827556872023942236 -0.27787895363197101517;-0.98886643050880829175 -1.0435822891063359918 -1.8739544177587443841 0.051790340400263756848 0.52805300625608142528 1.0667448386380518066 -0.055496576885758652775 -0.69825167646042940461 -0.19003650257044538141 -0.65428479537259887078 -0.91171359623027348196 -1.1653021788335125031 0.13740775760132986627 -2.1275450092202499164 0.59037064925614690658 0.4975828237607681781 1.3540381115091650877 -2.9310010856661241618 0.28345218365228075363 -1.0654343413049902622;0.21878845974868763036 0.19307780514985206644 1.2524458397509004026 0.6125389261006408681 -0.63673877230941722249 2.0230066777844721848 -0.33319003830340343519 0.41719698961370310641 0.92362365501837551118 0.57706293902786698347 0.24835054727329969326 0.30995380674581518576 -0.24109328598283893963 -0.23533913557044572329 0.17689140092492247613 -0.35960416267118205935 -0.94196123147048382851 -0.89483557348528275366 -0.29334595647297023735 2.0883571000565406273];

% Layer 3
b3 = -0.32070072201360128039;
LW3_2 = [0.10615094727818279174 -0.043727640265031904321 -0.02990795315289596773 -0.060170496623470542952 -0.061976401226798837063 0.28436274529487365337 0.067693914025582307969 0.11204951846385180492 0.26902989170802749097 -0.03071145429090035503 0.11550097077141467661 0.052132280596475941148 -0.080070168769117516794 -0.93543960679902715682 0.095314187260156918446 0.30985525614269227024 0.059856804907006351535 -0.037362699753497000121 0.46496685742910687233 1.796195191489408316];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
