function [Y,Xf,Af] = ESPER_DIC_15_Atl_2(X,~,~)
%ESPER_DIC_15_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_15_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.923954115416520505;1.1268630782148021385;-1.5160417675634896284;0.66246171340614823375;-1.6916201853613113126;-0.97541430350248758963;1.8209427705402956299;-1.6839731381119891207;0.66455581546071107457;-0.54014527946878121423;-1.2608080450753222923;0.32810237818685394906;-1.6313381379907030411;-0.73592821561657206786;1.112664566221108764;0.36201943362529442894;-2.9100587316513513159;2.6608199878031997265;-3.0517043735285729333;-2.2015882166550562182];
IW1_1 = [-0.61829673005309204736 -0.29829043062635207662 0.52331416023986709884 1.0575427951960141293 -2.6077765942081199135 0.17799302337646896732;-0.4767156772559182909 -2.6283738338287516711 -0.9506451484162145027 1.9216480377038835936 0.34310847054847343207 0.45715282328519180055;0.96732662392653778749 -0.35974994857616410249 -0.25628177352262626609 1.436149185770435599 0.13045778380424871701 -0.65468410725836989617;0.058329336139326767863 1.1357974559760355415 0.36204052970176697768 0.58901628313177356588 1.6299902312001366411 0.09949992669318022398;1.0639395144291210471 -0.80003598906829331838 -1.4034561935306146818 -0.66428422912992801663 -0.76660125872755546794 -0.95845198500408401721;1.6195552163081810004 0.22584846546120582178 -1.8654886014294043139 0.032803585879816542226 -0.99378832230422509131 0.11209673108804089903;-0.41196742812351039298 0.19827017549293293741 1.7706638046973872669 0.12798472129827589971 -0.8686382916993113934 2.2709501115985815112;-0.031196317546309911689 0.47058287597243647626 -1.4023636372046039966 -0.37122398393119343529 1.4974590098788669312 1.0995334715941407211;0.083475081918132340575 -1.0397416531803154172 -0.58652849576140353438 -0.81499686904195312032 -2.8443333670871853158 -0.48617445500552392001;0.25272569955840890055 0.1880162244717396014 2.405584069716898199 -0.028834094978272301057 -2.7649778078865900888 -0.28464591541993189416;0.98202793808244004392 0.69079584757017276075 1.8976167500172640423 -1.6381499450521159744 0.95489768067476277214 0.35528596928354211348;-0.21794196821445310785 0.49158686645088983669 0.41073269700642428548 -0.29753330105280739737 1.5309182145900424032 -1.497224986095140542;0.28518821504516411736 -2.5163559677862759045 0.26260392544822325211 -0.80490526523463001851 1.0304269909547518758 1.354783011871087739;-1.4883900263656997254 -0.18374455425379779272 -1.804589168981457048 -1.3351786586952070213 -0.0039225468947036113906 -1.6426660301188318325;1.4725813582053257633 -0.47905804612339752957 -0.42334560350616301516 1.1901845786483127299 -1.2269509902296389381 -0.19542759951592544865;1.013005858122458358 -0.99885919783568943853 -0.073532572504493923238 1.6506581097504142708 2.2653816062230003325 -0.37241873733284719394;-0.93671030116854847591 -0.52715342707888201979 0.47399019332004521665 1.811570523456494497 1.1048828967448904859 -2.4975913503743618627;0.91381309385631059872 -1.3061950260644210609 -1.4387682722703292182 -0.1054207097591614295 0.84720150483711986755 0.38086619275538780016;-0.93049026666585477052 0.2600512951932608674 3.7348428919826366368 0.50992943800093970541 1.9581225159181721018 0.2659495366489801893;-2.3108922669224143398 -0.47477349854384531813 0.10058602246150027959 -0.30615412946797954108 -1.7192105791861573838 0.95899826457065506791];

% Layer 2
b2 = [2.3885765914946972543;1.9125500564449056107;-1.1121375339430941143;1.3730143022969094613;-1.3663425108664610796;0.66976455931738432259;1.0228135361146473148;0.31786292562242635107;0.017381459187850393372;-0.26357407135747401572;0.61287139311552063514;-0.67770603734214385216;-0.17020580339857363517;1.0061766657790904844;-0.82640253817755648935;-0.60011047730702837821;0.76077979166511155995;2.2826620146799374567;-1.50121390559076473;-1.996764175973612998];
LW2_1 = [1.7926717004080141571 -0.39219807433803782759 -1.0689511517428882392 0.86943438949051432552 0.13390171806640693841 1.4826973934447298387 -0.36213827448899266193 -0.36036852001421898484 1.2256509202667555947 1.2512058012166213938 -0.71412674645758744685 -0.091570007775149564466 1.3719489017536627973 0.60680125077604452066 -0.14693303541001534462 -0.44928032480701785012 -0.19223842686074371633 0.53930639514280553914 0.78743804303512443532 -0.78159737807349327632;-0.084186073503560041043 -0.26182793857154518236 -1.2649143750495779326 -0.13288073010783615913 -0.26602037166313502459 0.48181857199313499196 -0.3511202747462419671 0.16547807829174471239 -1.1124540932762605472 0.44317382333575638942 -0.59460832261554941169 -1.1735859541452577925 0.82014613144517167775 -0.41903700533836168995 0.90280787947824436834 -0.69361317319332993492 -0.65819137684543593814 -0.36922631535616179388 0.55261484451342657298 -0.92889772314380725238;0.24467395598841817916 1.3004040359869473154 -0.067290610446680707013 0.1675828523298525663 0.15357522068573131735 -0.61428853637803204624 0.12933796350899617877 0.83697180953466576714 0.64741933644810090165 -0.702008775184698397 -0.27418351182537881172 -0.36909721020718350148 -0.7589250022151589059 -0.26061801938876349993 -0.71475649689002007658 0.33396815990716832712 -0.079605077470014232177 -0.92230437452715097191 -0.0070244796659151911844 0.066708535716189801268;-1.5320520072801031564 0.30972861899858750157 -0.0099554102046113899377 0.78577208540544940529 0.89815292509476896132 -0.84531575255075208641 -1.5806384995127045201 0.76649787013318215756 -1.4268601309458168735 0.8523397964056934617 -0.22108535554926969646 -0.88654946327899475378 0.31397199801724517965 0.15725993135867930017 0.35489644471953907257 0.30894213981098700428 0.22105756906574472453 0.1074246251317378803 -2.0339013836555439596 -0.020461605146819585033;-1.2359482717950744934 0.12979264299972217978 -0.029321435343650642524 -0.0012380999388394552801 0.3202772674093004035 -0.88364743315279226099 0.67449902362985192372 -0.49022813024492434275 -0.42491082356235099216 0.95331831832978253249 0.54799005246344445474 0.69340417280915123133 -1.4623378277700525008 0.63975434969726596712 0.0048394025463523527089 -1.0954239659271574059 0.14570565821439557253 -0.16398851916546722252 -3.3139881060345719455 0.43842567496680623362;-0.25579545624142646654 0.69155812188761545123 -0.44103124374478869241 1.4491987492458875408 -0.91742071539111780254 0.85783771930881336232 1.0919582140570838202 0.87754179844701685198 -0.22274076287766353399 -0.7858083584317718806 0.32171379106361747136 0.29010356168907897034 0.27048107573233637346 -0.57191943916824095062 -0.19178751080594824696 0.30151717643123820967 0.77286873184496429623 0.55363427290994371432 -0.35786367334417484853 1.1926877395914063928;-1.1237019710959521568 0.24696631710118266412 -0.33732494031964654901 -0.43276114785164621068 0.71276586370728500786 -0.67191733100468276074 0.76208593510608590993 -0.44041744726259451914 0.77088624055885024422 1.3000472955429172028 0.30459464879142239546 -0.34875152522380858944 -0.54173379300356983013 -0.45813619203328864726 -0.83306652524148738781 -0.0041515396591686945515 -0.20294613182909077009 0.10521249806923352321 0.31343867769728511741 -0.1273316983151726034;-0.92147633610543466798 0.11378718972031240386 0.10493969141173654924 -0.44697684996814557312 0.56857597138490545419 -0.97896663895727775717 0.29381873197091773475 0.37506726888685859578 0.84881442347877433807 1.0557555628490991051 -0.21157153070682563345 -1.0357564205913822875 -0.49625861627850137436 -0.014963439086719276111 0.58954067422700584533 0.47951495406976246683 -0.27234727846456652234 0.43934203989019410264 -0.94420550318184226501 0.8894315195069437685;-0.86818860779225082158 -0.28640040323565763014 -0.28259019368103405201 -0.89163498883365666092 -0.48939134910718901095 0.27747583146078230731 0.60049593260461808786 -1.2271143643381157151 -0.013647005800464004355 0.25548259539740914015 0.91862824888130578671 0.077806653960575136719 0.55053239172704493409 -1.1037072285058453502 0.96279020769827328152 0.48459901755178486082 0.48984105945622952172 0.39635193581379118966 0.62402994845846260219 0.17828655655209191266;-1.0641509131436128754 -0.061994369962298172261 -0.0444464621311847774 -0.28549484705967970166 0.078263648665101506752 -0.36377077793401396688 0.53790866991930808005 0.11652135566180278625 0.28149799485771137553 -0.72902826684760246856 -0.2590612924853435417 -0.32042265160496041787 0.16659976738820711506 -0.075624979967191433006 0.039039062749766720306 -0.42066290483232982034 -0.042848155358725242836 0.088281465848138826469 -0.72666510315948984466 0.22946863597026417869;-0.27633603948421936458 -1.6286159944380136366 0.65340071648615472011 -0.90616395259311843802 -1.3021393778164636057 0.82064125078607830233 -0.56833000232121921869 0.2878197169387102794 0.90686191908495439318 0.56578050613481278841 0.07116129336976652342 -0.21500339957175287897 0.36927650389488980709 0.075282683759977861437 1.3055402446879378342 -2.5156897048936852634 -1.0329532323747905309 1.4028196113037749715 -0.750175974352772168 -0.27713011665984987886;-0.10100525494132339688 -0.6110725760697593989 -0.029690329628484571356 0.40607031960342837573 0.72516427954632389774 0.39490397006707578242 0.9095491033584945928 0.37221472309430819747 -1.8003326275189743821 -0.36126502503269342093 -0.27803905586188715215 -0.43525269721449943994 0.63052410930168789616 -0.26553637131999935361 0.44095969485842229085 0.91120993677903294738 -0.61194856193355140483 0.16308423395787433052 1.0143857638564470758 -1.1844799750079613165;1.4832965086624765316 -1.4289728921762647751 -0.50494924556913556302 -0.30228496407239241472 0.02798265669997378885 0.39451304951470411719 1.4394134071857587198 0.8831416973516340585 1.089794826260050975 0.24103500845929112795 -0.48463922975910811441 0.7539133938935330681 0.66862940150629512903 -0.66470423744977302771 1.1282905440815078624 0.19343798861542979561 -0.37983630582475191861 0.37435972898087033212 -0.15118883472039323923 0.63595633685739350049;0.02468746664163389351 0.26607867270221852163 -0.85562582610158410823 -0.092109496475011112815 -0.02692909181532442478 -0.063243828013763103701 1.0537408585249345983 0.22711370527392527041 0.073011189306944654365 -0.069513803366412302287 0.71387245424698497764 0.36122294919327191387 0.16929049812856325485 0.57999107879917888297 -0.87433246689465005108 0.5106971693054400685 -0.096867152282359134108 -0.24842353870863145837 -0.053413552622286843141 -0.85265401421233077972;-0.019693278844507548786 -1.0155931456596418716 0.36535541636361679174 1.0657337653747083195 -0.27866047029846302552 -0.5463577804704103924 -0.2559009420191852846 -0.1391042255636320002 -0.73422592687991905525 0.94384483326320633978 -0.46049112006889142412 -0.90209877087893797221 0.31002232746585572931 0.43334643653786991679 0.61808105304032001648 -0.31017564162714217346 0.36914952137601841908 -0.71522314277883858313 -0.72643741539679229646 0.586705231897159174;-1.2264248009110787496 -1.172971563219315172 -0.22552514254600758425 -0.44135239866307723888 0.27387022731542765008 -0.58085933210641305102 -0.17661416008963043422 0.76142584646954103444 0.38051237078040178741 -0.76340832387335633147 0.60257119071758113993 0.18419061953898768769 0.54150059789491322704 -0.069566668735665290746 -1.2292979592467809802 0.098926059131719479289 -0.8177545802833454669 -0.98541973551431971678 -0.42269980378021487777 -0.54396287503792095652;1.2021969404442067741 -0.088349237807476402318 -0.13777146982014898402 1.1719451000068221713 0.096937359056727873119 0.50459232538574372295 -0.43062359574993341882 -0.62862117982228693513 -0.023841397310136201726 0.088806387849031331871 0.23447349584835611158 -0.39543433232100244634 -0.4999349785344235908 0.17350525154283796825 0.14192343525698170037 -1.1085932887087635024 0.005542478232614118927 0.57086742643972065991 0.99786148645815464509 -0.06197555121695246666;0.99646321372952517681 -0.56618890524794418528 -0.69934236675537453376 0.00333003790759988684 0.67207046797264224924 1.0545053322282436081 0.853568671686967817 -0.029456269355526577131 1.056117238893657273 0.35894310292636855131 -0.61060702510132391918 0.76920093880545226117 -0.56978123276079661874 -1.3469774650382713155 -0.97236144234681609611 -1.1243736745519798959 -0.74041126498919429544 -0.17992142987383979991 0.26131191859984881365 0.016823229625112765678;-0.59579745290579566586 -1.4495087720937054332 0.082601248883177824656 -0.68831602564314675607 2.479899762801801355 0.55229618456324569564 1.0512485433918139499 -1.6682623570991688133 0.90992002528401771944 -0.26881522621283099328 0.39389480391684994487 -0.38791458437652159841 0.7340062708160313143 0.29031474537391011026 -2.1003092054600713823 -0.12456999724865809587 0.71371702179828455659 0.31497680714255160694 -0.52341651112692699765 -0.20261628863176736615;-0.49550554221427234314 -0.22046578562116811439 0.37065563335297346814 0.22247095364359734115 0.18001062332223655149 0.071556222093368718196 0.4406864014795620621 -0.85024818908896082625 -0.89195219701974948201 -0.26943668644605828222 1.2718576706368998064 -0.19412196963990635545 0.92348271041809415483 -0.38531627189191985927 -1.6035114512551029708 -1.1827000519177293114 1.0879964608259373726 0.222942976832382872 -0.071266686965011427635 -0.60436672159438875607];

% Layer 3
b3 = -0.32827866657679294349;
LW3_2 = [-0.14794389238252850238 -0.428959694616909748 0.054127185088047646833 -0.042794235445646901239 -0.10067185355314331452 -0.16948465167017018329 0.05309865822940881136 -0.057832175424057205571 -0.0048464363185252434807 0.54250452417822025986 0.053902231466264639848 0.10478125457375124518 0.080714290783755845982 -0.049705207179181080945 -0.84723487470840996849 -0.051771885051798929855 0.40051261289825712542 -0.17530354966055775034 -0.96788272439560940619 0.041902333898535981671];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
