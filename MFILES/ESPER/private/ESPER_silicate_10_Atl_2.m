function [Y,Xf,Af] = ESPER_silicate_10_Atl_2(X,~,~)
%ESPER_SILICATE_10_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_10_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.2833147924206376178;1.1785232656353938907;-1.2570501844623187537;-3.8177693347598182783;-0.41320703895575811027;5.0221962058147600061;0.54206015353416980851;-0.41700475099006040214;0.25203167655046404549;-0.069125605937031570081;0.25887114922403792194;1.5235261875244971996;-3.7245795135425594502;-0.24463171145383108551;-3.0063936246145241959;0.031088693466792542697;1.4688034048920330932;-4.7364294021983885941;-0.9228893750494074899;-3.535897113704393302];
IW1_1 = [-0.24858201176096916818 -0.16148511269049173333 -0.24870320532185796747 -0.70346001171914918082 -2.1753779968284345792 1.215740512512441418 0.83027381917120246513;-0.3447514077539687305 -0.66348903865362607313 2.1673910579724386949 0.67604775743678091615 -4.1867276255041101507 0.94141614141181217956 2.5439113512490685309;0.024158988878255675814 0.18015899262701681738 -0.22611014983774416209 -0.63424294402736014487 2.963525759602455345 -0.80134601360327306629 -1.138596983231438653;0.034642385417330771868 -0.39087598634950504461 -0.53955253821629989286 1.4059098240917342615 6.5684327597005029986 0.77907654480562193999 0.14831870403911862066;-0.19940625710480686106 0.030657275346361933382 0.81486485184389201297 -1.3062419976313019987 1.3807201372494892766 0.55692365609220917388 1.6785510237171044068;0.010077084918608427214 0.26502098074268753969 0.23221211321598403399 -0.24867033335436028452 -6.3954474919781052478 -0.96906769318727215001 -0.74807981906514575687;-2.4307506832064169622 1.1715868343044995026 0.0062099560850037826415 0.77012866900675036597 3.0340272976473197097 -0.31541683098099160265 -1.2289727746854663959;1.2766709929759387787 -0.74978735397808005114 0.25286787104331459597 -1.190981878730367205 -1.3665191660127871121 0.26276439331341583383 1.3220317420350446991;-0.52217393474929785224 -0.42915025754244534584 0.60707204563423289301 0.25999564501095095981 -0.73977476420345977814 -1.4447359978603466768 -1.2137016091179775312;-0.48565863671024062098 0.83218048066061101053 2.4248133841899086605 0.75823192589594134994 1.9406203466305298466 -1.0452637761677532335 0.32063480524202742084;-0.22849936816593724442 -0.15305656744390574997 -1.2950395673330714619 0.86503912870199928253 -1.1728665327660252604 0.76214664717762914403 -0.39997496807854315826;0.045291009502660579955 -0.045474881742142432561 -0.052850551001836068576 -0.11732520836845287959 -2.3523898273595542641 0.85304877167159809392 0.71751092393904414291;-0.1336323635442762392 -0.00084435535233256565901 1.4902692215225430417 -1.2049260934179513161 3.0236813409685008303 -1.5253973692948956664 -0.047935532682537328186;0.98117281875326844975 0.45892730832887673742 1.8454320941451654026 0.58079834247684758441 -0.25027985724274898205 -1.0987495361768206958 0.3032532697617744688;-0.7626972100298949897 0.79396869945975034888 -1.2225294260692325388 -1.6967648695450197049 1.3479999658739556523 1.6401007334857413689 -1.3778229922263742768;0.24898122969264788185 0.10796938818403344074 0.78610825225336122823 0.48462472233946046751 2.1143080149021495906 -0.71008334368423775551 -0.38683839287290516795;0.86765168443818863064 -0.2032946639021767643 -0.057459951589026787844 0.61259767217367600001 0.26274543876219608185 -0.47531805151120892772 2.6124911409708211352;-2.4656354451707085396 2.2349181115197476188 -3.622513060328308665 -1.2538148666885751137 3.7036656397948712893 2.7632814537149861245 -1.4734887476818341323;0.061693361930602007293 0.29738093277704863437 0.3282855287617856832 -0.54510271352193173655 2.4704986074479391434 -0.53488964386104942417 -0.32886839846943477506;-1.9936345479458572605 0.48259082035091077634 -0.95753256669378994381 0.66189289410639184918 1.4992360296642022188 1.9570904729996525528 -3.9293762784517234365];

% Layer 2
b2 = [-2.8980485312366028872;2.2033999798504559919;3.426332031448512172;-4.2832109920793035585;-0.27649665526517608338;0.72894105332278447129;-1.7155177027131702783;2.1287921504408027218;0.54242529810950168567;-1.194304285591576642;2.185943491634660063;-0.58251447774453590789;1.623123656640716117;-0.27537144880032171645;-0.52224949576011203689;-0.77276410798706796079;-2.7933283721403441291;1.6033149978841660932;-3.4175295911559309125;4.5900598302975232912];
LW2_1 = [0.15336269849904682339 0.16611671523714965915 -1.0069158589372053658 -1.1359366316565957522 -0.28673686745065152248 0.38592063759621675345 0.98687867204101287211 0.3445522372539165934 -1.2764559866782709818 -0.69672034793821069343 -3.5472278841102755642 -0.48047688329110527228 -0.25970639008586138274 -0.17437967245901739299 0.84381190785561199785 0.5540313542390439272 -0.76842491236919296949 -0.94382863780283443589 -2.2099237040887627082 -2.6620247212240495394;-0.35289668441868010662 1.5630602834594191641 -0.13619385805937503364 -1.1394385606208825568 -0.66074620749530721397 -5.2700762844218989045 0.20980520000845157003 -0.22371083270199049187 -0.14662515468279119224 0.55610165282926726782 -0.064407634199526192509 -0.83329828958735807642 -1.2136843098065774882 -0.30529568657399008824 0.68789384486861393508 4.4872115772210809936 -0.050735564613534012146 -0.069597616036839615727 0.37978341225174555573 -0.041881850989126528928;0.053058573768792791081 -0.088511673066880694472 -0.28106688438269800123 -0.82064346891408235241 -0.35015749120520744953 -0.86377904214944645211 -0.45217827066135479752 -0.80092011735311241516 -0.22857923831141258031 -0.0050477960915379944257 -0.90959081637049987723 -1.5613961636106381548 -0.48684717954238487803 -0.31656443941123180164 1.4365536020995453015 -2.1316498576529863129 0.27237570767307750508 1.2840834976076080931 1.2818440807788036295 -1.0047813500342672732;0.94738887999525267514 0.60195274321366665227 1.2184288064539883223 -0.027185915930201788593 1.7280956181381490477 -1.8962995320589086656 0.090642081748663769214 -0.67093604055974631617 -0.88584685491432424431 0.85020566036021993916 -0.3120253763331409802 -2.6389466781915493776 -1.783106293134561593 0.56891139825484227099 -2.1185529821971309516 2.4315198570146261403 -1.3123267932008448877 -0.84418806467538654026 -1.4224330600102532696 1.1264863291008300195;0.43909566380618358927 0.37196966730634090093 1.1422012338918441365 -0.12748300545073551482 0.20240562074990636754 0.28868060976189302558 -0.98008523767472799371 -1.0292890433677173156 -1.4291282631898534206 -1.1564079821685564475 0.32227013588737984939 -0.38836574922480099348 1.6505840832794649309 0.57643740548983490868 0.46513500373807692423 1.7395076644161848733 0.76099381006789323934 -1.3714604555796470198 -1.2669300652244972483 -0.93738467880939524424;-0.25460746505022252562 0.15542579862202593466 0.66478098137011032431 0.055938025580268627146 0.16082838920663070081 -1.6482471111653578255 0.012375218267896594126 -0.39752882719191640071 -0.22809898040989906587 0.99874126960753084603 3.8552218640855402398 0.2550891903891868151 -0.61946461034767941189 0.055380848442814746557 -0.92680092498236166243 3.1587011525009187629 0.20213727509141601879 0.97380904042749905081 2.0128366828781620868 2.1166765151063264838;-0.86338705951847494191 -1.5830691254579458693 -2.4902365467185685333 -1.3645945966872059518 0.62501363087384997907 -2.4833463958217740775 0.15772098612792542771 -1.1369769662502844376 -0.72855547296859235473 0.24396158187625774372 2.1566541815038444696 0.59327204034435843116 -1.1338279626365974639 -0.11440667690643081811 -0.73391175385526663533 0.39586258935256474212 0.37300586469255903044 1.2070583848849270048 2.7232707627733834244 -1.9370620116203909333;-1.2282419827255302014 2.6897281241298287568 2.5742316068621660108 -1.3498865637357226888 -0.30730575244973939997 2.4653718199492291596 2.129803617950807304 0.77603892672836694011 -1.5725218064470576351 1.0531296175834274909 0.95734423111252198169 2.2752323257354500896 -0.5565545145908075142 -1.3933289995716140464 2.3778829881148202396 2.0476467430222315969 -1.3422498282870165554 0.18881322993412519295 -4.3282336582400997571 -2.4843652018501285461;0.41448511744784233279 -0.26675711679343933058 0.54873468834021676965 -1.2493645838912053048 -0.46976438473603965296 -1.1611175296615638963 -0.58695447564194491719 -1.4921840014356384518 0.28733852376246338256 -0.087112737542236709509 -1.0179598956880335781 -0.84354188815236574861 0.99093949666866365522 -0.76367052164873960862 0.32461461497618465666 -1.0950090089263575521 1.0357672442010579239 -1.0221796047532734075 -0.2353169960641386671 -0.16340450754147253787;-0.60475786570785838858 -1.554519405579844582 1.4194080125810373261 -0.17458083358586073963 -2.7544692069641762977 -3.1975839088128101828 -0.2967873810739164453 -2.9490188459894048911 1.6708493163909410306 0.43864526930806319038 -0.78567530258953921507 2.6771746140867733743 -1.7270291371449435491 1.9383171641651757433 0.90323754515434628853 0.27466743691564976526 0.8422208118434895141 -1.681599210997791527 2.9781352972743149188 -2.5959485920631499845;1.1131188182323206171 1.1182472403872740774 -0.09171143996686483002 0.72684991680842025996 0.23895066187918748146 2.7589779791820761012 -0.58360597071660225144 -0.27598116305999026432 0.67312909583954672055 0.08758217246481268814 0.68503279086481416726 -0.042194619974222642711 0.50249568928201815421 -0.027001040432822559501 -0.027925429660884196204 -0.72440786740115703513 0.094558023278131037026 0.66648715573142514046 -1.4187835003761097852 0.27332523224568217035;1.3852613518799570258 0.89096924364478480296 3.0552854051523019585 1.3067713539771854681 0.10687071117731267167 0.59142216161092986404 0.34513451076421841623 1.120316111824123384 0.66353855127173566597 0.27975016244527928233 -0.62271374956242686594 0.53714812017781965459 -0.040724531358681648197 0.83245698564558368027 -2.4043776504613050271 4.3077492772699326196 -0.37871036144193065409 4.4600973735218580885 -3.1686877404475857212 1.8206642417491527564;-0.39420529830355266476 -0.023309701151115989892 -0.13824363314450552331 1.1070272352625671886 -0.47497047270529674234 0.36628222314582437047 -0.84294739809645868878 0.91546786845966898749 1.4201461638811314625 0.35768726254555910371 1.9626209924316182498 1.7423773572020153644 1.7108189570428127269 -0.3879382522982375292 1.9414841627402930069 3.4864017742647401832 0.60773353873052127216 -2.1114688535746086728 -2.177148905680784452 -0.15228802503969665616;0.86152206468812841944 0.21050884040255732343 -2.251935555766393815 0.35545018600504391104 0.40107723987437898794 2.5069179728259096684 -0.055853148981495660819 -0.94250921214474325804 -0.57167840284433024678 0.025983685060123756089 4.1047311408416495837 1.6957211993448431109 1.1111284439707855842 0.30433339620411936632 -0.55558481251951707947 6.9483032331041698626 0.1246096675909133672 1.0908459515108166471 -0.76456500778746916414 0.014904103356714838366;1.6364762318398127228 -1.474296496689512459 -3.3329469832516855909 3.4892473230176594967 0.85293287523043148646 4.5008404946004221259 1.5426289433681510399 0.84107914225801694297 -1.4935503915982324408 0.90777640041698903772 0.59521153984645247537 -2.0131742826855258954 -0.4058035266891075743 -0.2113513645270920227 1.4910022317634812339 -0.4275250009287470121 -0.91253412497655439495 0.89102914105996322558 0.013333213964501379814 0.62687322336605155737;-0.97710504050283597532 -0.683359464284008844 4.5034790445530417102 -1.4185410109271434642 1.1525354278996449153 -4.8582670675856176601 -0.96752859100482779819 0.018324370054739844149 1.615674343727500295 2.3379739393189882257 -1.3093343680934999007 0.38898646003212911104 -3.1241479786744905667 0.029440821722724899723 -0.46413676299028749916 -1.2161339454198780707 -0.37862326002928137214 -0.39025716176690300463 -3.7903889051489705331 1.2412898018128906141;-0.33442640002332030269 0.49427666859895263984 0.25073359319778210086 0.85517746706730091155 0.4414404394244029195 0.71280368934304838557 0.52162257207308493356 1.7793770135687114742 -0.10672993813072395586 0.086310179879159301675 0.82530082139078309034 0.54049530273364576605 -1.2280060007976678627 0.98292010929554429755 -0.37180074637987908792 1.8032889760442163407 -0.98514625814346568067 -1.8345749245764064739 -1.1199801068340888843 0.85951608902065901319;0.14567593385385019245 0.18116222186087255208 1.6552095243177722406 -1.2150157184257952547 -0.96882983298839175923 -1.3056717523487757493 -1.1585315520541399348 -1.669982661252919387 0.35452328555189188686 -0.48928285037406676894 -2.7220826907496906699 0.042319332174805490698 0.77030079601722623028 -0.19189485514910251118 -0.51949533070017384073 -1.1042185577706584709 0.55638618568167641509 -0.9031341595439251746 -1.7896144057650857917 0.31758280376099351505;0.26772320363215429406 -2.9938172128031164121 -0.53976601865411655279 1.1134655975246126047 0.82358126399068076751 4.5544308208674335603 -0.58027553302500933796 -0.77010976524286312017 -0.063657114251398888571 -0.41641356747843566444 1.7122807459055968682 1.0586322691889673564 1.4161010621926739539 0.53067782512496586289 -0.74684186424187459785 -2.6221881462189844392 0.55007259838232747118 -0.13469216827903529587 0.08510681904353112337 -0.22888639161581486592;0.54264646224566093213 1.1116347036188656272 2.2863862602169504612 -0.44271591367036722264 -1.0046952896490304319 -2.7625953523515232035 0.19815498115023033598 -1.2509702341852082519 1.2780319409790121821 -1.3529775151688030466 -1.6426852885781026981 -1.0391426746617764554 0.34600273343024684491 -0.10434568568587199167 -1.0634717400946613886 0.3343069836633337788 2.0684559599783058914 3.6438410471219926379 -0.62945176584024653543 1.6562495055500254804];

% Layer 3
b3 = -0.3549897416417501228;
LW3_2 = [0.3195916263905203003 0.58613751111321288345 -2.2243013105864406498 -0.23166236330774794827 0.47348735988321366541 0.52295747955076310465 -0.36634969302895503684 -0.069507158369804991627 -1.9076098839313060385 0.26884474075844633223 0.64933743297205415157 -0.58685716463725712266 -0.30934552874149140456 -0.3895181603764242273 0.53484878937498414597 0.22934430580377629383 -1.5074940261995810609 1.6297967985565788851 0.446913515258890226 -0.16261372998135295576];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
