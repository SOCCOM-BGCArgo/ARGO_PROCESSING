function [Y,Xf,Af] = ESPER_DIC_9_Atl_1(X,~,~)
%ESPER_DIC_9_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-0.2178;-177.232103709389;-0.12];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0461352500991908;0.00425400504498441;0.0145655815308426];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8606363355750987765;2.5184658380616804507;6.1498618952354959788;-0.67502078388495745376;-2.2118455866194781656;-6.9968984309244790509;4.6229213758189482419;1.344314554988044641;1.5798882780363077138;0.60497948607180607183;1.8987345596629068289;-4.1679175486778756721;-5.1166676847282293039;2.7411329782735460725;0.83182572382735431304;-3.2451873329051261763;0.65138717043213900659;0.24973777934736385298;2.4233819699366208056;-1.7003589695738969834;-2.6285226241760621946;0.33505777719576701479;6.1369034057538538462;1.3763386165734790012;0.83172594804876598396;0.51672666478826845271;-0.1699042297981044336;2.2055033872252067795;-4.274448135038012353;-1.5914219838810608199;-3.0687973382908522169;0.69289270903473609842;-1.8782247958583404568;0.90712978527976695364;-3.9381400335862082329;-2.2124275503169599233;5.7839765103136624447;8.1405086669891399964;0.2603210474888125181;2.8529074866126391541];
IW1_1 = [0.87637923908763892822 -0.70677332857502073171 3.1103702677519189379 -0.013394150020950269797 0.15493624535466260506 -0.078264309805934850761 0.54416093307840518456 -2.0464420924047779238;-2.295292363458732332 -3.3430226870048351806 0.29381879455133730339 3.0081714166158288748 3.721996432185313175 1.1666317996461024187 -1.2989549292886028997 -1.046241475337618132;-0.097827102594788217793 -0.24359806080083801216 1.4773254736217484862 4.4154073135253382176 1.6523176491344284678 1.375767102042701806 -0.42735623027776536986 -0.90114274787818982038;0.10750475656897284793 -2.2310846600447780119 0.54781102585760899082 -0.32198545976491488307 -0.47404717693407161239 -4.8988589280997629771 5.3902768570352321831 1.3682798698049987163;-0.74746585287869837799 0.30697671911238255671 0.89335584906118647996 -0.53463171965053879475 1.073363251276824748 0.63411672179937050853 -0.50404025880774727675 -1.8943197617560580959;0.055757171878818859168 4.7196776374028832635 0.36280088333215015917 -1.0021753592481492667 9.4752946076593360658 -1.4589735486651171925 1.4239286167464964006 2.0290577533374216657;2.03992041522682932 -3.839529077260657175 2.0761956100958345317 -0.49121518141671322022 -11.023533912852794714 0.65418314646784270217 -0.27245983549687075032 -0.39998658507700107778;1.0967618679673802884 2.1451251442172072359 -0.04758344495796876239 0.084450649779902395298 1.1692078046085092602 1.0456378632434162324 -0.32598810403488409637 0.13721073559647850582;-1.3230598873429497697 1.9090405251230204708 -1.951864135106559095 -0.13378023671350863788 -0.056839284760612958369 -0.012459215262134967425 2.9750195442878175633 0.32598366251583271724;1.2192290184538652209 0.5519177690276131365 1.8735577374235570236 0.58878783044826765725 -1.3321440067296741461 -1.1325395019132862284 2.9643360644355198907 1.9420170344080054381;-1.4307948206554839121 -0.2848482867986988909 -2.2072023341567716948 -0.48832135422868960806 -2.0010590115700455094 1.3466414195285325572 -3.4425485714037664664 -2.2160374570253034143;-3.499263211264347806 2.1550946683326994702 0.80619155128907904473 0.077012243674319108555 1.3569468400682684894 -0.2166257154025377496 2.9995885857954003306 -1.9435684578363094932;0.53260980631410081987 -1.8472698330863577265 0.80766005730131618101 1.1547686385123299146 3.4202757781772747947 1.486987464471844822 -1.0463757634599326618 1.8713021308319026659;-0.71835741279670661807 -3.8017891178511189487 -2.6065380768021095825 0.47319905041031357085 0.078322299026342384609 -1.7421315729042177178 -0.06033155704516999368 2.2368034200962347846;1.1757534463082941478 -1.0639712887423216081 0.12689082253759453867 -0.20342329791676697082 -2.6689477139827388896 -0.63537861448138199805 0.95009188589220727739 0.78130872407693563453;1.5864723545919752201 -1.5846446861635528069 2.466688224949156627 -0.1095218047272830536 0.21554451350999193071 -0.00051351297383319326976 -1.8155026519446464395 -1.6255287448539261774;0.2305103494350547455 -1.6496636453930306754 0.42136429183981771729 -0.13090606205317792399 -2.678761336320231834 -2.8717762502949701897 2.2886604069714726606 -0.32677044625764445351;-1.1250346469986090003 0.008388677448625191449 0.30799221279888294722 0.057710530654809806539 1.462234676494059693 0.58069787493633118203 2.1015481264241420156 2.1307576884360588387;-0.69392709222666837388 -3.7058663354198420059 -2.4452737962004964523 0.43045394208924026014 0.28940048945606305919 -1.5832146290907147534 -0.070371916595321895582 2.1216291347989009175;-5.2289182010446708659 -0.88323331985076380946 -2.2410886578434006111 1.4386973785212191501 2.4433769086281276195 0.39393231278467194523 -5.6354487649384514825 -0.325250499667567472;0.84955884343009524517 -3.3828953686534046774 -0.27932694105156502529 -0.2513225398645922426 5.4601719182506975869 -0.81941999805382037536 1.0775121116142283295 1.3307282802542657052;1.6692389178657274229 -1.9814876939454120208 -0.33223253074273373375 -3.7258781412536965405 -3.489721794313623171 -0.94282132436156040889 -1.0094802378691190015 -0.89143257976735679193;-2.3716742512507749119 4.3715293407738338161 -1.1027132880938597115 -0.02345646953238852972 -4.1552415111347373866 -3.9931481627317819694 -1.4943499009154992407 3.4345479081778682584;0.24469597670058718109 -0.33510852198096041654 0.66501597570794601655 -2.3689520110338468939 -1.00120484011269828 1.1435332307747494429 -2.0734439336065988435 -1.619284102034913575;1.0065111098894610198 -3.2088332254981861702 0.44892442854390263163 0.21371735808960437564 -0.2651509013165692652 1.7791550845129244784 -0.39059775009216335384 -1.499908064505218519;2.2428783016513120785 0.18819751689573627207 -0.80441295740678708803 0.13360994751349206111 -4.2985567670919184735 3.4139956720993618333 -3.6419352132682445422 -1.2584751989224667312;-2.6462239568871068762 -0.66279209692318674652 -2.6059926923173279967 0.39650681648357671838 -1.5054582090783725778 0.5656859625999428598 2.4680139809396686168 0.29079370926033404343;0.59298764153283678446 0.81923402822426782954 -0.9155614111271345168 0.98244026772007675419 0.93380058470961946337 -1.6068158843295134997 2.3117890960942664158 2.8877497519979868912;-0.0042326351952470080142 2.5674368997939129855 -1.1022861334306275349 -0.28142673114744709562 8.5936880007006610782 -2.1435833574829410431 3.181269561589898931 -1.9391546620561010972;-3.2518141237086979345 1.4913277717804405142 -1.3387505589527903815 0.10209637992898673575 2.4604812582710051672 2.2828060361093718278 -0.99229904256909962079 1.7368495419559504267;2.5691992376648826735 -3.2934315261891637938 0.03014811263335572325 0.0032972847305174756566 1.9098943996042456739 0.17904196732030538963 -0.14302255204827316049 1.7795428241024138227;-0.29029908380108571109 0.68530548804013213804 -0.1012095078676797516 0.31122856889319083784 -0.070711892936457132475 0.22694508276164962468 -1.0722530494617157348 -0.7225795647966040125;-0.80021250131833943087 0.31915436904033772647 0.84039691856113873936 -0.55678451269102824384 0.41228134973463936852 0.67232384477006801315 -0.7096959770481426899 -2.1757261259253515284;-0.99874223839217057819 3.0153099816099611097 -1.484304128117205579 -0.091463134670888596167 -0.21076865412566603286 -2.5532309094205456468 -0.24335325236609595123 2.2148998914678363903;0.20820765649340072789 0.047565954953203606892 -2.1705463681510059892 -0.62554788230183844266 1.8711889541199968612 -0.15143830283824238903 -0.15041539432780218211 1.6293626169874719789;-1.0532740187453928371 -1.8503527087718534272 -3.7884604421165843924 -0.91857221102276653824 -2.6526833087086081342 1.8762734528688196356 1.6831145278272827692 -1.2282484625005940515;0.087102160673239281685 -0.47180927986860787815 0.81833665748426343001 4.0867211929513773683 1.3114893349849336968 1.1176227296330285554 0.039082522275570817649 -0.47352219140130819008;-1.2404177409322951764 1.1880613402943445145 3.0572099102875962551 0.64799006903469047458 -6.5128004769132701313 -1.4783321203807158195 1.1796208890057173768 -0.35511435566300231237;0.81902639923989617454 -0.28667229714660302786 -0.73325090323953956428 0.051660605038035191383 0.35458268491659844512 -0.12650758681856560939 0.31900579638013487616 -0.11287069520058848338;1.4160309877008330215 -0.36197263033267862431 -0.79874132401495345768 -0.4926912321509110404 -3.9782604611487073498 -0.54994800423422129931 -1.185536404467115057 -1.8195565023603925692];

% Layer 2
b2 = -2.026563821328228876;
LW2_1 = [0.10465650148190387692 -0.055638159526567934621 -2.6035557358614762613 0.066725445224568469271 -1.6480121658244417659 0.036893165043914002976 -0.053705699369922754727 0.088087360984955398457 -0.075825461523775269934 -0.15137476000260366438 -0.13312106607009224768 -0.11493174001739571433 0.091216518845408489646 0.83670771956312173234 -0.29242217630346140078 -0.12467846760212275559 -0.056108909134686246745 -0.048932614826671695651 -0.92426500157112656542 -0.015734304839384278402 0.10169961674455281486 -0.0093948679856360496621 -0.061202065737633475073 -0.020024654187801697175 0.22775231016759167613 0.079081141735777168988 0.030539291678718698958 0.10874725861512318792 0.063689487501119107504 0.066174274615997105697 0.11714547987613703472 -0.42530131969925100144 1.6045925689385895918 0.14225395780390376332 -0.096045024555314412185 0.01235684317698617328 5.3753977302490767443 0.065690713551537993631 -0.46678603157603310025 0.11977561354508967084];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
