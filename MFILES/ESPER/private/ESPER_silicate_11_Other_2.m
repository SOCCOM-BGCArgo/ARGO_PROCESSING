function [Y,Xf,Af] = ESPER_silicate_11_Other_2(X,~,~)
%ESPER_SILICATE_11_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_11_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3703795994673919623;-0.23742877516744390065;-0.037795469215799216978;5.2565659226723644437;0.56217988699513798956;5.1634169959255737936;0.092644422512009452775;0.4949747204367002662;-0.42006526866921412022;-0.08139228264232130361;-0.19525370030369787466;0.31205256492419164438;0.26284685665039908553;-1.104841202344807094;1.0836283643977215885;-0.48390722578366812678;0.29129328644416963012;0.35341699075501176175;0.69669471428747475894;-1.4909026835868097738];
IW1_1 = [0.13862642886797102437 0.44282546464924144036 0.39507756404167654329 -1.5468821614015098032 -1.5675421358133954097 0.60330830257647694026 0.040206584457795790932;-0.29849580486973220639 0.16577981162810997984 -0.0036416841782497466271 0.76738344588141016445 -2.0098902500285840134 -1.2018861248504071337 -0.34936134353969827693;0.057434222704983793617 -0.35812003832129024605 0.63534516094503035166 0.10320117147150080494 -0.64550009974815125702 -0.92639998156691549802 0.35059509357421542175;-0.69189744764159177848 -0.096820526093569780901 8.019520185097391618 -0.68255605345313241639 -1.4701630327726615821 0.56624253312785310932 -0.44620910713952699478;-0.38830798703050917187 -0.07915083578782480811 -0.20957254454367765795 -0.95771375334156305659 -4.1640275128033534813 -1.489390487774062688 -0.082142150601826599554;-1.6975429038999791942 0.58445512523642206837 5.8216428338450008084 1.2054239455737401077 -1.322468090458028378 0.64909674039273712598 -0.5951806753395624261;-0.57823170761726860878 0.21882922632574966504 0.48710786623492674519 -0.5631965095695322665 -0.78649739606018764793 0.36317881645690208714 -0.0060625563680943442627;-0.37745298131566046296 0.065605325931434657627 -0.17444098151432624322 0.29766031755683075577 -1.1471406828080141782 -0.44257248021201117671 0.71895605474745138963;-0.38444579673952888887 0.65090811539694592991 -0.076817697706320228757 0.16523676040226559225 -2.5925087740532450908 0.59903093665086348807 -0.80158017882210719218;-0.11597949952587098543 -0.077572951716266075328 -0.55120865606004032511 -0.90219190004452132214 -0.8781813057179550519 -0.65109085255523069247 0.071778303625902512008;0.21254875961745225976 0.12861209723263256066 0.55339717591870130065 0.82384244940119222278 0.27467195403872901593 0.98495039668589512427 -0.10823040085855695214;0.012859493498334862577 0.19646328692546652372 0.70358887442191431205 1.3569108993766758609 -0.17371232038645423312 1.3152496271623113078 -0.23908560067246789616;0.48353616218660511183 -0.38751620471284342617 1.2078561376974430441 -0.6778673542563697918 -0.33860080345219012443 0.31268398196796692856 -0.96955690486917656123;0.34749215940401018132 0.506960196929795881 -0.32557251988722940572 -0.55391492203138226191 -2.471708017226254217 0.59990352973357441435 -1.1940489889547911684;0.23765611520906593235 -0.13604005118932149809 0.60953866052656602292 -0.93297326513772460554 7.0227090914559235912 -3.8136071169205285614 1.0311626810599463511;0.10213445779941396352 -0.030105545408132428076 0.53120497242302877616 0.44226837226512077939 -1.2205183340242640178 0.29501941577483886681 0.094102900795171626203;0.19446626609173306433 0.095107273941292133634 -0.086910210757991587793 0.33572370756284675153 0.20215942783937790317 -0.19687418365434389278 -0.523585221568674819;0.13225023314375411454 0.0304408221324852582 -0.2229952798588130114 -0.1607113055207262664 0.57949508285449946587 -0.50461044637550045433 -0.32724378036968743144;-0.13228560105340067543 -0.022671063765784253696 0.35344065430206500489 1.5459649266736970041 0.63814978214461237638 0.51709658807406522207 0.30394718218291605361;-0.44658651578634289692 0.37426702494534647148 0.33875041395507443642 1.3306323569720990285 1.5310083653314052743 1.0401978321462581611 -0.53709693683777237627];

% Layer 2
b2 = [-3.4280912949914315035;3.7070453449289466619;-12.816054699158867081;-4.6777431274410439244;11.005532651284070766;3.1660248255851128896;-2.3872813084501900427;-0.69477241726668692579;1.547646959365704733;4.9320260104853206329;-4.0449617344865114177;3.0473044218539233619;19.169815909593669545;0.021750474070397655263;2.5132501395046586978;7.0050566191838532504;-0.26554158404065869581;-28.539070728727139681;-1.2118192280180608567;0.85423373386779388738];
LW2_1 = [-0.53197092271104540195 -0.61525495151825049245 -1.5870010492793924506 0.95116580738205869228 0.19664168834543521713 -0.14759521001388309358 -2.3503357277475478426 2.8280553555684480038 -0.76256526655312550922 -3.339973195604313716 -3.555579225267091914 0.98020000724450995211 0.054465586740329960391 0.54378799896047425033 0.7490302241072096523 -1.4062479019506131106 -1.401499895610559987 -0.804259248760684331 -0.70791965517900479199 -0.34574394072237313313;-0.47084732268553419754 -10.504641359708008608 6.84477909232208237 1.3616206387021967394 -12.598581478804819156 -0.8465225568927632338 8.2359883118730525808 -3.0236454187385839454 0.90322654073104868822 12.231683572872459109 -16.784555724278021671 14.47226574323831727 1.4879620579278949322 -1.1244617701016066391 -4.9269002716555805321 3.9319006649479448789 8.0517214262331524566 12.058033855397775724 -1.6836961351961539091 7.0796259774426024691;-1.1128705759947723486 -1.0110387474316868683 -2.9588613722240704185 -1.5066923239561225145 8.0227632707608904639 3.0717180785016342526 0.39235467432141502009 8.0536147002268787531 -3.2287795271900763261 -14.793707383396919042 3.8205885515811375264 -4.0400609727422303052 1.7519427922697938804 -0.83820918336438099416 -1.8028044661941857729 -6.3139819725189330057 12.580833396810087166 -16.699423221484188673 -11.050070099890820785 -7.3329868929719994597;3.0386105578796018811 1.4824185693594926772 -4.8040396316734126358 4.166120862510236833 5.6433477826668303479 -1.8177442624609732036 -0.17921237402230047464 5.3521311078545688034 -5.521502531242985512 -10.246644420996277702 -3.9501309130319692819 3.0107636041250556147 -2.0323111047380346683 0.37010900255880962995 1.1030152237598729315 -7.4701910067120032011 8.7552299362940111394 -8.9090599364760301171 -3.496581017159374305 1.4267446481753656151;1.8257344885214061847 -2.3099154347355308481 2.1958728736641033308 -5.146777961501856069 -5.1771173247558150976 -0.67547433296535730474 1.1886129087548640282 -1.4117008938208408519 1.5252117738533925717 13.187167968310228972 -1.6913047286177733675 -0.42503153908363244806 0.27514626156298294113 1.4818351754769942819 -0.44989070371440581519 6.0830476883759274642 -3.9910067711557335457 13.776846606255633176 12.573853515443413897 3.5088664787530037259;4.1276486013000548425 5.5206761620759845499 -0.95184083506971794986 3.1750994402071697209 3.1059951875476965455 -1.1839091642249861547 4.3509246975840198957 -5.2360553915699368233 -2.243540160341042089 -6.0251183853389749245 -2.7961794007061531175 -1.0857433321582377062 -8.3509892876113998028 -1.9983109669357417282 1.9434402073279215539 9.4334531167072910307 10.002296514324608978 -11.765892422377564941 -5.9883686769776129921 -12.445574903049157811;1.431241047760251961 -3.4062055915173483633 7.4793229827704195145 1.9546854935676587495 6.7523451086172157076 0.92035293706268483938 1.0150362545704336714 2.8983431322372612549 -0.93517955706074995526 -6.6316120113981726902 0.97639289418770502937 2.255491665636879528 -2.1062085800743330921 3.8467280154149277038 -0.88619291237672481731 -20.267793955560552632 -2.9101631334399411521 -0.72663429416898528412 1.4313983113387351853 11.508621032793008965;-5.5368847816578226073 -1.6753966547054026659 7.3909263245038472334 -1.7835396186681753417 -21.690664575509813972 -1.4123353918540109131 3.987257971263392875 -4.5056747926582287889 2.4141036602816967616 2.6268515427316647681 13.224788940168389573 8.1862767646124421361 -1.1302087654259931337 3.8116551326513317122 0.14082418407841582053 -23.166488756296161 -10.748938427554472597 -1.8516471157046368035 -5.5062581640689360896 -15.827548846606426025;-2.6838203796997670558 -3.4389940371788032536 2.9870849444877882739 -0.46639450295793294377 -3.1301524530259068335 0.52616282277084358565 5.7066358513999091429 -2.8323017473113569764 -0.038267256383130721087 19.118163307826652186 5.4777617891294259067 5.1262581077899458393 -5.6245405272219768378 1.9634977099789798771 0.30060727026301337084 1.361120737488330068 4.1293313917295417781 0.43263715624057585973 3.0159418070141241763 2.238675074408964516;2.9353199751231167092 -0.47923812581437597036 -0.70760034096274282422 -1.5472444835767511506 -11.801353184186783807 0.59049294259597306933 2.1815778114099320106 2.0154323234304603041 -0.76320464301252743944 0.20747838294892123612 -23.700096974912316483 9.3229760481107817327 3.4414868775987850213 -2.0736247643490370862 1.9600877142663364339 -5.2753618306036980101 17.516798089897612556 -19.820286354099803106 -3.0688111187392115298 3.6673694389531057425;-4.0465563172091378874 -1.781341385665130117 -3.9466845178127942795 3.0155491783459771327 2.0231256610443151267 -0.64091753088260317028 0.35637180063508872019 7.3689158060253152627 -4.062032518791392377 -10.123131801349840586 -4.0151419696242136581 3.6439477432513194266 -0.8259880529010843464 2.043866087509568441 2.3723252638443468321 4.1630905841199199457 3.2229462719427104389 -6.2867042683250051738 -6.8396231496075987621 -0.13697771092581231822;-3.4778133310176775339 0.81600044832007778695 -1.9998736453722167905 -0.53694751063465695484 0.43695240715306588042 5.4677853620639949028 1.5311444927581434605 -2.8446688445541772339 -1.4932887401677916728 12.471709566104149047 7.6034640883885877827 5.1367441045050821202 -1.8576791962385414969 1.8893030225366262975 1.0130774792142822616 10.533458765492186515 -14.296181729498361079 15.522552908594228427 1.8809305770898914201 9.2721039155685236466;1.0379868374008600629 5.500307565873683302 -8.0325614604298962718 1.4782165882618696351 -8.4398331893586480135 0.80194207733235267632 10.358371435841998931 -3.3630215547450568181 -9.1880422572521229796 -8.4329870144864003123 -4.4071239593369009313 -13.009681493197556179 1.5967849196486634256 3.128398429871654951 1.7457247171396252927 3.8794206876666055273 3.0235612337150934437 -15.020163702746939904 4.9199285258806675358 8.8902278746381302454;-10.384882689344134832 6.4870894368240552552 6.754221974941374107 -5.0731156707690079344 2.2247847336579313904 1.6402751138908122641 0.65177456367438979523 -4.4322381358615698943 2.2501504675844321568 -5.1562223159549782636 -2.0821085559949574773 -8.3523654854370086298 6.253411733431289754 -8.3694635614712211691 -4.9703129574997682028 -12.65208832530849925 -5.4969073015515181879 -7.1651704384716685681 -0.31185426571103669335 2.0118154289976404314;-3.1941340932914226158 5.3707891313434599212 -4.2094765178946520479 11.250094507490690177 7.5024937473764135021 -9.0587546045687901142 -6.3691180927283586044 -8.8226678117198265028 4.301128202459469918 0.98243738516287304474 2.6396752712650233264 -2.7566585016967253274 0.054959974912817864678 -3.8186445135381101856 1.9556357115534750424 16.089607094867293569 -11.532088603607631327 6.5573330555726530022 5.8000094547246598964 -4.4858107187434832497;-1.3486926908554042193 3.7182501117754163111 0.52496787199054761874 -4.5399896922631803875 0.71505297214572760556 3.277473700060332007 -0.8362033569310852732 -4.3953990935804236884 -2.5606645672415573323 14.027167005098757357 5.2024131376834468199 11.535947937984177614 -1.3304855887344060328 -0.5775217126276454005 0.9638978193243681325 -1.1446801542936755336 2.8461864730312091964 0.043873541751218977924 -3.9417635582477674738 2.0145492640014186492;-0.79226490184027331676 -0.88161534808733554858 -1.0123595248411936254 0.28958947282697722336 1.2655748014912620025 -0.086055073024925127223 -1.0454257143614309467 0.054498223684386143395 -0.88759389652939779669 -0.38366363011670240324 0.13603684540709495843 1.6849424059364164208 -1.6629431568636507954 1.9147971752690355896 -0.37896891667489596145 6.2693364073189465913 -9.7769483186472232461 12.187985427053547483 1.4048158312312308826 0.56137248046197452123;-2.2708565710681920535 -0.65558520050975943594 -2.9996108041929803179 0.58353048883809865988 3.9135912930187566339 -0.055900256534934564256 -2.7533504075867138994 -2.1255325588351423605 0.94678296617549118075 35.877956030717598424 22.737488761691164285 3.3666207446923448465 -1.7451850697375352883 0.69317498318430892379 1.3429422665621832955 10.165648491393749708 -7.7921670954618189597 8.7263860240896544695 4.4778470005868094006 -21.709234139297024058;-1.2022498004428070484 -1.4914713021712584506 7.0674726295337881865 2.1034040066753996179 0.35273110185838141284 -1.6638700012311575804 3.2362940209962158811 -7.5598767855137998239 1.8505306844560616142 -2.148702297693759089 2.3043941552766864511 -1.1308014857134025544 -4.6161211083550410805 0.73570972444836990611 -1.5337386410033544415 -4.3909132176058163211 1.8279341819539478564 -2.4273638347573114338 -1.8912642010188052133 -4.9611424121913438867;1.8230279402668230215 0.77328812679523362128 -4.8197668079588655843 -1.311554971213221954 -3.5815421766431807526 0.26157028802804183076 1.4736453589758433669 5.6722886579843363464 0.1365506288195362794 -10.334478616660348393 -13.721278728248424983 -1.2626396424058685675 5.6410847917443351918 -0.9173247947350168241 0.025431819390774913769 -0.45031942026588039907 1.6308383117342171165 0.97199282899663297375 -1.0315244922645285808 3.8846505617260307375];

% Layer 3
b3 = -0.4294290012833286152;
LW3_2 = [-0.27025052337390237378 -0.084562527226738279373 0.049238744642417321684 0.072145075378054590587 0.14728830629546055264 -0.1140507299489615517 0.054646667725578551567 0.025095606874411438558 -0.097529423941211140781 0.15275413810225813016 0.058104171048254077414 0.17552089601377554584 -0.054155270807991102988 -0.031666715246075033408 0.038596333353483766593 -0.10366706037715925359 0.67880379825178294162 -0.41822399568826779115 -0.15342020199612826925 0.17991268026473389297];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
