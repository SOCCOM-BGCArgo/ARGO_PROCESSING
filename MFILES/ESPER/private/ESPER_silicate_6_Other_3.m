function [Y,Xf,Af] = ESPER_silicate_6_Other_3(X,~,~)
%ESPER_SILICATE_6_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_6_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224];
x1_step1.ymin = -1;

% Layer 1
b1 = [9.1383702830645141546;1.3086685536773450256;-3.2109999954650625398;-0.71626566223451426652;-3.5364441532111476896;-0.82472623104176179254;0.78298577396195134792;1.5040663261685416341;2.9245923031808120918;-3.0795649289357571732;-0.89288827715638019455;-2.8370008110012907565;-0.61214455914455501162;1.2021201014104052618;2.3937200314696074344;1.8684295949249223323;1.7651366278238240781;-2.4599717956979558764;-0.03892994755513642241;1.5026504800686397711;-1.9619055947654033822;-2.6612275429147125294;-6.2411866869870475938;4.5665972147966655825;-13.3774298844395787];
IW1_1 = [0.16510494989650428832 -0.051777546091668430472 -0.19263572436673534471 -0.074643202086461246658 -11.687322642003817208 10.214043171839442437 -0.37366407452826910784;0.12802327141379554742 0.35485019206986317952 2.4281288287893025846 1.8519691390734567271 3.409080734849124994 2.3607961755193782594 0.13179623300640341821;-0.31333893272982948908 -0.1926892431752607604 -0.078575894811054231015 -1.8181221218177028298 -1.8482826667764957751 -0.47395622153437588775 0.2386333565426712322;-0.27133775161272627452 -0.17313550929014265289 0.37050881432596355358 -0.082127403561550224587 -0.63291433931763629861 0.25804182897896438265 -0.45936574395811141658;0.012595032416611303544 0.28667713680763917683 -1.5590866536887639793 0.35634509351192189541 5.1991470685454190814 -3.0128548841055722285 -0.7726834424805664181;-0.27089221822069142753 -0.1004826017035897745 -0.38159750901771882781 -0.29420161301794278685 0.46557303030809582545 1.4947455532304707582 1.2886342243990891454;0.15898473545700131382 -0.25386266748277708238 -2.0748269876763241193 -0.80954530435398419641 2.1831536324451863429 0.13620880712793762002 -1.1342802640355091892;0.00039305671346631562138 -0.35162246435287280999 -0.38213332327682336675 0.061088936604534890829 -1.894857842523818281 0.93859437970013825936 0.52324612855020269375;0.17954249249003761957 -0.088806502650660895659 1.2459753904330179708 1.0032829749750773463 -0.46059762086134076187 3.1361638748569546919 0.062637579648067820415;15.561601075010610629 1.3700917467432547348 6.3967547080143321026 -0.027383984356725725451 0.036558740615338002067 -9.3808296315489148043 -2.3100209907552140542;-0.12812361469562752458 -0.020639772053460733042 -0.21637095854834381692 -0.64003355030026032324 0.83821169967587505489 -1.8593566823444800384 -0.85093459441146235278;0.26548982412919802654 -0.23084912887849579066 0.82093849888016823257 -1.1800860245254500835 3.4453272086114670181 -2.6916361134647308617 0.77554156853732947319;-0.2185851725390194622 -0.037003478511681162089 0.78080226159392018825 -0.84143546162666926769 -1.6109017732655872557 1.1189324598790371112 0.74363877250813070763;0.72024617827111436785 0.00051148771605505414899 -0.039336056795157899046 1.1494084600941898433 -1.7775854606230814259 1.5059368165442856835 -0.18373984918319613557;-0.8278572210469583581 0.38105774280550214206 0.23998790755342291892 0.80495048320554329901 0.056262788544214584197 1.8365864725272484925 1.4378579652281586743;0.30788165989855836857 -0.068913453879388644752 0.15918534647549187344 0.37028819273961421921 -2.608933656826595282 2.7279217290225279413 -0.051723459826345762058;0.55992623374275496406 0.33005823455075150585 -2.6915362014611261543 1.3200769274436476852 1.9594794806675859267 -0.09017407833898689884 -0.1447677482430293483;0.19364519265668286852 -0.23078896062887763185 0.62590385549206517535 -1.2228694930159940135 -2.1301866850493125227 -1.2195508540821136112 0.40513657849976214553;-1.0410977228140416706 -0.84761565508921066225 -0.38483716809636686618 1.0332265651342662505 -1.2492506338535260824 0.06425994038499217853 -0.46900383679470653009;0.022185836912101578738 -0.16591106735043664733 -1.5028860291644010605 -0.54080315192636396748 2.12993618845453625 1.338515833254938725 0.63262969447690042823;-0.12834513921320650498 0.48082987810435101617 0.60504075018906666728 -0.51880804755538145745 -4.566507229210498231 -2.0207444095104749593 -0.8555386499698753866;-0.043943331617969129399 0.3257075272910121555 -0.33270121795607482396 -0.15213336301719515564 -9.7152974250406867185 -1.1206783795999950559 0.26178837629062345904;-0.056094704448557908272 0.15244693877125931047 -0.44144291741785285366 0.21445916708072759738 16.676464198958157681 -7.0757444194964405071 0.20969846753802318107;-0.079914638018034681033 -0.26781602101737322918 1.885214865400500539 -0.13449728368514479726 -6.2717682307199638103 4.0916941495863508038 1.1932460440289172077;1.1723943029154937356 0.18900748424474256293 -12.741016926600210013 -0.034458225723280583308 -8.894059580194014103 -2.1681014815399364259 -0.35887379237949129651];

% Layer 2
b2 = [0.23943757606613411126;16.318034858786017338;-2.472768396773040056;5.6765469063334315081;-3.7262830876258474788;-5.1218095051294669773;4.9805717996829077521;-7.1495560817189778291;0.42741346606916608142;-1.7156740217422121741;0.17764789951477180652;-5.3444576479893299847;-3.9814648420835925258;0.061270431350119815284;-10.859257972460397923];
LW2_1 = [10.150430041791114633 -0.024045756423508021782 0.081097908045085140283 2.5258656481104804215 4.0136177199874225607 0.51605471569204242055 0.48385273709170406597 -2.2872378340673513719 -0.060956892276184809765 -0.093668251079601944076 0.032568104892905153092 0.92393813708737082546 0.7745117207966384365 -1.3903441100405338204 -1.1114685773715613504 2.351532513523544754 0.004664735967139268559 -2.5785234271115049509 -0.025450432891897054738 -0.57346702515829273139 -0.42488171412681152717 0.98280365999489238682 7.1629156149245503116 5.1450940771756039638 -0.23415511048549791928;-9.4893225933381852855 -0.085590498763232464308 -5.2082455290959082106 7.0932159447636635718 -4.9176242008504829073 4.4134225692521358297 -0.44940103123030417098 -5.8656711264095315883 -0.46857291924175681341 0.36503958962687954592 8.3375501554447115637 -3.4141863778731202927 5.6389716388938841973 3.6091629269012175385 1.0282425155675305462 -4.6978541394230024508 0.60778507482399168893 0.79185513190178580256 -2.9562394388678479018 -2.8573100815027845378 -5.3088725857820637799 2.53448283839829136 5.6870969151451866708 3.1801975990790345428 -0.039126733942072104699;4.1963120263259749976 0.20289757059792720706 5.5947767458536317164 -10.040729253757666228 -14.759096059479876573 1.4883248820683530056 -1.838700620875934888 -8.1368201484747562091 -3.2644048996910508542 -0.49133948777009595066 4.5100885274213693421 0.49866647055221952067 3.9649115249183037868 3.4943079143189081925 0.30474720448954922825 1.8065618694377885145 0.36938055654925766591 -4.598617045178476026 3.3431369742596657169 -0.20688749045671872562 1.0409148743966429862 -0.17746256883158889606 0.062870180336137254651 -8.5787941005326562305 -0.33186904879244244482;-6.3953706370234870704 1.4531181532239985099 3.2100983623773058362 2.3525259991094022993 16.279955634638508144 0.31547871163656338034 -4.5021904222584820943 0.33008557492541468203 -4.27114475020583928 1.0253481556498631466 6.8487918280613131472 3.7524737331634399062 6.1195841453453834191 1.5291391956986224443 -0.10104207493927516714 6.428063910211686327 3.4090289533801798605 -7.5297601073201407829 1.0957496138619864379 0.93334446505307333553 -0.26567590739960977864 0.81996858556031726462 -11.38424784246778465 10.13610148592563398 -0.41359832369839472088;13.34377376109521407 -0.23678766576965681878 0.70088673296817272096 -4.4759463819081375391 -8.4402210135041801919 -1.3680512171384200393 0.09445100046512568126 -2.7306250611337312684 0.083676562142269372835 0.064552799418602022086 -0.46373876508070055458 -0.62833677609930249641 2.3968859843683363309 0.24402280410847321246 -0.24686126397683877398 -0.69843660721627687238 -0.25480079554032630806 -0.54174444893446471738 0.87904032184111369208 -1.3411766522814347891 -0.81503813491768228872 -0.36447287164279495997 14.878405916120531316 -3.1550291765696849566 -0.11523483016836458259;2.9343477832442910191 -1.4831324072455365215 5.1797118194808060565 -2.1443824935041653212 5.9601900241764109722 -1.6737782647093644162 -0.90907381785278518205 1.6727634984551564834 1.0999786666681712344 0.42500321879601588027 -1.1571273283497105488 3.0662286864874324088 -2.1470649093642171223 -1.079217059068783735 1.2624360999857959786 0.56166788471506390312 -1.5227697992606739064 -4.6687424994510378085 -0.067067516076302291506 -1.0910226989429501199 0.050928373993594198976 0.30611140226458727343 -0.19662660696613121214 6.2649462438107512696 0.78234121279280077754;-5.9256463823756719833 -9.8161637146306333079 0.78090234773298305981 -26.552729168093435419 -5.885358940048945442 19.179506547214661083 0.52798557341286544986 15.714226703278445285 15.701941709796154001 -1.177893263242464128 4.9111001163491261323 4.6473247627113210001 7.9730530158894143966 7.5620180943416865915 12.988183608899245058 -11.944802910213978109 14.303842149057238942 5.1769927033917468862 1.5129211146309888836 10.353021263517364403 20.173727040958741696 8.8977886076108045899 11.741536540010137912 -13.365583250241931168 20.313055513580621891;-0.093894843086883672534 -1.3024788537227514063 0.17712280600411117737 -3.4063303497469274994 0.93263493710177336471 -1.834797186803578839 1.3951082772252036968 2.0829715033065085983 -0.15689730035872503922 -0.018559230618823713971 -2.3816075613040768033 0.35910637836294317937 1.7951624931291552123 -0.85215508189212108014 -1.0618294296071495442 -0.93530929829834574818 0.14371581209891565178 -1.295263003532537871 0.31489037741754161148 -2.5994991744920348253 0.57981686385307229514 -1.2682131597635191156 -0.33421645258410792589 0.50596146122769602993 -0.29490569635872293519;0.35811370273208620318 2.8032190561584156008 0.19394095854232712428 1.7822691163794295299 1.8470198818026819509 2.3195469952472804742 -0.85540394398686592226 2.6899859466110358497 0.44423309808078942362 -0.0037928033991347074629 5.0555754885590555858 -0.201552279444228849 0.40924471576947718532 1.8531176308511785322 1.6171309894282446251 -0.50248488333578278375 1.5906510103387725419 0.19932893545183136275 -0.8057354958387348276 2.1636362501664541114 0.88614519563031446392 0.5526550846763207403 -0.027246027390758122827 2.5560100119367765714 0.78412119772842170384;-0.56586381625681936303 1.2419969693063594995 5.2264590224978961785 -12.414132505541465079 5.4980406606708882578 -1.7812172892557973647 -2.9790363966722215316 -6.6837846063071157943 -3.1921185751598359914 -0.4157817556914550905 6.458432959264040818 3.2834024423813579219 8.49022918107515423 2.344562257792114579 -0.28359620689543668659 4.6157657432731777902 2.8903838199836595635 -6.5851322706225454695 4.4508553657888363375 0.81680874762828836744 1.1219706367213562181 -0.85203574975985041373 -4.088391940586836526 5.0420327931061272864 -0.016468028930321988723;0.22753578537611313104 0.28528504973020341051 0.63940183615846923892 -4.9086845873803186535 -10.011966265048432234 -1.7244491174968596958 3.3831118372917092785 -3.7569809030113621162 1.5895380869067092799 -0.096609916088334898965 -1.7261632851058026361 -2.3890197262299159853 2.4683378235221860031 0.093728647305143589219 -0.97136381208516320296 -4.6753110352735722799 -0.59626080908631484689 3.2894515709572242912 0.4728899850156101925 -1.1424579828146088634 -0.59568376043292614597 -1.0920527264967703207 4.4624082675908720574 -5.6398177131976785503 0.077663418179147056253;-0.39138110810178716736 2.3241762184197565233 4.3538956515924169821 -1.456185998371575252 1.8150315932463836344 -0.81337921012550173927 2.1042780072089413146 7.0377909234411717421 5.8429292644656598554 -0.17967186101856560954 -3.7953378867828115872 2.4571447855635337731 -6.7344702122151955948 -3.0122556955941646173 -2.494619928692715316 0.04236154535202410476 -2.0873783849619651498 5.3993692075658490381 0.12175140231916330158 2.824032967455646137 4.0016747117482651674 0.22947309985333383398 1.3241769788153749943 4.9410610152110905346 -1.8797819723683697468;-1.6412511513704748367 -3.0234202654339732419 -0.5390125711829072408 -0.92808665591008898677 5.6854609625926002536 -2.7847915707209818237 0.94856949157968795117 -2.2274277410459033533 -0.15545163106909359874 -0.034900678238928811714 -6.4377070094589337046 -0.14632232532958872051 -1.6044637962963277378 -2.5553113639796332102 -2.0916962771113043473 0.059191150964357772124 -2.0308411703030944118 0.52748296130294181072 0.73188825730340412168 -2.0695219921933922791 -1.0810022403397718804 -0.56411536675555640219 -4.6791200181354355436 6.6876497774283212294 1.2200047942800147371;15.214671748261521245 -0.73328217873230450152 -7.5869055974024099953 7.6340452239853533456 2.0400315863217546308 3.2275028622199459782 -11.260237814022739045 8.3889124193033488552 2.6524744174414824904 -3.7282655406803657527 8.2559762966722090027 -9.3920494975879531552 3.7945630937279966055 0.38851430197209851913 0.18635168384866410141 -6.7082563647532884588 3.6726151640723845304 5.9154449465979475065 -2.7058472523223584538 8.3484517976540608686 0.1290818746062106781 -1.2748067634729050024 13.254703554919329278 -0.45772456590411275679 9.6359847798150290998;0.44529102975376305684 1.9727189553827086943 -3.7157247781767619443 -5.64901972682312703 9.4931378600480655905 -1.0978679273594962318 0.18957493864131960692 0.025073329986345080367 4.0465134612286641769 -0.5173599230015559769 5.1047957063775939446 -0.81164153383403314646 6.437444087004520199 -2.1646877906320423079 -3.0965136247022324589 -3.1737890958350454262 2.7301886025112804823 -0.032147623788520332533 1.1148615377912587387 3.5082390803080762964 0.75405551609759724485 0.97988139064098056519 0.049019025638781944798 8.0446365246931286208 -0.22897658619106145417];

% Layer 3
b3 = 10.262984620475616993;
LW3_2 = [-0.3189711867719158267 0.043004515636859010075 -0.055306761457909081603 -0.080017026227737833577 0.17806442331851080052 0.13543440101239306861 0.0058605721913443029059 11.361228510684796333 0.63274401715607975216 0.082470292419814614227 -0.14047751341038336448 0.042970740442413619953 0.52923628353601492869 0.019055569616403585792 -0.59758399610810020164];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
