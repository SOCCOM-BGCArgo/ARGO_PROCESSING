function [Y,Xf,Af] = ESPER_silicate_9_Other_4(X,~,~)
%ESPER_SILICATE_9_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:41.
% 
% [Y] = ESPER_silicate_9_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.31235793956745666611;2.8019638553614742982;0.8715034221791554403;6.9090552682990606925;-0.11198859966167744318;-0.69055738991792980919;-0.4786931346869638948;-2.7386966249610971147;-0.034417699883692608187;0.040669983682687468884;-2.0904527160441470635;-1.7649980687758666242;-0.97606327098104417317;2.3155367576807233121;-0.44339944578568007971;0.067284485941981345136;1.2979074445193632403;8.8430148189360373578;4.5370990305946037324;-0.95582025750844445966;0.37760152012075431927;-0.19800464126823194566;1.7405890559455172717;1.1496010714779110184;2.2144508411533632142;2.2606348332222885311;1.4853790216938003166;56.682193523592687256;-2.8033132672227640825;-1.7533734386706010255];
IW1_1 = [0.39638258965803230272 0.36582925113417963381 3.3331587703103773279 1.2924232937819839506 -5.858317423612921182 0.0022365529956439879865 0.70644695705602733593 -0.23619113303119176894;0.0659470827349985661 -0.10700863511831665287 0.2446523359953354515 2.3014754901085114902 1.3173662423659076026 0.22427090429335105881 -1.7217834595090439898 0.031859850330908233429;-1.2777511125603624453 -1.0760417484550239831 -0.70274927523372787697 -0.28850340608236230144 1.9178347531950847848 0.6543982412551248018 -1.5828898058914953051 0.46168076855559603278;-1.1703084380365236239 -1.784464442984365018 0.63648434244305662766 5.6410758154465545644 4.3961710120383843403 0.85066670562919532994 -1.5182541365790998 0.48227830417287054221;-0.03127001740260905438 -0.22168887826884145498 1.3636602522045651043 -0.895485944918119392 0.9698849976815346885 -0.12246911094652315755 0.3853163963845584461 -0.1214645288588285521;0.7208460618355118088 0.839004634009314465 -0.69923996577213642922 0.15413125460631801888 2.6465718510891362847 -0.16046856072694562489 -0.097382685627539836148 0.37092450375572022514;0.40022598581072782453 0.76776373174254075593 -0.57866996689988359215 -0.12372722689424456299 0.78040330697648563341 -0.16057440886216531317 0.29504071257302072473 0.1769499907797639493;0.030128642103350818104 -0.041783336381768551582 -4.1322792576215992 -1.5448735023280932843 -6.2057799957016008818 0.31990111099874712908 -1.041954978607684934 0.71686045172847290274;-1.863941882173387965 -0.55137129258684380861 -0.55671080681765949816 0.4619278058661166475 0.45538661556466697444 0.2761158502258561076 0.85790972042555480037 0.35617953073906138961;0.6657271075244003411 0.51650565370569900825 -1.1131837317427062395 1.8267215067682467389 3.1843470357829155581 0.048668727007577787524 -2.6475579890766303137 1.7379888325974723884;0.37788048353232900345 -0.012992708186411076193 0.85458065967331720003 -0.45644682875450898196 -0.13169430659902126024 -0.21277193913385389346 0.47886510970714013524 0.66571391554777148425;0.62498997154623969763 1.0350173106411819646 -2.4309479799253410626 -0.14016452825562425444 -0.72117145248153391446 0.54686378469747654041 0.15722418615155822619 -0.27637563270132176063;-0.25945715726848728178 0.58010740543105687728 0.34395460589152171416 0.12887942614321082346 -1.3964010739686856244 -0.036584913235818299071 0.51445111263241816157 0.41356423843417877695;-0.19538339948476962649 -0.13622990489678990511 1.7779996203069334815 2.2599694946108122018 -2.6234101130769662547 -0.39947505433560559496 -1.3918056110131480363 -0.76433550602179178846;0.53557444695129385881 0.74940926679328523363 -0.35216011982185774221 -0.023612539798514853295 1.9184632568846911038 -0.2767269620101927563 0.19464880728079264616 0.37473887343451028897;-0.56450243518555431876 -0.52926510472473020652 0.89095788104230944082 -1.3056330973108938309 -3.5210402098992856779 -0.12634068612670240617 -2.5107426889530590763 0.96075355814198526438;-4.9316418624618361122 -1.5911414245924186961 0.52889897803626673145 0.8892165164858583104 0.2799033700844159589 1.1883862901455384264 0.52905008059988301028 -2.0692195551569603218;-0.62525345570935064732 -0.13109716498031745435 15.007393944339771252 -1.3640295841314589165 -4.4931840556330318037 -0.65831626331503367844 1.8292999182142644088 0.41047116043656622919;-0.37314780959263876836 -0.16797488299450077931 1.5294469618656221233 2.3742635928854491922 6.086816905105767006 -0.42457295857200921807 -0.79181704314127387967 1.4225126046946345859;1.3876928752731820804 0.35816298768428245225 -2.6199271792455758323 0.3280251453700987474 -0.0065273489896477757122 0.32287218917958099285 -0.16172332741317954619 0.36943627768009051904;-0.36464282989563717718 -0.068890001582383189604 0.383569679926708762 0.46925117088821854949 -0.60662906711033248719 0.21464442027395508328 -3.2032144697134432576 -0.16169948691223304249;-0.037616409462539621145 -0.2306165439308895948 1.4577195151970172571 -1.3235292745176887586 2.1972323370846313928 -0.13124903214607186452 0.48555805593147333132 -0.072286904415400823898;0.26900233554380786893 0.28206978942629234997 1.2056879407530889381 0.29105680985678478168 0.64827020333828822007 0.43120726369410833367 -0.39446659499570196905 1.1883563001400623271;-1.1426484531091762875 0.45586023925747992669 0.36637924876435123966 -1.0786838591277598809 1.1402441988887357383 -0.5203449575304182062 -1.7283372682622086813 -0.79359900057030885456;2.6843679105889450831 -2.9758777050656100016 0.35569852705635124357 -0.53314015049954177616 -1.4862359629801484839 -0.92285449390271934167 1.3797074070170975979 -0.43615600001533244567;2.7536643163937251089 -3.0194599644014781248 0.47324790882477529852 -0.4883312940345119757 -1.4053017850439231129 -0.9581618724892568828 1.527373445853290157 -0.54731605474869848837;-0.086356235204622919244 1.2476286803464811115 -1.3206256260829354332 -0.34974238538642216101 -1.2541109738795912509 -0.70951165694661044725 -2.2584501123873219619 1.6118795054514754028;-23.915779026065436597 18.777254817354432248 43.049548022265085478 -0.39772651044553281041 -18.35489558325518189 -1.8400443166865971811 2.4676633915691494892 0.18915877811559902999;-0.8989628822883609649 2.0475035458089818619 0.33425506562305989933 0.40940858557115911154 5.457028967578433587 0.35046785059716395461 1.0835578045843838879 0.52732452209830127376;-0.66354620708384604022 -1.0232334243206706592 -2.069058012382101186 -0.010899865053280043473 2.6014562511970300562 -0.59039822520739027034 0.32074912705874275565 0.7328942128333402195];

% Layer 2
b2 = [1.754445087051536678;0.70215099046208351297;-11.984844175168639424;5.0847979114631547404;-4.8595421200126578398;13.783895416438694426;1.7772410919613781388;-4.753937322548980049;-2.6318108479991320081;-2.3085602245959999657];
LW2_1 = [0.10596474863801687294 1.1329045787837259684 -0.4028358174732276642 0.065593774980279850872 -3.506074309258098598 5.9980009690437405823 4.8206953888688008902 0.52843933328000092242 0.41769587388073592393 -0.54097376832113097667 2.1457778845321207051 -0.87131884136790371809 2.0893175629181142128 0.2506101635477608891 -9.9675685098260693451 -0.13495161329675786632 0.022679998786096878388 1.1112137826692092268 0.34789991854869806165 0.85653003475523969978 0.26403192194693747563 3.426392904547560736 1.0308574827897625248 -0.52183691684605015837 -8.0812161558388577731 7.8625387087880076464 -0.20626391119300388488 -0.11346351416844170645 0.87586290013665857312 0.1866335812513148229;-0.69008935127958759281 -0.78635523141429697347 -0.24035788977728939075 0.10996553307686708634 9.4531873344111190249 5.3660694585369386189 7.0223815726006879601 0.41450221406610582298 -0.22505575723981521841 -0.8589015063296925323 -0.39318527676929881931 -1.6656128240590568623 -0.23414756871024203222 0.39044180561309971278 -9.1576881627159991694 0.44797211103718459491 0.20562874096442951277 0.17523051278549778287 1.3696725124222919323 0.83365360666669552359 0.35245423336574416284 -6.8744036660748655265 -1.3879388062765254386 -0.17721776627627422451 -1.8033687089577381535 1.7001748626022739064 0.2844795967205664966 0.25584391157400404593 0.4231789082172413563 0.50740505628544219086;-0.8528180471561274123 -0.20976687748910627374 -1.3978535046661135777 1.1831884961473277951 -1.933414913239409838 -1.0336253329168252346 -4.3450258189475094994 -0.42254902186004977827 -0.61247149706017467441 -1.6421580606422387927 -15.901962933159381919 0.82423211766393744693 3.008015308784092845 0.13565952256219188099 4.314168251767604545 1.9774751031226127651 0.17028013628459512385 -0.62797462426695138671 0.54626207899582079897 0.40358562869023778541 0.19652235394950326453 0.73733385503586557075 -2.4286432271424183149 -1.3569901215514401649 0.061559631340778311892 0.14575467684884091391 -2.1644962642586644819 0.77849663470732999304 -0.70047779324343339979 0.0467552987576534268;-6.2879034953086243576 0.30897756122764097331 5.566745024344167625 -4.1452528285726124579 0.33491054684576454514 -5.5147084125110845676 9.348437604925809552 5.7732218622300699451 1.9435669903320793583 -1.3538889829732900782 6.9008444269051043563 -9.3134762135879576306 7.2395822789093466909 2.0871508981833217788 7.4646895081138673333 2.1869756182178443638 2.6273378252535470878 11.482225683865301846 3.9999166289080609893 -0.18446720426919713254 4.3231565937775942032 -3.1318506168925286381 0.42763158970284609328 -2.6259338070317896907 5.6166413006854147838 -0.3249546902811635829 -0.82059101234116349488 -2.557535652483129418 -2.1144841176199800081 4.2410162980682049039;2.7513785413229419063 0.019065709515007432662 0.23921070615436865192 0.21280942482766126989 3.7883539342522016824 -1.037922238469500158 1.7420696607313828075 -0.82739981231459802657 -0.78609730199321359301 -0.73084190859949216268 -0.58414109359099120056 -0.95776182483860194949 0.18304245771241020591 -0.28584350190653506907 -0.47468576243932963932 0.075232186879569049043 0.21501413082874601401 -3.9920201906109507028 0.044969209374608465346 1.0106970874835512486 -0.4549570207432900304 -3.4678736655568553893 -0.062266438247298806774 0.41341425869299203155 -1.4532659477267493298 0.95628804037073378286 -1.1566024186961099129 2.9250377045971194256 0.43538558391774417888 0.070393972097288690093;0.86976100015718593728 3.6990245737740283793 5.282313173584180177 -0.26309308911500361994 1.0421713628988746869 10.844945648753190781 5.0034675497556211354 -9.7510540149230671148 4.6200562414314312321 -1.4075966000588402416 -11.897269451220847003 12.134874831381958771 11.821976237626016015 3.307337825239958562 -8.7115163445278316345 1.5065576290196194265 -2.3639684579359827588 1.7815238961444259669 -0.46587229610852654016 -15.725695464140846624 1.1949499182935949815 1.4698070788380162011 5.0754533843581768338 0.96443923977541301529 3.8482471518181307069 8.0597532503602540288 -5.7107926610727908212 -0.14672439715321589082 -3.397209090518170882 2.2985635621280944285;-1.1910525857501430558 0.64860019683572800453 1.0250429914667673614 -0.62184968811098972896 5.0281613920202197221 -1.7189129378808165605 0.36606032701265556195 1.3686371798530296839 -1.2591321656373783977 1.7045066406526432345 2.6074895928691326219 -1.5075485545478439775 1.679311405000018631 -0.10432723165398181953 0.44632547469638622628 -0.59793446624303736581 -0.11315655598098915691 0.35307273688397616818 1.5379204497644047844 -0.77929999205493594161 -0.25013811471085306559 -2.5041225481613462733 -1.3335782529318120915 -1.1158468810612494071 7.0303167045053847062 -6.8955098810450063951 -0.49969719618694885543 0.10897754203737566869 -1.8428156853285144745 -0.26738007130073565554;-0.81655283345841667142 0.39417541127106042742 -1.5972229744624701908 0.61196896165713199345 -5.0553563989290468683 -1.1629802050053772433 -6.1052864214686453082 0.12102496998619027835 -0.77453718505711000031 0.1844050616458442482 -8.8163144924126388702 0.77194904485964754848 2.1697292392701146291 -0.56997360396556073781 3.9048788119156156995 1.2619183107326097382 0.17449495913219298382 0.63924424388569289768 0.32897164591303096337 -0.29148712545365956794 0.14452822149712987732 3.6785164323236596573 -1.7822890595298008787 -0.54433011922053431419 -0.43378552310190254815 0.30078536790466353645 -1.5906693420944570949 -0.41990734028661425015 1.0914477771140853601 -1.1894842694252725224;-0.93607773958747120258 1.068223707297604852 -1.1024635715735744412 0.55154690564331032565 2.2869347322071456041 -2.9015731974344469712 -6.237535817349019851 1.6190365074730146411 1.532686714664638572 0.17782210597446013178 -5.1179877406898146575 0.00038618711999638486582 1.8651527529253018045 -0.55504926644752117237 9.2142173421697002311 -0.49201064672995176164 -0.2796054983533098337 0.51655496097033215541 -0.30262949379833969932 -0.28690868276401060299 0.56592479582823418394 0.65700666617162772898 -2.7481168981430146303 -0.33082522870493247247 -1.9649986335656881575 2.0346714157935377187 0.87549356154169843958 0.045481318952188785898 -1.8876741634737872477 -1.2501343270693139331;0.19057279578077951365 0.99051617244093270731 2.0221202428552160768 -0.45752042662369352133 8.540691725183652494 -0.077075837466135249665 11.764131559151392636 1.3510908948356772363 1.49150765810536301 0.030852881651065162255 3.6310905359917708957 -3.4999633246398227371 1.140284898349655629 1.4893761167862911154 -5.985801508993460196 -2.1008887685397614753 -0.86667462125115268812 1.8246284885063643877 1.7169210369079543899 1.5410644707995215796 0.74080772840889319575 -6.1619511800523945055 0.58569643945975813359 3.8126929751021765291 -7.4099085305260681267 7.8730526482798968146 -0.94423138920653137962 -2.8049581972938990582 -1.904065286848766192 1.1846488249134994319];

% Layer 3
b3 = 0.71418426875011853383;
LW3_2 = [0.20330974194478809713 -0.58137601910735414723 0.1221509511726577013 -0.03087752699538292428 0.95352570897790955851 -0.23464238338011006446 0.10207468787753651296 -0.23653968030798894207 0.21828806888237536898 -0.10310813143634643685];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
