function [Y,Xf,Af] = ESPER_TA_14_Atl_2(X,~,~)
%ESPER_TA_14_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_14_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-0.2178];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0479365703301392];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.0174744861001445706;-4.4392528857820137134;-1.1476614880993536438;0.49722743555493892353;-4.6489503039567905418;-1.641887818335233673;0.34246127776709622825;0.66956844588357011805;-0.4682118511306283537;-0.53888352106280190679;-0.32299735479663532756;-0.11814577842951642928;0.91961385778751347786;-1.1410763965169208323;0.97910426457004762213;0.0016353264527673933362;-0.18112931217361835645;2.4911315471171784353;1.0775568933627333035;-3.9453035470130082274];
IW1_1 = [1.6371340848067372775 2.2255097624600712614 -0.095631580668439700177 -1.7408937952316148046 -1.8304882289493418224 -0.33146647736464673883;1.1957423968647022949 -2.2989123657963901337 -0.79799684963385153491 -0.018837442321599187633 3.7281555758178774873 0.39360732406020282337;0.47655309344296375995 2.1225980367032839524 -1.514344464173991156 -2.0234341427860593754 0.23255952509333896461 -0.60132716109851613862;-1.8171032577657284524 -0.81818190000806134687 -0.35710142003733541527 0.30200641334878941535 0.32311600372877036236 -0.37521893705990211343;0.73620246414383316846 -0.1888450416610903404 0.79949751186253992241 0.50329407979239926263 5.2483629214478844105 0.1153556450559322516;0.80465560061682273041 -0.34348464563772324043 2.286350878531081765 0.76844505232128468286 0.42697619500129790904 0.13470637004940239079;-0.72283834496122356672 0.49971211437516732667 0.30884908090019685956 -1.3339604053048286225 -0.31436952340430818209 -0.67503525904226102661;-1.2849417364557484955 1.3330181979745556742 -0.64934976176731085129 -0.86417384000196206806 1.1959391389659697058 -0.079646447512793872026;0.40347486859145437199 0.76169160666456448006 1.3584682938047722978 1.8932791962649169193 3.0455356475349213419 0.95703441052267401723;0.95986341842587741269 -0.35580154878125108686 2.6249647749449311895 0.87096717361816988756 -1.4048966818320576255 -0.025294315072881313339;-0.47528880142603724401 0.2800178841982839395 0.88577862963009512676 0.38998105170868835323 2.2797821399016360289 -0.2044737917286861828;-1.672113388510863663 -0.63805980058651934339 -2.7923728534674405743 -0.85528795361027809552 -0.37058264161671283787 0.12843875725192505088;0.19589923256294319853 0.83986918005258826003 4.0798653736732628516 0.67341105259674383099 -3.8142886147664749608 0.11917485961934157213;-0.079680862975334387777 -0.4774272664620063944 -0.32997744504441156588 1.6850218997124679632 -0.11630821182412999504 1.247194692993456977;1.4449138037162516657 -1.0478745734260148659 3.3261278334118040689 1.3045871017159749172 -1.0131457978474924797 0.36770612193272467216;-2.3699631723371039627 1.8732258410802971049 3.6527648183075114297 -0.51868871682593686856 -1.7434393591438663851 -0.29733869361229386952;-1.7644987664377376202 0.85669722742194198695 1.3651226949132884148 -0.74134580918127657156 -1.7730847979159019001 -0.10690952831941971657;1.6511494919466347397 -0.32291517301902777914 0.83126593544157267868 -1.0919552845161726307 0.83055855521326960034 -0.83825982718696046003;0.63313833392670548772 -0.81352755234671481066 -0.85623182442168199735 0.57369125744224569452 -0.13381343455320063307 -0.3581346811163929611;-0.063391825013173142001 0.79102482962026943181 2.7206935353372565523 -1.6551170496120122255 0.78155299677279344017 1.719990744314116915];

% Layer 2
b2 = [-1.6956513849235488323;-2.6982887929001257987;1.3561291264541905921;-0.89280542179587707441;0.45335801429547772923;1.1687644173804048187;1.5608764870974884964;-1.1531739611773850207;-0.80371931431373544452;1.0420660133447090523;0.61608516683110225998;0.79184830364101799205;-0.050046027906183218614;0.84154484976925070239;-1.1712467242158974834;1.7280639343801058594;1.8143220515704636675;1.0949085633997939215;-1.8017947335960176058;1.0591471530362654985];
LW2_1 = [0.074559949261397043263 0.79503464495390774314 0.017765745175324487021 -0.2582885757068829613 -0.8806763293923379754 0.96130624188996283142 -0.35923706708646818697 0.18768890478432867508 -1.328216920400193235 -0.58092656673224307706 -1.8795251009747053761 -0.47830882985613315528 -0.28720080514703288932 0.57692917090205952935 -0.26437645661077652237 -0.063001321145753894082 0.18193833219258095935 -0.41969678190459391853 -0.51607369639033762176 0.35655212357921356459;2.3573398393558187003 -1.2639971187834082578 -0.49113071062687330137 0.52945624168197580328 0.47912972284451499361 1.5143720110977245685 0.46440946864279375461 -0.54488830714218072782 -0.045051352913193322414 -0.1531765680844929256 -1.7424652674123237706 -0.77016173428881584684 -1.7895829050392568771 -0.17125380048627952823 4.0977411866664326112 -1.7741952342982960644 -0.79541540461664184125 -1.5978898303805164627 -2.1829783041195889304 -0.319289438256692093;-0.26683972044476389485 -1.256526789942929101 -0.21510261927950474758 0.25577121372840383451 -0.38729239680912203037 0.30002647664419596074 -0.054627464673149668528 0.25625750172155048467 0.60942284351044151425 -0.59098674965019171168 -1.4695095458171061331 0.46191898833993466633 -0.15231213306674645791 1.0245600111125381382 0.55449277830911702925 -0.58416143833546008146 1.0202028087948624702 0.18843012277952114752 1.2473592380365872145 0.54918301405175884433;-0.05421990530884890358 -0.43929232607352353135 -0.26347181833221694491 0.26408723293536379151 -0.055577361662203186854 -0.96281803444129865355 0.15849089640051047811 0.57435350536128915167 0.29378246711577116201 2.3054957204772175139 -0.66336682194436202842 0.29676053759129450427 -1.657714138365129708 0.086114340472881217847 0.11054839449716358235 -0.33986844605448446321 -0.033598496402887340073 0.31018405982393598697 -0.20967350913538918 0.77922499618836815749;-0.38613938198193159534 -0.77184035154818153579 0.60940544792306972077 0.22973723799363726661 0.849892973877890201 2.1143838482339170071 -1.0589048579872284428 1.0047308399348793273 -0.29831031444353173221 -2.2762782946780881765 1.1328002504929501892 0.78160254685770413907 -0.10098400656475060855 0.51989023178792015401 0.715241999904643877 0.38523252126012635932 1.0813543753726673202 1.2627163362253237544 0.93096575849475504683 0.44947612867743519383;-0.81996686081385405931 0.64401727731517910414 -0.16770190839748719269 -0.74846837316469017054 0.33273567527066860716 0.70178056405218325331 0.16377136053365923263 -0.19895835321908714177 0.46846967936953154421 0.7606954983518118274 -0.59987463469921264991 0.36384063713397485351 -1.7598311371654209445 -0.10662029074237956705 0.75428950130121785733 0.75734481771218242763 1.4204629394998073977 1.1522520427219145045 -0.31889026407765125315 -0.035132315323160939746;-0.75283011465290095021 0.10994675061238512459 -0.34347171332084042161 -0.25195148596395028351 -0.82615322471306185115 0.271942837983696728 -0.14877067881121103232 -0.32927227704030248567 -0.075448764472799134673 0.4831960186031862281 -0.0065756229854657555906 -0.11881972944537243231 1.2485165602352366054 -0.21950197750891634052 -0.3320891987345581664 2.920111760984394067 -0.60446249001197305262 0.99282105952257959647 -0.11930268451247404149 -0.70937078953065579867;-0.37863650182283209444 -0.58425333630304387977 0.00040925252384438164099 0.46456112915153791043 0.53538196578451358043 -0.91078340460336260076 -0.62085706545922170196 0.10516875714043555368 -0.10897087783521082482 0.93955154086885739328 2.1119565815829610678 -2.3193570694310632341 0.19643021755197409561 0.098807088683201441115 0.84057066572084837563 0.79550053415655430644 0.7486110242533066117 -1.1756852430743158777 -1.9958636532843290201 0.33448650060778034598;0.016180986957120523095 -0.93524105255205680631 -0.30830194736979615877 0.43836547563765076996 1.3671796305134988891 -0.30179228067368524258 -0.45227927124531036585 1.1285108433106159076 -0.23257323416794997706 -0.80366342299648751979 1.1113419800929043024 -0.6539656759672064501 1.0969284529315306287 0.49582838667542639133 -0.14600506014481318129 0.55811933140917246998 0.31183598861740829955 0.1674219049440895668 1.0809451638921581118 0.89350252587113321301;0.55446218568587191111 1.4048390664373473502 -1.5337784593895837926 -0.4246415253648931909 0.62999907029540547221 0.97059515446502175884 0.69374067332232469685 1.3782241266241506139 2.2507658022357679428 -1.5631520892371106868 -1.2129339861153878299 -2.3573747954381492065 -0.36634175854014727758 -1.1129932444756407417 -0.84182105337200097139 -0.61057565248100076349 0.78614962098240781518 1.4843556410884424235 -0.66496867167738094029 -2.2928599938761546895;-1.1821680303096424591 1.0038040261873577563 -0.086834964403284281564 0.50087947325341852789 0.18191288594671475853 1.2229405947479221606 0.3735932546814765276 0.21227345661587807002 -0.27659824544263489354 -0.25311952202315912697 1.0432464312766289716 -0.80440226541591464127 -0.45279201983954625588 0.52017892481893790446 0.70965906488695995602 1.4965030246820643089 0.72126836052077858419 0.0034572512616180442295 -0.28600805780836469072 0.14261638973511972517;0.41996827886131155028 0.50050220314064686189 0.3925150842852451194 0.56984958383958828065 0.7316231013415908091 -0.6457423902172400032 -0.56443517838403067799 1.4206533205749221072 -0.18024678864605059303 -0.81930490625452800924 0.28517056884026198427 0.7696915520404969957 -0.32054264048020281175 -0.67183877732870578292 0.37414632298292094248 -0.14261900200298735508 -0.60055746050120706325 0.97592006999465952255 0.59985471440863957771 -0.67403068432860280268;0.47058895893838070812 0.012258960874371850266 0.2188003777806497574 0.72194901866535698964 1.2743238175096429643 0.34747380930505972207 0.35458247429487860236 1.1758010079840630624 1.409913804290106043 0.27374003036413374623 0.39351541705350256972 0.30442300900363766791 0.045755835181805912248 0.89823466610077951078 0.75463198480849824623 0.28092183021872341175 -0.021452926173147830041 -0.57116064396026156036 0.20612710536518710769 -0.20559556291435041042;0.24010552890278033522 -0.25969238887852480469 0.33178393653323084989 0.64669466279605369863 -0.23981316022500256957 0.17405594414866062958 0.26524150477556895922 -0.51536578761080242828 -0.55583841422309365754 -0.80105009504767599182 0.50963825865160039541 -0.057641422381825700716 0.040551511656351714452 -0.89359871006045721309 -0.1252753926678549512 -1.4069581838155509335 0.47602981366373375849 0.49556086683952077498 -0.27750111552652745317 -0.31275813773443872368;0.62521386857086436173 -0.022284963102173847155 0.44232995796699670077 0.28347687272710270223 0.72903373131740800694 -0.20037486253624578469 0.0042529918341650055358 0.32629013257584787988 0.056158586610448188448 -0.62989495728621291981 0.23989645077362015124 0.053388033505506936327 -0.23216342588927083024 0.34523260814723255585 0.13360701254865386955 -1.3562165482775383474 -1.0429832201816733317 -0.36734759955254947528 -0.31539878916140628995 0.27071495146765245376;0.015335726589203152459 0.42893328631315141841 -0.14627674087566783223 -0.48751542995843383244 0.47052466175001345094 1.6276298869199798958 -0.35940568943834139137 -0.18961944710213410326 -0.046225634761916462034 -2.2519945551034878939 0.43037112794735998822 0.032696510329663190653 0.38901465041932420386 -0.54551497629465151018 0.21134251047314489558 0.20283085434794426161 0.84966841419626359944 0.58887334424460269222 -0.81552610535897218647 0.49933307374563978831;-0.16740644023576392585 0.040642677448772236704 -0.23570012060083297967 -0.059005361150733300069 -0.19922265515423592808 0.9728947134382722739 -0.27187390007409428794 0.53956667568888327935 0.48855219635573976511 -0.4820383141335148891 -0.66156332983168109063 -0.056738646330901101877 -0.19056619658939843998 -0.040225855924005349262 -0.6545695264505383415 0.24145505868462174837 0.46720794972595136585 0.65091696399097276338 0.21894905313100029853 1.1155722076537326615;-0.098945692954402461594 -0.16975570361102090833 0.055129999902578046 -0.3301826438806382269 0.49056109087388555245 -1.0132672744255548647 0.52288435336918870355 -0.96313756613387568883 -0.52644148793763079208 0.96952794027229283191 -0.61711689311277861947 -0.19358507350974460404 -0.91727263087966082189 -0.59064264034444924345 0.53863599503017955961 -0.77050324072845155499 -0.43443268431749321179 -0.44630248895988072766 -2.2996776376697165567 -0.25264242831470917761;0.149810474225177237 1.352727832863076074 -0.18434698191814885559 -0.54232456085154467917 -0.058692484846509240803 0.1245308353844843674 -0.24004800237774753802 -0.39609254673064708818 0.11505738895884176642 0.69167677126396143183 -0.57544270825949894732 -0.32281798688331869718 0.073964486051265057598 0.67097340238682423585 -0.44219632607059966567 -0.38697563369566401192 0.073141463424562722095 -0.31091557767270250334 -0.61563567088882387157 0.7165012164361518332;0.49431883656352004763 -0.91458905054616346231 0.32262208071633918793 0.45100125300155946562 -1.7346879270124935246 0.086700482478337212444 0.26388309512809804414 -1.9177482924157127631 -0.07103161726961769451 0.45613992553379018036 -0.18611459940899732768 0.51846512608056138927 0.80121397196225319082 -0.02510723345719144059 -0.39398711505283939838 -0.5618888933301927624 1.1080866925233769926 -0.28817808661961069605 0.48869881007545673546 -0.27436390686161982178];

% Layer 3
b3 = -0.5469670150346384041;
LW3_2 = [-0.039553941007225687509 0.41166451774719536871 -0.11238604996184677065 -0.35937747775403605655 0.13005178503933251255 0.10243167972165613533 -0.6810610243738403069 -0.33441057101543453234 0.15657036140932281687 2.1825620121945052965 0.050483498405727487979 -0.10249806407045215784 -0.019468823298318831128 0.17914630064956471589 -0.68180537083242642726 -0.31241943523044468645 0.23855974361455264954 -0.10901951070993030901 1.1854105251738429327 -0.086249990661563899486];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
