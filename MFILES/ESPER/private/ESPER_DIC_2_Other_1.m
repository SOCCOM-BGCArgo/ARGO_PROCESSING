function [Y,Xf,Af] = ESPER_DIC_2_Other_1(X,~,~)
%ESPER_DIC_2_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_2_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [24.029286138947959728;1.8681735871445033226;-1.0759495687459192936;-1.2101964792291315387;-4.6464199910622010492;-0.15901697950042475993;0.47948499043588044266;0.58498527371171460398;17.363711556696387106;-3.9191504443218874165;2.3259064898148573697;-1.7534813573543088783;0.10398735507000532452;3.0627643839703013739;-0.60949601078130599685;-1.2283235233019467181;-3.4565189346917777335;-11.560465622131275154;-0.72471948906703009818;-1.386878810585543409;-7.3925552845202266994;6.1318550403106399926;-4.1015278955562859409;-12.876388583845134406;-1.8006965441659452676;-13.360759028645164292;0.35945618469830020736;1.7480431258297361996;-39.345521294331533113;-0.20212485522523351844;1.8303141919758318945;-2.9049393412556652194;-2.0360564450708538153;-1.7560277812434894606;-14.420250667687662727;19.985555461942361433;0.3013333532908339385;2.0641052479754149473;-1.1452968669134371282;21.511080225160721824];
IW1_1 = [-4.4008626598870010938 0.67379206264397040194 1.7635162418152494634 30.43942167624636852 -1.9516252722837490463 -24.57458199784838726 -24.874672339197307025 1.6737669998592603626;0.077742657322903557793 0.28644148063235158608 0.58689206140673155776 0.30315995725573274822 1.6690129775995494743 -1.1246917105967479955 -0.28738154906143664746 0.72953037430138500952;-0.56638050653893845521 -0.5571770471627867094 0.10513983476327719291 0.2014160611626073516 -2.3083849167182455275 -1.5072972970138782678 -0.50220276734734081714 0.022722163652623826591;0.22575513065342467378 0.0078594903421460339532 -0.35213112495466114549 -0.22098526669647766685 -1.2121916732585471532 -0.94586077428193382488 -0.58869540729003377866 -0.16223842275831265591;-0.143769229361970452 -0.54592294820689590829 1.0474336874850329604 0.86429775303211797688 3.8050462564573774848 -1.256852541827802705 0.16769789553947145322 -4.3648769386667503056;4.392674881223632255 -11.988300898705583464 8.3740497319735673898 -17.42768718238791692 6.2263843256844619845 -18.600267808364357336 8.9906235281839919082 -0.84325962046966218555;-0.63742737229324597514 -0.63221589225550500757 2.2646192156222428871 -2.6418224788388728896 9.1051144792571214737 -2.5261564165557146566 -7.6835175099617778471 4.4398035826177828511;2.318537795757330322 0.027187675341346535796 -1.7448794262492131057 -0.26156822217919367679 -0.34568441481648437552 0.24884466700882823531 -0.85687015145046541154 1.1318288480727385359;3.5825636244819225595 14.19801450924864028 1.2361430654395919593 13.117346581998072352 -26.030703857162837522 1.3467623918224373991 -27.420801150340238905 18.517259195859271159;-0.23028771757145133359 0.079721939139683645204 -0.82904996119946861022 -0.44920034125038948991 4.4011478623981545866 -1.3689680987956382996 -1.1998388103257762172 -2.9648130914879669007;-0.092925904704067349704 -0.26534951886602736737 0.17633304384601153347 0.94216445560895833999 1.2530125384802044408 0.086610033405662784078 1.9277851419785398956 -0.62867766783488632232;-0.61471819903360469528 -0.3099469025847670367 -0.15115766695050950053 0.43173446681084259868 10.463923590650175299 4.9118208705021775273 3.6709592157279891111 -1.5822567943875613938;0.040759964835367125391 0.083257468081162189222 -0.84665540524896754082 -0.05132776025477894799 -4.5385652575858044244 -1.6367281209429935807 -0.77340286067582497687 -2.2699524802597355055;-29.448075758249945721 -20.992061342698260518 0.33847713325798950423 6.47554797896207468 20.811468016949323356 -36.708720262462982475 -4.494102184020955626 -6.3804726720454238986;0.021495839537789641904 0.019106985344101046209 0.72070821126236428444 -0.035875274175768433194 2.1121934352257967227 -0.67563203726432941032 -0.16741081092943016495 -1.2803123465471417664;0.21131383496026207025 0.1646432045242118003 -1.3097641794254708536 -0.34499991185517425718 -1.8924507135756523102 -0.70225953123970608072 -0.29187717718164285507 1.7279041019727401363;0.97783200414796489497 -0.034938832507121542204 -1.1103467459769391645 -1.9994611755809621467 5.8978037055246419484 0.21359693113749519955 7.1121875469729491925 -1.7942847295686317199;-2.1503882502063271787 2.9310151970751743278 -1.3625316382744820931 -0.34161429894205813662 17.64336478761332927 -8.8585939490018184017 1.7645457148112495549 -5.1465400182235745419;-0.049082753919971529311 -0.17012575301692475782 0.55571387099250724173 0.11358010776529675612 -0.44639542413620636463 -0.56075178109687251471 -0.4494521056833372108 -0.21019759693497569453;2.643173763562627343 0.050854572641008205514 -1.318242807583037024 -0.70230736890283851359 -0.20611508529901825804 -2.3718442042619107823 -0.050760549413941750962 1.5650278235773216196;2.9703534085745761928 5.312586866492868154 -13.471111643177517081 3.0112113702521909886 -1.5610101824386140024 -0.75579583421775220486 4.6605003956041173296 -6.0507264200234471829;-4.1704548863128234615 21.985283664253746139 -16.04948301012172962 10.263122193022223172 -7.3473742899002898454 -25.160133566395611382 -13.847982195563595553 11.662572028406591684;-1.5989320687046622016 2.8236352873548731246 -1.3414638951628783392 3.395468666009559211 9.5850440338053708444 -2.447915870641280911 -2.171095956555722406 0.13429911939077321392;-19.118693340573400974 15.834278493660336906 -6.9702094072000742031 16.261114791361183762 51.143386154601785165 20.41147210411014612 24.741746782063305687 -8.6388134508198231032;0.014697645613613134763 -0.67735535662280776936 0.026072459672437962169 0.36485232517548332742 1.4328958893421008813 1.0748066902007156198 0.011079349920900663506 -2.5913344321524687253;10.699807447956663609 14.887826665414204186 -1.6012799510717365958 -17.807812093626285588 11.677495442590437591 -7.1971277112850486901 2.6070916190838362425 -1.5347718852340643814;0.11476806918994214568 0.23860874902957432409 -0.46096104818985594864 -0.62830136704363581668 -2.0067032161750426589 0.76886308236913614156 -0.90156518729398482659 0.5926847302712734411;-14.723426329793658951 2.6341816359400627157 8.6830574389728276685 -6.4744935999247212877 -19.413585473175469787 18.487436555047167985 -19.058593193447837422 27.032093587069081053;12.421605687773091375 8.071825241466569878 -8.979658710302999225 32.841086993290844021 -3.2284649734687018707 -2.4149711455288156436 25.181458662535803228 29.854505451532947546;0.9397752333628309751 0.12451497336950753669 -1.2769648278556104959 -0.39563913517688520383 -0.6836522574158085952 0.48938324463287730115 -1.228590421147396583 -0.80926812974605766282;-2.4817446458800627163 -1.3189274686718488461 4.9226064643822535771 -0.95872856089945102109 -0.36169201957684515847 2.1267069956602346892 1.269232082302280018 2.3864458035914606349;-5.7891991810983620681 1.1422138614343273488 -4.8438586182341110131 -0.24453332250961853922 -4.373618211455756466 5.1182917650594728087 7.1707476601206270317 -7.4179695843761406238;1.7352040616493571434 0.39874942213279668257 -2.0069895836244606713 0.096106694011502458164 0.23957334836539559419 -1.0045449663628613912 -0.76362494605994635233 -1.462630673657907554;-0.76776491425724047168 -0.28349690653779063831 -0.16150262231951278968 1.3349290499506885066 1.0934425625096479973 -4.2865476586747108811 -1.7229551420725726096 -1.0507525735478955298;1.3239073860305528019 0.4629105087437637156 -10.848091832463000017 1.1560786593672913725 8.4121343910456243265 -4.6833627935071389103 -1.1445523436341651369 -2.0041264394664017878;-1.5281183064170238417 1.4964643318199404298 -10.87167609230633758 0.95351346584949725482 7.4344309640654904214 -3.1151229425809479068 -5.4140582522617624051 23.747073563658819495;0.43096199235298815466 -0.33671137371960369045 -0.051149211722466801644 0.017708060293949331315 0.8993730697634466642 1.5320879917517704616 2.454158680597892328 -1.2921263892094763115;-0.27290418784075964886 -0.73507071149194436188 -3.0343158083582491003 0.71954445919229037543 12.381338375630045689 3.2434670849016873362 -7.4955881386454636939 7.1250953792437119461;0.11394333917790143429 0.096475743642981309778 -0.37761780585337956229 -0.3594906825248926352 -0.80047814679860973541 -0.81804591717664620898 -0.70115304504206421576 0.12862120873849594571;-1.9537324263489339593 -1.4366257520349161592 -5.2779744222098683437 0.038687030206428288381 -56.072158602407128569 8.536694735530511835 -0.19358516410404449926 8.437126999212484435];

% Layer 2
b2 = -0.33806093593762664984;
LW2_1 = [-0.0048930430915732235284 0.71308259687768738022 -0.1854330564225661615 -1.4882319393488441239 -0.23581523658194986082 -0.003217898868086060786 -0.016205687089937075018 0.093141517385894975756 -0.0024869397319071187558 -0.081409116078774032554 0.55473590031786412791 0.035253199029463173908 -0.10046431100008409998 -0.0030658860149610504993 -0.5279901781160677432 -0.39050104212729697117 0.019484269302435051202 0.0095218835308264974243 0.66329433960987105312 -0.062339814137599106059 0.011994435715339018395 0.0030348942575642158352 0.011276704162109395593 0.0044620453489086350438 0.21328696961111520691 -0.0034186924649622159496 -0.61257197045108890965 0.0065196538999412710635 -0.0014195172467402730927 0.11402841251761512698 0.036789233001203645868 -0.0052955744990004442047 -0.079296534661294756918 -0.072196567235732436729 0.022577888460116591479 0.042170067433113682387 0.12911539963225213135 -0.010836933339701235873 2.4137721123494495501 0.006867580592593758651];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
