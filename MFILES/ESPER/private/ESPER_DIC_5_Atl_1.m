function [Y,Xf,Af] = ESPER_DIC_5_Atl_1(X,~,~)
%ESPER_DIC_5_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-0.2178;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.0461352500991908;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.70205966855141588301;4.2143555544163850968;-1.7458694625498798469;3.2823145688693173838;-1.4019907861292799645;-3.8275957052383069446;-0.64939634453197148112;-0.59635644059544945517;1.0991464947981508526;-3.419809881745841551;-2.4263800616777313479;-2.0613888437219038963;0.07879227293670501564;-2.9665366288889041257;1.7598885797988139679;0.051522164513011878273;0.1124650755775040839;0.99672238860562822893;-1.9938128039021099092;-0.6047483694906149454;-0.67687984920959687329;-0.91409294965921039644;-0.058449139726885118717;3.4051043540721850356;2.2468896249195724479;3.2075704967867308959;-2.2169300521745429755;-0.0020599544776849932487;0.79298672100634293169;-0.54771494183609559236;-4.3323687925084755079;-1.8112055668339557268;-1.14996688224112531;-0.91495618620819330058;0.19611422552450280543;-2.2645112617995613036;1.3010212288546305626;3.1050896600777591061;-2.2481762968494418686;2.6486433406951226388];
IW1_1 = [0.13303716372659035727 0.29406393197442654008 0.80774614001081501691 -1.4604902608685250698 -3.3469414228974732062 0.84028740635859122676 -0.033958779398751484657 -0.996776704952232806;-3.0806125599912479451 -0.76136884869441145973 0.028761998417386362009 0.53415323819910542902 -0.038598738984652901374 2.5688158984889462033 0.84776188333489099769 2.5075068172002423772;-3.9223339873384790444 -0.72708965978938588925 0.59776799486237652825 0.93650143970726673626 -3.3977839415905335407 2.1465663122804756746 0.55309885258008018027 -1.6368682368154918727;-1.2569170563707436905 0.9855983777393330092 0.40469462195089439538 -0.17254398240257129427 -1.8022324662370796666 0.21575596457425527674 1.1663131169619163074 1.6918653852100971058;0.52111504470620872986 1.6361234986136559133 1.5751516444785926829 -1.1705274911876022426 1.8526254001275845873 0.22282966068155718453 -3.7204283650579985654 -2.2504053646847332892;-0.1055589511097555222 -0.078901163580996261371 -0.43402613151255620139 0.27249692202592690204 -0.46732163861126052584 0.31300411738773603609 2.0301358345805291528 -0.95196185062182803183;1.5961090758702980441 -0.27332019316058825398 -1.1446173669447403665 -0.20950927991934847894 0.46043556742360869372 -1.3316247088444606028 0.14514462733908467529 1.7506515272451439458;0.2412660568381805315 0.70094376870231400734 0.077487359829033181091 -0.71382032124254335415 -1.2695880125905383284 -0.221863086718210617 1.4606927583439430762 1.3443505911708466538;-0.48659816133851568898 1.8863714884058495613 -0.76583936571939625892 1.7860074509039254309 0.19120082554516346085 2.4943019798218930561 -1.3968146080561727462 1.7835133851251960824;0.62094595004750319234 -0.039652306743267251576 0.44292355760913726392 -0.48270396390285891242 3.4948190388450184329 1.7629909765442322023 -1.1467555437083252201 1.2929462669066091873;2.3341967751923227148 0.22561948632642955803 0.14287929373501048746 -0.45322263342348079185 3.5168936681745557316 2.6629996954485606331 -2.1166231861474384957 1.7272741698666314036;2.905723477419309031 0.37001470834554706091 -1.0027652216843569999 0.66198579410020619296 1.76876268519808999 -0.27650046546903755962 -0.8339190958451259128 -0.69910220191286021052;0.52911270691281497847 2.8089488009715579686 -1.5144726077939121289 0.088483999859798975751 1.4542157872886829484 0.53300463734469283317 -0.46679820548654110679 3.3628438405961431634;0.45911572697413222111 -2.2240083235135634787 -0.80678710862915203883 1.3630307302111219769 4.7976770409212603496 1.8110843115259702696 -1.0421204631859979362 -0.38411909912520114663;-1.8239541015708833349 -0.63660087852715463441 1.702488898322555233 0.13850183790389491989 -1.5779526275641653221 -0.96114634920492281189 1.0358131155733882878 0.6988761064476340934;0.61600105270376714905 -0.27214434594912029208 -0.68425116525805529388 0.02172805908615861939 -0.424788048353668235 -0.5957663966617962048 0.19287785035333868122 0.099773255555959769469;-0.95448873683705770521 -0.94592671195094835124 1.5258310960976413373 -1.1604575017373566226 1.326170100347131342 1.1398981246761332731 3.6102895823693685884 -2.2595921451091429688;-0.20380601714949136971 -0.49827768302525959898 0.70577638324182523366 -0.47401002171865647128 -0.54580467243676467071 0.11676233977097263961 2.1121414262664957029 4.3309565558311300393;-0.82805159428817265432 0.23084743501942278643 -0.65805539053924333448 -0.37303181603131818633 2.9689272275172040594 -1.6094850649695064959 -1.876722910962522084 -0.18509068576883444535;0.63335383173663051259 1.7795964931617664906 0.91570133105011564112 -0.13256360478026069094 0.48070010818395164653 -0.77417505152037868754 1.1209827629512980618 -0.56055347204036343189;-0.49840845809248229825 -1.3383437570020604301 -0.2539702331152533521 -0.30501020170762932482 -0.31963810513517582068 -1.4935963904147857573 -0.72328712331615963027 1.3251994608888204574;0.15367720009641805401 0.37649487097883027609 0.14593372212443517233 -1.369310619691512354 -0.8053445109870180918 -0.33817811596828123433 -0.030155466426910613326 -1.6452486053813568656;0.85343893875298082463 -3.1466832828102924147 0.40038797037203094353 -0.42696635481024186598 -4.5993406852741625102 -1.6715914251358716669 -1.6047278391634329786 1.8079872662120199944;-0.28485793963202704626 -0.84126612256637156584 0.021370837971399655325 -0.010962722715620713126 -4.6560566639469929129 -0.22917334457524027314 -0.4213834985953842649 1.2902613276231769124;-2.0673501567193652839 0.8479710123357443452 1.3018072675621989998 -0.1437188250680337398 -2.3330046999548539333 -0.083641255450429843887 -0.56158007578151203365 0.8623334616933885366;-0.18973806811564766783 0.051598824631713405275 0.45518729909969946057 0.0081684206963191126338 -4.0827576247251178287 0.75696604142494483547 0.29468592279902289244 0.45426762359173661343;-0.42068155301770537857 -0.98760291845680192591 -1.6467306814088691347 -0.22051330835653842888 2.6444866648800950948 2.9326226284581662362 0.97151061579410791236 -1.3234678320383053141;-0.3825781300485803782 -1.6548336399310581424 1.3346072346594997082 0.67824320275994276486 -0.9986508229870660891 1.2312801585199484311 -0.72340956756758933999 -0.55606024206209614391;-0.15181744765980120793 3.5474296098017998879 0.14958341065376107304 1.0132763337588257535 4.5120947751745088539 -2.1116586900235057023 2.3752121819809559611 -2.3900618410397207469;-0.57204102415184310271 3.45419472483350809 -0.045434815433139319474 1.9249063658627711959 0.19729831176889855993 0.43032053993705066119 0.66664550624194651718 -0.89929764402168110848;-1.192724475651931737 0.68424324543475723015 -0.53039423537718322077 -2.0370226819872261359 -1.2675488687237130847 0.073028225113817513137 -0.088067596340182685566 -0.56057983678411404949;1.23202614298946167 0.58746917144386001652 -0.27150406687001554795 0.85556158725487685413 4.9024771515785401377 -0.8009518699354613025 1.8326630470739253553 -1.7060471946100654872;0.18361445952124308412 -0.42466518534894759362 -0.33233700439725749609 0.10956616840738678254 1.2375298187380492365 -0.55102110514088331605 0.056831138980433466845 -0.076590394913105250274;0.50847672882467609412 1.3658215668616053851 0.28473283537372395813 0.036051198456734920295 2.7951439794157919572 2.185902287012443157 -0.37292181052969858301 0.25746465515188399209;-1.0677900314044999064 -0.26164596508964577115 0.25411700355544131202 1.2975529807646164482 3.4276135902468669592 -2.6457283229928361123 -0.23339802273839621582 -0.0073253885331938661807;1.0724232442081433891 -0.52126652607483003887 -0.73318912755872756026 -2.541464620066575808 -3.4162437565959073993 2.6680923217810939008 0.25261915718617944382 -0.37425817831246854794;-1.3770369400309951935 -4.3432721735764010518 -1.6277068106147343229 -0.46094867899426045232 1.3018761711016126892 4.0377759211566921493 -4.3777449489322508569 1.2593841846378217575;-0.6488991302082853796 -0.44410607067670948567 0.31788914699989495594 -0.65911695321567020933 -5.9865950572861255097 0.9441374439564643728 -1.356091139479742802 1.2294332291506551158;-1.4227489417461647303 -1.9845204308289758899 -2.1751761511058016474 2.6352261517419153236 -0.35361206810844436621 0.23979410779952076149 -0.4231046243948347052 0.68548760015376630772;0.88206691084397781388 -0.51064326848508279078 0.40583387661595177187 -1.2771990021943899762 1.517489254648947572 -0.62575873043312502109 -0.76268654270733760026 0.65329248388087279853];

% Layer 2
b2 = -1.0374843933203592439;
LW2_1 = [-0.081009446490766010007 0.020240262370635486028 0.25999603116646502476 0.089409883253901561995 0.0034788096164029471552 0.0052965905350434213522 0.075799766465640017188 0.063051213909844347483 0.011708648374215611943 -0.054190002522233764182 0.020725190954137721194 0.025425515798930060224 0.016732675178303773461 0.048906033387138718449 0.0037636528596135866188 -0.59906406565870429226 -0.017088196772838827597 -0.024467744509580963835 0.062621341751811748777 0.10278786271183611156 0.18429770084658789187 0.094648934976015314247 -0.018088092308769874311 -0.27318940013830611546 -0.071101927553862076525 0.40210014245772196517 -0.026017877447754956394 -0.073515049338501836651 0.02909391146295771044 -0.0099283319810906604103 -2.479983774285376974 0.12747513943733929098 1.1094425303489621193 0.10478460585168006269 -0.30144440388427651278 -0.22035226142701705432 0.0093932878506405182578 0.24370759127888433349 -0.0057235695992383511799 -0.39940104175879143078];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
