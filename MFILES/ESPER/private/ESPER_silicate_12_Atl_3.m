function [Y,Xf,Af] = ESPER_silicate_12_Atl_3(X,~,~)
%ESPER_SILICATE_12_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_12_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.28];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.0470499670650231];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.1774478259948937264;2.2288471738883108841;2.5516408125856933076;-1.6029088331253618094;4.127612518396671426;-0.42943308040936684078;1.312882080451530209;-0.24414875053763582247;0.031246005476643180093;-1.157182395068757641;0.2794162724511226048;0.06261370329415362479;1.5927114175262480078;-0.27156355158337025513;0.14823395132656017048;-0.18166907847006361076;0.62236075434311577403;-0.55140251425753417092;-0.20468449008294217761;2.0448185440726893702;-2.6474389716106694337;-3.3423907493697395665;2.2436227318054640101;0.91906043703551076884;-1.8724547293518447599];
IW1_1 = [0.31439286079719330758 0.35461941629942256293 -2.4693098191792262064 -1.0829814433417621622 -1.6876706456115944111 -0.31840986201005494483;0.2415113162307104544 -0.25833946981238609109 -1.3940825488608730165 -0.11151133652644691641 -1.4137555174285822979 0.54571175237067881536;-0.88245267458212317546 -0.16759911788760395446 -1.6377922725142572968 0.36326778931324377186 -1.0427053605970455497 -0.045302915855305631032;0.53568954494378051567 -0.37608351126127986808 -0.27136718591245279075 1.4999112406709922407 1.2348751243895945695 1.766284915100110986;-1.2828420879740698446 0.85477378377951818145 1.4811982463589652426 -0.81262007337953234831 -1.8193674055776261067 -0.65772711218269086508;1.2634530716858736188 -0.95642651353368579592 -0.5657584889614474255 0.35091636156802041846 -2.8283894293511155915 1.1628789238997849775;-1.2830984544552712645 -0.35237616031148832896 1.1735068958740129119 -0.021392253723758497541 -2.2942120498899134518 -0.6139614066624888844;0.87478783082792765935 -0.45281096263555298265 -2.2153972090846094645 1.3599991851243806718 -4.1577351020404318405 0.40468571732889241366;-0.26801748853389617544 0.1717385410498735443 -1.4214778571735011692 0.69039666214450912118 1.1299614024435242765 -0.99262934637297173257;0.81228827558211835758 -0.33681590412435824522 0.49917195734995817302 -1.539694047051158865 1.4948634421625528468 1.197592094062614354;-0.001118413177576833839 -1.9134387398465628749 -2.8267481992943617186 -1.6322961701289910863 -1.1433684350361037474 0.6043303790548697485;0.19309455595261332261 0.73009476267430684082 1.3623787352750951207 1.2249387038776948788 -0.19686012042102846165 -0.54794829340912420967;0.10505758440644823171 -0.48988521205204010878 0.15727382213859650295 -1.4237907654190924411 -2.9142562590681651002 -0.43253402337338692218;-0.63384589689191384032 -0.48088871136381688975 4.3348345830400427658 0.43744508026287787228 -3.0162994958478357432 1.8019225980815358756;0.19208340137967377936 0.27762125653592778507 -1.1480820629870633898 -0.70037505654295251212 -0.76539761368549230625 -0.50828266832332713587;-0.2466802530478177935 -0.16361371599259011411 1.1708706426668682443 -2.159984918192094927 1.9014798189287624997 0.0063070034776943877802;1.1745446567531319104 1.100259561854130208 -0.26898797701779608715 -1.0106840614836472003 1.1752703572377085628 -0.70576870015608783593;0.15226258385776533788 0.037555848062695545986 0.082596879612837972862 -0.47206133687662016341 2.0315806681201915573 1.0622356781358259781;-0.26622162515369707236 -0.95109227980259236634 -1.1653611906263763309 2.4596287726453724964 -1.5502474979301374969 0.47044181933145567953;-1.0270405386668124414 1.523762777417346781 2.0564365594953422089 -0.15372668607656139739 0.52997395158174176455 0.10541304896605210861;0.18507695570422053044 -0.096068408342050812254 -3.0438918632624134553 -0.64205070930751750868 -2.424114109267818673 1.3587620644928883884;-1.5832470394765714161 -1.159246851136310541 0.66643994501646219852 1.0904271838041970089 2.6559683235096205323 0.68689459269995423174;0.35610554174716779752 -0.34426824213269030528 -0.53398660991868340808 -1.0054868072397495915 1.4858864648204126446 -1.6809105545642859525;0.37985943616239076226 2.8198820371809216745 -0.39842184954368864425 -0.20929739677877612358 2.8237724840068958443 -0.062728692405349700811;-2.9175510056632290024 2.0204356311269151547 -1.9260620603019107389 -1.2746229015350483138 -0.88067167732454387785 1.5467935715823273313];

% Layer 2
b2 = [-1.6415728434094685184;-1.2220120741615774218;1.0374519796786061399;0.61874050967776850207;0.25796035546640622149;-1.1849181254239953276;-0.19173944222057670572;0.23273582515740165455;-0.66717526844064567459;0.19898343414055527645;0.20604863396077180426;-0.13088023818881394655;0.29572217964768698906;0.030639273291516395947;2.5605880735182635632];
LW2_1 = [1.3627562586567405489 0.63420858310807648461 -0.45572472595504998072 0.77866201723388905886 2.0522348975822435335 1.0936574608250058116 0.72592023300925923035 0.11669614036611355989 -0.33954921302264434724 -1.0532490063236166211 -0.55012511789402429585 -1.2472212657432326655 -0.12170452151199137591 1.2994736975917624555 0.77982733291540162757 -0.91131208278223230224 0.79534765044710287185 1.4626396531416625546 -0.56319433940717433806 -0.47118277063968333485 -1.3715642532240845952 0.26148804849687201646 -0.16221858883310225075 -0.78830139659029296872 0.47884242089320422364;1.3553573850004676515 1.2049863330469285927 -0.64653276330479592104 -0.34277627269550475786 1.5278482767941443665 2.4585842480222086515 0.33353157826361851113 -0.31521253433125473453 0.6057109610317220616 -0.049134910826020984642 -0.52293798704508709374 -0.93912352938745125019 0.53742875321114580434 0.8170589737480777881 0.45777716214906988279 -0.014430322775744849201 -0.65648628950115228697 0.32829608491610412502 1.1404420343096943746 1.2167687902166424152 0.38332988255472044692 -0.41262067312175632061 0.56793812818660494024 -0.40066375410111521038 0.10888915792509226699;1.8802964039989276124 1.0104618972050147807 0.30619588232525629667 2.6842270216083470302 0.025394871676026515434 -0.032573755982547802912 0.84932874760319443386 0.13611938485644728414 1.1717286453164197368 0.35725390492191827496 -0.028262781463859232983 -0.54672408300842223472 0.24435681947518383961 2.2526086282691912821 -0.28783287633846738052 0.44634485990849698256 -0.88108170728746404432 1.3475292820190902798 -0.68132805638182858399 0.76661578083750581136 1.1960558827162808271 -0.33076109285667532056 -0.39284021218126607966 -0.41284764570064602651 0.32764876579418311664;0.26009088588697698574 -0.065827476184529776226 -0.016520014187952829915 -1.2898131983190579408 -0.91041999460186107118 -0.0058341463405746588761 -0.58111927586451828098 -0.60679714191491107567 1.038430103187319764 -0.26766278336975551921 0.015117202569936712131 0.087900642483436097763 -0.043816165254339616009 0.28853476190746590868 -1.1109967147897710227 0.33954880440436735478 -0.37567714068436691699 -0.96937032302512193827 -0.42600940392067460083 0.27453565828554582495 -0.80577358186895065018 -0.10555405965296983661 0.20422559044969085251 0.32894610777841082339 0.57761026441276885901;-0.70384068805197708141 0.63238265106913826852 -0.014217222387370789805 0.19566124202584564418 -0.8599772332637893868 -0.34103049869190671384 -0.27069850910183601567 0.80219899295827468144 -0.28428615546984120632 -0.81304647866104995391 0.34695820893557577369 -1.3578381654764155595 1.2536770592552752834 -0.5354487593873431539 0.051911822234914625773 1.5665704321051814318 -0.8469464944713915866 -1.245608214344676945 1.7065302951257950159 0.054225637587490521652 -1.0001542594574808209 -0.65703123157671206034 -0.045484062341068567936 0.49741655883218571788 0.24288845598284952709;1.5888895184156488494 0.47460648093570262374 -0.69088178695344937275 0.8245466365832798683 2.0308323481755752304 1.3711349588192920379 0.44526904879431000728 1.6860789919896195244 0.092260191656702433827 -0.57601248523882808694 -0.51781515440549907847 -1.2260217030546860517 0.071791047538718913423 1.1652548575218948379 0.49694229678979140452 1.7657082634388272524 0.53056994887529618232 0.90147970415515166209 -0.56511733826132926062 -0.13536744395132829788 -0.61391422550316654405 0.51926229407924073822 -0.78729805296257782121 -0.55985570165835307765 0.37503156169857848612;0.18369837263350433099 1.8696979696555751094 0.068833605518204860063 0.050146167907435659772 -1.2924801774667102894 1.6595906083981080137 -1.0184642373646222158 -0.64806927101659239643 0.87044487784832980104 -0.13128826993228648323 -0.44351460283695848252 -1.3341082383583799942 -0.79620623662423262168 1.3553155594109218551 -1.0665216217064656945 -0.064932496943152326341 -1.9001275235029739807 1.2930207538262579181 -0.52674624284740334534 0.65791216245241646021 -0.83619538214465449766 -1.1189279194867451928 -0.52381728514078018666 -0.37855609717879379339 0.96418600205527071889;-0.61889257866634028726 -1.0155161283858420429 1.1934268460092509745 1.5687404353904872423 0.95901043260167895266 0.34948807455153213519 -0.56282560806056847191 -0.22237259441896073398 -0.77440912532653327638 0.078987116654471806187 0.24927959932527635201 0.89755957712997413989 -0.012007119427160845015 -0.13451958634873920073 1.1317440161079264094 -0.71600224766031739243 -0.096584345830176804304 -0.25472430447590327374 -1.7848611396227860304 -0.008601823706608467679 0.66808917874646378543 -0.51346854172164202446 0.28417783897245441072 0.18558831937228606468 -0.045530124866923316063;0.42259493535879311121 1.5872067876283864063 -1.290832358018122239 -0.047863882818356129345 -2.1783930199381495996 -1.2385104694647883772 0.16985229415652958185 -1.3976964512910292626 0.35033173202368278476 -0.17824302032535085938 -0.77662188424118960839 -2.151929391090755761 -1.8048093876836743821 -0.38975542560087017563 -0.62724301538898907804 0.45652946924305704002 1.4792970060168455504 -0.20024429635848975395 -0.12460192480612279631 -0.64765640043194638853 -0.74559432726886221143 1.0536821459088734354 -0.8024395526316935312 -0.97827248482854678446 2.0943557131941714644;2.4407851771905635374 -0.60209102890056109825 -1.2164772055223707081 1.2500152326964919514 0.4108924183289565657 0.85867828255319633701 0.70104453076714068338 -0.24369854623146172679 -0.04102392026639269107 -0.014958073077947286328 -0.72613884761478675323 -1.9606844839677595171 0.47333642944765957905 1.4880027410661629261 1.1766335250176143123 -0.99122030185388720902 0.39034517078893693487 0.89471692576518713214 0.68034534779760791334 0.7174392255798286433 1.1074801265555858087 -0.63072181284832806725 0.25063389023274057488 -0.50260720629782862368 0.81360610680871581213;-0.17992014501972591889 1.1251789555198792314 -0.55251265212245970204 -1.2886002869264854276 0.82919142692519942628 0.9007045057006465294 -0.13162258209969016076 0.50375191335753566335 0.64979377134269511451 -0.042940090437812619695 -0.021585830242388737849 -1.0093975530476497759 0.62207665177594817507 0.24539528184540945754 -0.25757087082875296247 0.73057280204206997976 -1.1183555473751514153 -0.7298236562290953966 1.6691194538969260641 0.36842682740857851664 0.24817460758154982758 -0.32076295118623310287 1.2737100287017963929 0.26789510751391021337 0.92481880334270427646;1.0735294664104435558 -0.43602898223404817912 0.28437605901636009431 0.98977940656835017297 2.7294468398090607764 -1.0191788828391208366 -0.31657476167846332338 1.8548099008748886174 0.18892210110547913438 0.60116518686252840009 0.74438950916545010283 -1.4288337384789848716 0.71755145208776094368 0.2147890634638816576 0.52897925154769231959 0.66667825420681359194 0.014691490522345225858 0.27699540478584339098 1.4323125396411793275 -1.2186599870849583738 2.004078858487483572 0.83796325219654754779 -0.52564454742860189373 -0.14581043035713645017 0.92465505103011302879;-0.28482309110102860261 1.3626566575238332479 0.079726987908931831739 0.26332203156894296026 -1.7982766673541288327 -0.76320758832409063555 -0.79641531583998748101 -0.093840304151715125958 -0.57329279634886531891 -0.61806132911605726754 0.23068281400200602027 -0.63188057816727749572 1.3383088522420369948 0.17575920533494893139 0.065662780405417647822 -0.038027259014685364791 -1.7764177397248348544 -0.80410219714900565968 0.17548844398302718139 0.2247965057221834595 -1.2051231582889572191 -1.5301546945705226666 -0.96433980141805331066 0.4561046533599198427 0.38460359580066399987;0.35781489807033473038 -1.2125175109176031807 -0.13746063398551383594 0.95329461367099876945 -1.8476320971505946211 -1.0733202150747775949 0.72980718520968668184 -1.4129618407294226579 0.30918057736991472195 0.25020448198272654539 0.039574049635830152449 0.96669530578456586145 -0.63241100368412161981 -0.30077220707791824106 0.099554153623289731723 -0.079720207204356546837 1.8064357833259236941 0.84406530010046609824 -0.56085521994022569103 0.015906452116510205741 -0.15475326280593759698 0.82005632420161822527 -1.3482964844410378902 -0.54252585133927366812 -0.86637380303524191838;0.51557934402460758871 0.55023793685545185905 1.2088355856832673219 -0.87229155727899343464 1.3931426044070995829 -0.74887107681874165444 0.24668137794352507086 2.4246462069530503314 -2.0569784242041833089 0.129297877695148139 -1.8364473239292231632 0.58338502146521409308 0.4922052203990221475 -0.26568786265799232416 -0.34659026860749830856 0.19532353923149839425 -1.2427866835398784229 0.58342075304049223483 0.38186495702836065202 0.39458626657216816502 -0.19077048182885886218 1.4415403039634719917 0.56228713342941638587 1.3673978606597310126 -0.98032542453944659933];

% Layer 3
b3 = -2.4633130473981723618;
LW3_2 = [1.4441188268506706116 0.87285346090656557028 -0.28362602124422992 1.7485257900909367823 0.43567522628434451892 -2.3337380775497429397 0.87543463832523626955 -0.57559400620154987926 -3.1359792237716894725 0.8035793989589281594 -1.2038710674125112643 0.43903967521021874942 -1.1018636961933008234 -1.4066482006783582737 -1.4366191391711444769];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
