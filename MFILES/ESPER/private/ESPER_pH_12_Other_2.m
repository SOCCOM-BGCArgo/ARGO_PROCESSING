function [Y,Xf,Af] = ESPER_pH_12_Other_2(X,~,~)
%ESPER_PH_12_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.29027805193777656;-1.8170752463348325279;-2.3321123789099260648;-1.8316094028223868229;-0.50262062132454732311;-1.583814606339906339;0.66942585783677888145;-3.4924994885998965621;1.1864437152286391175;-0.067752016452945415526;0.43330429800779551863;-0.1607313625976350413;-0.78923247717007549706;0.29602327640074371784;0.77272019617741360964;-0.87553481584061332299;4.7035437711206604661;-3.8359655283230660316;-1.6636189392981910462;1.7361075022405092483];
IW1_1 = [1.4446378991018302695 -0.54869610630459575429 -2.8368844640940320545 0.67963542794044573547 -0.20149588072360363755 2.7184126622958006969;1.675506405427368728 0.35946973439442841958 0.37668247735640547624 -0.52251652354509647846 -0.6752758359074242378 -0.30038285720765639519;0.41885760307580077733 0.47152745713826360596 0.86389615801099084447 -2.3616420042197137086 0.32737325206582834625 -0.4473967696017040474;0.59986413530350424228 -0.10581990150838697928 -1.4834483096903936516 -0.19680781348469369996 2.3528747678405990129 0.13580431416718657944;0.91950313896696722615 0.31939712913289869389 -0.19172772967311088599 -0.38766412529175980906 1.2098093328044570161 0.27152212512729617666;0.8753273495078092159 0.080369132847866286973 -1.7723595578601023526 -0.16689081469238917221 -1.5432315551738300385 -0.15409496027858318734;1.7340653844384843474 -0.14548066669798315198 -1.5245827892860852604 0.94992718450720881052 -5.9909963314554435243 1.9234290212294187228;0.076594156920976708136 -0.42981504142270265945 0.20156455929834582452 -3.3149628263488573054 -0.98758102802540814746 -0.88447104620450622825;0.63765654467960475316 -0.20810828328746147631 1.5119556084457512757 0.1149991395417505613 -0.755578315974967607 1.1610355934496769947;-0.59538679105120861923 0.45579429419658284983 -3.7311229979026085957 1.1902981945349082604 -1.1892787712886023765 -0.67319268525921993618;-0.34186617029416060953 0.050297769302640855937 0.89828995984926640617 -0.85978154015714491898 -2.2770379970073491016 0.79011697678305903292;1.0464643889594005266 0.46336748025736318457 1.7738438140417591704 -0.73321201722634898879 0.72582305730910146035 0.052527807704751246221;-0.42815121306288062009 -0.058799658935408657956 0.10322739810739546551 0.23700013455836582699 1.4986282234234578059 0.7969330537025584027;0.19412425163750648971 -0.2179283854362737971 -0.20913196560442387506 0.15238142901442036647 1.7663361111142203974 -1.0789573678134889434;0.10980266459352679143 -0.49581189515989287919 0.14164966086970068315 0.26509787353628977424 -0.91996252351934726388 -1.234369523057416318;-1.7201481545548833463 -0.31092614324632517064 -0.68660188139683575592 -0.19373878268195088292 -0.34115973831164692065 -0.40758765713716349488;-0.22707131906184285786 0.42315998329847620552 0.12135054095404587682 3.8578095371161076343 -0.47941799149877389885 1.1705224207025968219;0.038819404858189819618 0.1213426754672619623 1.2669338063175803466 -1.5414118333835418184 -0.78920483596315105235 -2.570350731231131558;-0.95212861750962840546 0.34756413350670439799 -0.32347735938877997253 -0.11021571588565415301 0.34946201940132942676 -1.5256383549066403482;-0.29538807857643639698 1.1353876824858193384 -1.1388246679578748477 -0.10005191395464638204 -0.094014691595387361867 1.0811131527712309897];

% Layer 2
b2 = [1.1259625642207189422;-0.94554569343127603531;-0.32610714825946590656;1.1423526481428114554;0.9567461065011956256;5.7342270863898647804;-1.4704227377930640941;-2.1148523887265056054;1.7824705294142353385;1.4413449574918868468;0.43156967320390371423;1.1552878804104804722;1.6416225362396426046;0.24301369743090381337;-2.3250931540698673849;0.45071589886202356734;1.5212230452175803386;2.3340833081729068788;-0.068176430343187030547;-1.5102873604242779138];
LW2_1 = [-0.3351714669642014699 0.94519419086921729889 -0.2351851525519714492 -0.017089625622518263282 -0.23136552035047200371 -1.0069341303597791892 0.40204110418327670962 -0.012071220326554580812 0.67061523043468107552 0.90939719498862114921 -0.40820148224003321991 0.087884106512629137087 0.36472553694972204008 0.12786166198070550437 0.045059256612542938902 -0.27026869408914633297 0.21815805634412357983 0.38920642474458055915 -0.30935694645179712126 0.037035961845618407817;-0.089997944769662441278 0.068278196233186469466 0.068230819505449513684 -0.066267894985898190274 -0.031969930903037145631 0.33352284627439637843 0.30659376583132696981 -0.15388458369432650441 0.12362514512798213062 -0.4811535871250530727 0.083528263748935974164 0.02229644780644075841 -0.5256803107630980687 1.0921121485090956593 -0.057186890010566801545 0.047789148812645704245 -0.44474924916189245705 0.49118751789315279188 0.27348304540502282878 -0.12237986852180829378;0.37316684900137853109 -0.55899458319034922571 0.14101768316553198179 -0.53499099333621846775 -2.3655171383334057111 0.33534531676316409188 0.030962453858549024432 -0.049090181771194181526 -0.060174424880064705801 0.18083707509875879271 -1.1490544191619076475 -0.77172960883068397742 -2.1217204770841089356 1.7829776909607402136 -1.8941149527807765729 -0.15140195212562995719 0.36048198851479823501 -0.78264683916763100324 -1.5559171109963687574 0.165202847301364808;-0.19860416354768489766 0.25385633035183258199 -0.083401393013240190943 0.68527828383234135057 0.69606465310406140379 -0.8740394782412277408 0.23818146027273057186 0.38264349557919524747 -0.16380064286556228481 -0.43562604232612278654 0.058700188051205456907 -0.75020009910728702174 -0.51011826034752838499 -0.43688893569349701584 0.12248953178957955323 0.53113242823181483487 0.65238160056461047542 -0.0084363406207337322817 0.11720076629306866445 -0.91725952510489372482;0.38786454935795083854 -0.15505858451698234513 0.15333552199540431693 0.032545693487107028863 -0.57530124784925906756 0.43826179404301907061 0.017893677011416871114 -0.19177568111441498089 -0.28033673468149750141 -0.47099459952530803308 0.37498174051788285555 -0.27074037922587601557 0.40455811933731405938 2.1106191742709872194 -1.5557847038911873927 -0.063574799015047436801 0.044183745665629076127 0.12600978320546665779 0.4481360474973646868 -0.86947624755317520773;-2.2580933531717430895 2.8158792141507520412 -0.21373917517114759956 0.638997650615629742 -0.63735288660740474498 1.8550524719590828493 1.1283549439539983794 0.043635475231774495386 0.84759331935018711324 1.4099022602504769353 -0.27133477917242282418 -0.11579954542922939187 1.0218551419852437423 3.1932981890694973615 -3.0304810617190551802 -0.45957929966306493297 1.9654851645851618702 0.9982322019989406936 1.9861109185553627032 -1.3762495555313427609;-0.119726742376625922 -1.4944418575449947006 0.35421355970788004353 0.25562857593801130429 0.60319164742978803595 1.5470061024892924895 -0.52197211131521692451 0.48341931025119611043 -0.20704901890502641626 -1.0949789647514276414 0.63646928745673692074 -0.21367056721599703151 0.20248515703257860543 -0.55643405277325075353 0.46520570030966634789 0.23416056481818736668 0.012079202216162283207 -0.61295086951097454975 0.49397105897952608977 0.46244834783561289404;-0.17340294270601586124 -1.8718352366344359616 0.81595909397596899648 -1.0022222296548353171 1.6466616545380927672 0.79526281824073752347 0.16918527144991152289 -1.4110023276464174202 0.4615227628792149539 0.7969492308922312418 0.69328347278737434412 0.40778807895630664326 0.65427910281867607267 2.5600854656517801899 -0.76550648730624493155 1.2937210002308690004 -1.8460232767599704662 -0.85362492997742334122 -1.0133519263076868899 0.085550913405532044709;0.16613804327574180353 1.0810517582492868982 -0.29150726031756091228 0.41066932547562584599 -0.16542337737926091079 -1.1907194852905573779 0.055317559410965944089 0.41929751067950871146 -0.20542335993763463642 0.73489205174001570597 0.83263698839621436143 -0.044088925932775420435 1.5458855149663819351 1.0120087955373506805 -0.69651360340463097653 -0.44184223326152044509 0.44629435470906719807 -1.2646293193299291691 0.65944118914952576382 -0.48387327268367708033;0.56812296283432761612 0.64940515404518417419 1.0121567680944998369 -0.72636285982562109886 1.2573211271322728422 1.0219056733492977163 -0.84085121836792897643 -1.9626023455721257616 0.73324798470522212224 0.84273588869479731933 -0.3753407214320382268 -1.002492025624325489 -1.6909879110323842166 -2.4913308074833073746 -0.082304491578890151549 1.3085743002968897031 -1.4429229494901751885 1.1680804222899681122 0.82757644304746891262 1.473369894616156861;-1.0074238212462469644 -0.88267473063966273017 0.40506263996451258302 0.058295021722993722868 -0.97625930220887779942 -1.2876760604010024647 0.80975832972507044705 -0.79536477248496573189 1.4580028132269811092 2.1883924552993421209 0.4278429458057964041 1.5071531740649215525 0.81990332785540898097 1.8083377556442610246 1.0716212809072711565 -0.32054105604275234809 0.037436964502070464722 4.6632420805595184987 -0.47052746537980605357 0.78460792817580504721;-0.13073851574521513919 0.14919209910170228017 -0.071949030158116114575 -0.59745777229468488567 0.8454492933325038484 0.64626141453607799381 0.072703416500204121053 -1.6555904149695992444 -0.20984384630742936029 -0.23130550857926160391 0.33411055167077247097 -0.53071172402609323449 0.32846020509425938316 1.3789556216986265103 -0.26334006246835406362 0.5375033952630134948 -0.8416788868516542621 1.2786007581717391268 -0.027774523818314165308 -0.5455618577623950749;1.015399074442620897 1.5636878624490646583 -0.22915536060439739563 -1.1245699902623835786 -0.74484637880576154423 1.0909236842100220599 -0.65644065971082898869 -1.6483826535908652211 -1.4175764051849015779 -0.51178835742935246955 1.0538887624120760744 1.3514653880326217283 0.27531529826465073185 -2.001417574882529582 0.20058396942766651416 0.069657426268950869974 -2.37041534064128534 0.95446675971033168029 0.2582132565227318044 -0.46939863974066620145;0.53739427846393161836 -0.10181774039028927692 0.46662424541166852565 -0.43615674507167084828 0.48843959453463281495 0.17297549052191932284 -0.27226714323428485853 -0.079918677851747083052 -0.46322785985646641738 0.24123014662988404022 0.091124422563095497374 -0.10453841209268137369 0.96717174993435928165 0.4314160860866693703 0.071583869426728605201 0.46163328443816059599 -0.35764103193971619188 -1.1452006168630193272 -0.42638519083594067505 -0.018803406900117322631;-0.67693572473966368008 -0.85201626778392125505 0.33818966089175495071 0.6452678635645046068 -0.69655817072768144715 -0.71999157963605564525 -0.094043805068895564014 -0.090380718742833696111 1.2514657673068378951 0.68319805000643596404 -0.2922794467809362029 0.3941633551331397145 1.405500094618128859 3.1120192609820782614 -0.95986571218541805184 -0.21216292951787224519 0.17513928150209831514 -0.60530525583641447973 -0.24580096353318417468 -0.10254317997435948018;0.11787988040557328961 -0.20664325291619389802 -0.029782335858167800768 -0.10949834252734740037 0.14233288371810362549 -0.074227152869087112408 -0.38955371912014463698 -0.21302705989538678333 -0.26908697394606567732 0.24151571763712623153 -0.43065676938455926814 -0.020560653115741459734 -0.39040482733705872409 -2.0128894935186747439 0.39999165520593210621 0.09387036774955259677 0.10399329270714460782 -0.21440935426238585948 -0.29915655855984263356 0.17531019806627085034;0.36354020287700206104 -0.078142280413221604229 -0.004356217330457361897 0.33065720378241669763 -0.30500781089887368802 -0.24071612829954011636 0.040957545872791004116 0.64887617671239405936 -0.36294292267356070836 -0.29124681307329042257 0.0042786979827543567684 -0.26894269990392621894 -0.53638891036031532966 -0.88845227739237431219 -0.7340595719060390989 0.087136926561717009676 0.80083538400896514542 -0.21491720037267467158 0.46879694606644606303 -0.84583052521845292215;1.3825664281101908148 0.83961462973012046529 0.13655622806072734154 -1.5597488917876294323 1.5578429274460015019 1.1488459697336819154 -0.36919919072432250129 -0.95706585855574555222 -0.93075857330640965337 0.53583505144544651966 1.226760099087328415 -0.38946577765198731047 3.1051015243788353537 2.9885987126182071982 -0.54009169904397591466 0.44975995064667528833 -0.33391981852079194448 -1.5610769354957616528 0.71337582310651614925 -1.4419323677310216247;-0.23298801704450833316 0.0088203381523938445552 1.089074696330081915 -1.0023873871460691198 -0.34902794199148318155 -0.93370899143938412834 -0.22902183246003310346 -2.4248996595152267908 -2.8267472918886973332 0.10428429524827756425 -0.24239659494648935212 -0.71068238702340713608 -1.751421952255922676 -3.7326393638711721223 -1.1744607248884839645 -0.94653928360581640611 -2.7914931660223794019 1.1061162955080838799 -0.95498217853530009691 -2.2568291443936372431;-0.29765034991800298769 0.29716095152147525837 0.59332659614640026469 0.54414168045174082788 0.50079763689275336169 0.28327618322535802475 0.22662864865866230724 -0.21762804126429957652 -0.683193212303800812 -1.4269830539632057942 0.12402629408779636266 -1.9874613668723002391 -0.76491947143103566908 -0.045341552015685238075 0.1613208240563985818 0.41153888928615434128 0.21137608753446882059 -1.4090689081535630045 0.057575886208647134024 -1.4681607345170846202];

% Layer 3
b3 = 0.82514937589204673252;
LW3_2 = [4.6190280097940057402 5.7358711085014721931 1.7907198149887149086 2.0673731460932707193 3.0967584676003623301 0.57211155086299692041 3.0017013536687966457 0.59321012291563168795 2.4377567414651739597 0.45156295120867950832 0.39251162289105645531 -2.5217022472495207452 1.0392563218848018813 -2.3151129727613879439 -0.93254236226146036692 4.6194942491988317812 -3.0247188039713863716 0.8619906544601685372 0.91396116003198446531 1.7012546723633275025];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
