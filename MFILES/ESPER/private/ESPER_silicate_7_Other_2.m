function [Y,Xf,Af] = ESPER_silicate_7_Other_2(X,~,~)
%ESPER_SILICATE_7_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:40.
% 
% [Y] = ESPER_silicate_7_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.7406640132066559801;-1.518606911939962556;-1.747132529698894432;4.1680310214131743862;1.5904336595312686953;-1.7550603310813466251;1.5015517653042727009;2.6888928390916668754;-1.7906057471485981036;-1.9132221426071482906;-1.9218249094695907253;1.3456743038943945745;-0.72723949085817340965;-0.48805152349084524044;-3.6072761527213184074;1.8108525169120781584;-4.9792300083367182495;-5.1153675629256705193;2.3378790535551345897;1.9388341953378376292];
IW1_1 = [-1.9971781878436567492 3.215936950713822462 4.2102759531705178375 0.19188309471021947061 0.10002693313807457798 -1.1469729059428177553 1.5000820675633301793;0.47994655784366446749 0.028289618370063721736 0.75805276415792433031 -0.054819866173368911322 0.54404554881250155596 -0.31540800774362626191 1.5569830434081854964;0.12582956260662020442 -0.10083451942122897971 0.44149818950380959048 -0.047322875061059782587 -0.86252035270069116191 -1.3546464859161739813 0.078516919457636100144;-2.1692277279727831818 -2.0533118966315919707 2.8074808341766228637 0.20635535825417597455 1.6692499741552442316 -0.48902004660752590448 -0.79661341797456319824;-0.82455106330300953488 -1.3692524345462147028 0.29712745286722491711 0.85680729390744381213 1.802290089166892928 -0.47938258913156422958 1.1120026440527090994;2.0701509261232162729 -0.26292846462950381081 0.97591476011204369989 -0.32494381231965463463 1.7031492360006872389 -1.6004479613841140484 0.23411288823727460784;-0.37427742459226809313 -0.50983652640779797416 -0.62549280036464915966 1.4016537336946284231 2.656652065685223274 -0.20423124806925999075 -1.4330057867727203913;-0.26924575740489503639 -0.11910717666669927428 1.0596410600250798506 0.08501376176772215687 -3.5218932139934184811 3.2130762575149809379 -0.69433058621902477014;0.049907960754902842837 -1.2032569616733814755 0.92629843909995823736 -0.35269808958888226869 -1.1515597976838993777 -0.70780740076315507014 -0.44469265651709033449;0.49501502033719513296 1.1277748472084700992 -0.11419971753794638802 0.91603707924681065933 3.0468964224574657251 -3.0531008872681217881 0.63723661945083298619;0.3246293706537342616 -0.034107580216804954387 0.031740325491260865109 -0.25166035324630953163 2.3411228289797767488 -1.2871870595085148636 2.038679915709552759;0.65004709411611072412 0.10899531050600394511 -1.232274888652235223 -0.54912070871681095685 0.73613980513726640087 2.0159202986107116473 -1.1891871904156992024;0.73365803521738637283 0.077441253524455966328 0.70147778479570943588 0.19170288335236720934 1.8287022916552728713 -0.78044037368646035358 0.72782225453108206903;-0.63988061315253408345 -0.82548230490106810908 0.31068964005262073025 -0.61680176332539582429 -0.028952422577453937325 -0.56198899733828799885 0.59456813335077929317;-0.38853398290625829059 0.19793508401310055955 -0.62649314209754158878 0.099016962319598084141 0.33787911632992961852 -3.6913886219433909019 -0.41991857107327040799;0.39296689245295141069 -0.32549533532666452551 -2.546667891260112615 1.0397669899253327852 1.0735283886268338627 -1.2552354054738907863 -0.3213417812092085879;-0.12978375526702326526 -0.24394336411536204912 -1.1401598353870914249 -0.94872261940406621417 -2.2313435332448876558 -2.8809955371878861463 -0.20451656354966221696;-0.46787457466781129378 0.18198690868675151955 0.99847980879236641893 0.61755799976782532745 4.1177881813871639594 -6.3296524263685851608 -0.84722307068117774786;0.24012742267889672365 0.98487217168582386062 -0.59556445824554860025 0.80973781197415595212 0.99248301388646287258 0.98830090801803183176 0.59254608356698812432;-0.61455269439112059082 -0.43197585611441230435 -0.94253254466935809663 -0.67064059394936326175 1.7380591272751615417 0.3752021385033098011 -1.5334096865486033234];

% Layer 2
b2 = [-0.22416059757228465332;-1.8582676503486645903;-0.22447540334246404714;-1.5012219380862481533;-0.77378750278238694893;-1.6136696600815980673;1.7950600020653377786;-0.53142119053962177944;-0.1946311071067675369;1.3013927366778377248;-1.0387881692818332624;0.081995711995825865115;0.88332736630408270617;-0.95870245368572148958;-0.36214930478067175468;2.4135102511106896195;-1.4437500157202143303;-2.6412273805696462325;1.187765019221485252;0.47461229649469716119];
LW2_1 = [0.054599568843394084838 -0.033955840390655855909 1.1079333961796486996 -0.018876067673339883696 0.22228925608732674757 -0.029890161543351018852 0.23224974658573888098 0.16450793022048390557 0.37652265961324621335 -0.3527005736271544567 -0.16105542830874827742 -0.43007864254119754222 -0.16980976217582713361 0.13873898388191330255 0.63913857035069721046 0.034560692566147188654 -0.4397659563749262146 -0.65338478651258347085 0.54207858069043568516 0.11064034427148315698;-1.4462478764567372469 -3.7165137231726577127 -1.5097094667916433064 0.10900874700811510887 -0.29834191825415834476 0.10916117051749180122 -0.39619000823561628666 0.49717226270080117079 -3.0074578598961250187 -1.2681726995663877844 2.0173659142197091221 -0.41658637471163284527 2.4441554717724094381 0.39038723835962624298 4.9231425751651354261 -0.60749266819710923127 -4.7570547157151432671 -0.86324018372122757192 -4.2629191571136297867 -1.316130436390542835;-1.4444865223225620277 -0.33809729040824609836 0.32730658383547334145 0.059989178532847256542 0.039200596588038982837 -0.46306900455220367796 0.45793085992979537524 -0.047185810172152363451 -1.880106965689042342 -0.1434534528300262235 1.008436237775812927 -1.0031923606520918302 -1.2114593966596010066 -1.5978261997877913902 -3.1625657855795319406 -0.93029912223229549451 3.6801541589189299408 -0.55975337579274120348 0.56221724972678910337 2.5005961219506036564;1.3749547084295288268 -1.3617360946339478467 -2.6982961799986373563 0.44680931912040489085 -0.44940086376831406278 -0.84682758933278989844 0.15782294193328780252 0.45484097481568525057 2.6395294995724065679 0.61989839620313613722 -0.24998642533055753789 0.1750733269351875121 2.3664322578785212947 0.24913920764653976758 -1.538115486199904236 -0.13167803673255018548 1.4622914180582873289 0.34786300245496365457 2.2555748069063432659 0.48767217578732130479;-0.32719408806842381621 0.36025280844013196635 0.059426424401839351985 0.19559894718495804411 -0.16957105686622334084 -0.29519660623506333019 -0.19646700881821610452 -0.93725656732096107593 -1.1172384657888867476 0.29017246561123016813 -0.93710363539060859139 0.31451297555314861043 0.49779287260755833433 0.032973035301946833353 -0.52211977434330136827 -0.4118834340519481052 0.41272647739319140436 0.3706816661620773723 0.16344463625246341554 -0.048388591956522487847;0.49553967345835309155 0.46876597397623476216 -1.7597675922359861111 0.11187137922726000938 0.31404939256976033279 -0.42081600857164452867 0.16418141824318310817 -1.219116451228855702 -0.451967347065290459 -0.14583777583932583388 0.41940072518539778246 -0.1427853874233059317 0.46691390483205552631 -0.51364156305749908427 -1.514278534153480571 -0.2328002644262683607 0.75624294451069007383 0.33855569149683906183 -0.52441739951445132117 1.0617810474297155743;-0.69986585515246757527 0.71788099238255587142 1.0761051986117848855 0.057743351704818708658 -0.43805492336007312293 0.26564560475152654284 -0.05882019354887862983 1.0931338477348944149 0.15250725073449986069 0.07705008442969107918 -0.77780896090967255319 -0.052400510881454330503 -0.32808840523088689256 0.40218470272737694149 1.1189764222574209995 -0.19755531173060766892 -0.18352765622229796905 -0.15666276043727087042 0.80833469624452203295 -0.33156245859045857527;0.45356769063564206235 0.85854950985310451994 -0.94922754462383907015 -0.28720291821408405752 0.28993129994956390316 0.026273030157415906 0.43264981713729971924 -0.79122676576126016457 0.16574083086857882563 0.42816691226608866172 0.076310487567298315725 -0.2325037595678231539 -0.18836846068543125488 0.098774113129012353074 -1.2422143095684383685 0.32564175513330634315 1.6962824871366464219 -0.039333053973173742746 -0.29082372151660762505 1.3755425708805715246;-0.0024699297419492477479 -1.0254254456543616669 -0.63162565150558525051 0.44854174375151983911 -0.41901234135959669613 -0.20221874769048475695 -0.59648989809661512318 -0.29514827681238003931 -0.30138310086226405282 0.49501192313222341923 0.24206499900859204666 0.72626703254487556816 1.1939040911747551554 -0.066382035535296729512 -0.74840768075945562909 -0.020677601771441327799 -0.14986547205677600014 1.0140248208019628784 -0.58313696441904261381 0.035334213325535039629;0.38190910880194456345 -1.6105146613386236432 1.1979929131372137885 0.31103557012420435246 0.21512389685153862628 -0.14922871578925869795 -0.29358932946159621569 0.88812912283239164868 -0.74898875843299561605 0.10879009293577864004 1.018282811774484653 -0.52245304637052836227 -0.75490658191738313487 -1.1489384003519864663 -0.53345592838886013443 -0.30446925680688174953 3.6582507246058559858 -0.84100572155855946033 -0.46027461061008079213 1.2763885703540909233;0.7103141999770896664 1.1427026811037637177 1.4029787072249482183 -1.0613622143912710971 1.1951378085665989026 0.60426729583654525957 0.13051901837523974259 -0.37488009120987758616 -0.18059331200650041716 -0.19970913707598719755 0.12669469550290926585 -0.88323781072524254476 -1.4018637380109661983 0.40198277463590831315 -0.8543405453566939034 0.10239619496285670697 1.6234244922417422341 0.76189292905171213111 0.33038195219617444431 -0.036759226448361999318;0.3801953578436089165 2.5148071356784993391 -2.0043156881337504949 -0.31193018245809239763 0.23622201040703949548 0.032662608134223475309 0.13756602783117294342 -0.22666844809534245075 -0.28751408385327098527 0.4338809184533266583 -0.18552683044401277468 0.05649725429045401176 -1.0133128335620855687 -0.47501934525666511533 -1.994594691491728744 0.18532965896971628772 2.0199605140202128162 0.83939986323996118589 -0.57872815802285115794 1.0738029176460515135;0.92011158997413977634 1.3585938497002250092 1.9895531125585752541 -0.51359551364260547235 -0.60657156828183067532 0.64930203635685090902 -0.024808116350965869062 -0.51277776804305197356 1.5135676515642719764 -0.12021196695198829718 -0.70338195650279577986 0.23712344480163077831 -1.6589247661660877498 1.1117946699415524048 0.12299787677240812955 0.80927805694794530122 -0.4658609668154002903 -0.73361514188828447214 0.67674280043835000065 -0.18449190573822529804;-1.0939739700016140045 -1.9700456256801832655 0.88975594305072691625 0.0010561802726063002598 0.20897166758568111455 -0.16721356632996528524 0.84518949785995811652 -0.72070669976474588392 0.99449335187343168574 0.3641139737883979377 2.6217978071527627826 0.80142796871378341184 0.4400085443861619372 0.22560370334091417455 1.6143054238333656158 -0.16545492229523772743 -3.9116762124241444276 0.42793799936522042282 0.92917114382793963845 -2.0988596507150307779;-0.14299329592598489236 0.33386550026489636434 -2.3439678568523141244 0.43388866475692811076 0.6491127681730659571 -0.61579881891335264132 -0.0024941906003040897194 0.61947285133551033276 0.4899967938192010819 0.10627406816612691709 -0.4431026077433865562 -0.022020930983443948864 2.205968014613994832 -0.81222984675234599639 0.90367304367177170299 -1.4810042280282897931 -2.9181204550541859355 0.38114438806922629199 -0.5107433159156530289 -1.1156855572877959482;0.015467472856265058329 4.8700725876810828652 -1.1142151056395654951 -1.1172473517533776377 1.113269012677684966 0.64247818297538605847 0.60905673322714304341 0.066862331404072244956 -0.82806180481932023518 -0.14361950918830429513 -1.2829853464329845636 -1.2043374943048537062 -3.4333180921828887477 -0.51100373994757597451 -0.64505882463360642021 0.40247291121622608134 1.0775072558136298273 0.21280631306273009584 -0.87442897460932644815 1.3838351780211752828;-0.0038305907857882287929 2.9942022739743392457 1.8174578516766801695 0.012403153577888629405 0.50775389217473132497 -0.17893993522554363373 0.16084380708872378363 0.95638543018508548332 1.0593059853074171528 0.380316945916239324 -1.9902543052248831135 -0.01308918117372357727 0.59137742342451926625 -0.30735379406701124338 1.375570656149548654 -1.5054989910766143346 -3.5650140962255449928 -0.49743443654423136202 2.1618231971617452025 1.3054496585310060297;-2.8939668997301106756 -0.5846084189522314789 0.34131634822815509756 -0.02957612329086195882 0.10964873468656048672 -0.37007258503007284256 -1.0975878872638185069 -3.6546615726957836223 4.896992969096475079 1.2323572034996383984 -3.1081089628906055644 -0.46107041075052024315 1.5393718642923135409 -0.018638120665455334274 -1.9071151013506746352 0.97649230341098913755 0.71085255602769248373 -1.7234375953369762691 1.9667823023402801752 1.0343956065877693007;0.26189064260831290687 0.55213696258513800252 -1.6274013404857188281 -0.19973845915564839015 -0.31459125250978592359 0.190947006316373874 0.34967996700607389959 -0.27292306450558240227 0.20066987155440096924 -0.13629929692615141978 0.19625662998363271883 -0.27533136773215077797 0.0047719989746111499823 0.21788941441287920653 -0.28689025469378870437 -0.13557961992515141225 1.557810442348392721 -0.12882393502164418697 -0.50686503419712625185 0.71406522991910936771;-1.819691222663695207 -0.19070526816061592057 -1.75235262597657937 1.0285307300198964775 -2.3563608286093469246 -0.78477581886259106803 -0.012561821911507432825 -2.3449092707342256148 -4.597680867970727725 0.29770172325400573454 -1.9680354655080702919 -0.42411785775047122771 3.7139158083952188427 2.0438378184328542808 -1.0868088319443367507 -0.7469009008066780364 1.9011398974990321165 0.2752099658030334739 -2.5574174426782136926 0.15144821207973266364];

% Layer 3
b3 = 3.5154409202339889084;
LW3_2 = [-2.5099885705626467924 0.6307884686756346504 -0.27152292523005699953 1.0797888464738174541 -1.2889821445462832372 1.5743263879964239926 1.7574808054587220951 1.3186293608888295381 -0.89993591155387153702 0.60855360415868919866 4.3613698893213950214 -1.183541973035665551 0.4762798965028426923 0.32339714351244480683 0.4286343812716060242 0.48882707998035740404 -0.35270455349139723245 0.4420477286222544433 -1.6220026727593579441 0.27947761813667254538];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
