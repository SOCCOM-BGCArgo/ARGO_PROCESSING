function [Y,Xf,Af] = ESPER_tco2_8_Other_1(X,~,~)
%ESPER_TCO2_8_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:56.
% 
% [Y] = ESPER_tco2_8_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.94112441652214429;3.4595076427235565;-28.521364651564536;45.134427107815561;1.5126048947852111;-3.830671513504897;-23.876624982671451;-16.877192820104202;-5.3958059784967816;9.2354492624586069;2.9602266121161311;6.8494088905660666;33.94344775162763;1.3305062816347191;29.407823407527005;-1.1934532186971332;2.4111781548102389;-5.8542326805180185;1.4166842583960142;-0.20560610470522703;-8.5242978407414967;4.0744712549568503;2.3284128143135328;1.7544939664400321;-40.944863937366776;-48.270983951880069;0.54445446371359629;1.3367201110429323;-1.7170562571143584;-5.9158907903409252;13.795346290086057;-0.83000304229747923;-0.11159208900543277;0.89728164196600291;-0.36080418222138322;0.6807086840962796;-2.2570413506247782;7.4405912254645399;-0.54631390032923721;7.6344022503222186];
IW1_1 = [0.030990930528326389 -0.3173525218683092 -0.68645267944174193 -1.2831180933224837 -14.910265405565708 0.25709705903112123;6.9849820110228613 -0.036921689254640379 -7.3686386115930569 -3.5998314657565578 -3.7056927352029501 0.55633650644626687;0.091104035500441924 3.5724532631884505 3.1287753976306059 -22.109391461033123 6.5316002894474927 -2.4876312014048705;1.7868591746388887 -3.0032925296155106 0.4060625736668278 2.1314542869195265 -78.047508194699716 30.618111072354139;1.0105242504007825 -0.29093369284356785 -2.6112478510632036 -0.032474537191899799 1.8732742042495525 -2.2094218753722066;-1.0281506557148108 -1.4906760371331238 3.6119981953781988 -2.0325764367044932 3.3230773874986359 -1.4189139990641431;-22.342775170864769 26.386021306931266 36.170014229176218 -41.193558348700101 91.014725634103229 -37.985414762087835;-14.03285257764878 -7.470628046502453 -40.720912658013312 9.3593462879484566 13.769785842185582 3.5839582087675281;-21.423694926661806 -22.329530510341922 10.972741580791054 -1.23755871104072 10.079511964141259 -6.2357433523852359;-1.7026510000549819 -4.3959342252449298 -5.4528538925134447 0.77353616956982485 -10.297362491087656 5.4582784777485305;0.97822401460736352 0.43467091776223082 2.1578473179007465 -1.891222469344122 0.28098319404828243 3.6200893601404176;-2.7629943053789958 1.5385680604839569 2.7636281365140989 13.496004937222816 2.1952403838842791 3.5276890544290533;-9.5749758150690862 5.6521891058330187 4.701633898227902 29.005134902954939 -69.333455990384266 35.118079300039035;-0.05023679839301233 -0.031703845841315602 -0.81934731311333175 0.87686917641489948 -0.33431173719174534 0.86319083468416802;22.967448411008434 39.913436241681154 -9.6136454330102907 21.292050034358851 21.760173179757683 28.010452733270935;-0.026406420722681651 -0.23869968050114462 0.83136268478003972 -0.55598356228444679 -0.23476625060744932 -0.87601832828840387;1.0565705903734703 0.39928690845909032 -0.92844311644196342 1.0627488865620784 -1.005310775104131 6.0197595551273109;-0.019823821674176186 1.1224032831645401 7.4665386797240432 -0.66225363049481023 -30.986291625376907 -11.373851178108186;-0.043038430025894955 -0.50743235645645812 -1.1812433293268769 2.0755393113147327 0.8389920656672224 0.33525484963439789;-1.4710874916117784 0.086905684341930384 -0.68066665085739264 -4.0588704411062793 -13.928554703805876 7.4126638980008286;-8.5076564976503697 3.6881540118606266 -4.6761549778552167 -3.1134428618541587 17.127956439884777 -5.4402776183119661;-8.0024991252109352 0.91188637812188333 -48.253273558438813 -37.504757308286969 -31.423908967538676 -15.159165234094873;2.1643306883655224 -0.28983759945131754 1.0849246135805541 -0.59151728829830341 -9.6299686722363091 -2.0658608746994069;2.7398430842339612 2.5778961973511629 4.3991299617967323 -0.1978393766488783 -2.6274883086404377 -5.148281855586867;0.61964044391895368 -1.7013066451558714 2.0910544760290461 -13.873045847907163 8.4578170330356155 -44.120771522183716;-35.277602434268999 -58.758093898128976 -12.994181542655712 -28.115619600411904 9.3017668667524074 -27.827328528336704;0.19879401502596283 -0.16608004058088216 -3.9060100521998473 -0.19795756643207663 0.17734809556532033 -0.45926801329356037;1.6995319114156511 0.89452542520476341 -2.5390479407904158 2.698173956896134 -1.0105346445141259 4.00406829328759;0.4074526587096351 -0.99202738033906546 3.1554602823791558 -2.0704981795848578 4.4948775231467675 -4.2691989749639507;0.29198628165081891 -0.17413887398769984 1.6162819552569061 0.14921670725680206 9.8903259240052925 -8.2069155935605753;9.4937889542792835 -7.4873104765503307 10.193798647918893 -1.3479556111815272 3.9626882840777586 23.990293164029275;1.7388273743273888 -2.3457355098446748 3.5628726606031531 -2.2765503638417743 2.8248219959536183 -1.5966622100557513;-0.3054434323835809 1.9353341447651893 0.28011167603408621 -2.6598856059240634 -0.63016769092519087 6.867819501422086;0.03448694513288765 0.37327240609350287 -0.73035109499487527 0.25596384851876575 0.68831566659549959 0.65891266206144994;-1.4526431565113329 -0.89197307133982673 -1.5541754445759803 -0.40274894680746343 -3.7245839508724137 -1.2810395756239987;0.056753168250853976 0.47860497674691416 -0.63003624039496964 0.019523901926588011 1.1644018930920061 0.48991599064149977;3.030948911896556 0.72849628763067731 -4.7734474409035341 0.219908282505833 1.8921142238250539 0.99350612468812383;-0.79689993904548251 -1.1678021509043943 -1.7787489275077202 1.0482823106490311 1.9078143892961705 7.4059201841290054;-0.13475026325386247 0.11505315953902544 3.8399614993129703 0.2151356373018026 -0.11510857068379884 0.41159454853982141;-0.83482374432264195 -1.2044302654264889 -1.8628638217972586 1.0942531693435049 1.8893013020847005 7.6018475486688812];

% Layer 2
b2 = -0.044910395819191838;
LW2_1 = [-0.075316071808123414 -0.047034605645768175 -0.26417952693880942 0.032889905790806639 0.26146834347798525 0.15784522238666632 0.0065241630119136553 -0.01513872153326336 0.013652222402007799 -0.055251066274671592 -0.12578773697126655 0.023442005706268629 -0.01601502428337959 -4.0582521346736096 -0.0057944273548260483 -12.428413131016157 -0.083791720249322327 0.050972750987082024 0.26987415646185786 -0.057021698421552032 -0.024373048843291136 0.0086930861598286807 0.067591772604099057 -0.040517084007457321 0.016437948171090573 -0.0053261736183705943 -2.7173778930827934 0.091103103862893622 -0.11364991486817645 0.10774015775311456 -0.010652663737748657 -0.068127566607866327 -0.066362714443429366 -15.701123686446559 0.097990152284331861 6.2630637181179853 -0.086712376262085361 5.3815896459302817 -2.7697423057540225 -5.1634683354520226];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
