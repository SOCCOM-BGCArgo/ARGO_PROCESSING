function [Y,Xf,Af] = ESPER_pH_13_Other_1(X,~,~)
%ESPER_PH_13_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_13_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.41755120315382138196;-4.8552467614954943897;1.1457984588104017654;7.6937780024287141245;1.2582855776797039482;1.4891528318721911628;-3.3988194384714747187;-0.23734414257705846452;1.2899478980587855137;-0.07307212116291814108;-1.6024538426200412022;-4.4658496642501317453;0.30830492805183473681;0.12144443609651402183;0.975572094873998652;-0.33438965565555378578;1.5822051733280180219;2.1678715640346770677;-0.31791003286435981501;-0.51191957879561456046;-0.16934021133690876915;-0.14603228345053209658;0.5346363948635641794;1.2765742163239199858;1.0269994082073747865;1.1071437784257807113;4.2310507237128884839;1.9476595328550307951;-0.31510082747435730344;1.117574949094422454;-1.706029092780269707;1.2752902762521365343;-5.4205920597509766878;0.3885291926362020587;-6.6461827862830080704;0.86696067527163833688;1.4542135092935641882;-2.1988603460442361914;1.6345739253758884146;-5.0552447063026431096];
IW1_1 = [-0.13878384817239169946 -0.10099356588585198247 0.33808422701150231404 0.36544355921074311855 0.59199577527300650814 0.57438810117384397902 0.37513769084355336192;2.1533604517545255064 1.875924322390805532 0.33503840247887450854 0.37067233174334668355 6.056067263657362254 -2.9609587523748714943 7.7101403026718502431;0.045697445762191389595 -0.18584439534692029361 1.2412904167178417936 -0.58249218488308163177 -1.2705984530860228165 0.16220198082521516958 0.42321029828265660511;-0.89013031379604290461 0.42235913752578452263 -3.5895508335226082863 4.3189171856160193386 0.43808362503646230968 0.89731714984923727219 1.1696046678793492468;0.046983487048193849078 -0.19280445335212695324 -2.9323578570535713261 0.70263127995657059799 -0.15605478009725706756 -0.29509921212675932489 0.88442538217439037318;-2.1531863083572018169 0.12323602716106091259 -0.61206181298609763086 -0.11498804200906616313 0.64722450348737659009 -0.54315140734181222015 0.35546689448739104966;-1.3187755870988577822 -1.2574135343597099279 -1.6770555216465710124 0.039785456488375316175 -2.1524915579502876817 0.25697481894409118786 1.8065378920177455058;0.28714527013682478174 -0.16948704499168343318 0.32987574895159027522 0.40024437889307962202 -0.36669829885393778746 -0.55696747606847829548 0.75609363307742938343;-2.1400070869804648233 0.20070180168040474555 -0.79924149169964153749 -0.095746682001925334515 1.0508155357040378508 -0.58726950738262495566 0.15055290394889525585;-0.84045383337682244562 0.16024130369139141794 -0.046780000744653549294 -0.21748175748587703082 0.92847738845600935598 0.20807556206500410489 -0.17290633815724190669;1.1772537666088007668 -0.31658804656362893315 -1.2276306990289767018 1.767403227696906054 -3.1593156904941492868 -1.3873382882780824765 -0.94615915148338958218;0.23713109579832508667 -0.7854192681228012729 0.96925109030958289669 -2.8950644598904125004 -1.6862834334263900882 0.44041811994193397206 -0.47753150730889742936;-6.0161757906518795735 3.2346947256337537091 5.0416313723719072826 0.53504999951790621626 6.7703753608832366595 -0.32536734727084248853 -4.3121138715564271138;1.0385159311317022635 -0.13014619321597370449 0.14324893092450605159 0.1747456883943971917 -0.5932439510975718866 -0.092576985391189262065 0.06592240279683557469;-0.74139648257620149874 0.72503278161423667658 -1.3338434480429190998 -0.61731875382900203153 1.1359097670919324763 -0.066159005037156812246 -0.89943268881434390583;-0.41355813360300230919 0.33066019677939967325 -1.5262447776529974863 -0.33208504484026069026 0.38750590698948728097 0.13566862061116347071 -0.31190185998155139924;-0.16525371843721181619 0.62949497416373911829 1.4395159687333796139 0.46363353172352839149 -0.97866525171474527678 0.03268071648083093611 0.18639534912256533472;-1.7566234513592393629 -0.17708175923637151095 1.8399385991580561317 0.044032318166437191265 -0.44860735451452476985 1.421477877262873335 0.17186308022552038155;0.10856369060914008995 -0.0084966766143382121274 0.091513092585914335153 -0.23129862005083137722 -0.51170016776288607119 -0.57991041252929209637 -0.36542036502076069571;1.2448324038545388603 1.0643659639616291912 3.4728551931898992144 1.7350558067439418863 -4.1196808049090885007 2.760774800754588032 -1.6670212512334376953;0.0019456927468398600885 -0.050596620052060309325 -0.032553008408930661499 0.36603483800239777768 0.64006291524810410287 -0.40657313065902861426 0.002650851648413504822;0.037029780947592939866 -0.037729787244530015033 0.56017227834861083036 -0.4353053364273315462 -0.28534779551774142048 -0.4227942737392336725 -0.28899127580314354358;-0.056038062152974452146 -0.15199375606148726736 0.97093610422886977851 0.034509221719232145709 0.17608994414090411995 -0.40968777550595508741 -0.10341783659574076137;0.0037255686331232806471 -0.27223738576315126281 1.5665741705821982777 -0.85148824160416658469 -1.8525639697923439453 0.24360308235601157989 0.73661914774527326166;-0.05788772307845663212 -0.1607984044075532748 0.083703482533392839504 1.3774191924330299042 1.1824397840936469173 0.61106556918664334255 -0.64109586733793233471;1.9675098357398017601 1.1268703830405906174 1.1112557257153414803 0.27143675355197266486 2.2617242560151051833 0.9462775216929160127 -0.71090994831023657241;0.1597176682525992264 0.2562271609942833317 1.4161869613074631324 1.2251790032056322222 -0.79733101732936040307 1.9777750144696351065 1.3442167156594966304;0.14197030289601364483 0.11795279396144056627 -0.18954983299697300558 0.94951104244169115542 -0.67947769043055605831 0.32836665732534758844 0.37170868435372533822;-0.57224894423011551936 0.23051583272291295557 -0.80243140267805901367 -1.2135048345666470393 1.0513427215201245346 -1.2270653248358844856 1.7901031323706451115;1.8771411955335590704 1.1126509794811316745 1.1795648531686115934 0.28759879428864837392 2.0004596028351913084 0.9055580660952533556 -0.63570072552907097574;0.48928673886036538887 -0.71116884974548011389 0.17473012741165092065 0.52992162770175843534 -0.79485394680496779252 0.65407096709876988427 0.27811387011932092728;0.022590639292062252019 -0.14886823961532028027 -3.0157006207884760052 0.68818555735928987893 -0.15153691870952615273 -0.35803136616961422911 0.94865408300032527666;-6.3328116943757786217 2.4385768143486230564 1.6840895452403426003 -0.42966934726960120949 0.029767265626690960628 1.9455550429735417595 1.4425876628038925009;0.12259226516414238606 0.2829057167837838449 -0.9079538878441973937 0.22774883693166084186 0.75228857484809830147 0.30485729948500761566 0.38318999201040182534;-0.16618987222451650498 -0.092755836861517143577 1.7561669810750226706 -4.7209229155277370182 -1.5906107985318889142 -1.8801824774564417364 -0.67768355763973509021;0.78965776804209852902 0.35516556331329185436 -0.23185386829531345887 0.32478512878261012187 1.0711345798949578612 0.35178935748536321881 -0.1149221182765643029;-0.063766094024445330035 -0.083375356387594246055 1.4672748147293539489 0.53225900648112178803 0.089512530690352351548 0.059041333326811488991 -0.22885846007076762754;0.14841221100351048579 0.15309244858717460658 -1.8964819079245891498 -0.57368256611873780226 0.70263629187645237906 0.088911135919136186079 0.48949501295957181801;0.01400978726582488218 0.17202036537240719682 -0.57141426468259615135 1.5727959107570919084 1.0814501924249055875 0.76177850517341061387 0.70526921875738046719;-1.7099209203718961358 1.9437461099473971604 -0.2016592285646972571 -0.69888690666383912475 -7.6644261618854017115 1.7168137293492164996 0.86579002482006117702];

% Layer 2
b2 = -5.4470075291403929896;
LW2_1 = [-3.5335170463884031378 0.040176927678975411784 4.0023050861239255482 -0.76245857433689545601 2.4964708557557524493 2.2723154288122113797 -0.35876985250219589618 -3.411272809331265421 -1.5385134689542190323 -4.4623245100598545321 0.44154742518889295022 -1.1424453494294770639 -0.015130033891626978176 -3.671957162671756425 -1.3925563049483615785 -1.4508571501344051935 -0.58405782741970801997 -0.14876925109695618432 -6.9276558844947881965 -0.05872852060226194798 4.737762905358867016 6.9213273203567160508 -4.116503615922471937 -1.618725900152731656 0.75623728661160150022 1.024894707441937225 -0.31299272717428350266 3.7179976039612192551 -0.21185633736430242724 -1.108822722048192766 -2.3891411934905470993 -2.484689485015384669 -0.028992450109390506541 3.6813491360265562236 0.41805667980855965027 -1.2811081874433722927 3.9816248763386741238 2.4433925859820733173 -1.7094477620089170156 -0.19166184552588594325];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
