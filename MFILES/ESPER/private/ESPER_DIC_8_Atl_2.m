function [Y,Xf,Af] = ESPER_DIC_8_Atl_2(X,~,~)
%ESPER_DIC_8_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_8_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.69226398952165779654;-2.6305723290963789474;-0.77960735775231382316;-0.10453121574509983971;-1.3793156296132258465;0.50812526336587371389;1.6175356002010901069;0.86064134368194833424;-3.344509443731283227;-0.63412172009139566864;-0.46618016687755381433;-0.38432518724813574673;0.65180469610494284893;-3.3603495060707069264;0.79267978292010710106;-2.0629023881125250206;0.46121902040470952322;-4.6255199644446252094;3.957496933637979275;-0.2723073562864098407];
IW1_1 = [-0.41340498862354335685 1.2038300814690541252 -1.3067843308133204605 0.33705725616986897952 1.2892489344507687132 0.029558156398501907181;0.090025524657042457766 0.56285867083473151151 -0.0036607795566870222903 -0.7991249094097679917 1.68635250896655986 -0.588081081770008951;-1.6047641031171251402 -0.47160390737304602737 -0.71954654988295974061 0.031797159896511412169 4.5670816538645437888 -1.3692245623321739334;-0.65899322058662312962 -1.7870275554947496754 1.2127015683851485317 0.027196908017196669977 -0.0015868165007772577768 0.023382107551750117014;-0.18039048237526206231 1.2989878715121507824 -1.4367966536573240077 0.25180423834920984127 1.7965508220776686965 0.012032917625141342083;-0.47604074306123794758 -0.38334967814457443502 -1.2762925682905004177 1.5391672038214523344 0.62475674077927223493 0.34624726721733639634;0.54928712541507207501 -0.52817032452660450659 0.63520248717661342841 -0.60125215308880264331 1.8581956117323816802 3.5489045218951580374;0.19863179814105275112 0.27749557478583181114 -0.0544102931968458714 0.14646980962994929354 -0.44323658180947667073 -0.34315857919109066243;0.18161185978165847454 0.81270893223444806708 0.89020107143876947564 -1.4171012781371203904 5.2125231069795034955 -0.16055034526501688052;0.18945665613338283362 -0.7442890336413638952 -1.2936273024674482812 0.63143324453189753065 1.6885055855142114822 -1.4339822938618280723;0.15132472024331147797 -0.27166504903503857493 1.5590505525130464726 0.12947629133280980085 0.077291256226534363338 0.63355509805739385065;-0.33005800789054057232 -0.77580346449841941503 0.95879845206650748946 0.21893362034200661292 0.39794368821149583848 -0.96525516621899432046;0.24805180622439870763 0.75917314485079656627 -0.43119861795355973744 -0.094791553287401825179 -0.27225245723017638122 0.61602824147018908629;0.15198104788906879881 0.64298302109197147391 0.78465242981537364209 -0.49363439205658571352 6.4399268205567281598 -0.12124569738629240034;0.54962775641779781921 -0.096334510067374423681 0.33445899676707224746 0.26370170063296671792 -0.53886691727944446839 0.23894892809543247236;0.12089577227548509164 0.085512588093627411867 1.1353783527618832583 -0.9037734163126092124 1.8885179682306008075 -0.57262185121130360077;-0.11537272899116438052 -0.43267322982806760701 1.7180093981026436367 0.18769510994575600016 -2.0137963069950730599 0.055967341086830386943;-1.4496833729836600124 0.030835072330111339134 -0.9440550816193507 0.608041517333384407 5.0789676883426970733 -1.0734028306203302616;0.33824447609098795553 -0.17816801384286970467 1.0622377516706702494 6.1981753540694501936 5.0337038479841211824 -0.22374326767609928335;0.15519902715565125906 0.16623537298195453782 0.40197368028165864073 -0.015609373474660390158 -0.015308351507247677445 0.31525533174312830864];

% Layer 2
b2 = [3.9988629091168923502;15.320999820621000964;-13.543972241793438727;0.06405673492632991961;-7.2368828669786662289;-5.9756172724762750548;9.8729332137590581908;8.917297497762326941;5.7367393849570085251;2.2893158315971260386;3.7201627057324540004;8.5676631860446832434;19.248120894739013664;0.28255016535379218201;5.7875827969284348029;-3.6553381691811970278;3.3062590896159407272;-13.210184081286689306;3.7094477678486903471;-5.2636728248377142592];
LW2_1 = [-2.0432371283430641462 -3.0399192798841121466 2.2151818348967329264 -0.28598654287969227372 5.850700868700911883 0.1765625866228380525 -2.396660335436513023 2.8709029225594249191 1.3129252828692870025 -8.9016755166884866668 2.5116296601197776184 -2.6696395263478862603 -8.7416698049782013413 0.88965049107103366666 2.0478495333724193728 1.6693097587228633571 -10.426692236635199507 0.097386677687541722825 -8.1086426411191077079 6.8736618228392414309;5.4202254168381385213 14.711741782086873442 -11.404039129318547907 14.611459929741764441 -6.8318934918344567109 7.2135529886284484036 -10.432015342505239985 -7.3739808400024582369 -19.620672733858221193 6.6779222854211379712 0.44129848564227158736 -19.607739055568643494 3.1624919133562623408 19.838481303728830341 5.1997872259609092538 22.785597378998041052 5.4536415680791971994 -10.504914008843153184 -6.8192023129559373729 -17.986680192414027601;-12.257632593434140134 -1.8165877961515786154 29.831464840456085597 -2.4105917172587640884 -16.702651237161070696 -3.4917676026115036514 -15.588053089683480579 -6.8446545799458577974 -17.382743081113176231 34.55788672002313433 34.02056293552235644 -10.453550834856963903 22.511748172001347257 -5.1941072914699324414 -8.7719717796250371578 10.920390834870797647 -21.480651061208288155 4.6554641704267716307 -13.842875199477640891 -5.2677828030187434649;-1.7897575911340488641 5.9840248863399372325 0.93825517590806462032 7.4491257236162287114 -1.3344591099966185421 1.0549112207473931857 0.86578967913257243172 -3.7136709520933637307 -2.4791354557887634869 -3.7565679630259021238 -6.3779103860850190344 -4.1187395411260370182 4.6463005068077123383 -2.0163056911322136955 -0.23719517631724876261 -5.8780000775325147444 2.2952862791964849798 -4.1851399567005502789 7.2649590414210125644 12.364985202761905825;-3.2838214189654619801 5.4139655627078582256 3.822082840824573946 2.1807174214986004834 3.2964473466856212269 -4.3316371104499111766 -1.8740757325459715954 -2.1611654659221963826 -0.65872308352629727057 4.8934864915343734282 1.5882109533097106269 -0.40550048519070447384 2.1940497919515360437 -4.5178423236973079824 -4.3160878822728419024 -3.4895124158553154636 -1.8180083614613999909 -4.0588699041404110446 6.8178377965143894812 0.37020071601438547804;1.1172518961535577997 0.0061405147599360790367 3.8733052130570895244 -0.035376698759253782933 -1.4364746458681869612 -2.7754264245714326265 -1.6877554154011109588 0.31816555968693555068 -4.8057578447575783898 0.66374379745199441061 2.979084108816334453 1.349015806203788026 3.0934963947004447959 6.5497477929259417806 -4.1184188167662973967 -0.47315326319240802455 -4.3487243886548991867 1.414589079605490296 2.7604143791134241326 0.90967171948426517325;1.5823557853056671174 -2.4555387640240375902 3.8786635440623351556 4.9282147035917978073 1.1920337536483356367 2.4352841605389565771 4.9511295945546374142 -1.1375800175172918749 -4.0474270220494457106 -1.0760615387598952974 -1.0036559832449061247 -3.2246238394747686051 5.4637015383658811274 -0.31118868594891652135 3.2815354582735207778 4.6208157069829507435 3.1008579841939951649 4.3948413032794499955 -11.056154021864747605 0.7907870164890641318;-0.14621631376330912477 11.367098040093205569 -5.727640613124310498 1.5123440467060962344 -1.0362268250986315099 -1.2060877211002101195 0.086832456091777698859 -8.0973443420479291888 2.2017029265230432244 4.5654570157664817742 5.8826287447612202186 9.3315614710383378849 16.725707512833864143 -3.5212549178970835584 3.656768882492925421 -10.918592112526541271 8.5631669734355710943 2.5550960757134966173 6.5820175972851666657 -11.598776613766803578;-0.37214230442069240468 -0.95889278001218047898 2.1972090517608733329 1.7730388373367627075 -0.074963865977867125134 3.1447884522323907852 0.27835319596830138122 -1.4292108255826079244 -1.7073246774677333093 1.1153206043769228195 -0.67943419492677348259 -0.1714549661823415172 2.6489366652273340641 -2.4673327862969673951 -2.1075282086698239326 1.5351523966812830047 1.6847521786581973746 -2.1300125330323242956 -0.19214271906713900617 -1.112368222996088063;-9.2884109183082959049 3.9569391565996805404 0.78740141927253548548 3.291057995027288019 11.166628783531324487 5.7732547653258068365 -0.63002750234441795563 -8.417737680916275167 0.39758384908402194524 6.2318923408036912548 6.1153046425622950011 -7.2118318645406862544 -5.7839106154203863142 -8.2656714534021453744 -7.8629427358274526227 1.5350246316770062016 0.1637780818441657571 -10.496255143343150351 8.7600883327739129669 0.79043952070773282337;-0.6510839475442005142 2.2549423918129045674 1.6383928185004155154 -0.21372899225705219162 3.2752951324925989596 2.9092782162467125673 3.9227936171332888904 3.9809069287718847896 -2.2741936286186663629 0.020571383459822158157 -1.455110017785180565 -3.4746632144826024025 0.25743446474064957119 1.7373529791620505591 -2.6838949860745273668 2.4937524920286606722 5.8916461633397414488 1.0102351179373185719 0.93514879044792231788 -2.7799977874794912225;-0.7423193064369739691 4.3235998249988423225 -0.5573444001490711619 -3.413124210676147019 -0.16768104419635598834 0.96748958930920225807 1.6399334895745356633 2.0929652543029124701 -0.28240808987899101989 -2.1077737086278061085 6.2004380687167497399 -0.53975112244535616846 -1.4459196134732399397 0.76407458022499208372 -6.8629254141634881137 -1.2234514813001529099 -1.3734211646728702316 0.94317360791775384232 1.3503484768442668429 -8.979280039314623707;3.9798199769459010611 4.9960515972545094243 2.4880820228161497631 1.6731795191562870428 -0.036857487127326601928 0.25747508801237811715 3.4850103770658811264 -5.2555970926338551052 3.1819437548612268252 -4.1860611829781770865 -0.64003366583419940561 0.33862907437512057562 -1.8437558909189499801 -3.8459270730010990391 -3.0794799457186186054 -4.4596931830738633096 2.9670777980503411086 -1.8108059239635849735 -6.6531753278842327148 -10.316404597935710186;9.7860072204348771407 -0.020751429306948898645 7.977376723040462636 -5.2057463636556216002 -7.0231412802667296802 21.965740021697186535 -6.8209920594624042778 -0.84890305719273362328 9.4610304818722035236 -0.36479581984915504522 0.55321047645299081807 -14.754173642497216079 -18.588672215857709347 -9.760915655516241074 8.9838913703434517544 20.972310283010877185 2.815648743842016799 -8.2425999548123130012 -1.5452193981035660109 7.6965365689378213432;-4.2052222833363632759 -1.4365556176612126471 3.9917208477028314206 2.1049331874489056737 11.820051961755448033 -0.4166203170373682374 -4.398518881287140303 2.1579939931158742539 5.4656674812845817968 -2.3855380865112825184 5.585324727615121887 4.0910077339481354386 0.30622004727800805624 6.3402911233313687944 4.0265739543726803973 -3.6330030834079485302 -0.98523027630946047317 8.8966822743567401943 0.76891120585310757107 1.2111508651516749158;4.9619865852330100608 0.51577997494977601001 5.5892600882355623071 -1.9902135669577298849 -6.7328225459420352195 -0.66213833221313400657 2.5891505173352480362 -1.0319440639855970154 2.2936748185116941912 -0.87468860056464325936 -4.3049052664944724711 -4.2819763298018527209 -6.674100880804840763 3.4509754689232297054 4.8700729836754224067 -0.39636913868758055779 -0.13685813148924752536 2.6747151780645270769 -9.8515545012732133046 -7.8954644872973238634;0.097294097846742810809 0.44762549603245471719 2.0240614751306300612 -0.14769930700996497519 1.287693849403295232 0.095891332433875930974 0.60701942630258065581 -0.014932452796051390309 -0.4782392821705473418 -1.6385377287109994526 -0.60468337828419771451 2.7665411676000468688 -0.91162156926215398567 1.525316199909106718 5.2536104963156873282 2.0377855399168565143 -0.11768062939196727301 1.4201623140905159648 -9.9100113494010457771 -3.191309479157534934;0.23526881851848219229 2.5869098740588909457 -2.5835025474675394896 1.9503588246108101156 4.4771304522461115027 -1.0351991032967284845 2.3849444220485120915 -2.4378428030959722328 -0.36087797731189941164 -5.4082826919541453492 0.51813140915986966029 1.9837928655783310106 -7.9885548874223433202 2.063083837278286925 6.0233945852016752553 -0.76787499609757425834 -3.4838025791174067614 -1.7951720897237521957 12.435757767683115915 14.170187941475502313;-3.7414977298013871732 5.6484075759245673254 -2.005534276560079654 0.82406194639988306072 -0.82738250067844676394 -3.4038593057598394154 1.0288918603541690189 4.6332582246720113162 -4.1827311006965892659 -2.7654094006097440506 0.086079344556067693972 -5.8178829391167807827 -5.7563959203293428857 -0.075721416809028940786 -1.2764392142468716784 -2.9841159868038578118 -3.0501593968230027443 -4.9366666988212051237 -5.6551858573502151728 -8.0655248534161305685;7.7837875642210772043 4.9106130995409040807 -2.258854315283869596 0.18408596057404447155 -6.4975382984578944345 0.14579894432868611975 0.57333047919938562309 1.466379627900342264 -0.70004729595368098138 1.5953561583005178015 3.0875655127407966027 -5.8255349875367556933 -10.900269894040171437 -0.27596633199031306294 1.9955492566660384401 -1.4680156460651965222 -2.0719094215943654191 -1.3258961979601640024 10.628587510898686475 6.309483754495446739];

% Layer 3
b3 = -0.022744352867680769914;
LW3_2 = [-0.013347052105260201471 -0.008841355368574946999 0.0050266793232476101455 -0.0090021463448934305879 0.05548200830721809057 0.038545672237743473787 -0.018549665292152048984 -0.029948446200910125437 -0.1787376497036775036 0.0090848501061091407882 0.068782434256867669431 0.83912776170321046187 0.01383010804106501665 0.0073718863923192537099 0.013347231240722561008 -0.026573489228026353492 -0.067666152254584610581 0.006154091000882995488 -0.025452339754915145192 0.064164869962804751968];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
