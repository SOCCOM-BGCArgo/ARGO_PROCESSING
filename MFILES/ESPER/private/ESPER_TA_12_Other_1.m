function [Y,Xf,Af] = ESPER_TA_12_Other_1(X,~,~)
%ESPER_TA_12_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.6753836383187765691;-1.2070812041706433515;2.1240977405920569154;-0.55256231443033976269;-3.5504981502941985738;-1.6149408072462985153;1.881628752016549555;2.1316615268256620119;-3.055122979576366582;-0.24365839853188628328;2.6664161501100589469;-1.9549199927224818474;-0.26313121395518862533;-2.6639615453341334295;-2.8530629481074414322;-0.15747836603998757732;-2.0884278325573353285;-0.59038046839995361736;1.0166693793755956499;2.8211090074999258803;-1.704937148981951367;0.1182563003911425159;-1.4884457802523047842;-0.14718552627178224657;-0.050381552605713121606;0.031069454631525817573;-0.78030038983733185365;-0.60473272720752802023;2.2412999996284415083;0.55149264688975518922;0.45833551848343900836;1.7703045510278478947;0.90284869932714995056;0.23161521207870752748;0.62368601606252382918;-3.9442377330569069471;1.9486968362945025213;0.89617417395191645291;-1.7920952000828596073;3.0400238302867745865];
IW1_1 = [-0.057667162253109395531 0.21582280928256958319 0.38658646263194451631 4.1844444731097309997 1.0513057448309541808 1.3183736128786101016;0.29517463190912318627 -0.27535842725328874003 1.6414102091394007221 -0.12326960273535290946 -0.38694035482840577478 -0.83864590529846350098;1.2673307325676810287 1.9447454732266600264 -0.3068382297118343871 -0.61620753283922691246 -0.57894621909251320346 0.34207501437386061971;0.35250485552032911896 0.16003709772341959128 0.24097277911195100208 -0.96488675517257560532 -1.8093161169509484054 -0.030826795374207158901;0.76566101756621041119 3.9692486940362403658 2.5473433943193906082 1.6546050799580012125 -1.0404577251367534974 1.7558433048168164969;0.23617154136852863688 0.80682936623006151766 -0.69225883671800181318 0.75642116633674005843 3.4047865002335266915 -3.9129519811096193926;-1.3146827746281275484 -1.7385272770345305826 0.86626102462601184406 0.56870524225727037138 -1.9766959320276478174 -3.3675090700193179849;-1.1635795369547266009 -3.0365583969695579825 -2.687792567342820238 -1.5966866555519696469 3.1281577018371824472 -0.88668065916353533407;4.7258117224635691755 1.0014640474506841805 0.16977101348602199882 1.7001795147981346723 -1.3347754889161331793 0.9504447934144787391;0.062416390095866663978 0.096455564176888608507 0.19339828131080813445 -0.52193407816452108694 2.2938472246156647039 -0.97484268472966317809;-3.1522345948366452539 1.2575180965733547822 3.5827241840561048214 -3.3399075279347769651 2.1098153222298141607 2.7399317453666172106;0.14456045188687602354 -0.12559246710864238605 -0.44152003528268091159 -0.43999361868429470723 0.4678649806543042633 -0.72114191996532961415;1.507865028535356311 0.40074355667822297855 -0.7514747878869532105 -0.62107265436992664664 3.3377841464923587722 0.65540280041026455216;0.1105870201305178685 0.19557074231333204661 -3.0415903764555181077 0.49527741142929243567 3.3654067359556272265 -0.22236265843173189105;-0.070502015216961477773 -4.2295218523064823657 -0.054284497771705152169 1.5082663530865383361 -0.73432125180360907635 -1.6528262961022452959;-0.4061131246757588853 -0.25650556249732703318 0.24490572165151131001 -0.02306063728361685064 0.91412529984372359326 -0.35265089569747920528;-0.23378719232143113649 -0.024993416340641082252 -3.3160821983448491856 0.1804481485536117702 6.2586357813046733511 0.066349662177634535776;-0.12381918600578759038 0.17221286727312193343 -0.88907829750383526868 -1.1600806671226433497 -0.21074037149745600273 0.013120887610473183638;-0.28434873146324074478 0.28319691122673040784 -1.9217306398527667088 -0.20361915700762467374 0.48416262796010089975 0.6513873390118748441;-2.1834122323795703835 -3.9332693979009678564 3.4981048556563503205 -0.20819267674032651549 -1.9568360774838680083 -0.19801796044356476112;-3.9110772521449486128 -0.99203144192608239127 -2.3937388453161929647 4.0696426219590984275 0.82932033947900085646 -0.1634339807682436696;-0.18633649580223510256 0.55151744626355925227 0.29851629424386189049 -0.6756643298168082401 0.66204554310575380871 -0.50597339304973298901;-1.5908861736395880637 1.9778876693238900408 2.7326925051308927905 1.5579178612393420611 0.87342440049319713946 -4.7404771968155872131;1.0031551169833927695 -0.7298430421566849402 0.6703416235448593774 0.22323941745997041841 -0.34896298063087943797 -0.12694689011964480074;0.011071123163293023622 -0.01660737169461951393 -0.5930320676974344396 0.79877186186375326304 -0.55009022583105215976 -0.59191355685141167076;0.62086702004225446938 -0.78053730865347581425 0.22939321418194047464 0.38372302299210642174 0.086833132656405548344 -0.36744114101669950179;0.39943871018582643995 -1.4247164736547008879 -0.66461296810429137949 0.28689715414632277479 2.5156991524834531049 -1.0026189498318573978;-0.057223250371183281837 0.18848197909937000616 -1.0906212868296909502 -0.91928836270656610896 -0.26721229517908962059 0.4465634130976995908;1.84169037400295732 -0.33870752999062680999 -0.2167524194916262692 -1.256807869583985271 -3.227399961908703041 2.5617592494049064022;0.17970304085692340168 -0.29288537213846882468 1.5430442740837833071 0.88861343771374357026 0.37523888290225032582 -1.2091230617315977813;1.1842443898037293692 0.43147976487934958101 0.47511637452505633972 -0.6374168382903957486 1.2656167807435301231 -0.40045873849427815472;1.973672951253534924 2.4855236714555792865 -2.0269716776020829663 -2.2563538790716188842 -2.3997297047364538614 -4.0509137701315758306;-0.73568622186405618901 0.57723831849779883019 -1.1109015766747980525 -0.95698294678424344895 -0.46144245838178016283 -0.59482544565278028248;2.1840278797189207616 -1.3129308238590078339 1.9932437236910132139 -0.23196343659850071628 -0.78402555964172493397 4.3915722929909852823;0.098078491933755895804 -0.14130926632992410474 0.87672992721142262162 -0.86225730337568184947 -0.2592094761923349755 -0.052710277750009013054;-2.0799068370396991412 -0.43575614008808122302 -3.2668698075011852744 2.377992837354269362 1.9524760547602308947 -1.2200370266881623849;2.6573550396861196354 -1.3442079843027454622 0.025207123437541077704 3.0441960893883917016 3.0371598985650924973 2.919156025000332555;0.006346886755032961 0.59593873539233299663 -1.4580890029835760213 -0.77940795793835959682 -2.7706875519783626949 -1.1500819311750245522;-0.69166436995367197582 -0.14652658116189426485 0.16378794630923229625 -1.3496373042214966365 -1.6165019991139797373 -0.0012499717560875785085;1.9449363610213110665 0.5171608349414175132 -0.048701886741393231317 2.0600273003257378868 2.1282184161744850392 -0.43480334973736678439];

% Layer 2
b2 = 2.8080529249970709316;
LW2_1 = [0.096528600934707400882 -1.654364658404659183 -0.29697498685135642615 -0.89447626594875917494 0.12561256089686395621 -0.033306250080036819972 0.062622419003462923004 0.15320534943693672747 0.055558232221962960962 1.2191774970613729057 0.032349338256383378121 2.8165376361641318859 0.12050418720221230118 -0.22546160258463018855 0.089538665594684319071 -1.895313257888590508 -0.08753599175119161635 1.4363565336486181501 -1.4630879511559296002 0.028496661067386221122 -0.016290924342133264457 -1.0510960165305174296 -0.023403232393162044095 0.8154514892275226412 -1.1569791156744606564 -1.2422818977067848767 0.089025447672870225424 -2.5557787818365120813 -0.069056771650394283002 -0.74738285830359285633 -0.56385967288089533511 0.018494302900010462648 0.53436472750482499894 -0.040750194832515969356 -0.95862657096473502527 -0.07963604594053864949 -0.014418031315562098577 -0.29260217527228138401 0.91335106828096612741 0.32421561949141119996];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
