function [Y,Xf,Af] = ESPER_pH_9_Other_3(X,~,~)
%ESPER_PH_9_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_9_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-5.247392665228225006;0.96243949887846313995;3.1090584073280647104;1.4937127306205131294;0.58609701284782866892;-1.1716878366796688038;-0.096178638980839684103;2.2962901787709504298;-0.014347619807416080867;1.7424591480624920248;-0.31235358469116930591;0.26767949731572920902;-0.4793517976016052895;2.3383454231386302524;0.28539862085370282241;0.25594020210586182484;0.69900043619439977682;-2.9284672131652627058;-1.0681931470445988897;0.97528972228492571972;-1.9254276470377127417;1.584571971510962296;2.0432786079219691366;-5.7420558612524574826;4.734315121097720791];
IW1_1 = [-0.26260509500659423576 -0.24973966319394944047 -2.9203648274417099984 -3.3118987942191164819 -1.0242088127210104975 -0.84883360746734537461 -0.039267598857420323022 -1.1157790086851582245;-0.60743962444412824553 1.861578756525644085 0.080186581039347712418 -0.0022818272656184232505 0.63876188454848992215 0.36642997555538048271 -0.48122097037642991291 -0.70763362994087697366;-1.338885193078505953 -0.19361316651838783587 0.97463413064285620013 1.9185596151605968096 0.2068688066887281185 0.37673111792044605695 1.6752850677853303729 0.76817850041542501405;-0.61357120904048800814 -1.4954050292265999023 4.0477261487752000946 0.074260559934710812513 0.15518346687474424139 -0.41416471179963787463 0.55403181049493877008 -0.057567926360038497446;-0.47161773470389728447 0.5445122473418239073 1.5697566803420799353 0.2475317744886537108 -1.1917930510510699182 -0.29816638213532309365 0.28803968333763080301 -1.6579552837813020805;0.88129542136224214843 1.5490853220106395316 0.72348131799841552958 1.4631545467620294954 2.1323867293082363616 -1.1536570598834656742 0.81701924257178459854 -1.7309033230065580256;-0.69719601192222857566 0.53961226937980388829 0.98228349966014272265 -0.2736193387598621074 0.38329336900948129951 1.0681295727294368714 2.4884618652047851839 -2.6978985846779033331;-0.54326337881084985071 -0.50138254078604027608 -1.2600456624289850804 1.8659501737010317779 -0.096406483373350476684 0.44430210039573420078 0.73836720852263537651 -1.1090170336505844606;-0.047011970758389906577 -0.080550956122570419038 0.08981840530838593184 1.155590300541006421 -1.5954335324999582291 -0.20188811061141820336 0.58817413522427985928 0.55490879421214556189;-0.80787265908687611038 0.22827531319656169106 -0.42505011972330442038 2.03543763811813605 -0.87552793831139552605 -0.58369020227774448539 2.9978274443143866357 0.0069541990311249822498;0.4475081988130725219 0.5515357979290156365 2.0483313920320824764 -0.4689583616526173393 -0.51590691618583062183 0.11076180157587883768 -1.5059617154587192633 0.77113475927074504046;-0.50214658927846467229 0.69393108288811788942 0.80524120516400887748 0.82614681693740366075 -0.4570412061017929406 1.0962264558359531286 -0.6168678706608675677 0.7723005751790827933;0.057596792891640720413 -0.031004068582567493456 -0.069881369084332678465 0.23079304913944204136 -1.7694957108954052494 -0.26099888244029573192 1.5945607523446037046 -0.63925513096160169191;1.643937308315081669 -0.91759444847019933089 -2.5801297152020459258 -0.48547672908047057039 -0.65797163177415018964 -2.4174692506017154692 1.4219060062089521335 2.4141690025639528372;0.77642076416322580723 0.29250520527654660929 1.1640176094005394436 -0.71828491579031183978 0.97656321831313797066 0.3426138580620762264 0.17963224290789231441 0.63850152055583819788;-0.5807710040494616921 0.47507232884304984033 -0.089178552008673195317 0.81934380636144787946 0.70690906658883312375 -0.23430540460302831662 0.54437222323344169883 0.50169970697326926601;0.67004013829354280851 -0.26628876842571308492 -0.10793818532399412913 -0.42063229402121538048 -1.1959408836913796303 0.52364969799231197989 -0.54783705402857063582 0.49751725287010239995;-2.8393497941500616122 1.2596016297622434355 -3.3176080935389160587 -1.28365485651868938 1.9626688723630056899 -1.9047111850599394156 1.8872328073927440162 -0.9507210937568312259;-0.53819480998590385479 -0.37468035984131159433 -1.8543263121119091252 -0.93688022505604284795 1.7983222509954048807 0.090541345873551531964 0.19974957786647373759 1.123420200118865564;0.40050543113653142013 -0.35385476735579646235 -0.23717541585435167328 -0.5627274327551297084 0.3128402548371899683 -0.38609179452813990885 1.1372559764723424447 0.34261073254366369856;-1.3815213733986362321 1.1633172459272149712 0.91432752468901379306 0.33565707558587304371 -0.090495765832381849791 0.8759167157441273277 -0.37869083477328641107 -0.78759474654737138266;-0.014274389280490944881 -0.18324104305990818187 -2.1794509738777514407 -0.39996094711317853321 -0.94428285788364751951 -0.48948261320277658415 -0.3475007333818452282 0.92942407399102555665;0.093606115148071836196 -0.23927192605166314188 0.19461172864676618 1.2030579791397795208 -0.37432271412061302041 0.80672162674468328447 -0.085687859325587978354 0.023964644029385147317;-1.3650578435500242414 1.5922040045418139886 -0.72155816109175852091 -3.398454992849217593 -0.8832651139437694976 -1.0998553412158060816 -1.9951417154461115189 0.94758391011812304061;1.661917766236431504 0.31326050868440635799 -0.26914247673018953932 1.2712202884829577609 -0.4048934221395534272 1.045064863617023887 -0.29308718072727402149 0.73465319825631703043];

% Layer 2
b2 = [-4.6279235552131945397;3.7377490652067852928;2.8265079214599744262;1.6455817934394940671;-2.3992778917709309816;2.1764297818099302972;-0.39534640106742230392;0.62884827721984570825;0.51866512194229774657;-4.5015803491322534668;1.0356868247802484273;-1.0972861818071648621;-2.1014974427186157158;2.2599047113077586069;-2.2119525389963872186];
LW2_1 = [0.48896789878759444603 -0.39098324126627914676 1.5695254594009249161 -0.59729684835685159516 -0.89019029494944890146 0.64149193986251451527 0.096016398906615091358 1.3712881518091146749 -1.9095352967705092606 -0.12160014528175137893 1.2599038426490816178 1.0821533156393634556 1.6230425074440162359 -1.0965137781292768615 -0.87927052041093589629 0.022295357916005294208 -1.9857977196505864903 -0.17389953154511739175 0.12201980362360860533 1.6093899949732326515 -2.8477905277858490685 0.35275085106592235507 3.4915918619759680475 2.104730863693203613 -0.67510990732720510543;-0.46610787406838127822 0.35786085474269618834 0.35000418067426297686 0.36201518415867633971 -0.4192676675718091106 0.082814154540838333385 -0.18000303128788086582 -0.1709423237142016494 0.26310291059222601362 -0.50166283247643028709 0.91229379445226888024 -2.873176726667266756 1.5766777239918539077 -4.733710649205811194 -0.63011719451216374743 3.9469513231536899056 0.028018256701066928532 0.1825468442319885809 -0.27517933664385824111 1.4306664083430726819 -2.2477707569962888101 1.3871439737354296362 0.04592464649075915506 -0.62004793846115313638 -1.427539713491797313;-0.3567138089849399285 -0.40989340747840652401 0.59377521857647086456 -0.26937144712431027038 -1.1602342089651203061 0.10800263689802983014 -0.601710328960458396 -1.748896492980745343 0.44783612152356133684 0.034884452073889918311 -1.341975139834419295 -0.48013830368767562717 -0.27384593909018684066 0.21052786318558605605 -0.83026882759902953524 0.39420221739404892602 -1.1062032313370051551 0.056698815252661328989 -1.0694779725256948755 1.1498156282672822304 1.3235072315469145199 0.69583989148673852654 1.3734640398618180868 -0.2859645453960887318 -0.22624208559789427131;-0.43495927798073008574 0.6528350226770972542 -0.039666895872059473871 1.2468662815886863982 -1.0635849393805436591 -0.58465244658554105239 -0.28332281066536335601 -1.1715859277217530732 0.067806887931490117394 0.61957943173138174675 -0.50251985628478368362 -0.011712108295253617282 -0.39224573885313562815 -0.92863044020302543125 0.52268722271901457699 -2.192795332127363217 -3.526932251647882488 0.30131167435092293116 -1.2878414213966749013 -0.47291591826398954312 -0.35630479156600103341 0.57954894767793951882 1.4994014322569717557 -0.12422876954552242168 2.7438160427121283114;-0.21041899230255750597 0.40971939401662671454 -0.56015067048433475616 0.5166733829884944118 0.75354877749907644979 -0.3566871525370371443 0.73461342174194044219 1.2959366503522313785 -0.3544055438232487365 0.047683008271629065411 0.52089615197184124806 0.080802474645115501817 -0.47113243474564658886 -0.16582175779815339078 -0.012839676926886828962 0.24504924841271499836 2.2346322903274731253 0.10889744828976846702 0.21139893358719186178 -0.35765645737446549735 -0.79935014012714622478 -1.1299950541182632868 -2.4993278450278486602 0.40699176287505534066 -0.21643256691741558084;-0.46966527608783914527 0.2563710361289772699 1.3458373785071124917 0.25159571605106761938 0.33659658337235126568 -0.421600573057869632 -0.68900821736203066159 0.25190492477765674684 1.1375179071889101046 -1.0176029255470571133 -0.51102560886261305662 0.15715899296345334224 0.6677727650533954451 0.162231179292962574 -0.01036942987910188449 0.2767168879728433839 1.1071664112148009718 -0.16575841019247680719 0.11378810514528059361 -1.2999836398358231015 0.52345371343305258094 0.41236988622693804274 -0.2600020104624234385 -0.1584616611559915289 0.26757197108142222186;-0.010406605574919444712 0.048530953406614514567 -0.015329705380547158783 0.007618753087627985407 -0.039435362428740572405 -0.0085973759168549296339 0.033838141172553674874 0.31892754062637457269 -0.10232029558564713356 0.0076395216762821160569 0.031906890764643085212 -0.074961565571926611073 -0.28815334205834203241 -0.014850602362588369992 -0.0124273625542786776 0.01978301802046022323 0.070302101128218386084 -0.015718271669299205273 0.046153719296204001599 -0.044291274308412849348 0.025324570061412567112 0.0070000156897194500127 -0.42020500297256846434 -0.24507309793659798336 0.37477554772051230314;-0.59422473089086103037 0.12696432795244183556 0.60109455555677215877 -0.22490815133654440405 -0.32400880521244612709 -0.26861753117321535145 0.12300277741083348593 0.03852046809980651243 -1.7435138925569702018 0.36923516791162630524 -0.94213411347837150434 1.1612134008189656242 -0.0084873112903774781263 0.45707157531241721093 -0.36014108135212602457 1.508591560632918771 0.87415375931002703425 0.081007900635082966123 -0.57023286640233072919 -2.0762245074359131358 0.015466084840247442539 -0.21380221598490187218 -0.47805418383396891535 -0.85506553902949067325 1.2652819838918749618;-0.044135173480750605757 -0.176003939775135676 0.61384833909723279799 0.13535172133554818075 -0.20439642224437085116 -0.28131519318608877445 -0.43385606537582577236 -1.307969851649786186 -1.3219724099474083889 -1.0053391302513809968 0.029902652998261926298 1.4137555892380508915 -0.53040325931540532878 0.62767081433067062335 -0.67257816864133057599 -1.3507638072713317179 -2.366525173819608252 0.0806073133318193219 -1.4728445537881142968 -0.61787364561385060835 -0.95327987365317845558 0.42832038485013818052 2.6376528682287965211 0.97584850217043694887 0.23533440878000361218;-1.1409874383405489429 -0.59004874007726193508 0.75721191352770300664 -0.26575973245745604379 1.3594100422072676881 0.16431697552933796636 -0.97813564536276365047 3.7873149730153330417 2.1689307409317302167 -0.68211837260424301732 0.99085626742359389496 0.053178971782730705131 -0.87729869373130831001 -1.7707250199980770766 0.68999256377798856565 0.44323250340676895176 1.7981979860994521392 0.16010153736714050066 0.45938257257001952061 1.5455298586026511298 -1.2035198250698710964 0.9926747998996816591 -4.400288051308328896 0.14085573223638403473 4.2114439336827835803;-0.77581090290020138234 0.33501783102552956661 0.62431014102252724296 -0.049183420877365817414 -0.99901890176313634662 -0.30629506050229493574 0.16103079438745976359 -0.14297625201780586601 -0.0094688885264526210378 0.11357779865354447613 -1.268592067368307541 -0.85014421406838558415 -0.43198466778562805146 0.1005816509110996626 -0.58112377756498367898 1.00828618184605312 1.1109352213810903542 0.20934663889254281899 -0.87558826725014171632 -0.88855092950822511799 0.58784044474647334511 -0.29309668138156158568 -0.92344888579064710044 -0.27950998383778880019 0.77095140371850501282;0.47966869403953027451 -0.26514140012601772334 -1.3644566432207809736 -0.18110069052011903978 -0.25506341811846644507 0.45382732708442613534 0.53628896083944221918 -0.15755585678846714681 0.073206588848594073005 0.94451061597378227486 0.51081852549156192556 -0.20279732716095316691 -0.71432767723613899147 -0.06975430646975637472 -0.029517999545149421758 -0.044170433757173013789 -0.94137911706872146045 0.20089625729728555203 -0.095081252138742286539 1.6499239605037001599 -0.34471962633404101828 -0.35135304313150794719 0.32312106588936045926 0.13810952184419275635 -0.46732457178046704627;0.027543805430990633137 0.33259550182071528912 -0.48269793294765833691 0.24515680901723996277 -0.11527294908609997393 -0.23283091926723811782 0.31339444402003863166 -0.81106868938232912214 -0.6825389984578529301 0.17301895415185894467 0.23185257994587146757 -0.24456500602510383713 -0.27858601893007317596 0.12653131413795665194 -0.88146232520789324916 -0.42440342844025769065 0.35464200015595620519 -0.031404380552773961122 -0.50662532700620654946 0.5133343644199651612 0.26641677416139969425 -0.29421691950791523107 -0.13275082224241382955 0.14571691562786504015 -0.1054108401331564776;0.25079665719029459181 -0.64266468917413865913 -0.69427229628435915831 -0.52333328851213289923 -0.19242548430405317927 0.29417574290843273577 0.39410241934358342109 -1.4821003235251528629 -0.62562988007578756999 0.27588460872094588971 1.1175877535169940202 0.81963554386204828806 0.12384588541051770594 -0.74406069841428157385 -0.43889388970640214049 -0.71596702790019850493 -1.2950205748606653522 -0.19381277983797670639 0.36735417228997174766 1.4817029800808725337 -1.0541805931110730388 0.020910093061254509533 0.88152776405601651621 0.82179017524559405672 -1.3107431216561353793;-0.20357271202757318274 -0.28360765865550868758 -0.55157879542242171933 -0.067307863610658241749 0.085654713060037843131 0.53217303579696206839 0.21377107643802553683 -0.85878833727507108975 1.5300602717318627644 -0.17558091817796064871 0.18531601117803192524 -0.48526899104264409335 -0.27208389464562515725 -0.67454833614851028578 -0.99020148029593246797 -1.7407349514150105563 -0.69963635009360169992 0.016504893974228038167 0.64147919075653181409 3.6034155753367436148 1.2491500171904554861 0.59046887462069030938 0.62467302213493436369 0.58134999028014389122 -0.89189896733244111715];

% Layer 3
b3 = -1.5306330591282995002;
LW3_2 = [-0.16409415970925050887 0.31687657803560631553 -2.1976455521268931648 -3.3835489570706678286 -2.7505273200834992053 1.7431553602584179963 1.4657463991916706014 -1.3743753124269837418 0.12806611199626619091 0.058543692809877645455 3.2019696574089748786 1.6325044276607394433 2.164211672067017922 0.38240264960294118035 -3.7475986449256089017];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
