function [Y,Xf,Af] = ESPER_silicate_2_Other_2(X,~,~)
%ESPER_SILICATE_2_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:38.
% 
% [Y] = ESPER_silicate_2_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.95838198027159093861;-0.33694596234777368648;-6.4487210432572945606;3.1944168019940395453;-4.6005863362477983358;-0.22474381414534300161;8.5912045076894703044;-2.575729460602639076;-0.8769704917967975355;-4.0614983743439561081;-1.3150010908403801935;-1.2453438916119583535;1.3180481848972898096;1.5337840094677850367;0.069383694054854103128;-3.8286164183277988649;-2.446518630984870768;-2.1021480178573086484;1.3682205999701171351;-1.8069610115768857117];
IW1_1 = [0.26463125471983750536 0.15761512921918474639 -0.5839802949231820417 0.33320073558182466966 2.2582110977430862597 -1.0560214646457766197 0.023808618633200922393 0.17895694619498309086;0.068574538015892680387 -0.018680623945849073042 0.084505714902913656172 0.15218763171871052542 0.3991716953388651512 -0.0030052573780647629832 -0.33197043427108635649 -0.5369615454090055362;-1.5519448604786980628 0.18942882804960217702 2.9795511864728543294 -1.3048182389457732011 2.7353373820019517559 -3.0849307665824730051 0.79833199489622730383 -0.57875794797187363194;-1.6917520352428372377 -1.3685623348069917427 -0.10481756344355870614 -0.61793588602695137535 -1.6265211220806241599 -0.28813017089422993111 0.63923715816730508621 -0.76554328247070591029;-1.4161111286100156459 0.020389431615072492465 2.1797594825390089746 -2.1916798380013049474 -1.2179937464324430696 -1.6920245522010801675 0.44234390646691051918 -0.89616192890225365719;0.0093004859812426989019 -0.031532740961304130123 0.1044331699440379374 0.85947540111338860402 -2.1349851289470063165 -0.83000279233643603494 0.10573937114154859096 -0.5542673142769928285;0.21432424940550762194 0.076147368203819690291 -0.1419045249080210791 -0.083759560095882867881 -4.7895554314073711666 9.1305612374982541013 -0.09976051639764901835 -0.040775384327350581992;0.12540847044917874387 0.069462877089649571749 0.25726760156918077049 -1.4091496737113515803 5.2066039266964665444 -2.3650497994779131616 -0.22808475351862370073 0.4310839801082823608;0.29127486279244640954 0.11108480114681068551 -0.81469657887723412326 0.19411801357110314292 1.2313702089707962983 -0.94412529746546425269 -0.15948579775291826799 0.17351651441473631143;-0.18306014341395612788 -0.067513477527200618789 -0.89849782586316206956 -1.8916101040467814265 -1.6601877501730508691 -0.35319028326518381311 0.23677615235622923029 -0.8347859066000163919;-0.6212549965475115954 -0.17411252258100076706 -0.39909951289821271603 -0.5910925058198893689 -4.0917451299247034058 -1.4741754322231905849 0.5050401847122374388 -0.42222965908476217667;0.31065358985021035432 0.094104362493226609288 -1.3500388433437502389 0.077804712055994748598 -0.9072714246442031838 -1.6765288999095537825 -0.53963167348549156976 -0.49744431482290224489;-0.040502133026696605922 0.19482911967531829633 1.40624793228557321 0.99730302236463508336 -7.0676735944717536952 4.572280537979543702 0.25210884682362161291 1.3878575594322397624;-0.059925348101259427736 -0.085241744219971271601 -0.35163142499700844601 0.16017059381137110918 -5.006734447923089526 2.3189411734669445053 -0.039876174843313544338 -0.15100020527506202717;-0.062681717512011986271 0.11154651412596139348 0.16454364306861010703 0.70327062660094630253 6.0370843158373048709 0.77030385680621604738 0.173825172507212522 1.11153659655245729;-0.3395488844583496868 -0.068285885818297337169 0.22884926190567220217 0.45073195273233351843 0.61867151024379285484 -2.983572550313905225 0.3233157042073490639 0.53100685323124685588;0.27340244761739740387 -0.29372940534259373013 1.7756957781949416209 -1.0545341772171525907 -2.9012627492575209232 -1.8625318714599612413 -0.19988292301387741712 -0.79392014470360861011;0.033678124820784589855 -0.069890559563816817557 -1.3197041220602756528 -1.3288739756681162696 -3.7663025317991349894 -0.044020176091269402896 -0.14129325239856763141 0.64411241972303134862;-0.30909539785177814197 -0.067831077162382902301 0.078241821002929756723 0.65634151645045690771 1.7543100258786767931 0.85554250109364493593 0.29430664003784645644 0.15743182899200977576;-0.11809603936330852203 -0.024034868368371455766 -0.83153049319518257398 -0.18918639113975527222 -1.8744377233631834834 -0.57699151382754432227 0.022727463948079302397 -0.67563390708820725283];

% Layer 2
b2 = [1.2655879324152503607;7.0851393519716898695;8.1862605411734854499;6.5671823422101383017;12.949840391606475265;4.1682169390305805479;-7.8349902829146209626;3.196066559076327529;38.584555257040527465;12.531239810539009483;-19.889832260333587755;-1.4135115958630974919;-1.0522540587668951506;-0.67906866093476048185;18.336765417219144325;4.9500065686996803649;4.5475586612253415808;24.147445923321321004;-11.563277085761498597;-13.156849385500802185];
LW2_1 = [-5.0552335754818011893 -4.4807567111600743459 24.33597560282222716 4.5616250243838054601 -13.465800526818849647 1.8128366862624374356 -2.46965801683120878 4.7196357393706360739 14.063115105217406153 2.6535310933691049762 2.5501277237889174998 -11.961153480203446264 1.1267967035254260466 3.6149151736740856578 -5.3262116861699402293 -4.4513073645975511639 -15.123659898239601773 -7.6740354271875919068 -7.0295427930909655245 17.258292912136518282;1.0051221675657684429 0.80931326160938499292 1.2059894028422699641 -2.449247074874214114 -0.08262326947010274758 2.3324604216533582068 -2.7959360244337676527 3.0760419070326152635 -1.5133573317995347995 7.4841298651999439429 0.3081081560200136793 0.19194774877597203799 0.18818107957248372819 5.2125485693645572383 1.6523517514130057204 -4.6423848343305564867 -1.3989506049868372095 -0.11225424341662516847 0.64500269740424620579 -4.476350590859455636;0.71101954266780009739 -39.445467664632673177 3.6018964768865138204 -14.172516883277038957 -7.8758241430198889788 -6.8363330816772149845 -4.6406270554318167498 -0.58488808939568626144 -15.257111009958215675 -7.7911010520376926536 -14.33606029016356409 9.349862689154015527 -0.63384565453461116924 14.854848557257851027 9.8124947398436788149 14.057201181088347042 11.926970343628422455 7.8272290150679930676 3.9145252131766268278 -8.7825839325873484853;-15.421913020693981622 0.50080938771786309704 -18.713279089661615018 -14.451004850001039514 0.30475517814869718114 3.9944330172223292408 -2.2805671202315953572 3.9975830322975025588 17.620061411282836872 22.789558552545631898 0.71700753958835672375 -4.1840517427555212748 0.0021470827491727770102 1.9583260773556789847 -2.378596930830630729 -2.9674186513682179189 -6.9385916089447876587 -4.8747421860577713204 -1.9520169691145303759 -4.0364772239929216369;-0.10247435833299391172 -5.1430382551259903323 42.993278596149202997 10.012459642883261068 3.2682668640638103952 1.9945796092098722063 18.951115462216993279 -22.05289130928112229 5.0417348782451174571 -14.792323449922724521 5.4357852364247660759 -2.1616725681553639049 3.3801005186575179273 -15.486057022797121263 6.2192131833768167226 1.9924748528707978412 34.44114223163069255 -10.133262344861922344 12.29850088570626454 -7.7302860358568414867;-4.3466060447012662138 0.080900818369911572936 18.221233847206317336 -1.9347447565433821826 -9.4115233766284926986 2.9256199611518920456 -0.40558504026893849037 0.44937877788738261886 8.1350796061100432155 4.0912902464501792466 2.5159427407399181931 -5.8666046512213592123 -8.4084035734963116226 -2.3251951403197437251 2.0028115876417968977 -0.2316513730916755498 -10.640226213298248581 -1.4791124980779788434 -5.7066302281473468838 8.8213431196604368267;-8.4742318249534331898 0.18425991554686643736 3.016197663160104625 -5.8106978184319268976 -0.59101239655173565257 1.9201416820873484781 -16.303676490470071059 1.1477271718636952169 2.4729152931797377946 -9.1180663696322685752 -0.36007570974622460369 -0.82453079057590028533 -0.5938363894515359398 -6.3997779182141156795 -1.5219336133332361793 -23.615032718769889186 -4.6452332072518416339 1.7996574516636099084 -0.19526907955043304455 2.8177423963082901537;1.0507835099526445788 0.77163270049670995565 0.17668078639082349102 -0.17649234648190886832 -0.059655236595261229571 -0.17397570034070469758 -0.61967911303863054684 0.023970841871182899802 -1.6433231789113804666 0.86718736068977064768 0.049175738712984147505 0.39216469818581356499 -0.087898631209177291446 0.82888803755523987604 0.42211135621125250861 -0.70225807643214521736 -0.060610251030378127501 0.14259801513921130378 -0.31413019359056487678 -0.690702180439672353;-8.2482836280355247283 3.3219622118690863566 5.7182169712607580081 2.1421358380623236606 0.45993799389830447577 -11.586034042980264402 -1.02372252947042508 -10.56902420699346834 6.6574131803253813189 17.044150636494645568 3.7901706024903067949 -1.625014926259924497 -2.1677387103623355635 -3.5043547677652799877 1.7051346797177329151 33.656462764669583976 -1.2200326581227576295 3.5106532436097803718 -13.053171261706722817 -14.873824235743974498;-15.913452727397171316 -3.2028858266107143038 0.026732436742969267751 1.78923940749186694 1.3922427546169517942 -0.22390994556054322207 -15.522075958726341938 -0.29255496476759229596 17.710921086538306213 0.57970530523670982248 -0.97235449127972839456 -7.3436413088408780681 0.29648200047316269901 -4.3966721775367139102 0.96434274806899356047 -6.3635719246425388462 -2.28563569303690306 -2.7347519276231806451 -4.8133270596490467241 7.90228052711761908;0.8417183759215076666 -5.2049888620658677496 5.1820591152909196708 2.8851349632617950824 2.4311081428471990051 4.7317149676444154593 -5.022267741165479471 -1.5183092820221615327 -10.456200428736879715 2.5672021419958999111 -5.2489781693674677499 1.9373970275585392642 -9.2882181376825752039 1.1722440882975615484 9.9019243398103853337 -4.9622412825391943869 -7.8890668573111115691 1.6010869706060970596 -10.43980517489096016 -5.8745087892647376293;14.490962814817446969 0.547783739905330469 4.3175631349756153909 15.182639899567657693 -0.26237836852907403529 0.36889635507307771967 1.3117843089805585333 1.0343066534240701326 -13.679142773025631641 -2.6766515460304001195 0.46405568267875341171 2.7253459392363770242 0.0418572202691702977 5.7862467752571324908 2.6941741717366149977 12.476841269266170542 1.3978634702799865863 3.1206879719710252097 0.89812416427128338725 -3.8591268355723244987;37.478012023252986751 -34.06623459807416765 5.9229267184537377489 17.273047944571956691 2.6348247748917055233 1.7641388619969100571 -26.402909320349547073 2.4365470304820133762 -66.583613311571468785 -21.794671493337471446 -0.43715822255333958157 -8.95721679498360146 -36.042751786845343531 69.271472717034441757 33.294945511717209286 -1.4463248246761681859 -14.490189670781402853 -11.284888707774500816 -49.100064949157243177 11.145316999111177125;-20.23605668216050546 -3.419990386248648484 0.66070460296259103661 -1.6076692272847088461 12.813483417134074571 1.4290395617305304832 5.7891644438649416671 -6.4152579503454534304 31.376523669411433559 40.527609789602628609 11.746181394460901259 15.089013150320626622 7.4901135110020700125 -5.1939665313659348911 -0.86974060934618346863 -6.4266735454043928399 -3.0758537117050157583 -0.73936881741309545824 2.5693508327249450218 -24.065216129560223379;-0.46507878994159318475 -1.7622646014913245782 0.32803987332751605166 -4.9471938300457498627 -0.13890341914462031592 -5.2255431266514422717 6.7219230251994197545 -9.5233636816244366941 -7.3013142547048142106 -13.670727132696095296 -0.68964363553773133653 2.5353359992410813284 -0.67324760286630747075 -12.925525008128465387 1.3798480160040871301 29.189125298928914276 7.2057365670453412676 4.2818516552079053383 0.49546839497983502509 -0.91367463889645950115;-8.1051288766321150092 4.1844899056245719038 1.7724507337239419069 1.3573300523368934112 1.130437148193997654 2.6256182804449084145 -5.4195333135737007169 -0.59944861642835522986 0.2925860384155950511 15.727434253757412108 1.7791515966665378823 0.046822528907591517977 -0.9934088016318554093 -8.291860811740022541 0.73330057532270065401 -4.8399838522204046143 -3.0362243359695431089 4.6299183673898651747 -2.5065307029923524773 -20.325724701557934537;-15.729434534954727098 -3.6632209057449300893 4.5060801660812268565 -3.2701700090383014619 -4.6883136709995980596 8.4763843430286875957 -0.82160537287356671943 11.4031056002106439 7.5934521211062309121 2.3449582880033448262 1.0279113061860418732 3.8525045009126523965 -2.4300599974269410097 11.08852390663417431 2.4902640469518089184 4.6323691698304099162 3.992259131766308311 2.1597379044333724352 7.1259031705266924206 -7.1559975617861617536;-0.29641566204067548718 0.31726482348635243191 -34.006247574623692742 -28.408476632498299352 -2.0565094924579039315 -11.915445399197809095 7.120080920771094668 2.0455649033737639542 22.221681309213888511 25.447823765174447885 5.9990981425409373173 -7.5374658072572549017 1.4916822065837427314 12.641055900971030823 -0.36172735424734125953 21.806507307560416109 -14.170552058464119582 -10.668148362853434818 -7.4860455480949452678 11.728145246429807713;3.0641821384593130873 1.3222558278461442605 -1.2882129735808920401 16.66203466579018766 2.0883815270440559964 3.0820857097485117038 0.15817441913975369139 -0.42171830407374821803 -0.074827056952650600197 9.0342109878147383029 -0.18658538496261298234 -5.4507145558031551147 -1.7416940421905329206 5.7521984788613043094 -1.2545150815028895952 4.0251558659917670013 -7.2531870978923400628 -0.33064378140540107154 -6.2678868162663130548 -2.8315472841377973268;-21.535507159261310761 -0.65353208012329366827 2.8523152941954355022 0.95529393418096086865 0.42057983649643349011 7.807206207917640306 -0.40475040194312328357 7.7960542735237208234 20.534776484647885297 11.366519846330479737 3.0847274143120140266 0.77817121471497474605 0.55421247278367280487 6.1392941175753694694 2.2434218064560522699 -13.59764912913523105 -3.8642226090967253249 -3.3247891812213614671 2.482401990702358674 -13.716135587017877384];

% Layer 3
b3 = 10.189985884826066709;
LW3_2 = [0.25011026909321110168 0.32251914528016084605 0.0060019155396906949396 -0.078950854560106933921 0.0066873325298150779195 -0.38233795659185171312 -0.047899030563385867898 -21.919498856153122546 0.019953105801124918633 0.050731319509942862656 -10.484786778847057676 -0.06013398473215046669 -0.061496205931909943276 0.15269246362979929654 -0.055503981797196830228 0.032994740833431179805 0.018195052976693302377 0.018223923635011161221 -0.03713943183386306246 -0.042248786226449487613];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
