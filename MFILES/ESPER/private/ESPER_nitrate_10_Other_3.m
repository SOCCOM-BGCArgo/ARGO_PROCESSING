function [Y,Xf,Af] = ESPER_nitrate_10_Other_3(X,~,~)
%ESPER_NITRATE_10_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:35.
% 
% [Y] = ESPER_nitrate_10_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.2379479450012631503;-4.7192565761975506788;-0.47300832584286567339;0.99982434635455652572;1.5293064220233949513;1.6738282272853406418;0.9872051687521877783;-0.3505595571030017954;2.935385405973174322;-0.85451652997713656301;0.23984056583310339739;2.1994952999383006187;1.3277483220690222687;0.10064630424078201132;-0.31869512408503952727;1.2126966870284419109;-0.51844912032770107402;1.2708406309959991987;-2.0691034419997067495;-0.71911823766242610745;-3.1473493021421443672;-4.7753082828849340302;-3.481398632920830849;-2.3717834473424024289;2.1642532927352986505];
IW1_1 = [1.3455517044281719574 -1.1922059384907743862 -1.8732922245137246797 -4.0022102731755042626 0.99364365119254183245 1.3253697486675108941 -3.5511777836506714934;0.24148105733053673583 1.1984979945579743443 -5.1364798734211749576 0.06876689408292681327 -2.1760293171865496831 -1.5740398783166964503 1.2019219532679543683;-0.034391071858711125264 0.026891929778518303823 -0.39267917098290772149 0.68731881578432607593 3.5407553681339112295 -0.21702442702252294771 0.021414505891010578165;-0.64276537116247134396 -0.50881496889654442839 0.4768050641357664543 0.83713888868715813363 -0.55520266581591437571 -0.21080661141915391088 0.80575362713276510451;-0.092599813124726398916 -0.64380748101472939915 -1.5208550834877527791 0.1961566925916642945 0.25387013781344036634 0.066005208583306038128 -0.90138997652933805504;0.10571479985632384335 -0.29011290663189431838 -1.3695658948488591555 -0.23402381246819883853 -1.7243931025516501254 -0.72064779006449619647 -1.108798766898769772;0.71800652390969699201 -0.5120796189775386198 1.9042654531012426222 0.91627293018506228428 0.030869876440368142212 1.9619005024759357259 -2.2071021837656656928;-0.12664270176468611639 -0.17717094174823316832 0.53656600941587173637 -0.12344002856311772631 3.4822334552192666379 1.5908465659964430294 -0.12619609433328426995;-0.37162690951398652528 0.11372131948283761838 1.7064743130598336585 0.0084726812841808812199 2.2848873849961650606 0.056342824938316118932 1.0567449753724305062;0.032820499276830963908 -0.17430320910005889234 1.5495950126387831869 -2.2919368512092685997 2.5936854333726193644 -0.86676274667314245903 1.538829206673564709;-0.10145708603330345909 -0.056729680975970649126 -0.10889431524928386286 0.4044743705143902246 -0.11416924083979514137 0.37827250416748553485 0.032672813756355598147;-0.17894939127862108386 0.24225069221969242061 -0.50077829733109735511 1.3018862933621389022 -5.1776919227499860199 -1.3698061008698865226 0.20214035933244367538;0.11949238483279260581 0.40647095428492252545 -0.95459551329876812797 2.2185082756670864157 -0.69266594157959116007 0.80547032721826128387 -0.53713631320607913011;-0.77387611158042324266 -1.4632192247002611118 2.9186642267633207126 0.38849239970692989177 -1.0624000722865074575 -0.69410809461433575773 0.66982603356459979871;-0.458488825908018649 -0.087571462073104650026 0.072576524641945000527 -2.4544346966715306912 -0.33181694790760041247 1.1061358147081525871 1.7829229308307317226;0.1153806487997988961 0.44227436303135825302 -1.8098806575111328065 -0.44809078720329109657 0.023236174601062926925 -0.63599962369951912322 1.9643338821095324143;-0.082269205243258439197 -0.081467782259309437509 0.69059153652861260397 -1.6910073776662375433 1.0339886301103675681 -1.6297602141723168678 0.73026030380811346454;0.25577624422892142331 -0.39277994367874313753 -2.7015528084572641987 -0.58377154163592526182 3.1925010801715956177 -0.50905991085614277214 -0.32278109058008730425;-0.36684673707874559945 0.15297089696372781487 -0.43198498626852799287 -0.099033994527723906431 1.3119916806000901932 0.68385820365277116828 -1.6363479573707118142;-1.3247077143711614156 -1.8538197508499503208 1.7990241651796854416 1.3493839887282543799 -2.1416074856357307787 0.69645440938711500323 -1.033914075962163448;-0.13243518028828910049 -0.19500734156204169167 -0.96035013033967375762 -1.8587709972523875912 -0.51355496638172981605 -1.0122410480550907419 -0.66667357540660165949;-0.16919799986461794838 0.18464688342091614692 0.31507732220312795191 0.28099843674006097505 0.13956719746382567626 -3.9416928669855217926 -0.94458355446534592037;-0.49221257398377715742 0.16677790738183978503 -0.75876250411059387169 -0.92035302193895318634 3.6147907201395561572 0.85227065454837980241 -1.8823728873463065892;-0.18590978864798998749 -0.33457188504368701176 0.81941208698528211762 -2.94880852261904014 1.7905183196326033279 -0.012993191156263350639 0.12398029179798238097;0.38769702412947060211 0.72662197373411818724 -0.91616429205979887929 2.1741367198719476761 0.10679939391038577312 -0.37756918361651520266 0.73603876133592449627];

% Layer 2
b2 = [1.6614156306978034028;-1.1881389032061346889;0.098218319622542057945;0.78276702350417126652;-1.1080234937292308128;0.30867580249205495146;-1.9786938171465480174;-0.99956459953839249533;-2.1806181935000177319;0.68250582639771484317;1.1172755735879620342;1.3039157596944734863;0.87216628514843008713;1.063691867558721027;2.994347768799278775];
LW2_1 = [-0.47217895843652024634 0.13633403125057771965 0.44863571158037196529 -0.82647678774498434251 0.41924634584160258566 -0.48021405166220954008 0.23900511143549943438 1.0611197092832400646 0.63327316093481555992 -0.45882726281244062827 0.36973868925533442953 1.6919637376355993741 -0.033771285722332546053 -0.16932713398093823809 0.47938338909552563605 -1.1632837709930441417 -0.46125226331381535827 -0.026118645054045767223 -1.4832983021209638075 0.36583905209499822941 0.89072517425781061462 0.72482120184236076277 0.72266523477909827555 0.066068750372157716844 0.26704368787614352065;-1.3236785875429486481 -1.2568411380888024897 -0.8716114794363087892 -2.3136065188440761986 0.088943449780334665755 -0.5548930689683788664 0.89675009688971873967 1.9654765525415844873 -2.7478556839261072398 0.94039359282516321592 0.88295586281498816827 0.95720077216358645522 0.028829218247004368553 0.25897209997835940465 2.5654931069800150922 -0.95924457731557266627 0.13797682387175946861 -0.86946928227319919547 1.9387267563716461538 -0.1460562023055203551 5.4181366447838543721 1.092873044319737641 -2.1204644705218869127 2.2078291938721683607 1.7954373826490401811;0.78701294738403515527 -0.0014095899220935405663 -0.21161925044442159161 0.69272181585251935143 1.2276733299977082847 0.45194475329425970456 -0.31273834726903554371 -0.28288737589961199248 1.8362508567462336728 0.43963007022402544877 -0.16755643201001713116 0.49790309955358968974 0.14240919303459195766 -0.12933151721649741028 0.23617710361593816093 0.22047151351808833009 0.36747453449431394246 -1.0172229048841214816 0.029038827548489992703 -0.58433606763231560333 1.2832574209246394581 1.7551197576919750354 0.16222629853091019569 -0.73437815425674690673 -0.34753171308225827563;-0.5532949332068272108 -0.38235652998664837465 -0.60354285089803283437 -0.31567697707988734424 0.98460419655375241987 1.3821107292938796807 -0.18804809150673401641 -0.22400419476546207243 -0.55145785016953263735 1.522322136904027845 2.5285218814728538383 0.74303261554019417456 0.93975259100124686196 0.70070197781087040223 0.37815300607449509052 0.15479648206164128843 0.69832611213392148386 -1.0928510776315003561 -0.4916350253509998991 0.003328727137698928723 0.49728645152534517448 1.7356570295849322871 0.55441758349122571836 -0.6936566864885517214 -0.71203403201860138161;-0.72452372353860317045 -0.31327392158867278793 0.54132154877265736825 -0.69128544344106623853 0.77394654285755626333 -0.50531293711063629548 -0.2769582493413016433 0.090746149099207085165 0.53097811263435945595 0.89481977242749921597 -0.72612154899727487933 1.0180864791460833008 0.1723241956436818989 -1.0742842750512693328 0.056372887798344602228 -1.2306565486254650299 -1.9634091314679524842 -0.46939816360831720932 -2.2723818479118063074 0.21496881716059010325 2.303169826563285838 0.97166679842300607284 0.19507381493656678062 -0.45263058168670516901 -0.93730182049478361073;-0.12562046910091281826 0.015271659456275002084 0.5364849554330128889 -0.053695936692720581951 0.76402859970524383826 0.0090694562786379426256 0.047397341795955991173 -0.25787224926883700604 1.4100778806141878174 -0.29873157479888023946 -0.17956732647397957714 -0.32584736338115993792 -0.85461024394874585131 -0.0019566622788039795405 -0.06259549633971622784 0.34529266242710626722 -0.26433884271539587196 -0.43461512594388901354 1.3943545370074827972 0.15146931249839734601 0.91833137358083771762 0.76092025189541856456 -0.98194154057850735473 -0.88560932814116843925 0.027411536123715475599;0.53576414964500673754 1.4636617809468224216 -2.3218987213114972157 1.4843823397271194153 -2.2150644495688855962 1.5227172694280632914 1.0708482591327768141 -0.95201712726889731186 1.8982653419513579873 -1.2895929867937543367 -0.13083046823667596192 -1.1598470547460095759 -2.8170555273985904421 -0.22963150108257085469 0.61031811097145993728 -1.2364978376093009871 -1.6031919301997814564 0.71270679114463808546 0.34391302544518420614 -0.66402629932195023077 0.7008557044853126472 -0.23158885923811681207 1.8731201789564371207 1.9101609679482371984 3.0972139425715501382;0.11487466002818552679 -0.010271959024004240213 -0.076262193263799793463 0.018471315155543129027 -0.65638178027854587882 -0.16434587848386777997 -0.24903616061860020525 0.14491329246582018708 -0.77546182625478343731 0.081201796241844897972 -0.23571413792862930259 0.79413166552389258257 0.040546696529776354856 0.012124301904171717187 0.01902800898016707154 -0.16616332792668059293 0.053775926698815736116 0.19464397775270214641 -0.57092156193515131157 -0.10280557574463147774 -0.68738575440496607616 -1.0186373115977374049 0.064214581570205014893 0.52655518944371437762 0.080005858957259839981;0.64207065043622679745 1.4132523816151181251 -2.9060871852945360239 -0.076934826180660498274 -1.6051568744019406587 -1.0821382540723654131 0.23329560992610043346 2.8553903705884482456 -0.25997618820462203848 -1.8215887404223307655 0.33503135376327430883 0.4969179449801628401 0.65731409919164662803 1.0939097357419202972 -0.51880026980664184499 -0.76601584660614252531 0.94216604309637219661 2.1397007939180161529 -0.23313164114385204195 -1.2238412996462189053 0.64650464047366662523 -0.24023977946309291176 1.5460071425498773667 3.0564275124119819615 0.78855423598683704878;0.082379637982610165459 0.94128512330701541444 -1.8808911223613746788 -0.71022847709956671292 0.36825801539526187289 -0.09342164082193371577 -1.005760000648714847 0.53320524003269997859 0.44298587889539070561 -0.1771675292105077959 -0.77745223631472215597 -1.495779253309236223 -2.7946809564743326781 0.99409199122133162785 -1.2887178218877097802 0.17816648594330344868 -2.1322350507961522759 0.42858151542069328199 0.38112717241015442449 -0.60120648545082855385 -2.1939390607476649819 -0.75578543809092590955 2.7372721618418283107 -0.4566057829997744455 0.42512235186695290778;0.13131993988330536993 -0.092139916894375048506 -0.12616491171527569048 0.53182681954906430022 0.92504752374081145039 -0.49314232451818656999 0.14562746468781831433 0.48152439975270255879 0.70339204530055599029 -0.068451608876663544434 -2.35785270924139434 -1.0152024981138827453 0.22463269598757021339 -0.032450831517313705188 -0.32100853686900843176 0.32759160134063358694 0.16676767916895335331 -0.25477210897014690438 1.2285080435092659012 0.066729333192946868603 0.70797081157781649452 1.0954220769706450866 -0.24952697616386526613 -0.64578660080014127498 -0.29347998572486472257;-0.067975861620269223407 0.44211713849367145768 0.20272561323497856334 0.46529325501792623276 1.6338071452490721125 -0.5828960435414863861 0.22132370408481288893 0.56875179314707313694 0.56470151658036704667 0.84298282178498928907 0.96014529557552863448 1.1239496991520718794 1.7477703231351229274 0.32497365415636275676 0.49606752091197092724 -1.3705034581338595423 1.1130100545313030835 -0.7531140665895588171 -0.68432758977940133516 0.01244329870640385749 2.0231298336760064061 1.0815350463138557746 -0.69438720857330682446 -0.16621686370296864799 -0.2834723010472474658;-0.10161913060963459476 0.053035640744092463206 0.2135825656101791592 0.46758076833136447137 0.69109813900249894569 0.64589569683771619335 0.61864986067965288541 0.025574029712193628583 0.45609712798644147513 0.12086513806554186057 -0.83770234304685275983 -1.1660999013848722949 1.1973158833089410091 -0.028338808255271054348 0.086522904233551078956 0.17082996788055571091 0.74845067774816431694 -0.13660491344254480084 1.0936305464678999222 -0.026420908265691007283 1.069737693899647013 0.93774364038576596414 -1.2934351481585937282 -0.58656340373447923842 -0.55448121643557968241;-0.51350986481690508167 0.061775912821191339419 -1.4690293992388185895 -0.010341386677123901375 -0.69047116367096261769 0.93265554169792730388 -0.19811062516696487101 -0.33582140971922952444 0.65003641884476071056 -0.076312699827913513251 -0.044545281245722455343 0.074619007394346861806 -0.19085294272910946489 0.00738623479375798489 -0.038322074445139880927 0.43104065018965276312 0.59177275311758725795 -0.49579634565004970792 1.4951537076760519351 -0.00640899879626450307 -0.0983545524373143909 1.7877837196956603005 -0.20221985164240544042 -0.3264311763320486004 -0.33547000084997902203;-0.15896148342146865229 0.12125723949629230169 0.61524629575966827133 0.1467063310633305584 0.56284024368557339368 0.12856682662045082477 1.7062533454530541821 -0.73970541312039261861 -0.89347879584418843368 -0.75587394255170059498 0.20120875985960723353 0.25528920708589325494 -0.22369875596574312349 -0.050043912107409653511 -0.39022035442232022584 -0.0034339279939935339961 0.7751683944545635363 -1.5545067926624636101 -1.9225869080053605842 -0.55497921134668348753 -1.0490809705372039495 -0.11913726697792274833 1.1495552988984107934 -0.027666751312713906696 -0.36900215635198346797];

% Layer 3
b3 = 1.2983796947369066199;
LW3_2 = [-1.8251931686466773552 0.56676834847670065631 0.17983315717894182706 -0.38858328671517450292 -0.17877572211440745376 -1.6181267282530984453 -3.0533667211369368566 -3.2098826261574839869 4.4147256084905661666 -0.1647956232494197093 -1.2061755494716774884 0.30870340508875349084 -1.1736833960619406092 0.47696326046000586674 1.8080953452266050885];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0415843642790311;
y1_step1.xoffset = -0.9;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
