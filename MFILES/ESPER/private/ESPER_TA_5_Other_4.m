function [Y,Xf,Af] = ESPER_TA_5_Other_4(X,~,~)
%ESPER_TA_5_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:01.
% 
% [Y] = ESPER_TA_5_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6607450884036825123;6.2693250902737798214;1.1473319120640887991;-2.3594331688691640991;-3.4971871374911009944;-0.6141979862990502026;-3.2653794908036752886;0.18664819001312038527;3.9271268164221120323;-0.35803160569040709538;-0.97316515762597666228;-1.1546085800908181263;1.0049749859404544239;-0.3820671076917339648;0.65779213863725294331;-1.0998975305248182011;2.4898250621377169267;-3.0131714427377591647;-3.5965332965287468703;-0.3695047020276420735;-1.1888441168161625328;-0.22554463198287602599;0.31619600256932578475;-1.9147274319974758594;0.31392941727971623855;0.38161270125110996476;1.5527401427933111844;-3.2242793116019319299;1.6309497206450338513;-5.5541288373604711381];
IW1_1 = [-1.3896101890815444335 -1.1576298243311984315 0.98451199582850246195 0.25929012423935299259 0.27927166411466652907 2.5038058701307313036 -0.15097557653939974731 0.92084231228798896218;-0.064516391119232782692 -0.18292951188330219825 2.6248715043030514948 1.4527405641181614371 -2.0643685642684812542 3.8756643098800513947 0.9360037812200290297 0.069148943177198302079;-0.13702834827546306329 -0.87749278672040076366 0.75777021512319175933 0.23402218736570742919 1.2206887973244948675 -0.34941672047860983241 -0.64039751968104441371 0.28056246894503072964;-0.66603889325505238883 0.43055143149135433056 0.87742865032625061428 0.25764903811690259561 2.6990690399654591047 -0.36620219257684588632 -1.2204211220036362828 0.62023100382248175233;1.4459573659763795828 1.9826103958115579573 0.9312307884915409506 1.5503533925075683175 0.43790689708932051261 -2.9799059371436764643 -0.52341519817639459156 1.9218158205846875841;0.0804682676968503513 0.3051370582168800305 -0.11376152356371993513 -0.072946610345767937122 -1.7769518242974864375 0.018123353394593033627 -0.081802506727551307919 -0.45941152606989210661;0.75972659242420892411 0.54401157868263727568 -1.0099431984666484841 -0.028297316490792277788 3.8859553351282647427 -3.4751194903230926414 -1.3552243024329162502 -0.081434946385499806798;-0.121556601477731549 -0.3227454408119271867 3.0942410880324926481 -1.6202712803820897847 0.52537755030808097612 -2.2084366625362963354 0.81627425336602321693 -0.38672404409372640455;-0.48741912647459084695 -0.3130950395567451694 -0.25335354326968290151 -1.5078382765001068222 -2.558148666323539544 2.8000395811391558532 -0.0068190364351251100961 -1.6819010297618510741;1.513828119541795969 -0.4518151917489430236 0.4594958689755527792 0.4169437673132660449 0.63053007680705697169 0.15896508351290480898 -0.47790984829348581719 -0.29606381882285687235;-0.098113066907213941636 0.16039673211996433033 -0.33556143491907919341 0.41040855008959636896 -2.0963668352775983728 -2.4815865944331729764 0.12222760613519062511 0.4464529416238876558;2.3203495207183766347 -0.53108739607147670281 0.57657526773819312016 1.8650551444472758256 -0.88856137233114396157 -4.2818208751691821945 -1.3501823273711808238 1.3555205390391367182;-0.21684170246129857995 0.31182988956006429948 -0.71153436469052711022 0.91757019882570445279 1.8255836855529581353 0.55203697533591244984 -0.1554079826073475612 0.66539455591646867738;-0.30409739674183816627 -0.28134066013720071542 -0.45849550989176940385 -0.66378241904553281216 1.4253964689434248658 -0.33959697877627975648 0.061874501626995932757 -0.076928463898796969889;0.7788450180911216103 0.18790370853888091474 1.7242105360342645515 0.21620059269068786501 -2.257152385970248254 -0.77920467777036528378 0.57458354524627797133 -0.78729301451126632028;0.036815246080609320689 -0.12277329283365082113 -0.78506471327800697591 0.51067422791886885047 -1.8539120026489928073 -1.1990601456984533169 0.18736387736167639528 -0.50557624134525736004;-0.70352812848840040605 -0.30200804708396039588 0.42922825946224169025 -0.39647223594539532376 -4.6859981575629126027 3.7828141447050951385 0.48559321113944142745 1.0220219996404558138;0.24495024747925095432 0.13870582733962499855 -0.86147062435104337919 0.46402476221765392994 4.0426506561803039475 -3.9718513042404808289 -0.567859520046380295 1.0357453028141681006;0.86453444641362564571 -0.36514909183877108934 2.0254568254067906174 -0.64961954392360088395 7.0292289984970146577 -5.31578722196706277 -0.53779362876968450635 -1.1787040365655563345;0.48431557896444399347 -0.20106600449666009456 2.7195154639008167763 -0.029660410830954470063 -1.8806090387814782261 -0.56515417253624022909 0.67534759449317838254 -0.52360407188038382564;-3.4423017340695394317 -0.44828982167470965425 0.68110651111532738433 -1.7110272465913205497 -3.5034536350456781939 -0.31278415037260359766 0.0044034553396226795013 -0.35739893414221679535;-0.083896415839837618078 -0.15586000312269823742 -1.5282488152032236428 -0.05353201468697107307 -1.6984980239158047333 -0.7276742842957524271 -0.34358871573109484032 -0.80813912378061747432;-0.13968782416626873699 -0.71978695014102511696 0.17899740980644937571 0.06825148762323426932 1.4232422083239455457 -0.39466789644970262652 -1.109367950268820735 0.2967860129507644551;-0.69478715261605239473 0.087192122756026835262 1.1431602482225551309 1.3888316204974542334 2.1970763072857897313 -1.7747839569739489729 -0.29414574863591580467 0.68501025834144502191;0.5708173277987930172 0.46411802407619273669 0.051558221289446787283 -0.11676720524774192311 2.3761974199998796564 -0.67566327531914127658 -0.31752851002398346791 -0.39614175519385191881;-0.57329528139814389665 -1.3186106900888172611 0.048184764810082353348 0.1278724523065785379 -3.0604888140313635247 1.0872546358532633182 0.64889602146063196653 0.03861712961658163995;-0.0049935901355551530478 0.10585754930713994759 1.997305032633383215 -0.70204287219479566406 -1.7561770688495306203 0.14106981180008909549 -0.58557344757984763906 1.1721375772417355066;0.19352617900692972719 0.14240566659258907523 -1.3783258806152138831 1.219507344317699582 5.9237633654218324608 -4.4739172493544723253 -0.62905606665648361453 1.3847548551680448625;0.64238474104359610806 -0.82911302525338281821 -2.0399755581514256164 0.10687080360270041768 1.3754275747524076223 0.51520554031999044042 1.5882187381288652706 -0.56233027509073307826;-0.39853127972585716821 0.18640700229295437129 -0.080158967198079217331 0.85009038868478570272 4.7059704622341955726 -3.2884989494381731134 0.050132123931742385292 3.5628299572848582955];

% Layer 2
b2 = [-0.43432252819088618123;-0.0890827547561574562;2.6529803194001080335;1.9045515226611859916;-2.261221797012553214;4.3129533669454218625;5.776236148108246482;6.5522411829383324644;-0.89657427005114986862;-0.63190491631584000398];
LW2_1 = [0.6715474490671267116 -0.45306044089012620368 -3.769396589646650586 0.68282066375534056224 0.61770763233498238165 -0.1307555763512069924 -0.65498158008624418613 0.14184789992050331198 -0.58946230872129057321 0.40333370569081761214 1.9380514204236813924 -0.04149905297121715686 -1.1412521314838131037 1.017576270843803421 0.82692580346392519086 -1.510097260417309073 -0.30803372015973817799 0.40289813475668267984 0.045382678401559739534 -0.82226462048336335098 -0.13997369553876454207 -0.70516561510787345579 3.3391497936971124005 -0.22267106288173782458 0.76347993413754611236 0.051409816097602853424 -0.86171455100144322969 -0.44507252817279796542 0.7334754921016688467 -0.27626629815893022357;0.13436735821142523073 -0.25396497159374092911 -0.018538943041943336393 -0.43913669923632492331 0.07421511768894818728 -0.20987594129008416144 -0.035943824380729259838 -0.034139426230335771784 0.13480751295110346422 -0.082732878954010186101 -0.0074696172350739772211 0.044684966657028250825 0.004053485980667200124 -0.12175185435600806294 0.074554440770351518286 0.46783619692458089379 -0.066774765629075097384 -0.36744563254101531014 0.0076859926738198063728 -0.11841757488230655881 0.031396630763024270527 0.066153930455814025091 0.12395726820147236202 -0.13818841025909187059 -0.42274165814000003172 -0.17426038217887501736 0.38826758022448148999 0.1836262471202216584 -0.12362397382547556102 0.032487195840953629611;0.71569708279437616039 0.54396076762289735651 3.6046033570863480477 2.1870533305842942973 -0.64244644528188898924 2.3570257543042942849 -0.1372909371345226448 0.5828999674053014779 -1.5302796194349423953 2.2995437524270463392 -0.83096303685767025637 -0.044610133755146018364 0.49189602604334825564 -0.12473474559957503649 -1.588589158957523173 -1.3237236012724264977 0.56513466354042163342 4.7117055358320536484 0.057246075448267062791 0.56135799706171429779 -0.50889258067777487504 1.1713961689059007032 -6.015674253679043737 -1.0202571349352789198 -1.8830026261612293759 1.0463751239990419784 -1.3252053095255935666 -3.3173370980920999784 1.238975191577860846 -1.5057250373997075332;-1.3311677626128337604 0.26772614075075240603 -0.61132100979687375997 0.89769704337320044285 -1.0709360525196069958 1.3685623115992866516 0.67126347864362645446 0.49447679912367092925 -1.2289007621644834067 -0.57074511869984989598 0.26942387890771435366 -0.34740234107109568829 0.92387723764293150364 0.44420257647547795044 1.0976974799904732905 -1.7485373453515717923 0.55991994847274306757 0.60980900836536577891 -1.0724281668305701842 1.3710319487681801309 -1.0346290052772277868 -0.045722506632411341609 1.3109155322962846579 -0.20210809707815524661 1.3860983281626457764 0.15311580507265404316 -0.74881551123664957803 -0.4844641876480095255 -0.54859910151431934278 -0.3079955720695423671;1.0577975943190853769 -2.4007330233105892425 -7.4028479923070422686 0.077815635390878767907 -5.099337292327559723 -1.8400471505222122381 -5.0444183344987072459 -9.0971981982060086125 6.3249037632388667163 5.0076204863696354153 11.786388080505988185 4.591486673269354668 -7.46603316364086389 -9.4410664296481172642 -2.94520736347173262 10.386789603315824237 -5.3680872060899247344 10.416196124694470981 -28.297362056297217237 11.822245399331842819 18.492893951180434442 3.033086064111442326 -1.7102149689504926311 -10.130380252307400468 -4.3542479111299332573 -5.7787858842496548917 13.565782976156270934 -7.6285623637940149777 0.30472293798150484889 3.13349358391490318;1.0918459710966466059 0.3092935745325408603 0.89879457743535196013 -0.21032129623026210585 -0.12246138098270933914 2.055230580326284695 3.4661467762333320053 0.75011262804680411964 -2.0008292288481221988 -0.43698041502510348577 0.83300188608536740453 0.15045716124194638552 -3.3062649561451329383 1.5368257369984195115 0.56205459424172987681 -4.0453840004039998135 1.5344753568623219486 -3.6601932125716212241 0.20477419859219450626 -0.8072031121110140317 -0.30764894502479855909 0.069403787039516523505 0.065571599956310844259 0.07301409045736287351 -1.8551404279038987699 -0.54208632414073132377 -1.6237294706707998682 1.7082614577044394899 0.78306304908378798757 1.4792240165774537264;-1.7698064170817531249 -2.1111649082569510227 -2.8920323237350453738 -2.4838892918223272055 0.70110367441547682965 0.29080302297431009917 -1.1706617282878235553 0.84478672230825901934 0.36367553106180744438 1.935419604776270841 0.80579401779500892111 0.26627403004416200227 4.3397141596292732046 5.4749039349447556901 0.3907383155399691832 -0.53766610476774112648 -0.12992888040474581679 -5.8118469487486761338 0.42639507023781447748 0.21130304479183148469 -0.69016253398043170275 1.0210929351268462906 0.19040846216800999535 1.3252207121474228746 -5.4883879781565525491 -1.6492185773769350021 -1.2899801410927749235 2.7989291993885672127 -2.4436260669288394354 0.87474570899835513149;-2.9121083548025530341 -0.63338409662344330453 -0.53416549233420296261 0.033964867890356548186 -0.45516310331257864297 3.8080832821017871481 2.332606964232379898 -1.6126319530160031501 -1.3942773885479002871 -1.1061875429392440395 2.1868282500859304029 -0.047952112310219743851 1.5390970228723122037 1.7508394746818807253 2.5123839641487601959 -2.3374206090315174933 1.9414820331264242004 1.331818152954729273 -0.45134745901402034685 -1.3271935898154523237 -1.1215820823187596655 -0.69495301873436488016 2.4466704776226553264 0.33517719103834470173 0.52533850974502316333 -1.3169658182648504852 -0.74013575481398918843 -1.6160258010723873578 0.76494333332086683619 -1.2543443250401311584;0.44817685162228992901 -0.78976518723232580488 3.0252499021621077624 -1.2665712337107002394 -0.1402684363551462976 1.8904166751749604813 1.0996686347669391015 0.074889749622569862231 -0.16142742683829991446 -0.19889437505074764045 0.76284358562566101369 0.37271022629454081398 0.81039587678427826845 1.2215085285929780934 0.020109417208761293933 0.028862905857964360479 0.92648478430188885291 -2.6247299285793470602 0.088805318376468100894 0.089181547472448594038 0.059863613198036895457 -0.33932849913307699952 -1.6483955785607100619 -0.91324995474747228119 0.17663102871102800973 -0.04045225401834757345 0.74001279409347053839 1.4748144302234345027 0.06715066115818016379 1.715933814999659468;7.1511308553734442839 0.95828928748082886635 0.55880374545313482582 7.1833226185399370323 -2.1248999751633390609 2.1795732442515678429 -9.1446502938911109482 -2.9191715462259000269 -1.8903884423408807702 -4.5432691962142328634 -7.5045019864529978193 0.22577839145934988641 0.042622060926838650774 10.144153488386770334 -0.14652159232379721732 3.6047777703050143394 -5.4590129562949316622 6.3755633909480842192 3.0127957826468403368 3.8778591762380076879 -1.0146574773249210644 3.7110147770662247346 2.0367854837903913712 -7.3902409292578292721 -2.6600811050213875042 -3.4226082194675440107 -2.9251889730990403571 -6.4809589664745752557 6.1766431353103090629 1.2858409639672949698];

% Layer 3
b3 = 0.66414891624089877897;
LW3_2 = [0.19837301068666041148 -1.4284846366915837645 -0.055134710167828150651 -0.095322064811098144999 -0.0021107284745129342371 -0.1214632898822063517 0.062158936659445350459 -0.18792318448147624088 0.32803336724183118633 0.0081076748165554175102];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
