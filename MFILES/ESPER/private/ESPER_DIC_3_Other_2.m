function [Y,Xf,Af] = ESPER_DIC_3_Other_2(X,~,~)
%ESPER_DIC_3_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_3_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4461039227037455479;-0.70198917716191600036;0.5725542460543898704;0.31504747856117643057;5.080417127737785421;0.52715993156738660819;-0.23181510808941729884;-0.18201608338703503809;-0.048696235754446738631;0.49831329759134929125;-0.92642181363714160014;-0.82433118819299466828;-0.38611174959326971523;0.73532070422681317101;-1.2875179829380822838;1.0140079265426051869;-3.0648177570068781961;0.87863817816849454356;1.9125388323243477373;-0.40106325350422594722];
IW1_1 = [0.16592405883236729935 -0.12001283471705463668 1.4687975444865508656 -0.80952250992231733484 1.0122120332992647906 0.58557917981490759107 0.89957356119417375417 0.087500185412160744192;0.01533264984455268154 0.15640122229319344815 -0.044199569230394211705 -0.25802763820581881005 -0.42560761671511726512 -0.50245073388815997273 -0.9289507210562398809 -0.11645354650886076409;-0.15434121478471812816 0.1124331964920157606 -0.023365997478669894849 0.58255059815771192966 0.55226586906171748481 0.41433294045204371869 0.042645669358525616077 -0.1012071191776409973;-0.029184208531081723415 0.020772387881310694357 -0.049271666966137585286 -0.11133373358625679728 -2.0346144611060723584 0.31965847828767318672 0.44586508518516404509 -0.0029343951518212211919;-2.6722512803255376035 0.99488662397470883914 -4.3124458852057374614 2.804317580151076239 0.56460518643200707789 0.30041429692968546483 2.7501912584720060728 -1.1806662906938556468;-0.066245183763387824327 0.012361005778200477578 -0.062785904363905034598 -0.11582543589906324488 -2.0538560893125268336 0.37685893519301527643 0.30211774231427968029 0.096804710597502438563;-0.12289716284932655777 -0.085567740711474174486 -0.13639480307812901216 0.1213169164252542731 -0.71649890689976358793 0.49856530762377992971 -0.10089837572320567438 0.4064072148061230183;-0.46987720617818462543 0.2697338259296755969 2.7614318522505127973 -0.32889447579212371942 -0.46701959332004622238 -0.032730446518939942946 -0.14848205259033930847 -0.23669734173053239012;0.48653776219955491289 0.33759038734577717644 0.092250376110318610401 0.1008462812830122346 1.5485025897999737943 -1.3746794621050217877 0.54395282534038114086 -1.066714442458889911;0.15498161965318443811 0.10792420123404748711 -0.13690154991312744603 -0.010714367256189771468 -0.74059312778017027945 0.84910623325186840304 0.0712756457941579602 -0.22883972917406630865;0.56175815353232905203 0.0175907528538554285 0.33745419814368382561 0.48815870797751231835 0.58529686493870236585 0.00081943954946756794762 0.6575970896279070832 -0.1936040701030537492;0.28073295309795232022 -0.18083762780715134655 -1.5962224374669715665 0.5513193578794022276 0.6256616856138649263 0.41526207567515283081 -0.066225080793194071593 -1.0848980170762558828;0.013433128136530133462 0.05211018128938027516 -0.049687140856155595503 -0.14351132571588468001 0.334230455081483524 -0.29021986215361234018 -0.83301216018389245832 -0.080335624173030834028;0.19957457752593360523 0.25088763504106442737 -0.20868307233760230446 0.024383239253512260791 -0.055436085583476304994 0.82498714812215956371 0.4234172919741915897 -0.42254028250565711655;0.18181526548611123828 0.037538118515970178568 -0.12079990633185022642 0.30097063123018780173 2.7621039980783423928 -0.81110990162789919911 -0.024673543177949050498 -0.22928470703068715153;-0.43760313353797397617 0.29827375683560403141 5.7792849642535282229 -0.93223140752687772004 -0.99086164223783756988 -0.1061311873673699141 -0.79430247637391582227 3.6185843177570151674;-0.03076958746985994711 -0.12061293825183494466 -0.79407107564009549172 -0.28515919716233062431 2.5162632091796104383 -1.666809746940653536 -0.92904913175245906753 -0.099445682592761805441;0.21645671715597317175 0.31818172206661116119 -0.58876240525173217932 1.2623318533402525521 1.203590142379472816 -0.054856176895299181562 0.72256683153982559364 -0.13925193936332766476;0.20049525626021966196 -0.43550643239876224433 0.27993866733413563797 -0.56992281966812874394 3.5263865300420556004 1.5398749359888956878 -0.84640605746640684703 -0.36728396966976123439;-0.004995317193693216834 0.042866445514317404186 0.28005440531459552256 0.09978974823446130904 -0.84004046006504762278 -0.51761212239405240965 1.0886247785687357403 -0.14330749712228324499];

% Layer 2
b2 = [-1.0174269238481128408;8.3025404709226133804;0.16722003260724555007;0.38283228308630229408;7.3337191618074673016;2.2697371072140168913;4.920751396583396442;11.401702315675649402;10.869914509258691737;-13.926007732915280712;-11.257732738304509823;-6.7641296580716971931;0.69777639178668127151;19.874244312985204886;7.8750201526948062636;-2.7873500712525660639;3.8754329948067360867;-2.6342516490015643882;2.9460722041468572208;18.556224317098315879];
LW2_1 = [3.3684459860688047428 -1.1777245357415389027 3.2109859115054879553 -2.4481712550284999708 4.065167684914872126 2.2072600334982204195 0.2189852258771487481 0.072367134288400011832 -0.68519431618730886058 0.75021578512907372005 0.11762351242229709958 0.27796155058176347241 1.7889126413592968401 1.2303424650518473005 0.59276107995217619528 -0.20793041650910695783 1.1796979247906460575 -2.0964767719829393577 -3.4909523668343047653 0.59948664813214191938;-0.79022624023939480598 -1.11705305467457916 -10.894764276880909648 -4.5408051872886101563 2.8558126007243784805 3.1424899280879441399 11.152341487685996313 0.35527252581179225022 -9.6652040123651943304 1.2801733942508963793 -6.0915425934529254803 -0.96240553617263968622 -2.4306887870393589779 3.6665951758577848274 -2.8850241419420856737 -0.36297729673102568926 9.6907954222346095463 2.2652720684244735949 3.8233497975212586972 3.9141386981014312241;0.6478055216086876511 0.48792428302750057156 0.60493857056901900737 1.7244703194125066137 -0.058253373739205097093 -0.17534619382061475412 2.7208980995048879237 -0.16316643537859112922 0.712099680404197799 -0.51763549892566962374 0.50782114832896296797 -0.049530196428159783961 0.18711301825251758224 0.10088030721379259713 -0.061398384504934649941 0.057750721960479083072 -0.70179909278830965302 0.18297145328545971754 -0.0069047183767510806468 -0.3154652386746400472;0.46276752864537745724 -0.090516853851926051822 0.64445011534600737946 3.2124603853162287947 -0.12934310708416754676 -2.0048752904242399531 2.3533220239402856677 -0.056559801503094968289 0.64337185931627305369 -0.46464758199650274539 0.30795465796196658248 -0.14461230195734167681 0.90065525098090271072 0.028383467313612388561 -0.056461071351277904162 -0.059880018940839704888 -0.46700258957970408602 0.018703596831545522827 -0.021704579605904734257 -0.60874038036927746731;-4.1281729956932657899 0.53514503970683702239 -10.161469021850226824 1.4826695933564995045 0.96276112254576218241 -3.8306852237334156897 -3.2760344582314653294 -2.0417092572602002498 -6.1707819185933043826 2.0343208971828006248 -5.1453864193749216938 -0.29701040777013743011 -8.1978193717967222653 1.4907310812289098489 -0.7229779011915621334 3.6013459509509262446 3.5879168672301005039 0.37406991166752490141 -0.21548074765015845511 -3.0843609319276477088;3.942785227377098245 -2.1208830117740395949 -0.51121568401734396314 -2.172627024919475236 1.5374835285513017702 3.1703526130389492188 -3.6206996487707256982 -0.95076663729600996433 -5.5787929249391234876 -5.0240324890844094696 -3.9751798481972886457 0.41785596186528817242 2.1084896917921360782 10.326921448094227074 -6.3493637335279036193 2.0969279933809712446 0.14565988860160924978 -5.8133198539512633829 -4.3103558030375639376 0.91589532807339946174;-19.474625269825477147 -4.9672992496106997962 -22.777362036104424448 4.5171110170272186224 7.7923139291884009339 13.643489791569166414 0.71225978334807749093 -3.3775189098125113496 9.3862897077246056909 -11.807137791993566722 -6.4807146601232412664 -5.5768969479880832196 5.0503647153326438612 3.7838234798180194751 -3.5819613180269289643 2.4293258720902293213 9.2599301899860737564 7.0233409808357070148 -28.567910640940265665 7.1614524670521815253;-0.94191386664094756132 0.66666715465385140149 4.8566451811827757723 -12.850035138704017257 -2.5082041200361864242 4.3729453725834117606 6.304872842993842319 3.5388574863014814476 -4.1433164409828870944 3.032847231528284393 3.2968575711279224372 -2.4272201756912115123 -5.7356785828378873404 4.6727803914736627533 2.1335058425631614476 -4.215685021186074799 8.0973010778142349153 -3.8420707370302396022 3.6516140353876509472 6.0684958545309966027;10.752673838283531182 -2.5513027297734311993 -3.8189209625983617791 -0.52691651084465518373 2.5373588352984288719 -3.2814508355598599465 13.645264517300638829 3.8551134482740154752 -9.8608342940059099391 -5.5821608700291571736 1.1590224182250579155 0.55828585241096162495 -10.853026087643726783 -0.81868063496833776149 9.1654974979184284933 8.5880639450321751838 -5.3214723489991815342 8.160924491772210132 -7.1620467184630340896 -7.2969650937613419472;2.6866521401370722089 4.073760890340114571 4.063852320090791892 -3.1285816337064229486 -0.40570121228220012988 2.2294916289173967172 -10.464175985866187801 0.84635484513356895597 -1.401955326089952214 4.3172291730113325769 -6.6077637179436772286 4.1351249493867134888 -6.6092088370145294363 -4.4607936742815290643 -0.099805651636455550157 1.1237214657931802186 1.0038452157743473769 -2.0156124056763125019 0.96726415521970698919 0.39914396138238933398;6.2414945078748198526 2.2243757518737239387 9.7499138922100474502 -0.45180774441378696027 1.2676233693597829255 1.2670158027194129424 -0.038536332060056743831 -2.6173781449158006751 -0.82501817250222120315 4.3414659571589986342 -1.6251410962389472026 2.6189081061740377976 8.1318008698364199205 -3.5184093735716630569 -0.016114951876879814174 2.2243077851200556694 -3.0345947287503802769 -1.2048216529907456174 1.5611209583541965085 8.2449944736906282117;-2.504160119129858586 -4.9072265060705211326 -13.604070244799478573 -14.112719162634858705 4.5217666622904797435 -5.9173336564139153992 6.0346716502598374277 1.3583312386484389656 -1.9510572278311377747 -5.7306344680609244691 -1.975591724131096294 -2.4504630821811774766 -3.8950835217508510411 9.9343053374537753086 -9.6771252682490889185 -3.3980051384858929175 0.054735650015564116244 2.5387748723404066631 -4.8064789444408617669 -7.5375880476115302287;0.33125025654093742666 -1.3127801476010414472 0.69517471073227010692 0.43756193836153928212 -1.1816562155620415897 1.9838602351149816627 1.903725113310995587 -0.051730762325097517929 0.55886589393219610056 -0.5211075540272525064 -0.077790319290441070632 -0.22772146662452613652 1.9750574816448445148 -0.21562077779119062648 0.84757759831099643844 -0.25609717214112925898 -0.96411242738832203525 -0.2167234327399275573 -0.34027076922406507276 -1.4443520365045285914;-13.916858154177749185 0.97687153774980584053 9.9995938792410932194 5.4968375708826737736 2.3480365917255894281 10.728417029815663142 22.407690000406354613 0.89271020353519037194 -0.016931738881082711995 2.0375657757201603992 6.0168747225418446334 -12.930074391832077296 0.010913041862331024356 -9.0309714959693021541 2.2271926610247914091 -12.61517886182056003 2.3666334154195474149 -0.48956569940046906764 7.2187456144375312661 6.6235248869183536158;3.0045965442579438687 0.14779488979875518573 1.9549206855433731711 1.6274587417450905313 -0.38499161329684195021 3.5924948435016559323 5.3685717459426340881 2.4471013543530601986 -2.2272194086026799731 -7.378656441054451065 4.6041252190045174331 1.7863296750591395323 1.5155801899687852963 3.4758593718381316506 -2.1903081829816755111 -1.530130976127300757 0.62824486910643573268 1.9151458366030778002 -0.13285864402249880634 -1.8719159807816565522;2.3134100692439734104 -2.4615145019615503053 4.318753182086320308 -1.3249459370542984171 2.0184244242582947138 -10.944432972075276211 -11.085640910100069689 7.1240458647367246314 -3.7386135045561568191 6.128791162656731295 -11.552787642646944022 2.8512836546444484398 7.6132512445028970305 -0.95975403341317400141 6.7069474080410564909 -3.5432731681669951129 2.4948268557248622912 -3.7398403784703906361 -7.710720658702899577 5.7535062464981443497;2.232579453758765986 -3.4938488565948837561 2.5693782419028177166 5.5344345187436410072 0.88995411941975877124 1.8438647533100169795 9.3356787110990975265 -0.60780573642586388505 4.8895423475323038787 2.3083023440831067497 0.28791830815919561282 -0.17335601453261673122 8.0503225543781056217 -2.080612045998236681 5.7931649044564546003 0.82817397293111616463 -0.075913486449387251875 0.13663915354458427975 -0.097599285270436070272 1.8707870748952977191;-0.19846148235481531064 -0.11070583825715633874 -0.5401335126405024667 1.4979644678934023183 -0.31871943953952741602 -0.95541190528202180055 -3.0816521170802153584 0.48300123248843063184 -0.44170297798533453282 -1.6917883660595773865 -0.6827436542500612271 -0.40952775635030091994 -2.8233643199309037541 0.65010703167653449697 1.5428060971098922494 -0.52940949658203884098 -1.4476321141232899592 -0.56293566714131004769 0.19975712650564458883 -3.0142708299086229395;-1.1796462906160189998 -2.1718537403871733815 -2.7595559664192994553 -2.6957197797445320298 0.35401504679488710048 0.17320739862336831383 4.8493063742324800103 -0.12190049631565687271 -0.6136834014460650355 0.26615135384946325692 -0.34745234885809811454 0.21465478451709044116 1.3514821327782138294 1.9973633551426142052 -0.51323991943190694354 0.2144135297229793069 -0.23311689550545730554 -0.56274270839206941286 0.20836327647811839214 1.3670018494439477585;-17.800190442587648931 2.6421323275464012603 2.3312360934315812244 13.092962344919984119 3.5602189019620373855 3.4143514280868441091 -2.4228849762490152209 0.83828268738992095521 -7.7719026563531681262 -10.356029012728255267 -4.6765737176482229387 5.8854383267862671048 8.5486156691106351957 -9.8065272295294683147 5.7738298367604308226 3.3493069255905072446 -3.9102699052336054031 3.2318641596895645307 -1.4698246625159050449 -1.6496991361233892537];

% Layer 3
b3 = -0.68796014705059127525;
LW3_2 = [-0.070021131625566584988 0.0056599602662219805627 2.1250178895870970308 -3.4055668562262302324 -0.0078734966323317171627 0.004453853831113151196 0.0020514033875411535023 0.012717134322580689321 0.0069930609649572908829 -0.51395768836862409934 0.14987733795588237262 0.0099023692080285000833 0.42448753883763412631 -0.0019007845931931226409 0.17330654739647816109 -0.0074910463631605523141 -0.096916595916406153566 0.42356117176711327588 -0.17447040877154842975 0.0032580206664783832593];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
