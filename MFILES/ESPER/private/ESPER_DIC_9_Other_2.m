function [Y,Xf,Af] = ESPER_DIC_9_Other_2(X,~,~)
%ESPER_DIC_9_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_9_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5753658560928087695;1.4263300927357143166;1.7047664862468203673;7.6779499717501336065;0.67594981828315681138;-4.4048789603224163258;1.078330729814040545;-0.33379918325330548701;-0.23814005695167281274;-5.5916432990215731991;-0.50063645756281738297;1.1765743963930865856;0.85336208497533172501;2.7991332676051530193;-0.16861255079382136968;-4.3715204482216245552;1.3592051121252439749;4.3827515317506797743;-0.12860174211012720402;7.1614167060708631141];
IW1_1 = [0.48055245296349718975 0.3054887786126362359 0.5487063420521290924 1.0612582165385437971 -0.38247736648124636138 -0.93158698338425105501 1.0027596787154877678 -0.27712103404982868504;-0.039283123916630725836 0.159224355560360048 -0.093785313427588321011 0.19189353416423135523 -0.076552690611626172945 0.68289427343890773958 2.023527114523299808 -1.9084902115936863698;0.416058769739770129 0.30084817760623649985 1.59283649113493464 0.17110462355078082108 0.47197034119595687729 0.73436864622017061777 0.043214837022997262816 0.50978561686556334021;-0.20058451512483457813 -0.19987253881224231744 1.4040781136343687407 1.5523948868064718631 -2.5738057163957783757 1.034533658864035699 0.34724817050062245505 3.2875023407981833756;-0.13322249314111142549 -0.75268570802193124347 0.37349945249014537829 0.068808114309459475488 -0.60261540621515130578 -2.1555791903622107952 1.4500623442698195031 1.1955859391805796488;-0.24185236722658745578 0.60232309784636273164 -0.6495701260509514352 -2.9685587080344086885 -0.36498926932868902551 -0.88079986441366131533 0.4415552569997580612 -1.0554908108169789305;-2.0096730161044762397 -1.1983593694810683594 -3.2246528955369742064 0.68394177608307415994 -0.82116453179126258632 0.50856102925061674735 -1.1283852587725817784 -0.95417637985677494772;0.41314506938832362692 0.45638026530870279274 1.4402343928168934717 0.15021709998869883784 -0.77495958139207210547 -1.0053473847682019571 1.1976735999743843841 -0.29491552421165767583;0.1370276370635195029 0.56652179427179627513 -0.18277853680079164667 -0.044590917837496309162 0.13786679471078217007 1.6191323368075372091 -1.3488203523277959572 -1.0511978753742001746;-0.37530027980210328709 0.18571423429027467122 -0.69979090069792271311 -3.9438938312952864784 0.69813017568136126467 -2.5150953383013670006 1.2892678744534578072 0.9123807023439649555;0.15091387762392041716 0.30836063155481036047 0.42520638899197810145 -0.48896622824461749568 -0.78438232263434892744 0.61355926772127056257 0.27621015312450564183 0.090024507649223303729;-0.5795227556155102544 0.15657265954303412059 1.5660622019359873303 0.058526654282058471201 -2.3163324430137461896 -0.2698899486506655121 2.1556872642943814 -0.47114322281069248577;-0.12297690142115409728 -0.60152714491113734585 -0.9067202074130585876 -0.23767524571619513818 -1.4104040273668896344 0.10597601964359230908 -0.14828991196894988902 -0.13838327957851123684;-0.21252204459791901314 0.34252859894657883277 -3.5001051699226666258 0.52147536182239195846 0.018351641534569276132 -0.87787986049773336639 1.8167494478014882819 1.1862040595084601957;0.039909812786128914808 0.050225652815214461011 0.10623309983213539975 0.043537448439982813497 0.028068914193037489135 -0.0038819980085854329313 0.17611881751825586573 0.092606565822718645009;-0.66163601802854443701 0.73082829511389812982 -1.6939344170957202351 -1.5172433619408278727 -0.2058075734556832348 -1.0450489955024400146 -0.0960102628250935064 -1.639776205658589614;0.81759742183356931555 0.45393959273231393459 -0.056341281107314657162 1.0842211966286012803 -1.0847970872889591831 -0.15210707197566547544 0.74188267087632575603 0.16579061644566572831;0.13991388185849379378 0.033358066132193678333 1.0715512289254982559 1.2033799590269638191 -0.96183509110990927926 0.67018137238135044864 -0.29248231511292110962 1.2751248886403809824;0.25352227098648832948 0.18383817433250210227 -0.75165949529742115409 -0.079811738381170130308 -1.8478791045661668857 1.0572256839122426975 -0.52563405208758007259 -0.43622781635517676735;0.2655646534233795375 0.079548367732925659435 0.36839967904054365944 4.8715953400778548854 -1.6223733700488083276 1.2447218797976573601 -0.44719124181196812096 0.39992012165031959325];

% Layer 2
b2 = [2.4509410886398637075;-5.0539952499218259163;-5.0907501797823453416;3.4091226461774808421;2.9022379201264087989;3.5579066015813580748;-2.8461551065511603298;4.4314035163372649251;-2.4515181817543592047;1.3684750693071672245;6.0169188081143420987;-2.2048999711681602776;2.0885514409676626535;12.429457046335357973;-1.8734006096850681633;2.9740546392269258114;-3.3378320922807898086;-2.1196892755959484411;-3.1532794768862428825;-6.9316263212937849758];
LW2_1 = [-1.8728756294655597436 1.1140089905418231186 -2.0019534539890249114 0.66755513116404630036 2.8659787298439782788 0.6688088764576755052 0.01317099443555078131 -0.36653051654229135137 2.6265929451891469881 1.5053007901571879845 1.3393146427097148976 0.10176968149958089127 1.1839938517356769498 -2.0540397773285183902 -1.5602132209210242131 -0.23459085845053997965 1.5368016937540514011 0.75751705962278736983 -0.44842965215695163028 -0.35835214908660961708;0.18748274154086638776 0.99151326397485273212 2.6168563354831317902 -1.7067685745160168231 2.2541507008750119034 0.46655455354095920484 -1.4808489310444346021 -1.0082058810991967324 3.6340073580671847786 2.3852717690133804496 -0.25087250488593315634 -0.27077273127326390023 0.88714867908158390186 -1.2311512456971922536 -1.6521159277476502591 0.12298932001404301595 3.5520512377745947497 -1.2208341644416487171 -2.0082443967090299886 4.8074421181589590546;-1.1941423371817212473 3.9940191532915187977 -1.876898787432043969 0.88054997893638509154 1.4698166412964546179 0.087854341662486859499 -0.15474368009974728833 -0.93407007179442624878 3.0902284311053196397 2.4320821229796916185 -0.29290199010853396056 0.018241636028809557479 1.6090041150520393298 0.41898411170718941055 2.5627044836342554035 -0.6046674861087720787 1.6826933467532798616 -0.0093302025953156814131 -0.85235452558653967969 0.12302843766000438885;-2.7914322742661239474 -1.9712873326099453752 -3.2014587659831796884 -7.8489633300983596698 6.3951628613489086561 -5.9714463330559359733 -5.184941053224477514 7.7083682521174283764 -3.2651434443669500318 -5.3800191835846638 -0.25900072301061288771 -5.0210857968066164858 4.1536687213575467226 2.5759190053750855576 -9.0036438655098809392 -5.160476077717554233 -3.6090539238995265059 -1.1034922518986436391 7.1647410884338542658 2.3217217016773314953;1.1056179173497870938 2.4518429500872249704 0.75579095314587363408 -3.6684739916542210558 -2.2450188220137530237 2.3626556872914483698 0.27752618028732356503 -0.06260028342939466528 -4.9347882901859199123 3.4550705975128495062 -2.0180692894468976739 -1.6350532055623925309 -2.1494845578167964817 0.82329101553073591457 7.3801833199027466748 -1.7706049386247135757 -1.8418734279354900263 -1.8725657425669131051 2.8836327107753190191 7.0517317316631524804;-5.0828288044370815157 6.3230488394552475384 6.5127085901816723634 -3.4293138905388458326 -0.8760261849972771353 -1.4126664659085537146 -0.66020800664393475277 4.6148882582465953206 -0.614745026833238839 -2.3209040793531974245 -2.7115820470419533805 -0.81367587051212242333 4.2877176243214920603 -6.7458660215765586798 6.4972092129327236876 0.076628548479951499872 0.59877018285159999689 -0.37435795136253030568 1.8631852092928364861 -5.0066488206909633973;-0.48096569480115541895 3.8616716785571334469 1.0795026302971024723 -1.617549390318554714 -0.42180639936518421473 -1.4402657925815505191 -0.15587407375118700337 1.0518593785790213424 -0.023760240603066928172 2.4837525408586689224 0.0065250641882202194827 0.5798218273257629285 0.80261489346230485697 -1.0334386599330369627 0.32522919322730364788 0.52836970356991663778 0.17774354275144252369 0.24252365853896704073 -0.23314351685903436651 1.9704928045585889951;-0.57505086794026594177 -0.48806350053060837402 2.1941329195337186952 1.5343773285891448843 0.28595895880193306082 -4.8412032760877714566 -0.77340372421774139511 2.026010390158595964 0.82488479520243596088 -1.3449280225726376603 -1.641405417712476833 -1.7631177132757027692 -0.38921473541159024023 -0.84581307300571739738 0.84866931778836041111 4.4328744425436479304 -0.26854307886154477059 -3.8070380843032687324 0.87176372890877396049 0.054748859912989653043;1.1018941772359169828 -5.7568827696977642461 1.8674186672560073585 0.59820668435438006938 -0.40568589605098454021 1.4620144541130835059 -0.63615430944867423779 -0.13952603209768435488 0.56931826213035507944 4.2611375834953832964 -0.83915228054338275587 -1.0357741991170752449 0.7099374672315946766 1.8116856011382018732 -0.68882291889075319968 0.36538307905661648878 -2.4279123568361775654 9.6247600236914490068 0.20513883214164060909 1.621633234807418722;-3.1971067591338395708 -3.0060532592597448698 -0.88892157575697783312 -4.3103703140390274839 1.5804515041467452896 -0.23219154290592275425 0.67991331305285662712 2.0948256176298678533 0.58973989876076282624 0.36097776043702661797 -0.074576458434880144033 1.1495018948960347149 0.34898257163578677575 -2.8777099172748790146 -4.0661275653054200774 -1.8000630456398185597 3.663546357157934974 4.1638137474323055898 0.23767925400219469534 3.3038368281660304149;0.2041889411943570154 -3.6757812369107467632 0.91793894873231607345 1.6486628010237602826 -0.15471657546331035737 -0.54614738880975510771 -0.11811410927650949076 0.70229482997616121676 0.22144180454740494679 2.6153873973987598056 -1.6819774666773716909 -0.40780511317989531772 -0.3013312254533961343 -0.65312177357508771625 1.3782615116549095102 0.046639285862099075231 -0.39896627615818563983 -4.5175049142780334677 1.0576817425650248961 2.4976052061065607823;0.22710679842494124747 0.31766621982801518387 -0.60472103853791858707 -0.27337968882797836212 0.18646592953486901267 0.69730828623071627881 0.08078243771713709831 0.37457207069387715714 0.11934755412429817745 -0.4423303942779023834 0.38031883330966897994 -0.09676551708494876558 0.34448008520205425365 0.41550015118634414657 -1.3341877125337413545 -0.50285740562608660653 -0.087503322440551561945 1.9514320583713473667 0.12630284568879468488 -1.131532551350089788;2.0492319809567676181 -0.73151882195114659169 0.49830157685573139847 1.2097658702238769379 -2.6737110290035537297 1.4293797948022342048 -0.073381199907670391358 -1.8639384339130435908 -5.3527318372472700858 -3.2175146636581266613 -0.40276306670724060233 -0.63055683727001632377 -4.003612177362133373 6.5902653323080686576 -7.3367731360607155722 -0.66217386039784742469 -1.4949758885402457675 -16.230100248699351084 2.8197144270567902069 4.50400938043116561;2.2506183760972904295 1.5018460976603036361 -2.3181642809824269946 0.96831691675752140647 2.3796799601782985256 2.702678752262356987 -0.99363633402345286072 -0.82146279647483400055 4.2206607304391381419 4.2941606215873564523 1.9343805086041643282 0.4107588353560479022 0.58313438845279164102 0.2967918744263922104 1.7151669096630657307 -1.4344223530485054052 -1.3858688899264719474 -10.119936387579718584 -0.2379951156026186565 -0.91054071230798294678;-0.52895352940081563631 1.7110531233238024384 -0.97636576971670241409 -0.69449052379528386503 -0.52632426379532415428 -0.024274958734674174921 0.15782591236293139203 -0.98384015613472985962 -0.33438741718076164799 0.34505203560123298701 1.3825979364318308207 0.4557000037410665616 -0.24879959718842115102 -1.3842580066985570308 -4.433842195545442344 0.59086621398038130515 1.503852349520880205 1.5850562558628122911 -1.8031869733550562884 1.1795021583206501958;1.2174951740346655615 -6.4336478714836893289 2.6179218743174561546 1.9168921525272339945 -1.7627186346924872407 -2.0285940884976909615 0.51158509609601909851 1.0516306295627431133 -7.6330233024734734926 0.57000230256601824852 -0.89545392907712784147 0.30711538002865268471 0.23819498352600504409 2.0699358135598462383 -1.8365188990442293804 1.5132565304876903767 -2.3114624496366777961 5.843295379096712594 1.6782043599474707474 -2.0546913016313341771;-1.2499023335605858875 -1.1799779494626529974 -2.0844760834710984732 0.39826950590195270285 -0.49573273247311694378 1.307239216747231092 0.27816332382434511006 -0.15601209143202349194 0.080556464257256918393 0.062033790477041661493 0.96367756113213487446 0.090922277375868262861 1.1947184576694389602 -0.10359491341347745741 0.78356620738176852026 -0.18727786835264781384 2.1580460761516180312 9.3813553873911530445 -2.1386914490779500575 -2.7748968154189666002;0.12232722701118645126 1.6337279684571648364 0.33672182722221555284 -2.6193357206193312869 0.46899300525206250034 -2.179157186297510318 0.28388907722260481314 -1.6618320533261274896 0.10498941531524118298 -2.2116016068049413335 1.3423586313318685015 -1.1399763768835653455 -0.43154630615505301661 -2.8231479603002864742 -1.228342851739282926 2.7018585870010305428 0.32233422007984208202 3.9017628354135331925 -0.71517015249809179345 0.4867626389971512757;1.1750948236629767951 -2.0372053021054923327 -1.2132315635568635681 0.26718776281189815514 -0.3823763905557892584 0.33947482253715438594 -0.35819061864823326102 4.0897637095908452309 -2.4810592141459180127 -5.7777244048374791774 0.38885787842555591398 -0.02152379729923238616 0.93301869017473615386 0.08065140608168980263 -3.439980448056456197 3.0907010728842791991 0.58407545968573537642 -2.3643744795603840458 -3.1198125017061073549 -4.565198783058188603;0.91780504439118115734 -6.3191931579051692225 4.9459726841380042828 0.14764852338633260853 -1.5844813948929761249 1.300504982526734965 0.016387175234699416504 1.0774519808155220701 -0.16258593797907608391 -6.3328922199080350808 -2.3532107116788325563 0.12890101306446011264 2.2579858298457344823 2.0664023787992569225 1.7031583800521288286 -1.659522885396857772 -3.382064394632959381 -2.2950763767412998284 1.0741975235598448801 1.7273831619673134519];

% Layer 3
b3 = -1.806316400608045214;
LW3_2 = [0.064835001522907831362 -0.029924504016668400375 0.15896830148228854873 -0.0044679830477675494885 0.066199057218533058355 -0.028645507181014218112 0.37352708830873371237 -0.072538295703166569273 -0.12116586077436419799 -0.06800850449714958279 -0.2773488414335379959 -1.0610930528179014498 0.13297350421252318586 0.052576113451734775295 -0.48263873769749104925 -0.060892021205513756354 0.30807134080410708554 0.06765152766510229565 -1.8425146351283461232 0.025137267420811990754];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
