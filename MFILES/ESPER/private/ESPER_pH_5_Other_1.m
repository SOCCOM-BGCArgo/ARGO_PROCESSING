function [Y,Xf,Af] = ESPER_pH_5_Other_1(X,~,~)
%ESPER_PH_5_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:21.
% 
% [Y] = ESPER_pH_5_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.0146819962326492082;-2.1461090635370205781;-1.9588275409537885263;-3.6061826182000955576;3.0029708521069649052;2.2589502918408324028;1.0459404775323013492;-2.2602723234340578173;-1.6926853388876907935;0.96486074705761504244;1.1903713039396228712;0.43214119856478733217;-1.1512269798170944313;-0.94502062913875917172;2.7491153947943223201;-0.38354451310112186446;-0.91021525015917048584;1.9896633160585066591;1.7239029139191055506;2.3663687166028704034;-1.4936196714670801899;-0.53170440063063328928;-1.2301688946012696579;-0.54689614177420176055;-0.72868413337398429963;-0.84947408446838301721;1.5217704128820002119;0.49569061108217182809;0.47040486364704875433;-1.3718870400276623744;-1.3469890006493938639;1.2981608633298105104;-1.7410684218312444393;1.4838939483934505681;-2.337580616974379133;0.9529694743037245841;-0.50587341887556236397;-1.6022133824734010599;-2.7078298933824855865;-1.6270970205028105759];
IW1_1 = [-0.46896555334688128092 0.17762784682889626309 -0.97980211911479564435 0.23077674224818439663 -0.60950167481112493828 -1.5477222749386481127 0.22427093509733739274 -1.0818489151334085285;0.83464353397116286537 -0.55363066107629543833 3.8807701840638362256 -1.3652659171072354383 -0.08197393867947679047 0.79146093615386892139 0.76987074329405302819 -0.42956671319529737829;0.72774306377455577621 -0.50521229195651251587 3.3051591322692801533 -1.3329677771626267102 0.05283119672844231729 0.75752276879693980494 0.47410565071064125764 -0.067840425677112445313;2.0475250398991553524 -1.7405772855754415573 -2.919597399664972226 -0.31132121724311012656 -1.367120834492812298 -1.230869590401921787 -0.35163442295830837914 1.6302017839659517229;-0.13121390792114598356 0.13240545952966858989 0.24400636026607339102 1.394389741373581959 0.092674506542349349703 0.16224153559332671337 0.49645788057418688277 0.71718164326590061464;0.086405114475341035507 0.26073510294221752259 -0.85256671399608596751 -0.28261382503589443926 -4.0677354350033754216 0.33312823160777255138 -1.3858448536134606588 -0.012896402817065326374;-0.030636381664822052301 0.010373656959392713039 0.69447435415351022048 1.0048967127114627473 -0.29447201817132523383 0.80144021078602434294 0.093854929988561180965 1.6079916513278444956;0.0080629698640286052991 0.67790919543311922713 0.15517510517676039172 2.1548664420489509475 2.0574636644653558903 1.1741545958895920343 1.8371337195031809397 -1.0779469380267980849;0.57650528755380703316 0.26001931824278462502 -0.78208576940957408308 -0.54395631903894126058 2.5990999133774219665 0.016267978067996818892 1.2050908738842518453 -0.95998601971200392402;-0.037991054334625011524 -0.67269746735522906178 -0.15874661424536198884 -2.1192255392022132376 0.77659206381821133114 -1.7398103944642493435 -1.7552579284107596713 1.1687785905269696407;-1.0570287411025105495 2.3352795849669836237 -0.57313500380052451177 -0.039840063166374978243 0.53233974395681293856 -0.11302537711470578285 -1.2960761138160259431 1.3793467301872532893;-0.011073064136481363187 0.15743060076161963234 -2.1560924495360551667 -0.32695263770146515414 -0.97724036282636661532 -1.0674529296505281817 0.49647064618964187321 -1.0694157130288934887;0.41505279897518015941 -0.082463443845874104254 1.8274882413215896015 -0.061392972667637539519 -1.6321053345102924936 -1.2358527357264204039 0.22032482325186200645 0.10128546604943902687;0.66229554055599448859 -3.0326715775729349289 2.4028557428399359708 1.1468122865899219587 -2.3665070976571356276 -0.87315028256843307819 2.1353021093132151798 -0.32738528334172650736;-1.6497800674269009757 -1.1149223248905661965 0.4246089678854200189 -0.12698515706727053765 -1.2652480587868693007 1.1598250113911172665 -2.2190040248605704676 1.6763007750142258079;-0.030387918241294425287 -0.11589931141662204728 1.7548330483642236022 0.2818684404898152418 0.99816743992849732425 0.98631318673582002443 -0.54061557856902187069 1.0747035560742888016;-0.23912078736966230208 0.10057629230403997145 -0.23814440765062799832 -0.33494816036516672497 -1.5921871815322701238 -1.0667189322240238081 -0.087271034399447236507 -0.51685888489031062143;-0.23440030305751349826 -0.25691105514655776521 0.94049648772944283159 0.22165463818407726837 -3.6675017475310971449 1.7083961904765205819 -0.23422969404051655062 -0.10947407020400708177;-1.3970363671085257451 -0.75128987774396704946 -0.41711125300695950369 0.037103577158657391477 1.6637084748160153591 2.1135349056354324482 0.37605170570980500644 -0.067052804623388487237;-0.29695926497086794216 0.31566613405857457675 -0.39883852943895126142 1.9721266675942139557 0.57044264691516810561 -0.80238132369871251193 -0.096244177971023664453 1.0332538144944212188;0.30638915609743483381 0.48940298906835311143 -2.3645434635877315976 -0.36847022457499944981 -0.40800710930164324486 -0.8832972353131951504 0.14977989479818049068 -0.6840920144418876081;0.4397900844189477354 0.21354256765951293295 0.70505890630578671452 -0.63904133067137847135 -2.2405823318260797983 -2.4684738414465123846 -5.6037346554581635161 5.3633740928342428234;-0.1168880527102040684 -0.31614903474452532572 -1.2636710235781192235 -0.066424820527139549764 0.86928775481909603684 -0.26088814091893169911 0.28778349468534369926 0.43654378896186146752;-0.82258791101588280004 -0.38675551113172840223 1.1287962539164360098 1.1426105262684991271 -0.22534715819687331506 1.6450849815605153026 0.90833757749341748067 1.115985506923499182;-0.076000649917988064019 -0.016638391099329491452 -0.18260452240067023832 -0.20988502401343367421 -1.402358198052031435 -0.76740139981234067879 -0.065544031383914763689 -0.44641309274147850106;0.57657521340980033564 0.24064789758834248534 -0.61530369001461393541 0.14983553848331596092 3.4969260937519175414 -0.29173709567338912407 1.8324584984113287955 -1.1560260652773590717;0.87536901263442801202 0.51889805087822005181 -0.18382607533502998143 -0.22000106717252826405 -0.79969319410296813011 -1.2911620644205146213 0.61387596846658198935 -0.89690386491337159569;0.019814305608205812909 0.89912557817330029941 -1.0928134613283013721 1.307701733841621472 0.67201903965526799123 1.5884812752189425566 1.1404261011409972948 -0.048550475750576332912;-0.0038484485050108503852 0.70289219595045626665 0.80191323356645760612 0.1685604343509750358 1.1780708099912453601 0.35364000263190875639 -0.32421220183628296496 -0.25577085304221769402;-0.58497060792894228776 -0.30348043022534676449 1.4743138302465337297 0.50131632884927501692 0.72452127805047117359 2.3254800039044298821 1.2356861524594013879 -0.27080487210853115831;-0.49264097511811710817 -0.20901437295413680117 0.97022242155469207159 0.31155373549266196509 0.59920205082553779086 1.9389605256765245489 0.79336458384214081363 0.056574549377054125787;-0.36167286007043270013 -0.53302299839973155127 2.2832352182661050932 0.37050665465882060001 0.30812699368388790644 0.62105106356530026535 -0.32609001250252378501 0.61626870316222381874;-0.082914197544689663411 0.13406537151694328247 0.62995235303199204058 0.055594343345419523772 0.457998203104627577 0.73031492255705021677 0.21554654176539839172 1.498237952804390094;0.83196490575644121979 -1.2031461908708867004 -0.50523387424280696845 0.41071885031290245038 -0.57360892971650001559 1.1247719934918725126 1.2220722277647178 -0.41495924871782480237;-0.20871228208926345671 -0.12362991624112198985 -1.6878137254248937182 -0.34580470463373880197 -0.0057397914079121981068 -1.3669060415017260102 -0.31211022080407091472 0.50868808527380038331;-1.023967758808993711 2.2609940672877804069 -0.56923157410284475066 -0.098149913508162350828 0.5559181722442398943 -0.32133908835044122654 -1.4263506933281544509 1.5115859629562282684;0.055499965909810024256 -0.67427447296190368142 -0.56283424686195371311 -0.24741828892649894711 -1.2200399956059193585 -0.47281572002006555522 0.25864784872569690499 0.11301078339391316951;-0.86165439241922148206 1.25530546697061407 0.35448002956702784338 -0.41074523275320590221 0.63705737854650223984 -1.1027846087671744346 -1.3351925030674822725 0.64950025750339679398;-0.090600322156516449601 0.58646042925670416324 0.014950022458767222439 -0.75769844657171991908 1.3899788813422537803 -0.57654462179833176894 -3.5807475179994145975 7.0898865647600759488;-0.096710265994969360492 -0.15830694974969922173 -1.1857738508409452205 -0.20757011060001506753 0.83490978491356448998 -0.71698230440993193646 0.035227052049876368678 0.32067101466100744744];

% Layer 2
b2 = 1.0566382178820932225;
LW2_1 = [-0.7199976941970757105 -0.75044823059558163347 0.93212054644486641575 -0.066996469488048146501 -1.3988653659146264019 -0.34875900000411452773 -0.33013978754804412796 2.7264633176844794704 -0.44334727719691979786 2.8314638784083143719 1.3484681724905633882 1.7335401771024325779 0.21842547337319515033 -0.029035343268987032217 -0.14764338692291181787 2.0936178190036600633 -1.7297770343958229766 0.35951480371626820531 0.26124218119934378146 0.46531585333180192077 -1.2642214886289644404 0.074479467766174534127 -2.0892332476092407845 -0.23220079801576185008 3.0025742254121139396 0.38426805842022476734 0.36821064599089819991 -0.12420789900981826781 -2.891582741816710822 -2.1039999417799437609 3.243735727285350201 -1.3563313941584809186 -0.83128237482421563076 -1.2494260516392543536 -1.3923758694630636867 -1.3666413367085121777 -3.3543252936485754567 -1.247544307757962434 -0.046488776831075988294 4.2526561770226578574];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
