function [Y,Xf,Af] = ESPER_oxygen_7_Other_1(X,~,~)
%ESPER_OXYGEN_7_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:46.
% 
% [Y] = ESPER_oxygen_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.0858468364415791996;2.2730203092497607287;-0.39464827455763085151;-0.92296940931863014068;1.3586337362699318909;19.233001738870470376;-8.1500642533983107541;2.1032036362290620346;-0.94661524248206618815;2.6957884791099120392;-1.3189040694914078156;-14.745381237964599208;0.43361191463998516316;1.703557957335158024;1.4191858560044456894;-0.41902761805221494518;-2.2954456656304769169;-2.0096453971327479238;-1.20482722471463366;0.009293921122810184024;1.2772442340323115761;0.23288538356174504074;2.1652837873936245927;-0.066945672678840884018;-2.1935787158005708442;-2.3577289899727418288;0.0031582966975031135336;0.57674650042959374474;-34.235093785203240202;-1.180157561950332612;-2.1737187011381839952;0.84360847041974162952;-2.217828432035203523;-30.345024366494868673;-0.18976594261152757159;18.720578341802156075;2.7325526348886399752;-0.13114057993740524388;2.0491499258431895569;1.3448859396661598797];
IW1_1 = [-2.6946008728619497141 0.91056306507772244441 1.488440363820533241 -2.7790000419578841928 5.8150770237191533596 -4.0407442351812532522 3.2032505742456729436;4.4398799385335578904 -4.0706114367190515679 -4.1808900942106221876 2.163272310982075286 -3.5104418122462872631 -0.88150872782839106989 2.9327451108376494382;0.35773957770138997692 2.0476877339751582419 0.39350835534604461374 0.88344480860455332216 -7.8400103446072453295 1.4439686167243159787 2.3634811613799788788;0.23677594486215849945 1.006253289994693878 -0.25370667784477823892 -1.1000671146504124032 -7.2758928783320389044 -2.791805907772717088 -1.0825826629087274;-0.094145448700005296416 0.12781627918046539749 1.0304491377827393883 0.30146654023461982863 3.4246415157059382217 1.0887349148443437041 0.16336788722029452203;-3.6176499032562752234 -3.8957001874830461396 11.875338807371708327 -6.4811864383920347876 -3.8611548427836455133 19.306360410726401966 12.475178181465039984;-3.9171147612516659109 -4.9747802657916260216 -5.9137147075185527711 1.8586563978691805765 27.979086268823142092 -6.8060753346732019153 1.5315242550052248216;-0.78845118044193451823 -0.20968649266850050705 0.67305497283976378764 0.074273068227962577015 3.3464058225669712776 0.50427519297128220455 -0.81355169760549972402;0.25886947027086759654 0.98985242014872265592 -0.2427330990484204698 -1.1646354674008942975 -7.3627753386084968668 -2.8566178209896286866 -1.0931661484733092848;0.027138312592726903522 0.080133846075039982804 0.87074157758609915803 0.89978467216444601995 4.9672475058258003244 2.3809628899342318853 3.8107749837118767289;-0.23853577742601314582 0.43167195519435608286 -0.41222248612972212101 0.006128825722255041436 -3.2081324877804853202 -0.97388568920771001469 1.5097063780491495333;-5.6473616757634426122 -2.889552379566795004 3.3867576937226422373 -2.5168022806696268567 -4.7857866948314891076 -5.2906480289002386641 -2.0709906729916922608;1.5960611352131610641 0.10957366856290885748 -0.94476957759977175932 0.28691865343073630346 -2.7318805676469373189 0.11721349841072736808 -0.6704483304175513636;-1.7467163724387990698 -1.6625190697645202409 -0.14492007110384338975 1.5344181970181052233 -5.1764269869676775571 5.1289647816654095891 0.58923581653894108179;0.18576136401269602305 0.47126126004876101039 -0.12895814268389305113 0.89255950061869682166 -1.9855665163000055795 0.59581382689155915067 -0.11291745291056694278;-1.5414768428549756596 -0.11126044053091305175 0.99941558549421238844 -0.3130043097654800488 2.7893288371288234018 -0.14856465854456021858 0.6510617490440215871;0.036810322412603478648 0.11755153570948623232 -0.24604094424668224161 0.1241221980480580328 1.1357618941799294543 -1.6461405003960980498 0.79943651449601660364;-0.074760980233188070732 -0.024383287724700809795 0.18676395582944765872 0.33902384006965163854 5.0854381729111866051 -2.6852961302632056828 0.37888467554154109385;-1.3554479110565973432 1.0532294491850855422 0.38792922235676496889 -0.72253170046053738496 -3.7982664186065253631 -1.1667420924983478159 -0.28988393943639395589;-0.14230119050214601328 0.88921679201896153266 -5.587319801657163687 6.7022443509782361204 12.871322780429125032 -1.4576571587286866194 7.7611805252284788992;-0.023196380748958907864 0.00038337064541305650601 -2.5892208423731504219 1.390324286653061403 7.8138041114842380352 -0.31612243265999295794 0.25046340143618184282;0.26222408867360202933 -0.3839263706212481253 -0.25031038046701747923 0.59082019257505047349 -3.5257284339510985838 0.41540035316936502197 -0.35883318216759912955;-0.3295069254029422412 2.0672987969027247779 0.049163358654963802696 0.19204992926988573299 0.40803531421967620396 3.12763978211739202 -0.34259484513161414521;-0.021740753880688933053 -0.089731366056975764289 0.29171338045134476147 0.81880538150755843851 3.2649721404503480038 1.0818151661213499803 -0.68495950026323204618;0.0075610951947388546981 0.052115851055668585556 -0.086968823313094148486 0.097749431043477566505 2.0813574317323579876 -1.5668682893574710224 0.57574528662346768915;-0.78882235703910230651 0.94390232405304552721 1.3788591586720118087 -0.90824301276023844398 0.31628715384830091706 -1.5136355764073567975 -0.25836979690366290718;0.017850486672308853164 0.049440670631597218032 -0.38611647425283734947 -1.0133850354143789652 -3.5892984093333142326 -1.1974025822548368669 0.78823148967033496159;-0.13871836336699311376 0.28974397899620030206 1.64759378354729491 0.18711607921685785572 -4.3230175025361479157 -0.2512249201872878146 0.36254420882401477977;-0.053092311668558329896 -0.45833284940683716169 -1.1419736939248803509 -29.866751577042947474 -0.50981933066180828984 0.60499139860801653956 -1.9193328106424685231;-0.0041598273728320096787 0.0084028046498765204819 2.3676070924930665562 -1.0977643370736869244 -6.529197068940012727 -0.026253010275421744674 -0.5594258242160844441;-0.32097304076944888074 -0.47517056926752349044 0.30128365656675609729 -1.6284087889699763174 7.3169015186771382275 -0.93659949785129814614 0.91912611957687284647;-0.23147687055105969911 0.10937290294410953462 -0.084166842858053148024 1.2829581135937075942 -3.1520267133725647923 1.4385694598625584639 2.8313942724752885205;0.72963869391144831056 0.20126038401944257306 -0.81037861300417746158 -0.032268005771137524273 -3.4987086133457712123 -0.4629781899127941025 0.88091821001947234748;-0.19972255242992442703 -0.10879776928095340194 0.54295690406807417538 -29.618096931551804118 0.24113706049007402332 0.2626278979713611017 -0.5567822324336074713;-0.26965780687327217668 0.40653977396027096702 0.30809355423963680209 -0.56548937023491807619 3.489138245908599778 -0.43493855086169835866 0.40575391105209179798;0.22088360197864567724 -0.11430876999842737307 -0.65608056595654029586 16.896096263700197682 -0.25635816191701238376 -0.20942493254660993207 0.69482976171773402907;2.6007315849906516014 -6.3895768515303368318 -2.6593740388160762578 1.2424145133297477273 5.6104432642679871179 4.1494427347859152988 -4.8156949649145062153;-0.12896535330163994004 -0.11216933426136185825 -0.53662784066257529503 -0.12451719733739541329 -3.272818015236029332 2.2791186994192123016 3.3414243561757883683;-0.63019453700428340603 0.55741059201445941618 -4.1462177111040521282 2.690385796491726822 -1.5318092271977103991 5.0075398174703709131 5.0563495853079114539;-0.74713151106481978658 -0.90180627212276154303 -0.448056913545803015 0.30288023933276936317 3.4195963537494411533 0.80699354024661251739 0.7206178228554191989];

% Layer 2
b2 = 2.7195910666769336217;
LW2_1 = [-0.033848287532738878525 0.024267238953734275586 -0.052213270943581434336 3.9188979971252693169 -0.69734317849884397411 -0.010794545716166566163 -0.012181055597649729713 3.8748236099167461255 -3.7848451716922673072 -0.14413548429713660126 -0.3737769479499954417 -0.094902133168778324279 -3.3358250211788562645 -0.066268552635511762672 -0.87765402731107988732 -3.3929177465373037137 -7.7912447191759586218 -1.7022079377436620806 0.11393156808527087065 -0.02446808853194578845 -0.72692938138692897443 5.3674831620593197457 0.096009056211703108774 5.8789192738778552894 15.741079142968391835 0.27059688949496574217 4.5927949183972609504 0.29183216347129270485 -3.7819743489112895851 -1.0544258656559288845 -0.40238701949951727332 0.24407577910946623434 4.290797595895921468 0.44999921728682362732 5.1142986072937031139 1.1390374450370495119 -0.01077616088001498787 -0.18066458735193777208 -0.052650370280586347715 -0.32322267970607199139];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
