function [Y,Xf,Af] = ESPER_DIC_16_Other_1(X,~,~)
%ESPER_DIC_16_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_16_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 5xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.2019892899769870631;-0.064390850322563558672;2.7961464198197809594;-9.2153667986094518483;-1.8749527270261183709;-2.5661110885662079539;-1.6865414070850957007;-4.749973183972108437;0.70724683311981295653;0.56764849102273806647;2.9450680404467002305;-1.2240022929432277099;-0.094534795413243069562;4.4907463835636214355;0.5358587074679124207;-2.3351744795871320903;-14.838577212118796211;1.1314681126828958213;-5.496434730251145595;-2.4424789524567529497;-0.93677023874513076773;1.493810961497226808;1.359594773417533542;0.87612966508239908947;-1.3118682037286173436;-2.2421469403070566351;-11.972797885384968808;0.48083941616842851285;-2.563149858264145653;-1.2437499228150621366;-2.6065684381465992203;-0.38731021464242032515;-2.3544759760346254396;4.4296901356230309332;7.7021342820673384111;-2.7044087942240082612;-4.6307026999707874282;4.7026077751827974893;-0.85147159194896038237;-8.5519119767737965532];
IW1_1 = [-3.4099487984198901813 -6.78620024401795785 4.4030065503755171363 -1.569325281085859114 5.9421923598202841532;0.94009061198043275542 0.3073509137679074632 -1.2075930220362325329 3.6231026981590206404 -4.8973857953843547008;0.0028379644859927188362 0.0010334509013847977422 2.175304665486031297 3.4982553551872483943 -0.34233696049142281481;-0.33690227119089122265 0.48312903081757219148 4.0956585217848546776 -7.6290747772207163635 0.22604997320913494674;-0.99308880427241053024 -1.8510995944780799238 -1.2183558595565295857 -1.6222954331892762703 11.584283161371965676;0.040412404661259525296 -0.093771715594189286591 -2.0525000887320126175 -2.4080104389092893413 0.6311512015578462087;0.34653652853082372864 1.3417427073400955972 -0.58302042791611297101 -1.3167949867777148931 0.86289492374611487246;6.1600144118384978498 -7.6966281224040686837 6.6102706776960387103 -1.0300377823532647081 1.0796710327422935904;1.6240087460806231778 -0.91602079266076097408 2.6963962364721729692 2.8192491652618016928 -1.7005516462064165228;-7.8679727634623510824 5.4704329912305693639 1.3304562864348377094 -1.3769088597164627075 2.4322273360802442177;-1.2442585398660581664 2.6028638408946758176 -0.43563301684655031387 3.1081157067052491705 0.051450957359435049721;0.25719377980559504637 0.2244741963731810841 -3.4636154592391825702 0.63952630221137796163 -0.77514979023578978179;-0.86850336299838937215 0.65029388165594281812 -4.5215955736604485082 -1.6685279320954915505 -0.16030565406935987083;0.64151269037189551092 -0.41139620980900964975 2.3756450318765440777 5.8669442241574341068 -3.1029023760283256372;4.3868431459723726817 -2.8588534905467746228 -3.3599670073123859559 -2.7622562153970946497 4.9373461503882927204;-0.94506010130083417664 -2.3375329335297587718 -0.70945503932701869942 -1.3566042574244681074 -0.19172482606653590276;0.15715278052097350625 -0.039079494413803726738 0.78863106715271635849 -14.657475471064419281 0.016079001975967444765;-1.0404629373544065363 -1.889600246233671621 -0.65619266975173429213 3.7079118920250961899 2.8210287793464794426;-3.144997596948300167 1.591847475453664007 -7.7119197314845688851 -7.130367870107115813 4.9748471933587588012;-0.53857660157320330629 -0.21859519003611824206 2.6978784706051075482 -4.3264104517549375473 -5.4267618155433003935;1.6303151453961848283 1.9102788845336318158 2.909247667992777675 -1.8877805906636664357 -8.8227526293732108087;-0.3293568621351217196 -0.25432134871128142528 4.1193453212977582112 -0.52539117035365878738 0.66196598535055051205;2.0505564816629768821 -0.59842109649900110391 0.9667507036535065712 -1.1346483996225649182 -12.468256448748956444;-0.21365888190872467378 -0.18982159951788835084 2.6253436254544788575 -0.77559709211046790056 0.86080847863366793948;-1.0257516422968229186 0.53033062692856736131 -1.7359327712854535353 -1.9635163121806196163 4.4280324579452932099;-0.60987454901194737555 -0.18794830854790336994 2.373837852447417518 -3.8931923783993260813 -5.0914587705549951835;0.14247120452866376961 -0.23715973056885542025 -4.8257718189866771752 -9.1979503336374861533 7.2724154332528954114;-7.3187097623569776772 5.0398978713173816502 1.2784720519869869904 -1.4107942798940025231 2.4096248425094728418;-8.8136688539880658766 -1.0317614865672255497 1.7578092343913702678 5.8176055616363200329 -0.51136541125041024003;-0.69388512342339903061 -1.7704955938900948098 1.1611601719831556867 0.32324407023338896927 -0.78113035470725955545;0.034618146253504220033 -0.051762038973108479012 -2.0983101151553600339 -2.8400494633928485833 0.42764597429618789182;-0.95730207591136617928 0.68691250820864713234 -4.8253735105276405193 -1.5091400078683041563 1.1058131831254900401;-1.8033329497888259674 0.82665750407471749739 -3.3188600391618541252 2.4419959083292144264 14.467403839983525415;1.7217622373207905895 -0.13715963118133059351 3.2064143128055504484 3.060616155859340104 2.1839028000650499983;5.6939842736877359641 -0.19327689750993859441 -1.3073768583916194341 1.8371049169750932606 2.9819639940162740999;-0.8281484400140221025 5.1035563376503771948 1.6016810741485474345 -5.1749039397872804713 2.8939308442622531103;-0.70047004126421041903 0.46428721954764223812 -2.4230211221828565904 -6.1446194940821392549 3.0871192356579113536;1.8271271439426379768 -0.23438881753429804955 3.5382206867263712446 3.1145323592149387615 2.4895377640871516611;-0.28451545314064485837 0.25316489128015851051 -1.154386549846680099 -2.4696529582678325987 -3.091430062453174088;0.049951160323464263713 0.32803649982245547401 4.5731026441620539202 -6.6679892016751338701 0.20922966444334217817];

% Layer 2
b2 = -0.57747704435374136445;
LW2_1 = [-0.056715263140064677005 0.107050637500522558 -4.6952995396524759286 -1.4727776743906639823 -0.095409236617499657007 5.6634380902771654931 -0.41742438926094926899 0.050564160987405487591 0.27031501416641551261 0.57770786078164149124 0.10968293304450350834 5.5554184990043395942 -1.1514629638122455546 4.6143155898141623439 0.062972013731132717163 -0.17160367712466215173 -0.51554723391590395742 -0.089269323429369079603 -0.068232998891092758176 1.1963040649690255268 -0.072048414648105893465 2.8788251424451760663 -0.15457057229977533286 2.9566059503736319414 0.60274846427940842464 -1.3547725140521258425 -0.1244115086705768064 -0.61110441541391402609 -0.029373466583376934419 0.19213221189345452977 -9.6655418285720404725 1.075797413407575176 -0.092532017597545979104 1.2079811096893977584 0.25975699489016668142 0.041089164057613591918 3.9475455317050820447 -1.0526082604687909683 0.32364449765369990297 1.5427374822872204074];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
