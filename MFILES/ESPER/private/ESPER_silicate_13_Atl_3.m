function [Y,Xf,Af] = ESPER_silicate_13_Atl_3(X,~,~)
%ESPER_SILICATE_13_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:42.
% 
% [Y] = ESPER_silicate_13_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999994516886;-40;0;9.1619;-0.03;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00003626070655;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.604229607250755;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.5772753658162059764;-0.20023161649819476438;-0.1683758177199982109;-2.4082370147584026832;3.4885727428179973408;-0.105926801838451351;0.52842290253748736006;2.5709102161433960987;-0.85362742891798626399;2.3977748333936008684;-1.312177384816020087;-0.095298088851424669898;1.1858921605618388817;1.7594509859874438717;-0.081164214019069355621;1.6959719775726767033;4.6880714775136027583;0.22324393239833337232;0.42707410377057786199;0.5079658025455551229;2.2653356639339192746;8.9592984189960738206;-4.8879751146410637119;-3.5531941446072905499;-4.9693338692346191721];
IW1_1 = [-0.43485340291628415965 0.064036838737924622889 -0.70570012751813615548 2.0932934743312641146 11.15622206760477475 0.4748368792576364017 1.1253046839660343359;-0.53958822298681341501 0.36319814855709225965 -0.78429247821331882218 -1.0730710544604915579 -1.2802973002860329466 0.89964106645964514453 -0.38850241519528033729;-0.076444073413094629221 0.37651386079345500191 2.585644982842351336 -2.8393650446981770763 1.725394387077157754 -2.3752503708907690694 2.0860430296574166142;2.5657942010279768397 -2.4444609780681521016 -2.2348067584046837908 0.2663840189593851826 -2.6264790740061836338 -1.3446490982600216579 -1.2154265783062889739;-3.5668209102959078649 -0.33339831862394181394 -0.48711947971315927575 -2.6284552202055926351 0.26808975663293393987 1.9687771563705778188 -1.8594206892935039033;-0.76842993779158896839 0.91991844459588678617 0.049274747120149099688 0.77418809146581635261 1.019884900535037886 -0.37912286837780234672 -0.97865275698877740584;-0.22125074116644741218 -0.29290721602569153026 -0.27447560478167443154 0.20717209392545760105 -0.86311982706505552265 0.32240514997789460061 1.1849551476607014244;-0.51662468897888258468 0.64121425798961595444 -1.504334992782202729 -0.13814469819094110647 -2.3267025096745621582 -0.98680803270186445708 -1.7231370428159360486;-0.63062897842865450748 -0.033078671034455553457 1.2719028524174258443 -1.6865900728107594553 0.18386623650764966076 -0.99708593979161119769 -1.1916926378828454069;0.14274743323540101114 -0.20109193492391461144 -0.23571003987319300021 1.4298061443630587508 -3.7848778834939285076 0.76582834625437745668 -1.2257864481978675286;-0.50232884543625777596 -0.85725912240918578089 -1.5917398432086495852 -1.2316609488541154782 2.4745075464886645555 0.070294137283378577141 -1.610987860992771914;0.68574885546103003797 -0.49084814761987832776 0.67612377181001892534 -1.5120939875971992628 -2.9191712226626127524 0.24805333929232836754 2.6622620114521482471;-0.36835299309820013214 0.011852606411855180074 -0.66822369569092321395 1.8296511004519739885 -3.0356419173702526848 0.38057131401176125252 0.92726704162118467334;0.87599933116267258981 -1.8443751043001361811 0.86247571137610079539 -0.99014373208728734266 -3.7023599274879770427 0.24047456710647849287 1.9764234370635600513;-0.68269921788449727806 0.63392904226479651619 0.7135066925199365917 0.42231754652947345319 1.3934211162912581994 1.9269549734026145682 0.021132544033945679235;1.332850476778171922 0.03043639173863465705 -1.411654453558020661 -0.29159498779280912384 3.1632459112661583944 -0.395274378172370211 0.57565786612411373735;-0.32190187661751795689 0.41879197035605636446 0.94941385638865416485 -0.87675606127752903074 -5.4019965172288086919 -1.4596990291601481537 -0.44372228413661612967;0.52168893570740393351 0.78104619173042044711 0.34940444534294262668 -0.18697270885781916427 0.44508932689146835093 1.2911660818859735933 0.44971999486332325802;0.23291915992712586281 -0.89183721733758170025 -0.76865706819757328994 1.0364360672255368279 2.226550710699183977 4.3816390452344489148 -2.5886596797583649732;-1.4498851546801834189 -1.7893863553310918046 0.88334207022809796417 0.65351843231293427205 0.42825606474222177589 1.4570215425888979333 -4.9596125019803949385;0.64101587216004485281 1.1359161134956823336 -1.6837341355418939948 1.0365248130036153196 0.73910901545848572969 -1.6965929238352452924 0.53943060195252834355;1.7351415637652078949 -0.96688361029022940052 1.5527379800823877254 7.518545662441104227 -4.1795092956622745817 -3.0530294979327661231 -0.4484844089278290924;-1.6552035730217451448 3.0681767583570862534 2.4100846432593665547 -0.028838744180413881241 3.4858751814136543778 -0.33519030842930852554 -0.60165745298798656293;-3.5691247469858833341 0.0052333191981200691267 -0.77768519359605903229 -1.4808273041442920892 -1.8707315399263644284 1.7995197444662045516 -1.1111846287490647622;0.20977036259269793428 -1.5980744775458981533 3.5365637401228551262 0.18013689459858883701 3.8171890131581656114 -0.92118033382771191686 -2.2909224675395716275];

% Layer 2
b2 = [-1.0072658691496287897;-8.3883167111245473535;-2.4687475337654953833;-1.3860912836573369145;-1.2019160666611117261;-0.52368514995333936834;3.0014366238507288465;-2.4770365770479680911;-0.41481083671949614544;2.3517515657405838603;-3.0377753453942504258;0.35185442171675906931;-1.9778883663807884652;-0.249578989392528372;-3.4892201274703715796];
LW2_1 = [0.35207515237005293507 -0.47876270520411845499 2.259522487320500872 0.036275266363850297568 -1.0920612174484876089 0.39764701861000451011 1.2955920453778888568 1.9197739081977298614 -0.083643766255082546701 -0.2139292857818728133 -0.95728910254270049851 0.66049312257814885019 -0.0068581464562700467785 1.1585445574521535672 -0.28767279525789585248 -0.97332123704139217324 -2.7757614954878424562 -0.34622039493225209572 0.79948273285477700068 -0.14975051342425721446 -2.167393971373945849 -0.44276236647175315486 0.39053292965439045936 -0.62750857968518936048 -0.2969104348321454645;-5.0161828535746479929 -1.5979163025288674049 -0.85458880381804380733 -0.011751341757444747765 -0.043796587790532255646 -2.9478932006897089479 0.37998007194824506838 0.37222559908039198895 -0.68759988597956933631 -0.80350239248540766823 -0.52078477216757790291 -0.12888561744269111387 6.5412029861351301818 -0.87940304113563683153 0.58385045273157842871 6.680339823354536577 2.0914654654910749265 -0.049529942579903868394 -0.014699632548605002375 0.23283739671351291745 0.99255876588097158297 -0.4745607856529431845 0.54235893663165524181 1.4502492112973037752 0.044975191646325719808;-0.59015859849553975458 -1.5999923297991458515 -0.81598303697196272743 -0.66358916452406413455 -0.35526343371585322739 -1.7874123297847059888 -1.2740760089161999868 -0.022618888719443609042 -0.33554380895851143585 -2.8210560718013364401 -0.75315425924273970981 -0.090011859543845093579 0.080902304571626296181 0.061963090147572175148 0.50704951525284303049 4.4372269494327589712 -3.4159764231822404845 -0.73648868305651682409 0.70062281317132013569 0.19818309067556375003 -0.068177600202915758509 -0.568198709792561929 -0.27262643101324168793 2.3229638113960695556 0.021985591661310734113;0.72813915200501100333 -5.9671349271447864382 -4.3189696728967525985 0.97007466476394921262 -0.30581300394021232458 0.9121283687568516596 -1.4061127260890118329 -5.6914559076945243632 1.7877455919990075106 -0.52116329102693204067 0.57539053275838891732 1.7137827102315448258 -0.22477173522828133856 0.96396467147955644528 -5.0515315696324343264 -1.0412103933495511221 3.3911648266918947847 1.9507655134158448096 0.14619352676500774191 0.3877419118545505361 1.7517891538967713672 -2.8523727021204767773 -0.79478165721445648284 0.8224055007929810257 -2.0257468248366685692;-2.0312039349144161982 -0.95453822882261929461 1.7719008078180631394 -0.14861450436952242105 -0.54987315016433013781 0.79186804516725461944 0.97448255225868529728 -0.42699364675361417554 0.31672525280324070884 0.75033521719447071607 0.81606800918568911385 -0.08218379704693054566 2.6221313250932909433 -0.1410008660214185916 0.13784615106114028737 4.3914556273123785957 -2.0074620106650815643 -0.24548575273495937266 -0.15593371927906998775 -0.21895966727588733747 3.0929096395543127507 -0.22618781195802317718 -0.54255156972596330078 6.2306394848495907368 -0.23409050297580183408;1.4601688469307527729 0.50907164385979775112 0.86540816986719670822 -0.48539665457083636113 1.5572733815771950816 -1.198498946940479426 2.4477503248062890684 1.1421086270221239012 1.3486237177791868813 -0.6488993551974295837 -0.59366722151297757204 -0.41624493205110912886 -0.90786131688746840585 -0.53976109528446658548 -0.73130261062310808473 -2.2968516448886102665 -2.1578236513895210358 0.90536013857154928886 0.26735851865373555514 -0.20177456789619335753 -1.0088578200036564247 -0.11893944562926678232 0.62422016642466371383 -0.81042934606376570983 0.59912552222977621952;-0.65673637157474740178 -2.8787013146447999468 -0.076313602498884552938 0.55382606282365809403 -0.15737113975608374439 4.4123248783261743711 1.951643836732971149 -0.46963317297834406006 1.9929595694202479894 -1.8613862149074760222 -2.4081569814710390709 -0.68229651800764179459 1.4019885083622161126 -3.2256926169912949476 -2.5678099369074445235 5.0133742021578093784 -4.6877749828771531071 -0.5733447774945809039 0.27738078618739081538 -1.159688801186323559 -1.0303285500378216444 -1.8932332219124474726 -1.1067510048922482024 -0.82566762340203780912 1.0023973549451168363;1.428357404435551592 -0.15882719931451469431 0.1560983344777971682 1.9388668116546523557 -1.3772450112817447021 -0.32206155426511878792 8.265612111622564484 -0.68464679990213161975 3.4023590380979364944 1.3423033656056553298 0.33317212129555101585 -3.0459865583058363114 -5.15756199089622136 -0.26263000547534171014 -1.620872183478583306 1.1621539234517264116 -2.2387713739206303032 4.6794439272277861264 -2.7293937617440073851 0.28417331136243256795 0.4282089608342009579 0.23035520631618616738 -0.74034341707054118764 1.9117185894975221583 0.73985268861867792278;-1.414274647735322743 -0.30597774299289431932 -0.7311402176225161309 -1.1159838325646729285 1.0067092301231976847 -3.4944132021003229127 2.2929483551330567259 0.59359712083755744594 -1.2565125685905380593 -0.86183156472799360426 -1.3922033956821677769 -1.8510931778592194519 2.3217597037130608406 1.4067978982277646871 2.1196423508380508594 1.4183107275436042105 1.1664009554092824583 0.24793130157388229562 -1.3549511513174754551 -0.54044611796473773779 -0.037835157307470355936 0.43110520919879619095 0.77035585018249130851 4.4290239518282055187 -0.015661008961140938239;-1.8218476835557668725 0.75074980839585914172 1.8262326731377040989 1.4112012270842424488 1.0767864634484443087 -0.0774354809208784578 2.2375253411637787693 -0.022528427656830586623 2.7977694379660711377 2.7315952099113287588 -3.3168585234388783256 -0.84165441860815193298 -0.63062694390638751596 -3.9305255189608696575 1.3118284028169102662 -3.3699183287686378385 0.050921303481756663434 2.2441092443920922506 -0.32612275206882068712 -0.023861784591767333519 -2.5384216908638590482 0.91066256270615342228 -4.5920293759652865972 -5.3420820733621239285 1.0894723247839948055;-2.139445608670683896 -0.44619490266628381026 -0.92818538294643104791 -0.96190000843512357687 -0.66536573705567225723 0.58558756706942338699 0.54409806544260330696 -2.7278233405258114352 0.72081363047004287647 -1.4116119252936649708 -1.8561064693016295912 -0.61486067629743001994 -3.3483917696873448655 1.9742198337526106755 -1.6616441096466629812 -2.6003695234405550529 0.032535905403700993155 -2.1191363530062208298 1.1909293164911756158 1.4998483971705549589 2.574515088585756839 1.977569094986275644 2.8862314293706923252 -0.53406235351609154804 -0.63580427866769095857;-0.073071646652650604215 2.1439969660736006851 0.65609402865568988705 -0.21423882355624113139 0.60438925403919296908 -0.84876824958442764757 -0.43625602034188487588 0.68343297293961802197 0.91064502117194590092 3.9811622759451807951 0.78895102346062573329 -0.69211557673712120753 -2.5063825229394995908 -1.4158978453990118673 -0.22462671446441667689 2.6739656305908141576 -0.98961660533991790967 1.0502707816348608727 0.19922729514526613115 -0.40344158410079128396 -2.2568209702096413416 0.95485561256016060483 0.56407736935744057227 -1.7917909774322529071 0.33934715441161772409;0.7889854392226228752 2.364213462360890361 0.70887760122128407048 -0.27938766977873663588 -0.37973703008453590924 -3.682974572753927589 1.537683357740275536 1.8510532501800380789 -1.573736822980678296 -2.2344230733631786912 -0.41997649798002639754 -0.45813820262955284868 -0.19140834067278780783 0.37321680363642389944 3.0479400035059343033 -0.74129682214377523586 2.3499043696807269122 1.3523636713057216596 -1.1680231624150516634 0.78440785943207880226 4.7370581606388997287 0.95665630566373771604 -0.53027769532209734216 5.3216794142953078861 0.97566805285882163279;6.5702048575944163034 -3.1332698023203131577 0.472999539251510559 -1.1146823729295172178 -0.9085724666772299063 -2.1119060252514691989 -4.0022891655394712274 -1.2734609879092249063 -0.95886437441010274885 -1.7905960726142589046 -1.1565670080016932086 -0.24532758689948480635 -8.4045420565995190287 -1.1957278616179256581 -0.11758227194956606676 1.7925439591093741409 -3.4891124054046138703 -2.89223967159971318 0.72594622070577097261 -0.30523820879080870716 -0.3983891654825449935 -1.17110713832250668 0.74508037589414555235 1.8579228424366767136 -0.97293915922953222442;0.20697637544382516128 0.22733306247050372173 1.7949669699158410374 0.61606788485393415566 -1.1325890017046678082 1.654490568796303851 0.46347453580309605492 -0.55644181796466396506 1.1556203888028730997 0.43818673661184548429 -0.17798949786549375651 0.64866673366363358788 4.4923534512460623347 -0.088491251575876839208 0.56674203477576778898 3.7818835084134438951 4.3002541960105586938 0.5777408674711824732 -0.72723078675713137553 0.55031592079327062983 1.3114263999160058471 0.12017369679245713809 -0.89220880908466482229 1.8059411189020573296 -1.0882834790950832726];

% Layer 3
b3 = 0.0459205821283317564;
LW3_2 = [-0.42456504795087451898 0.99732394911431576645 0.12846247095320345588 -0.013962617803564236069 0.18275154897791626163 0.40735133008826135415 0.029257345242599361312 0.056578794597833076407 0.061369272873989876016 0.082533550886743439756 -0.014442630799953575307 0.20992164042110661448 -0.066051792054768687645 -0.096499011100280279729 0.06683616358237177979];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0145232735458572;
y1_step1.xoffset = -0.52;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
