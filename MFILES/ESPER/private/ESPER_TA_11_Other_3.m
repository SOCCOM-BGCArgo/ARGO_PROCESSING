function [Y,Xf,Af] = ESPER_TA_11_Other_3(X,~,~)
%ESPER_TA_11_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:03.
% 
% [Y] = ESPER_TA_11_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.034792851920794509724;0.094546511506201705299;-0.65199845618563934124;0.28958034402310889321;0.35931047073574529094;-1.1198883599978270986;0.47201969557305756275;0.036418411209768214443;-0.51289923308981544281;-0.36818133333563135556;0.26812348218647186204;0.28871227188183518075;-0.75920336059109760907;-1.7988416526289079389;0.013311840790802029894;-0.58161025531300714064;0.84456468690223529538;-0.6524019344691913691;-0.36478628535563190072;0.29151989478627449159;-2.1377361877390153033;0.48042017473297887742;0.0091077871248508336655;-0.70904668394585712576;-0.08292204065187291917];
IW1_1 = [-0.15450318060645595875 0.18163540541221606661 -0.44028466230417911964 -0.31647768805264731018 -0.13349055395732897789 -0.18569866888644812053 -0.2753367869566893944;0.019619637323558047209 -0.092349277977469584888 0.20083606598748893202 0.11898383831869177585 -0.97045645415393522182 0.72125127329786842267 0.23771443117887555707;0.83053185476333957205 -2.0337222654647142406 1.7025002050959301414 0.68926665848201396081 0.66940911945264969241 2.3081571306310575409 0.27258067129597435274;-0.6904442706659692508 -0.11268260728343740262 -1.9559117774993663996 -0.35529394722977902799 -1.1858354250477116665 -0.40313246405685942975 0.25352276410421781261;-0.1036918847654592496 0.040936714174877764094 -0.26697681391110755778 0.095107840077190836103 0.70376509877838333562 -0.31743936883161710805 0.22242199757380703984;-0.68723582649378189835 -0.65609599347817737502 -1.5212445376635086447 0.057204746536978108573 0.58117778590231439217 0.37564383587177702095 -0.77343530505385571505;-0.71353868196026604132 -0.14319331061740928068 -1.6398444568212366956 -0.16890068434502522599 -1.4470522791441409183 -0.40835106266171933287 0.037695452922117310413;-0.043083061562932671584 -0.14329516791822335953 -0.34073157616707344664 0.56039466436582674458 0.9309302013487447125 0.47351342596903678306 0.41615584532426863618;0.20391961878387043772 0.2464128526686981957 -0.49081888486574792863 -0.20919807535783185859 0.59617281737476468528 -0.0075978909655980957777 -0.89409365062941537072;-0.3012670646672180319 0.096391052061748361268 -2.7891340818743532992 0.36904130143188146329 -0.57203440852929665628 0.045536559023839934257 -0.42456437371146948934;-0.38502621803996545102 -0.54879167230823866497 0.31183102535941986666 -1.1521430198443349813 -1.0740917730442622879 0.27603567175284254853 0.92180647317954833575;0.14286929038164203343 0.023464110353884119753 -1.142089844487604644 -0.096938507362063275341 -0.2842018057797398578 -0.7931308126820668658 -0.27296194736022422189;0.12984818896519947917 -0.30198982395606832618 -0.041069514351821267972 0.10464323777819994898 -0.49245025786388724187 -0.34733218027192364064 -0.127125263325238963;-0.21637082739788998653 0.2306510308976300605 -2.4751625206235203791 -0.174364688922539951 0.13993750922074021936 -0.64390390442557932094 -2.0852692525028890813;0.15482330471895811019 0.086577274319057095919 0.02766117095697367273 0.48387913095020262944 1.0600435476926131084 0.44916318425175894014 0.36321903972865376975;-0.12532543627223152738 0.26668420040770224322 1.0961110085688818838 0.036958666747662370644 0.83188892344564513426 1.2853372676784988737 0.14975144124946415669;-0.23074770882811129757 -0.074494147923434908543 0.019583132012624408086 0.078301835255643686962 -0.22662831521890039466 -0.58012024262346428838 0.94297940959969783759;-0.41339531626872388914 0.13405540151591074927 -2.6864117847400215133 0.34545455392801333039 -0.12787401700142694838 0.046505879302704944411 -0.75215615013929482124;0.13265025956825596265 0.035110688552683816388 -0.44771090821426789974 0.1888946564515885107 -1.4493938594135249431 0.78529734660541228308 -1.0996137898248914411;0.071668554521581717687 0.025365940839381588556 0.011772527716212104892 -0.10176087914612708119 2.3977455123491342448 0.14873351071568671755 -0.99989293499551124;-1.4764295415422890034 0.063946718403238442252 -0.56107737349690756101 1.2219231984953440318 -3.5419745237791824266 1.7762539085680564277 -0.8703465577085888194;-0.04904608099138991345 0.037175744197983064121 1.1633154605973849982 -0.1362319521823173174 0.65178624133959339737 0.86281526895781701647 1.0243796212976172821;-0.23280307853887913239 0.31257646571247954537 -0.53404979661281959391 -0.55614962256816147246 -0.1488309103212772655 0.29115583977411363392 -0.3633812473023141365;-0.18495412185709486641 -0.070327806120204602869 -1.0673839216299061405 1.2624444184325100959 1.1851134726521030949 -0.39121327595726551607 -0.40475991549560352833;-0.089554285443099693187 -0.13453276842322683948 0.071702999345365600603 -0.022062675857744382807 2.3059546101872863133 0.31897277461217160566 -0.44794429814234376641];

% Layer 2
b2 = [5.8253043072230790145;-10.926268281132827553;-2.4185560578828102507;-0.10032564737193376547;5.3898471596043480147;3.2653756900540136243;6.6566088299415397955;-1.1590699388896288369;-6.5312506841546049685;2.3704025834328779077;-0.82444437440879114742;-4.0174083201523274056;-0.28508590487522850188;-3.7946179017295227354;-2.8419947543003587498];
LW2_1 = [0.56631887980473749611 -1.6124957423442778381 -0.23546736449191205121 -2.0209533781119026763 -4.766461221143417859 -0.68341828406898397219 1.3009323284337082072 4.5596084851136176042 3.551805781076088131 -0.9531813639852414477 0.25274674230708227274 -2.7079186754603186138 0.36653277407926232456 -1.1382366906641818716 -3.6732185226584062043 -1.2408588810160467997 0.16917926415202508283 1.4902148640074073249 -1.4123243446994924177 -5.4396887896652366123 0.37760998770974485428 -0.81407142969977275282 0.69965140278652115935 0.29907319020486139438 0.50081178576114604439;8.0273861514921609484 8.0109846344828916642 -0.39673788161729867108 3.5660060204679870921 4.3113880881003403545 -3.2948504861194507498 1.5655098554269013533 1.4372608531500326023 -5.6091490882962968811 -7.9342352953896781997 -3.2657820016838985389 -4.9845902965063126899 -11.139366760423483171 -0.23586062348793246368 -6.5486542731374051129 -0.72666669939351491436 -8.799618130879746758 9.6523981440316735103 -4.525391817581026821 2.6031641766737592114 -2.9069390826694174734 -1.1225513703581584402 -8.8026859551411114069 -0.91157358486764805683 -2.9941120045168796437;11.478539320755750452 0.23448472316995139231 -0.27740296187213109302 -3.9290128416400755818 -2.5017948911467455808 1.9597565046888689722 1.2704261326369630236 1.6901392467210187842 3.7408136778237293107 0.39952393774598277121 -1.1549475349932998292 -13.323928162756406124 -8.1972427350949299552 0.39207220717598240123 -2.184749300489478685 -12.063816758187089206 7.1510636675321119782 1.8859660121065513483 3.4042581250005512494 -9.9371556413512358574 -2.2800606141486179368 4.4722734010149940431 -3.8464938226738043525 -0.75304903998414496336 3.1136525788953632876;7.5350936228554372676 3.3152761607091640883 0.68500779680329493271 -4.9741188911304341502 -0.44066695273761685714 -0.37766971267596322059 4.8754137580855942957 -2.7487833168942361617 -0.82913544575265996084 -3.5404692358537599439 -0.033869940104663681657 1.3765277536387747759 2.7454583780601358178 -1.9661580682621699889 5.5021219524553268698 -2.9144078822376418003 -0.059289920089519193569 1.5971515467477115369 1.3329307650492756565 -2.8996320469296996691 -0.31785946701027945061 -1.4060232264292416016 0.11061432480656095689 -0.69042877836313232276 4.3637041686835207344;-1.6655388814375176043 -4.2532881115061247357 10.240615319070460743 2.2080816054450509434 -5.3838988581849829274 -7.0676209325710113163 2.2769177782552638689 1.064536530983736462 6.9852917290663860683 1.9442538478853943484 -9.3452462401917575363 0.97575471344662934037 0.39119820598739912798 -5.4369315236430812988 0.98977621393344750178 -5.3059782421553736143 -8.15470338780057169 -4.6415866282467570514 2.3413882791749567325 3.6989771701677267579 12.008809096453363807 -4.8708911472003624255 -9.4841591324507952265 -6.8060163925979919597 7.989813334735829109;7.6497157537250890513 5.5309006037774084419 -0.050377336256516150326 -3.6513459536449053289 -2.3410647185492474698 0.7104194040144876654 3.6006057998014675547 2.9984476492643472589 2.8963785455126513924 -0.060265506710991401107 -1.2756362614057350502 -2.7324466978568673348 -2.8761607787934915237 -0.10288478740442622006 0.086727414206689473763 -2.1308377592309351023 -1.9024744984771007061 0.2829272790752439537 -5.3290538002848117927 2.4879211260506024495 1.4307852695649481145 -1.4032100264695439584 -10.832646891140203849 -1.5775224396555276307 -1.0783237611429652425;15.041025177018456205 -9.8125892697158700884 -0.68210974630928133955 5.9274034620282654018 -0.30766194893193637983 -0.42085981046963283347 -10.142780399595118013 9.24670505097209805 -13.328260134869532649 -5.0853690298746920817 1.2852188573165854724 -1.398521539663032387 4.4192522912572327343 -1.1214484683866849934 -2.1330364943762547547 0.56331669370088588433 -7.1417204541625283198 6.5004587258377499737 4.1194323071865701635 4.6427569599755278418 3.2486346435140736055 -3.0664849419741835312 -4.4532702707021805111 -3.2539191124498891838 -3.9641056696033936113;1.1111875494251357566 3.5855437047576281806 -0.13618980888262621765 -5.9634299725874910791 0.98214593338203504125 1.521925444753267076 10.192823603772760421 1.4540238076296581049 -0.9649849923967425136 4.6292891668127156279 -0.33903041398285199692 8.7340500839359958007 1.340288135986104967 -0.31401638317196395311 -0.94272220724857502816 8.2915892383279761191 -5.7304799840650417764 -8.7831351391371086379 -3.8109859222924491462 -3.7393488942760182425 -4.5216410929803370067 -4.4017485030810004076 -0.49370359738088542834 -0.67750500883692588161 -1.1326134246573977826;-2.4648766201804299669 1.2571817715059456777 0.01777360031056612194 -7.4162856667093830509 -3.2860697214920602249 2.9840905304075504567 8.7954186857075704609 -2.2334343343782312452 -0.33798268751303528479 -2.1311533154675088575 -1.5494407225136572759 1.1416457090398126617 -4.3143628816030119566 -1.3197757289742200193 6.4114942118607292088 -2.8115179581701084111 2.4141088844129581226 1.3874195084758897956 2.2762976212189212077 -0.65454531668913640274 -1.348966762096877936 1.2336037769296972488 2.3495980139869443448 -2.1677714473561060515 1.4337214348150326693;-2.3401723749435441313 -4.2512662538493213304 -1.3192725600876809011 6.4124994326938224987 9.5196400507072880259 -1.3121241461633883496 -7.97283828535237582 8.5609748957854030493 -12.688969365026954605 -1.0981855607079309411 2.2921310974361039925 1.2780386747597092256 -8.5032328153128400317 0.83344310303105495485 -8.4646170470748547388 -5.0610415315624379673 -18.704458067271104937 0.22997625252432402077 -0.59168366297652041919 4.5702898235388333958 7.4558258952142635323 2.1089119575001578077 -1.0406222301764547211 -0.084339538924154119903 -5.2856550441118832495;0.37688028154488756316 -1.454379828263210328 -0.088806327070689958236 1.3796227144724690916 -1.1102935648942218183 -0.21057362417283853606 -1.214942200817914042 -0.33604423513054737516 -0.83994769138060076941 0.019433519763882380754 -0.058889634904145803096 0.15447589157745947319 -1.5278784136229257573 0.49718181563226926389 -0.25405650543046187639 -0.18918051171927072196 0.90771496626364966964 -0.12328329574867499807 1.3714564150439834123 -0.58111423012815033307 -0.16061480233669608864 0.80104985144887508319 -1.2452266864401788649 0.071777415122132107173 0.71824617062578721693;4.3456229962751420359 -2.7003511989175787988 -0.92618588127062628779 -3.7737910165070758239 5.9538657134042320962 -1.0616164345124117219 2.1800577717953619761 -0.46344779969413307796 -2.1108207017116917825 2.4514267549351762554 0.60162870557309722219 -9.2748433050475949102 -2.0528516692623530737 -1.0804746767551898223 2.5050183366661347151 -5.5269244187113608646 0.80226701359569618788 -1.109129514213236245 5.2570752848807797974 -3.7649450336579057819 -2.1048537060544516564 -0.65246208838178909595 0.40341523095161635482 -0.4404663792895711083 2.7605219403497480712;1.4250042678590348899 -2.3095215621214877366 -0.025058979463892547962 -4.4325591708058906804 -5.2782137325441320641 0.16292327910086240594 2.8179652803913284309 1.9649432119005518782 2.5335188506795800478 2.4751173354340769706 1.1733571008933640911 -2.0738164969123555892 -1.6883322036581134284 -0.54342303436444194809 1.6918402114867481245 -0.71969589542251055647 3.6152959000338338313 -1.5863753770434647627 0.49175487329808886816 -0.74513413511750237195 -0.24049977618790929768 -1.2922560837081198404 2.1279047570714775262 1.5457805066092882296 0.58210693637696098168;5.760031843314286526 12.28219800106475823 2.9307805772701862601 -8.2723273062392390642 8.5489902962182089396 -2.2038642860993786776 7.7438191773982243404 2.4586430367877367686 -1.1881357126847129635 -3.7928242312822932902 1.3602802480219702286 5.0509579164732079093 -6.5069340647157467572 -0.26422114677781977088 -5.9019554455741021215 0.24728693912771126939 -1.7740717790983628888 3.4568782907876047794 -1.5514831802403632466 -3.0860552834988324022 6.8691169047257529812 0.67093028696615597539 -1.5983414471215011687 -2.8547721930581246852 4.7857085977784805664;-3.6376163331030593184 -4.8094810499195581599 -0.31764873928899467481 -3.655729159626144753 -3.7306739080969237854 -0.49005199416967110126 2.377362209442484442 3.0636271496595259833 2.5929964009620323218 0.46011263907771043913 1.4130609089292764935 -1.4165660023289785574 -4.0105255444411191945 0.10831243200351914346 -0.75648014496518023453 -1.638216073071194101 5.4287601729599783695 -0.24940565302811001924 3.0224774622014516368 -2.8427184016400297573 -1.1383881333896752608 0.24711174842628866322 2.910155691484663798 1.5760522694094267759 2.0367052221213235441];

% Layer 3
b3 = 0.29296243592784959597;
LW3_2 = [-0.31651551816997058886 0.037890057106051512614 -0.062157812468828163577 -0.12811834657259926762 -0.0060096619956404705859 -0.045739835720013784226 -0.044424613044727195854 -0.063738543317222659534 -0.075261563510004944599 0.033901614605488787635 -1.1871481732736324233 0.12156609396964455916 -0.43145191423980255863 0.024548348567208121834 0.32824067324344902152];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
