function [Y,Xf,Af] = ESPER_pH_8_Other_3(X,~,~)
%ESPER_PH_8_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:23.
% 
% [Y] = ESPER_pH_8_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0856880826241672722;3.3674994989865116857;5.7887363588522218194;4.4159521291150669597;0.84748178599042467418;-2.6088230360604014457;-1.4106147242098789896;0.79655193882659258708;3.3940584885593687581;-1.3486895369453060223;0.31650411263973382558;0.4671667031238868617;0.52044382203536831977;-0.6426199835035528718;-0.93848741959340775676;-2.5420660472703962007;0.24991371789118702051;2.0942120507453476641;2.0215624853140741202;-2.2586356846962845069;-0.91918530398026410122;0.37674738220069564631;0.9599187046722265082;-1.2055417321478363313;-6.5265931918473940598];
IW1_1 = [-1.5814092212528880754 1.5856854738539711835 1.0132557315618588856 0.31485718346942631607 0.049072257414134907993 -0.30864449114830772025;-0.031145601951350430914 0.057408933637862917532 -1.4025760517130247962 1.7125605257688425453 0.18110884692067719115 0.29954710265589790108;-0.58637802114898740502 3.3710479999576912213 -4.9913946333328302885 1.3541516146490069072 -3.4724409289888553687 1.1100347895006694721;0.23183858836834114747 -0.2905758321026307156 -1.4117249020552562477 1.5661391150691823526 -3.5969278308982484127 3.5529510014484668723;-1.2793930853814152737 1.3924962167451571116 1.3350834743067461208 1.4314122935203315024 3.3357223702840621549 -1.2190514400083931612;-0.94988363013788301714 0.0043906910405338761202 -0.092623800904266195833 0.53909886054976774439 0.76299509474919380292 -1.7213951548967654226;0.98783981707936852068 -0.46748449438513550724 0.14470526468763897365 -0.79340957084391638965 0.42907499221535683187 -1.8495263638572281284;0.79152737497857228455 -0.5409604751336506423 -1.2888380028505961317 -0.57444402660459237264 0.038746026729818527912 -0.15451103922739242713;-0.30695173123083679956 0.019842144521363434123 0.57018234936379430522 -0.18299515333833388242 -2.0333811118700406695 4.0526964031187491244;1.1791292309579681774 -0.47285049732592637772 0.40431249295784071895 -0.77546946422186513459 -0.64001435114396265647 -2.3707669160873701131;-0.40676736768989579796 -0.23175486727520649977 -0.86705903059768008045 -0.14691430447739559084 0.1658227515315538747 0.62915363267565338479;1.1003660639033860935 -0.44306007956111559398 -1.0976457308385265677 -0.12436002776782771606 3.2386036087632703584 -2.6131240419982213474;-0.5340582431075898695 0.033646955994190687333 1.8833597081687094565 0.28467742327663403401 0.26370601152845213333 -0.40492461948818997408;-0.56093736197656218767 -1.57576626230076422 1.7511301717136009692 0.50700758437754422925 2.632389514384607665 0.0091969222480899875255;-0.77383931419423535036 -0.63285776975317453719 -0.39003527747722416263 0.46661035295950803459 -0.84559698577717612444 -2.5129525983515241805;-0.92920431255329705156 1.0227040719222109111 -0.28422323723991249622 -1.1931897647612168534 0.059134744571520500567 -0.32402214130818934867;-0.49112235703383316787 -0.080009504474461382029 -1.2641193027687613881 -0.016757170635295911415 0.13915803041177454702 0.94849325118131400103;0.89188090562699506858 0.9425381022071553927 -1.8102504646441668346 1.9195282004311899904 -1.1780602351478570711 -1.6232762518266843355;1.9208503855742540267 0.1837121450293085767 0.48154327568673965798 3.4784386845115045084 5.6282032300459361451 -4.7622747680572947715;-2.582220093509386416 0.43503759581781265009 3.011793011170704748 1.2026447519919771789 -4.5508258546291679991 -0.1831715355902932274;0.099799473042671824063 -0.17994512500833398372 -1.1382204793102077556 -0.076944714865942218096 -1.6460493919968999244 -1.3487953428253951493;0.098202533459015625694 0.10689569072136974326 -1.4588196430618076693 0.63860265554833639534 2.0668199201278492083 -1.8644883876703826076;0.010152586486038178357 0.15208606356055778819 0.91154639199680120853 -0.072810236980801870676 2.2649504520970862309 1.6194687332676958036;-0.10878546467237179551 0.015058189790444509795 -0.45754058169348776897 0.85198570443735421875 3.4342498006999320204 -1.1658337465895245444;1.5043157972848295589 2.5413647343915171106 5.530810681245267979 -2.7305022734357611292 -0.26528362564187524253 -1.8552853738999888211];

% Layer 2
b2 = [1.663339021475017887;2.5969776476609758298;2.3525300325930840195;-5.6075685378993771479;3.2683714546905178189;6.7302612654492488531;1.4340082712898445383;-0.28083788189319974782;-1.9563430098959933012;-0.64845123912987023829;-1.4186448363727413025;2.0351042337434672724;-0.42490881110734696202;3.3434845751773374367;-21.108210381871618466];
LW2_1 = [-0.83805679484759465492 3.6630599719180874096 -0.5169208093725008446 -0.097954087747023799171 0.067250177660578322469 1.2058080704564697605 4.2019462033588199645 1.9826509465098056673 -0.2994791955627968405 -4.5189477914415840942 -2.7424538469974537591 0.87898931072317332269 0.69672396324962293512 0.71839133484266726182 -0.94295156616023045881 1.1230041934687324812 0.094882615408048917582 0.29618510699743455516 -0.31494591532942822765 0.43903334416050399103 -1.3383200858538564226 -0.89992334682035635129 -2.8889094991120534139 -0.49162149416673089908 -0.053341676061349041493;-0.7392701856208423461 -1.100899946710948818 -0.7233925698762008194 -0.058399237653504493251 -0.32332157348514783957 1.513984072769884115 -4.7868988538456509474 -0.32600518729664867967 -0.39971880334746229257 3.8159093710491052143 3.7027642858062046471 -0.23169589761093856151 -2.5226771142950776827 -0.12510512210665944433 0.66446603528601322353 -0.63702603719953387884 -3.62628332882198956 -1.0245072696447923288 0.36500048928160022665 -0.3153603716061820772 1.0870069413422922544 0.99330788139440173712 3.5505064290139651817 -0.30710572929917862028 0.28198341802729492978;-1.2858789389427756067 -1.9690947245211862793 0.22200492385261871853 -0.19845545188685137505 -0.17658575274984805725 1.617249462266872273 0.21164705035047279291 2.5888452181569707733 -0.29822118900271488151 0.12119696861308591751 -2.2069567412638178006 0.70583054018812352304 1.0755009357718745555 -0.48158701572435758109 -0.00091266730876381901849 0.11910861276761318395 0.31591792184868039417 -0.36552421431413512076 0.0045355459932244455989 0.25206777678120451114 3.5436729890304548007 0.57493836067799941603 3.8864310084692008651 0.21835837655585063621 -0.049892795737516336396;-0.62607122137866189071 -2.8539079480006424028 7.817941555703421308 -1.2818848366671000694 -0.24312066212286009836 -1.541401663419747603 2.9946702652634367148 -0.64482114847117399936 2.6332955216825171263 -3.9421803976356737387 1.6431610075782114855 0.076970981714191810674 0.9308500723541546229 -0.46503818677003572191 -1.6738065654671148152 -0.39294282817486486659 -2.4318493573390673745 0.40348690634738609839 -0.85547243908649905908 -0.42524194369369211488 3.0075147277321119255 1.0043629132966553907 -2.7193447261574452689 0.80936571590286787714 -0.35545213547272669352;-0.95982573079650068681 -4.1563394212942386119 -0.11743753706462006781 -0.57644861671332725539 -0.13590375699382245545 -1.6519520776672760309 -1.2326751032899063709 -0.0057491103616608358121 -0.28911876287988907963 0.2064938974299990182 2.8860656365775048116 -0.35237195355078254622 -0.58034933314665371196 -0.028073423897239740965 -0.86970610484072374824 -0.15722302414180649999 -2.9095917651888698607 0.93846912061979437247 -0.33643764580050905533 -0.71975395357806903895 -3.1244339667574485553 -0.13533290782665963192 -4.2897903555900960271 0.14554453309747117373 -0.43175442660459817379;-2.088730735288349738 -7.0403795247163403204 0.54955149939036140871 -0.99630932407132477557 0.48433829691640778448 0.3181553627133096307 -2.9969993030111079513 0.73072317191952862458 -0.76354994253489105738 1.7921717015412286234 2.7101879635052279482 -0.8228191837625835614 -1.565377158268725033 -0.20306428257426237249 0.30247230419025095127 -0.38802760891881893368 -2.4928950566993934856 -0.24905597346511124113 0.42221395333811417849 -1.5303440151501463973 -2.1847409516309341804 0.85313077835154282891 -2.7982090822874403635 -0.9227984221281206878 -0.08873387249270955901;1.7434632313528510839 0.57221936375979354228 -0.5720823619800529114 0.87113548851633337833 -0.44773120017943035531 -1.7561192063604962321 0.32981697879665711204 -0.76465414640868356599 0.14101378189403809826 0.77823741959200809504 -1.0946257280672369028 0.51963917722617158912 0.70476376900166159967 0.018257978181788050986 -0.092985137154414587712 0.29567612348231930852 1.848657117142573858 -0.15192310011039875106 0.059522751711722429735 1.3784481646676973732 5.6801959736596892014 -0.074266012199950687256 4.8997310118125785294 0.70194221398918732469 -0.18982930360126365477;-0.51423461332438469285 2.7392774549317877586 0.22356166638348035081 -0.17241256862204540345 -0.42214545676098413907 1.2317022074435295398 1.8319423263089773535 1.5759720124676257491 2.1826472868814112971 -1.4039803882922485823 -7.5539040080898534057 0.42650223343857285307 -0.55138664655393376801 0.39029339827793191331 -0.21891138149148339775 0.3648259207399165982 3.9512410830624822289 -0.53125292414511837702 -0.50381024987371314516 -0.45904082275818686165 -2.9293452243392938961 0.65660977646832541232 -4.6231054620404217204 -0.26177449614285247526 -0.74204841121555509265;0.26399270117898365751 3.2285397864343767793 -1.4690665651531913394 -0.67448521421578622181 0.46078350614904872717 -1.2752702509189048907 -2.0968909329506200123 -0.047507209884240321485 0.23961244273935486393 -0.54595363975177335636 3.5476988835492120344 -1.1734717387264232968 -3.32536938114340197 0.23902908663668029354 -0.1871293747163008947 -0.73218100722079260123 -3.2939371766758283044 0.90505546315930107681 -0.49860582529830921317 0.94435629860217196185 -4.541321494113241819 2.3700122779888226354 -3.4708826100261469527 0.2367336742800978111 0.43674784508386338411;1.4522610253894545629 -3.1121626532699782075 -0.16395100395435774354 0.50206394706818269213 -0.083989079479576289611 -2.138607378567722872 -0.75390297431683284124 -0.74803638087439372484 0.1009557173728209134 0.80647285541673519038 1.3838730203591917967 0.15064450133177517688 -0.85979702646254374532 -0.066909870304410340447 0.13362386909160758885 -0.1905352817432135748 0.7128384929069886411 1.1250743586765075133 -0.39073594619648666093 0.12688256050493623706 -4.8589739239845437524 -0.13513193842114293308 -4.3446261883894354838 -0.2910424415130736242 -0.025872139531988722766;-2.04432058973324704 5.3148225688821861823 -0.95317157453496881292 -0.065861272944335205737 -0.56217974897312961158 -0.5642196190839332548 0.90171176305731981504 1.5640755025125498978 -0.11445213083156900724 -0.51433902725290270297 -4.0439045398656467967 -0.42235196291926646595 0.12415294022053210976 -0.33201167251878221931 -0.57115442080912504075 0.69371495183944253959 1.8413733520308432912 0.6703731332875746407 -0.60020527443399041001 -0.19225653130118863787 -2.8639370570524809168 -0.16218707764562412255 -3.3152923189050529373 0.31768478670123451169 0.29767498631258937358;-1.577650398779983032 -1.3887061280788348672 0.2143908255272915786 -0.37675462776876095239 -0.080853882760859835388 1.7418840977183496221 1.0412112101679447118 2.29483193423075571 -0.1686353142860282095 -0.59834842012812095025 -3.1959158774219020849 1.5087919549801094288 1.334591602322140913 -0.23926621976969128514 -0.12837408296154037557 0.3102100531113051729 1.0389600621122991875 -0.27205099764169132781 -0.019526053786066741025 0.0025866765391102572967 3.3957718658020810132 0.09727682452850806849 3.3322400100547451274 0.29002925716455824068 -0.18200558341702002818;0.20183407004627590409 3.047193207343069421 -0.48311524918439513465 1.0005108845777355153 -0.52171793039178071538 1.3184648306730701872 0.27470281696080811606 -0.098234091775646154021 0.20155228818252465817 0.99924721668830684962 -4.2665854697707077392 0.35261784171043963898 -0.13089729609367697916 0.25175835901522930493 1.6670229482523408748 0.38833711152387195842 4.2831203714549124228 -0.63550084324914168921 -0.048810305432867698294 0.80472643380112629519 3.2272306322296953063 1.2071385165161003794 5.3445922842152127075 -1.0861548491038084396 0.60645770386169783883;-7.1602148249936865554 8.3241199741948808111 0.74430097786972237994 -2.7000988702085590987 -1.2126219399171027646 5.6149488175216717423 -3.8318382099867829282 -4.7293330245472118278 1.1356102338974114474 4.9490050455801073426 11.126343710626640515 0.52328977880683946733 -5.6148499151585369304 -1.2375048158838986012 0.42474475340204115303 -3.7074935970500475513 -7.7205823964478819121 -0.36816153671040119377 -0.61877292723979193667 -1.4762223862696484122 -6.1990879163946521757 3.7916264579909380039 0.53336960061236982078 -0.041864092614825994254 0.44943290966128268682;-3.0284896946883339552 7.424355413593422881 -0.26566195692426458619 -1.4790333618827309348 -1.418636066547115604 4.8032151148132538054 0.92838575518967869638 2.3529993209828914402 -1.1013452989970322626 -0.70175532139949159394 -12.878234975772933524 -0.91232496581751587605 0.96159291693421666825 0.87725098265781020768 -0.55068809997762335762 0.16951922087307771947 11.731387505138229699 -0.96931085921160375918 -0.70147915978335639853 -5.7004813811486210184 -6.6734736969839207887 6.8454270724181345287 -4.2182473749261228946 -5.346723758826914974 -12.869634504518980833];

% Layer 3
b3 = -8.320048925211647628;
LW3_2 = [0.81193838439399235174 0.54583306572220746666 -2.806877495854734228 0.30377525283997375283 -1.1021222403362838094 0.37832925984960141808 8.9194157977469252785 -0.56750299897835565499 -0.50371203112368279076 1.2935716556772132169 0.60396275051708736559 3.0407667151986359499 -0.74741380930508150016 0.16091701602526947701 0.18387489721368130424];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
