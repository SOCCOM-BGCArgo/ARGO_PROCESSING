function [Y,Xf,Af] = ESPER_tco2_8_Other_2(X,~,~)
%ESPER_TCO2_8_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:56.
% 
% [Y] = ESPER_tco2_8_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.97835694203020518;-2.35387013664102;-5.4670437199651696;3.4240141236052688;-0.66109328869937301;-3.370575633620879;0.55880604088585994;0.10860758715983017;-0.29548057669809003;-0.032698029939511264;0.8623179892248376;-1.0054447150792278;0.91688457212808594;0.97803411125027118;-3.7317644794382288;2.1283512672390756;0.069721816805865533;1.9581533904345088;2.5122174150304817;-0.33636942611520548];
IW1_1 = [0.4449307431580844 -1.4500053763291487 -0.9559798615734092 -1.5173210702739628 -0.14302364434515 0.010292252508510725;1.349536806141574 -0.57771962890569273 0.39427632876777069 -0.84576359364184039 0.50188247573271394 -0.72967819897218389;1.5406142576929842 2.3156919199387866 1.1290504776640655 -4.7869829830761894 -0.48742062840180567 0.94622434368422448;-1.6451796391192977 0.81346262398834823 0.11195600101131364 -0.17109061746139767 -2.272615845096567 1.38745051655663;0.34538232629927484 -0.65531532733044207 -0.8378936001595475 -1.7502574081142781 0.3679321602242524 0.54443362473266677;1.8896759937740464 0.52942605593233238 2.2804294428582268 -0.69817232007259022 6.8385806384158982 -3.853757735706635;-0.69966300864195496 -0.51614342648982015 0.66334400889368039 -0.0080707741326469691 0.29523996638459721 -0.32556334119413433;0.62701199405987829 -1.7397243295371845 2.0736135613449291 -0.39797378881865253 -2.6314431096803026 -0.11154301394109832;-0.35642017239421181 -0.15021113657110907 0.21745352542492008 0.49234558512054077 1.1949846689684454 -0.79316489406628454;0.21256587092696694 -0.98424879140130417 1.7926993625190646 -0.40964204942856697 -1.5936091197352418 -0.12951601445383173;0.1518968925818687 0.61395632401293232 -0.17935974024260284 -0.09712888883904798 -0.97118296696941209 0.66169183833835932;0.39297271332212902 -1.7207431973586691 1.58204541020593 -0.5446739348910371 -0.74935247907186442 -1.1548156822341606;-0.019527278988876063 0.1978681723185988 -0.046295693676870288 1.5074403668806657 1.3850901230293706 0.93555711227593674;-0.32928753342393402 0.49821842789836668 -5.0182592175217424 1.4608626416425579 -2.4446679850014394 0.56331993744347053;0.24055033882162999 -0.98083838475262519 -0.43182044544247244 -1.9584767534765408 1.2259116811385882 -2.9536614576672449;-0.061699509088596477 -0.3935257328075617 0.51830803246544277 -0.46287630069947266 -2.4330549774525663 1.9370934710923595;0.53176127368671344 -0.55296082733276697 -1.6681007966863748 1.5074900951613837 1.5546244589608025 1.5086648632858697;-0.065322963682871771 1.4220341730538504 -0.71389439847411018 1.7752796210481625 1.3529820113562343 -2.5147222755767054;2.0050537132537189 -0.87350161657857495 0.1085436445701215 0.62799485053141935 -0.032488198559822247 0.24952138776098989;-0.10290716865855239 -0.30633926648143261 0.35362327258259951 -0.87593287247594753 -1.1817385555277966 -0.32654870888436888];

% Layer 2
b2 = [-2.683752196564742;0.031674714147946148;0.72615106291527254;-4.7153306746574275;1.7057128555650736;-0.75633552294852258;-7.8207369856815276;1.6631098064456638;1.5880959150551686;4.2637353269117417;1.8047636159567508;9.6508801381295246;-0.40287217590625934;3.5546907200077351;-13.696672334015515;-0.73091252065401813;1.7924114521571166;-5.6965216730877213;-6.8389702333223035;-7.1959779067090377];
LW2_1 = [0.20764340802304268 0.20909654640012251 0.0080685720605827987 3.2664850423298253 4.2034224106220961 -2.4113334016749115 -3.2594002861607603 -5.6775594781367182 1.2493750481971633 5.4874106782849648 2.9842920363051384 3.1759736573584911 5.136528319633717 -1.8456319040876601 -2.414455899065358 -5.9114711885863223 -4.115921170938373 0.43720303057927962 0.77581388195488898 6.0817982021908072;-2.0887511295836703 -2.1809009349125557 -2.4209641020944854 2.4426261442901884 5.0786843642877795 1.8935430147135979 0.14455424398442104 -3.0457660884577127 -8.6636429091549605 -10.54168701783988 -6.5096643129214664 7.5591274397541284 5.0988122354828018 -5.3769432002656519 -3.145914583215164 -8.9421377844551522 -0.092537671966208421 3.3185668658585619 -5.7323713120886488 11.968828675286408;-1.4638986162053989 0.2326911723340942 0.30912658382572905 -1.0325607841282618 -0.043085672964709942 0.60326962666141537 -1.4455414095922472 -10.106644156734069 -1.8321975660803307 4.2970484539293441 -5.5191279513621865 2.6282458309816237 -3.1346929538995751 1.901340103443975 -1.4134868298891652 0.79013606203961018 -1.0410550013376103 -1.3842150026634941 -1.653171292435285 -2.8363805914141955;-1.7721739189260515 1.3414360854060428 -1.9919211747708194 -11.720838804958312 -0.83579879700528192 -1.1020418841230859 9.3641088257585228 5.9282654505886248 2.2788955618006845 -0.39900018288088052 1.2440943158440272 -10.052928149377607 -3.2025496709018153 -0.68215360025824201 -0.90437590681097157 3.6803749765297251 -3.4530937090624887 -0.72227804140018503 6.7886408099097224 1.6299868881763899;3.374646064174422 1.7608070485366827 -2.386461932539274 -0.18283795756047477 -6.3021192062488574 -1.3771557716194816 5.857887776486308 6.3274722207321616 -9.6274816075803074 -2.8501858787895942 -4.4114735174567343 -3.2037150967888128 2.1402546647761818 -1.5701753006173407 5.3216988596155419 2.1343090317475246 0.1578953063636829 3.2407126811367064 -2.7221927189913044 -1.3469960821827531;0.63170336574397923 0.11828428352825948 0.40172563787474791 -1.0408238433089587 -0.19079523021684694 0.1097053086556096 -0.2949800098948499 0.57268313592435149 1.8656077099988067 -1.3919972894189634 2.5133404189903579 -0.14022715593823809 0.34391468454249557 0.34036763734887349 -0.53660962107469434 1.5881335358037931 0.57296025630222247 -0.34701417070527002 0.008650888646439963 2.2590689393439374;0.45414703086448677 -2.5899953722571678 -0.0635257752735994 -3.5201249129959975 -1.405000873167199 -1.6939384304433087 6.6578926638342883 -3.060806017966025 -6.9417960337625662 4.3382524798105893 1.7536848467859403 -0.80101552827057498 2.6819879793808923 -0.16196180778856809 1.2132122172029376 -7.319295342962751 0.11398706705197197 5.4834712099023371 4.5552709836944212 7.6076399097072356;-1.4917256837638746 1.1395207726984689 -1.2422395495440501 0.93143953528479617 -1.7705048122669438 -0.59090935814942358 -3.2518839941191207 -7.07357867307935 -4.2581741707288234 3.5147689720792292 2.6185458652335916 3.8033824239296981 4.9544736818105166 0.2642590443268949 2.2998172757466651 -6.4046064667902334 1.9041908733254491 4.4431308754316676 -0.18442498470621388 11.456793883317767;-2.458204574739733 0.64048197740743651 -0.64324832325691994 -2.4772743139156179 7.9789566829549363 0.68139824861340448 -1.3845437802302172 -1.9447844613279153 -1.5365626196550792 2.6053615520621434 -4.8888832849896753 0.21842138828277419 -1.5639742833095052 0.69707594780644444 -5.440555377788284 0.49569538534326052 -1.520960122568082 2.4833531496550192 -1.989934645992478 -5.2914477191023455;3.6426023115121242 -1.6630035385001256 0.90313324729324274 3.9890504071485497 0.95236928934862286 0.98001623849853126 1.8710079561354667 -6.2747541194234007 -10.756730544632578 7.8220684570324099 -3.4532797131162662 5.0985967773753051 -3.1095704851056736 0.43379641720500106 -4.5133674654440563 -10.65150285947092 3.6434186465687737 3.1775254336144507 -4.3022221901137279 -6.8981637491828387;3.8348617867053774 -10.061932172746358 -2.496434400854707 -21.529984302358848 -0.9914980580816074 -0.74274575116437536 -6.5250706618306626 -1.0309470912051031 7.3051683490422405 0.093158654484554973 14.688363267238097 4.0408102004971553 6.7544801239768253 -1.2147506640205228 -0.42026797709384761 0.807078804124992 -1.564844434715543 3.9945888977255053 1.9610566155088998 13.625017368215838;4.2846543481480719 -7.5587184930073539 1.6188391264055553 -5.0318675000493327 -3.7158541488970029 -1.1666506043268934 -7.9312860399656238 8.6547975579879672 3.2778857656101774 -7.6598553684616197 -6.7766204121066398 -3.3453571304690954 -8.0484976261178556 0.78673572891105703 -1.9013695832696349 4.0595678327541433 -6.816813982578549 -4.0488035329518732 -11.714226143095768 -19.516550624371572;1.0263187864739771 0.76275816605816138 1.1468102877273763 -1.95900721666342 0.8621007515958119 0.32145247598258886 0.42831926127306158 -1.1544377716086429 3.6138943309451435 -0.50861693130074948 3.499222807515658 0.6446423432661802 -1.7347454072698507 0.068717562466867541 -1.9443404702742813 0.73075705037047844 1.4485102692427787 0.072005300265048075 -0.18037327008873888 1.0985819086303221;-2.2450777658221015 -0.40522807358926333 1.824245372271627 -3.1883839777051111 3.515489578357748 0.16192469201376145 -4.7193830795096687 2.9932526431148783 7.7984740890423936 -1.8485600369682003 -3.761422476902164 -2.0418450616160402 -2.8606540197740982 2.1080355202145848 -1.4720316892236995 1.6116618361457538 -0.70236944921679856 -3.5791948522302985 0.57821829248941992 -4.0821103633574305;-7.6601830404821589 3.3811314631375802 -0.13177682649221778 -5.0541007038251582 6.4922181751206276 -1.9311498137795382 11.167305849502624 -0.42269910368420516 10.470592108306732 1.7996619959862772 20.206050640904063 1.6641373821212733 2.0811179160316025 1.0688935197172158 3.8566620761229706 0.13830787102730435 1.6164840381642325 0.096564402393163246 8.3579488680286893 6.6635912856871276;3.5930637832346477 -2.0253572392240153 -0.1621841679964236 -2.1481384662207699 -3.9808065184638317 0.18125876138367542 4.6968442620634354 -0.30207049324937163 -7.6140812511729257 2.1641857140436227 -0.30574555384778268 2.6653347372135352 -2.773608334146076 -1.1471440461413467 2.1404314691351067 3.8422213131765224 0.36189069404518542 1.0975779692060073 0.010202103411904122 -12.299435173305724;0.23256401330585283 4.9256545141619981 -1.1774583934375848 5.7479598356200512 3.1715533382986663 -4.7751781105437185 4.3939390444276576 0.95023176628472505 -13.372768841206899 -4.5345305163281093 -6.2601366885237937 9.1386040744298054 7.1317026617496433 -4.1049344368300771 0.081770650404589904 -9.5422442211561407 -0.015527140849054637 6.2338923973020615 1.4955238275219227 7.2194275243243338;4.9032421725482491 -10.837187234484103 6.3790730091337702 0.79735083261150741 -3.4600098481973043 2.8415630070631157 -2.1381549183174169 -6.0771043632110144 11.98627050433989 -10.990556926459718 11.279353095447412 13.663247621779778 3.1450320672663041 2.3730899675323434 -5.2981838983827316 -1.1026943250260099 4.9738998088614155 -6.093152642632746 -5.6235278069497294 17.722777987706998;-1.3951490296522371 1.9848421440927184 1.8218247142151744 4.7359971654249051 1.6933213478227249 -0.55163170549799911 1.361592204340516 -3.204427818449648 -1.0386590364096344 8.0842108033517537 -1.7145889240610821 -0.76525575870367601 -4.861859691787715 0.21702926358864885 -2.4750464642485928 -3.4982445266162272 0.093721701500151494 3.7331794910964793 2.2754438357802891 -5.3489348682345357;4.6152912064053861 -1.4121908968007224 5.5502569337225074 1.2112625869137266 -0.18056865887747714 -0.54994347804418398 -9.2083298059491945 -2.8571988263805412 20.307219982245623 -5.091055942824279 16.776331621175665 12.083912338387613 -5.9640839841061775 -0.92947686721071043 -4.7676047756270856 4.8412488671060041 -3.0288333141620032 2.3779875006800144 -0.82909524843612292 -9.0118562606105392];

% Layer 3
b3 = 0.074839927928893379;
LW3_2 = [-0.069275644368880326 -0.039302427598186973 0.049470905645628303 0.034298172459027353 0.043132618991073679 -0.55360584678087943 -0.10098705940034529 0.052590767679187897 -0.074533223845137608 -0.043463287246008987 0.043804025077114603 0.031201710140043748 0.21222279573827499 -0.12184342480774583 -0.22581148502994736 0.058292260035005115 -0.018087130153618111 -0.031285696061397167 0.087071542136789859 0.051826008349134145];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
