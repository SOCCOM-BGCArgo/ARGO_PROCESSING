function [Y,Xf,Af] = ESPER_TA_15_Other_1(X,~,~)
%ESPER_TA_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:04.
% 
% [Y] = ESPER_TA_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-31.089289124212886151;1.7577668563916990507;22.353449599104344259;1.8354881573321013555;-36.131750961908558395;-23.069362618653350694;-20.915151923408959789;1.1982453507287007533;-3.4185088108171837185;9.447605345699386703;-2.7439970959560575636;-1.0426811734859848801;-6.9254132559861529828;-13.455812247344356436;1.3852431663799822381;-0.2909956898347993981;43.872655640666614829;-38.4487709914618776;4.8461914421369076678;5.9992607058355016392;-0.35087088195566362714;5.6241430960502878378;2.1135456244062207354;-1.3015631648226355654;0.14749586587125215753;-31.733649004454527187;2.6824297631415285892;-3.3435300178608122756;5.2803459561374630482;5.152892225907590884;-37.474546778713673234;-1.8234859420787721263;1.2782397201084172433;-16.741299800379813689;1.2759548339380801796;2.948347136035963878;16.106741575192284444;28.109091826956049687;-32.364468717708732015;29.842492226174279324];
IW1_1 = [-43.188373133413136884 -25.225790215279513262 11.719756998771066137 9.7791114299186112646 4.2635348259454390885 -1.8697058469720178042;-0.64376779227206337719 -0.84685673206203926355 0.32404053531870846694 1.55454463047059388 -1.1682150413401795053 -1.4290904746890389365;-16.219515095293456142 44.700909084831963014 -63.668001910206903915 -7.997786084763651715 -59.807522633188064276 31.35532655991093165;-0.41840834892940609313 -0.035164419209454664261 1.9562119628505312274 1.6321870364325961056 -1.5921673256388728657 -0.79514678262509141948;204.93698630632718505 -18.590365352430819001 42.071933652177094132 44.814700521250834697 -527.98862284451445248 474.32612075436719579;1.4371141786688443887 11.36758944401198157 -14.489625442317596082 -2.6027937912339860205 9.9257534715507524936 13.786360374562908859;-72.98855493470040301 88.777567822885316673 32.826188735054088852 -71.887519881590023374 163.69229187973547823 -55.36224597552212856;0.07893796861362778472 -0.15862139621177642756 0.25916420297426639996 0.68607719453499083073 -0.77030837278676866919 -0.79471010088087057355;-0.11484557548491396151 -0.16632784138077311153 2.5868399739544356564 -3.0948975306567274579 -1.4330097726067811958 0.45814438222653275368;33.698865108511448341 17.295255608509517486 -0.81821682986820221117 -6.473900043787484293 -7.8969608827361543746 1.8781723683119528889;-0.0521965019147541745 -0.14916907172872473364 2.3388017721698184381 -2.9882495214898994185 -2.4964900583078537544 0.24314484790929691282;-0.73208872425948268159 -0.47831082543690994768 4.692629195896148353 -1.5494686471001934969 2.7356527228018330256 -1.6427707962437088085;2.3640700292146745731 -0.99944399763030244976 -5.2045783899639186387 -4.3522943502533610882 0.13798267551733070513 2.1188413731327133682;34.135928939810391114 7.0373481631375343071 -12.278142941330807858 9.141461479725276007 97.230911100806011405 5.1191069088064660164;1.4479728652593357729 -1.234599110897152574 -0.52141135266379434743 1.3723019851353805976 2.1663134601692717318 -1.6373092350914864035;-0.71351780715441381897 -0.9428403459069027992 6.7725186194841064946 -1.2877035766313553733 16.51180016257800176 -5.9767813997975416385;-12.252063419140297285 25.706603812716462443 14.295488403180984349 -7.1716297629331888785 -109.01102254955424087 -12.42647233259789985;-8.3859407776198828799 -5.1662660665023052431 44.361383241842545999 4.0385004532211405959 193.38163958039939416 -4.9918434610960300546;1.2812721104503994596 -2.9219749000910146819 1.2327812854158026745 2.5055641572207090206 -7.5543252590538809699 -2.0029725991809068653;0.24151721667289891005 -0.65107251753362294089 2.1848561347470343286 -1.4860957880875234061 -12.031381120792314476 -4.3064983289949019252;-0.033312780446671831636 0.65657184972765669784 1.0247103684576850391 -1.5730912535242833616 0.63834546556464133449 -1.2355304881594979527;4.2501365289445836027 -18.376777878284713097 -23.796014207429010412 24.533571642059957441 -14.115928841097087343 -0.41593160487822544713;0.18780402354245709362 -0.068808178947170117734 -0.19182590955775155606 -0.69591097528813927742 -4.2859505425515598276 -2.5460195432383088132;-0.3147379629997626993 0.040575983243725313732 0.42858640961940575043 -1.774660759830939627 3.6742716269010333718 -0.32076522060687528981;1.2541987742933424776 -1.0488273947449251455 0.78670888381581838278 1.1295513726900323626 2.2976319257498705184 -0.38410907996182447333;31.458751906151061206 34.705647684863329516 26.386040061077284946 10.401933646987391313 -9.7712899017294105874 -12.671631224536490379;0.058405410072143462696 0.075677283835565462011 0.326496588581757341 1.6380018908528850563 -1.5297340364566489601 0.39427049930787028131;-0.036362376185402014994 0.004505925127696128879 -0.043544340289477199979 -0.82309842361814888889 3.4544312333896782796 3.0932583786962792871;-0.58079446070879170438 -0.11597080914342777769 6.8893318606932645309 0.6791276364136702437 0.88958732910609494837 -1.3639350900658666621;-3.5141231430698676164 -0.7896720830089438703 2.0494359306376477292 9.6619445063749864744 13.895936340755172367 -6.3379704007156485446;29.23264702983581742 46.440875429906981253 -15.65679970127599141 -20.020724562681209591 43.464911957319095848 136.40400698222813958;-0.011446393640487762672 -0.094244619466412216102 2.8576617701379736225 -1.8176130708493480892 5.0709342423937862065 2.9251581257511869438;-4.7224959859184423294 -0.6919437978746213469 0.30759317837426519704 1.0416177083814217585 -6.0280143866633704164 -0.94003860307670394914;-9.9412862217487241168 -3.8105786619989778785 9.4892686843451237166 1.8035900503600001965 23.792202507012984114 3.7166495843146383216;0.2953922950629271349 -0.049030849811443066866 -0.4624446951779097037 1.7346383977261177201 -3.6750641830953925115 0.3979722296524927927;0.15990314413476916511 0.019611816206863346562 0.38491882711335695388 2.2462890410341693759 -1.8546199954017072997 -0.65776714544300185494;86.410423008477351914 64.261210166333526672 81.812276832796769099 41.603893912045634806 173.8075773159100379 -49.137756647350933292;-13.639620526568123182 -42.314405567431528254 82.769873636119626781 -74.704716726358526557 -39.343160563645994898 -16.521851655875781972;-8.9576697727076979305 46.024296808998265362 -9.9852828277573024707 -6.1096059939465749977 8.8328748849391853781 -0.20649345892215928422;51.086854764107883398 -18.652434322912316844 72.13284333696518047 0.18557731735177837584 -117.75467682524966051 30.078063127462783655];

% Layer 2
b2 = 1.0841486016582606577;
LW2_1 = [-0.0056549247594837514716 0.15893976935051185029 0.0084471455979447523932 0.22063419841444745217 0.0034021211916580094796 0.012105894328594690376 0.0041250104484352257198 -1.5927617873260837555 0.38884109794525623105 0.010229643264421601004 -0.42668330101336832128 -0.053784750845654608065 -0.042924653803581888645 -0.0038425588302691709476 0.070905975603427526255 -0.051471492264577818621 -0.0059704465404202440582 -0.0073849158720720410251 0.023915033996253217546 0.10278339850240862663 -0.1816155892180842113 -0.0050089627496823609445 -0.41771478119923260985 -5.3545343474241944293 0.096367081577542132442 -0.01107594366256641448 -1.0484076859812549998 -0.37423476251922993541 -0.11061707579814065994 0.010700256759256449382 0.0034726497498759004851 0.05368361396223628873 -0.035000292312248208748 0.006044926991523401523 -5.5161589596915403533 0.88141161611227347716 0.0039546725224530471926 0.0055483945422974386211 0.005157822639350795671 0.0034425516934872848161];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
