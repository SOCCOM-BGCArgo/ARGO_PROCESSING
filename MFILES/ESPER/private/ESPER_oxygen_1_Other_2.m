function [Y,Xf,Af] = ESPER_oxygen_1_Other_2(X,~,~)
%ESPER_OXYGEN_1_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_1_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.3466417960619185834;-1.1659167556148262168;1.3973691188806867114;-41.635907263355846908;-0.77610092525435037114;-3.4910640462672049011;17.293243956869442712;-0.12464114716315939646;-1.2014138654191173217;1.6129459854296948063;-0.90640075556780763666;-1.0510624450454446599;-1.4646315023561147228;1.2455897695526259028;-2.9593711469320536089;-1.7753006065125407353;-0.60352716389249294604;0.91733497176399181328;5.3528634652348117129;2.6825962979432054212];
IW1_1 = [-0.024191563065864309795 -0.021117733411760115231 -0.07702963184839518862 0.28093586578298240797 5.0418335409231920252 -3.9433281028075488628 1.6102744061241185403 0.0066704251268682440007 -0.83169516619794425782;0.17398553213579734389 0.0053805114379491762039 -0.65740903069501610556 0.093982401440140972415 -2.955473801756852481 -1.1486041285147114976 -0.20251443476212196981 0.12847032313926484703 0.22722839777432760067;0.01489292172762490124 -0.11558532786602210285 -0.10976825255992379848 0.14342566685998184295 1.5511976101083253532 0.86308048234216672157 0.92574897968207314758 0.19392141064684842444 0.32842454330206788393;0.0053454413568227981263 -0.26833227650753460614 0.038463701998882576794 -41.918965506491964845 -1.0301641284010818467 0.71927285646813265974 0.2314788526415170189 -0.51170430423633705974 0.65851064233007750026;-0.16905309023680506475 0.0047398169230494172771 0.26281531782381140072 0.089278314894506327626 2.2152811863368890855 0.43174977410728132554 1.3013431743038375021 -0.15349011592561587203 -0.00051206808358515113356;-0.017173322535462606092 0.069117816162831441362 -0.22790504496942315393 -1.4365571090731121817 -0.75829903669818243817 -1.0740289298098111281 -0.35299847242106585643 -0.082620243839676005271 0.070546291579684852757;-20.786178265883581417 17.825329062363014287 17.288480305909189383 -0.19608495036876158468 -14.78824601029925212 7.3848852393884740763 7.2373768886104858922 13.576893588399936874 47.826159876668107529;-0.24979817180644722785 0.051426909187626483611 0.49341564446545072009 -0.23379032485152759224 1.7466882281299023205 0.7912566500430006089 1.5076381085097600998 -0.99671045524275025951 -1.3610660778527736703;-0.33425246191088725523 0.28517380377004919456 -0.091548088583976672261 -0.061967163796673857545 2.4497384891404609952 -0.45965995263833470119 1.1706092645518264561 -0.22549036618397913512 -1.8417930022047681593;-1.4159520520027513157 -0.96641751333181247219 1.31768674894416149 -0.41714848031281365204 -2.3509784092030687752 1.3806572395663081476 0.50837009300507196574 0.19377396651516279324 0.61141139119777154765;0.65688997207900035047 -0.84094176429720446375 0.50761078858685870774 -0.12597712774813832337 -0.88227294015287882623 -0.48641930880330724873 -0.80959973960658249137 -0.26398168903123131468 -1.0534275623948654577;-0.10117741169999645845 0.012868104227763873734 0.4976784156224939859 -0.76002432933026320416 -1.0520488641371485983 -0.18275231447536222085 0.13462296328782064059 -0.10306339226664314179 -0.0095850888733801428016;-0.40701134896742618974 0.20576365343040828315 0.46967785903558295635 0.041785457658655829338 -1.2363086446576674327 -0.36485672934892876551 -1.4427365449767477479 -0.3295827860503664497 -0.21187958936924167208;-0.15701853679823979393 8.2412502874392053447e-05 0.7072325113582870193 -0.1795339618150685046 3.3775334339288507479 1.2877719242778953301 0.18639464573342312548 -0.0025223799897052326391 -0.26549043782462616869;-0.048051519293305811065 0.70835000863877817245 -0.73359856074298124273 -0.7246337129570374902 2.8531273020498404414 -3.1454138592653499984 -2.5520507110539987217 -0.92157537770482755857 -0.89358074252228059109;-0.84000701337018168768 -1.0825018287183894028 0.26839809153684324183 -0.61100979664008725489 -5.1149145412914194253 -0.45587095295050467092 -1.1043641112841637852 -0.847711753102939225 0.07326512366102981566;-0.21324848820493580437 0.02989413414477014308 0.42756883482075297431 -0.14856636506199008552 1.3511062637210529136 0.18532042538275508847 0.75927357557060060067 -0.24569562386192378423 0.027931628823393381267;-0.46116746520519918962 -0.21607095171720600013 -0.75286147992931218287 0.22267972183811848841 0.91222135144005978002 2.5780642024474822449 -2.2149450120896232441 -2.371959456476767869 6.5024599558348255002;0.39615162906648065944 -1.1064068105739217618 -2.2064249404953293343 0.57482056115389779105 -16.172623294835851482 8.9775904300555744442 -2.4516958978458709417 5.705030578365104077 -0.47943492536060572373;0.0015727373357397849817 0.056856314800482907201 -1.076361992794258482 1.3330647061040306056 -0.64481332218036402359 2.0610422959440382051 -0.2646470992573075609 -0.34829877627661226525 0.39201826438808240471];

% Layer 2
b2 = [24.659405889470352946;-103.35132568540763032;-35.852654592509900056;-5.2700995611875853797;-32.887677993748660299;29.59553183657969555;4.1954695048631203136;-51.459720943472468946;-4.2041150304787544556;-7.8367888336178843645;-5.8836993590080499672;-0.85551012177125129732;43.28803537146504965;6.8599880280519993647;29.510114300700010403;-69.387576296454810176;0.60258584988946606309;5.0651038320900925171;81.785938659239960202;-24.785138842485455513];
LW2_1 = [58.326775719292548672 -32.246975258115504914 -20.273315349821032783 2.7391701582669751858 -16.19179223976037818 -46.359097425964534978 -7.4551093387419697933 4.6028057506213677641 -9.5445701824353008647 8.6124022398770883058 -28.98219709493170626 27.030076426456709271 -14.193210003579098455 -31.464539243472948726 18.371797789416948632 5.3552270150236962465 14.608006642102202122 26.866029190147322936 1.018050122578184169 8.2489326005721856916;-22.154392189348431685 -4.924181322316795395 -30.030369403508370141 -12.138921501275525827 -15.146257962646735962 -39.435491155157571086 -0.55063864949262031345 55.450634770818084007 -37.811312037158295141 0.44875063478969851039 -42.743798664693478884 12.312582440138005069 18.830458400155364984 -29.432955342521744058 -0.77196758671688914255 5.6471731405460996456 -13.374823420847484101 -62.579385753339977327 -2.3747970066458270466 -3.5241850301312434013;-10.129537602887941361 -27.567463560085265328 -54.96376115718740607 47.237607880496284452 -7.2285118474934630939 -40.147345948559994611 86.963276261278352308 0.24926955973675710143 5.464258706951309108 7.7419809277248692325 -20.125622534074743442 -50.115719033447916786 -42.817542639458906706 -24.375696831669461773 -1.3804528711336467861 1.8154465309032310483 4.1476911814501233877 -105.30619232979326227 4.1318020796255030547 -27.599737722953758379;37.571802634297995382 20.142489599617054097 -49.427851637825099829 -63.946538540819794605 1.4557987237600573671 83.573273332192755447 -51.127794750199917928 7.8862672840558927234 13.118681651974005931 35.737296010971917326 -17.836924969301453103 4.0164712558442108303 -31.39239661401228787 2.027549428131925513 2.8721006016498904501 47.864915272646257449 26.8571829682355947 24.222700725000695599 -8.530812807051390223 -9.7303541422610528855;5.3033605330055841875 38.954178743317868339 -13.715520865646606552 15.018769816500876502 10.434267539979638073 -48.303664156527098328 56.608383768365072797 3.3131061758541919815 -97.62559847258464174 7.4553182679229026419 -0.98530894409235214582 -43.563148213134795128 -23.624257468775613944 51.332622619563331057 -14.23702243084194663 -16.745304449547020909 -39.677204555953728971 27.421405912679983174 -16.645433221616503516 5.7703973045600074343;-3.9453610173427340335 24.673963882311774398 15.865242375333380664 0.034178232436701184993 22.335453309858486648 26.747728751050221518 2.0147895754118372302 -13.813096678603987044 9.6286399139210470111 -0.8634980177154338854 6.6653118103437991593 -6.3476991974020204879 17.429752293988077128 19.247411767160791385 1.6627008611358689016 1.8228529674996489796 -1.4112808592235257521 -0.047898648244447936118 1.3010116113609504485 6.0609529094199992016;2.7708054398259820417 14.661053372144523976 -4.2162255453297463603 0.77403297582446140002 -2.0067781064941057068 -2.5019630828319221472 0.0018230147808895539457 2.9134097591155070361 -1.3839053558576304148 0.054758217898082751918 -0.20732955030122379725 -4.8668824763943323575 -0.39395361788357308175 10.745901917941015569 -0.0038103548584879887683 0.10533864509255294606 6.7793101011758007957 0.34589143887817563883 0.15970387669632432615 -0.24895939104885891902;30.42673657772921203 0.69566170393839465991 -30.032853750601418596 -5.0104041511644430429 31.845928885077203319 3.643870627039350385 41.534607431797354593 11.98335049309696565 8.6758776194899187573 -34.942406565300103694 -43.042463240987956397 -1.4935884450104477406 -71.329687415694422725 48.835374589932975198 -20.588038642362718633 61.201210354909662215 -20.69391645708925509 -120.75164789986364156 -8.1342827188789641468 -36.871345925265401888;-2.8463829302532190901 -15.296653221170053882 4.1804883913270343143 -0.72591416093365146445 1.9733917270066212435 2.5211768458629886247 0.00031945331149538301434 -2.954554968575310081 1.4206405296461666055 -0.069886683338804975185 0.19243921155162851955 4.8637573633077000324 0.3580640050911939043 -11.305762375245787865 -0.009990660407627477077 -0.087290470920304050195 -6.8035726149712774102 -0.33944176826128347191 -0.15062803038671332412 0.21846260045327398069;-32.848609880285565055 28.930147112411628285 -34.314627902712281582 -2.2499897767406511484 -26.835761761849873608 -38.408054389808420126 15.923430905988642081 -25.973129075069675054 -27.272566495509188655 18.262197254634575216 -5.1573667931768971684 -17.96919454835727592 20.170576284736203121 57.549357414809456657 12.016488738402212988 11.802474060614549956 -15.181053734250848919 74.604051497286690164 17.282981392383589991 6.5382939290684669587;78.390415853687230197 34.576216099545945326 -89.402060819075884979 -24.120723240203190585 -13.204394374024110093 -18.444642731404339742 29.473988948981986624 -24.323448273584368451 -5.4843326304679154148 84.790168366721403004 -68.526930870303559118 4.5396136145148604513 -47.459673338809430732 84.817159035660367294 98.382387852567859454 19.604163320503278811 -46.326487558759716023 9.3552207773610760455 64.372603207526694291 -11.602001069278410128;9.0185238475379190248 -25.768731118656951651 -3.8705462816778437585 4.8757329895631196237 0.42898920482479446781 -17.46243611451299671 0.7286367722951730963 -2.6910433372389972462 4.094023019839905686 -8.8214598398051098371 -0.81849698009439020296 -9.7730388578424136625 -2.886085652796482659 -18.988266437822101551 -0.28672742747512525163 1.7284566066718309862 -6.0211373984199649811 -0.33106051359387705935 0.67457422360327767841 -5.3162024752113010706;-14.095103857479575282 17.637501363990498504 31.2033418740988715 4.7003819300039442197 -10.069855608201581987 1.4291205360601730856 -19.01697652234032887 13.355678945885562925 -29.214971672910866829 -1.1579118560132726223 20.928161590793834534 48.095217328805489387 -34.8131736338552642 13.159930031246094728 -1.0591474942085363775 -17.857647552607549102 -6.3996379142352726177 65.68244103010198387 -8.5517419797018323635 6.8900373792473628143;1.2021006245734122686 5.2581870602761160427 0.49466909271094361422 -0.061817948511844640624 -1.121201754032596698 6.1713895450926354869 0.00323520380542673602 -0.12712030634311885513 0.1646906014969845844 -0.061644138285179915504 0.035913320024760941873 -0.68139710832125344186 0.76411608757952120818 4.775855150288243145 -0.01068101650204012279 0.18037260382953840265 1.497325908723132537 -0.12921144723490005091 0.2069826956450964428 0.47083086332386814288;80.063158382123617685 -103.58813448013980008 74.426538266827890311 44.194388132832145288 45.438269377768797597 -75.472067954176978333 -110.08869628773607019 -82.983611742693142332 -1.4497839544276811541 24.853599698023511877 18.913295943856823556 137.103309410978909 135.12637917088466111 -64.625236721430425746 0.90244424650852528291 -70.962174314484926185 -16.231016966802833679 2.5401451010021771637 -3.9304573087881058413 49.820749253559561964;-70.368749833347649769 -32.514403002338930548 19.379594293227778934 -6.4609965578957728738 46.45269911989682754 11.254215599804524572 5.402107509184313372 38.947791017127720181 28.263603631762617141 -23.946672946652551417 29.355635592806418543 20.446592510626299344 -38.808677062277737946 -12.532073991564699256 13.26868250876767874 -67.439561492335215576 -25.082756783695895564 13.141220293513262263 -4.0037064145380414359 39.206840288170219821;-0.35256113509975955944 0.35232939281336633774 2.5787934581705349579 0.043172451198822056617 2.270471508801230609 1.8784804778528010338 0.011326122335315042325 -1.0358343159353431417 0.77520990207369477876 -0.14573856680012894915 -0.1446068850078231216 1.4930801792326955368 1.0458027747251512629 1.2248954118534338686 0.037758636203414415455 0.20514790705117411096 -2.7133338817681598165 -0.26289827627831763301 0.25135479756232331772 0.56580958745835674417;19.223194102118579707 -45.293414279962746605 10.568574192977367332 -4.9649682034041591194 51.987538121619962794 -39.790932816438832731 13.878728714150485146 -14.626575543497677856 15.018479919466706463 6.110354846993562461 29.474367021522073884 1.6791808391022133851 -6.5263135167050547736 -41.171060095417871594 -2.1559751788683674256 -9.3677898544259807778 -59.867110744283159818 2.9145389155078431642 -4.1547323423034763223 2.6503083732663661465;-15.714032767833872484 -16.903711439870406252 3.5415496887161053152 22.407638749829157376 49.058945875369289524 20.571935978774359199 -19.99753319084679859 12.890159647423832467 18.846998019458556684 12.784272669149514101 35.879912065690419354 -59.74615136014513439 -2.1940240815554883369 -30.377219737938009558 21.416610453926860913 -3.2580954457275033143 41.377008322553848529 33.978318055245367191 1.0453601829301788495 -6.8141465099353863977;48.574895515637848575 -61.313355965098587319 -4.2162564197953269485 -38.906299774664717006 71.632181355672358336 32.727454602265012795 35.988808058004543966 33.214666508943288648 -60.433349270460197999 12.578165823542940771 -29.26246886998493224 6.186354630573351443 -125.05312100670029452 39.186662336531377093 27.516775633755734987 32.435764641160673705 -41.587592759961118816 20.983209427323167517 4.8905691851553383387 5.9422910946759444073];

% Layer 3
b3 = -0.41920581142904117522;
LW3_2 = [0.0068428739886163148648 -0.0050528542903958990201 0.010061595814979411648 0.010910560041776500365 -0.0062910861510721734213 0.078581069453543136993 4.2583320907868564831 0.003533262882746854034 4.2481272114649133442 0.001988949350967453289 -0.0021061400822455201252 0.03747915075158655962 -0.0054762624642289616655 0.56417675563318681053 -0.0078373620102183041286 0.0038025296487332166905 -0.56873203422105866878 -0.01999793419060376734 0.0044863435242424622162 -0.0066861228077169402792];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
