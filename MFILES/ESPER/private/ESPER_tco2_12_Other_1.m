function [Y,Xf,Af] = ESPER_tco2_12_Other_1(X,~,~)
%ESPER_TCO2_12_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:58.
% 
% [Y] = ESPER_tco2_12_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.9696870268356488;-1.9154909418303456;-3.6426782544854692;-5.5073845989898276;7.6560850903658091;-0.63798973893771893;1.5355274319250025;0.14380394337787139;-4.6839002396476559;-0.53789720098336902;0.94739469035455093;-1.5696320991115751;-2.1012273617322816;-1.5547466988742125;0.37811722212338256;0.46800640629824553;0.58910802905139625;-5.2116625638636469;6.9390518781082502;0.31881447331674084;0.65470294905269222;-1.476241660251032;-4.120783912432775;-6.6488778647388713;-1.6625887303469766;-7.9812801545428194;-2.5604462783864776;2.7277152319223705;-5.7150182544615751;-0.43540863430878213;2.6214948627965766;5.5757149608443148;-0.67900745039084864;-5.3664203545955012;0.28525894513476385;2.318929454081005;-1.6016029607391937;-0.32349793418169703;3.5971093026385725;-0.62550967251134559];
IW1_1 = [-0.16247790539026252 0.0097261107499744537 -0.45786358040114999 -0.087409569287678276 -0.71001869103624948 -0.82146693985160213;0.039727349767148375 0.028242565551037935 1.0218642170590149 -1.0703332102139651 0.068651048640585466 -1.6538757920358895;9.9782825398930353 4.4671315992340457 -5.368553298372178 -0.35969096600126416 -2.0686211025431982 1.7015478869110323;-0.0042969111455351703 -0.11301641915197168 0.18034123936298069 -2.8027302374744738 0.69778641858642032 -1.5758418282007531;-0.024182155264578908 0.095125191313422452 0.14517625805429657 3.9385698773721045 -0.75455016729293001 3.747159937216697;0.035769281656771235 -0.062509388215457304 -1.9269541126652052 0.80741166207265735 -0.35407628597038626 -0.19829485541281577;-0.22522219536787158 0.12236625481270516 0.074894737991458585 -0.19792902804433954 -0.47787783457525085 1.5996890044732535;-0.080568304162712018 0.047051683932733346 1.773228128549251 0.27444085783131272 0.7860220379803573 -1.0868873051632644;1.6101929363684473 0.68095372266047893 -5.6949263422355969 1.7590012899589915 4.9972548696115879 -3.0886364820362497;-0.29284139202595744 1.1703473628281464 -0.0078342589974457477 -0.91729374650282292 -0.21468383109376757 1.8875931095047078;2.237578957581956 4.540944422052954 -1.4969062749029707 -0.63813372335996787 -2.603364320306043 3.5431242351672134;0.049496070241630268 0.03243941383405579 0.82294335426078746 -0.77981147507622295 0.16517824098926243 -1.4066351412639313;-5.4008977520808399 -1.4218314908349576 0.32344192107456454 -0.61837898264301405 2.386157124991283 1.3275240979520171;0.48258982601716421 -0.13590793638611587 0.17829062816645636 0.21874856641084572 0.63005909614913336 -1.2523737026298167;0.29516688274173802 -1.1854698894512081 0.024371706317033958 0.78967665940810272 0.80131911262199784 -1.8772392188026441;0.69320782919504831 -0.40555058255339205 0.22119859366333824 -0.35956299411127163 -2.4655096143003217 -0.54095659876242785;-0.16634984280738049 -0.14217968138790757 0.29499525567168766 -0.66130548684672541 -2.577855575882336 -0.63128293548435788;-4.6772522813446447 -1.1180247376270045 -4.1834234410272719 3.3889116671805031 4.63436151266193 -8.1467564333095606;0.011227369148763863 0.097912033252569294 -0.33000585084659423 3.7894500841237404 -0.67346719809525057 2.8115874523799098;-0.087263584282672974 0.020429172826849067 1.5170437023911689 0.23779428192267157 0.023703479037885583 -0.7984472150748444;0.28422320949401908 -1.1499213295835644 -0.005269375833428418 0.99220905995159048 -0.2570639419048949 -1.8598203119111447;0.15526126696185069 -0.069369236400297005 0.060315241707479837 0.01874894052669145 0.3301349846075719 -1.7336975509046173;-2.7528356722693901 8.423560198314572 -2.4600312532200306 0.488292134635821 2.1395056833667416 5.2005368602582465;0.6339970900740034 4.666545929534232 -0.35254634062654838 -1.1888208979090129 11.362741339022017 2.9125244827598951;0.0708885274829575 0.042036513266884991 0.91696612379856834 -0.9358316956478745 2.7918173511047786 -1.7214796661668961;0.025981576611081764 -0.065613364539110028 -0.53627862654010583 -4.096502168394891 0.76995373968302216 -3.8450848915777587;-6.1116152635974803 -2.4045007684262401 0.0753511610704347 -0.22475226591574993 7.5628250740681082 1.0343535565761346;4.8513691226458375 -1.5121754168950949 8.528239128687428 -0.61206087063070147 4.2286383100963389 1.0179621797251259;-0.06496840847081807 0.35745335123477112 -4.1144194768206486 -1.9723278131299973 0.59031813931369237 -2.3872297892662488;0.12395111437388892 0.054977435522497842 -1.0993244039545234 0.61508979881013093 -0.24188855556653566 -1.0577987727582552;1.3673760087613205 -0.093753354186546817 -3.5977194910871755 0.00061418676888363131 -9.0966046321735732 -2.1845510543426778;0.066201208469914327 -0.354508218766862 3.9028853508295263 1.9727974096038992 -0.72761670992236271 2.3451344591776935;0.070885421237226562 0.0071287513582235992 -1.3883149020580314 0.60503688839205516 0.28518836487948279 -0.66307003570233902;0.98984703700353627 -0.32173631586893514 4.7477789551966474 -2.2268428187644198 -2.2090587080667921 -1.4351905661874309;-0.048042568096072734 0.82733756211922826 6.5329972660852613 3.4097594816335319 2.7977460329633383 -1.9337725590655162;1.258213893952514 -1.54907314255104 -2.9203548914001281 0.72094518592091716 -4.3406511332941831 -2.2186342757526218;0.069280168131104561 -0.8663405067874399 -5.1492022857639119 -3.2540089297339985 4.3683418832994958 -0.83222695500089938;-0.16005748130127195 0.13067130274224334 0.68963358580587442 -0.8053948898408464 2.5262536375513513 -0.35014375536692799;2.3187509018166246 -1.8877270606381966 -0.92620472751593663 -0.26359601771283181 -8.6001961986034736 -2.3649235790957506;0.012076037262046447 -0.07438708314055395 -2.3116995064496861 0.99089013717365271 -0.69707395128807226 0.20205647055154449];

% Layer 2
b2 = 2.6200237940281874;
LW2_1 = [2.6404594484016295 4.1884056353813932 0.02735644942465499 9.8116146107019642 -5.6307341972696063 -6.6500625949959886 7.3551204841626578 -3.3466019594423835 -0.03959756878421053 -9.3434993316967869 0.022903084006094372 -7.7797861435455147 -0.047055678224204769 2.3238794065015265 -4.1827245193996205 0.29524960966346991 0.84223014036862287 0.021745546090068121 6.3851876564030974 4.3757222006976706 -5.4704304736329679 5.8369190045647592 -0.013937404093241859 0.043780725933425142 0.99934588339173325 -3.4110532242954505 0.043011478642564917 0.016679567846926889 2.5480125615529157 -4.1992486034139436 -0.040527502563720223 2.7178448466872962 8.8861873577904795 0.24687496639242024 0.10781347690599892 -0.078232519686531471 0.11444062466720706 -0.77854610610425257 0.044942516445852017 2.5607926503646046];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
