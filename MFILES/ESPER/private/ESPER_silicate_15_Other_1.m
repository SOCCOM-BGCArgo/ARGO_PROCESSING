function [Y,Xf,Af] = ESPER_silicate_15_Other_1(X,~,~)
%ESPER_SILICATE_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:43.
% 
% [Y] = ESPER_silicate_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-138.904784718693];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0042772329208737];
x1_step1.ymin = -1;

% Layer 1
b1 = [-10.080446137633495951;8.1591189147333285092;-2.2850688340266409604;5.4960132596741493316;3.3069063075098652504;-3.2436043298451195938;7.3507497875400966691;-12.057554204385366958;3.2033840683681655825;0.19037380303270251547;-0.66698657458157462052;-5.3600185741687900176;5.3860518984471656978;-0.37504779991764264357;1.2219076396940868889;-0.1177734475312308543;-0.8870004230007720869;0.36657860388841895238;-1.9623618164965581645;-1.2615067788169402885;-2.6143337874861747316;0.88664694041936631397;0.86062217588997702578;0.26617510907465774528;1.38644256674371813;-0.097882230839853104354;-1.5653750635980743233;2.6035551573430608663;-0.68493555469921763024;1.3091155561170437771;-0.012311293725786209841;1.8141885557615473612;0.69541419782485114354;-2.9387298364452676402;-2.0623579034463661586;-2.8182161074899547692;-5.6014906131903563491;10.011512578471389645;-1.5714551005257975103;-7.3924895077762116102];
IW1_1 = [-3.9035953785329171595 4.1754922676872565646 -2.183966910141179163 -1.0336998102759358265 -0.83162255223668257731 -0.31044874139166778182;-1.6133742908525847692 -0.35358384240669549214 15.593199271917640658 -3.6346440024808406299 -5.1584352812356808471 2.8852302921866117558;2.2702603677822410511 0.042383966466367974102 -1.5670533149901766379 -0.67758995181538450581 -1.9107103442770230206 0.68050142653431955342;-1.9077003375939878271 1.2984500635370053168 7.8938343258126373314 -2.0201728127111366895 -3.1413903880436868654 -6.3671003508245513913;-5.1627116682848219753 -1.9654364719134507222 0.10076231316923758841 1.8519493913591187351 -5.96138095939221202 1.8376784231113310053;2.5410675848833119694 1.8187515986300477611 0.72144060837217094395 1.8241393633788691719 -4.0401717784289346014 -0.84118728330150438488;-1.9677154555111855405 -0.94263045923086585809 -5.5257404361713984287 2.6545864311676634628 2.4618213321631992052 -0.2611688965164141174;0.2130656905411330293 1.0516694709797826945 0.70477995517776181877 -12.662102644167672949 -2.9362667583492068069 -1.1484568226470142083;-6.6966832178591308988 -4.4777773783419272391 -0.0071039602848691390038 0.66937061909499895318 -2.4400195742211923111 -0.20055254655375395756;-0.16224450032472759187 0.15843491459448161285 0.82014043922391577368 2.4441212588840963704 -2.0634487721281984385 1.2260309655098384773;0.21817875203065953404 -0.19947459185583329977 -3.6494579040956551808 -0.26020375282573093845 3.6252501946089470408 2.6601371647261298214;0.38071509061480884872 0.30526504448869412611 -7.1202750174368860669 -0.69906613006977069702 1.4470852571642800477 0.58376564407611930552;-3.1160501638356854492 -5.7260432278667252604 6.7703435536163514286 -0.53541077381380763889 -9.8427185351604293828 1.7226058692068264566;-0.050345931132713107881 -0.62141798973164674713 -1.2595940440046859976 -0.13763705912017124011 -0.85139538134513603751 0.52620746604882595587;-0.28585002773504136764 -0.6563696657676387769 3.612981554741551804 0.05386081261239744622 -1.4133245195713239895 -0.81230217389471759404;0.022245030423923374541 0.39423168747458542382 -0.84475217585026596279 1.3836930660955293337 3.0894828969000331931 2.2945960587869045355;2.9917353314999410863 -2.6145304665400548316 -0.28613902509715982703 -1.6831974233411362007 -5.6234890357895865876 0.51711684133873403457;0.064795079032256341911 0.46673339609341252254 1.0367673983692555773 0.026732531962474687104 0.83323540098390780351 -0.38842641280870399134;0.41681644172753107291 -0.079369530775018015678 -2.2728125804675931576 -3.5192575237239318575 0.89616630394250429426 -2.2122431110455322845;-1.4975263339050011169 -2.6057268943613207668 -0.10212085986596819431 1.0612910449263257551 4.3917320157668386926 2.41341942003872445;0.7566159803616354651 2.1549873394253817871 -3.6124668269457154146 -2.4477539797349545658 -3.9867529382116786429 -2.7116735895625585506;0.13942837383894760017 0.22534610588383366392 -0.75788603548678967758 0.39503454980629332249 0.93458038554229627692 -0.74079394792208796972;-0.10561711508797137771 -0.24680246735281849424 0.30038181720588669199 -1.2019592893943169543 -2.3688650641966231269 -0.001181960124530292023;-0.16856539878285703438 0.16830610567275686162 0.72059333903191025161 2.4632488446349283251 -1.6615755950280495234 1.037631766194972105;0.65314292423307362956 0.1265613941536524456 -0.13575903979675724154 -0.85932277447891380895 1.5539123895451179003 -1.7067121357878181076;-2.7088122052380403382 -0.057135781339514961352 3.2935173899945691112 0.09032537070256725642 1.824773613181897236 1.0854558769154796227;-0.0021182168648211725966 0.16029755372411397252 -2.7924530057961933771 -3.2247981712188771297 0.59099927244667849191 0.811784335674455515;3.5021342449730346047 0.73101187667939893089 1.6562014900865416056 -2.0804861559297807005 5.9156061944718745238 -2.7967100649803993129;0.024105521782485636595 -0.15942534753157724947 -0.63439290636392631217 -0.14809911997450186938 -0.82729263252274787277 0.17458870322560199329;0.068590647951285485528 0.28512996140677582257 -0.88813467013787494864 0.89552821389167935884 1.7226973245320142958 -0.71067745495658685151;-0.025093824053391385748 2.271263980425018314 -0.78714159773956970945 -0.054637136251976567425 0.71683491338828264627 -0.31452988779368368233;0.0018469872706663079641 0.39343349804114674528 -1.3289569111444397009 1.3540233789340587744 1.7045294613746966306 -0.70952132569715220534;4.4192893436425020326 5.1190266247535882727 0.035286798572541799857 -2.6395995763705624171 -5.4491347488789791953 4.8684920600243595246;-2.6540538815041720966 1.3003666317843607381 -0.94792586999314243368 1.2829878585897875887 -0.088038699514589396911 -1.0503674776714508887;0.041522088139022410302 -0.54047509410894811754 1.7085878309383446538 -1.5226711506633412441 -1.0387031629082128514 0.68550840823751690856;-0.046239579319908824528 0.62263135758799370567 -1.1737391447750333828 -0.50064151069805429284 3.125924967189101622 3.5945551706283129789;-0.69144749983349163003 -0.75124484409942959839 -1.3077103729426273748 -4.822923972907640966 -4.0191263410422424229 -0.3797526436850646725;3.2090709537962172071 -6.943792212243466544 0.96979727484655120495 -0.63773812263089257879 -6.6325331330000869556 -4.9450071301882152497;-0.31968000417207825814 0.26257004421373725256 0.34080883507187076376 0.95259246899212646209 2.1899796217006710641 1.0202132581501177633;-6.9102429901105493215 -0.33544157987580469626 -3.6751765408917624889 2.7215746196255774514 -17.552312224781115191 -1.3241021731299862374];

% Layer 2
b2 = 0.54699173584608373755;
LW2_1 = [2.5188095944908424073 -0.10045275054085259225 0.29603724755266341839 0.048181415309229994048 0.053547098409910641459 0.18899505980502540048 0.33889346475150744498 0.053484233565184807757 -0.050615081185700239175 3.9445504946019265269 -0.13560710597494954333 0.32880726196461773636 0.040899848476944285214 -3.5438222707854363236 -0.25659076427183952207 0.45564257183211176461 -0.076034071406573783269 -7.3780319921675987516 -0.23542602367538528751 0.096279380649704940365 0.046889442170802562992 4.7004126215107682185 2.2078584887726093733 -3.6532936569479996791 0.8392931899573992105 -0.10358373369195982006 0.11032367405701773433 -0.080962239736014685043 -6.5384184760811967507 -8.8908819455592986714 0.20516150698340579472 7.5014187272183523447 -0.013271867447663636755 -0.35717638800929113474 3.1209233811859511398 -0.32200104516866773219 -0.10351126739055620252 -0.14886962891232138895 3.207154804954640781 -0.056059099566694185757];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
