function [Y,Xf,Af] = ESPER_pH_12_Other_3(X,~,~)
%ESPER_PH_12_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_12_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.1386];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.9898999278944815572;2.6685796904287961695;2.1546762154482310692;1.9681024570976701771;-1.2441862069611924202;0.59317531726234995482;2.2819382902903626587;-0.82538255439525287649;0.16572113345057004619;0.7893065219518191622;0.14157994463083561909;0.90352144601161221704;1.8203934364362295284;-0.85111935115406001096;-1.1305808814937901019;-0.30679267435436891054;-0.090454423093309796466;-0.67102345479046510146;-1.1776409445792077602;-4.1714147606714044869;0.74853872533215726204;3.4239273503640466068;2.4877065774168407586;-7.873405911038359406;-3.2879276078126262739];
IW1_1 = [-0.011278312827701487617 0.2262743625917639223 1.0879037128180402139 5.2847766909574476202 -0.58369028683144252856 0.93538640157319785651;0.49554914814938455514 -1.8205908189805699582 1.4810768540549072991 -0.69828368552812480896 -1.5713613413477713898 -0.17977753344539953995;0.0073599241287054858324 -0.53990152167914917669 0.43355786316559574711 0.076121245635537237995 -2.8012601338332583367 -0.43644245286666233374;-0.68972836436353512912 -1.1790150769205276493 1.3868019335667209901 0.099754967100162322824 2.0382976112641433275 0.50785072996770230791;1.1447481387104370132 1.3102960454236483034 -0.10191209492424296856 -0.62537285878486337243 0.84096920234996930255 0.81073339879763328675;-0.14769235185587240022 -0.01263924686662354184 1.2109768626366648192 -0.64572224146025725133 2.2343589435461632675 2.1478813273418948526;-1.6850123274460135914 0.083984945046599951413 0.72478768499722590057 -0.28274565111022226249 0.30430834953108493179 2.0140836499329779485;-0.73094249614245088154 0.86674958913596711341 -2.9763664464766708129 -0.13894121173177437223 -0.084082988195723379343 0.20556429844707213572;0.96055882325448871395 -0.019597935804076344057 -1.6723429576777626426 -0.59931528245628484797 -0.053203539860824065888 -0.40056889478915330693;-1.7127890247148291891 -0.13661417044713708435 -0.8038538509045107805 0.02050396720856750149 -0.24333387294240144127 0.45643930659081743961;-1.0618024652431783394 -0.43216653246307629166 -0.41357307027665884958 0.63438040536415118975 1.2691707974486878818 -0.17682313283187767183;0.023045335702643377634 -0.26014689319303474502 -1.0178564505869618362 0.49691529532876133057 -2.3158580588514672272 0.8146839405030013026;1.0326607689115911981 0.16923582643159623684 -0.98316405808140860945 3.6520600806067839983 0.73976402605688795777 -1.302048696317772869;0.038799591134077868193 0.51168774992689436409 0.012160317444274629586 -0.43827763750454895586 1.624600560092435142 0.99609595449306820303;-1.0082792034763048417 -0.4494239207734300745 -2.8310820489834718217 0.57642037978164828438 1.6745484137001540592 -0.70855524661272695219;0.1046835689917754858 -0.54125783942378158375 -0.84675993722457909563 0.56513643954668169034 2.5085863917402684287 0.51430502214431561558;1.1047979239943888086 -0.78316333773749435831 1.6719679040564103811 -0.28450577497281059891 0.8161027180757862709 0.65566915303926287528;-0.27621151206677196921 0.13909212879819343733 0.10971718194289446779 -0.83610029174306743638 -0.45366806399150866325 -1.2729379406708594136;-1.1781296091778987734 -0.0097684474901412673975 0.34568044133714664889 -0.1405528481953025044 -0.80086790260294615784 2.4566343615651056176;-2.4734434893677343936 2.179644585287235703 3.7701121491264748542 1.0258592547236085046 1.2273655777310725767 0.98398915455979574229;0.061638327474522081051 -0.31997079234686709448 -0.014045020925595130129 -0.60958646468263810725 1.921171985741487731 2.0553050583484391289;-0.085241349608958072448 3.6330326049538652633 0.064380077849025565961 0.26152524149311812129 1.9580428266023008899 -1.1125451241711810102;1.3027531047311480261 -0.26714119943863556816 0.20906636102961412282 1.288553071541346462 -1.1784744166872931359 1.5501810636326316395;-0.43754768863081000552 -0.2903967158396821846 -0.25919339316604200762 -2.9152713205859601686 0.82673466813445295465 -4.2871991989422237879;-1.7736526590245973445 0.068680936575211459783 -0.32902739274828596283 -1.7258386883958563018 0.36190911281641369168 -0.96296987855846916116];

% Layer 2
b2 = [5.8198211639080650315;-3.085261044537617181;-2.2151571925497757221;-1.4601563025665682538;-0.32866225226726986097;2.3748839657287525995;0.84783229686515526602;1.5509604496878506286;1.4300898826215102666;1.5371447036444303436;1.2898390141034350442;-1.5197600762083431913;3.2036548102005260041;2.8515614971436988867;2.8466821374116153542];
LW2_1 = [-0.30870875984130791148 0.12191418108333015868 -1.9966777987949946294 2.7608325838549441222 1.2456557202050722033 1.6541557485504327918 1.9088275952074931219 -0.63908311465577138932 -0.27218966751456746822 -2.5046208058870669255 -0.2737119807247110348 0.72656364079673085854 -0.48519309892890383207 -3.3279015661776183421 0.67480979124545392711 -1.0138593061270624318 -2.1547139454974941764 0.36392104223678878316 4.2539550009322999458 -1.3322368160218798216 -2.0132777215392705372 0.60781245688208873634 0.18523605371201901093 2.4248096827832759104 -1.5252065325591293021;1.7719289759419649677 -0.91496012502065271477 0.57865271236184223635 1.8938911578951560521 -0.04365731688284255757 1.55953559098660266 -0.6621531071707527083 -0.88360059758505427041 0.29250856922490581224 1.8460309245374426634 -1.0686825641305106593 1.5178744495032554518 -0.084358238026129198084 -0.11147018161206639908 0.2765911809876546168 -0.9926780947181331749 0.50129531028310259089 0.96382405593466824456 0.68288817699666481964 -0.22670031911678270586 -0.45614711152684844775 0.57522702446978046797 -0.38374511973094616035 2.4498417237583756112 -0.19649072215927645968;-0.47124990181485904017 0.23188899191890885443 3.0253620471218343191 0.55349346265712739967 0.96188161775253266939 -0.56223672609003416678 -0.32318618378731039931 -1.3814638026968220075 -1.8607768175862366977 0.82612417817617067595 -0.34076539139562928016 1.684986583407408034 0.35032848588582399252 2.8354070587700448414 0.51051950528006384555 -0.20086113567149591064 -0.52484623987270784262 0.3627781697821599316 1.3487331651874732152 -1.553556895511887026 0.32656471524744395962 0.52095660812119093386 -0.22306336018965094992 -1.6169030211068649017 -0.82783703316278234308;-0.28528060791973319787 0.15170830588337611 -0.045531371496677637556 -0.1790668587506744347 -0.22874166808662835249 0.0082179305299600359513 -0.30409726421885446834 -0.1593165805142700564 0.00072247005547672435606 0.20352081361396684445 -0.19754875906071581171 0.1698228131493088322 -0.015263594611593945746 -0.11565707165348068641 0.031831507132892220002 -0.4914414034329084302 -0.59051101113582127322 -0.98870857275875112524 -0.33268543033891023741 -0.02998578514748090687 0.64397067028853849369 0.10348861916278752349 -0.44415997691709829809 -0.95279639354041778532 -0.061473471111072736095;-0.20892687372195875573 0.069938352875892326188 -1.7581593971750630878 0.58927137118919792336 -0.027678296474099247509 -0.30728264496699397856 -0.55855139334925973937 0.30321093893984596424 -0.38900969056427936454 0.27897669621219817193 0.10305129939916221615 1.0422634081482309298 -0.04257967408122131231 -0.52456592470891361124 -0.57936155979553083384 -0.80895887520561993167 -0.054975700857769253804 -0.069807792082503511422 -0.063810651484516284215 0.023569059287776528144 0.080503526728416680003 -0.2088991388771671287 -0.23443381919366543253 -1.1039983911367601266 -0.2335622341885276454;-1.0117745074566908414 0.98858657122553905694 -2.3320231173285246307 -1.0196537134119696422 -0.054939092923579936623 -1.438999726127633938 1.2632124308099690335 1.2805238307067892123 -0.27642330682544313802 -0.66620877230014474701 1.3737554364143722552 -1.2064703233131910398 0.1917583224903307848 -0.097989594487509865117 -0.79490742732960850692 0.36174817594373342988 0.98731889185593635361 -0.16098344585266130546 -0.24600886937766386353 -0.17270302946776786013 -0.18682564903177362181 0.40676493441671757179 1.159892174705491108 0.75922884323283879038 0.14306750697010975348;-0.052371766811909699346 -0.18577287044594711918 1.4898803298509353255 -0.33174852132391563497 -0.045960582922791044791 0.22703064159660191201 0.57023228093706845865 -0.27189062167821403948 0.24711672502698772691 -0.3842995572721556452 -0.45096727637462069582 -1.0683717677872373031 0.029085588238567102598 0.48386966644526174797 0.52330793122816809948 0.86231529031005083041 -0.11693413091410725935 0.31382506001767707104 0.16825613624613339203 0.066653226668504456098 0.034094030930643136335 0.016908137781238646857 0.19421438758688877591 0.76536176960222446208 0.41058758947340900924;1.3166528750350985355 -1.0101138056177432212 1.5387375251004402621 0.64411559076961544257 0.083800997653505904239 -0.55961534419381653294 0.26299601877801442873 1.317373051679121998 -1.9587472073819913732 -0.57802000104567274885 0.319269679281575125 0.52479474150003613264 0.51782609948145807977 0.79372158032265871519 -1.5706650619337327868 0.3914267910273565021 1.0793507275991756078 2.9924739492447796074 -0.10275656908107801135 -0.022715978415798664114 -0.37403787121571863139 -1.1998580867795083371 0.45976085521728837779 1.9872507742025031785 -0.10188011898251515819;-0.11434207426866088708 0.18167609851917149166 -3.5451879474353029664 1.1649520777132893468 0.13702154289262205578 1.2945719278998797375 0.39208554704995912665 -0.54853684003660629909 1.6118972853950130908 -0.30751905787292826977 -2.6103490005263112472 -1.7770033863093324111 0.027730325279380890063 -2.552406055269871743 1.5884586056363394491 0.46014175306500254559 -1.211609906855520169 -0.91782258726682419692 0.95913945767020913902 -0.19976411096801272027 -0.68656528425681428995 0.73937429655983266663 0.41082210455688605855 1.2608869133600937307 1.2578419462183501043;0.76904115593616184654 -0.25840328278898988534 0.89345932482625212145 0.65948731936235727158 0.56637484903552226534 -0.045505308870514696307 0.042282881306881112127 -0.39223151056441485363 -0.3331108384899749697 0.035866750365687337376 0.066940173621966525541 0.06326640242613591758 0.028310161634112367135 0.24886516810821138201 0.1712981676484132687 0.50345321906776485665 0.32656538265191475956 1.3017450921488160631 0.46844003609678563915 -0.081136300734584693162 -0.37797466221027531397 0.035491135471654645939 0.31957934560505846244 1.8991111247710126264 0.12539761859780476638;-0.60339309435645083202 -0.14076218709418006347 0.62643925589380122787 -0.23071306197542279515 -0.053758918170081132493 -0.13297427370591430318 0.45590268595273925056 0.15089059471691401715 0.17631435168601233832 -0.21940747896872628275 -0.0081257171209334257828 -1.0286564546032421763 0.087242640975677451798 0.41336965755030224967 -0.034598149896596361308 1.0502550811812831899 0.30706289889180610198 0.59312034520596257359 0.049225216303779878446 0.0063759744934620381229 -0.53244978754801164378 -0.043793538406898022131 0.68443643066315029699 0.45218185067030797208 0.75773811729758611122;-0.65637958849139987905 -0.42968739640691988591 -0.29539041517314318375 -0.046237396791416536523 0.7892742560389078843 0.090327590882171168718 -0.35480825116615211101 -0.54601912659377382919 1.1142255811504766516 -0.82750356957017068282 2.0357186017837922698 -0.66865317607838870018 -0.58068391358470916597 -1.4044475066068791147 0.78518872511267434611 -0.54530815696115564339 -0.2224828393615945199 0.48417839176833588066 -0.15475301538069724527 1.1577121541804729077 1.0703428540007313696 -0.98753035266964428462 -0.43868755175063239848 -0.76709093550989893018 -0.61741043202212653185;-1.2194321355462638401 0.3446817457972654597 -2.6913459428447454869 -0.45952148183246183111 0.73112584143807191062 -0.29975386550804150598 1.2435982960366191996 1.3985759659871519478 0.095741887941631867442 -1.20281978589526517 1.7737983468890989869 -0.73032910581573495801 -0.55673371696618079163 -2.6305525770142832442 -0.93554597975755748873 1.1921023983313416839 -0.99018817532603786713 0.51370902821592057119 1.5639853011625302059 0.68901887079611545683 0.50173927576865240407 0.57656523388817904063 1.7544672511221603983 -2.1708794211593382961 -0.73411796469031020962;0.63663934765964236284 -0.20482201843446645739 -1.2023888071048662862 0.03069983797340079465 -0.046874540332554608113 -0.29533448348947954898 0.69527472507840448745 0.43222372210494991451 0.01552858668300058885 -0.4132662182821407737 -0.57842505049947035012 -0.03555672960521769066 0.090729725238427330614 -0.50146521409509836609 0.10943613326530927943 -0.012481515446323334512 0.57456762849953590955 0.7700008163882791079 0.63461556759297321761 0.12536905259556929693 -0.083253232387766495926 -0.18319831956186580224 0.59992552520879560696 1.4298464310677569955 0.28979860944409946422;0.11463834013051717176 -0.79576455291458225716 0.47228849174490467044 0.35157121528457235815 -0.056802213063871287435 -0.76604851983316035735 0.24209292335814197594 -0.4938486749462356884 -0.27615702096983668623 0.31689922226269046091 -1.6045241732600810103 -0.085743201870690677335 0.33302783668387381244 -0.16025605828339750669 0.38968863441854967311 0.086905625665624805509 -0.15194273553423137679 0.79678395036870097723 0.85817881291633146823 -0.23824535788163450634 0.98867255728735958797 0.055831320854100668916 0.86331958585373980153 2.1038702778796727344 1.3371238419723143753];

% Layer 3
b3 = 2.6243105974506670819;
LW3_2 = [-2.869542795491010434 -1.0982422751265799032 -0.52276687103138053114 -6.486955229441578652 2.8969785791567534972 0.60061047462222483251 3.9051609641609688062 -0.35931724363496075902 0.32720959484703648901 -2.5306068636611493972 -3.8680918244517266125 -1.0177215721277803606 -1.216555626493416975 -3.4238412368477506575 1.3016917903814286817];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
