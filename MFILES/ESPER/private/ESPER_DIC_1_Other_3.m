function [Y,Xf,Af] = ESPER_DIC_1_Other_3(X,~,~)
%ESPER_DIC_1_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.83024371453096679208;0.063482079712840630559;-0.97714670059844344063;0.53404852215356091172;4.3736450455660174086;1.978503522510474566;0.26153755225480845858;0.46563120988079975682;0.22708727263439978938;-0.84281563698464112555;3.1836308843668241764;-0.16630048796909691067;-0.31296281338763459745;1.4894559188770422065;0.49419612844344290581;0.22485751798221434439;-1.2730946184580658187;0.11257463509019691172;1.0316479323477627528;3.6885318756969409648;5.4406682809529414158;0.098721107899187796053;-5.261601514076764019;0.72624589400495531688;3.4513267371260334393];
IW1_1 = [-0.23580811256750405791 -0.27163719007161218899 -0.90325817499639970976 -0.054710897771987683502 -2.0825197444693239746 0.7352821572295793473 0.42528069960522218995 0.94650243248534127183 -1.3785951518937957783;-0.054733970404800040555 -0.031738377742341852827 -0.10794795638479151578 -0.020884327020505567135 0.53446950313136076804 0.47590659421464354129 0.40618080807105999552 -0.49573281919162531794 0.16890747454715782094;0.056467331403761797382 0.2816674327082029361 0.12551035823108533385 0.34296168704476670541 1.0973007827416680904 -0.10044567879399916854 0.4455221286932724567 0.42963094275603358474 -0.60113409329746803067;-0.17271507256155854693 0.15886137672816974531 0.40156682182935182768 0.29859252923921536516 1.0339887674726766509 1.3808210788109351874 1.7676022433511406895 -0.41538047462866167781 -0.083056017570505416558;0.095185579425212094029 -0.0098278280052114114218 0.058436108529883117046 -0.42129693183715988258 -2.7155125500996786236 3.3413689711013585537 0.377294708717659244 -1.5063448578997069571 0.098320586711721766338;0.0042653293138463031081 0.21541493934877262162 1.9134714013086324691 0.35068513521084604401 -0.45760210804047057875 1.0570645486189482742 1.2953181002718880954 -1.8120931755983389344 0.93153788009226279332;0.14243339295596754712 -0.11661472456722923874 -0.099217206642344082934 -0.38184214889483986122 -0.57273725660685470551 -0.12354577746773943991 0.012030770618302169539 -0.65782331463305188102 0.39751752029319020743;-0.057959495316824413691 0.12077969848238152839 -0.572213616672937464 -0.19996345246249289107 -0.57625568953729244814 -0.55455949758629996538 0.20086018525779372745 -0.65779113456678284244 0.4305073337873741024;0.094225894794233738816 -0.10624237175186941606 0.688675967714949544 0.1046152258675662472 1.0440948190820416031 -0.4994043062944840683 -0.54666620542124833015 1.4885822816449860717 -0.66774324511502047841;0.44144542103266770638 -0.26838657989545039451 -0.12001343060609755142 1.3295470237652431411 0.69805047065643943682 -0.53740300570944254943 -3.5590001150010288633 -1.9605592920295620285 3.2428407421640881303;0.026342558398669838754 -0.034825402045310843713 2.0151508366685280116 1.5654017539619451416 -0.4598903375913052094 -0.98254369048599732306 0.55458494852208106707 1.937636089656341376 -1.7233114744435731325;0.60949684667455039655 -0.41300613638619626533 1.3026332087476513166 -0.18634842504478643654 2.5121134842667474096 -0.34748353662535635955 0.65833094820973014905 -1.8792172620930329696 1.4175424647768548603;-0.0058391791137250119437 -0.025889170285993350074 0.26262523389377129268 0.17288023728952792157 0.96834924209837525133 0.51653502834503861596 0.16027186229037113097 -0.04436098338412020059 -0.22104233468324338552;0.14203832692814002958 0.4321769471324385381 1.2985397498710598008 -0.12819183015726420827 -0.44198003584836714763 -1.4455514562016564817 -0.68365024743784064132 -1.5859156253770845257 1.6180877958892356805;-0.37947905241652324371 0.36630685675758895004 -0.88992411564846241046 -0.34797883344539093375 0.28897125973123582998 -0.7737322854337191913 1.2423848948199058828 -1.0786540247647915525 -0.83605513702432121548;-0.0073758738127014805697 0.16079943269388485838 1.6435315430479184862 0.22166932144384152159 0.7315535988569192849 -0.5306538031860090765 0.5188331669711443439 -0.55857921448541691944 0.27085427977332049432;0.022867746454465466555 -0.28055697270660540088 0.38175356490798695308 -0.094418849379514988018 -0.63558174967379654774 0.42831330062973171913 -0.3803087717113637356 -0.16226740032540731828 0.11266852732735554987;0.20894025127424761812 0.091480696420893237164 -0.46822353080495693334 0.37221165096208497225 2.1654455502068223893 0.38834990982782846558 -0.19130557478984255848 2.1928653951350463025 -1.2281762886875051688;-0.45354586726208495628 0.033073799383529743634 -0.41822573599042472958 -0.088550205293739914225 -0.33903434256382242173 -0.49593387718484971405 1.0085038150195966278 -0.51049166978132454187 -1.0654980050656419621;-0.58229332048056980931 -0.17554418264050689058 -0.18005988968240851933 1.2115867153672859047 -0.15123979664146941504 -0.49112599913629745307 0.088350445217343365201 0.81006062910188170179 1.4240291326344283185;0.071848395774593884489 0.068424152178090308363 0.57159901356998132904 0.41147828128010993654 -6.6902754305487013298 4.4795154116231437058 -0.10952150087384107668 1.9024280696897142295 0.31093419707666714036;-0.16772455286305024136 -0.078060376875873305202 0.014248277917674072313 0.20335832111839749481 -0.73327586443861469956 -1.356595716615117464 -1.0708869905340834272 0.91358536143179303046 0.08367558159336375978;1.4893090565276545512 2.3606967086302255154 1.5860234462909661435 -0.55084900186793661625 0.74999653322345083417 -1.5056675125166303353 -2.3462259365941315892 -0.31824902587464032333 1.4220524812918629021;0.13453099417174177455 -0.15414012230601562004 0.046940640674731110016 -0.28507646981590872848 -0.27809025699608147519 0.42489473735805088905 0.30069547840372817804 -1.1604845418091791487 0.49490026392788138976;-0.78386762945854626672 0.91407774154585019755 -1.5520622100168279811 1.7573297210939198276 0.7301881403557899386 -1.677827935573289686 -0.27340699618458069731 0.75191215131375421787 0.95749351298667928489];

% Layer 2
b2 = [6.397386092644975264;-1.714285700862322237;8.2662786496210749476;4.9558126675334976952;-4.0287191205884260725;0.35914269745053417626;-1.9482111491513707247;2.9730404186318399873;-1.0817372037466363999;-2.0149870496219834948;-1.1343435922571574181;-5.768454044509997658;-0.251711300876259092;2.3925644421809137974;-4.50446797550987732];
LW2_1 = [-0.057139091597295459113 1.7271112871864522376 5.609242704684525016 -3.1234248389788392686 -0.028085800107221933763 -1.8839793990399404944 -3.7782811390212032165 3.3826976892871183367 3.1995764923797755941 -0.43530223489042818574 -1.9362796798976456003 3.1481070010660681113 -10.670904934592048363 0.5849235393061117394 -1.0298271566249084241 1.4755449436384131534 2.7944159422424261763 -0.69021636120102225487 -4.4203199199533083075 -1.3776575801771118179 -0.56114970333211311448 -5.4163346378529082514 -1.7882753546083214324 1.6413933708150636459 -0.60589201328912645206;0.26436275435710898662 -1.9108788551271169709 -4.4489432933790800107 2.4235876960040849681 -3.6323980974757090756 2.5454210765345979262 -2.2993141953760916074 -0.38027123737901891154 -0.64492764944579517028 -0.33769576081322810746 2.4301961714269322279 -0.34660931794547661378 0.70157258359225493916 -2.5598056437116056827 3.6801548995597599401 0.051980219241001303365 -1.5738071158462310084 -0.64853115204016198447 -2.3462543387337406742 2.1638333856563432001 -6.1600630531271161061 -3.3078478339706638423 -2.9831730627440320447 -0.21883337299530730702 -2.3330976700274739244;7.6105743024809022756 3.7016821318283890108 4.1731979337901661253 -5.2190202395724600848 -4.2845959439909950817 -4.8660242776262210285 5.8153164683696694226 -0.95133899993724801991 7.2029878806136302671 -0.49955330772815870199 -0.51227706428458630317 2.6964119228906309189 2.7663511424142970263 7.775027004025027999 6.7879586894029682043 3.8640703893257883905 1.3109334393914278127 1.8418167225052801683 -0.99547599807564723928 -2.2979908938670865481 -1.3967848914231673074 -1.0272241556706060983 1.2449659106034076661 2.4236841814843419485 -0.22533284889322371947;9.0852466704788295004 -2.933992886221578722 6.8371477951784598304 2.200456224304219166 1.1899234190900997987 -1.7063920215112344803 -0.94434926454225609493 -5.5785898383772352105 3.7849878276314625758 -7.5649989857139896543 -4.9817768435369922386 14.136278889168130135 -7.7294153210674894083 -0.20981654138627559014 5.5471701702807285628 0.55114933070385874192 -8.5481029283408531683 -0.6837350850458556728 2.1104029806814805781 -19.431489067307786911 -11.467337584197668576 -3.9845200240825668914 3.317268902963655286 -10.7361124015945677 21.230118376862321838;-0.5067630261487026111 1.7401958622806432686 0.54315581087821385164 0.23393139199168844211 -0.010782047948752877808 0.60988857733451773413 0.097033032256270787541 -2.4128574793071599913 0.45550932979967134751 0.79636370849148507833 2.005760089303645799 0.027661960834820285143 -2.9382644441811214264 0.027603537436187833287 -0.15047231829002682968 -1.2453966117311874306 -3.5496957665375177271 0.044058767342850670146 -0.75952422974940037026 0.73876929675545222054 -0.22833460287991691473 0.62357926962141407845 0.11638022134491503301 0.61837487651397093913 -0.16607184753766052188;2.6067955996585023826 0.82521097000112619835 4.0116487076178488635 -0.30296944928792884921 2.6336942770739892872 -0.61926820940317361952 4.0558814316417599599 0.85950758596226251029 -1.7269239716211750579 3.6783000574284452355 2.2676909338175437192 1.3526189410133753199 7.2550757349676144869 2.2012730098046753291 2.1669257794504868109 1.808085378407273236 0.16837190268760679479 -2.1683467210106073253 -2.4852479592852265711 5.5722792133466567677 -1.7641244423227098181 -1.6727590115208050836 -1.4052726863732551976 1.1374440578283635528 1.3213067557206725766;-0.70823732666480976317 -2.4255844505362844643 -0.55863352342199323886 1.4121705479895567681 -1.2357170195014752778 -1.2561088130305808619 0.81023657919274572059 -0.051390782331124776339 -1.4560012276157652256 0.079432358842361341922 -0.91041535061302303333 -0.55476190797981372871 4.2909672844398034641 0.053108587362091189132 3.5152545406366013658 0.89487778618507252126 -2.4835518216698293514 -0.21259527448377349423 -0.072329220125640844574 4.6963166960018973839 0.93344009361343616149 0.2838769346382744585 2.7423025522846202762 4.3390545317870765629 -3.4393820167445077196;-0.16820391051912342295 7.5016404440543800192 0.012825034748425096984 -0.89667402508354765445 3.0972714785181643116 3.1242847411695304771 -2.9809600926462564985 1.0748658801891277648 4.0051230882760178176 -0.033124733570328968035 1.2370656949123928214 -0.44727690048453683236 0.50537159282874177801 -0.45956477716250171417 3.4565907200679690803 -2.6010929314607267315 -0.89118546553804611765 -1.6767151611343658058 -3.0422253328444104348 -0.12768279267602231086 -0.55601804523892628396 1.9623046211550458917 9.1333873373397640449 0.6512386104092450223 -0.29370438868289167056;-1.771139253925081869 -3.625816072648656796 -5.8437689156426158021 5.2179747772382407689 -0.76681033521952712828 -3.4015577538140968628 2.58656784315053212 -0.57695054718238869551 -1.7135424832747669921 4.3362639329176397851 0.29125842457880479763 1.0968399516642535207 0.11875109487857914148 -2.3275515561957083044 -0.61518823935920285972 2.3760241288323595832 2.3174706792866519578 1.4165882110187513199 3.4375307414030200626 4.0142762234328728255 1.6761761972357596129 -0.33358836227967275656 1.9043240661540929981 -3.5946220347590958077 0.18263736265344959753;-4.4990349226974357677 4.0516561403972088939 1.3077906764468087975 3.7375794932434569517 2.0325302398156632755 -0.24562510522542632674 -8.6145896035310638439 -1.6357277317639760117 4.7703621672433165202 7.5111230452568564786 2.2283779488461163965 -5.8126733857753452028 3.5196556825532283597 0.81827455106402391394 -1.2525309269985669403 -2.3823996620808087776 1.9374611182829895029 4.4021179805103098914 -4.3223567389628767543 -1.8012631358201145471 0.64408652419886669449 5.880866257422067811 -5.4818317743800335506 24.793765225299495114 -3.0064296115498230222;2.0476599977083793647 -0.18743024245792200277 2.7805406364499711813 0.2201793006656310725 -0.59554339777612597118 -0.99054858312790550201 0.91808072878434909825 -1.3732064958138141542 2.046209238090192617 2.4441063223232424306 1.6482764363617914416 -0.39453169338514437747 2.3814241299366245563 3.278032200676585628 -1.1218430519871283035 -1.5328703035466384463 3.2791226746384194435 -1.925819969595362835 1.408394358099939625 -3.5241864886772082954 -0.40989811052127711477 0.43545699116901182002 -6.1589923607625038926 1.5079493941608907992 3.1639966036228019952;-0.97318141533510060803 -0.0049358014368507856576 0.16258526199108311316 0.33201651940550447328 0.64293210462828664919 1.124412473847432592 2.8019078035483913069 0.49624893883973408837 0.29955844119949204263 -0.8054537193210713486 2.2808874784380126499 0.18112877016675954511 -0.3224125356108374918 -1.2945610954838926432 2.1379223604151862403 -0.68958243257225892986 4.395624297487435328 0.5951038331401017345 -3.4901836684944225198 6.1237592472797981458 1.2158973092982698905 1.9206864378864692 1.1818812202496171704 -2.8190543830248029344 -0.57378070652222767922;-0.8633533966276445426 -1.190204487018795998 -1.6274880742319177696 -1.1378940151389715929 1.7407867746673297837 0.48370736261958618973 -8.4562546897519546008 -0.8644303874706433799 0.33384462518332874703 -0.035206327481327875928 0.95824974177082644644 0.43977738650628750428 -6.5815561354900404822 -0.76215398325879601948 3.0699935422887518754 -0.083155241674080906944 3.4749981249868513444 0.75184860284444732237 -5.0745726338879544315 0.30258300848824370988 -0.0037887602306562549043 -2.1454246654515305437 0.17848666109826091808 3.4356348485691325934 -0.67596397520107898149;0.81502463897002308535 4.6267942301221491874 0.74852477323176769275 -1.3403447977758637943 -2.0325385033253740019 -2.8460116029170330343 -2.9692186199130361501 -1.256052668691444385 1.2002009659395569408 -2.6907108398839199026 -5.1258996459410202107 -0.19176562721256851241 -6.139959061210497282 0.6481158289759653135 -1.2367850907380162351 3.9933881352076423532 -2.0768674614326076977 -0.50799992135946359095 2.7632151067479946427 -0.77118223048983303158 1.1773940087550787137 -2.284504511409726657 0.65826950517173077326 1.9027621427251355524 -1.5303756066479368148;-14.226755025499860707 -12.973481027504607965 -13.38377704380046751 17.980631323226393903 -18.41149345244974711 0.21501394986321384351 12.40558136066568018 -9.7967937757691938572 18.538449527028550534 7.5740423077302461152 -4.5819186093633295087 -13.030248669382803683 7.6288003144821949775 -2.019386093494628831 4.6762831806852389605 -6.8268878501617784593 2.3127167872809186733 -3.9323380329028982949 -3.9570959974874249099 -21.919883103927194412 4.8052875141172215478 20.107468966492827889 -0.135105543861546884 15.442829746333810448 2.9699285537820063752];

% Layer 3
b3 = 0.010001322678575228983;
LW3_2 = [-0.014491920892337677856 -0.013849490522395943234 -0.017851788861504961498 0.0034741659986962086099 0.54956272938189631994 0.016089908106878918898 -0.078100914526883946642 0.052325656741536899497 0.016343314596707285424 -0.010932713382549176517 -0.056295521835997494597 0.16177478152145591261 -0.39506124911523360366 0.17873716434980735368 0.0072963232970834771343];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
