function [Y,Xf,Af] = ESPER_TA_8_Atl_2(X,~,~)
%ESPER_TA_8_ATL_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:02.
% 
% [Y] = ESPER_TA_8_Atl_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;11.29;-1.99149636107278];
x1_step1.gain = [1.0000000017546;1.00031699124092;0.0153846153846154;0.000310077519379845;0.0705602618858232;0.0604107502911417];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.4729694262489916312;1.9378020167890099845;-1.7880682464293209399;3.783090634794788798;-1.6130869443373681005;1.5563797507230587858;1.2999476032923367175;-1.1598952280782666158;-1.3016250402377489426;-1.8093999950104391328;-0.53200617433678087931;1.4645177222847307608;0.020631490386566343764;0.095729886903551886235;1.5541814363473589466;-1.5816680176014188408;-3.6661504437309599957;1.4185681182182583449;-0.068167780057588042708;-2.405088739120485819];
IW1_1 = [-1.3365355851801505871 0.49158147737858703952 -0.59604685007637558947 0.25990049106878143625 -1.4088504906600465283 -0.45223372883343854189;-0.84996081184451632851 -0.56067046168199796696 0.87446118848398413093 -1.6062761395790761121 0.80775073572227784613 1.2451451810168856493;1.7912654358997761594 0.65683324205500137616 -2.6741647798980170414 -0.55434291061029783432 1.1777691338825675427 -0.20019810125732842576;0.10041397977221315496 0.82467891496309797539 -5.9453605442948909143 0.25128615341136617545 2.8214089286936756551 -1.1789204887865742943;1.1900807450842840751 -0.44063081948262472487 -2.1799155621575474484 -1.8732413319690617293 -2.9226678038442770458 0.20539803976361123428;-1.1347823378266113092 -1.2684452106084371792 0.15700629377187427793 -0.82164801742938731177 -2.6903293010864652857 0.90561079088847173946;0.51550227771558521095 2.0550450659801571263 1.6352108727938166055 -0.27419604243080336614 -2.8143082334963525071 0.16998677974865092355;-0.71231717320859611053 0.24760960237301832265 -0.24662851028385346375 1.390928054013508941 3.5521110835624711832 0.82727184795323305266;1.4699802111968036655 0.61235699391362474753 -4.0940722052599829439 0.1619099538345739886 0.87820061613533095812 0.43363364227022593855;2.028548964009535549 -1.4638254456788117874 2.3347507736175385773 0.0078777022781821408326 1.6531394582571710128 -1.3433064711954048054;-1.9863753098775787098 0.33168067154465902258 -1.0662572091118702744 2.7087566515600047801 0.4943247519743532159 -0.61259938933290347673;2.320683038551800248 1.2147872338081993071 -0.32860228988305739684 -0.39699654131624739772 -0.84356596459823740553 -0.65623521572366949606;-2.1717090009018016339 1.7092520950200307261 -1.7175415869970394045 0.63141745597768061948 0.85661409161050428018 -1.8235434124187284155;-0.0054918474328439180476 -1.5938892258974299843 0.20459889523824006941 -1.3003313473717323934 1.5384966531545058999 1.1766630851394819235;0.86457622880407036803 -2.0338729319485016056 0.31572627818343201866 -1.1365884145920368553 -0.32625248219361324686 2.7678333895380795582;-1.0787444446029326173 0.13433111791655916178 -0.068663060162033190403 0.030964177669158654549 3.1811247899425980634 -0.63964014195043383815;-0.16628444666263342278 0.29721171137595403522 0.8381780783763594922 1.3593961272146153352 3.722691591583778159 -1.3947542382924831283;0.40364600796775235159 0.82007558463747609601 -1.1571437220283606884 0.31198247350440289072 -0.64233013856467935376 1.3774401244542691103;0.17906539867458759474 2.3426872488731369515 1.1532690537238061701 -1.0605365132701090047 -2.4558446890696403742 2.6013139818200077258;0.021676263508981854361 -2.4306816566449835904 0.57874123657811737953 -1.0313183495537190382 -1.6325524940331477275 -0.72502869796349045384];

% Layer 2
b2 = [2.2079335061110021421;-1.9711886663204618575;1.793253975058648253;-2.3449298855505191774;-1.9686117307378934171;0.14755280994070155143;-1.3388949351118608622;-0.1721389705540687376;-0.62895330949731365067;0.17483878904003424815;-0.29125790686889818648;-0.14005182033424570798;-1.8155876773864509932;0.72436397757287307453;1.453316921386783811;-2.156062218998678226;-2.0060841177872577035;2.9131057885476412395;-0.91612116107309515822;1.6429922377471655182];
LW2_1 = [-1.5160160165535354615 0.032480520161729468931 0.9701794208531925312 -0.086975105867944019211 -0.024315253674969436459 2.1337344960601143384 -1.0155687565226192426 -1.2770066933790023 1.4686150914615325735 0.77809950139575423389 0.37538905973523617465 -0.69184430330880508642 0.54635117077871464542 -1.053512669064389673 2.1205552132968921164 0.93093539030887073604 1.7285598610337049585 -0.73285381317918207866 -0.065445452284059804637 -0.39817955660991088962;-0.62979929235344289662 -0.10210071121831829077 -0.068370497460236170917 0.22591471518069294877 -0.20219331996378661631 -0.63355622518379284269 0.94126578687063111595 -0.36819704511803386104 0.78590711882544639355 -0.3291949773349126529 0.74153583206932327521 0.72361852699418338641 0.46193789484250369348 1.2322861707925167885 -0.92781782083995512078 0.17251537110526393715 0.54047897707261027822 -0.096983706455945492553 -0.36472228856523114526 0.27656956074924843314;-1.4201121578735462769 -0.13991885963114364388 0.26947816985377354149 0.8895140552639028142 0.9407819778642212416 0.058713391294117171781 1.9884975806388898167 0.37550974034623030295 -0.10527771949643546789 -0.33183203170229258472 0.32683851220991244624 0.43853158393606817 0.27859576038322153568 0.30813938660802575598 -0.047632334591869100737 0.014388997896946462141 0.99459615719837390913 1.1075353750950704956 -0.16021232687219805202 1.0266980102640081984;0.02149785336481324291 -1.7593105577628620484 -0.37932393209749870611 0.42072340366525762256 1.9786828338793196469 0.78501562710218086849 0.44899712301824612481 0.16781838911702090522 0.32010772946292931351 0.55408442215495490313 -1.2684286090348286802 -0.73001107004085319385 0.19155581860625789381 -0.1568958161519405925 -0.12767227294528957215 -1.1498008397119030555 -1.6955526843211206067 -1.9321668304537293892 0.20233528643352180487 -0.30514904570927126048;1.5646966140357598807 0.064717111853289543966 1.0559334794657282419 0.98996198154852776963 0.0042606779884339744668 1.0360395545747855817 0.012023290448475113662 0.032925863602257902929 -0.50370200128989195409 -0.58828193685475638208 0.38726699756662930074 1.2234969172156389128 -0.11138450939087658764 -0.91729034919509222501 0.47444058698404995011 -1.1675677186931863183 -0.17142191720450333792 -0.31484432691772701318 -0.47715248406995103281 -0.93802465476843144287;0.30066227674096568379 -0.57144813022202867181 -0.52006177309016488053 -1.1351112947485879623 0.80518437868641323796 -1.525357479413103956 -1.4530313080229135814 0.29015526499529908921 -0.47732679459656407461 -0.21192766990531580751 -1.5671488130562167829 0.17851508381768832479 0.96704976790019414601 -1.2116794058542665891 -0.62079806571447626595 -0.2282536391662449704 0.93006734603704332986 -0.44491758173973067203 0.23529997498448973481 0.075087897552227875209;0.82617026745720623104 -1.033326571521941295 1.0788669354392053101 -1.1547720164997912207 -0.2944628797707890544 -2.5099818483662899027 0.70483081599730657008 -1.1529056966503399284 -0.24330150091113314503 0.042962230655035869853 -0.7262294237703964539 0.036622652754079880466 -1.5239854672638495359 -1.0743844622780429621 -0.56761938894167729419 -0.32983860300710154956 1.08556545049012243 -1.2894445962585801002 1.5601406069667023147 -0.60927594893953018751;-2.0215989781142491566 -0.97667868373642763302 -1.6080910674721333731 2.3530654378293056617 0.52716210625575310456 -0.44641496899401195142 0.38829843105245109847 0.17460104265108195021 -0.90847731074341520063 -2.1188030735086273992 -0.45674143243503134704 -1.2936177602991323354 -0.57775012858376262326 -0.85154713670974169215 1.9064429272930736303 2.3078507046186387264 0.92153042600194789991 -0.43448892489867058098 0.21380432605754307041 1.3737417762833232793;0.40409061438292098734 0.028986230336434090638 -0.44591044618418473888 1.2191567808202623535 -1.6645695962672555357 0.099872929477334296267 -0.84292050292569642433 0.084195517404560105135 1.0635163525305022514 -0.63002999277672977474 -0.070940009596308972739 -1.1505256617693619958 1.0880340864642561449 -0.51884283724911495206 -0.54108670538284786566 -0.64653678830132810251 -1.2398623088957199112 0.65347273577564868319 0.29717910461051394444 0.20067931772566058313;0.34124757905028185734 0.30823203167890189658 0.79392383688876455583 0.14308217236668088757 0.48358763555481709684 0.70217765279119148669 1.7295695371586889966 0.88611172170970142759 1.1815271473854838113 -0.58023368250029072613 0.69322374928467000998 2.2293676274980658292 -0.39375354367151982338 1.3047534187331879529 -0.63232963828967603259 0.84724296859264924819 -1.403673166352963797 0.44272749974152536545 -1.1352816480378298269 0.27403210649035281143;0.38388482800975476383 0.57595153982342983667 0.46680800944552081067 1.2989193054036201058 -0.12301380245368492838 -0.68882155898243180303 0.63538565831978621734 2.1523029668120510216 1.0466116521124133598 -0.65741592834441031634 0.083439283911205364141 -0.49698819625799123267 0.40200610066410635834 -0.034371845084688296135 -0.7843860126257027332 -0.95186163238607757187 -1.842686603231306508 -0.21896930074744033745 -1.0957031780509507435 2.2143685521959692863;-0.54552281098503452306 0.40728804582532601719 -0.39941521652611955417 0.25266470472296687078 2.1452905908615518271 0.28374353161820065061 0.54595341698606036918 -0.29281269988528429993 0.7793901092915437312 1.7352095941205956109 -0.78675708000620325766 -1.2495247477617683618 1.2488251787590598507 -1.0350854435497378603 0.043711844857079462656 2.0360010241714538992 0.9551448988761970238 0.27783644450202105158 0.074219908238648102383 -0.13519828156454008483;-0.55451833704069297681 -0.5808143634273504885 1.6575361326637345627 -0.94879320680759782203 -1.1102874898641390544 -0.22321649042011915132 -0.29500802592856706363 1.6198145305423901075 -0.79069605532990605568 0.12998616757072858907 -0.86718855567044816901 0.2674346298684420753 0.11855407523186131669 0.39910084155996239375 -2.0489033322289413874 0.19250313119527548422 0.33814880738262564908 -4.1185975874227338522 -0.29450431485875616655 1.9233127474949700542;0.59376679774357310482 0.34563095335851834466 -0.20738226851296537312 -0.55225454080530589351 0.24555948464769297712 -0.29796903537994762212 0.65903710865796705232 -0.66669278559468325707 0.83545868910792886464 0.089185032016336332483 0.94011127976105413051 0.78809788039190731279 0.5705689131284705784 -0.19636177942618060488 0.73362242995296134129 -1.3780551505512059762 -0.73436226406278781731 -0.14268132086142798487 0.097301081374032497018 0.62017784003998788211;1.0472039210643193652 0.5082824393164577792 -1.3733748883685381603 -0.25075973488166825032 -2.053327801603128222 -1.1641763034439074342 1.361739692970961757 -0.34238233976372461909 0.50727171012517580095 -1.2245288911080487448 0.63143274426610340733 1.1293988023123595621 0.77596097003675046366 0.48889361818014398509 -0.51177503951128910931 -2.983830452561340163 -0.77289776886922090249 -1.1196653366026909637 -1.0300494747428814435 0.16192701829437902705;-1.1223776716151510069 -0.40080539377614982088 0.66251929208390658577 0.77153163237026189947 0.35925765149713378976 -0.24667136642809162073 0.084782976675389601362 0.041074332231474122712 0.28147894886473773246 -0.5353593381796291073 0.30068184443442363962 0.68482923410626150851 0.46533958018783755373 0.023597120858259955367 0.053969911784933023713 0.61964148209716585214 0.16560719275423776975 -1.4727931482381133588 0.097753157924168873616 -1.4665420573349687849;-0.26942427227000115275 -0.79422279362422043558 0.93019595690968659429 0.30264515946134828983 -0.55573174795621249622 0.39254945843028093977 -0.5077314130913289647 -0.39138471807746844089 -0.20090830911038376483 1.3041211906471110726 -0.65334311080189066967 -0.013785895723266626545 0.46017571258341483098 -0.081654529152233562561 -1.1704457003424626471 -0.19507905955113630236 -1.8221410800599688873 0.079877302804134409087 0.71406061669162790295 0.61501727811685180658;-0.60716356981149732785 2.1475315133421504221 -5.7225045207426266103 -4.7543344709495904965 1.4834871185855422748 -0.20827871056656990789 -3.2230305416713882494 -1.4781745644662109829 3.6182281890976928374 1.8976974146622509476 -0.87568509483207690458 2.2276783878073804779 0.9302069776678159041 -0.49041900024580431516 -2.1902597423539993393 1.0630207879765163348 -0.92385667354140121876 0.87997940858631673589 -0.16444858321257899147 -3.2844906873988528595;0.42690206228804655764 0.81569727586800189201 -0.94100454984033221617 0.040866637946145589755 1.6869993594247492119 0.12592164352987553211 2.020792245328684178 -0.77194274387668759818 -0.77420156924948346777 -0.64334305663438207112 1.3974711237002066522 2.1120065325690053903 -0.66017571417688125646 -0.22757150645733442706 2.5715013652485896323 -0.20395786826759404464 -0.93050585432026344801 -0.20596635659044099098 0.85380085811396255746 0.44580745346565658904;1.7786326004185701866 0.25132668556300147289 -0.059504902504825887832 1.6282407878623148534 -2.0589676136938517281 2.11020401340167707 1.8187094327516701853 -1.553040101697356512 2.8224985734185032982 0.089491868201664687144 0.47371646184574900396 -0.96046598724310561224 -0.49645745634113591649 1.0564648778543392904 1.4811446686647349313 2.2499658927667880448 1.1256098582295002153 1.2065042262471226131 -0.27593652796430701013 1.794108321441504561];

% Layer 3
b3 = 0.16398395559284609235;
LW3_2 = [0.03938263720239099791 -0.13745048896088854495 0.031148534665686684886 -0.645223791958034254 -0.089368433910646041807 -0.01412394161748831839 -0.028046463260568473691 -0.024758812938117189667 -0.040270848328363750834 0.039997546234267308818 0.038467340238369382432 0.017798373248578285705 -0.063638683847716773223 -0.058608946835179039081 -0.029699511525962542235 0.17795526853231680153 0.051549455536809903056 -0.3244697774840014648 -0.023795016198339787733 -0.049035882098148061981];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00111018595614765;
y1_step1.xoffset = 1025.5;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
