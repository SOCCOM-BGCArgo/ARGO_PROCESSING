function [Y,Xf,Af] = ESPER_DIC_12_Other_2(X,~,~)
%ESPER_DIC_12_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:14.
% 
% [Y] = ESPER_DIC_12_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.540882631345830589;0.92382045759068187607;-5.3861631563213308027;-5.3300498086230660988;-1.1185338821785650865;1.1165590229114679133;4.6511566131220609677;0.65162649778356385166;3.3370343891880605014;0.64736152701827742728;1.0204047239112634671;-1.9390503808447407952;-1.8942768977079735837;-1.0707240443951369091;0.35150195388618493686;-9.0891895701013183384;-5.0612095221788706567;-3.4824896989079805465;2.4559089875754578358;10.058571700302028518];
IW1_1 = [-3.8826873190423385473 1.4498011498200276126 4.2574025809882583005 0.48794465595497771293 0.23522397579389617284 0.13899329051334152751;-1.1552702410220223594 -0.16718871520655570473 -2.3072071051749181159 0.41012220772154273085 0.29749556603592131054 -0.071810040551045908885;-0.0020787673611439619857 -0.32504483078602852686 3.3038439882104406742 -1.9435384121775567401 -0.49187875113186729781 -3.0924572612159915153;0.41873395468736374081 0.051196908750518008158 1.2000625641408957378 -6.4977489350406543167 1.1261747513610358418 1.2121695150764160154;0.93679710166569440943 0.21965968919722347885 2.0366885712974753808 -0.31112241859159756041 -0.78688172063766936848 0.23179522689064288588;-0.059433614212878023431 -0.57366784474873500077 0.13244649294408386564 -0.3672696734906882865 -1.4245050325149635206 -0.20211069024809130701;-0.48168383080197973989 -0.11554481421481424541 -1.0465016172851966392 5.9192068009984337706 0.43905541216244908798 -1.7359066473458351076;-0.010462913554632106636 -0.39003521340616459367 3.2421130631048020732 -0.24465301621002383259 -0.45571157669391276768 1.3649769765852313164;0.27529398220927181473 1.9114239846628653385 -0.61492609621789728891 -0.30212971373745994841 0.22401749370162765684 0.74988540630944111598;-0.35899880084014912374 -0.10884688403950269764 -1.4804417190039942387 0.60341219680850755047 -0.96499951299276098826 0.33163787254113485936;0.013303227415577094372 0.14651417088293891555 2.5262410227025520193 -0.2918203213109473726 -0.25475396456622961816 -0.51055844946621287139;-0.21724345754671622877 -0.32836465940573222877 -2.4638788074560178387 0.75505969989903787276 3.2376251290743831568 0.65087518652451803458;-1.8631979861588046088 0.93218532240189000415 1.4641473882003284146 0.79137018365764344452 -5.5066738318356955872 1.6858358470655787631;-0.51532295675326944551 1.1369021039354092473 -0.25216936617326157766 0.15326941782800793113 0.75790009853115114513 -0.057736523683393478623;0.74715640241220526718 -1.2329498151882789525 -4.1460846385739253961 0.031649740077890772816 -4.1197640828905424115 -1.5438235142596403726;-0.035944155388671676643 -0.01050020161986703858 2.5072379722194653162 -6.3651798320291455013 1.9836778900098581691 -3.5025094961504876778;1.4873206137163264007 2.1952350112538647764 4.3367802083789408485 -0.38282746528946326459 -1.0369117885653864608 -0.84932501882948341354;-0.39893029812779601251 -0.25308481905916857535 0.56379822662121992227 -1.3413002052635885075 1.4231928780771505583 -2.1563262326370566946;0.1124349324709610215 0.046687967671389558888 0.32898902294872844898 0.38343031108602443346 -0.071989344796739962451 1.2830009176911760793;-0.020643166536202101069 -0.45648983531930931168 1.1311247527688550463 8.7579942880569010555 0.87419267223504304454 1.6284217248347734319];

% Layer 2
b2 = [-3.851325363154890713;7.6322296927785098219;0.26267333467538100944;0.9472899991885225246;8.8766403997866234477;2.9260555692728731358;-6.7240330455360783901;-11.727624379429549606;3.1614889515050026425;0.60582256415195268051;-4.9631605383982408952;-3.0242267364380013284;-0.0814637380330537203;-1.162086061630619449;-2.0730818934112114071;-16.161034007209313046;-4.5941727150199653806;-12.276813580821123395;-13.265773326595212467;1.6655452981119356348];
LW2_1 = [-0.01090214371178652511 1.3281112582993841453 0.60742194501590618394 0.49410557970330859501 1.1642439903265999757 1.2909630887692093992 0.5172351011833909995 -0.12946235698603433817 2.8481967750734606959 -0.2298700224882168075 1.2077790181773611078 1.2080319840559488043 -0.30484019226114211776 0.21022245661580274412 0.28593835623590396766 -0.15820549129875058347 -0.99376911608862406045 0.078337212965069583093 0.072358669326708049963 -0.086058769901594694973;-0.25282295119236003478 -4.4281323923751809701 -10.114699105191698791 -5.3580766565983877214 -10.489678988468321919 -0.86026137929383994507 -5.488613421467498199 10.250551367200518627 -0.99354971762586330453 -5.8193480274968356625 -2.3190746113986260291 0.57523122935760540031 1.4465705080830837392 1.3648950363848575407 0.19822442441369014787 -2.1703998473161418836 1.7939958497011478933 1.0737339022632623742 -5.2064907697445992341 1.1138450295407769097;-1.419574191225221993 0.64505467975550501158 -0.2970725369993519327 -1.2216527251377182761 1.0853895081904545439 -0.50924031290141724693 -1.2136915189337569299 -0.39164172423475523965 -1.3265727652782608459 0.069040198772710031916 -1.5235788053520729068 -1.275823641749087356 0.1204880715883835246 -0.18391040553634685484 -0.40394278283068074664 -0.024507830123782603504 0.75210938261005721994 0.33989597744223243314 3.4593891216189747162 -0.024695280488192857676;0.25683574847143419984 -1.7086561703211435859 -0.046469160495595462912 -0.17645652215624527126 -2.4713207595868524891 -0.26523080474640042814 -0.32850950345107537975 -0.29787534989407060682 -1.538734110786066811 -0.90418083593463394187 -0.73043662926013330772 0.089169425721026901455 -1.9060342228306479395 0.14696868035858703938 -0.40058081944441814581 0.23093033718158337275 0.90428455832572163242 -1.4320381725835480413 -3.0274626859831301751 0.18405728140470964393;0.17431560561540457299 3.6262587239907806413 2.3251069735105529546 -0.90393226873882170924 4.2500482416755405168 -2.6446891469990405632 -1.0401709147014355228 -1.1263454585992860313 0.23062676302315279764 -0.33705104867830548709 -2.5039205903317736102 -3.3327159684809286588 -0.65310073105338395383 -0.6170018201501014099 0.28571506872928764675 0.58642890006711767548 -0.20389055208435397093 -2.5172262789055586119 -8.4059112142146368285 2.0107778264917799405;0.36239821178457576334 1.1564662964425103109 -0.064235417796327354267 0.25055974100242023317 0.36888156867316224119 -1.0337003700346911739 0.19394817850954634841 0.62528199989234123368 -0.0061527051639802127214 -1.2553299269301758656 -0.19810823972032925999 0.2963851299962503294 -0.31796672844836315619 -0.24512293384602332202 -2.5448252373659911371e-05 0.44345452892332704042 1.525381465945081505 -1.1903993144111599811 -2.3244823581498836873 0.039862457507977788751;-0.0073249775034426953951 -1.7480695254058076227 1.3984520231363508636 0.20727151049100078772 -2.4957179170778895916 1.8649376219240934027 0.093528995449397647755 -0.076203922115319330799 8.6992473474923173171 0.64613737010940208716 1.3036327868307924227 0.81879541155896595761 0.24777683809688605399 0.73596480826044807788 0.14127923226826227809 -0.4411547500180538206 -0.64217294716973827295 0.094394629077821493035 -3.4603309414754823692 0.2784856348022585748;-3.689094705541731134 2.6719277034351871514 -2.6633560951216139756 1.8890074009531205856 6.7968795166335755908 14.386308183420799978 1.9151555461949236747 5.2880620050659388198 -1.1091121578074374376 -0.82600574865841414063 0.43718657162675045313 3.1060420604705005765 -4.1047056814045594919 1.5717973404782070723 1.2561254933284244917 1.1364730832792837578 1.0797137706592117024 1.7769953204971196126 0.79696598216301250961 0.712019967548845778;0.20752821712915303642 -1.3028683155549425354 0.52095754454350218232 0.12077026522129220842 -2.9465006081013984662 -0.37672269009291609043 0.12178054606149833761 0.62011873538378914361 -1.6462495912242141038 -0.79101375855046618391 0.77516288459760496199 0.70633862743157149744 0.49859240117298031514 -0.041243675840189633619 0.17491342909330262478 0.012649745008190365486 0.70239479533449233895 -0.82745791011892755318 -2.931900166565291066 0.16089900616026911462;1.438310257050126939 -0.68671458263643458952 1.282277215002908255 1.4161707875508007248 -0.7754539637989513734 0.52487997830116417397 1.5146742014891301231 0.070046240811921650637 1.6173401561070324117 -0.014305526201770203676 1.4881360967329482214 1.2711763955408987847 0.52866303135047665318 0.20026296439535537508 -0.023055240846255084519 0.028312975705047847136 -1.3879254121462538674 -0.34269552011558157556 -3.2643258420573992851 -0.028475187424349041043;-0.073923367393183989082 -0.32492405898657106267 0.35572290942848794337 0.839190125476422355 -0.97291323996311229738 1.8351496955259716248 0.7358517464177255496 0.098781612756472597647 6.3481165720057308732 0.434442400485296365 1.4702606451517929997 1.36195626266286407 -0.46589118144364621843 0.56722238394515367421 0.26652065803123409227 0.12001155770648026799 -0.80991396431377915555 -0.80472973897550459377 -4.3807960620494101889 0.2262739782771968633;-0.39285941985372452301 -0.90347567295852870828 -0.065208610923522189462 -0.26391441394167969303 -0.25752912321609378044 0.8174183920473387932 -0.1955587365766978114 -0.54205257549574203946 0.82381389849726016639 1.1025808861816874806 0.23972934120207989306 -0.1365010133253962421 0.19624012957764627729 0.20000562153543685606 -0.0062645582145731222232 -0.38915545859978689647 -1.1586296077532654003 1.0798392576173208024 1.9697526574012271805 -0.076745042092322732219;-0.42365300995685384322 1.2577881400828005987 -0.049468077802389015529 0.09851074055559637388 1.885418352878357906 0.33354415356286665206 0.2600927846362489082 0.38514119657740075731 0.68687315806209248148 0.97749180594719420334 0.83864526586420173881 -0.0075607744826520911774 2.0881119114975175144 -0.10642644883628102348 0.4474978658972659229 -0.26278848621333972257 -0.86770837339625661588 1.5413010039291730191 3.00517214882468231 -0.14041409195319684566;-0.27682963736058774362 0.13068881883162958291 -2.0148990218435924859 2.878086989928437589 0.10360088108906718996 0.97291736785094440343 3.4453074023825509542 0.57702389138412135683 3.8179600604582653034 -1.2868501725597658591 0.43538683371813075018 -0.51385387802513060596 -0.66270038335513814509 0.87172457313160656156 0.43524954791491954342 2.2229577148107386719 0.30451094221233920845 -1.18480187715901919 -5.5180443483118803982 0.6668164336494709632;-0.028627139108367807147 -0.8306151268205846927 -3.4651050320405523131 -0.76563704981967473095 -1.0258088523039003981 -0.66048777463922447861 -0.89868645351969445034 0.33907209705921964593 -2.7911825920408888102 0.76658984307944655345 -0.96592578896672365296 -0.51782196063214447346 0.16239097214733214103 -0.21456665833631413665 0.11179107216676827108 0.1032084397156274036 0.13423224520099880097 0.50840053068550505877 2.4512387339692858212 -0.19588705664411695806;-5.8263094609494272547 2.4355723944641654022 0.46259468500197509222 -0.076942861575088283832 4.1532942501587086781 1.2967756172962154881 0.00056518661093989488488 -1.0070545595857784971 -5.4681064293979062541 0.77426557203461932044 21.221538301472616439 -0.34798508687056883826 0.016582715899872590981 0.47481250207119790607 -0.062609395382324808943 0.0092863467659365147439 -0.71589175995825704568 1.3238075726418181421 7.8681323643283391789 -0.46018909051138728872;0.11798146350881963396 2.5569714706776682789 1.19142014133213614 1.2293340880555330141 1.4525820451896731544 -1.5266433035333066837 1.5252223290254363075 0.30508830231067146643 5.0740441119866730446 -0.7255822599188486155 0.27165954867656799676 -0.63224899779789833776 -0.15475596029555696576 -0.80554527501462536154 0.56262684309515254011 0.33453745809000606792 -1.05490795875996346 -0.64584668247681908948 -0.94379878653709825542 0.67808079296016843251;-0.81686964332541067701 -1.646441716719899695 2.2641684667957009403 2.1962486259118643162 -2.3786199139094703625 2.4122999871287182927 2.4463301893793834019 1.2793769236269729728 7.7183811841286535937 0.74159454550058290234 11.588169339861439155 2.1175583676671223543 0.13727759487988999698 0.63213971592623874329 0.37652904140854842607 -0.40171863088372677941 -0.50153372294435161205 -0.72638090309860214866 -5.7285180309098873153 -1.3875778290556461947;0.088270517518498028964 -0.27896101011290758143 12.285951607416720321 1.406729910724398902 2.5899399049605644763 -0.62904988465557232225 0.66290893745512402546 -10.207016618429230803 -2.7709795094030020834 1.2641965480453958293 -0.6210313998445710082 0.15682882491719912776 -0.99113554005331339081 0.299333397313331806 -0.39604911287610267134 -1.5896411094702271871 -21.188159528571951284 -1.4071100138800525237 -5.05195861608496255 -0.48648798765472733852;-0.63045508238725234129 -2.9208258173364844978 1.3517913333590876324 -2.0285874143647273371 -3.3436272778682294415 1.3730145074075510436 -1.3516399905818388127 -1.401879304626115097 -5.3686593404390050566 0.6391790010395166366 -0.29971763301663811863 -0.4455565176472942035 0.026395716217478173982 0.30875780453763207456 -0.14745378669726186271 -0.097227798231055193034 0.92057483034768361474 3.3437871804967231881 1.252946431871816424 -0.076386545691870366692];

% Layer 3
b3 = -0.57808035474527041941;
LW3_2 = [1.3338585632606190234 0.15778844535345667999 1.6746656448606020984 4.5550405131078450793 -0.2538383654051287186 -3.6761102065091302293 0.77174561983336387172 0.19977690505195960791 -1.3332984406353811657 1.6304348584985943749 -1.0510365449735890042 -5.4136671989028366525 3.7677643105354614583 0.29869762205638289432 1.1749398834579416473 -1.0339106970163005617 0.47398292802871616614 -0.28693533551165462114 0.32989972549234597432 -0.67124075881255884646];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
