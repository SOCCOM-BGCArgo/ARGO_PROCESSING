function [Y,Xf,Af] = ESPER_DIC_5_Other_2(X,~,~)
%ESPER_DIC_5_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:11.
% 
% [Y] = ESPER_DIC_5_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.54516837761517422667;-2.1981192072939408355;-1.9249923488201297062;1.1626504764766691924;-1.2226115127339851618;-1.3094116871883008102;-0.52497384713510852894;-0.29640641097707576268;0.72519323751820885526;-0.69823276544576651226;-0.19834448249393804575;0.5082368502885028505;0.1267091163910795959;-0.22537852740758221315;-0.025255356220579627119;0.59192069072430364418;-0.069629230104485059782;1.8285961075770411632;-3.2311170968124867109;-1.0101440043266185498];
IW1_1 = [0.12519361774863585479 0.34518812116347680208 0.022656008351020526931 -0.22192492669239133329 0.86662588567015796936 1.0025678516754967795 1.0660513066302579333 -0.9015677134256632197;0.95133306692698638152 -1.7900251876401396256 1.7877034497820041281 0.11165370745252570228 -0.31871687692154998528 -0.28266227275189886869 0.54497697330022676354 -1.2431303024604309915;0.071648230711263791171 -0.30400948268569116806 -1.5404075444990172894 0.25021583902133032185 1.0433341713616854918 0.53709972133363570457 -0.069067040515716965343 -1.8751567918623790465;-0.14754489286940264403 -0.19693644582031630264 -0.35333528742290110092 -0.40037804230436968567 -1.1249764777856821052 1.2443515158360340944 -0.10004146678250908087 0.0033560879953692104513;0.15968526843755412314 -0.41381096868388900223 0.47291219818258878327 -0.80681606780225667563 -0.11803673121267301005 0.72553692402814373708 0.037094999840032269467 -0.46314172640880874043;0.011383922568369012757 0.16405576563249615885 1.4166209617526341891 -0.16338258551334985946 1.2399582436847158551 1.2817382143012905349 -0.079721452270204384849 0.17941793867363642345;0.11913323077936631422 0.14742389964148142067 0.030588276533558850928 0.14055344876826703082 0.33048779045417120415 -0.47373426157886971977 0.090166220802050917049 -0.26593867802823384361;0.15292732910861653317 0.14476881412823300321 -0.46152776227015923638 0.098333681768147843116 0.13392771628392474703 -1.3856170498814719405 -0.7327660812826766179 0.15306340800100345922;-0.17410752599803777652 -0.2194751753618069956 0.73200203685634368522 0.7804938760699331457 1.3702721771224297687 -0.9025056929832303565 -0.61414039260333419534 0.11594288937799825112;0.099662432804807021824 0.036731505595498349648 -0.15566863819012199954 -0.158356665314083489 0.80598345673233562358 -1.2537160399493971763 -0.3528716860024426194 -0.20719712248682098377;0.92403941298427150208 -0.56674837142215162 3.7070767626101210901 -1.0047916096393938457 0.22325613990272391574 0.19956229229883101772 0.13341604034778420385 -0.45402438286120677668;-0.061784605606621953444 -0.050403496346299890563 0.61492185731980686381 -0.11679663705034058763 -0.33611630845723677874 1.4189462056514683397 1.3777284866907675287 -0.50300090854077006419;0.010347944225202838561 -0.0092124484003353653699 0.087233462043263473862 0.084500505330812783478 -0.22970237549601127403 0.91420979792086531912 0.73779148244793024691 0.4509668411018760148;-0.034794579983395280964 -0.2312739206715209439 1.3164183583762356644 -0.20642116966277113121 -0.77176439477598490768 -0.069175318722496020873 0.37626645835472094515 -0.26526446691506788689;0.082556772948333106976 0.12590791368400616745 -0.13585039779866961429 0.056621869211657772925 -0.064955029591173885084 0.4338156368947744812 0.12587948726906383889 -0.65358879269613778806;0.4110449919481850567 0.36567594479768195104 0.31374412676041829595 0.027502905682140400823 0.64349368527323513867 0.24075721034410610399 0.17238823703423128419 -0.79892791033837429193;-0.18646881113408808606 -0.21988377575525935859 0.77485393496230903221 0.12634991809226966963 -0.0019838850521635897559 -1.3028276132475016258 -0.15584643101876238802 0.18036216799957247026;0.020183568196087287722 0.24607238017616842041 0.22893494583431708844 -0.28066101300600970747 -0.24990470504474529556 1.6266557191406429972 1.2703261901813347468 -1.7785598229865686726;-0.68990020402014906598 0.94348968236835673018 0.86788243453318980603 -0.6314290790558798605 0.067296826906494494613 -0.9845248512393249829 -0.9540629639692524977 -0.030901291944358581787;-0.011997121560384243696 -0.060921439828762906366 0.25695778837067984046 -0.54594424612510772388 0.14424448294066913312 0.52489947269256620466 0.30870538893807297764 -1.0141809969222648213];

% Layer 2
b2 = [2.8626892483368484577;-0.85489346046783731836;0.57722621041578281442;-3.4745517588579519774;-3.440241535999529976;-0.062415593601955789149;-1.0128044065691035325;2.726093176178727262;-3.8722672048404689349;-1.5926209839819196468;-2.0718051755166473349;0.10663845018934539621;2.9018030723492995726;-0.050285796507521386689;1.6803035464800959442;7.9840803555947710279;2.1801155369209870294;5.6542797261983563928;4.1188594562324798432;2.7153584160772004097];
LW2_1 = [-1.5471346724556380714 0.99758997675746774458 0.1273721527209806248 -0.20495365624873659871 0.78476727384887023931 -0.34974068557956594638 4.4055798511227557412 -4.7233318367181773567 -1.0554016141668409734 1.5133266422230511328 0.59827876367641386057 1.6537416660766024457 -3.8791860283680836829 -2.4365779311458157785 -0.64815302585422640558 -0.90433139070965185002 -1.2216301020475048844 0.48801537223227542395 2.089476405527461278 -4.6680514497214966596;1.045689194684951806 2.6594914738834591894 2.5336159872168493301 -1.9899043150548192394 -2.8917563479557499839 1.0116015788879921811 -4.2628221198478577492 -0.40074056760797116539 -4.5520092251421582219 -4.1306257458254167503 0.65926124043619815929 0.53592021754720409188 -6.3809309532294404832 -0.79815491348819411765 -1.242255126553754252 1.6773758092391604091 1.9213007810279481014 -0.96657194622981057464 -2.8606646472015984095 -1.0204203526469881602;0.25106691624843496813 0.17541581730187200128 -0.0037905019043909110588 2.6964751800758519629 0.055479852694097213373 0.47432943329021104439 4.0945552436090384418 2.1227828303656703923 -0.26063523982903868959 -0.97504836468230027258 -0.62179272506783078711 0.30008350234449876481 0.45540885532289226978 2.0541569163584894042 -1.8342882076099640276 -0.18883293774783044272 -1.4823841045005816675 0.11117378276573590401 -1.1037717435536751331 0.4811491020725802148;-1.2319137602489762529 0.19311537076172421989 -4.13785181427368709 -0.22082927674213054248 0.91437959841309079945 0.52909206405384079375 2.1583808274522016113 2.7710234542999967466 0.85259753132246429708 -0.65895419461516868687 2.9900194539082387557 4.7969587515668132838 -3.4200401450849393648 -2.2135992747837032191 -0.41895949539543309026 -3.1860207528436803592 -0.87418834152319757624 -0.10962670084333969722 1.327230091278746249 3.1295655716996173545;0.86911461761235619949 -0.64923154961924967044 -0.21186385538130686479 -0.70367161868316807638 0.77271420519090960877 -0.63868602079987657483 -5.6149592051439594087 4.4016435774138660264 1.2809438060057620756 -0.16753384173945154445 -0.31369096506191612717 1.4110055436430637421 1.1075669845042004358 1.5596998210439005916 0.56722397632445531457 0.44976759281927569667 -0.84171932851543707077 0.3547692074554880115 -0.68719867118974098386 1.0205487634209098324;0.39336066125056817766 0.1388168830716969282 -0.23911246171083239132 -0.65636817740549657785 -0.077167142685109560429 0.042527189931570445747 -1.0621403348520324084 0.91604688407394341265 0.084797451233751403032 -0.16350061863945239415 0.16435144462144277155 0.42907560421040491505 -0.24814770001749256179 -0.05595029721634627029 -1.526362962716667937 -0.34238132427506984268 -1.0035307049562274262 0.22143787059427844088 -0.3517077941335639002 1.1930696097535411493;-0.0031424612691049449639 -0.85624093681484181317 -1.3941936330891233631 1.7760813999692652843 0.039613663815076929908 0.21589361408270565934 -0.63477215015636279105 -0.483935079218511921 -0.2273708994877782219 1.6235932325373010343 0.19051444418355115151 0.64177783729744686259 0.84114107993942188735 -0.51935395344401702467 1.3842741082566965005 0.17640310259799257819 0.48573737801998806418 -1.4443150207650379269 0.22470115488231734435 1.9501091586727408167;-2.3509984019652772069 0.13770226130968649114 1.8255521783308048533 0.84091058480072522485 0.88479647240602821157 -2.4934466838592830307 -2.0827472412055780815 1.3619250386011325649 4.6991153553861169101 2.9707376088366355127 -0.28090319377116340638 -1.0452254348495393366 4.8671059253925736954 2.4895089606357116985 7.2388533501111300694 0.17401210541474312898 -5.8751244335131360685 1.9062337947351193357 0.10079244053007410664 -1.9157324723871129724;-3.6350100759482653068 -1.6602738930227116665 -0.58615675621692875374 3.1239972410283494142 -0.58854695059086059583 -0.012471451318371297792 3.3732512509893242125 -1.0720713903873571038 0.6378282159299109022 1.303721582395479972 0.2372129274435680335 4.0589117406619177331 -1.4312581542862454764 -1.9334134137583209867 -3.6318642959004634463 3.5944681219739909039 0.057163017675791447103 0.23617909271864670484 0.42244726257217113385 -2.0090753157481806568;3.1076621739940382128 -0.13778207282528681654 -0.5433530940658736208 -3.1488416610660108219 -0.16482631985019385867 0.1815108512773663807 -7.5352363906348012179 1.8127374871252044386 -0.33550731987219795105 1.3316311777719813669 0.22660926472984688207 -0.27581966266846263958 -0.4114612525332630999 2.3796677597652005076 1.1430993592721363505 -1.6913393012406627847 -0.82418192763362829734 -1.7019599436582024676 -0.73740257212098614392 -2.2038999617507379902;0.050637321608658650285 -2.6556052737294519872 -0.95984746924195341045 1.1234275511076921017 -1.7423637599902734863 4.5319069282089472495 0.72626540737947342663 0.90682376338262826732 -2.4005988956982955429 -3.4956287454247876312 -0.48309803946802543084 -0.41955171579364175516 -1.185625267381002379 -1.3922901090809547409 -0.97758886967533242807 1.4684334894482486966 1.9345053084050718439 -0.28599323219568195675 0.40795536927261849547 -2.1496327991919406131;3.8626290296787422207 2.9038144690960008276 2.0839876601758771102 0.67568946087330072903 2.1283545366306979574 1.0162478264480556689 -3.4729110824197770846 2.9326655909569439018 -1.6993405305506965597 -1.734596606958672016 -0.47637780649770983254 -0.76135289546360129798 -1.3212442839972622366 0.9081057822546868552 -4.0017537127981794853 2.1744242382532839031 1.3257215082610100954 -2.5485260726782481555 -1.9747301556341809725 -2.8316551538457184201;-2.4244701175786715908 6.0405515474587847535 -0.57902106600845482109 5.4417261955031817067 -4.4932155990730890949 -0.11707432441311335647 1.869488431862843969 0.48813207374660266824 -1.0389026494583746274 -0.78245765159554192536 -2.6652186592041240409 3.6722131623285476643 -2.1399188416911409938 5.2568133771530822784 0.045232221302735041435 2.8148798930456249145 -0.52643366908304156659 -3.1688046121062982685 2.9893229594423007534 -5.4012694540468837445;-0.23562288511270296221 0.26543772402361281992 -0.12478762518604478993 1.0821923414454612811 -0.57401333627861939046 0.62025621288287025035 0.89465111896891791332 1.0020903523484649966 -0.34464590611424056332 -0.38941694362366291449 -0.2616846411481953405 -0.69027156717878646042 0.92178231930685428086 0.62087315358015571221 -1.1619705070126662427 0.23701010755641724326 -0.57348119010427334175 0.74224641360747967145 -1.0972712076882602528 1.474809511387268568;0.69891331379434529225 1.6133072369671352941 3.4210723011303891816 -1.1354229486663391935 1.6660436347893414766 -0.1491159711359573703 1.5705321143406720807 -4.759040144189149224 -2.9697188295712639849 0.36766722821736463889 -0.22456130291135101285 0.42831350200163165187 -6.6315795745324743748 -1.4335217093352743412 -5.756835596960043766 -1.6027809984867755766 -2.150686281044971615 2.6130232415045857586 0.76327870531524055764 -7.9193491260255131081;-0.66813576055023038425 -4.9288983323597079789 -0.66326972790710636563 2.5087695572309689496 2.1773311174569807136 2.1698992453353218579 -0.067271209762337302873 -0.3384273900714680483 -0.19388458510412839852 3.8928806967207356671 1.1816414097200134137 0.43668602383507720832 5.0170053123973836762 3.1561986916953630455 1.5160331689952351031 2.0424924196082616668 0.47769727324514987821 -4.51105206531366143 2.3848184615515588547 -1.3758471646745289441;-3.9917707648721734159 -3.503510922437552022 5.450079266825808233 -4.8902563739551485611 3.9602281643722392346 -3.9956014357065243736 1.07080790753317312 -7.6960028728280835963 -5.6374782584515692463 1.5399491564255425313 -0.95331959010031719348 1.5508670500034420492 -3.8618073673517243627 -3.8059027065891557484 -8.405662790758169578 1.4722537044770629411 3.4469020747165171059 0.44296974691061130613 0.58069363197570400548 -1.099432127556669192;3.2293108593266719453 0.89052245098378424171 5.4120404607853256351 -0.34971953378158354697 0.96201692352983858569 0.87332687009728460215 -3.1606952388959661526 -2.2904249107167746757 -5.6038920709012440824 -2.5267930812595755796 0.070920779487501167671 -4.063537922633140731 -2.4747473221432705337 3.4055348445576614225 -0.75127794702961825379 1.9492749565937443901 0.63753755248436461134 -3.2999223008818505676 0.76487230534295969075 -9.1686505536815978701;-2.5635982734319942011 -1.9768334318954505768 -0.94084012145643958203 4.1079128108112570317 5.3553450756080085426 0.077664101064737256497 2.7599739241956022795 5.1184041950898269135 0.66925055414378087359 3.947211151883528224 -1.2049313941985957399 1.2813441797601063943 5.6361513064751092017 2.4659699080863433096 1.3090679953127435375 0.92932921635338394672 -2.4567027683165791885 -2.5813126209611136908 0.3221097986509682265 -0.29626832075099790442;-4.3010173563802176488 0.01101391818658195576 3.6566929170769402191 3.623649916825487427 2.0255883584802836239 0.060825631642341476679 1.7878744822396372971 -0.88527524728343931493 -3.0700393277223536614 -0.38031333560707530905 -2.0737011027944078911 -3.0044496804747629071 3.4143970675522288261 2.736725277432870751 2.9537861252544237445 2.8947578753122820139 3.7746502160748858223 4.0963483266855442722 0.76032343882753528064 -2.8314820059455434453];

% Layer 3
b3 = -0.0756164496878588277;
LW3_2 = [-0.36002965342096954204 -0.063768808834833476396 0.44726099949399666933 -0.17988078272022728354 -0.52837644414460827047 1.223198495859866286 -0.27535069190923716631 0.10713871708699579388 0.23429462106193596482 -0.22344954326179167214 0.051613682751312728314 0.10861321444333314756 0.016278511296329720159 -1.126732163178135071 0.074922645259549364161 -0.14581086373015539337 0.025965009712531010588 -0.049382746893052935355 0.052722597726305872601 0.031531422932111786983];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
