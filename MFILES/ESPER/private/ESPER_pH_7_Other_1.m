function [Y,Xf,Af] = ESPER_pH_7_Other_1(X,~,~)
%ESPER_PH_7_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:22.
% 
% [Y] = ESPER_pH_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0588888685539285;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6838952824800528241;-0.82223470024456835059;-4.0162692216486890473;3.4709569709562675399;-1.9562755887080587325;-2.9312671879339484704;1.4602165407051981294;1.4297374220984218063;-0.15508215246507334184;2.8324219232158189818;-2.9691748456002873269;1.2363660184858538127;0.38495316981859867278;1.2314700977176455954;-1.6580313025441879571;0.86508518203947404324;-0.83575375346701541446;-0.63101980747503849667;-0.66871922621698076661;-0.025774835762880539403;-0.43123174601516128801;-0.21811289251996185401;-0.41030565132756929847;1.3806665006065330648;-0.32412349664588108178;0.41006986943845391558;-1.2715159784284084665;0.075994079319679677664;0.35877875847926532504;-3.5390785627468108743;-0.50789819692424797992;-1.5938081481700945297;-3.4380831212944404918;-0.34423000372133405467;-1.6092087713664711135;2.592880844527444939;1.1487515740143432463;-1.7625836358220581257;2.2294931232863186565;-2.7612195644644170756];
IW1_1 = [0.03811573554171624606 -0.19701869997791288114 -0.18737997819714760639 -0.50858661269856497711 -0.61575402910105914156 -0.3666739738200466836 1.3611221704037252955;1.2177343819383357193 1.3647394586396421889 -0.26989451217498644509 -1.3594038734348998787 -3.3696562013016255754 1.2394960147166027564 -1.3293574160914181093;-0.73535998722581141784 0.092623274970643779125 -1.8140857083247208248 -0.57244206553796017634 -1.3585455203440421901 -0.83161700257609971754 -4.1225744484243342924;-0.36893703066862848505 -0.37269049301709405997 0.64641357429314316718 -0.55534271611460872542 -5.0337690182402390349 1.4811354554940838746 -0.35254992890385300486;-0.34445007907215691167 -0.43969067352376833835 -0.076890378558693378563 0.95523110366856767151 -0.67328529611305887315 -0.95574618876682004842 -0.56997666581140171704;0.28693607960431122272 0.0084867548917791323093 0.833996046191958329 0.86804997895623092763 1.1360902692095109501 -2.0315854338398828816 0.26770424357679734051;-1.2646877599200621045 -1.6643090901952268812 -1.4577353786342897024 -1.4936273061967235698 -0.65423961148395326504 -2.205713563157254864 -2.1391762983737048209;-0.38210743261533430815 0.052460941051140373703 0.52823999201509830304 -0.07512154488517770734 0.61059494950602855035 0.47421687539683421431 1.3685957308331293536;0.073021183025102798236 0.4746277098366765701 0.21120397845844957052 0.20785107493539642376 -0.015904080460405426584 0.26532806686239990279 -0.71256069858408832562;-2.3117553914198465392 3.8113034794586746479 -1.9549536103613431859 -0.52488229679022424534 1.037492228306458264 -0.90448103601826557174 2.4874934858911545987;-0.060460222428467907951 0.0091240683813284973597 -0.092536622523846923105 -2.2696675354931947766 -0.96417850012416994598 -1.2987038489055489077 0.10457317550374282955;0.38254561326902009055 0.79937025190541877162 0.66408898953504524876 -0.29995366508074450262 0.43293368806768550705 0.31810039626568653581 0.4358969897673369287;-0.92950220520199633434 0.86848716601257869296 -0.96498426133904269264 0.57071811690533336137 0.31448890007412694247 -0.06932778480251691744 0.5277119154695173453;-0.40301590668631737113 -0.63081798056005000674 -0.055305552823706478904 -0.10322429003149691251 -0.87867796565096989436 0.89210904165301074809 -0.84992337217742752742;0.30511202136884174596 -1.7929366776377713144 3.3294405228901258198 0.83005274001492734826 3.7881565329240465267 2.215870605440001917 -0.4511870462451798014;0.15775214651221930451 0.30678992429796264618 -1.0559870602292553698 0.87977315075512541043 1.1077835228811503399 0.15162902588619758815 1.8334929995630684374;3.4225597227964095204 0.23128751854746645855 1.873396855210401224 -0.5938884647836283337 0.58231082601729444725 -1.723159590511122996 -2.1373240249288087966;0.18160607343580337236 0.25128592130127536119 -0.12880812445138681288 -0.80485519722483134242 1.3697280571290628703 -0.21672368585147347431 0.5541586772762765456;-0.20442738783070316111 -0.32715292066864393172 0.8856174359812855057 -0.78681656995244064756 -1.3055494226151274084 0.02564215744651507714 -1.8235644421093057943;-0.20285714807579380281 -0.1274573619833986593 -0.33651284714973955792 -0.70464448272301449805 0.84654731256452675492 1.0180314919473278934 -0.17136168478976035456;-0.17494588858390416886 0.1482675251870755051 -0.48850887462401598738 -1.1317155231320026321 -0.25884907610244722864 -0.69259659654160243836 -1.2501362250641849805;0.30416329909815204013 1.384701730602570402 0.68020433170225902408 -0.34691529435102547163 0.07666657845484321776 0.051849042366817581218 -0.14539004114191497741;-0.36141148993235294729 -0.61652405370538421181 -1.0193055283497234331 1.8643280170648488525 -0.41558178537805323671 -1.3540887705568660504 0.18344361914142554015;-0.11100883242862924494 -3.5752770154292830007 0.56671022759168254712 -0.92319720861939746914 0.63761639745058562578 -0.14844568372831226655 2.580412240957171921;-0.47154989346423537011 -0.33535847484129621687 -0.13486119945274371856 0.16861444201796099707 -2.0240059684055164979 0.52702473482117273562 -0.5939434371806396884;-0.11706205239961918474 0.072381411765970182781 -4.6415528864895705397 0.92045497632540074218 0.2546304634802146194 -0.12049030494989979023 1.6774252417503825452;1.5024384193266022702 0.0037013992398273495681 0.58626497267791299883 -0.11445299225932696607 -0.4219531352468579577 -0.20509649431232501726 -0.828645306235832102;-1.8376942265177205194 -0.41204726779399297731 -0.49875181860340062068 -0.29789981300354062554 -1.7488479910224929981 1.5332345611272917285 0.76186809548894163235;0.29699687039099470498 0.37340414273378330634 0.56912048500704837117 -0.73687282192293213079 0.01856782345160722103 0.55799510093476301087 2.2479230479766623141;-0.80881015775796782918 -0.60531155773780864759 0.21797414602705228459 -2.2378529470543870872 -1.880893785415056918 1.0903374001870325127 -4.2965571403624931435;0.12405203403666294204 -0.051639579694781875818 4.337737774898558385 -0.83447640499447572893 -0.073388933079663931647 0.066397055485141243114 -1.4701134922103795688;-0.42847552849980730105 -0.32325750973146655243 -0.15462929111691839368 -1.5044079633804590124 -1.79859308399225859 0.74283678860775881336 0.54796873369995879877;-0.71921579258984036365 0.023831253540693830145 -1.7922813172583209607 -0.13376523447915991682 -1.2389601376613910144 -0.65822753462074046205 -3.8654294247828930864;0.040018354331323759132 0.9247715899392691119 0.36427937114327280099 0.28846613287088046507 -0.12327582644790446853 0.2259599894665347275 -0.51899821935610135348;0.86197914238154682565 0.4634676025132659638 1.1870803362842885509 0.65463523638849219211 -0.63863373759025232612 0.98296020108481729771 -0.90359719282298134324;-0.015747178520658711154 0.057936198927950453841 -2.9709462235987835754 1.5402995267946630875 1.4824745060455393197 -0.42355526438339852202 0.62373287237628360913;2.521539842181199198 0.17287629815535529576 0.7362576532549517383 -0.24357713559135102388 -0.089369055268441355278 -0.42081180070643614544 -0.44755590952112506153;-0.14658462830401911003 -0.034800820397957676899 -0.28700787356298335107 -0.76296755415761041696 -0.024941861174729344774 1.3200209567805969435 -0.47785425785648832919;-0.04419752379383407731 -0.055324614343787374693 0.16734629409412105083 1.4597993890461367084 0.2176120407913760546 0.48266356698929530067 -0.78729359754018402029;0.26620840355508895714 -0.10510060037637572461 3.6166852802247433374 -1.4185536201486421692 -1.3113450224525231569 0.43440422220581559332 -0.63494543322202734448];

% Layer 2
b2 = 0.90531307896453483419;
LW2_1 = [-1.7559005321963163659 0.060176114106925943092 1.2862760977466434209 -0.30676151672506413171 -1.3836138861563143099 0.75838167487950225443 0.087117849945872558037 -0.55078981199199139596 3.0293412562123362974 -0.16008120291962932291 -0.77621187374394573499 -1.0968726280237905968 -0.3760908422443969279 0.59729892149691854453 -0.036351440656287523079 1.6141242121008838595 -0.12505013284450838817 1.7587781834778883905 1.7133659584659568509 -1.2016861491313639565 -0.3003421823473893526 -0.38623116102591598109 -0.10059914927584348576 0.034703250976812601014 1.2032026187146249718 -1.1419401053858091455 -0.58743569465424205767 -0.11729756097856447461 0.32162981495869336079 0.080291886702734266423 -1.2973589522766997284 -0.52740890083517066866 -1.5211477978856742244 -1.0361989577615968727 0.65963805624859161991 -1.2477700341157327291 -0.29219970234639003337 -0.80633708289035999073 -2.369258285075430237 -1.0774394079099121058];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
