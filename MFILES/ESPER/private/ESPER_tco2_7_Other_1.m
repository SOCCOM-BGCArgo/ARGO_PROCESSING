function [Y,Xf,Af] = ESPER_tco2_7_Other_1(X,~,~)
%ESPER_TCO2_7_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:55.
% 
% [Y] = ESPER_tco2_7_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.25255120789812341;-10.434974580405418;0.57597869958130099;-0.58725212148818373;-3.4795432132337671;-1.2826286991899254;3.4958294912664489;1.2166098907455507;-0.21542535990248904;2.3561973754838657;2.4944915816815594;-2.8871537057588719;1.1775585526410717;-1.3043436616432393;-0.78273609094710672;-2.0482287126103973;-1.5301165819630156;0.23904772749886521;8.3913407419278396;-0.3075644546338891;0.44578313355825278;0.80315222907399886;-2.3390502427024762;-0.70014209448314624;-0.58745263853435936;-1.4822242559853633;1.8809912357428973;4.3377085044736257;-0.60933402069881049;5.4338294261329771;-6.6486083369942763;-0.64401401769094446;1.890914179235385;-3.7665920781619424;-3.1131538987295553;4.4630619093565667;1.6244985953612407;1.3751091984242596;6.4274465121744448;0.97011286710666667];
IW1_1 = [-0.28480398305080806 0.01555500426116342 -0.77305121534754606 0.40286782992765163 -0.46585288724897517 -0.4889386207022669 -2.6283757279428013;4.6764936387118086 5.3317528732084094 0.25499660611610392 0.35000158416261162 10.32576608623868 -0.98380708409796624 -11.144238408113907;-0.22329039725210639 -0.04635580280854161 -0.43131987779600267 -0.59913637761404004 1.5604425862473292 0.15394483971495945 -1.0751427497433137;0.25088390235549607 -0.021988677642213197 0.59477533424096063 0.41921170211677722 -1.199729536080633 -0.19662210576561653 0.57962754688399332;-0.63196858288696933 1.6313938584119188 -8.4014005276170209 -0.25253865063596259 -17.646421029072165 12.979459766844482 -8.1816804670519652;-0.96380259130767809 -1.6914328796074229 -0.66785208981911426 -0.34723707920453339 0.56381717404137088 -0.65639475714090312 0.23290413768582718;0.12174835718447743 3.8954288975680886 -2.4266674653741247 5.1755654873990231 4.1707410232232931 4.3707739709603981 2.1453073407671024;-1.0049217181894354 -2.2846037246500313 -3.2743883249384749 -1.4153758546580173 -5.9420375087625406 -0.052914508006280246 1.0638359048184962;0.064219317233131734 0.24725182951141467 0.020008495825639343 0.2054203389766141 -1.2083294961198046 1.0913392536853017 -0.53207238189754658;1.4550169269690205 -1.3117378520809395 -3.8460149661653542 1.4959951426026985 -3.3788467033647556 -3.1842074242726435 1.924836984941682;-9.7206901353880681 -0.24186350943778551 -5.2782878381363343 2.1340888029218426 -0.45265753296163319 11.302059106095411 1.7196384876506434;1.4818257018791845 0.01752157136914529 1.5099543769785273 -1.3370413895834741 4.2503016939721219 -5.4422933914550224 -2.9338065876285508;3.0497883452144068 -5.1575371625646458 2.3812192764082374 0.46703809594802242 0.3309213547370688 1.6501449194711639 -1.9071224824416846;-7.1792006299058748 4.4403146654446308 4.1432681160139291 1.7977410696645912 17.224637415266603 -11.380132509803024 -12.498436882902247;-0.3106858296323502 -0.22752524709730926 -0.24443487390693361 0.47304025022177559 -0.26541248989979666 -1.047852550876003 -1.9886192077652911;0.080301649737353722 -0.86760816858500367 -1.535783789766384 -0.473742040088872 -9.7911541069927068 -1.6097618856716185 2.5584163595999749;2.3888134281709741 -0.75503098524130885 1.2970594411666689 0.84303595757438787 3.4782287967541947 -4.0103042968955345 -5.1457973934786718;-3.0866940260753659 0.78684526994337456 -7.3184669284845629 -0.0046920680153408386 1.4603316288438053 -1.4900633055944204 1.9970730966076309;-11.924815819302053 -1.7432303142799639 9.6554690598040516 -7.7434124872608221 -0.72642898314921922 3.7570498154221443 -5.8558329574741768;-0.18344349308883617 -0.030192893081029681 3.3519609089283122 1.255756283197957 4.1529393868544258 -2.9443891866535714 1.6663913398772614;0.30614982261787299 0.10266028863946139 -0.89348394259543029 0.91035506423200518 2.9918512707374685 0.5095445863332464 0.25684705981321604;-0.21979518830719946 2.0692440477929908 -2.7830858906587594 -0.19944033756913093 -3.8923251240493641 -1.9120466599999293 0.57523323810289606;0.48775287113582955 0.016963595352493629 -0.70145279964859319 -0.74002823499643977 4.823212066852351 -2.4948318792963415 -3.3879608208749135;-0.32265712624549642 -0.22962775677347855 -0.2777473266218668 0.46070640009402841 -0.50484780311937527 -0.97217608916722609 -2.0457542226242444;1.370640266316498 -0.0081766379812803214 5.3117156447155063 -2.1680409126264251 1.5108067228266053 -2.2902759827446757 -0.76576657464931019;-1.5678076623881336 1.7281237183009939 -1.9143290870687228 -1.5668907788444182 -1.1173145208048689 1.5913321382306009 0.81548251621438161;2.1447314065203429 0.19527273976296797 2.7819523087840969 0.96604619513136181 4.314699346136508 0.48648283948109416 -1.8651058377522762;-2.885105156542203 -2.7268680275577939 -4.7057380830523785 -0.77012387799902371 2.0836632467819345 -0.75923909144284729 -1.9344112410098289;1.3815517282840126 -0.011790093874436216 5.4024622476933111 -2.1828741921575787 1.8027143781884403 -2.2789003737757381 -0.79049953071527856;-1.8930352360610232 -1.4045505089952828 -1.1223350341957057 -2.498600846824496 -8.807181487916095 -4.9176920361734018 -1.0749045932022447;-0.66877802936306885 -1.2246447533095766 2.5693667158675875 -1.7409937223889596 7.8631782174328686 1.8797805151909732 -2.5778403754674546;0.1777950427918201 -0.1141467250032966 0.51595839516480269 0.2050143873010761 -0.63023666080937524 -0.11128640877702821 0.26281809673954681;0.32100807062299269 -0.58018205557401981 1.1573261262546215 0.47653532534749266 0.8569204604863857 2.1923909027470891 -0.15341395254329898;-0.25966049856367213 -0.43198541429420612 0.66443233989851136 0.78614407530862329 5.0613733317692198 -4.4136269223447959 -0.027217501862733497;-3.7616527433866884 -2.1009854047021324 -0.89230200163142825 -0.86595633839043318 7.6211907603214808 3.9939267850065159 2.7315506880014766;1.3290812311978397 -1.2220952885039564 -0.93453616948412688 -0.20865018744091726 -5.4628497943931569 4.8513803070626578 1.1310132799176029;-2.8638967200273933 -3.6101629152454806 -2.3840016353665034 -0.40142125903702469 -2.1656888737628632 0.55865894100380775 1.0570884012200388;0.93229669008965288 1.6111606208493836 0.66240616798767249 0.35783455011991938 -0.82625456960094468 0.73283950315003155 -0.18505193917672175;-0.023531639147584885 0.16893963343241528 2.3375164093726517 0.16388756296621448 4.4318737011608542 7.1568896041449843 -0.66777113515211328;0.77304068846650154 1.7683723983838679 -0.4814202720984444 -1.3999456059745592 5.1066386998972053 -0.033345022277871436 1.0592230287908542];

% Layer 2
b2 = 1.2352533188043999;
LW2_1 = [-0.09150058306122566 0.0069454364284090289 -1.566301920391403 -3.6875801200087799 0.020509835523283459 -0.81777639080773201 0.0058439745971724192 -0.024371291397612002 -0.50324941832112691 -0.028251798835882306 0.0060309699967492011 0.048058006560871627 -0.011294167962888802 0.0062884600740550894 -1.348834185693226 -0.05069224407708537 0.019417002530401951 0.033785544475767884 -0.0017504702513723713 -0.044199314097772668 0.1552979714530156 0.047699941879891967 -0.057631917362620244 1.2751071274249632 -0.70040676178045014 0.034702581376295435 -0.034549636805041917 -0.022779760915479914 0.68704949348737043 -0.046566758133944057 0.03195122339489137 3.9319837003325495 -0.16175582012824288 0.053434185538425244 0.01651256662281788 -0.02754335039072258 -0.016954669321263657 -0.84476238310714735 -0.045624012685045914 0.060413731170945367];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
