function [Y,Xf,Af] = ESPER_oxygen_13_Other_2(X,~,~)
%ESPER_OXYGEN_13_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:48.
% 
% [Y] = ESPER_oxygen_13_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2480339107620002093;-5.2827215442082886554;-0.29855953060325773896;-0.35476729423768083027;0.90174517976058865543;-1.3041736388761229204;-3.2466058077750972188;-1.5504902780778202498;-0.77439848250523568574;1.7065763143285608283;-1.139146605875541729;0.23898640635952067557;-5.9188650775449040964;-0.20643440176479438408;-1.0067870038739412664;0.59297502659771128553;0.86596249179528383966;2.4934205363698129787;-0.63155532113300050234;4.7919165859520225226];
IW1_1 = [0.67630941807590916337 -0.67347486397505340605 0.71462608407980643399 -0.41779840403385709591 2.2916788741632050375 -0.52648703610788738505 -0.14335705169398210712;-0.15624603510254031491 -0.084302981356681711 -1.727485840191304467 -4.4110156672272440304 1.3587763606961789087 0.68702229261821512463 -0.95300122136249310056;-0.20616743537788534413 0.34459197666237467716 -0.97166008805827885908 0.067262579033040892362 -1.156927732192836844 0.17861182760098984201 -0.48715053118326034909;-1.8564841538940037857 -0.84259231725181737982 1.5117087906875472658 -0.80769249514897079045 -2.4032887701217067189 0.76656665508748966786 -0.43210660521830551728;-0.5263359445706851103 0.016006744646366748153 0.10165196651913699366 0.87348674833940642692 -2.1987158517646210321 -0.26125387314396003591 0.12156616829264410562;0.30576597454247733676 0.21622162610798531523 0.31600505319521765557 -1.7801774616592984657 0.053759258232759128682 1.9357684549745579616 -1.4130856974593557496;2.7890295541280125668 -0.086145426423617388334 4.1855687501550757901 -1.4434273867524474166 -3.1835574278734521947 1.3197333763751371016 -0.074646163547016683437;-0.568970832141032834 -0.19848023473759576762 1.2663363903216406925 -0.4454621441002697968 -0.44666971299709068433 -0.241126136769316185 -0.3731473436297922941;0.056188661151266063032 1.0006985776471331029 0.36216957008486588832 -1.1327689225909123305 0.1079571046179425009 0.94378051534930784694 -1.6869830669333782946;0.11964182997186874335 -0.053897349988554790756 0.35353541752056771852 0.51546986931522453812 -0.25185822618714859278 -0.79051714867538480647 -0.4226986608068661333;0.33143939117615017764 0.28035379918343339423 0.56686800672978643334 -1.7612162754543114751 -0.2141508002259148169 2.1238715998903621163 -1.8139632442358228914;0.55200791909183111184 -0.31756131236325191303 -1.1619890147737046426 -0.34061513399498249965 4.93312338779902948 0.61893979481014849142 0.085571768717537036175;-0.16525848518590727232 -0.45754947258654160569 2.5436220366846717944 -6.8160529071919135902 0.99671335746850509008 0.39369738248078062215 -1.2625425860397561095;-0.16603880451846905753 0.34906062684243366334 -0.67373305495554791644 0.061132301662985728818 -0.75839730706901120616 0.019224521451456959981 -0.37004445022780863006;1.3389441858296495802 -0.81079964498579382148 -0.058018620391948966253 -0.19365641982960599132 0.097271895402045754908 -0.348986334447962121 -1.0101513326887874289;0.21998379819513488864 -0.61322474821255057442 1.2777698324921933359 -0.38219491406477229534 -0.28970800970476928704 0.85044709688774289269 0.037300025876360089205;-0.73790712270932534711 0.042215715959765781617 -1.5951920211398167293 2.4549433601624102153 7.4446547519949817229 -2.4463733341753690631 3.6716208043516020965;-0.04085055540330987528 0.13740912344519723431 1.3483558528932972909 0.98290745598270679029 4.4019878318460614608 -1.1102885320932531776 -0.3756927279201404124;-0.14050834884166427119 0.68272244864623710114 -1.0964736163685337988 0.46588956274434406568 -0.033770579377512502384 -1.037600152377858187 0.085902201238012149132;0.27275520036278866343 0.15333993035369891667 1.2262631606228602266 4.2065337753737530591 -1.1147111316476574494 -0.99466749811898558242 0.9516129140830428268];

% Layer 2
b2 = [-14.464315331217267868;6.8171701813391463176;-15.455264792081017333;-2.9776730168182869996;11.37161058576480599;1.5814844854737755142;-2.1704537639739052146;0.91319803222196815895;-1.441835296388077392;10.776741231936853183;-1.4788462764099836733;21.596027165878940224;5.3487408501572382136;-18.935239205887224756;-0.72005157911073969235;-7.3840529171466018354;23.141927039292948365;-7.5141070409246086825;-13.711874038487684047;2.9387451055120448196];
LW2_1 = [-13.730033552163950716 -5.062257091151931121 -2.5902632480855318775 2.4893163728312601712 1.159334529392928026 1.751049443819043816 5.4947893071393689723 -12.07072523807714326 4.1257184454460515965 -6.4311229833581720072 -8.9407507820950566924 2.083842776286496612 -1.6443669606701667441 -3.3800079025342451011 3.7053089917492694205 -17.251952473676052335 0.41589602414459697632 -0.51194390872615858079 -13.066720938368508342 -8.8750592170532147662;-5.8188911393874285238 -10.653444954605467032 2.3218369037064285898 4.1824116023292026156 3.2144441100825402735 -1.267751167001746504 -3.1696818853960873064 2.146670977842351391 4.2473972299373805583 -9.3995271027843507738 -0.92722186688254082387 7.8812076453555945932 2.0544936617919198341 -3.2246188517411313867 2.2759064339563721546 23.6387901996029548 1.1832835475489611454 1.4355337491877169231 27.877004695854836314 -11.027961332288336749;7.5504886708436229625 -13.50061211837019215 -53.0152936910822703 23.137355056919318486 26.392752410659426232 31.423388807421588353 43.60075989672621688 9.9530637950492444332 -10.921769252402185657 12.172846933165503813 -56.892957263888760622 22.096879401402855336 -13.260838692658657223 23.459006450954795753 10.608496510513621303 -15.019604154377848459 -14.68147024700857628 12.432990269522568028 -29.370640608062910104 -45.527374261712260761;-4.2974623885063465423 2.2759240611843245539 -12.214684261795806464 3.792100488201891384 -5.7610910419523655435 -6.321956232609699633 4.4170017298124006899 -2.2614427780129049417 -3.4754800330794997087 2.9098743272794544978 6.8543434372783469399 2.052840903570414266 0.55456036410885400922 23.2744657431797215 1.5543168381159073732 -11.099829541247252962 0.48841363496249257103 0.20831877757812133911 -11.272052742159377914 4.0317205350930995778;-2.1163275889098307481 5.5863885152321532956 7.0844194425070430299 -0.52373943057940253176 -2.828702309262439929 9.5387294690794082186 1.0467697127636965693 8.0451961242087168813 1.4626718264422253757 -11.147786256963067686 -11.982836328958576644 0.71855155145961380203 -0.38977910690376127434 -4.7547575063044167365 0.78248870236431011804 9.4257330344471359496 -0.18210114539158200886 6.8982705227068050746 5.4400255718366752333 5.3897076978755222854;0.85394668859434474939 -6.123507315683307084 -16.353026827591481407 -3.3276204790535528488 1.0929005660076489548 0.62133786368430310443 -10.761403419771006895 3.1520572615794404392 0.43377703074215223644 -4.6830305418865734168 2.0961871370958973237 -3.4227064966333320406 -2.5682901847169361531 14.801724633918814433 1.3728883300024192771 -27.4640576319178642 3.2892613089948468108 -3.3050874698994201495 -24.170711270328204989 -11.252893925800142583;-2.2683402276035593559 1.0481723219162708549 8.2470434687312970112 0.4605226513492755025 -2.0522842688796210098 -3.0541742301433871809 0.072521121765631135769 -2.1515510579166234884 1.2625523175061830194 -0.74238938258450482 2.469144612400087091 -0.90636588548982810476 0.89483672813542203262 -15.419216553325737706 -0.19280234661423578668 -13.081993591327067961 -0.37366236486490078672 -0.71391526319928055866 -10.473072006180927929 2.1410066317759741672;0.60983312976520687165 2.8379203554571383883 -19.754465471459965897 -1.8900673040771573952 -4.4021323008361088469 13.176085587544518418 -1.2347371447458626026 -0.92068645552926597908 0.91179873318878512656 -5.6490418595438045557 -14.661436846938894263 -4.3008547471243518956 0.97324073292577195637 19.599588460760763553 -1.7347928377096200059 -24.578465264912157551 -0.64520250955842450846 2.1529783208663260119 -26.372651180108778846 2.0889222295185843059;-0.080102199463493131693 -0.69074618815152932783 7.7865861588653384473 -0.41509846737389255455 -0.30848916242369001095 1.8741467116876378007 0.88894317078843965163 -0.62981525282574146729 -1.1860899825157138476 3.0058153710579227358 1.264209307177156294 1.0421949371302710041 0.68240834829002483541 -8.8103563486477600719 0.15338886155922298871 -5.4827990480420529806 2.1409733718453889395 0.51896386654512616232 -4.6629851229662806489 0.484138082523685509;7.3213026268180003697 -4.0547653180528309136 16.995282071379833155 -2.764754794460858367 -7.2998992898936334583 -15.81174962708974796 3.7435468526539064094 4.3204462126555043255 -3.2055960065089594835 -2.8399469672748174354 17.337009004020742964 -1.1127725616807051523 -4.367580320715061859 -4.2061041060706951811 -6.6408998451927843121 -13.034058169981477704 1.9318792640894930646 3.8763560684554665414 -14.407218845085951742 -7.1027399954503493973;2.5432333651494687388 4.333942323870737745 -7.9422487183137926436 -3.5611746014889047451 3.2115224229891348173 -3.0736436395507453767 2.0434666183569758502 8.044264650800270644 -2.5576935745044977466 13.509850771518410184 9.2170806801223506 2.4547866307524732754 -4.169359684010631284 8.245633366848897694 -1.4708393604764857798 4.0595841842129880561 1.1904207587823576464 -6.2832468049517897768 5.8317937335415503952 4.5825441959829644745;7.08101268053187205 8.3118734531284683698 5.1548876972152939402 -1.0434310119266889672 11.203666680798290756 4.3992229329615106792 1.8722183508083127812 6.5282370527099793378 10.232163520088345621 -20.579416666461391117 -14.921530381995454562 1.1701591774384176858 2.3515186241725323235 -7.093952612546346792 -3.8394137851189347188 9.8008023672546791261 -3.0445180004302763166 3.2480574053109987354 10.449561057849541257 7.044043453491688922;-12.871204137134574452 4.516923455352286787 -11.053353919143125594 -6.2219434875928598672 4.3920772477259761857 0.71215842284606234447 0.98406250858015920091 8.9764101954085244728 -3.3892605425285875498 -3.0205798790940621146 9.1219505484832357212 -0.61899411061789810784 1.1992866253122929088 -3.488712279795209259 5.9504064052747747127 3.2410684009449877152 1.9630629412889821772 2.8910110490332567856 5.0701986746720795196 4.9237958514151234368;-6.8760846342723604963 -5.7276589069526906428 -0.53456745452489362602 -3.0321507909592404495 -13.51136063406720389 -1.8586378916449641796 -0.79114466601957178504 21.523035889349404925 -33.195576326236114539 23.227030597104686649 -14.600569127936287472 -19.330919398904178763 27.263282350100386253 9.1130842137535399416 -4.672882738785387069 64.041629600952731494 -6.6131373201176604226 14.16789002470372516 8.9055947435426450198 -13.5262504780535604;0.75176282502848446043 4.0402127848781965724 -0.50522293148613506286 -0.022866123405499268195 0.37417945487844261887 5.302433507910109256 0.22298992369965062177 1.6418295725975602384 -0.68278406593070617436 2.7390168438842570353 -4.0835498628868487359 0.20441098971464569112 0.15269041588673742949 3.2912599707711178709 -0.45838494667674284377 -3.1351100492424106569 0.37180575867429294101 -0.62420897347410908562 -4.7761860402683984361 4.3294639070995586394;-10.620533989997197111 32.26402006979527215 -12.724894087695844291 2.0382357147204959169 -6.4507761137514680883 -12.104812105488610641 9.3988177208868339818 7.6194106905462533064 -1.0130313644909243465 21.951056588661835178 10.320745714293614981 2.1540794932530213934 -5.0478182803296984815 46.613792602736545234 8.3684582814682784146 22.135732253673495507 2.7022194364467249095 -5.0533026161705052459 8.8184418287763204347 30.674697986546732409;11.414586895053478344 2.2228014466521583969 7.7042051992848392672 2.9126044066766043628 -9.4380484511965789807 -14.265286483757611435 16.248065983496172038 -2.5185730289013563699 -3.3989081901442794731 -2.4609499055396741873 3.5859869463509315146 -1.8799911193928093844 4.9259393658380554726 -9.0062788316456483528 -0.66911500206973950622 12.932856877018238606 -4.1186980695632859906 4.0478477239290810985 4.8737067325632512649 0.86922090977724697503;-13.980365734628515284 -12.399503993837100779 -7.8521580046399543917 0.94581242473157767225 -11.120368448175828036 -1.9276476903534767171 -2.3126389144903081174 1.2178140751188379909 -2.261856291931985119 -1.3234084786289561642 -3.9411543564442483856 0.21928264974365965778 -0.36623922893625993069 -2.8671336793926536224 7.659179630014802953 -10.991470436202703809 -4.1779627593239316852 2.4122975772762242919 -5.1246481582662806176 -5.6898377654470202458;-18.956841531894369268 -11.472539864413104027 -11.542261551274561882 6.2072870469692809081 -3.2566051199878827127 -29.988663879634358977 2.2214545689339573187 -1.4228898819612394444 0.98496129228628781505 14.264990549938980635 25.183726263450228799 1.0246943776204544552 -0.50547064693441656757 4.142042726459780333 7.0634733778181422181 48.758767518791820805 5.2707564221592200226 -3.05254556265131205 39.294267306746618829 -23.750688129335259191;0.39605000950483726374 -3.470346780066016823 4.7030445282327075773 -0.14783917748738348297 -4.123407512590961943 -2.8684598822482803016 0.12896627590600914792 0.97602680350695092404 -1.9385407328609611799 -2.8203587074246221356 4.0327336514335527795 -1.5758815723119850016 -0.0087547223996444420435 -1.5781900916751256947 -1.0818716134331485268 2.6329689791497803419 1.1433549591758676023 1.1955514525489554511 1.3383478757997178121 -3.0448442472269001691];

% Layer 3
b3 = -0.22055589691378812978;
LW3_2 = [-0.037193132453847324581 0.043677724950365946766 -0.00876705334153559529 0.055734441554102551186 -0.050911975846547365132 0.0511267433719282266 -0.18371916989756389982 -0.08605617110667941605 -0.14829947710710628117 0.03234037004866990167 0.061793960981215707851 -0.028387970217273034851 0.022108176809416027475 -0.0077821984636109991368 0.33370972076388305538 0.033315570154039346462 -0.01803401350998261668 0.027604256631127754851 -0.017423235098635275753 -0.24100325777648212711];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
