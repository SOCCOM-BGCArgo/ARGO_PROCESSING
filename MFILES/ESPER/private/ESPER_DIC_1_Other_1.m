function [Y,Xf,Af] = ESPER_DIC_1_Other_1(X,~,~)
%ESPER_DIC_1_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:10.
% 
% [Y] = ESPER_DIC_1_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7069927127987059023;1.0056315838086127279;-0.77713702288190400491;0.93146384592444964046;-2.5973050734410079166;7.0628251768103327279;-6.6048805575584763616;12.742491887019522068;-8.9560989170576856822;1.4424562401988310079;4.8882227801467399431;-0.73986046676208527817;-2.1400449151749794119;-2.2011182697475848435;-0.94534822487880287856;-2.2937035654921120731;-1.4740852350587834163;-3.8595089615909645708;-0.29964459720561564815;2.768578866765376123;-2.2075765088122736302;-3.3068174070387299501;11.695795214524114414;0.55110412630456662164;0.9918491624871229595;4.1580842604571577326;-1.4791269100229000877;0.54339365878502199347;10.627653083665933309;-0.69042094816089638609;0.7547198144454452251;-3.0032295870070422339;-2.3756183619896211745;5.227160951765865704;4.3101673740238677368;1.9758925268852469692;-4.8125526040918211734;-0.64998042531689215195;-1.4863988950169433334;17.67724134522723034];
IW1_1 = [-0.6091048489283296119 3.0254437655146348973 -0.76134799646217354852 -1.4905092245342179691 -1.9379688288285517039 0.74550608154574238284 2.162775485283682908 -0.45698002330302711638 -3.6595549361028165691;0.057619802582551823966 -0.19752840226405060653 0.035301036156426289503 -0.73426340668263967437 1.103901921678327458 0.81293694625359691486 1.4188849134493120019 -2.9457975297518634861 0.40643386338944792469;-0.11880556037207283537 3.0670106981560292247 2.3991129503295351988 -4.894955241130641177 7.2982677241783013855 -3.3372627116659359103 -3.659914880710058771 -11.007502099711411248 9.0358128033218019226;-0.3057819686582238794 0.63660746311370486339 2.4982641121619306723 0.0012827641064194362369 -0.66441155377832428197 4.7491655897175588663 4.3137685216073329286 -2.6281982203707330292 -0.79913354182674467552;-0.17120235092784283348 0.030518441126993582635 -1.3414901271078552014 1.3150930450807365446 -1.5573321403804416541 -2.9721298112391916213 -2.9596856318580968548 -2.3813178800558598702 -0.55901837592663405907;2.0680292185142703509 -2.24621674701140428 -5.9371382713409177612 0.17901462071865548165 -3.7129876675321731305 3.5964070787097064397 4.2684845065866161562 -0.20702352090290171427 4.2677917483015370692;0.61156322154680597958 -1.3990066787527712933 -13.850165826607108599 4.9536181659478382144 6.1337740388327102181 1.1541903042471151064 -8.5905816201055635872 0.18592118594726383951 -5.7492804409168947188;-1.3403861895892899003 0.19371758581911360797 -8.5842053128703490472 2.9284369637967695432 -17.583616803492144953 10.320673228227832396 -5.7871449928289058207 7.9070159722477848518 4.9939016652169083699;-4.3400888352321169705 -15.541653748040831218 -10.798075274579547411 -5.8332898869553142518 -0.58452616550307090471 -0.95622608443529544253 -0.85305940596336726767 -1.8834642993769385999 2.6129353094114118328;8.1977216247016979622 0.37645654539702860797 1.2041701312954244951 1.3516481002751676854 6.2797666056078362828 5.6889402568501479251 6.5966504726856687313 -9.4166483671859264604 28.377004491166964328;-0.12184513456619738836 -0.73321173260555505546 1.9341001636028827271 -0.047005889830395622409 -0.73551386484575798086 1.0173557601060105871 3.9093834939365237346 -9.8972198193812861433 7.0777863497545547844;0.014473903593589257377 -0.0052946408103923797012 -0.012580060348050254096 -0.16241618780567126934 0.18734809608951050186 -0.070579875765843472224 0.35628907517678748418 0.28339707202635600058 -0.22937327648466046548;0.24709988814826308601 -0.19007571718453994403 -0.18995632849646038043 1.3336949006887666158 2.4830468988111378259 -2.5070861842435876454 0.23828227581973798754 2.1716391959150880275 -2.8008743731367067298;-0.22031598888876929854 -0.38576727562227380863 0.85885839013896458916 -0.73088247283530638487 -0.15077518997626182529 -1.5158039828117799708 -0.33337404783218105297 -1.0250422019611489244 -0.32189481781954470963;-12.122639846837000022 8.324526677208892167 -7.9970561538916795641 13.941348834274414514 1.1257744168651797612 -1.4427236950025499329 -10.526979085263572955 -14.94948148917882591 -3.2625455349582441755;-0.21822107012085545374 -0.40914732030708295119 0.96516648572852492549 -0.86089556611026407662 -0.099022255168488421129 -1.4962512962756557844 -0.38496564149605821958 -1.0823636278974815284 -0.23981890169564223925;0.085692011313416860396 0.91649758051229390787 1.6090438324275950777 0.91969855882241502432 -2.9451700703120820002 -3.7106224714789983743 -4.0728189508532830487 0.62587306904250561423 -2.4793323840055818685;3.4177476313218750903 2.6823142583427515007 0.15403659204927866444 2.6536910742057515655 3.3156204841810166251 -5.3415540274709991664 1.0130432099432209458 5.6622888479669004624 -7.3212579590928577034;-0.10139238020719838762 0.46022698977135417797 0.2500804079434675864 0.44590672671565018126 3.6404545248505519872 0.38045533499750983086 -0.39602778567460555914 0.95594787496338706756 0.057276322467274667916;0.37126202556995802073 -2.1206338920486538235 1.0175544757490080361 3.4817377691823878649 -17.794987926319240756 0.56592113584769998536 2.8901480214382075928 2.3067272422380802332 -1.726563220663954068;0.23456300623935999461 0.54997304964416604545 -0.65301113841428792828 -1.0542061013110475276 1.4128430971931233984 -2.516039173219039693 -1.1349794661504153392 0.31078126494888352882 0.56184332359557431769;0.56747029971415285932 -1.4757294389667863221 3.5113395011984058769 -1.7484577704989796576 9.3468210695169187119 -2.8237459271170259889 -0.26668639006721206464 -7.0292299543685299312 1.1629781439258386477;-2.8846898845585764448 0.55935497406117196117 1.6843412641999897517 1.7151769399932672577 -7.1842756432143231038 9.6362305647586747881 4.9791059611438734933 -6.4275335533888906525 6.8618735919857138938;-0.39368032204151875986 0.44322623666093097228 2.6759285729619550764 -0.61474676786598636546 -0.54671126349349241647 0.17682057157550618021 1.2957227795906682832 -0.93393811078907851275 -0.63845155800015762626;1.3898091131755070382 -0.18364369151919590628 4.5504429978788651923 -1.4201013297025342208 -1.3038971440031454918 0.21868761508523418269 3.7207869298647620049 -6.5035363749615804352 1.0882664134997093175;2.5144676240177075144 -2.9548806513101242288 3.2889213753949375629 -0.043955300619864995371 3.216704931200572215 2.097775878609600575 -4.6917189126659168963 5.2264633769938955155 -1.3863865625323235076;-0.69968438669731491952 0.43829541441831204596 -1.259792377249494999 -1.0875943096441458291 12.549896071871026848 3.0368624937773298633 -0.045227369336475121975 1.4188715313085153991 3.5632367943380334196;-0.0062149812769445068883 0.007519372336681397033 -0.0077363536409167507277 0.075127505079911324759 -0.11342619013504334768 0.003423494253257611513 -0.19341758890856916575 -0.083340436583183769015 0.071089956130570869375;-2.0685500224052768559 8.3564309798358866743 -0.85381200780806643102 -0.42314654900411508009 10.929420318471141371 24.739257051965232392 15.830420899046583116 -1.886660320212191877 6.7390474225327734459;2.0637015173525128375 -2.2822807663218598329 4.3928136638126895619 -1.6437508673286860272 3.8603662701960503867 -0.97554048007606364301 0.7658756074237139666 -7.7962367693628911169 1.7663649413491249174;0.16521943594207538775 -0.41962864017337708766 -1.7643943922870335417 0.59847661673317564812 -1.5509512021739826348 1.3487380528566490501 0.34909181882049911128 -0.46606194201832340518 0.46013068417767810647;-1.6398075479139821997 -3.7866579604116030744 -1.7771427993221959873 -7.9183542239110673577 8.0600735330629209585 9.1118183702439186078 10.0795720386370391 2.4225455969834039927 5.4448003510104125979;-1.1698535894078700981 9.1011047090645824653 1.9757661680914115898 4.5104146360770478452 -0.035595025369641986046 -5.8215387762532762039 -6.6691617706028676338 -4.1840921842663529873 8.2357219579599174608;0.64410928791531840698 -0.23917473106144745976 -0.94494361785013614163 4.0202668787973356856 0.47987142724543097039 -2.9122625192299178565 -2.7984580917811423539 2.3387515273220307321 0.90759465143530992925;0.25857572089119179592 -0.16825939552300386848 2.4376174227852929199 0.37625273771372175213 4.7316684757336249234 3.4542018891890959864 1.5656541272430111178 -3.7536231194733176153 1.8095569226803223106;-0.36276664649908135774 -0.38327378602684691877 1.3347298128530384886 0.75665049442733245399 -2.8015919178245560772 1.1166475005288136746 0.51436268268437501661 0.63816270425933285804 -0.57223780410226698923;1.9170832614028563423 1.0402910593270897621 4.8514024417167584957 -1.2910947055479085055 9.3905633202735341314 -8.0607515976668331348 -2.2503493795271856115 -7.1868789014708989171 -3.1959046730152240734;2.3566280179674872208 -1.097435941497592049 1.5225628823234234055 1.4590677532044025178 5.0668777411205123684 -4.4975400004280681188 -3.2757022559161232955 1.1739010571961203677 -1.4249812939110346743;1.4199024945367746398 3.2576260436293518197 -4.7736354015940944961 1.0055104566260548715 -1.0992966373431545257 5.3586126510949299018 0.39741337182026520436 -4.2788603077875366765 5.0957670083162485142;5.8765376849016313088 -4.5848061884858806181 -5.156352347379561607 3.1899829702057331815 -2.4122917456170398509 8.5588715094536897965 -0.81661873088312619817 -8.60712463542571804 9.4937650269776430179];

% Layer 2
b2 = 3.6789905948406933511;
LW2_1 = [0.017083073056754580904 -0.2606258024723447364 0.0053689991258359442625 -0.039922934057091068183 0.056662820059019347596 -0.011357525447128306861 0.009635192592260902536 -0.014510943245403707877 0.0047596089960959186635 -0.0038549791060342019494 0.012840552539485412809 -5.7761782813127284797 0.084158969896153318357 -1.7857867489873102684 -0.0015882940850457610924 1.6571996020779808934 -0.031041212995264591545 0.0091262615965808004809 -0.11784159719452282078 0.0091013921478195689008 0.1204083871487829499 0.017086239326021095131 -0.010982804552735484643 -0.091288341867090283532 -0.038568259850522493282 0.010092828508079635524 0.01726244843963221573 -14.018641463618701337 -0.0045655041519613156695 -0.023715811834523477936 -0.17207453279635501198 0.0037643637623256107939 -0.0043351524549511298232 0.15423637350451988026 -0.054178857304187914845 0.12523225351171579645 0.014247747067649372057 -0.02287419125944221282 0.038292547229334686354 0.0068076276867387796807];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
