function [Y,Xf,Af] = ESPER_DIC_6_Other_2(X,~,~)
%ESPER_DIC_6_OTHER_2 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_6_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172;-0.9];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402;0.0419287211740042];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1822541754483399945;3.6421273347114087038;-0.37482075372595335949;1.6110586893494034388;0.52349321194474884855;-4.1950084510714065189;2.9841564193568426155;0.038890817458141706264;0.40704940938137645912;1.8341720822117135725;0.56931764146524643788;0.43289671178363714477;-1.0517785928341258916;0.027973071782597724866;2.4269292325857030335;1.1302951018829872076;-1.559450604126949802;-1.127797068055163221;3.6260431629466034487;2.7885405170982822121];
IW1_1 = [-0.14210694047771069148 0.19260836406749765048 1.5948376658847414067 -0.26817376267874182272 1.3182049599778415949 1.5323640615311246993 1.2617670146361754657;-0.88438780078206358226 -1.2638858641101666791 -2.3004772361997458674 -0.0098376828947926483332 0.58646856985505124715 1.1197689321340202895 0.75082908237396639439;0.27459899938193232938 0.6136884048956222637 -1.8343639996255280966 0.67630318164916836121 0.00097548078339009056809 0.27633897464770140751 0.060642094469783400235;-0.27637820972408327913 -0.20753623758316916414 1.7671475846137496557 0.2649342897030560473 0.27945465118421353168 -0.80137158453651824441 0.67991326877607483059;-0.14871791668845021905 -0.15764779433978287626 1.4322707464868027483 0.51559803826647887526 0.84565063916408822475 0.22525142015376534155 -0.081918761602436426794;0.39727674049620598229 -0.72498577856495127758 2.5487862410813342251 -2.3071242990626226188 1.8889967033889436543 2.462579663856388823 0.45079172046699839127;-0.55621194065729595568 0.62436836229631709205 -3.130833364615864145 1.1280514320880143941 -1.6478914327122107242 -0.87266201623346528748 0.79312568480448775166;0.079045503127142272004 -0.036081296601784287881 -1.0735718934000741953 0.14011200500860984675 1.5546124566658832133 -0.48117284565021445353 -0.037398158103357122262;0.76418816296360991824 0.68649322632596088134 -1.1990924511288800769 0.38494746853245576101 -0.68378517584455311695 -0.078302986233904969815 -0.1632092389833960655;0.0086185255814289173093 -0.055945313002855941165 0.8408824093973167324 -0.37838546432903502614 -3.8409989926092880097 3.1054331902028939894 -0.25858990393610292724;0.11725299900566088507 -1.2123880593545093287 -1.5418207050006722536 -0.68008885504536675803 0.45968770467214414843 -1.1318047102082333666 -0.63753334752519785766;0.25877775920901580076 0.17600601463072645947 -1.9014206306875791608 -0.64963140448333789312 -0.55265761953041936394 0.75357266973907910401 -0.18223625793471945333;-0.15075930608798965293 0.0181491693453882455 0.81490122385709218289 -0.13279384335587826604 0.55791763369863422994 0.0073900488706878028622 -1.1585793494257921044;0.1978840128084312644 -0.17842282093955111333 -1.8296038706727124623 -0.37663709404426776173 1.5675526598730102901 2.2581147267235146536 0.18264817900994675948;0.21015302329260138192 -0.56870015466437251472 -0.18400757130423939234 0.85782639453161091403 1.1301175695976799496 -0.74070251958219990307 1.5018313827683476003;0.036748436874209769454 0.32259557608838679288 -0.37315330933583790163 0.12035931122529329451 1.6052273591019647903 1.1883324605425833465 0.09087126514208521133;-0.010784067462252461614 0.34526410931355905332 -0.035618577350942481896 0.19292416712484525276 1.0794054577030611775 -0.94403960299838329817 0.52866906449636530407;0.0091570580056228173538 -0.75878427890249144916 1.0991069610204171614 -0.36060738338904330114 -0.31879434962828834266 -1.48601388005812729 -0.14385631544800722703;1.1459098034801291632 1.3404149881096856234 -1.9668035824927025956 -0.18740335335977570397 -1.7865425137791461907 0.99424156561260979004 -0.63040697223130848226;1.043735731514064291 1.3517480890334898636 -1.0358312958043287555 0.28752972389768355344 0.19574945858237668972 0.58577698426325319758 -0.14529100031059510867];

% Layer 2
b2 = [2.0232735844359703847;2.2611534473104981657;-2.5301875807172167221;-4.5316594904377698327;0.3196158800361571517;0.11860079184085529913;0.55669324484888549343;2.4479800305240102531;1.0136945523952296533;-2.0256667206170662077;3.9946315258672715487;0.22515590282246539244;-0.6917316107697433214;1.588853501175652827;-0.32848808050542666059;-3.4412530819226190282;0.46811230034429224256;4.2524295003008241167;-2.2980047211989154121;1.4638370462718115483];
LW2_1 = [-0.38452394216785085179 -0.090280318225620631578 1.4185808423935573064 0.34843458350100836585 1.2163038558489172036 -0.13838272461560979787 -0.71007800726558800708 -0.13359901673078725115 -0.296578916017815164 0.17326516397395813618 -0.31136980573999778477 1.5874149199075664463 0.020911086849557079803 -0.076488334389259421409 0.21423706347644627668 -0.86244841701014463009 1.4013354964622388721 0.48723231650752463207 -0.18032804549134143213 0.24819014576921805126;-0.17902740537666450571 1.1291729745062597523 -1.0631291107929732309 -2.5157314949239721891 -2.7144144795806992576 -0.23409587348446908583 -0.95352566489179479969 -2.1014711804854089294 0.25090075007682904884 -1.7044500036053846781 -1.2439808249956174624 -2.2314657544314386861 2.1366220084809777191 0.50584722955624239482 0.46578291970160218272 0.38690502792573255864 -0.25933199129045325648 -0.30479388384294087144 0.060787304064227908051 -2.009814301380389967;4.832747757181962811 -1.1414570763820504062 4.1889776917661416533 4.8802900728267317731 -6.3748292309985234994 -0.52874553772015242536 -1.4461063927663826423 0.35878007482503565528 -1.8077951116438397694 1.0658568729717765589 0.47608288584203711791 1.7201898523182750367 3.078815230046301199 1.3649419932295421276 -1.3907666094923429867 -2.4626906609533434356 -1.9152635205390933226 0.968301776420041449 -5.8405723846862604987 2.1791618261745382412;5.4364918435122477902 2.6651050332856938141 0.36561706318328524024 2.6732731809509315823 -2.5802216588542736808 1.5876047162146178504 -0.14381498164721831512 0.22629104687383450045 0.33598954829405136557 2.7571508460025508924 0.63357056490199303855 -3.9069910786008641423 1.3452568879975934646 -0.47164499268545306832 -0.044666666505220678496 -2.4523124732731513831 1.8530573337260474176 -0.58638131711295937709 -0.15851309860080148306 0.35334526264644239291;3.189236614568649486 0.39701176041928387672 -1.256186882916767944 -0.056850125497354235538 -0.014127169239365857181 -0.10663672267924113879 1.682403999035339881 4.967392720154414576 1.3471672141185793148 -0.016828436739399921934 1.2069292171236585265 -2.4543957912104779062 -0.87167979753308333368 0.22288822675744474067 -3.0579679717051355681 2.5709371672559009347 0.74615811231846884688 0.31023114889150282814 3.5555308457873908701 -5.5089772938720500406;-0.44977776784847678382 -0.16144573641378062723 1.7136426549528058771 0.96429479046684563048 2.838117453118936151 -0.57594753110249741201 -0.019356829010931081436 0.47781955420259147882 -0.72500609942277638442 0.16427612173044270349 0.11677126944335636249 2.0642680250954725807 -0.79313037806417507891 -0.084166107690351474324 -1.0108294246028188823 -0.54655481397677918576 1.0948712734319099305 0.75012143411521736702 0.28132100612533567086 0.0010800334182233511243;0.89337617025296267581 -2.0044828990800453994 -0.55563139057481714111 0.091139418064332622382 4.281383499222055633 -1.5681959091044554988 -1.3688477284278242063 3.6219694198526322104 -0.42452254149147733431 0.13762846047028789997 0.10436351391555191703 1.6379340696585955595 -3.0040578050749751071 1.7990970399346564168 -1.4198463009259796319 -5.1432761904605843739 2.6703742984084226642 -0.79926658088447732897 -1.0138959470455712886 1.5946022987733792231;-1.1442543600887580268 4.0820134787759885242 0.72084027441198605946 0.22799014293632841044 -0.17006263868854687438 -0.804214337407713864 -2.895017804058838351 -3.8279560150340850022 0.021472241949475518591 -1.0216591699168520169 0.15708204896390190464 -0.94496128334619211575 1.6501831939679991734 0.56965632925072728909 1.4867152900239442026 -3.8651090281700617446 -1.6694076538700677315 -1.7943391351405724166 0.89104934268356328353 -0.52609530653721403581;0.3558676411666663042 0.37360668317712553144 0.24871057822617048672 -0.11834594865110435735 -0.93131918096240184912 -1.4183649442270849228 -2.4075382627948833658 -0.95087638270364371884 -0.08966768369628723423 -0.0042516964742574389971 0.12728578427598366551 -1.1728594095160109756 1.7150843045295549594 -0.45828469982862057863 0.30220290460074761274 0.22665909752189850046 -2.8396049260395859193 -0.82265060061367001332 0.6091976567334458359 0.31856324458958634738;1.5930103150194379058 -2.0016307445255394626 0.77782313254101109745 0.79709645383129934526 -0.11108827704034564265 -0.59404132885500449124 1.2637621733338213481 -0.68194805998137153491 -1.3817817369020937157 -0.90082711621730815477 -1.225257029926279051 0.065262512298055283533 1.5869443927767785674 0.0021942907000693546993 0.6656530833764829902 -0.10068728343710486861 -2.8494832254327739918 1.9399425768399454206 -1.4491414608356942839 4.5205588786866570672;0.22960813481737660235 -0.93391784467176086615 -1.3523415426420342111 -2.6528330023561808026 -1.0217603220011148846 0.031185717523153761582 -0.53091959347109063394 -2.4327242178396448757 0.99483323539690082793 -0.0042880020866885746808 0.26509092715953835873 -0.38324196881930489011 0.81378753763494005025 0.79908170958883306678 0.97727188583571633629 -1.203651171258632413 1.8906810194821388471 -0.35207003623485660926 0.033543833527126587501 1.2284280907182907328;0.25157753760533257958 1.96769571659386866 -0.28860458800799121404 -0.9116959026937552224 -0.11648781959057757929 1.8422205792453913986 0.50368701487973466246 -3.1987700235421652195 0.30929427899703809679 -0.90994176187683994961 0.60018385137740437596 -0.79990855495990476065 0.6785013547825075042 0.0041231388980674512842 0.46402825745391712564 -1.4661644873012018575 -2.531038369872642857 -2.0429309261826906763 1.0042460509962698456 0.073465089268680533463;0.5276149947187133149 -0.051060691219644752104 -1.0371730580070135375 -0.60582739246411665412 -0.33412503090829653862 -0.20378956005285298048 0.30643348427640126896 0.34299399562281546183 0.023719992440763750657 0.13560979448468488129 0.088978332337299154142 -0.23217597425435781977 -0.31845838538540377494 0.028394568641589928992 -0.26419280111902060382 1.3210487561728432304 0.70269569570945156212 0.31071866387338120674 -0.12057998333930569634 -0.13291865547872172559;-0.38248707718833263591 -2.4535177013857274453 0.9763284890705941077 1.3619457348300882948 0.8719047066366241161 -0.032660770928246950218 0.11802631087723540471 -0.31321661221444885292 -0.41318495018650330808 -1.4676257615474483931 -0.076888682284142181866 2.0147898383934146338 -1.5195294833308854443 1.2411719837594847871 0.38071807673532698235 -0.4739559354835967131 -1.9664090701088372537 0.57672971093965541556 0.37174249803048131646 -0.48282754641051339739;2.0095046445688407033 1.188212463343703007 -1.6765417003390488127 0.98884765679543429329 -5.4461515713148909157 1.7869644328927907218 0.56534772085231532746 -1.3348902634013404267 2.8195998020616417357 -2.5061021375828387292 -0.39002200862749053512 -3.790903061422406406 1.77031171701320722 0.49248191123758350285 1.0070340408609077532 2.227314606759847937 -5.0781221564645191435 -1.6172408671373610378 1.7395437945788989609 -3.0692062910575450552;-0.73040842155388308043 4.1541592232043766941 0.85105181330193657718 0.64025603542879760965 0.0025403309716210188164 0.57737801186932757869 0.49464043011063885125 -0.47897455685439666029 0.37874416664654497744 -0.70261920308995784445 0.2525517933467888998 -0.64925437777625127911 0.14031838434853199926 0.35356242866132936431 -0.58581219163270492611 -1.4079053348273820045 -1.367044685543990612 -0.21910958216052811576 0.15957652869100397153 0.027291835627823585186;-0.27812389852965774262 -1.281623851407095227 -0.10149471634736688397 0.46880175213494623687 0.65458139445022778258 -0.2136833894669736833 1.0365100508998792428 2.2676499082986896205 -0.072236533767584001908 0.529984330922864455 -0.34794072205810377962 1.0370829117827338184 -0.96306775367534180887 0.27620747548914653668 -1.1074565079201041939 0.56621754146346037206 2.8329935604527269888 1.4192508940363088854 -0.76139518409767770191 -0.29053493388677797959;-0.062724774066215210899 -4.3051244510797843645 -1.34600666055069218 0.25299435165775802092 0.06424439868132104936 -0.049177472670165540969 0.10558118197529903215 1.5219711983630532792 0.26442469871570811746 0.16036232012094231436 0.061462470341170354071 -1.1671944308813197999 -0.37746569970921722836 0.040543686645809880187 -0.31827234473313581464 2.1979355484720253244 0.083177489895834233469 0.24307808964200974811 -0.29702958894222930564 -0.64082020355505120435;1.5234801648205702485 -1.0660987909151475872 -0.48250555431583225241 -2.1504354115981851869 -1.7504288605814795066 0.14379798766567761237 -0.24659509094830578402 -2.0551738667215251333 -0.50460673216547224929 -0.2021299539701100767 -0.16517514581604897383 0.45626623239846042512 1.0617970913110528208 0.94339203620766354241 1.1460680962783471593 2.9433691388222982255 0.56090673631493614959 1.9841632570372438327 1.6351675985462754692 0.45444118691376744756;0.84965527230653548063 0.14779438973454608885 -1.39555624344285234 -2.5079145544884178243 -1.0573540080676202546 -0.1467384122028243254 -0.87025062361481053674 -0.78059965566599653908 0.63508898748307007764 -0.078499986729821655262 -0.35558035853981712071 0.75114209726818603752 0.38955374239728296493 0.14569356749257064698 0.89916225228524981894 -0.19843455383382610502 1.109862229560621083 0.22197262936262279753 -0.69897586628341068504 1.2132366955918161278];

% Layer 3
b3 = -1.6505169502888334954;
LW3_2 = [1.0027746886270341165 -0.14892713899698978297 -1.8831243484880397787 0.093002102933189778611 -0.11623804833481637955 -0.50498747102500129991 0.19632444737517817934 -0.49758789595577396225 -3.4087963847186362187 0.14436705134337671219 0.25891162482333601735 -3.4307405294047619293 1.2204996035661268561 0.21799045669041194895 0.27182959422488511825 0.50912279287736839084 -6.655115530899268883 0.47468972014473820309 -0.21208549869630932694 -0.50456983411941114248];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
