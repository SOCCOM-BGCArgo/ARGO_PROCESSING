function [Y,Xf,Af] = ESPER_DIC_15_Other_1(X,~,~)
%ESPER_DIC_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:15.
% 
% [Y] = ESPER_DIC_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-133.803853032615];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.2144612889682173673;0.23619579453121281043;-1.173957124552590825;-0.25560037502495891459;-6.9055020712468815347;-0.77429483054410030984;-0.31492576556793500098;-0.76461058392913616721;3.2263809373126073332;-25.601032566262478696;3.5013378433101607357;2.2518473245640273639;-2.8334859365846791768;-1.8521887414406195127;-1.6450950518745581785;0.99838731257141055675;0.066483358297638434076;-0.20283091691798249556;-1.0680635764546910771;1.9345677678040789083;-0.30917686070628680461;0.85595818310223492631;-0.47638387240896057362;-0.86751925407329799622;-0.88366746698823983586;1.4684754566574822476;-3.5015836489510041574;-1.771636891946017478;1.2834366734112159225;1.1609679702142197133;-1.0964739837975541192;0.26510491129387858678;4.6768783210787789884;5.6355455146245096998;0.77954592497262220618;-2.4803407935008450202;-2.7746009210166535652;1.8706295986620331551;4.3868342694523274616;0.9776558259377140514];
IW1_1 = [-0.25227762974898848558 -9.8613414524924731808 -2.9168628478223292966 -1.7016473672327128153 -6.1248857255335984462 3.6357140651855401892;-1.0082005985757416244 -2.3342619595979714475 1.9532042134654172827 -0.26752356442708052908 -1.0159030147298073743 2.5149579738961991282;0.26807452972749568065 0.089728775969199869866 1.6707993195419339472 -0.90170242993423754818 -0.79928975375934041558 -0.70127582058950577171;0.13044562677966003994 -0.21784068842412973588 2.7939775855471502553 -1.2001358784906519528 -1.2154022890530000733 -0.34221098064162908114;-4.6214708275054423581 -0.024540605976310032876 -6.3820214428703971876 -0.87752067510921460958 0.95539039458460128795 -2.1890763714939645013;-3.9267438454749945542 3.8147141275569720342 -4.3929822620329668226 -1.4295026862883233321 -3.197723220905959618 -1.8031798339783524643;0.55418204419856864629 -1.1354858851997966518 -0.49742532849864518063 -1.6831130569010903653 7.1553256308326655954 -1.377366165918134433;0.12872773206879187247 -0.18453318921529668351 2.2575981250202579176 -0.94784608768989986327 -1.3152272896664574109 -0.26518271816082056302;0.64201650817020627926 -0.89803518094019851858 -1.1316591850077555303 0.12894250169122684069 3.3463332178831279862 -4.1888459201640122487;-0.31533803410010102786 1.0909081798150277454 1.7120880596721046452 -22.656134391286276042 -1.2580583024497720146 -0.54791734440608208523;0.14076727295786908845 0.46771610763927579102 -4.0259882279275762684 4.6227485223739277487 1.1141346296479530675 2.2154540284568686737;0.3323426718189170237 -0.11921899731083589191 -1.9365212969041096791 2.5652793225288714751 -2.6874643727733595888 2.5866083544850781983;-4.7390487674030090659 1.0561522506716747305 -5.2422987192160288572 -0.10460955374564752385 9.0183786104908350012 0.80896024259731180717;0.72235781417322397768 0.42886007689673533161 -0.16061641237198748255 -0.90805490081393558377 2.4258184926627124334 -0.22670340357218435323;0.96904005344970722824 0.93614261325811543024 1.276146839285077661 -0.99598451322159364807 -1.0462839009106317256 -0.18772343937994742658;3.4223223782852492114 1.642683045953208909 4.6583534040922236485 -0.34484512055433924615 0.90670753597796105439 1.4264337809235601018;-0.37961531352978178377 0.094673086098949449374 1.3657702092157293361 -2.1586864008382686819 2.7399496280028756701 -2.0712316065259135378;1.6164201253270733538 -2.5727234251326982495 -2.6911110775376601012 0.8952244684297255839 -4.5427065172163443307 2.9983812176216457779;-0.14870859489013182886 0.090492608212582675842 0.59621179647539046531 -1.6061045587952094138 4.909194181553687919 -1.0199383348408115335;-2.327678970582838236 -2.5869256758091818682 9.7899502844566370641 -3.7736761719176472596 12.765211811708919498 -3.6119721381248002245;0.051057422960194297212 -0.16958917405683623936 2.4034568079191509504 -0.32411780349584484728 5.2977728900328351358 -2.5687224796546836991;-0.52618924546661927089 0.28150732805402356451 2.832255666801805738 1.5842232996255320998 2.243240187107420347 0.86345992278923255903;-1.3701539027542302129 0.21296235696955828631 1.77979153408430113 -0.33433555716808305291 3.3463734412625485426 -3.064124994350138742;0.47424662981761966929 -0.25916842666622624813 -2.7580520424692198667 -1.5517959761024542331 -2.0174304311703901149 -0.89781153194724350186;-0.5898140170716406061 0.52599849503971451981 0.281084109406705418 0.12021003425361388717 1.3852782909321739169 -2.6160804747159045469;0.31309928290555077979 0.51107781371013483174 -3.5704416842729598258 0.37727461564618319789 1.2980449532172668725 1.1323756402785098985;-4.3562714722167914516 1.5823540245502982771 -9.6796218415518673339 -0.59237630436409849377 -3.6149479433003217643 0.87423217816894149834;0.04136134456727828812 -0.0016310520361834323581 -2.6128410499602314765 -0.31333862308485177506 -1.4318105598314290194 1.2656706169296456643;2.1038988236827558254 -0.27020770577511993293 -1.8550142386927055416 0.32232248160817594806 -5.0000982303049319455 3.2317113507202650524;8.6152842053285230151 4.8345082308098472623 6.8602395949136898423 0.7454006251944494954 -6.5090148688545088618 7.9505812344063668817;0.15135248276810264745 -0.030289100925745552489 -0.61392719343165269574 -0.96962021478447291134 -0.63183541470152693176 0.4103065561900494651;-0.98127698332833235284 -2.2611270147948636655 1.9146808156293670944 -0.26965767581636035377 -1.1138799646398476195 2.4390095497021690996;0.018983575175866913842 -0.10854988216448413496 2.9317389843095491564 -1.3400529056809271644 -6.8369325566794971749 -2.4736694895975581687;3.8707482006231912486 -3.9741626160962120196 -4.8177705121116245479 1.6725260820864413791 -2.9846923594238603528 0.47322198049480096449;0.64919472169190939326 -0.62512242735990652953 -0.36533227403438239822 -0.23629936696388992301 -1.2593433373079347959 2.8514828354655086251;0.69239002944451077948 -0.84488561556763697169 5.9044932536263869949 -3.8677026160456424719 7.8503137951092503144 -4.8738660150250607828;-11.059976434467301942 2.7470164035810964442 -9.6894698823533840226 -0.30587324378659230817 9.3690583996860592464 0.036648601902442054512;-0.79308784107102237027 -0.46143067999614645336 0.10791273473883981893 0.8945511292701241457 -2.4232412557562037492 0.20451823561429102738;8.2999020476997262818 0.1051678707716988681 3.7073200799687238138 0.39046043496683341401 9.4493442166472263466 1.7862727249698295839;-0.13894803186897020097 0.20285092725766143418 -2.5845678267875604739 1.1330045715177197163 1.5245517037899964929 0.26253556461721455628];

% Layer 2
b2 = -0.40157832773202234433;
LW2_1 = [-0.021417793882459550819 -1.4580149235695327725 -1.3459455309340180307 -1.6278375881929081359 -0.02640099652993338139 -0.02336475146772008793 -0.086577671706384917716 11.67030174095945938 -0.086804778088444140005 -0.43189175608502033965 0.18162567996722653318 -0.21535854115297933808 0.043879394762896185844 2.9162068581936240186 0.33416597983798962401 0.045880379081958147514 -0.14678855281800864963 0.03493058892690724393 0.41062559126640296725 -0.017397982808942061977 -0.25773517322397171414 -1.6564866691314659164 -0.15204900063261339582 -1.8699904187903564345 -0.92312539717264385786 0.28892685924726141389 -0.028542662622211875667 0.56190333233847145067 -0.11669573976709803065 -0.017463306664281457586 -0.90444444904694365484 1.5260972358967650475 0.23876262819649893276 0.030858819048163357857 -0.73893495371383066672 0.060409666873663954434 -0.028978083851680252331 2.7673399793711248584 -0.029272453988205666964 8.6358965065580726161];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
