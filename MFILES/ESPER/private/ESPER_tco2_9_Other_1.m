function [Y,Xf,Af] = ESPER_tco2_9_Other_1(X,~,~)
%ESPER_TCO2_9_OTHER_1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:56.
% 
% [Y] = ESPER_tco2_9_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-0.9;-133.803853032615;-0.1386];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0419287211740042;0.00432440760873659;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.92592239555633338;2.963450791198857;0.26745266276913437;0.024431313589340687;-2.0503977800197757;-1.1124231168479191;-3.1560632623422182;1.7529523924778618;0.70403995565285593;-1.7444088728573979;0.70696605434492488;-0.96711671393298526;0.97610157551655119;0.066582948832931144;-1.5025685847808821;-0.54923566786407085;-0.041736769272355215;0.34588454056795248;1.7930073586951629;0.26397814086197924;-1.4777881854117778;1.4817479381344798;0.11958562292616173;0.17609129174412394;-0.95913910937921332;0.52005247136747279;0.020392566128816764;4.9037242513796553;0.57038739147701378;4.7630492122167611;-0.16261677463911983;-4.0866324326393881;0.16600715356383508;0.048040146257779942;5.4311361422370465;-4.3172540151068368;-1.4989273534009451;-8.232340752946687;-2.8525904904816635;-0.012982359516719675];
IW1_1 = [-0.23880963719058002 0.073395293205312115 -0.24885411786618919 -0.40975094062875372 -4.9214026935807782 2.9827326806812628 -3.4654021596752678 2.8112074068277546;0.31943222581077446 -0.50759533902620391 2.3821034540137127 0.34261319270464213 1.725366259401806 1.786579629793364 -0.26283676366269343 0.75645626482709871;1.1975474399548791 -0.19163189677032105 3.9535090026141511 0.19785028753605588 -6.4237039941899408 0.68344028606752438 -0.58588218982756435 -0.5626458033677405;0.021090522966469648 0.15862739288691688 -0.57213124175118402 0.3356629340712135 0.20545179830958801 -0.0537443457868646 1.0478893898774455 -0.18483984109950941;0.42136303213601173 0.1268128848754172 1.5092070747082287 0.068217880588063204 1.7005810668354526 2.8289762047476854 -1.2069785049364987 -0.12837845047964505;0.14838671900900119 0.55123937780980836 -0.72430852175623661 -0.20971883351071172 1.0288269258336726 -0.45879592302801775 0.30946790138007996 -0.35197728308249265;1.3481958701035239 0.2369890809172806 4.4044680197066937 0.51146138224889759 3.2526067488098591 3.0714980041782831 -1.7360137757650074 -0.73536184211638944;-2.5999331154996561 -1.6077620274241633 -1.4063016525129308 1.3020213875797606 -1.3700198029296675 0.90304885074647201 2.2372590954160168 -0.011989453011625132;-0.28880481188076201 -0.60714085745525637 -0.13260123582187242 -0.5324381923097431 -0.85032529114163768 1.144860069543953 -0.66425083585910771 0.90598126078271479;3.8150910160786884 2.3311241226819606 -1.1211802228887631 -0.6290617778071016 8.3160003883122826 1.077751115307112 1.3398903678891467 -2.4873925839191702;-0.23126532407494862 -0.60801264415985545 -0.20547168880065517 -0.21229999917587419 -0.95823781992199553 0.79194582402891855 -0.12333246625864352 0.59715805047010528;3.4844548372043058 1.4191454563777599 -0.72930423793305399 0.17553756998361011 -2.0064888082024299 4.3352380023902946 0.11807941982416562 -2.1122190178098421;-0.054814351610488192 -0.17943691161992192 -1.8981754107731432 1.5166101025796606 1.6167293264865676 3.6698176616161087 -3.700007820248759 -1.5344145434956891;0.0033935522606756106 0.19128377756118806 -0.87621136631046426 0.54963955030324341 -0.17614724465039541 -0.11026944272023219 1.5977706225227271 -0.28167746220070078;0.0094584018123986882 -0.21255806691870252 0.52565000420357111 0.30232400573958712 0.99719667202184603 3.2864867184445288 1.6674740999591529 -3.5738381160405193;-1.052784958257668 -0.62594251008044532 0.050076640345789993 -0.601270492734433 -0.97958485485236346 -1.6918350476257233 0.89931492179458283 1.5679887725474846;-0.082249984504449272 1.3512713324777701 -1.7007000233831935 -3.2365452210593588 -9.9871141441332139 -3.7028683517726799 -0.56359775182944127 5.0954128789142912;-0.30729632933561801 0.61288085052638064 3.3361367025736426 -0.85627115729653869 0.83683638146472972 -0.87091795479491307 1.1187934399734676 2.0417439866989664;-1.2068817141036661 -2.5826093152913843 1.1973337218829669 0.52787953850609837 3.5455395522614488 0.73631915120729829 -2.8551348713866553 0.33048946021425274;2.4063625307362622 -0.47537812695161785 3.1259544311976724 -0.8264801121391141 -3.4558711958865707 -5.2701463912209281 2.8606262902394723 2.7808414859616719;0.29435829398019209 0.20463541372148086 1.7162218946708068 -0.63387313509492083 -1.0600689861080863 -0.040308900763293208 0.93289987978705979 0.84807553953722914;-0.17349857669995009 -0.29233161074083702 0.30389400372784886 -0.96516277167259323 -2.4427593089063633 0.91260682515444624 -1.4595103579976096 1.8873381415882409;-0.016595565454268137 0.41322207288260071 -1.4439862174855815 -0.027993125414379209 1.4233620292004867 -0.73970552572505976 0.68520445805357222 -0.075887932051055165;-0.23886382708766504 0.66029825373908435 3.4613394648992388 -0.6850566795466021 1.0915878674118322 -0.64267082959033994 1.2140789503173548 1.7900967985650231;0.13832739982645947 0.46626653271667096 -0.4554771316825405 -0.16653757988962184 1.0623827490238806 -0.41281350513908099 0.13887687069082275 -0.39484191211234909;-0.41871385512222037 1.3939728403662361 -3.448126168052112 1.0452555691129686 -2.082729051641838 -1.0310508014588693 2.4714561952769176 -0.25499284578054077;-0.0011676705795291833 -0.21612024560345516 0.24510118052637869 1.1201704242422099 1.3263198006823154 1.7776329480210162 1.4883595394902893 -2.0867065702100627;1.45711213613012 0.8033569212622349 0.49357470116342722 -0.93053293659737213 6.9030133530275313 3.3308886619810361 -0.85740210943161932 3.8141723283724609;1.0274323373405267 2.3119308598748378 2.1752946171002074 1.3490375606141232 -0.7885699935220114 5.8571488438087842 -2.962639404810675 -1.6450770449661896;-0.63483337655995764 0.34612537948307825 -1.3918359662659037 2.6108784710644595 0.32378245490591062 -4.6097095165846929 1.3799660062433692 -0.60186116195149064;-3.032736383990609 0.91613359679495687 -5.3840367134674958 2.5349983170373878 3.4767722537130474 -0.70940689771226073 4.2482356713964675 -1.1541175426887116;-0.65960923073070599 -0.30148365690370882 0.25405398390534806 1.3319215107386779 -0.4916289261094775 -5.6486172317000518 7.2217071334110221 -1.7594166380397793;-1.0608340821780513 0.6857379296523195 -1.6725662305123679 -1.6674891232353033 5.067784764673843 -0.89598411850848436 -2.2918696291965905 -0.24178656237773133;-0.19586528696938518 0.73497258981717373 3.7313193039486645 -0.54508438884640964 1.3073728867527152 -0.49251805605595522 1.3732914181929605 1.6003365453367189;6.930812346681444 -2.9837490035550109 -0.089954635074110889 -0.20615058398059377 4.4231745794723061 4.0951074001423784 6.5267403346815307 5.650412707285307;-2.4327825681870361 -1.3729472951318518 -0.034521926467106751 0.78160181888069691 5.5925274621564336 2.6185304022804172 -1.1260890520356448 0.71165175495146205;-0.2516666881090513 0.1737075507209046 0.9758134192420953 -0.55015997528503557 -3.7241136176936651 -0.52988923198079529 1.5580069564562418 0.68754295634330387;-0.0016549819965339752 0.33634618966709495 1.7991062551874453 -6.4276387474028649 1.856875903248554 -3.8562321184842077 3.6642394684818589 0.93988931853867874;-0.27946685621887568 0.43673623718397264 -2.1336300354825428 -0.52656579713250506 -1.5452346007366979 -1.7534312503211114 0.26861159814256741 -0.64448851134547924;0.36758588765524275 0.30079251083123937 -2.1040074137478113 0.18369690046610354 1.7433524122996624 -1.1988088142210784 1.3223591755647957 0.24660135768557209];

% Layer 2
b2 = 0.14964073442219972;
LW2_1 = [0.067443717820104818 -1.4109242010154022 -0.11994552577444864 2.8774284243707724 -0.33039727993070739 -2.9816345805403901 0.10517442421687678 0.02847527027116015 -1.1217405638054136 0.017625495526556966 1.5986785401080463 -0.026293130741288907 0.12004673245744234 -1.419706883623056 0.11057320464554066 0.098275209487341558 -0.038528501262112998 -1.3339712581988807 -0.039506595647888762 0.045964865452442799 0.43907118453775074 0.40500156302438495 -1.0026196958778946 2.7497889508004643 3.9176083440519571 0.095144037497103651 -0.35839381504587531 0.061723934351894411 -0.014801191012646819 -0.073184310986247489 0.04139092483348223 0.095774526357205583 0.052669270935448417 -1.3516245875036181 -0.0038354822242034794 -0.039012613931246005 -0.29444949943743609 -0.10361537458257281 -1.659160206128065 0.2448605428130049];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
