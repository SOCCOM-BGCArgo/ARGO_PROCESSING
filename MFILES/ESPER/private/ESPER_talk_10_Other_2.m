function [Y,Xf,Af] = ESPER_talk_10_Other_2(X,~,~)
%ESPER_TALK_10_OTHER_2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2021 17:03:48.
% 
% [Y] = ESPER_talk_10_Other_2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.50065719994155355;-2.4811424508270483;1.9843014596633515;-1.4193716361007103;-0.30437785609193202;-2.6082163584402562;1.0096926997254227;-0.25852885012301785;-0.49078084826691343;-0.14964230278765564;0.59220356722889977;-0.49680445369889947;-1.5897046278576965;-0.84187898705221098;0.083969179994192858;-0.028013495705012801;0.31880842519265989;-0.2245959026216105;-0.45930177493106267;0.65659986609338539];
IW1_1 = [0.4784479570346743 -0.53462181492880845 -1.105799095162542 0.40109566933771645 -0.75975769430781581 0.42232708012645837 -0.87317483109828786;1.707406240682249 1.1095356791131603 2.3517775832875958 0.32256595558365675 0.66325317224365643 -1.532781799594003 -0.99900866297565483;-0.64133799446140394 3.2672949411917598 -0.60043490139605471 -0.82085867299073234 -0.046147666720289263 1.0006176763759176 -0.57951050750263899;1.418934634729303 -0.086268976261750674 2.1172215582612588 0.66319771214201173 1.2444504974497341 -1.0570845435927427 -1.2396508761410248;0.43951510157573259 -0.41405564547554041 0.75604392380938501 -0.38758419880145784 6.323228628128871 -1.3111693883082922 -1.4910949028502638;1.9899536799373716 1.9675679678457405 2.8619111806345412 0.341267402500603 1.3030951398650994 -1.7783629723724879 -0.27212488749315;-0.072791896383499172 0.16502724895417561 0.4299817852553901 0.86150785001475061 -1.5443981357934542 0.79155540978314753 0.83077058081008703;-0.10370575572181361 0.0092195154049666585 -1.4764361444519185 0.81605193334947979 -1.2546889668617749 -0.82860491522697877 0.59993112062669651;0.22118177743438278 -0.13036178195932727 0.0097785216868341296 -0.0093493115835187289 1.2180201874426921 -0.075419691103321196 0.45829054972789257;0.91291664768051173 -0.18017468511658782 -0.40948712836727724 -0.50355406216326337 -0.45457366867426729 -0.0962256161547939 0.16926259479948463;0.48668733142928855 1.2830178416888149 -2.2780171145909032 0.82393237096563177 -0.78213238651344485 0.34242073100803383 -1.026765126074402;0.21234985360057046 -0.046621398055072399 -0.44647518252972346 -0.89452091047299687 1.4920101190030088 1.097744198876345 -0.34008758176141396;0.16167522557145028 -0.17689864723893639 -3.2446234754218479 0.82039029722284085 0.44349191945361244 -0.059773607335538541 -1.5107049852848493;-1.1114200937106693 -0.055767950281001601 -0.84685257938041281 -0.62383997405771108 0.36747237155993223 1.0378194019689204 -0.41282423716719635;0.64275221433713492 -0.24053021735595534 -0.26801371471999047 -0.71825967969620719 -0.86989493373098747 -0.28044793811399465 0.26237307289732159;0.60733454690547983 -0.27041482558247304 -0.070960721928775741 -0.57875972691665589 -0.32382644762265783 -0.057630907774142141 0.35880700435523605;0.2439148802890517 -0.47555271142346167 -1.244072631827712 0.37097837334505596 1.8050182576316138 -0.68165897822149069 -0.62325656069273361;-0.28005488736458095 -0.30665095673836879 -1.7282581287029546 -1.0099501675194389 -7.4188156514351311 1.464705333966728 2.2942063306795104;-0.1428136089991181 0.56239268215864513 0.27645577693278078 0.50343913910205174 -3.6455653289593726 -1.6625974949375122 2.6448067154158728;-0.9097620859271498 -0.24853278511381552 0.83981907835669278 -0.09843054016621855 -0.44263190129201613 -0.40896175146900271 0.32612067355183844];

% Layer 2
b2 = [0.21663503419261237;0.012218958499794689;-4.4887284253051929;-1.8169132974564699;6.3701423881023977;0.8153186181698957;-2.1206151178884203;0.32039267721431253;1.987992670653298;-1.8608903385366242;-1.3958910356788694;-0.60490574932646413;-1.0026954104760148;1.8998768522928093;0.39346534010530493;-0.25390580837661375;0.52067789187749525;1.1420047346253754;0.7830882636599209;-1.8127410000235447];
LW2_1 = [0.92623621713080329 0.50184237711394875 -0.55297324069906406 0.050484654585098612 -0.1786641466859766 -0.29845179483886797 0.11649428346075144 -0.39830351779830453 1.0585830535614495 -0.23582273327707104 -0.25245116518823768 0.33614897550990769 -0.3724572957253221 -0.57462111802907667 0.087304415771691332 -2.000253601705829 -1.6153769329548879 0.49029949377658694 -0.46483469099939079 -0.78521346844151174;0.38031865554299654 0.2030916469081592 -0.040359876990395636 0.013396871494267 -1.2496058535350232 -0.72323884826056772 -0.69738942530445913 -1.3821663465335634 1.1715412855511222 2.7222662991585023 -0.43081883028023499 0.25860420426221814 -0.37861888380573516 -0.27471275064401668 -0.29536052599353368 -2.19199168600659 0.82917870730429244 -0.98433477586148532 0.83324694571323865 1.5962684098976536;0.088246325617508919 1.1542949383695478 -0.04064896726374196 0.077268271780134998 -0.26766065383831456 -1.4276574095606036 0.042452712071311967 -0.48525417768265061 0.13477242866291919 1.1093586868701775 -0.41367886268499687 0.24501854353976335 -0.15130146229766989 -1.2259853446942959 0.81374068404349864 -4.8128547622854239 -0.085211989274459443 0.50756459560710432 -4.4970597415175755 -1.8197339579648013;2.619581346196588 0.92603645588080863 -3.6044365902339126 -0.16174109465493594 0.16719867679792647 -1.96814942541086 -0.89185043287652688 -4.6395962520362186 0.62756235191483223 -1.9099054731684315 -1.3157944163789941 -3.302671610823944 -0.5643345905232785 -1.0299486064331207 1.3537559601276219 1.3851412063712334 -1.0424369554453257 -0.25876748049242687 -1.4483713047314137 2.5261529713457294;0.79012456876307435 2.1454843240946349 -4.2427724453147926 -0.21674801428644269 -0.93076028420832901 -2.8112609516784244 -1.1592435945785786 0.28531632541908752 6.3617269164736863 2.4432458800770678 0.44591060248242448 0.39277285128991341 -1.8304733681787928 0.23751967513344818 1.7317532329544545 -3.1207447690184567 0.68595831660353723 -1.116700595280157 -1.2533556014515905 1.9761088627429959;-1.5017334512872256 3.2532450834121347 -0.94453994605154257 -3.2034470361479617 -0.033840193960715567 -2.2810053113108402 0.25015375011692609 0.54967743634317556 -0.26212915525299441 -6.5266733229152889 0.44686453380638852 0.88859569450276132 -0.46469809072358226 -2.2600604403557911 -1.5345233426326659 6.5299508963076569 2.2246126011265694 0.56329700364424917 0.32671193872725285 -2.2010237686011056;0.11758353088348948 -0.29461125700348245 1.1020507374305943 2.8567366316298397 0.39523480702398472 -1.244674977850917 1.0238676183673912 -0.61678212273297472 1.0521770754719459 -0.51684713038449637 1.5884727982771354 1.1725161431732714 0.092074619525772367 1.0027518201030636 2.9862168835665051 -0.48548759355097915 2.2928367722785068 -0.82992909730341791 2.1772225905794409 1.9443582571085647;-1.457947979348118 -2.9361981814263731 0.032577518593777194 -2.040865070161936 2.138244843897279 3.1783232672253758 2.6167997801434546 4.4641482724740138 -1.1375762785257058 -0.52520073214062579 0.32189924822125154 -0.27061106032495641 0.082798317689040848 -0.95555894669723396 0.91084434037012296 -1.2636435616460022 1.9296908558943591 1.9482574278449551 -2.4483386641042109 0.17551670527081051;-2.1334943090790337 -2.6639829805035773 0.50500437814883892 1.8490790242554551 1.1815315066145429 0.8005643812049611 -0.14434279682471693 1.966951352426872 -3.6711832317592656 -1.9611884420126635 -0.65155291769615153 0.18264212335084998 0.8578491541234966 -1.2093477505635006 2.6119688628698507 -1.0471053275407745 -0.3816586834396965 1.9933411065493996 0.48048553480920636 -1.3719691042933084;0.64487414252159014 2.421553521548681 -0.44799491442649791 -0.80041117377072935 -0.1120024861499882 -1.1914963551847433 1.2176663140587414 -2.3143822992051484 -1.1472012235942572 -0.86930854648729339 0.022531591352596601 -0.57815267066903397 0.0058328908384773998 -0.37997085534678465 -0.40516825686745045 -0.25662282541361159 -0.48986142825905138 0.23810539356275087 0.0072549687050183463 -0.61327612854508928;-0.32183008848579353 3.8221652166171958 -0.20087229242640142 -2.0109775090095954 0.47531077152537482 -1.0962354137337642 0.75379448721688513 -0.54543790135760917 -0.86520649983135978 -0.37256504606628504 -0.77361511175564668 0.50641829469904664 0.79858563350098422 -0.33819501804969232 -1.4111230683091798 0.35611426499022736 1.2297728486380741 0.94364647360447051 0.89258867604720382 -0.86644874678154726;0.85605256205935865 1.8527423813366359 -0.36691119412227313 -0.51743044615966949 -0.16283826839495241 -0.92250457384791629 0.71648559097333464 -1.5876142394609711 0.5599498558662005 0.13843492434617086 -0.10138998508810999 -0.3397875805821865 -0.079859732543306847 -0.31498857643866357 0.08515145192167245 -1.9193621117042841 -1.0137636285982841 0.28284565545095453 -0.17780432213885033 -0.33904348764641895;0.31949346532931433 -2.5424954074990209 0.527906319524172 1.3475749665284296 -1.1317532843003231 -0.039102852261174312 0.041742405283779385 -1.2851488753252889 -0.50314215235947257 -3.1412245286955698 -0.50659317480683674 1.2027048097927051 0.29780968248146983 -1.1219067429790996 4.0521910975437674 -3.9700568092260293 -0.37629521478823924 1.5027642713744418 -1.3047093567085393 -4.4592507306922613;0.44060789679495777 0.79566214275099478 -0.085046103820842558 -0.61437411380641871 -0.51815415742751225 -0.045481371366869673 -0.98156951012403004 -0.062072089219354087 1.0232197814308444 -0.36018981778764192 -0.14966778918037757 1.075669478368231 -0.24102011624089631 -0.65016969694757631 1.418542380549608 -1.7145859276708673 -0.80350645409513932 -0.35102026605140912 1.1970467197344032 0.32636143921251731;-0.010267407448972844 -0.44586671039580744 -0.52761555961554929 -1.0446770423444267 -1.0035942152650812 0.94288944366459027 -1.0927395232889614 0.87511110697251382 -0.009353640219844285 -0.1353274007363274 -0.065237763642140151 0.39140471560348294 -1.1855419848156541 0.74801543132777004 1.0182721057841293 0.8903448900884412 0.75495089890608857 -0.22131004104999097 0.19823149643648713 0.4761298640288672;0.093144658864612637 0.23962615265726397 -0.035117610484015904 -0.1831687709284241 -0.080770536258603864 -0.08932115962633573 -0.13370052798881288 -0.10281302235369309 -0.18277736746066361 -0.25177332483425219 0.0039713549862489105 0.087171098414352971 -0.093585641663535279 -0.1099161937602345 0.24789890096508108 -0.13283051235243951 -0.043953442317987479 0.022014190456219648 -0.030864259562076109 -0.16829440124255329;0.54605514095192875 0.67519594486099865 0.18479477875298189 0.24679765082413307 0.10613875275821365 -0.2942788171123259 -0.7111053053835793 1.700632976788677 -0.93257107369555092 1.4483899640023774 0.31074392419509383 0.75851992845371818 0.60724861221176174 -0.13071379158430893 -3.0433945258372708 4.4519841666903881 -1.4340433019446888 0.011505688526834056 0.21326451727790444 2.0947192824204586;0.72600532572304188 1.2362817860450264 -0.36652104220107046 -1.3759757353067708 -0.49757893703828282 -1.0422897044171224 -0.87667508168769093 0.52582123370921607 2.1795063630339109 3.5032556704960491 0.26936613380848251 -0.033653294138150838 -0.87783917838237735 -0.7787850312625445 -2.1212196925345688 -3.8422035704801729 0.071105861594583389 0.087805751891642053 -0.78171598524058705 1.3679697192655698;-2.0041814899018093 0.19731136949400677 -1.9108845010051005 -0.032595692702311052 -0.71198755357096788 -0.74465246535104879 -0.74899980209936012 0.37079895051367745 -0.79905759227505724 -2.1438678479123001 -0.54198460121224323 1.3944342606558093 -1.7719141339345847 -1.1284737069461401 0.54021181615051383 1.5990518075364326 1.9989771467685049 0.72812257908476596 -0.15972008033655122 -1.6391431084708772;0.11822616226222649 0.99017125356413149 0.3645896128584436 0.67501303946241464 -0.16541338806825623 -1.242440018353119 0.4081696077158154 1.9970905272846682 1.3143464949101877 0.72190446364943084 0.17280917865197931 -0.73669884413443809 -1.7735795129048391 1.3109615090228386 1.8008254499870087 -0.32138490397165381 -0.49672174343999909 0.074787634681450096 0.084487796806555215 2.6970151876334181];

% Layer 3
b3 = 0.71911426879225426;
LW3_2 = [-0.73169941132547323 -0.22523185391578354 0.18020485331443337 -0.021458540633221442 0.19329635337835982 0.092868210934551138 0.057499255026435832 0.046897451641518102 -0.070947471959365113 -1.2592146695277511 1.2340346714004948 2.1647153420705307 0.049699591690733708 0.60752579559575426 0.1582248167324545 -2.779809724335307 -0.13112202316234994 -0.20013801530113068 0.063947523105387108 -0.29625662045974083];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
