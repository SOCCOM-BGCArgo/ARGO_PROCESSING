function [Y,Xf,Af] = ESPER_silicate_3_Other_1(X,~,~)
%ESPER_SILICATE_3_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:39.
% 
% [Y] = ESPER_silicate_3_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-138.904784718693;-0.9];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.0042772329208737;0.0415843642790311];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.86170276487671226828;-3.0166287303255412411;1.1182713633099270467;-16.892973227651964407;-0.10012272062731812639;-1.6609321565072894256;1.5519111055405725441;2.733922203192638456;8.6262350811013082108;-3.9882238327486256857;-8.6251370499541284431;-8.3160799505052818148;-0.062736230409131829577;-1.6052708906223751573;5.738803803268621273;0.83687577393648260315;3.5783332341104525653;6.5589267680632703517;5.0403124499942579817;-6.8385006753256005751;5.6674733712072402625;10.512238766098001008;0.51782775576917750016;-11.536591991193443363;1.4127721032229516585;0.4915596855975811752;-1.5785556565479370583;1.6689558779679360967;-1.5371264353987896811;-2.9364191593135049452;-6.5791797837120782333;1.0187703257036055948;2.0144205797686183246;2.2909642759437534032;-0.40154238486323223789;2.6082395480798234999;2.6480409699568285831;-2.8401860249870516384;5.7087952487770703414;80.724825112999326393];
IW1_1 = [-0.15234626458759861767 -0.0099075040519852625859 0.30726388734412807269 1.7021591077794113733 5.5714362838752036211 -4.3711176317445659123 1.4846140804896166276 -0.99218793239493241476;-3.0878298926324143636 1.9817931061057043607 -4.297205207576160646 -2.8005671116327301995 0.54354689343097950527 -0.30998736307585206262 -4.0642510592874740993 -2.0966356336269411642;-0.32011371035362595761 -4.3576020738526821674 3.3349889684787115129 1.1837246444976770032 7.5055357703669267622 -10.372634050095623337 2.630689078232709921 -7.2670843909166915608;0.18668190706207113405 -0.34048111749721943209 -2.9058187821481125113 -8.5705434515719698396 -2.4078971430002882315 -9.9162360812250973652 0.72554685728117829235 -4.6986519999924132307;-0.37584617118801305624 0.038899192288880370116 2.5707305798588486745 0.82839355659086832961 4.5954227900567010678 -3.8628824266175376678 4.3425519710465128043 -2.4909438246233275294;-0.061544163998915858704 -0.071735932552961595432 -0.00034965933125917015353 -0.61287537996553653752 0.33329941253369316234 -0.86012702405132068773 -0.098123776197759804418 -0.37368141409924449103;0.8290577287977889398 0.66385741347844839932 -3.0577558385471368396 2.0240595895600823617 5.9814200048852317337 -2.0850326225630286814 2.9106803523887707641 -3.1299549866821112509;0.46266004479953198869 2.255211149020646122 -10.923314890648731179 5.1684688354579373382 -3.3995306980125423735 14.928421489825005608 6.6163982243326167065 -2.7683840286418992527;0.017060960863030785739 -0.12649390657320588871 1.6332521619969833093 0.18221011137224130128 -6.0098347284695057269 10.693596029300399763 0.73727272935210441673 1.9418098486612460629;0.83700739935897283672 -0.38674413003237828601 7.7731263536217412025 -2.6086755797416669722 18.667144145485600859 -13.344321567892649227 -2.2133583662825846439 -0.8441840760355652229;-0.53363226282054510019 5.4715532988583923668 -2.6571435264768359374 0.14479115137973752603 -20.660086645243563197 -6.6153186598647231165 0.44441399587550522998 0.02715455556974472745;-6.28161459521503307 6.7139211905402245151 -1.7499642219819151467 -1.2577183261328437336 -3.1721425983080973054 -1.7912422388874991164 -2.5261013474583537963 3.2907497028489500757;-0.070662344366169874132 -0.0036446037163041880048 -0.15896443425083595091 -0.86068158459424526363 -0.57419072093259770906 1.3654886639735601683 0.31565613961374178187 0.70909287876913906778;-2.0067741823467049045 -0.76836960148148991667 0.64466921208852601133 -4.0032814318030078837 -6.7856350979691466563 -0.49660233681464394095 3.2196991264407723854 -1.214050491948260424;0.10233635090450536598 -0.042257267878326718047 -0.017572030512692130705 -0.058090184175661745136 -4.1813920182091486311 5.2328777446733161227 -2.0373685460018537974 0.7818473914006179859;0.035007630503078077111 0.0013950939583107482746 0.013269939532230755688 -0.60471887333493212768 -0.47651317289695960255 2.4660758816450361053 0.51797139611559583905 0.87870156707287183639;-1.2681459967458248439 -0.58964118532068232614 -3.8637602971785587336 -0.83852326979344860014 -14.6580653211336287 0.71726200770505255111 -9.6145919371342003501 5.4170826573271417814;-0.47431185296047656541 -0.19136073548744392259 3.4288547186763902452 5.2411307587612938619 -16.69592692163098846 8.4781030513947754912 1.1147085676978611968 -2.0257219295925623648;0.56293589545451661049 -1.1538380406198349704 2.7148990519448110703 2.779290406341477393 0.10083620147492435015 2.5695335347083281263 -3.6225323803661022559 0.89633950336037360174;-0.10414851812964266708 0.029010737291181774855 -0.042228726708706733339 -0.34633441522651176037 3.5404331998641205281 -5.5206062100586512642 1.8933228975866898125 -0.71652268249004147371;0.20217755092246628146 -0.080293683118472125582 -0.24462643972237946288 -1.0758426741339366384 -7.05899755803224771 5.9720216621031454451 -3.2851308767098856833 1.3969756353965894213;13.723858569820951203 -14.402051048370564601 2.0505308081538000664 -0.31877253812156119972 36.027930478907506995 -19.665330184113738454 -11.250939045500965463 -1.3249469859006364203;-0.089414505621726189655 -0.17948170934457546855 0.12018698970883526234 0.44639903049562773552 0.060691124647480679255 1.41748775086249168 0.15300873553621835432 0.44094324039349558353;-3.5355355290046870387 -1.1723020758024493837 -3.9328826800061773561 0.83410218708829642065 -18.071052071594589705 -10.772331280360841532 9.6620855473136337821 -8.1550965220680069478;8.3319379555946397886 -1.8989998835864467797 5.5638842230231624342 -5.4948501062371928327 -8.3207132161535444226 -5.6190386867924528858 4.8749916945157218962 -7.2106325683431524709;-0.076095822447350011664 -0.15156799856239272506 0.069014019339215804116 0.2302275679504917627 0.0053145105952515040576 1.2980744126148222595 0.16151172201632055248 0.41943798740894222554;-0.0031438634956046864095 0.084569539851448619072 -0.10774611347198699562 -0.2775600388927870199 0.10715006004184389476 -2.2617734239286941822 -0.35720403077842965978 -0.78583430509107221607;0.10992896387125047908 -0.060752408429778609333 -0.13081903996711299887 0.60808864617290536714 2.1772353247827673783 0.35088781807586022499 -1.6377120625067516091 -0.65304139596857579964;-0.82765283383363141834 -0.66887580046196049022 3.0807772960596562228 -1.9933706321162023567 -6.0080534717769014108 2.1003920090025913758 -2.8849413670265953158 3.1130723968106752686;-0.22793024312070275794 0.22225601698010444274 -0.53995427319423061618 -0.19839939732249278759 2.5025361245453972003 -4.7984203168841785825 0.51513010497497135898 -1.7675610198014379826;50.827087648086433092 31.362888098647811574 13.434886880833357026 -47.394107721268809996 -43.439370147445117709 -6.2982519789132487276 -46.113792931368145389 8.7832779502490740953;0.18433178064609026525 0.025000528154556424243 -1.9701063580868258818 0.45711261901039001998 -3.2967497548821427245 2.6622942850554314198 -3.286412000901386854 1.7478158981295768282;9.348283009277825073 -5.7419417233297851411 12.755038844209259707 2.6051302010127819209 2.8484287771002940737 0.53639117864242924494 -3.5342226590598220248 -4.9829765041506108858;0.20220185879372298832 0.17002676280826670152 -1.7532981472224447028 -2.4541288652112602797 -4.2848579350386533093 2.9507500104370314453 -2.872816843274725862 4.510810452572769691;-0.56347261772934642554 -0.37139355858502692831 0.3588000829221447141 0.32401245988057097991 1.1588570664765363016 -0.96629140677997404918 0.82906500068279886939 -0.65020134187596700936;0.20408818260981781423 -0.19459227095998690715 0.46948439650974749249 -0.03878379399480868378 -2.3584643229805335451 4.501752553187397865 -0.44768077104447578929 1.6620719164953647873;-4.6293620325305946395 5.2236465002816867553 -6.5828252238332911617 3.8681787239744855889 -18.420058549272699366 16.818538337388325488 -1.8224287912099110809 8.2589389639465657922;24.735977656166415528 2.7787241227963379586 -1.0069089411465153017 -2.1108128613295029652 -9.0908769090163605853 -5.2514117727541034242 14.207088950392297022 -11.593021788606487021;4.5030534778645776584 3.1638561273826009135 -7.8024025702124504278 8.0982535928781143042 -12.515336679598398462 -4.6736634151477449706 -6.9174338115012456996 -2.018022714985349797;20.156443000845143843 3.8007847243787100666 1.5442880777526337699 3.209315662217022691 52.549650761978952573 69.070277361765946011 3.1485263870452793178 -25.212211235770016771];

% Layer 2
b2 = -11.051555791090207137;
LW2_1 = [0.2418886396384668791 0.015573056883777422824 0.020705808775873420224 -0.057913556277035316278 -0.12994391567032598234 2.6366469743962190897 3.5673381425852386251 0.014614654706255321079 -0.29109471513885321059 -0.021252622419719764679 0.013512992814119554469 0.016067691836162637659 1.9105558506019024723 -0.027643060331547782832 -13.433563019125712046 -3.033884238833852276 0.034941253042230252523 0.046178161211269115605 0.046101414144287665431 -23.557404924411279978 1.7610881884232216787 -0.009752469169520928266 6.0364369280051306532 0.019057839622839981009 -0.012381757796375484834 -8.5562913044056116973 -4.1869013264634151739 -0.15292649742158295756 3.5530837281328393473 3.7440479628307334892 -0.0043333395037808324426 -0.21437264918989806795 -0.0069483600476911979923 -0.15876227841897477822 -0.28475464930109450901 4.3006492541163439114 -0.019268882187346143137 0.026618435370473203516 0.010477287172902043436 0.0074877348296646271605];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00819772922900357;
y1_step1.xoffset = -2.02;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
