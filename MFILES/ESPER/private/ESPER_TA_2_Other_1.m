function [Y,Xf,Af] = ESPER_TA_2_Other_1(X,~,~)
%ESPER_TA_2_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:00.
% 
% [Y] = ESPER_TA_2_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-2.05132667284751;-0.9;-0.1386];
x1_step1.gain = [1.00000001035699;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0584431850247228;0.0422119037568594;0.00826143816767911];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.1800307485863448242;-1.598628780592462828;6.7152357926050845194;-2.2344774605497685904;-5.7091085958287912661;0.38139558760541525384;0.86202151329507115118;0.38548799486829787853;4.8114607904775086311;-2.3952062494730612663;2.4907816528674784351;-0.28595302456759708054;1.9493256083403398549;0.68283706056157911224;-0.93725387418858674415;0.72472570680743986227;1.9032214844209682791;-0.51541251002403520864;0.16908737816354388328;1.4407584865845779465;-1.0440356723773047687;-2.0233869618304511917;-0.85556112726151378745;0.84816125669411512877;0.50980475654731716162;0.67076833972842297982;-0.41415254306533089146;-0.79128361363218668867;0.28321485153953618319;1.3429706164606098895;5.747848909206677348;-0.18095156465489833919;-1.927821031971590271;-4.5742387695433848194;0.44362672886289217233;0.46903503336835733473;-0.80127672976929442683;-4.2743854390005360244;-0.79341350590754533556;2.2981409653537290261];
IW1_1 = [3.6691388261208417454 2.9984423493575018682 1.0095404537122540933 0.29256223134208431125 1.4876496058530142008 0.098379996024154356404 -1.2812105552948227505 1.4900934616586540837;1.1661886354582586822 -1.0981488666452616787 0.61546079937704090135 0.22030196327571677228 -3.3767381686809709862 0.26980984437821725619 0.18584903263009877605 1.184209998770302974;-3.5694066900070011705 -4.2488802981646811574 -1.850886531330439233 -0.73519444220554541758 1.885787066977272497 0.62767391129290694973 1.0893631632905518281 -0.33307678260389633751;-0.40613626059589663653 0.37938717674659788726 2.2558935140198483893 -0.11946692990571133874 1.6513652335920452341 -1.6397697458769462386 0.52702085990864744325 -1.3096294267773083142;3.4976518665428195654 1.2064932776540184811 -4.6357840647637811315 -0.077785017878540349545 -3.3246315738702754139 -1.718156918449356807 0.48159123494061822912 -0.11045848412690306706;0.20956818270452648445 -0.23710745755768056209 0.48574351299052559439 0.44702506647988715649 2.636192975204047606 0.9254501489710458273 1.205025744348908967 -0.88506721948863997795;-1.5396464865977932401 -0.59441235224767297041 1.4176365472228693587 -0.26212695687496295749 -0.68110011520210844704 2.6698486018672711317 2.4226025415199825552 -0.62740349685715612882;0.054678380026728382046 -0.32198207253490829238 -0.96022938275375124828 0.42884670882796843694 -0.15294958170480699167 -1.6373019789684108982 0.44538206644415634372 -1.3853430418179364381;0.069403455016762857777 0.071495016212403894595 3.0424894637175907697 -0.47403349077014478308 -1.5338253581344192256 -1.7801037805192001517 -0.4077830233462994558 2.519967139648141341;-0.44452351609121537601 -0.23680859780872764997 0.051406684597188612162 -0.040062746723255326931 -1.398019041683710606 -1.4297997529008756867 -0.69912761787873589636 0.35387009530820640046;-0.1650689675056187522 -0.057527736165812227986 1.3414285179886529242 0.012388113890002994122 0.85547155599205049192 2.8686452336600156698 1.9462626849480966218 1.5448529362787364327;0.060250740419522219593 -0.14194179103638748796 -0.1040545660682897916 -0.066590617434972174116 0.13055049313061864447 1.1986932788571411646 0.75720679689991376993 -0.44135145849694623621;0.38485789531760078441 0.29327295861105756591 2.3484270263260302869 -0.50778455516885578902 -4.7421651347734927739 -1.4780732768426605439 -1.3113256229937095831 2.8850714046154029013;0.5070427547179028327 -0.37674437909796176793 -0.5437625765396453259 -0.55974699136467054306 -1.1527600344377029185 -0.94033685129366595401 -0.05492634347569005232 -0.63123108961154883456;-1.207108618419483026 0.27203457478347847776 -1.0005731461989744169 0.57345656707150505227 0.34439972634129589757 -1.4855459537802240266 0.20613084484967580945 -0.087054041821020500258;0.3524137773696423559 -0.4727562362411901753 1.5862255827314932777 -0.22329172930161034216 1.0726735209944919802 -1.1942361033809312243 -0.84897246516336510869 -0.88271704717618726388;-1.7876426823314062187 -0.14370797015007982789 -1.4117415487082169978 -0.59415772926176046997 -0.72814515144366165345 2.8513527761294730212 0.11242531916738993103 0.14597978442007070177;-1.1613315485032975616 0.48213597695566257073 2.3675613446287848696 -1.9092143799292433659 -0.21313141454849701684 -1.3837242581966839872 -0.45941133685717627788 -2.0782071132552628612;0.20583741807180949701 -0.027035371114483008892 0.9071881007543273201 0.41033607731538723762 0.42075486535671957622 -0.2593909662143325523 -0.1257498624423183109 -0.4930293772948915465;-1.2401774786796748717 0.5897804454226092119 -1.3336860555982226195 -0.79975030451977791035 -2.1398599614582045625 1.6844009517910187856 0.40385733288675090824 2.242762333408714337;-1.6006839906218168768 -1.0410734280943445551 -1.0752133096600313689 1.9122523211926580888 0.87185630989052431694 -2.8677408635436587581 1.5550155372334923953 1.1930513403028764063;0.10720064065932644048 0.059547990557732202732 -1.2684855032970809852 0.051402909880494646044 -0.85793200841076200369 -2.6520776645273622663 -1.9109249177857146051 -1.1524033048630559772;0.34687144695762506252 0.60445748130350518412 2.7937161997622013132 -0.51354205007138686856 0.95746607894452184784 -2.0063932833839519532 -0.18840311231371181799 1.3917184837932865538;0.1992776534590940396 -1.1736859043675793579 0.55431344138795024534 -0.1764673490700136016 -0.74265984516545724414 1.2952820643794358269 1.4410506834848335611 0.063883237003954415623;-2.3081397470672300187 -0.51095119965342561397 1.7806258624625306286 0.23194036200732515152 3.9638051227323560788 0.59981292822953069521 -1.1590948669299379059 0.62422449948737768199;0.93455118625808919486 -0.34272955766301710367 -0.47009395852758401047 -0.23102794372966600767 0.14996777233943628382 -1.1011277700712969185 -0.051270266246915115194 0.51188541202435067223;-0.69371479248306100462 -1.058347285307179364 -1.2965594901933568117 -0.80171293378582442202 -0.74735192556967644517 0.17903463179054648902 0.15491834028998716088 0.66056117576757755749;-0.29431310289429418736 0.46965690307474983189 -2.2783994118175150412 -0.13006048872284106666 0.69908003613972613532 -0.49453862012486166089 -0.96969805286140753342 0.074340915013541314371;-0.78785743481084780093 0.47496841545904144866 -2.1962481211402771208 -1.0481819175625761709 0.59629384065471169318 -0.017973977922318057354 -1.8846273169686733606 -1.2583903157944780205;1.3102439813484803022 -0.74939531060594521961 2.0235456022008357913 0.097081646474029351102 -7.9432687956608623026 1.6754258730202655769 2.9192604267099455662 2.4354341814358857476;-3.2455631706812964055 -3.4073283973656685042 -1.5509578038173279513 -0.83554648509930584677 2.014338136826366199 0.97987987099512330325 1.7341345646889008147 -0.44406358933504763709;-0.15638638620277969804 0.28672348738641240118 -1.0859804349697017578 -0.50507408898908867645 -0.028786979228854737978 0.45884915992289077025 0.44342893484450029984 0.48226027523098358163;-0.36751500939546893898 -0.33465535578547744855 0.1696385513062441952 -0.0029732395371834521511 -0.6658642755698331861 -0.54552664453035737413 -0.26569792934078134694 0.028057336617620765723;-0.073312376846234345029 -0.11622662652571835729 -3.2116296805273925052 1.096852924788644712 1.873777046287535164 2.0565671213307608056 0.57892923096296089458 -2.6109397521460309122;0.32738439517872353068 -0.46767823635932959103 -0.024049655105170774511 -0.2257856147153537163 -0.14152029729770471134 -0.24832328818374069246 -0.05493181503141541383 0.22561737700270917406;1.4550995088547822309 0.36624579518580796522 1.6245656985031489139 0.59093066986290632148 -0.52960265855320276529 -0.53541808856693950958 -0.30293964929803718356 -0.23045253811093494023;-0.049677318219936497656 0.30041846330765525908 -1.0740470081343227449 0.12517469994196150918 -4.5707204151282425642 -0.7257808936020909707 0.84456505469945486464 1.7257661539336057732;-1.794275613007611847 0.13473824418737981312 -0.78104238216378796267 1.5520762968130357162 0.43786799062621528655 -2.5539789617908272845 -0.99369617452342184905 5.4595034817692198459;-0.74625127021244652692 0.27729353508744136736 0.47746142280661091339 0.23468645793350934037 0.084776128659059590831 0.96209299674850445871 -0.00076054067358689901937 -0.64954592861247928415;0.24894361030246314748 0.98484475644632207825 1.9671466104783419393 0.78573123642831754765 1.2056388123531194267 0.49284895852099036562 0.84339950223016346698 0.90985160406634579822];

% Layer 2
b2 = -1.5101198001982489849;
LW2_1 = [0.028056312924239035916 0.82281571180067936133 -3.4237746901425052393 -0.098397474165694956416 -0.031843297157944233655 -0.22895812211020921678 0.050446861558931258007 0.15517159551613485258 -1.5189774272018785606 1.4967967225535687703 -0.64155224417458833752 -0.8254983904928059335 -0.057951746461334260885 -0.7058849336996395607 0.10647275949539510009 -0.57645748947682984298 0.099811373939516265241 -0.02655592040593895975 2.3207167474928742656 0.12243505857940548132 0.023186419783467131228 -0.7947927646628174525 0.089870931195947106884 0.087419383937179684363 0.037989302532898394649 1.3523231407975455642 0.23608010302472909325 0.15100243050238160158 -0.073563728738222700088 -0.049468422427821075182 2.4326643548901483172 1.3303759515498971844 -5.3104747436769814684 -1.3404352233218042034 1.3868050933503845989 -0.11652873388851928138 -0.3116384920675125958 -0.036768328872481034764 1.7924968765921489577 0.063419611507375697745];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00492610837438424;
y1_step1.xoffset = 2075.6;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
