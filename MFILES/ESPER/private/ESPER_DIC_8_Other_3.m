function [Y,Xf,Af] = ESPER_DIC_8_Other_3(X,~,~)
%ESPER_DIC_8_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:13.
% 
% [Y] = ESPER_DIC_8_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1;-0.999998793562952;-77.961;0;29.715;-2.08184650291172];
x1_step1.gain = [1.00000000274156;1.00000063368067;0.0138606862425759;0.0002963841138115;0.248478071810163;0.0588359962254402];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.6745926659923180413;-0.51078342816916277869;-18.213668633195862157;-0.5270486975573419608;0.67770735278235083587;1.7480461645945069016;-0.75666652671786904794;-0.35912055081210442209;-0.41233702275456624031;-1.6767701241696522096;-0.4462104467056872692;-0.011242375541938926659;-3.2379161935255575955;-0.31724927210409181733;0.19689864555173144933;0.14739413768586881459;1.2549675532169308756;3.1065133695758628818;-12.203803551054866361;-4.6468874385174236963;-4.5340996899119732078;0.82718234787128230856;-0.49740302006141456914;0.28576282869622293692;-0.65096042515819663166];
IW1_1 = [-0.18252270396693281995 0.4961765988486740997 1.2472285643866469762 0.21048317809488187313 -1.0713818131144197121 2.1631920375745288254;0.013137696649406695876 -0.08319678525334557595 0.059202160380384151461 0.13783208139613634113 1.2912739210739327955 0.44445420493386972316;4.6227685557269992955 -10.323717178490813495 -22.088116730361232243 30.850638359431044933 -10.187525017363089574 22.72033036989553878;1.1846000966771963459 0.64092995302530408885 -0.46982131762282364207 -0.37823704542600222744 -1.9379162903666948825 -0.12948184275350133055;-0.32354942504937667103 0.66309411531118356287 0.083399493746508304715 -0.43058218264638337125 -2.3219086471076741951 -0.94728335081187908795;0.11164239404652023802 -0.29205040924570790928 2.108439810156238714 -0.17679913240180875067 -2.4098936337647138828 2.965125890244138418;0.37690303708260936011 0.20003906064765800132 -0.35348353972239610066 -0.61169706359891551362 0.36654498434989307709 -0.3253976150843198023;0.55389869759803278537 0.15413231919262571079 -0.64082838001869268929 -0.18224356787353082621 -0.17003187800163541143 -0.011236122637741692218;-0.087390483405705335351 0.15342961678717065288 -0.11250268640584856761 0.24219623473125329038 1.7512504009688483197 0.098388955053219553926;0.34447708281084005177 0.29974715548855379588 -0.065300253806837571524 -0.95813532159562742052 0.55765576461145993648 -1.629019674463854539;-0.30394912328849688077 0.33059749021542195191 0.27059017673163654472 0.056144617848519935699 1.4765794972451293798 -0.32027009663205674439;0.4449017247179227752 0.044607034455946555085 -1.8377717419638357477 0.35302243302573732553 0.76503918392317327157 0.026556891582285937353;-0.79220035140340117064 -0.060806958760962565025 0.46231990243634690785 0.32336956806536715225 5.1516694127106852363 -3.0691368857643621659;0.69915010962948953566 0.34991937391823590975 -0.34492397301706562152 -0.54288815194436212952 -1.1987425312243971121 0.33288917296257769518;0.57696278413587520628 0.1198439390418330891 -1.5101075098586449474 0.40289712957914536329 1.1281664032271949694 0.48274559863917865243;0.35485057278824638782 0.28057279546798008507 -0.41952320607218723802 -0.21424979493179324708 0.34383297192322637148 -1.232523775065037519;0.38340532585293191081 0.11182282959315936743 -0.4743104928689425015 -0.62127592851347335223 -0.81570613201306707563 1.597795165129718864;2.3305917158996396488 -0.52613903876016743233 -4.2725934410151849008 -0.68256353303805106236 4.5066708592812840806 -0.96186289521372769773;0.34005012820302532583 -0.55690824308737429948 4.3139855468543144568 -9.3253541591004402989 2.4491866656808500835 -2.2906084533354373889;6.4736309802974206784e-06 0.16016745212468533333 0.23662504695631569884 0.098398096910814858429 2.6196426682269331465 -4.1984012395599927814;-0.19321101658869957451 -0.092040289700861629973 0.94117369848913301489 0.018271711322831115515 -1.8973523794531717002 -3.6227272534610857058;0.29606724306342252495 -0.35873296497766743451 0.602136625821061644 0.13455061068665410962 -0.70230891049046428876 -0.089546018886596148723;-0.44627722645602285745 0.23730069865537248286 0.36407311296246624988 0.025287192882264386551 0.81841923740528743636 -0.6401683250538268144;0.26856727117479389788 0.049655147045805592132 -1.3852454249245287343 0.20015364561782580943 1.0862407272456171548 0.36819843116046285791;-0.30044550809154457749 -0.15872966864996099212 0.23880918169401191276 0.0068686820144256716808 -0.26137901092411541804 1.1319281691896860842];

% Layer 2
b2 = [12.162369412794831192;10.791952887355636292;-7.1969591201598905883;47.00937150219949956;-6.5402762612686178301;15.400234910869791349;-6.7085177905047741476;14.643128007303436888;-13.659790131557459247;-22.585664056014472578;5.4296740917531867154;7.7836196983805958638;-6.9014978079674627054;4.089726556633972443;-3.2021591185378723843];
LW2_1 = [-3.2076829968337592369 7.0236483233658617564 -23.471204709930880483 0.46892850131812896519 -27.662812133408024806 2.0498242138543028013 20.399790511796236814 16.581414705215536287 -8.9538169505517757329 -6.389887987083641363 4.97965312575467145 -1.6157717518194600892 -7.2885080811861442385 -1.3987940340601057176 -13.870454168354683588 -15.497235780642856895 -7.6271257017604190409 -7.7631505044227182566 11.336480223659318511 2.8657897818537056978 -14.088700788310523748 16.491457417148595255 31.043601935112842938 5.2654297303809682873 -4.9284146417007130836;-1.1604401536042308063 -17.52642922258978686 4.570986430790686228 2.0439303602578440255 -2.0259126088344792116 1.4380756207569225236 11.211622308293314632 -6.8228607918990613612 7.2639855360614511426 -4.4536406066858269526 2.2037103172984116028 -0.22961136413412247537 0.60828373206703689746 -2.5501632693579754374 -0.20198302729929254462 2.9630109581435095656 -0.5253351710728511037 0.90944828021351342695 1.070591361708027156 -2.5116705923713640303 12.105715585805937096 3.4175371802517231501 -1.9485914612196455487 2.5161990655306101239 8.389533166320603641;-4.1335595657698336325 -54.671881643851136801 8.0901114062001386884 7.2835315636239785775 -5.6300669222413821657 3.8717395223709276664 56.56300157575063281 -33.808905762265077044 13.689707548547907834 -15.740125055425302492 19.914445193132674916 -3.0567221984554242553 -3.7170465028442416511 -15.594317394194250781 6.5225848036105791294 4.8911212272582806904 -16.461070635792626859 0.90415761518972193045 -0.65755525674777959289 -5.8834838005790803805 -0.45179971878489921799 8.1656093580962707534 -23.248361280675595708 0.10570208573251760331 22.502202480956004393;-1.1554023532825383747 11.818228813551929335 -0.9236125651412039339 -3.4348437576249328806 0.11912883765395480828 -0.095338881615600959418 -22.885780424521229293 13.634574985226182164 16.36670680324904481 5.5941081573637765345 -27.735683436151546744 -3.3760360483648148566 4.0738242738609029558 13.189838789745545355 1.8726562075238279981 0.52445541087050528972 11.406624978859200681 -5.5958004111908428158 1.7260155688921925421 7.0141996020182828531 25.073720872786157798 -4.1859090597067636352 22.358482278069967464 -5.3100456904269375258 -4.4710354693329801279;0.81457289161535262334 2.7929294281341761064 13.991088135734832676 -1.763939536717480161 3.2776031846654651858 -5.5853984915877514794 11.658148825284255778 -14.303948472546037962 -26.112534050903974503 -3.9550247804078062508 4.1706660171279752447 -26.104003736139514302 -2.8923879951283733014 -5.0613865775450257445 13.792208324744548165 -1.2999528250544187813 2.2378605948840348816 -5.6132905393252441328 -2.6918142007523728765 8.1977362750566271643 -3.0531712555137926479 7.6633370217078349285 6.5092962966236012079 28.063339009227806997 -2.5270478461835557127;1.6839131870271895064 19.953776038465466769 -1.8892259392852202016 9.6189809469103924044 -4.3014095598007511256 -1.560179387792056227 -31.543132829683070639 -17.478869934392996299 -10.05814545849449182 12.146395965716868304 6.0962924315250708318 6.0328279911622617604 6.5896272866188958517 -2.7753221470862157183 3.7114938296844353083 -23.763502371799479107 18.881993636725674435 2.6021021444452472338 9.959862253278330968 9.9183210611742147478 14.293356952285240169 -14.118700343447670775 -25.174757216600760046 -11.937888190980784131 -53.325162137903731718;2.9255815066847676853 6.7873807583744509841 2.6114538443006463098 2.4772217741182971373 3.4549306544078017822 0.10248231235730534405 -2.489886659546151737 0.31185730406402040193 -6.9468281843656587426 4.7260263625864844528 7.3338404452115693033 -3.5137631008785681352 -1.4709899260858805281 -7.2465402955484767844 -4.511522313601566303 -8.9333238712463547415 -6.5078298337111162297 -1.0931854512436551818 0.50677249400282775582 -2.3188620814263458669 -3.6355852220560351817 -7.0672475809605668218 -17.880197581127944773 9.5715688012271655793 -17.447168087107179701;-5.0037906024238862912 -37.296397120665780278 -2.0232660780016646918 -2.6853752457318038616 -5.7900538845391045228 4.9043188965549626701 21.201095080514757996 -0.2851877867685734258 28.179381308526227912 -7.2799511780774635028 -12.314331652325506639 -7.0107462345038173979 -1.2462889148853202315 0.37443505635007839905 7.1414148064532154692 10.763060806619725085 -1.6148428070740890039 0.86763416758738876045 31.585963578590334322 -7.3847404173287847229 -10.404905591792910968 15.628283407972601182 21.608341501384302319 -2.5558608233651747277 26.730934763145462796;-6.2095818135492191203 -0.90891954916997419467 -9.0558617313140974403 -1.1150834076739271072 2.51436108426056526 1.2481329268416951894 -9.4112744701528754376 -3.256584266749940948 7.270772036051538656 -0.85150677017539433411 -2.9277682403232416775 -0.7455819253083151299 1.3202890353589371575 5.4061141799476342129 -1.186562709969671392 12.306871311925663193 11.076315699702394824 2.6853404403918230692 2.3602631531062097103 3.1364537210293303993 2.7005104728619793164 3.5234729698068756321 1.2481207992075771251 -4.5127454028813218656 9.9767735045851182463;1.5802850710716753735 -17.394746575560422031 2.0339578926841759277 5.7351557746478230015 1.4372752961745143274 2.6964315941914209773 8.1210348314390525815 -9.08643177712396799 5.9865881961876912243 2.4150792517232426704 -15.343058018418469501 -12.765632925203362902 -2.2292390455469970334 -9.114673137591479346 7.8096261774571784642 -0.41526204375138575653 -6.6684197740117845399 20.287937665587882918 8.6374961504243419341 -12.076435368065178366 11.751779614511780991 12.019542111669856865 21.127614394861112146 25.226877268606312299 7.9853632386167596735;-1.7310077960934908692 -15.268310702671756829 1.5511372361623796401 0.51247631196763610006 -2.8767352208173377903 0.25889035651304687091 7.6804591460259636904 -5.2458843119906122254 5.148713770553325908 -3.152057846499196625 7.410495108069047987 0.95960557451112427074 0.8232391389913260582 -0.38426599361724239623 1.9599409447286841868 -9.2950980421879982885 1.5853809196289752048 1.6553716799075162136 0.69401400292036719009 -0.708569482777168691 14.841115119331918848 3.6679349973073547275 -4.1887078196049740697 -2.4749662657879154537 -11.343818560558169395;2.5081579150905772835 5.4876832066031404622 -29.561447452735940544 -4.2820299211485171043 17.615880185262664526 -2.8989434827945883555 -6.8723848843575874312 28.980654573476964941 7.9166145919368933193 -4.0268899018582287042 2.1631385766192328113 4.4764302154412582979 0.87886437909101755572 11.945099258582786206 -8.7517690915357810866 4.4225200288630039935 -6.2168907391578906996 -0.09458131406327881241 2.4595953699282482319 -18.470939901765905944 36.221231275979540953 7.2833491739633426931 0.20065194065844280114 3.1686160256631454857 18.784264373685449101;0.50666493613204111046 -0.47008390886445688972 3.9057019161541042251 0.53333095880630487784 -2.4139454852691497599 -1.8432577715780285033 -0.033308403020864796318 2.7392427137897561451 -2.3210749434190218743 5.4801405275464567524 8.1891244618776983799 -5.9861984374392580577 -5.5387273605260363141 -6.3000673847885444445 2.0616283772915613426 -9.5322115967578007201 -11.880551261969008792 -3.6689865833338828338 -4.544737100458814183 -5.3353746488941551362 -10.154419539402875117 -3.2555496820935778679 -13.610196965423400073 1.9789294914940194214 -9.3732396030579820945;-0.77448788942050339479 -9.1095759320528895131 -2.7457018004317044202 0.51743719587438596896 4.3708892956458091916 5.200598197061032657 -16.469528017489981409 11.251809227980732686 21.915800859123347522 2.9194758979036974367 -19.68194033004087018 8.444359019532374333 5.0622183495363239913 5.2601639103691546495 -12.93061808223273168 7.8115037620238636507 -1.9270161814579365167 2.7468027308739930703 -18.852984630678587763 -5.389287196624516163 32.688844646594773735 0.97037594369416158013 9.5661159523030185881 9.4285032115213898152 7.421757940661779962;1.0541475685356413994 -9.8211569880952982459 -8.3806450756807127078 0.99899997243360083576 -2.8903864021340761603 -0.079411973189704332388 13.349570281898696322 4.8501023448083984135 11.392993984980309463 -8.276108476186777807 -8.9911073936385204064 4.3644946274224087901 -0.68546592124143979063 -2.9403579047641854594 -6.1038686103853292408 13.561159004253161342 -4.1415398681851351981 1.3246756468464200296 1.7751282178813996282 -4.8719208017238759822 -3.5042930572622048579 0.65981292430041627028 2.3569243103253958438 -6.1307247277109899741 22.044109187499248748];

% Layer 3
b3 = 0.13936090325989330951;
LW3_2 = [-0.016738144640567959726 -0.35368730616540910994 0.14260432194658270721 -0.082457731801840503105 -0.040788352685022837008 0.036752099848464621357 0.22532353051216844064 0.14975706239981945167 -0.12017102415503058688 0.051427418250180351178 0.32179276601174316985 -0.024567133148654191066 -0.081420376565204830022 0.020826844879420797207 -0.1255940793866494043];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00314743155299998;
y1_step1.xoffset = 1774.26765577007;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
