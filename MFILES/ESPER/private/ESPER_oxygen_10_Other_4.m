function [Y,Xf,Af] = ESPER_oxygen_10_Other_4(X,~,~)
%ESPER_OXYGEN_10_OTHER_4 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:47.
% 
% [Y] = ESPER_oxygen_10_Other_4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-0.04979;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.568038194888224;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.865828455535937902;2.5668825847843961263;13.117175414239966358;2.8777280316404594274;4.8675984953959172685;1.2959739937222640727;-2.0321239887999587026;-0.64124315283352695261;1.7104333102273110434;-0.92451740160310524885;0.56762834656119776078;0.89911792583932570455;0.20280838906285525436;-6.5457315595319940371;-1.4375257156860195007;0.21860000581586663815;-1.0250501607111019986;-0.079490773534669559308;0.22102000193326154509;-0.61920636931090045074;-1.7371036733549869435;-1.3126704358143006512;0.36670023477231306064;-1.6620795592601429469;-2.4024011065313342073;-0.71733346566457489857;-2.0449814769472247633;-4.2501371530669098675;1.0986457507023397184;0.42198498486006574826];
IW1_1 = [-2.5090789956182444342 -1.6557650924264617487 -0.2643482057050702827 0.37100452400300298894 2.5857237784339335285 3.0817722254694897011 -2.8701829733085508778;-0.77054736356711828194 -0.73506403743935455619 0.16977466293624218774 -0.081756058033022660503 0.23020354613035468039 -3.0181074377135788112 1.549590905294649934;0.54800704123279442292 0.61493863668947379431 2.099772369379659942 9.4649265472342971606 -5.123471702171839226 0.64936337007264421928 2.0183648356776839883;0.12444762251218356719 -0.12559252650082194935 1.0769641944114258791 -2.3243042317514257533 -2.0190772234239982019 0.77651999366026791538 4.4774106756924547668;0.0016812521577574031113 -0.72298684279142910736 -3.5927870974354014777 5.5307522442846277499 5.5730600835827024397 2.1211689154088060327 -1.9058702256241759621;0.15550801995263485722 0.4870594889925219384 0.24224769780541743902 0.27588606330011355983 2.7341072285660596997 -0.35408409798588041939 -0.23182903212627223311;-0.045905560250690535806 -0.18334281600690433001 0.79327219121781378242 1.3662799504135796358 -3.2818996316861146489 -0.60282896362468962881 -2.1327877888994888345;0.62085530205902694778 -0.27884306626696192533 0.3634359391399445971 -0.26113281020920825481 0.96614022887102157799 0.42894762385961493489 1.1581490329006454143;-0.13898063159587281667 0.27443235459042847335 0.83446518087940391162 -0.42096822913720177706 8.7545037102997920186 -2.4996945358978654994 -3.4238591457421780895;1.7430737192905723099 0.25370731649353561732 0.86629429090784004774 0.021897506090418614177 -1.6372870692057375219 -0.14735393316068681746 0.52994358758460324843;0.039329348772380957888 0.31232631936390903293 -0.81518195511211821724 -0.59885909156491479166 -0.59112943125242867204 -0.64762754070707073684 1.2467321814680085712;0.10560025461900797439 0.23588153681035453624 1.2756095574214385557 0.089607028127078713897 2.2385448644864727186 -0.96525321650554196662 -0.22126078268306759167;-10.364221662096479548 1.3096454374825459155 -1.6279325314927690638 0.83360829893444032823 9.0139668798947720774 6.762586348718468976 -1.2584403162117225872;-0.065285292151099558189 -0.28702749569832813892 -0.34125931399537628996 -4.0816493166749534538 3.1464505473967965266 0.36066251459447823402 -2.2807258845625990595;3.3069696993701227505 1.9003812614568722505 -0.1648160841524084208 -0.62303377686644079159 5.7969297414581220096 1.6000790835997300565 -1.4545447612142707872;0.041875811344766276922 -0.69178867763228601984 -0.97131402434789815281 0.43957734844198975699 0.36763652610627289841 -0.92319507511523490884 -1.4488844687272057765;2.1564073800598655417 0.39851705721808206029 0.64150191960731550722 0.029832143715526397015 -1.6006393375920271449 -0.44934163116815972749 0.94409987985813992317;0.15491098860592805719 0.12096645430283367584 1.0179984039958207553 1.1334844054407644531 -0.24333198280942519576 2.1125535367670611464 -2.5013671749660795207;0.16137851111658499392 0.98107351933234265839 0.80891126216415765171 -0.19613112249387271158 -1.3043912852546781789 -0.38534343500661893955 1.1405222977865445699;-0.47663240805278772605 -0.20468187888981417832 -0.56183981424546503014 -0.0090165587306489901331 1.3666293550958565906 1.1809025764870726416 0.1023131824119792449;-0.086320421823006393547 0.14110968466210493943 -0.62797450747564131923 -1.0592028484401212474 -7.4074866735931115258 1.5484448812818942809 -0.89937323346171582639;-0.10798658424123311339 -0.34280575829499976281 -0.14779776006083131246 -0.32910122145613784905 -2.9202236389363900315 0.19774509877109186506 0.15576151860389805814;-0.14725242826381809702 -0.41620045274995892681 -0.87868857757197571523 0.3213432881642107608 1.5074612993659324278 -1.2350393689445173795 -1.2468094885988179055;-0.6037296335221784549 1.0116528896745129451 1.5586932999508371633 -0.314683299528224103 -1.7277265525575182803 1.128512606996829204 0.54930344457969004779;-2.0197942682956266935 1.5475613431547892151 -1.3993954806755839471 -0.35910779554008609438 -6.2497677173137962114 -2.6961006488793972657 5.6815580813456412201;-0.20371691470451702699 -0.2357139837279615957 0.27897721169468425728 0.28328190287241050704 1.1090810631335437098 0.91564845249353710166 -0.66583616001381407123;0.91016281578735813707 0.49663870792936892773 -2.3032273666277847113 -0.044875416767837038312 -1.4364571090541793374 0.22950796278567570097 0.53273784507261190413;-0.94058781908540600725 0.0040339773818667164218 1.5543069544186689512 -2.2422716271257168152 -8.0257322312606937942 0.5358122836576861836 0.4767529002597123422;0.43776419658439669202 0.47800078421862685074 0.71912549969466255106 0.16608452118970176703 -1.0105017765636157279 -0.084108291518547845245 -0.68999156221304713821;0.041507007333487576373 -1.3001793466642799224 -1.1699596340237452541 0.62939602997675669904 0.40149362882955375031 0.68429001026745250869 -1.3045352702274704004];

% Layer 2
b2 = [-4.4272763706017013163;8.0222132787357622874;-4.9837727497761976636;-1.4487666731377171203;0.25650709024097623212;18.55407295240557275;20.200994087977644398;13.36730407545032584;6.1196952210733233102;-15.454389886565943257];
LW2_1 = [5.4010883242100424795 1.1024176720159153398 -1.3196847818159349597 -1.3162139307690081669 -0.058434875812028268249 -4.3425967738889301728 0.38482455373951529598 1.2803301070203243484 0.74369694773047623215 2.5557009355914210857 -1.2723129125763517067 -0.58678695316586781949 0.26980334644602499417 0.47056070925561566121 0.56803724217191875479 -0.0028504643471237885166 -2.8134478436132002166 -0.45594951017028939599 1.84103165215171094 1.1033905981510425676 0.77201678441456755841 -1.662673881180458002 -0.23868082432124307357 -0.70105030967520576279 -0.041949721975772000238 1.8183060138192612687 -2.3306830761650831896 -1.769990601875215841 2.2480478703973778565 0.62624285470155582889;-0.31729800315965822621 -2.3062542114206445731 -2.7828608324158845555 0.31085730153360463524 -0.61606807396345886207 7.5703923994777646556 4.0352516948736294466 -0.37743428549290675145 -1.2594722024284590312 1.9092858755876942478 1.8550923270787900154 -0.6859138551932075778 -0.14537726930032990325 -2.3933451166429913215 0.0081074907432235818194 -5.230622511579146483 -2.3506906544395258507 0.75093646159895088843 -3.4168070708794480161 -1.0623079773880348409 -1.1037214383291427122 5.4096383057966486163 5.0871667852670165999 0.32222352005999888025 -0.23928474229520760308 -1.2228895853326442467 1.5967519969876617925 2.4399717491729928653 -1.4658739161711142884 -0.3889924879187569573;2.1375801119708661702 0.50168003448884468387 -0.40526535075694003485 -0.65212111882479140146 1.5212631271153338464 -0.87910634430806189332 -2.3209474580972546676 -1.1918037407188586396 -0.38495528437833737012 8.1629304123382802061 -0.91121324537751235972 0.088582944796431584145 -0.12522274728121735032 -3.1513506672892406257 -0.39031973822594934198 0.41022961599715163095 -5.683857134262341404 -0.62874707142176755603 -0.22815879285856735526 0.57658229534748151046 0.79093380661510548357 -3.0202109850546055014 -0.93276027970768993214 -2.5360985128540836087 0.3386417326085251478 -0.043381152626846913867 0.6506542370725674207 1.771739597816053724 -0.52294969386371836784 -2.2053520353368103457;-1.1783621601995168948 -0.43754716369275026278 -0.064555043629057812238 0.097134642726438139015 0.46007666830320620432 1.7408539536626084221 0.51262891909047025862 1.0581164707132071356 0.49846554467071690908 -4.1571451347922510067 -1.2068401314404195723 3.2008436681130096879 0.45502792086057336496 0.33156399405582942519 0.60638102975431440456 2.2638251218949254628 2.0819709701604307561 0.95965208923752665093 0.67469118392383364835 3.5212799222200614757 0.26012055698832348138 6.6504432754642177628 -3.1313884436584671356 -1.5725077715452731031 -0.09497322153509443754 -7.3891683865281940768 -3.780191897328236017 1.3277742925182316469 -0.80521414625965292977 -0.12375539624514141079;-5.1424824433955524938 2.4800935166848980806 1.326845142739859984 3.7064390290407387418 -6.2483937793113053516 0.39837659095545407961 4.0876428837136487004 -0.73749976125053906539 -0.84039157145715948083 17.751213513505266661 -0.10506239168543436702 -6.9430681385748087564 0.46697384900555027887 2.5333509900739885623 0.75477363258583241024 0.30326686847675538017 -13.767951961848197584 -5.0652474286975746054 -5.9223971579383674069 -5.8292629140059419868 -0.22640665823110867061 -7.8974578621515529875 -5.6401510700123207442 -1.2690331408551329684 -0.092488879605585494481 14.424068870927357011 -6.3118148641164655288 -5.7534626502129713188 10.861483271496208403 -1.5260292423640218207;-4.6489544543530154641 -1.6859049305748954328 -0.57975245289439036878 0.25277572551138877133 0.099847673105134940319 6.3296039418023086753 4.3695633523260646314 3.2367746390976841475 0.57971818137456154751 -10.835346230203359852 9.7873711875487714451 1.0462954908156283373 0.0086581032106004957027 -1.8499171852701781216 0.72907868444887502513 -10.945191787092554137 10.236748981348451792 1.4787274132346504008 -2.3598125153082860628 -5.3317897988806643994 -1.0659045545289500545 9.759125550945014993 7.9891325861598652125 -2.4346444280924028902 1.0948883638729542955 16.718533328403641036 -2.3787395306993746047 -1.3528281069718910423 -6.0159457241513107917 -1.733781519437493257;8.3669240160554938512 2.1260606945538689239 1.9918393752946186304 0.22594723449099851642 -0.17404330146732024942 -3.0851992669887668974 12.206502716616473236 -3.3078028344040166786 2.0831828113111252598 -12.022634880406585012 16.453299842543327003 -7.4041680973645602748 -0.29258158870218331504 3.0764379050721970543 1.7162222101643345162 -2.1961341509363871971 11.091729997738724478 1.4359678786896576952 -2.4308081600442279502 -19.200699606035232847 -0.60902085250691395668 -11.72253749475289375 -9.9738506248456619829 4.8658405598605032338 2.8880807523168989803 31.877543221924867112 -5.2850313594540612172 0.55453778934010333757 -14.840299287177156629 -1.0016102592411924022;-4.4090206680458079447 0.085345245680518308506 -3.0926317264144698171 -1.7087468358803428181 0.12305715432598475501 15.519972767592442153 -0.36199516621600646982 1.5462483730790883563 0.38376867247676171857 6.076302948996127995 -2.719288409739309742 -0.65011548112531081234 0.033122858557985024319 -3.0884808158758052521 0.048837462620831051385 -2.3558051449788752763 -5.2421831405843857254 0.76439623255361477394 -1.5934726100752700795 1.5674608962864975403 -0.73333595966307441039 17.209765014752438361 2.3660090385574275018 -0.47788648161609809106 -0.12090842676158186642 -3.5796622092352610167 2.3517860993553196813 -0.78404537297526799566 -4.4514586542036607142 -1.542564178001547992;-3.2455636709982504939 -0.80680304076413644765 1.7473603709701808206 0.85241301396466107043 -0.74937235805134316813 -3.4256842689296065352 0.63693116354864387496 1.2690938381270755464 0.56834607265691772238 0.56307258122679804124 0.037405489669450328605 2.1504117633931043585 0.10138616893179683287 3.8651285979639067314 -0.018843507821985031048 -0.72118900101537375402 -0.6173568211417959084 0.19831796877760740627 -1.6314953651710879523 1.7796218881572971604 -0.0037941003637565525602 -3.5237257209368126887 0.153530740524250503 0.197738566356377099 0.057167139184714853284 -2.1589073150274264989 0.774607906984618233 0.17050816339862026605 -0.093179763517250574489 -0.57171561102976331536;-3.3793590544625704553 -0.97242233387527221566 1.1538385388798511055 2.4731575987113454396 0.29918771261860549471 -9.2839670509072629301 -7.9785385609536723095 -2.419875812960132766 3.0707417228324147551 15.820284426722905025 -8.4931370922005715585 1.5059317453537215403 0.28366108425421138195 3.4414448654288678497 -0.77680078729013257721 7.3533009995866338571 -12.928021634863791078 -4.1683438818996556563 4.7204170696062277557 7.7740940411957577538 0.25995594039182295942 -7.501511146363795568 3.2055888790042961212 4.7382561593631074004 -2.2149682687333358544 -13.091077977498127183 2.1083951226592412276 2.1848254258481341061 9.4315200730255419614 3.0438571534289287079];

% Layer 3
b3 = -0.11382527588248582406;
LW3_2 = [-0.20462352614538090179 -0.12231883653487113373 -0.22661088096363751765 0.14818752715236555018 -0.046835091248173997547 -0.22617893772533956276 0.10544758595900806386 0.32259904280775347774 -0.33851796946307766145 0.1357213106535690994];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
