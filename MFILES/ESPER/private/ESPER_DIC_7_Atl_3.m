function [Y,Xf,Af] = ESPER_DIC_7_Atl_3(X,~,~)
%ESPER_DIC_7_ATL_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Atl_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.3919439601081344815;0.55933979603682215664;0.7114963538596000836;1.140865522375239749;-0.044984802702279835795;5.3107726117613704986;0.67185437284532745217;-1.902722918222294668;-1.8805705630086417823;1.2142669193334665323;-0.54402346934343404072;2.1741279279283700632;1.6706304728420000583;1.4537878826966821322;-0.59716000808824964974;-3.3676203744220369884;2.2454596503176849076;1.2631824414362817777;-0.6106802515334766035;0.030342523937778372034;2.4461742812400606439;-1.0615572943625908309;3.7304633705783643016;3.2689044402873093098;0.99421486470043862749];
IW1_1 = [0.31930452560675237628 -1.1817543186052807958 0.10818638242603204058 -0.43262680105799350416 -0.56333467614949395141 -0.75318459071580723396 1.8516795749899854773;-0.62487437334271966893 -0.27296645516107559404 1.3093440258702471191 -0.30724446523669618481 -2.1791575777519671675 -0.75776095575561519535 -0.95910414474926808381;-0.19511684397018352888 -0.81657518605411272272 0.28522974034177844826 -0.2862319987626753548 -0.57657442616997245377 0.087503209844363799563 -0.55911881557583453795;-1.5791087905271703473 0.95487099149762899586 1.0474369887247609867 0.10327708834292124995 -0.87282333706773995718 0.63735243396351848322 1.2716783308093062566;-2.1183760254080854502 -0.03354460172188408057 -0.82559499455106355459 -0.53320187162840571027 4.1054984122686057901 0.5382414799778011405 -1.1800397310567125597;0.33177876913686282778 -1.5650117016074218679 0.62956646637271207467 -0.20764157591097243127 -5.2688446253197742664 2.070565714357593734 -0.29627592858324458547;0.023218175929383608885 0.2792906639964357618 0.68061643630725687792 -1.1356413546570567341 0.070525866502870182551 2.1483376877176461051 -1.5656014442709249579;0.58472483295838184603 1.1946670335208917635 0.14939557944433770609 -1.268646381404478829 -0.93198256923383560046 0.0044237195422448874482 -1.5526613928785872876;0.86802887595377142826 -1.1098617840146371982 -1.0604045021578409891 0.60558262201074641862 2.5153533539193113633 0.6035719134335866265 0.01534409309058874793;-1.3144826724351892366 1.4147256205053959643 0.48602450834526828016 0.39587231962879076974 0.92118436274247672557 2.5454556570641861946 1.7367452207392561903;0.873037095382836692 -0.80925688324564781784 0.36437272058874892178 0.53638695317232421012 -1.3785776190939771357 0.1014992360429717716 0.24878227055118815048;0.42149810364105411153 -0.51267837526750248411 -0.90567437577092735346 -0.036079269895169303883 -2.6330555097055148295 0.6575426376568888065 0.16544394614804122656;-0.39006327862895789904 0.76058479372972109811 -1.0936072388961077806 0.54024727452448761955 -0.83032016437309219548 1.7792350825731191311 0.35610595773203984615;0.40530244395211562081 0.62095725272298663011 -0.10364240822734184511 0.59745406924314525821 -0.20870305343187145475 0.85632624055345363256 0.378861966706394937;-1.4486239065969277462 0.68680520512003229161 2.6159376272449041956 -0.94041504792162522453 -2.6055846487830898184 -1.0566775515049626755 -0.030804477493569022706;-0.025588872095047759947 -0.66472047713389292856 -0.33915668491114769889 0.15950762137664570295 2.9288711291796256653 -1.2161043087687555264 0.81131729044008094043;0.746212445817305281 -0.81173860134776454345 -0.83298542417861476395 -1.1192010758256494274 -0.83973135560021183732 1.4583698645424212348 -1.4139770229467554241;1.1747362169844259849 -3.1614535782764030536 -0.20110008564833431466 0.36786258765697299467 0.54847434944782647026 1.198391266002033495 -0.23389518112244611636;-0.58502029570549696214 -2.7706458044770831961 2.1227576157957401826 -0.021147559868045708031 -1.620011803503587311 0.48952766489080146162 0.53064736775527898693;-1.8117977675464096432 0.73749329862506785016 -0.050947671396766903984 1.0833870472323494649 -2.9621991247518022483 0.37432834231083716992 -0.84392970495501862249;-0.064736428564890702297 0.71403539184995568068 -2.8843771011712528995 0.19533793927476042485 2.0903158188527624084 0.30938650533090539252 0.68140074142453965766;-3.8824605563304923628 -1.5691339381428426325 2.3214395985544844514 3.973356400440115177 -1.0276641883208881278 0.14869551785333312566 2.4895658693971913777;0.30019647493214957068 0.1258679634068962383 -0.079436719809329592312 -0.97452903430443016397 -2.957324970831028299 0.47329814214294929631 -2.961555639841062515;2.6779898335343372828 -0.87188362475145764208 1.6529167049219659624 -2.2182096205074928186 -1.3900811018128333973 -0.81978319562569257339 0.34088145674109193717;1.7435046340958186839 -0.41815784332336380924 -1.0470501555167350816 -0.49317058882764525096 2.2796243397265549824 -0.90875336777180748538 -1.5873038484379387025];

% Layer 2
b2 = [0.44164365202968630664;14.764610111706161888;3.4113524527826357691;2.6007368109902877507;0.29562671900924952784;0.61021775603202910165;5.4199228146595839206;1.0710418993564134738;0.86577036205142343661;0.32705636378982050338;1.4020594015523066833;-2.8777604417749689247;0.44903849984615840096;-3.741852974371262075;1.6639583041322714152];
LW2_1 = [-0.650907579840642736 0.5801005936416638864 -1.3087359742282442809 0.74915581423113219994 0.72541441893243641115 0.24288531992828610306 -1.1421804119350278395 1.3578035252835587432 2.4273050094085744099 0.35969693472356906172 5.2579321727889993809 1.6475104831964446639 1.0338865288750123117 -3.6677316868981533204 0.68783508976286333869 -3.1220551515632086748 0.5144800061056575835 -1.1040633953984526627 -0.09285442127581824967 -1.9230265572179381373 -0.44470822028738155041 -0.95502594730268453027 0.30869167883340903336 0.5025823743390301912 -1.2586003955054749781;2.7033975208622864628 3.4011627934043473509 1.9930987646346371989 -3.7937324711084130513 -1.1211509564397907912 0.53992325677457919664 2.1781674963507238196 -0.46848701062157266373 -6.053424434204441873 -2.7009904397783683905 0.92549120103564541662 -0.3088108943108771598 11.496702194618123372 0.91456476475552572758 -1.056229524836489686 2.7759751957290914604 3.8500873335537133535 -4.9881747721672677898 -0.15587242687214036829 1.328401675483647626 -4.6256688088706221507 -1.6096733447393754002 0.571313922704953292 -10.772969297733665073 -2.5800283918231152747;0.14880284297709492347 0.14787444670842217476 -1.7773456333713506528 -0.22137270252190996422 -0.79084726379949532582 0.73333138122017726968 1.9666187624158464331 -2.6298145925828309011 0.97581560849994952722 0.37313141398054971987 -1.5567346571679221423 0.7038956892301299062 -0.040725810863212558166 2.1038678570151341241 0.12671178426530993466 2.508615328316952553 1.4670720613600769511 -1.1341212424233828582 0.82874464176623574563 5.3894173882913873896 -0.47750210006125787254 1.9373652565820140836 -1.0621117446521732841 2.8168519356094354755 -0.31963028015459798992;0.3604019409425459064 -1.5189569349557880962 -4.8224740754170989376 -0.15613223412444174332 0.29813753783698554445 -1.0839982921838102747 0.72326848434761015216 -0.85239409193424775513 0.060460235670174763967 0.099468311531624539756 -0.51107473021613625264 -0.19786710908538507336 0.248040524088622788 -0.89621971297413816071 0.73918816774928686186 -0.70182957702160631008 -0.43329245210371192254 -0.60289373796580014719 1.2422374317063273885 2.5859914733037183687 1.5834908458267884512 -0.868003695990229307 -0.51090469889667011749 -0.080725267858783741892 2.8503316436090062602;-2.0581277084784446174 -2.4161623604852380254 -1.2985995824141582933 0.10033909319920335246 0.11766019841014623004 -0.65479133961753066551 -1.4395411149155548092 1.2252382579963707609 -0.76650734949630361381 0.80311073563279367082 -0.41226263206353896962 -0.39121603751092370871 0.33635626793119555167 -0.77088072763653059383 -1.5280599018855129945 -0.45288633172505921021 1.7446880211998001542 0.55761263815244554998 3.6295376895792257343 0.34978095715669677013 -1.8139028065371280984 -1.8097218102990311195 1.4910903528885823821 -1.0304376666569381449 2.2867801068295752209;0.83310680866636221964 -2.951775968880965717 -1.0943735694734848529 0.64365158348726969617 -0.58155862458447993291 -0.14632240643147609305 0.2047144506323079205 -0.49673322956808252382 -0.62356292998898055213 -0.75387817441176885325 1.3622133547232564421 0.90389559124848084526 0.62256672783410094141 -1.349799018254172589 0.10527180462148764961 -0.65344747127762881078 -0.03595539912131757998 -0.86096449640985006635 -0.072395198292162801779 1.2689299471258965735 1.6982822007714184487 -0.8668838198581703125 -0.10095793538576107451 -0.54269470148942411392 -1.5660768753079379323;0.078007970031115203557 2.0016745714272854428 -2.8187630427284511292 0.84030769379177439049 0.00029301297725329959742 -0.31588951198973225232 0.87103357780155876711 -1.9806558409877554894 1.3101073816289847684 1.8348281129340702211 -3.1285926416276303996 2.0607287550180823921 -0.26755003812795075113 2.519509846507007822 1.6558266052469423624 1.7775415271877994527 0.17640295421986165736 0.20623670313252431829 -0.84637024153131723558 6.3938558874837632118 -0.25491162508132558795 -2.2076479246585107852 2.7636801659915475327 -3.0706052624110418137 0.84815103874834707476;-1.1931577725242876742 0.033575613405297771719 0.059945924187837708319 0.66490605142985825804 -1.2594806225870691652 0.027090235004290669218 -0.92519762042212538855 1.9511747523212252808 0.012806803215526452872 -0.2791568847181999935 -0.16095650983314549465 2.1414190861683266576 0.43330933393950182841 0.4211229045814521843 0.28368801041766644744 -0.36930919900151432111 0.45135350750224079164 0.59546950668001019658 2.3716086179984445792 -1.13499589949779911 0.4456509156846770181 -1.3968108443007671848 1.0717763522568057866 -0.93983260681904901013 -0.43644991563951190949;0.91423856954071947012 -1.4791355741490461728 1.6114981990925143496 1.4454466264919134666 -0.4966459788106194484 -1.3762649609854962218 -0.07218984199223227316 -0.072872263502443093697 1.8755727988122858907 -0.69079979501654587004 -0.19995709495330091232 -1.3842953206208252759 -1.274906360583160092 -0.13014385097389141732 0.80275983221524027655 -0.98899701555075103521 1.1781772122280187443 0.76910320076463811745 -0.17628643914261660219 -0.49040174779425782514 -1.8269157199762953159 1.3943469520011844143 -0.90933650810168187295 0.96060860264428649113 -0.48863905872265667174;1.4912864257709732563 3.4225261480537882974 2.9817093539123211698 -0.38872697636011593891 0.079473842910339848045 -0.06253649413700250459 -0.96442853430852371055 1.5063844866131104183 -0.86424738456912952866 -0.095684610598659361469 1.4924012104958368496 -0.45750567498888949913 0.14189007390875529868 -0.69829733062488208439 -0.15055024778058834212 -1.3606332343561935438 -0.26517057216620076865 0.85400587387429338637 -2.3180166253736929072 -1.8364546003775141791 -1.0371508141290213256 0.41381532504034712616 -2.208157183943322277 -1.6149180662286113375 -0.91028834862865892763;0.61485975513018564786 -0.083827551638284453217 -5.5465841386773409027 -1.0844720059489947328 -0.51780326407028343105 0.82247579573070694892 -1.077306288446816529 -1.5054678937092054181 0.15442973180795180332 -0.60102792630621204584 0.6096524529027035344 3.4246358497709441515 0.12310984554078616138 -1.4416358279728684888 2.5323927316325600678 -2.8608973684262926085 0.072657283132261371583 -1.4655904224509030964 0.59581911740931980948 2.2708352670434495124 -0.94127925785307364759 -1.3512684624513224829 0.4835071494816330917 1.7757330592332720709 0.96439016988699388655;0.26129157330121532965 0.83733233012113839067 0.77272069205078608434 0.40019005797703388616 -0.30034170539299254177 0.057911065898755595405 -0.083665865956165513806 -0.3091471370799049323 0.074230676912261428502 -0.80592117578980004833 -1.1336122514571023157 0.72881995595479109884 -0.54358435647840464 -0.4653084849688400304 0.28662006135097956028 -1.4983028674437219863 -1.7583821480179711028 -1.1602962393221389892 0.39349449064257041586 -2.2720633741096905034 -0.082838310865783415515 2.0517784906485223573 -0.90519120345996140209 2.8734663768708776921 2.9588927562928901693;-0.95240407575240515481 -2.4617093159194372021 0.88239267457681203055 0.36521721122534434034 0.83131717071794863916 -0.36849543631417308598 -0.30871022204954295942 0.2813177054325226023 -0.34892563751681532347 -0.15528359191483814827 0.86854828691103458382 1.4199004355577311554 -0.78626411267425377893 1.8012788336981997439 0.84567193810155083522 -0.0010575025720616030439 -2.5286093728300436112 -0.025594378765326310232 2.1939880899210786325 0.31790201397416717466 -1.2702104062398791307 1.3132797330200953745 4.2598309291919393971 -1.0567310372573315291 -0.61298795649425596999;0.40795306069531228621 -2.8379177345337320837 0.029369981584916514394 0.59761478641351395424 -0.83654856771635122126 -1.8928348816072610994 0.40268707657502789132 -0.15108679600406096921 1.4553188890108483822 -1.4319951759709235173 0.11506669558347723537 1.2084649513367970997 -0.0082286344930168897616 0.57364426218402131408 0.65487538174731185769 -2.2324084019911354382 4.9664983771753865582 -0.86483379167925578113 -1.4017456506203882505 -0.97925391243781567674 0.76893350312510577726 0.84223880044489385366 -0.78571328302519283238 1.36835859995245257 -5.0239103264336728571;1.9668780540935013601 -0.37035844201210443849 -5.2692767082499463172 0.86013510736989939875 -1.2272098990590087908 3.3032449411133630868 -1.3726695391570085114 -0.99324168753009178801 0.86530205674509830249 -1.010770210313106432 0.3132286483977514413 -2.866751027517079109 1.7169278542570374224 -0.59701881939864420712 -1.4214127067932444959 -1.528723451810759304 -1.1040027418137499104 -0.99185339887670509462 0.15243648613968094341 -0.85666145043029318096 1.0712883339593100018 -1.7778379766868739331 -1.1957388308747687322 1.892750714203953688 0.18412077140906904504];

% Layer 3
b3 = 0.17398601120933390729;
LW3_2 = [-0.61524236930585407546 -0.013647072292677362923 -0.025980146840895775723 0.046439615406415508947 0.026529889697659472803 0.079840090818855000143 -0.017960982371825025966 -0.047846944302540501959 0.056744298514152691215 0.017592489611761817636 -0.029935888721786006739 -0.061890658257271163878 -0.012062879148658096559 -0.022515182796795069065 0.05522331578377059208];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
