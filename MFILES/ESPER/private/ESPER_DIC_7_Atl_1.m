function [Y,Xf,Af] = ESPER_DIC_7_Atl_1(X,~,~)
%ESPER_DIC_7_ATL_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:12.
% 
% [Y] = ESPER_DIC_7_Atl_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999996490807;-0.999999999390765;-40;0;9.1619;-1.99149636107278;-177.232103709389];
x1_step1.gain = [1.0000000017546;1.00004398834998;0.0153846153846154;0.000309885342423303;0.0656325902039552;0.061098595529566;0.00425400504498441];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.6016045885941938565;-2.142734466100825852;2.0858120761161775825;-7.02682798462583591;-2.0536356933752109022;-4.8023349605290297504;-2.4010405506412593191;-0.30326511320249810444;6.2587305183859074376;-27.08810674832530907;-13.796426564151889949;-7.5148324694629540232;1.2657179055632366005;-13.993754178020205714;14.337176242673468352;0.95007486637023708109;-11.590713062406431177;-1.0680634898719274517;17.440524243943116289;-4.4875368138185605105;-14.058014547730078192;0.8559962434282160082;-20.0395995280040502;-5.77237017707560085;7.4613184329846093945;-3.0136335633399800038;5.4374672183708145923;-4.0012746036675279626;-28.510175429132100788;1.1034622212422695586;-0.37073150084120604086;10.685826654425826021;17.714365363665798725;-1.3091184823275667792;17.410744158371496582;0.40857009236105007455;4.3864557647388409123;8.7844354899885050969;-7.7410579299537376485;-6.1299174112828840322];
IW1_1 = [2.5431583880487065308 1.1982830188949669115 2.6001585635606376812 5.1540994285422438992 -2.2870801347448557195 11.201228208860719349 5.8427088810682334952;6.6467158073887864234 -1.1032827925087096421 0.74772365091748227428 -3.7294077987597349377 -7.7130372729941125698 1.8690634678524418177 -0.98983758380027331292;4.354078154015261326 -2.7669998521228160726 -1.6696048706230182113 -3.6634585329337756576 -18.157053467510102962 -4.8897579997617590664 6.0595909219377217525;2.325652297160454296 -11.735829285273812417 -0.47410342921347847778 0.3878000916667471154 5.3037240414249184894 -9.7220049991095720543 3.8545805188098816174;0.015782310709719769848 -2.7122983563318610045 1.8767565328377877609 -0.026776141730747896053 1.2157987108727481562 -0.25711357599672851615 -0.055704170382164713837;-0.1069561948244348859 0.19378465903584249364 -0.40409261062276391474 1.1199196809428799693 5.8871204924071918185 0.17772961786879010182 2.6773219378290096238;0.49469343055996634062 0.38400698218624768066 0.32105036589257557322 -0.68260617194367301241 3.1276239382473201012 -0.22079498220132798281 1.0527693265150144253;-0.63070620016415768205 -5.1384028655611446723 -8.7945186582817811427 1.0817885722767424106 10.907869066284602511 -9.9903539048657830079 2.0865508436215129962;-10.022957620618241137 0.96749448290653405902 -9.9134214246735972154 -2.6318537496944460763 14.756348756575253134 12.675430294624190353 3.6639655063839344784;0.56109389039639157026 -0.83987735503063842835 1.6550780872635790786 -4.4353201855937607334 33.848208764782725666 -1.3059216099482164886 -0.22251461341107936498;-0.29625702639870210575 5.7082576090385925838 -6.821037866474094713 -6.8967883607000306512 15.225706474783445188 -5.5105628640853039357 -5.0046537234747825451;4.1175502163519857035 7.4632412316900564875 0.96192573545324611128 -4.1143959194198336249 -3.3340678462800710236 -16.701160279007005727 -6.1885837426743739442;-3.8152015182890748335 -5.857456409377160611 -12.143920852121160792 -0.47146940675206083782 -4.3653039220802556386 18.827448453354598712 8.7389031000710115649;-3.2672148792039235055 -4.9727821808015999494 1.3799319502393756487 1.9821435887133183051 20.881976386339239582 -6.6244174677866309864 4.9524096714391854235;-0.1702252803299239281 0.2200822899299887947 0.32266401322984478162 1.1049154690100875253 -18.337754211978786856 2.9678282078194007099 1.5313959145562976438;0.64397100929617434595 -0.11509157821577192804 1.2781729368771768129 0.09065122749729503937 -0.31411609062711121076 1.8990689729416729836 -0.40715084473877971583;-1.8947551742704407118 1.4275849451812807622 -3.3158084512810725997 -0.097946595369306388434 14.43420769074860921 -6.172347239918885009 -2.6890903901422795741;-0.70308194554390202047 4.4528111059236401559 -6.1279345839726389045 1.5443351012775099473 0.052522845137654573799 -11.139942477880158123 -13.190419052417267309;-5.7034656405657759848 -4.0049469349788013872 3.0417351081338095398 5.2347592446204620487 -10.579576076861076928 1.3276511753705002583 2.183409043489044965;1.0135083899961325749 1.1443934615209605532 0.95145967394707597897 -0.34826212817324231352 5.8331466062223986668 -3.2378512614734953345 -1.3933582697137611994;21.53117165854208892 -11.853833576751648948 -6.8090649742691580215 -9.9559180442151493651 -22.674494084293829843 -5.2670140370897389204 -2.7194672929525900429;1.9500046906566976812 -1.2290117627132122191 -6.6218411513789527945 16.837729145113573992 9.5234017876323431295 2.5547800137879743687 2.0761202244228620373;0.61689675006167710158 -9.4421399176057949632 1.5100556394062818466 -7.3130568279861609682 12.686000507020313677 -7.1645884402081589926 -5.4078299426937102012;-6.9676218887010934466 2.3694929663216361959 -2.2082515159360438517 -8.3588001424839806219 9.3520595989040984364 -13.475980106836946248 -0.44798109540102176718;-1.9087958285148434179 -0.7481281667026161708 -3.8339353395509330191 0.60915163998695420755 -4.6145896323011648121 -3.790075946707878618 -0.95990744089669566286;-5.7110999266784032713 -6.3955549659073289703 -0.37166499857819557118 3.6170251917069351499 10.497375408021811793 -4.0086708770012764447 -4.9879068812764417729;-1.6680699656907638229 4.2713252763746387686 -2.6529940557031519432 2.1316171567044395196 -11.132791040164143226 -3.1362686804409380947 8.0229871044858427354;1.7990402951459898429 -2.088673480483803413 0.46934019967605161705 -0.96185878315279316197 3.828983655792445262 -2.2255393053988750118 0.066636748695949016286;0.11802003388509824111 -1.0244231614731507118 -0.2094260046925889851 -6.1746809520632073287 26.637058179288533921 -8.7613234960560220088 -1.6266858158026977765;0.14015176691879813187 -0.042383743548553877434 -1.2657970853179980608 -1.0799274249094041878 -5.3345035330652059713 -2.3043495880024318367 2.1854640628366546196;1.3022674748599838424 4.8702896599680745027 -2.70136709676544573 0.70917555517150876465 3.1870828274047973139 -3.2379979512978791512 1.4389340369900487371;-1.4612351080468533038 0.88514675137439435826 2.691242042031005699 3.1584948437448967518 -12.445659265006224103 4.7258437393965619933 6.0620715662133752843;-5.3160059737452396433 0.38208088030345904729 -5.8085060069434586438 -1.0438479328450647188 -27.740617780888008781 2.4241097095401586969 1.4978005343037448238;1.2831090676806500284 1.2152807234816400683 -0.81804760618502403435 0.97459502320228275085 4.4975918655719722139 -1.0593535994722231841 0.54692690598781312783;-7.9771364303808196539 -8.0803299472761249689 -0.063810604949831276067 -1.7826610920615821865 -33.681724162044126558 0.79943260475973010326 -13.613740110634283909;0.76054130351908355578 0.22300150245812808136 0.35112140563707677776 -0.16045337748935731281 -0.92100574319223116326 0.35093396025409706596 -0.038123335857611878597;-1.4757622231033415972 -2.3040278508407094904 1.8408827248979644509 -0.10666873891658305851 -5.5627986462767378129 0.46664625115594343674 -0.2630349811077596911;4.254962658598751446 -6.5265481985226507788 4.1437058910653723487 18.883937230002857177 2.4854052881638488692 2.7539808216093994986 -3.4974192064707132488;3.6283388452016192005 2.4254637717188272106 2.4898093755464509869 -1.1636185121867881342 3.152424402831619954 -6.9136516220082526729 -0.77755884448496648265;0.56887566976092174276 0.22837800133530761215 -0.23430843401451059704 -5.4462138667326005503 -2.4687050247142066084 0.072107639741891382812 -1.5366374730419778416];

% Layer 2
b2 = 0.15541469004387697961;
LW2_1 = [-0.0059436844311054649881 0.007290174693214095461 -0.014207243147166991742 -0.0069954425369945236537 0.056099508612740399405 0.055797140333578403026 0.12795614630623292074 -0.057273066139587186507 0.0044118371713840033935 -0.013725782061573068432 0.005246099236496156587 0.0016407875258725754079 -0.0025917499298464233455 0.0067029428843241737127 0.037488129455049201688 0.12406294262240455395 0.018096681433609033973 -0.0029927641606188408983 -0.007217629565158032931 0.028159270599664148332 -8.7589940221472270673e-05 -0.0041142800106800051646 -0.005105712946817090106 -0.0066282718183084511979 -0.041021294022780561972 0.0081401461886836251614 0.0051483350456758593394 0.040976252690057307637 0.0072367932488265436161 0.044532513070377567621 0.014202067192515778135 -0.013823158632810543869 0.012715674121639097827 0.076965873487055871949 0.0027889962318287382474 -0.26247867412942743615 -0.050122242198397372326 -0.0052525720036025996124 0.0075107196212263124813 -0.57707745242423247323];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00115315130997576;
y1_step1.xoffset = 678.286531932822;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
