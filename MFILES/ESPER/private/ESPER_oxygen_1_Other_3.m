function [Y,Xf,Af] = ESPER_oxygen_1_Other_3(X,~,~)
%ESPER_OXYGEN_1_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:44.
% 
% [Y] = ESPER_oxygen_1_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999998793562952;-77.961;0;29.715;-2.18999082656054;-0.04979;-0.9;-2.02];
x1_step1.gain = [1.00003298043486;1.00000060321889;0.0138606862425759;0.000266418009857466;0.193068829037552;0.0582073296585987;0.568038194888224;0.0415843642790311;0.00819772922900357];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.97836964253955160942;-0.76231502301773523822;-3.3284003330642581986;-3.5951211048402376136;2.0693482240412550688;-2.5993503033336780028;-1.4839396818826251501;0.40691933615720349282;-0.3088847299505629862;-1.8463434340591031724;2.1250983420207760766;-0.71608337233863605942;2.9457863929428107497;1.4029063953585396707;1.2950399598472879248;8.9320049398214553804;-7.7601611078724310744;0.42417413619676358483;3.2619511877929263655;-1.923943276434524563;-1.1808849721204710548;-3.6102575122059237245;1.8286064816232037167;0.54391875193558802959;-20.231522699306424329];
IW1_1 = [0.042515102880976311794 0.049526403455622418359 0.52870278126958170084 0.4016248824467787415 0.42315984578221615964 1.7702719087574372292 -0.25223114712153321681 2.9079786877684346003 -0.74018902154424282003;2.3152715935206353848 0.53004068892165090432 -1.3751223200940774216 -0.52392935232980053506 2.8862373929127578265 3.2403456239783725579 0.98482152746288198486 2.8776072502334519854 0.3240968869362445548;-0.019074957627894593981 0.35575518305408060371 0.66653645646326631358 -0.096474330509378453113 5.3418698877482100329 -4.720802928653468733 -0.61807079293294187039 -0.15777995088988211458 -1.229074881623873905;0.83600157314613310344 -0.96028794074301326855 -0.34501445780286049692 -0.20548753951645379323 -10.563879561700536769 -2.33744695032358063 1.5028930512219345061 -0.95968219079579464292 0.84735699589286506139;-0.0063673517225026491154 -0.11554002413441279151 -0.59496027033940079853 -0.049535841713135915498 -2.6844393430306974224 2.6482158038458489813 -0.37369841886066440528 0.19130692969251242297 1.1595321242497151903;0.21050144555511104971 0.15237738773360148814 2.2894041364657362614 -2.4995780793810502551 2.360062149501899853 -2.0625811860196909819 -1.8405873433686636975 1.1348163505938824169 0.63623063009202351914;0.069574626432265973541 0.03291115248751101674 0.47455343031320079694 -0.21597943452740459014 1.6112335554335142085 -1.5411238189281335487 1.05911506548408485 -0.51702371876094044278 -0.99633810146947143771;-0.017491483020786780661 -0.33074152607297024886 -0.48408125492723963479 0.28187414801872134884 -1.0580831994684745112 -0.86854552781454830157 -1.0251069918739592612 0.088654182483964602546 1.0376292389066337218;-1.0588936425401431762 -2.6722963893258349088 3.811720577133741017 2.2973046685417748414 -2.3640645927043846264 -0.4962966015273654885 1.2561458020715048356 -1.7634445244412595422 -0.65126983850348707517;0.46426042621563912149 -0.56391972436243276157 -0.055797977043447535839 -0.46949401059320533536 -5.8462542426611809887 -2.3136797213576869581 1.4823881805796621514 -1.202377237749324923 0.11812163650263499126;0.028868307387876743914 0.18026956103012889421 1.1042658290102269625 0.87078063059124000134 3.5507420509615648108 1.7349313103430326066 0.74019658877622085402 0.46841609407463630221 -1.053345936004528749;-0.014396910258254855611 -0.84359955037526135335 -2.0207865732592482644 0.097410329940326917386 0.42084284023012008547 0.86219617038504881013 -1.4100921665101120439 -0.73059690910058372459 0.75896125532064551145;-0.075799933487538079246 -0.12330722134583141369 1.5675427626198150666 -0.084082975577135191103 -5.5519388713224975263 0.68842235529794626459 0.044359654201532677797 -1.7669139892205127929 3.037941059930925114;-0.087075826253665306043 -0.052331971996085760446 -0.50690432999860357555 0.29187368224027754326 -1.6191563115106391013 1.5152806756319932013 -1.2743860663772799136 0.69937975381131733954 0.97292192660767462531;0.037543669312062426247 1.3032919391816615295 1.0935213738577842513 0.43234272777285004397 -2.2078817808353168317 0.79322022581499218585 -2.8018864665850311546 4.2789196928672534881 -0.14830805771019403561;0.033035181321142657873 0.49750394043046336501 -0.97436805623353672789 5.9201970070714979855 1.2313712718006097901 0.95509328487379407946 0.22573340960556603774 1.6836377063024350331 1.7938057500445161452;-0.095543252494132688279 -0.37268294233687815353 0.9284235635936546327 -6.8061254311064809386 -1.1320681612292411433 -0.013225987044387927175 -0.11859974560027439217 -1.4096026366802225649 0.23518275535401009235;-0.01705377898736382819 -0.32829438036407876389 -0.49635289851623259905 0.27153042985731229431 -1.1077779485117167368 -0.87687300361724440645 -1.0146247756927964101 0.057754746985038851737 1.08885797649877758;-0.02782131109978150732 0.075652374729817339905 0.35396043526542425584 0.64237756648425947681 3.1392350643889828099 2.6172533068138732482 0.10732481677785306318 2.8609416211031537536 0.97482408142851950661;-0.48126698922892452437 -1.0190445602339170961 -1.4667489892184002453 -2.2527574579664868537 -6.4053743678420858032 -1.7481923486128279066 5.9360163994681487409 -4.1130198241453497232 -3.4733237239528191864;-0.063555058358258947893 -0.16640556093308481178 -1.5567777968427805035 -0.74862238060162100695 2.6131491721807962314 -1.9967048641132953968 -0.68080647394405702233 0.68271829282925022842 0.34467333743264927381;0.83662178690674071646 -0.96031767598191364321 -0.34196657061604845973 -0.20452191065574293338 -10.594170555027746516 -2.3438336321467665435 1.5139146486674330827 -0.9548261134737657807 0.83838475273250001596;-0.16187301345363955263 -0.099478134068008025603 0.93943377369687941503 -0.4079228302002216866 -2.5534650246900207904 -0.055761219893689095706 0.10678292106537951023 -1.2098912342685399501 2.6026501313545407079;0.14158945172083226005 0.30315258697393498988 0.40323769931749736672 0.77171698940362154495 3.0361121676166900052 -0.86210312710743186582 -0.7449089546713094645 0.58876095477974021986 -2.577026724339721131;-10.549990577635709244 -4.7110149995086638697 3.626809336967391495 -0.18601766833334978934 -8.9191329915941555129 -6.7836401136011748036 -7.5336642866730541002 6.1017410711173694082 -1.5006402507620313358];

% Layer 2
b2 = [-318.15112501501459974;612.93716342122002061;329.99015508030942101;453.30458619164744505;51.812994103684758329;-298.82351127788666645;-0.27404391177738623986;-45.284731021390264516;713.12267402905240488;638.62713796635478047;379.28968170418642103;170.982232639507572;517.4617356735947169;-3.3753778309199500285;141.0453750087627327];
LW2_1 = [-166.54322589518716313 287.61774733115629488 -529.3706722333952257 -162.10513866211400114 2.5330641177838124634 55.601383059181820556 -278.82764093790081006 -561.56997155604267391 -9.9804299147814994342 -99.591423911830119664 199.94632235898706085 157.07859602016725376 -1.9715383595829623076 -89.01564150477172177 -107.87636146915539825 207.59086467119763597 283.09237642144017855 238.12332969100000923 -323.01812159213579889 -154.08097492865519484 279.20727543960344974 -246.19000456414673295 -111.37323211742588569 -66.558190146300233891 178.0415828664454807;21.979835615625894718 16.442180101308828455 -65.642930881956431222 -65.190524936069380146 227.72518441225534502 38.065163660529044876 -18.715315005666724346 52.620226687457915205 -70.079249974076901708 -70.236234388093208736 -520.74396334609366477 71.597241155291484915 41.9604977160062802 -90.383105171487756024 -21.34631323536741121 -187.4942582342835351 -47.152843379654861167 262.00258829250799408 119.31405221620910595 -65.317733740926058772 336.92515379440698098 17.242955564805495072 -20.585522043323653207 20.389862110920937255 120.97045230630850199;-54.322935193812895704 -52.822484946166667896 -137.34205441080575838 42.499442890502770354 -267.59627934036080887 -38.047217928585872926 -135.42911211397887428 -224.68768503721520347 60.185101021293888834 -221.68233586758395859 -185.94729906210415038 -77.530512599192391576 -38.449555421736484107 -41.20475483511996373 -40.498534466691019418 127.52917568741428056 101.4440293188128237 -0.19428285528131300497 27.452224344074998896 -40.300642267985388401 -77.813718728096588961 64.808761357316214458 14.713025057086385416 -448.6790008342428564 27.076876300245750429;10.619185791914663497 -115.95631969791548954 -63.243362022661791855 -90.672942674617857506 -58.443558721429297975 -21.345189408079992432 29.654142549624783243 264.75331994693726756 84.714472975517367104 109.96085608790438926 -419.21031442410730961 23.10090394388807411 132.778670257120325 84.578443116171953875 33.356804182583985607 28.046534965165360376 -104.15592203572532526 27.126725382711732948 287.99367591045762538 114.77436117130828563 425.71872215491129054 -59.117808986223728596 16.685361950645724249 14.780781653614035065 84.240915459879360583;-21.444894475403462053 13.62098917277984178 15.695896944158761244 9.0312223235960349399 -81.129107121491685461 -15.724374472160798533 -102.52676665074606888 -66.246463414182898077 -0.89019292139263284103 0.012138280176590132697 -58.246711907847362966 26.493127388218500329 -0.89816350437525127592 -32.758375037954571951 8.5042954732795621453 -45.718569727763387789 -66.603754665432106208 18.166078401419952115 -46.685782719638879712 -25.650402620976560542 -34.954493618911683939 13.618087623892838778 45.036445530841675122 -39.581755827195188147 -19.271133773504288911;100.49535866248875493 -47.807252530736285223 -292.18271229887346863 6.1897346497351426464 -300.4373042275006469 111.12901146361176075 -19.510114199808899826 390.62279238697192341 40.237587427350021585 -164.54354618560930135 -169.31061247148196003 -179.76537455322429082 198.78458620430683368 -154.49303443526019919 -58.71889338948801651 -45.216129663777728354 -121.69128190681828983 106.55159476371812843 110.47069000142938933 -2.612190701431265083 -115.95826009697965731 -58.914832212874166828 -165.64473187960084033 231.63995018624581235 -17.522693307223459414;-0.42400064956039329456 0.0034143351826421293981 -0.40437252515556809662 -16.875174588066379044 -2.0001765244132734267 0.039700685813630183507 -6.2829490407085994974 15.334257338567047313 0.028164920064622359086 0.14086672267790484314 -0.31068322206293197407 0.019415648102889555143 -0.0054743360377779758455 -4.2526586901675633712 0.0033201639343366376803 0.096574165633623282323 0.044374062802781680248 -15.5377887820917433 -0.23800265461645023213 -0.0062227554423872786724 0.10592269241004738378 16.904990849631513328 0.049426224722563021075 0.092012761107130289218 -0.011392935132287486388;4.1942119123433450056 -129.67340241326562023 -63.057337573729306257 17.235902707444811455 44.659452407518706707 31.395132624965206958 142.31690105967692261 32.263324561195432238 25.884321379746612735 18.276146942717964805 107.35122746200602251 27.982930133507171178 -142.06885317701170379 129.76579172162109899 163.72247886726339061 -152.62003664139101033 -158.10959351603540313 29.211948125735627713 -5.4853163355937137879 -4.8235923763998442837 227.43952875280291437 13.822161996482885016 44.554854653420136401 51.307264562536452956 23.88600549945403273;-117.59776713642838786 42.050182230472948675 -204.95188350875531569 -178.70978137272243202 309.05683740530935211 138.48821108994602014 -161.86756025764844935 -93.244194278768034678 90.08264936395309519 782.80406802135701128 -375.84460075192100703 123.1507712145404696 179.36713318195603506 -160.52600947645592555 -156.693632189881356 -204.916583971165295 382.82198805834337918 -47.850019704363283779 -110.24256647602653914 -360.1216616278805418 -138.76450634507799009 358.83388125479251585 584.49446905272077402 -41.650081466340843406 351.5174682380815625;69.254702372647244601 -1.2543034658176157592 160.99470270399237393 -45.49577303871624423 152.58529738720483238 91.37517331357624073 175.91185986347355197 311.39912095214049259 -111.35384066729538688 28.182079556423655475 -60.212359273087933786 99.275546210397536129 35.841765676816415009 -82.553965198120081936 -40.332129678434490927 -34.16133046827592068 560.93572999265711587 -44.751312499869335682 312.11166862203037908 169.98893451225399076 252.67302696865553457 -28.524168212992098148 -89.193575882340496719 -66.159163206056376794 12.259838845263814733;-6.6904525559480374497 -58.953745106966486844 -109.05445017814186315 -12.726680378506349811 -80.745899145479356207 31.721383916849649864 40.763356746665088792 -30.224626237231667858 -72.69187805425454485 -280.33176897210262268 -138.12460130863436802 235.16749373738315398 33.609061390380595924 130.44131849220818253 26.310482646232301818 -51.962961944392517921 289.22118867724776692 5.1376961659917492753 85.173327804272886965 -42.020329017776219871 -87.861608200969214977 37.30026290044362014 16.677600778202542386 -514.05895944313829204 -90.195786727874008193;-11.218447956472985538 -34.147226123100438144 202.19266235731291204 275.39115553058724117 49.092322552695819127 11.229168012248997854 -117.92270930515098826 234.28285954996221108 -183.7456517214322389 411.10015355250340008 846.4679305235757738 -0.0036155638187094218949 121.25654529395936265 -97.86942020601750869 128.09188557626239913 -103.6298734205104779 112.13477652324770872 136.32237092771231346 -278.0973304114870075 9.2421192247466770198 442.97468593993744435 471.44084055000331546 -110.65543539237569348 402.65127473607981301 -253.00461242035217424;104.97082531342942957 -361.85945750772941665 85.930545309944633914 11.630888678004762227 68.064416786694351913 -158.3981594616907671 54.547572708346770298 -11.094903659268533502 -107.7262551284932357 -243.70410534904542033 -62.056689055057255189 -208.70484019373537876 -151.95165704365925308 73.15084644933321556 -72.183529641175638858 -466.79024087271284316 435.30911084844825609 44.723502784060059412 200.85948070269358823 -29.218068708746432804 24.201518532608197631 102.84612706973071283 -205.29392266677766088 -24.997204299825600771 115.60075109006770333;-1.3924840601384811389 0.45221047654960350171 -0.11879482275378833167 10.196876610843110811 -1.3198769674257284645 0.17576516351144685912 0.38406024451448450563 53.177139506926522472 0.10558209142905645994 0.55366498724540635923 0.37014629663546388949 -0.9770808918136183463 -3.9726349750411311668 5.1650644853728620021 -1.0107806870393292176 -4.8129075478942553445 -9.2611424428521544883 -55.921216503037527445 -0.50785257409008921492 0.2642650515469232575 -1.1172695207337948187 -10.104015171272342499 6.4711322212812367738 -0.87211187202172646415 0.94459439982354520549;-467.92934027683145359 179.81972557094491094 93.615971720697672254 -1.1732298452535028233 77.519311841785707884 584.71328799037496537 -243.53784285715630631 -120.24334784638232065 12.368824845155131698 -236.50162317390140743 747.25567873099805638 285.86566413733891068 -84.128375660975549977 -598.30109973670710133 -18.512441250166634887 551.96861044285549269 214.02225846021298139 104.7075644996349979 -264.23572467575411338 -54.459282449566700279 670.55571720848445239 -5.5824693542788610401 135.79665682350179168 -520.54181662623852844 -332.40762518351090193];

% Layer 3
b3 = -0.27076688934907783279;
LW3_2 = [0.0028644301381011904803 0.002352438246354668968 -0.0032307264234403489274 0.0069566984326749773185 0.0061438294689674273485 0.0054229492280375391974 1.1158639937992436142 0.0081914149282680537301 0.003562741016192667344 -0.0049153756264547808844 -0.0026047212106176842634 0.0030828734616287867092 0.0027721502877802125554 -0.10674694340233679968 0.0046794245627825086994];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00454442172233583;
y1_step1.xoffset = 0.3;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
