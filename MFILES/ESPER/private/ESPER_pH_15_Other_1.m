function [Y,Xf,Af] = ESPER_pH_15_Other_1(X,~,~)
%ESPER_PH_15_OTHER_1 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:25.
% 
% [Y] = ESPER_pH_15_Other_1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.065661953389117649893;-7.2398985561618225404;6.9536362648949054943;5.5094053611926439018;0.57055046825325961279;-1.9818424273356687326;1.8561946602359797875;1.7615537383245138958;0.92725704283221022095;4.6789726074322821603;-0.37505933790369622161;-0.88301011894640779598;-1.1505707892991872132;1.508673012091857224;2.3360073526064772942;-0.52011701073620908442;1.7513668922193110777;-0.12493781296598824304;0.032042282980512058754;-1.2661514293661668695;2.6220324599209190453;2.2444150641510409727;1.2304075145447803674;0.44890136000459274213;0.083272108802360841895;-1.8595150600203704805;-5.0456180075226999548;-0.4933353036899045807;-0.48207311674676656121;1.2057611038932189995;-0.72999807023206253476;2.0190745035877117886;2.5925998069842308702;2.9445115022825443241;2.2559313562088800786;1.7559178007453717374;-1.9287768430915590567;-0.87785437297324753203;-4.4977648231425968461;-8.1784955800025649353];
IW1_1 = [-0.30718284471041090722 -0.093234417957633833329 -0.37166392439526108049 -0.13093218028456876656 -0.23850874974877472878 -0.17459301783069217096;0.089729189889492577681 0.68942064472837849554 5.6362982522542877106 -1.7532061517327695022 -2.0484714974389439668 -1.667838852751705403;-0.29458166817746539445 -0.50076759350666177895 -4.8033109871713266514 2.4011659827736453465 1.8477345569200112063 1.3862877996284386217;-1.0260206815391663682 -1.0688242165139265616 -2.0860664848127763449 1.8586431730085928304 -1.6014214363333012514 1.153095803083241444;0.036607251495098025451 0.12745028144618600341 0.37055604103293693363 -0.10593628189464936173 -0.28345168635394524248 -0.37386227032670688031;0.075098159363029687308 0.32206354905675027567 -1.4300805057830987543 -0.46985548665196030793 0.6220508654624455902 0.069683443218070822978;0.43903465416473230754 1.3273206444014522543 1.39195004615980511 -0.17704356297562620637 1.5187426258430820614 -0.1964279527143555637;0.23163610503096440651 -0.30474216969861550597 2.6308613672833627284 0.17376165417768801857 0.88515334497183795204 -1.9742672686252602521;0.18670490860574168179 0.23323041414517015069 0.88656668001407534785 0.12184848642624684922 -0.6615315815304972924 -0.18915418336686193324;0.42474586734286989831 -0.15260263489701589301 7.2193640232739477725 -0.18863360683752078417 2.5429020202531940065 -1.3121475282013372876;-0.61895327425364610185 -2.5427203173725105856 1.2412170692610038358 1.5198988900236454214 -7.9440287879297493134 2.7232230906135628246;1.4910158273101354887 1.4104577864434610923 1.2796680830523081696 0.56933342285469323851 -3.8380746987786853452 1.6064185217191011557;-0.42333400800399917374 0.51407700327851835187 -2.0479947906985933592 0.23401221562668902965 0.74713888667230399232 0.81831116864854369641;0.046218174799011295384 -0.15387014623340053432 1.213744793372660391 0.75625939848027312618 0.14905559050396374743 -0.094392210859016070779;-0.14806222605383506652 -0.48533406469428652663 1.9465223666655191437 0.40274023606321934787 -0.63736126567360540385 -0.16867695250541531182;0.12115586928666600974 -0.12885321817762948604 0.17250565379823351586 0.50693897011454336354 0.44440048173982565904 0.40161016225200268925;-0.9598339022492261563 -0.1128083925111622865 -2.633620970793392857 -0.40612175845555059661 -0.86200891341565188952 0.24652069449470292994;0.52848302610313169225 0.077389228558443018402 2.5126553542530252194 0.34111615676142964526 1.311840439040143913 -0.99812709545133226907;-0.18670716966765263378 -0.08786564331333540645 0.050533275234661965969 0.11970623804287447434 -0.42033473198655191272 -0.14387286940719520856;0.70995472276485915852 0.41284832996790976622 2.3971306872117255082 -0.80619726666042568208 0.2982502511334890194 -0.37512579313181992902;-0.076728951469198961033 -0.36470764997756566217 5.2131422113165495347 0.39945113116263830655 -1.0644798657837339917 -0.4079786455745346152;-1.1281967352519781667 -1.2439378014024156105 -2.3393819600431711159 0.74947254508476568446 -1.5053234915163704599 -0.51028057824870831638;0.39875084355907297606 -0.47237111067754489202 2.0642485267499481871 -0.23680151330156995471 -0.84264562377232343771 -0.96078733273904715073;0.038963486218831805408 -0.36317554467646345762 0.19554516213917652601 1.6831596947372740036 0.72788970225572102724 1.1521864009735161005;-1.034610846991872668 0.60736994639130603701 -0.97256635166659055614 -0.26711850232916578562 3.045649295563895631 0.25337072212258043846;-0.4077572381819263847 -0.25913279783048537297 -0.48857462215662428306 0.58257947037677659807 2.7584675372256115544 -1.4608132534379951739;-0.046705980069839496405 0.38277537980616238578 -0.078384468530403886288 -3.6560959401037549377 0.81728320889942240868 -2.9622383363559658953;3.0752419759517768405 4.530500234869905718 -1.0864304131399369346 0.13198361334769553865 4.8392886113477509014 -4.423904177837346019;3.1810001490707544569 2.2198057943420241855 0.46380052035522356668 0.32465172479229958968 8.5342711237442525629 0.40892612583407522697;-0.67546200622432028826 -0.36509517982954825532 -2.375829938531944574 0.76517413552476376548 -0.35702239363147730833 0.5297339589287280992;0.29873335129901945617 -0.056068872763713514806 -0.65637063941852302751 0.41873139919960988831 0.20409216673135854858 -0.47921971334179769286;-1.1818054589216586692 -1.2570855503168947287 -6.3769844118991301229 -2.3788589714823378252 6.9752899249015216654 -1.1197300300218764324;0.17567490226276388787 0.085444162033669696088 1.9853327466861145911 -0.62907372409620876397 -3.1600428297734830529 2.0745746025738860396;0.13785603423081366214 0.07825018855263626838 2.4246542024705814988 -0.54850352747525932262 -3.2711424435883276196 2.2254549043446023582;3.1119670116586570785 1.7450932369507130559 0.47124672059786409939 -0.06482203713058370953 4.2460454582742137575 -0.039829470421395368751;-0.023702553886175373871 -0.28308270466733670423 0.77644046629426943795 0.5381225129849548372 -0.68518664163214759721 0.23623427080750070139;-0.15732119168216102123 -0.048884884442966271278 0.40031057325836150174 -3.3124417339414589101 -3.18548369646820273 -0.92003112743948745056;-0.69846844712969624602 -0.55923178836854281482 -0.47882281028109213716 0.39431603747673044102 -1.0357191065117754558 0.84712831431019164352;-0.26079455349406571729 3.0231430642078294113 -0.5433297418357617703 -0.49252395772726959011 3.4614396957498314578 0.075713092877462084829;0.026526806195394089793 -0.26315748423332457895 0.76014550690357962637 -6.9840970447815680089 -0.87581584248674804183 -0.68941984586895332932];

% Layer 2
b2 = -6.1986720161861690315;
LW2_1 = [7.735977706566035117 -2.8174940921189604026 -3.826058430066590077 -1.1226232302315624079 19.586742861782180825 14.94861309815926198 -0.50417689650858332762 -0.65815756458609409041 -4.5210712268227641886 0.11215542033788696019 -0.037609876115429693999 -0.16186775421643107009 3.3091819751830402474 2.3046574352841662225 5.0468712813742371281 9.2564862181589067092 1.5585112089526882428 -0.93536563705896413889 -11.316208449868662811 -3.4780441092031373351 0.14219986335996034899 -0.21515262148360603245 3.6862489593659577558 0.2672854352500526609 -0.48363626979187501753 -1.1328746006035803617 0.19977230752736663266 -0.017866320263115863937 -0.049913682045490466443 -4.1122997254296524972 -1.2245576711134236181 0.072564144637676478156 -3.2657743291148246811 2.5097322998488111878 -0.15735316562745915725 11.217511383163989436 -0.18703590017487070618 0.61850126896314849834 -0.14967171681329088928 -0.97697045709030938543];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
