function [Y,Xf,Af] = ESPER_pH_13_Other_3(X,~,~)
%ESPER_PH_13_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:24.
% 
% [Y] = ESPER_pH_13_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9;-133.803853032615];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594;0.00432440760873659];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.3334813164102534699;2.1031073725406246311;3.0198045221201423871;-1.7936536691494893159;1.0844006270522141833;1.8691636151565627078;0.75402695436851363553;2.0212900278554495337;1.8729379849879395081;-0.074882404044200837068;1.6546110044270081474;-0.51640674124477836671;0.72697906716285143336;-1.6559357446341440578;-0.51594122080667914609;-0.12623319575154870464;0.78926326805866053871;-1.4779692328625912978;0.54873054990905922867;1.9790283323658353076;-0.87998422589001101812;1.0516071334639098822;3.4215936476334287697;2.7423924326153445996;0.58631394021554594786];
IW1_1 = [1.2124731609145251721 -0.23971673745850652359 -2.2487976775392426454 -0.52128239136891552086 0.13068469080515243697 -0.086194454375357151821 -0.4254877224941413516;-0.85199813701159754498 2.3230651524074183989 -0.13690928952591222001 0.12338950911448123837 0.38261943737198778059 0.64385045300192322859 -0.073022322871311010073;-2.0759509485746407975 -2.2040622984357685077 -1.048350693192552141 -1.409568881540789631 -1.2228498103913165718 0.89513471192743054861 -1.5456166626930338825;2.2968685224279594692 1.4905166969217780171 -0.78890712153714270816 0.48316711752455626661 -1.5640089856321248707 1.1658911907676003938 -0.29866659123259825526;0.37906771168180597442 -0.029659438843016045634 0.56668919338773049432 0.117944417214280034 0.10917847380648146305 0.69251114143516501187 -2.5448841786532554465;-0.28447151065797326996 0.37335535531232943995 -2.0748400882628486031 0.12500548792562232725 -0.39501429230818591032 1.4493467455416391143 0.17992238829474183071;-0.48264153233120121733 -0.34999094388154017299 0.4015079955324742933 0.80067377993265043123 0.266938374436686221 0.068605104742216607705 0.26383878467784721567;-0.52865238392415347946 0.30157284273772078098 -1.7813184527693068926 1.0966395296845019569 -0.67755919420584775903 0.73523672220134994593 0.88515136720578690976;-0.59180624972710949017 0.1021090856659784829 0.46175055123549468838 1.1045489037628417606 0.49562768346211333315 0.9564915260805783026 0.79748384824035745133;0.36105565037245224147 0.067613565842390740968 -1.0028286972023088275 0.19645188690165718559 1.3005456976444447204 0.82105955009535680489 1.3098141841741475222;-0.12594180392875337082 -0.15483855080621250488 -3.6819190590422725684 1.3462651460190389052 -1.6393638218573878262 -0.52615556526576601204 -0.14964130843863557296;0.86678025223001309296 0.51107510760554830664 0.85186694084456948683 0.29419035113189850872 -1.305354789302970886 0.80862170419137946453 1.319161174199534603;1.5122250440642934777 -0.27763253394958353759 -1.2250006911940367615 0.92329163641402733909 -1.5055017121143448033 0.32134941087187574027 -0.62390934175803158812;-0.42764335510793360928 0.065423034919740871707 -0.36292557710454476094 -1.4515496120709543426 0.30583377701949432392 -0.36448589858265245667 -1.0481751818384414943;-0.68748277830684845213 -1.0057288575370633144 -0.33729730284511344474 -0.45664385483729169612 -1.477684994541629715 -1.6933205613362483088 0.49003713310098234723;0.018341999405050865568 -0.22216256634802858394 -0.082737320915488229978 -0.50100885814902484938 2.4381446424744415147 -0.034120766113738293379 -0.8223240296787234227;1.037905538387813742 0.76784135738270853366 0.60400638865923539367 0.33640922990710908635 0.79755666613800779707 1.4372145961341777909 -0.7183521448914327312;-0.75055985696489535552 0.012143427210721566972 0.09567363766081021792 -0.9309715850337556553 1.2081048545153521001 -0.96447168860223009279 1.8153068807495109649;0.055958201286869090063 0.84221712892552269558 0.2441620128032953585 -0.33724866301397360413 0.21289307341357988079 -0.6006786302688340573 -0.16039063104492534695;0.63829945552092626215 -0.17877643732711182012 0.3699298646398308521 1.5501780832308937885 0.42755369540458421085 0.1578394539249671491 0.70529014506713505472;0.45863388062552834512 -1.7820705309699429453 0.82754737744648210196 -0.81857110584395276209 -0.74571293838647734198 0.75524122418452821481 -0.79765081907579082898;1.2123149238118295923 0.89539740884749585703 -0.052494134855297108766 -0.54953753871708277412 0.66883495926304903367 0.036972098539038808496 -0.17307378876489770692;0.74312152815305554387 -0.76360783533591347627 1.6579100152734560503 1.2797465884182166462 -2.9661405124327528959 -0.036989590444492459476 0.95629843416812421175;1.3734023158165398204 -0.89746458751405500109 0.57313374416384688104 0.5951828865387308598 -0.1207540333721647402 0.33105047929544040297 -0.16413275015178768745;0.35892771075135621039 -0.33919485917597358426 0.96265046917152741202 -0.77807001084144911118 -0.097687605204336558362 0.55986204537740724696 -0.3489047922143064806];

% Layer 2
b2 = [1.8567932259675758999;1.0045472301860156605;-0.21658243320836140233;0.063202005171807518202;-0.37224343385020114416;-1.6393713177459152686;-0.47926026920302949863;-0.64070350618736471304;0.2609703572993619658;0.02619476980459593124;-0.25632431613617318034;0.65543346104515542994;1.0898580193252767057;1.6315627700498485098;0.61693296228988125929];
LW2_1 = [-0.90455799235930922642 0.078699993461349621038 0.71810810147095793798 0.96944357373254419485 1.0071987267448598846 -0.11442547351981055548 -1.8584148088506351471 0.43186645058161049482 0.98086714760858528805 1.7121834486551421595 0.22870946421449356301 -1.0936740800915338845 0.5537063048681114541 0.59700860193494009742 0.1198199096658029289 -2.0851445985716785536 0.98447961098436298499 1.2151686391669487275 -0.049628558626940592891 -2.8987285420309150119 -0.76866688971474161907 -0.72893445162048198238 0.39181303062560002282 -0.32222146065284029692 0.3629045795490282722;0.93921103635541436372 1.3800533810935666779 -1.500674450445961261 0.38160214542208475974 -0.082976086414004640579 1.849552831737737435 -0.71150441450278822941 -0.99195881552654241453 0.24839188710010176586 -0.25189226764694655492 -0.64273843722554213631 -0.59709806909186402546 -0.12759940481171566651 1.5951230004499896697 0.026989609690135276526 0.64745024487059776863 1.2551027222572082032 -0.87652157459580648524 -0.56206433431437341497 2.1512143847747737802 -0.10396010864497985671 -0.24538479599016949084 0.12922670868127009158 -1.4799332115149608224 -0.26201782497018943907;0.93496127012184515603 0.49654408653579185096 -0.03994480543952427104 0.13044676307272906612 -0.34453486623968204716 0.24231974389410637638 0.26324947378705776391 -1.0513916448868456666 1.0365129899094358557 -1.5920155979272951896 0.11312570086820385173 0.10787894034057125825 2.6127777510373175751 -0.26614461255953353325 -0.61129233050134734739 -0.093155383641090092062 -0.43680455206669249746 0.0026967693668210959701 -0.32638658237464374112 -0.89260293984704297543 -0.058158584585304436143 0.34699797707598395435 -0.42337570404935753743 -1.8607558873065856986 -0.0091152254082068305541;-0.11055635294310910133 -0.090188985660922191268 -0.078217613470603450376 -0.52055203519243842258 -0.23554857759627800817 -0.46846863832217155998 -0.1549422242949660411 0.45619744631908509813 0.32504971600512361229 0.18821400343821645396 0.32958178889033223902 -0.26192406112763683135 0.36432423352219300838 -0.58659110559544491714 -0.4125966359941508621 0.72200391841268907189 -0.6207922249531317993 -0.025038676995420380833 -0.41098582398993649401 -0.38927834363583413424 -0.12604476432531647179 0.46711554980111463786 -0.25850919424267398972 1.2501958977479470381 0.019509125927089986802;0.53725995074338117607 -0.20930506368349613422 -0.1929672513114090715 0.62001656830256257624 -1.132735647919428601 -1.4200552076838495186 0.91927955632401814334 0.9723854129540610014 -0.57548913487661024213 0.73090128103007478977 0.35906450081192953228 -0.044525217848521606023 0.039800317797773349104 -0.9813610749879306816 -0.80083802564749440034 1.8606341255398426426 -0.65558758372095027323 -0.47929977614144891884 0.5280272318072023463 -2.9157187342782702189 0.52021867959799306114 0.73400922817642599849 0.42455593373950101244 0.76225691337115719648 -0.72953533060239916797;0.35091874700047037683 -0.98353422605672147228 -0.25507521681472994368 0.25933787977546435277 -0.17767532254464790675 -2.1074249434311833618 -1.3814353337071152428 0.85455869969703002198 1.2875108598968190154 -0.50348122215728519091 0.33456202047725375204 1.1750401051359293803 0.32740081596657311103 2.9588761990855854123 -0.095411377188171594965 0.065584802639810590996 -0.37049464040143542665 -0.95725870787046374311 1.5662000672937705925 0.22495935238949160695 -0.68045169541796102219 -0.80229417815259596036 0.49711033200441018254 0.52618808015619433771 -1.2494071388086829266;0.32492119458785245767 0.15533253496068710753 0.50708253596423236154 -0.32001650300042594477 0.19346185148371747298 -0.20577814370602889871 0.62665294571619756248 -0.87725978498899848113 0.3183928117650548506 -0.84747960692829804596 0.31756734269582143071 0.97457390935813903443 0.0039090217452174115878 0.69739250253089046794 -0.50210405174892269731 0.024671988760642974553 -1.1219262325255998647 0.039931324927742407882 -0.21845448834823344431 2.1316811281103302811 -0.064815821477952742513 0.26661113650216083926 -0.1880518802710808568 0.2420051348060066887 0.084929452068921093555;-0.6148167344235910825 -0.11305169988404246972 -1.0707388732744906878 0.33960204150967793213 1.0481780577125454634 1.7644435552185717686 -1.5181214980216406474 -1.4956022173406520182 -0.58051339283416203418 -0.26900963751656342682 0.805118240671570784 -0.42229237616716963633 0.41280145793945532962 -2.5923978084007290867 -0.13281641506040556266 -0.21825748179997150888 -1.1003259390465409684 1.3510390446633857575 -0.15535219096903343794 -1.4297601595292677157 0.86260735393487897316 0.26029954136866190195 -1.034600449042780701 0.73391326863150396775 0.57628445412669881964;0.32297700132925383221 -0.5279860451401542365 0.2982595478166972236 -0.083215634479472791463 0.26913532119037530954 1.5645976681182938162 0.5198808819465632336 -2.1419231403417375859 0.43228247370552724815 -0.51825409387433085673 0.32265134827723462863 1.3085482293918282437 -0.28828916466759690884 -1.1950359644921040303 -0.052507182797085376336 0.15623858681315960784 -0.8267849745850227583 -0.0074958808868551820778 -0.26194781720807525094 0.21096606256201816398 0.051817990494817271763 0.2786625239170046342 -0.05312056644966459823 0.1877224512531243672 -0.76403693421720830781;-0.32441147509507334279 1.0160030020622592417 0.91902053933137206609 0.75801069692894096352 0.30261932582003558956 -0.61492738327982965352 1.5946204334414351145 -0.78386424530970633118 -1.2029490461216729713 -0.039416602986257077978 0.62220860378259157386 0.36054804472381490887 -0.68252021122860107027 -1.1771835183700531946 0.77895151741503965148 1.0302806970992792746 0.50258007315559727335 -0.24238512872013920352 -0.98313950522780457764 -0.021098875595793532139 -0.3988292577309489606 1.8351675321275555675 -0.053195542044286579786 1.2490134330230926452 -1.0968415385812539942;-0.013249378966458247656 -0.00031536342039719051158 0.4461187544356888246 -0.2384331319872951549 0.29898256331323502799 -0.34597959957104174045 0.57414729355434612756 -0.65338208366894923174 -0.062575140764426939732 -0.54679709571985324335 0.31044753503775462944 0.65699135599582614287 0.030899572497380574376 0.66600847603354718096 -0.39415568430877367945 -0.30605385618624869615 -1.1052625937146645096 0.17068635946876167808 -0.042397010789410223552 1.7686297734544020877 -0.06924646113427310179 0.089120683434817465907 -0.20535086206444866375 0.13422791437243553059 0.2329355035960310738;-0.19770797595717232165 -0.32567427331591036754 0.35477170686737252714 0.46150553402391730762 0.5787064126874256198 -0.68000540228735517623 0.20962765500734348301 0.61400315644653880032 -0.41242289979710367032 0.49593266116575007718 0.35157566285443503373 0.063941661187250281584 0.029225539767389199092 -0.095244976274490175672 0.3754497298321441412 0.4216441191270686728 0.35879335696068287431 0.45509669543709396766 0.3454513386434784894 -0.065025672734994918733 0.0046105868030440408378 -0.11710409741563967967 -0.046937510109090370414 0.32231643181971775247 -0.23659347862429522258;0.20738050790537065904 -0.11038710273068368106 -0.19322360222160758769 -0.1503696618735382573 0.50902827783171544773 1.4184997078095442635 0.18138246292874257715 -0.94515829586540200946 0.35808762727539705795 -0.40149326385805916839 -0.0012373672123604836492 0.097165325991170281572 0.018063835368631011441 0.14563395441996157542 0.29868934103514005463 -0.3787699060507139226 0.35627078897391561974 0.24126905941072840367 0.18321304064770446707 0.90138928198158696503 -0.1410671451274448096 -0.61715251963799977464 -0.20713081088060969481 -0.0052261239062717261203 -0.18415146965344481034;0.44577333979366823291 0.14426610446820176126 -0.33750989578164070082 -0.11946580074958527973 -0.60838049748584011045 0.29707528458274989891 -0.0040427865745587838325 -0.60739372860952844935 0.52940581287453647441 -0.23150794995298004664 0.60978110240015415133 -0.072304519856704649317 -0.19935005119111215421 -0.43513669016127931588 -0.82085702769686275104 1.1688325093060776272 -1.6209136450806924667 -0.50593257018590820362 -0.66025563443192014645 0.21018427044231774437 -0.42283156750268080515 0.79785704634596277263 -0.85082554632908202752 0.82962139391984957015 0.21761501666595353677;0.99362215508863549474 -0.12853776595338453625 -0.96726950043858006545 -0.15925251047537875015 0.53587266452675730299 -0.037322195612518073438 1.4793908467195828749 -1.8417472844078752736 1.4840721687372475657 -0.92004196377059255241 0.37448771317257939506 0.79287314534556596612 0.61680426311465397227 -0.66227853877395381765 -0.17548716311591688877 0.37685628392459002978 0.075575083786320926271 0.86306757018758062383 0.91946135278316565298 0.5005615808581217463 0.53963900427166111573 0.68967485857613386457 -0.53058068856584217343 1.8381446635495102271 -0.19155820980077156723];

% Layer 3
b3 = -0.60940156260191202797;
LW3_2 = [-0.20770803107223684281 -0.18310116927793793073 -3.3391673166997164479 -3.0680973834499734032 0.59381122444503786628 2.9240712524556751184 2.0911295853599831673 0.27019714803456446051 -0.71978395294234998048 -1.0708958724864625633 -1.9824546885323544032 1.2765335236644597128 2.4442495311519172319 1.746326625669493815 -0.27803919838081259108];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
