function [Y,Xf,Af] = ESPER_pH_14_Other_3(X,~,~)
%ESPER_PH_14_OTHER_3 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Feb-2021 18:30:25.
% 
% [Y] = ESPER_pH_14_Other_3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999984769129;-0.999540494077341;-75.751;0;29.715;-0.9];
x1_step1.gain = [1.0000770825255;1.00022983623563;0.0140762793578401;0.000302617642608564;0.251952632905014;0.0422119037568594];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.3217087941273704121;-3.2157586064446634921;-1.4971843486226603659;-5.738038623821072548;1.0333701546406459659;0.77604313842434635706;-2.2548259579647891293;0.90081994398784459577;0.91871067360203173546;-0.89027070715273737278;-0.66106740425808119266;-0.87945079663548930693;0.42831687839562926357;1.0348249615817428637;-0.64134092531121933423;1.058022806139144345;0.17830552542677255423;0.57443585956203757625;2.6766977729715804024;-2.5007262846820843549;-3.1333050662024728439;-1.7139369303917408871;-2.7493556817027777761;-4.2822236141195961778;-1.2950366401784172421];
IW1_1 = [0.70744333536106374094 -1.9577020827579636464 -0.046029508698991736249 1.6876785673727314752 -0.25296216745413413474 -1.2057002210490759264;2.0778126742811866556 1.1542528248624370768 1.167508118054795041 -1.6471113317282584099 -1.3320142153457878997 -1.0154488184667351813;2.3298220731413468165 -1.9295728793349684604 0.435424389672468104 0.60089607064918648671 -0.4119458609781561087 -0.51331007250923643692;-2.2894263267763159675 -0.032538778584756351819 4.8948433285813992555 1.1134982354569684659 -1.0612998442468417615 0.38859160670781961455;-0.46427835121225391468 -0.11171236956056515566 0.84462450220894291775 -0.64691307049609336755 0.52400177521172530692 -1.5867110265168147265;-0.2880926302196485933 -0.46548626829427391938 0.13769247492688652112 0.430548733855609711 2.1848624480160219186 1.0265265116927602129;0.22013508290152142277 -0.00061712498791657247749 4.6213075585784633148 0.6116447387965915361 1.9996055836897028701 0.2935198659223475226;2.345924976602333345 -1.3893207885520693079 -0.82150623395281774375 2.5353247952474418092 -1.9219515426581199602 -0.31864534207997730064;-1.2409944665035383959 0.24382174040342324828 -3.1716222774500630877 0.61978878857541219727 -0.41428470408181583551 -0.10547259172758687018;-0.40467106902785443534 0.1848553787984192065 -1.2279680221929392125 0.22934124613618103727 0.48979489949897014878 -0.77011951754239427181;-0.67467602810281834813 1.8915055155582134461 -2.2925027141174547651 -1.0995072214969827673 0.18529353097537751283 -1.299903653543046822;0.36952710588626203059 0.01213255132813916351 -0.52781057227418204381 0.29634428415288976977 1.0697394860081301804 0.84366921780635195649;0.79168707562471529737 0.072817308713129760833 0.013776478689267712338 -0.040085963456433060248 -2.8359410638354720646 1.0204187056545532819;0.18256656686715191928 -1.215206003865755946 -0.84155809635462708318 0.46470481653543421752 0.69230229094257422773 -0.46978672115936975784;0.52356472814434540375 -0.87090159640911379846 2.1908750158806755692 -0.57225306247586138486 -0.69961198895331344616 -0.18031169860737364385;1.198675351093850372 0.36581235002198342343 1.7979203004450110548 0.51599954297748618082 -0.8363162603085591007 -1.2704705981292176986;1.0645295967796730707 0.45574336757897743189 -1.7600453064178485096 -0.35971219283304661785 2.2847099515895705757 -0.33766598667732833361;0.061163726492347150754 -0.54444302268166644421 -1.7597234770205636423 1.4407820743753083637 0.78145589117739577834 0.53477869819352130687;0.81277286350754984756 0.81055548895601803316 -0.7399264550847228783 2.3663547945911238557 0.77552357433926333297 0.85819696814741641688;-0.17614096172169180221 -0.084809425079806280423 1.2163352546108581187 -2.6367205891889335945 0.18223445551539851905 -0.15645338342471146187;-0.76850579948685371345 -0.70362249289279943376 -0.62187872559378531978 -3.3073054654150899623 0.28942599063487139954 -0.4162999490780511791;-1.0226674527370795964 -1.132893555011332376 1.0432309317201544641 -0.65124286350416138447 0.90996296552093791643 -1.000233735438212257;-0.93203237140009420614 -0.83717705117813623339 0.84394533979655050882 -2.1577539287924771827 1.7370957962848843081 -0.11232474227605045158;-0.98858271427657884445 -0.8642752676086218333 -1.4488029441661185448 -3.1853024685809501193 2.5571144624536708001 -0.56924002352345626221;-0.68725850487307704739 -0.50193686295086159532 -2.4430878273867331352 0.75225183472038581467 -0.13287589456261436616 -1.0857467203084474328];

% Layer 2
b2 = [0.046738931502093711279;0.27270362054212976544;1.1418221808160127217;-0.55172158766771195459;1.1473132722583379017;-1.9999702715042735335;1.2512389236907999202;-0.82035769649735457154;-1.4278650765022780078;0.74856686866713817441;0.37816346163787428747;0.99120350077784824538;0.70759376763863901516;-2.4015730586934713742;-3.4326287722468493691];
LW2_1 = [-0.2306819309993519973 -0.2323116757864792381 0.029227489061106750462 -0.50552039436466056355 0.092116088428912334951 -0.62232767027032076523 0.48731718676807822543 -0.09188383803807026462 0.11340361793343453622 -1.1883758757999305367 0.22604644208863972077 -0.71595489408548274035 0.19004168866182963304 0.36561453134312887903 0.075094457502736369769 -0.54440329416455512934 0.7184436816958863492 0.24506211302571639932 -0.14911745659668362851 -0.62327904647778276104 0.29752351112205532857 -0.77156156017952803872 0.42164199808299712702 0.26856524114159491257 0.83669294275781469494;0.23045686770982889979 1.1612394646909143248 -0.43691918495942089207 0.32395341332192811867 1.2386052159427389796 1.2338763360563078653 0.64121153229427985121 -0.01293705354018640126 0.75521457769847755159 2.4977094785507629737 0.29411670229649339303 1.5111222549717808761 1.9363451337555253051 0.44320990377907881763 0.18044770208533614242 -0.29163792638748531338 -1.2347961360481998216 -0.54786360171989967327 -0.48590082159042491394 -1.3024903045295044279 -0.61301836011117405434 -0.53517997437134257055 0.028086692951173736904 0.54453660307112661254 -0.25950968111554995055;2.2417573204272818188 -0.94195498984893588634 1.2475465566031942455 0.45223323498041351209 1.8120535300886921881 -5.6051896703514074716 -0.97263886351775385997 -0.8445744438370992313 3.8568449689816355352 2.6410128241628343382 -0.34855841273394716495 0.25245283740103491299 1.2649684609612343866 -3.495241219452434045 2.3617442685009164549 -3.4147818550035249352 0.389815836093645951 2.3551873492311985459 2.4003885728547542655 6.0035750300835797333 -4.4257200194807513327 1.1748945978128433332 2.2888326288302667244 2.8664632269164203038 -0.29543281455167924587;0.13982865105480810075 -1.6200411389033750886 0.014388955439768997407 0.2315813954085197135 -2.6849933630751308122 -1.0770398608093967319 0.64843397230472965553 -0.043358540743459482447 -0.50011387470015455925 -2.8154563514066297536 -0.092782408570965743677 -4.8176189776892091032 -1.8451107237861330557 0.69526547096920998658 0.92475216075430932694 0.36002099329160131003 1.8312070885534375009 -0.84547829821404996142 1.3888144429700901572 -1.2900444720258916753 1.1794094655382159065 2.0170131741383650059 -0.04154693809514471009 -1.4905850642851947718 -0.13241914996182763131;-0.51645705709286127139 0.39059465471794574398 0.15570712515771958917 -0.68773417365648192856 -1.4252127038493942468 -0.88038509146144527939 -0.087232844480422219724 0.054165309514914765365 0.27341799647273579144 -0.085424733748918471599 0.089280332674256751568 -2.6182265902065342544 0.29256865080435456861 -0.24519674385035919451 0.31615010025150702688 0.34985736710066550614 -0.43032883449090075789 0.70139041383384004291 0.50267420388097550088 0.011277934657369386232 -0.12353623017501627612 1.3329916987516863269 -0.70301975359962076695 -0.13729696074365127512 0.610494892027465208;1.6215120066262491694 1.002022641061651953 -1.0738794000829159359 0.19568575564740831041 2.3781147981779922063 -0.011824251464386981159 -0.03031928646473424499 1.4100587210613944045 -0.17547366713846851427 -1.1243869040815415161 -0.37977542901832028743 -0.42073089972314919871 0.46917470640890540645 -0.039025164718147528631 -0.29008709000298787961 0.67182716264028996545 -0.45718947621472383336 0.74696890869295506921 1.0954547459170438373 2.1127018657594427431 -0.031274742533784899434 1.3434274136736461536 0.32526306727546450137 0.66805773025367209961 0.59818322722782402145;-0.45058112555778012664 0.78683051863394293246 0.22440340707744246829 -1.9931724339494392151 0.73593622435793359937 -0.75357115338514857328 0.97848008953897480655 0.68927191975626445064 1.7305125404058732119 4.7166210135408297432 -2.2966179511343463027 1.4930363314281194231 0.57601634718777761091 -2.9200457774015964318 2.5375495602825184349 0.10414821882261121599 -0.83086989367587527067 1.6792801475743321937 1.1943480319319101923 0.41242031260467149067 2.4260622834656029312 3.1402038366947242487 -1.2825689444142116535 1.3629179902773829181 -1.0984961049424233348;0.0825174241290589916 -0.91581090394946351729 0.30750849968661020384 0.25048663970604595486 -0.055312162186726840374 -0.6034060391050775074 -0.191249816506223691 -0.092817157858721827113 -0.53149668184949649952 0.08987721293036644854 -0.08517158824604004197 -1.0770950165572874546 -0.036793081201764860078 0.94953507386322866246 -0.66446426846942518996 -0.023179212447624834154 0.29901660943847319096 -0.68480085889393704779 -1.0065033020480333992 -0.064766207441031078962 -0.53381946252107137507 -1.3631505131063434977 0.25767367715197003752 0.44178188659883727007 -0.34573075990678731051;2.8186978429626119436 0.095181006926810876601 1.3386455903861587124 2.374784599310014066 4.9565908834506142711 -2.5768599267905738515 -0.53949160483966096535 -1.0432870692087601316 -0.63873029693462302081 2.2216228422338439863 0.85245493047299070177 1.2370429536507974166 0.87990338677921908772 1.2949240442460241418 -1.7630288765119739303 -1.5813032892290403986 0.63439985795789755052 1.7500425726557835571 -0.060648966737132756211 1.8596120789851269262 -1.1228024893086157032 -1.1272356181780163187 0.26550885815043162586 1.4160107384258231455 -2.2650857753576549847;-0.078805038564372736909 1.1501294404934188087 -0.40181800155209657088 -0.29519810287737346943 0.36687514885003741361 0.59473999344228656305 0.30887840978300912242 0.10546147644988933256 0.61378960454947317782 0.11181063964906273744 0.1538301666996788053 1.397427873294646794 0.25206173020759692349 -0.99419721053322229753 0.73346532853638879423 -0.062828017821486378813 -0.2474490430676279662 0.69355223613211458566 0.63229592992566674425 -0.39174598930554316301 0.74371579890597527829 1.2447233086534876811 -0.29226385332380655502 -0.61495439908310900456 0.2388507887094439841;-2.6393289237512855827 -3.3036846910324690896 1.9149749555446426985 0.39552448025809738841 1.9626527434896483548 0.77661287354795704996 2.444622199960541753 -3.3507291012606681413 2.2544576771267759163 -2.6102765505345182362 0.37964773034967619347 0.54424772327328607702 1.7379832827769148285 3.9475331935165489661 -1.1093383301175299138 1.3365750101713820275 -0.7096851103339835154 0.63944328689505436358 4.8156219664839046146 8.9381096479190311754 -4.0809810067383471832 3.3383701652310735497 -6.1415063459815613101 0.55415236510368359735 4.8007315539635690982;-0.46240499462915141127 -0.78150324661990433484 0.15860937668343122464 0.13786417610711307336 3.008846255624876509 -1.9123137219818917565 0.65772000014675380264 -0.094671588117438698617 -0.2641981498000287587 -1.1409219153615066666 -0.043952460522675852739 3.8969271898238133645 -0.53552970255040888148 0.34129010489072209023 -0.39905115038247707115 -1.0567836871661280274 1.0628315097462797123 0.29518350571831514229 -1.3034249184959834089 -0.68152139610689577154 -1.1293758581434951704 -1.8777897414118744912 1.1615805494891970895 0.87230230672732222974 0.40334594869505896453;0.3446473427309719173 1.5307726616526409202 -1.2523949821856392717 -0.54356484435373320085 1.2998404361240567528 -0.95208681898417735212 -2.5532315984932378861 -0.12225206069175738322 -0.85528403459305313294 0.83803446521728275354 -1.1901733509883398732 0.23088416817589771379 0.80323980434035757714 -4.3789835629606850276 0.30149729280361403649 2.4245349468321935049 0.094809208984717702196 1.732641090741383616 0.52177329684588902303 -2.905268801693686509 -0.37554991457122260945 -1.0947574408546090208 1.5299184136294590175 1.3236551501181070822 0.35940821729473110269;1.417231198336958542 0.56056333006795422413 -0.64196123205147925805 0.18194234190569688603 1.7019915480019709442 0.20701024532468326189 -0.18057991362741260266 1.1448685595215501998 -0.41647844956202867417 -0.90397347597918853435 0.050616615714362558909 0.26485331480793816716 0.099747548156660800767 -0.0011080793813735014507 -0.18864096300781518778 0.43384146273231882773 -0.16488051254639266019 -0.43982939522979774827 0.54306860503520038019 1.6702093373903847962 -0.21715360466810640361 0.86003675436456128445 0.34703940307249747654 0.11303963921797230419 0.99596294685566910676;0.52593771298431846173 -1.3735327659553495661 0.22216844452287307088 -0.51828481645302160175 1.2832921989596024481 1.5886499689196167395 0.49314048530285176097 -0.3241479308431813311 0.77549409103064492754 -0.82113189984087298079 -0.23835843487812527486 2.0167907128865847355 -0.88293828496432735786 0.70515727719243415095 -0.032962265772239915385 -0.13420815871904029359 -0.16369460411519365373 -1.1644182893043626414 1.0016337543356716999 1.0118558416795562227 -0.18521133163239955621 0.11276156050574849543 -0.29194236391235522943 0.27606859861025456748 0.47415564318307912295];

% Layer 3
b3 = -1.5928647901987902369;
LW3_2 = [-0.91582304810217329827 -0.48123818299492787665 -2.2289619730246532647 -0.32404122754215575197 0.57331535415029866165 -2.3745852409974355091 0.72849208321633451835 2.4105811723983183725 0.16795905827682144906 2.1757333733395589626 6.2777177522934843878 0.43338883446171455605 -0.054625183790416455276 8.2089039238726329017 0.3231280962008555302];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.90239167587468;
y1_step1.xoffset = 7.36300175998845;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
